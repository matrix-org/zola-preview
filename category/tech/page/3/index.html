<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - Tech</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/png" href="/assets/favicon.png" />
    <link rel="stylesheet" href="/style.css" />

    
<link rel="alternate" type="application/rss+xml" title="RSS" href="/category/tech/atom.xml">
</head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            ">
            Blog
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <a href="&#x2F;docs&#x2F;" class="section ">
                Documentation
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                </div>
            </div>
        </div>
        
        
        
        
        
        <div class="section-wrap">
            <a href="&#x2F;ecosystem&#x2F;" class="section ">
                Ecosystem
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bots&#x2F;">Bots</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        
<div id="taxonomy-single">
    <div class="content">
        <header>
            <h1>Tech</h1>
            52 posts tagged with "Tech" <a href="/category">(See all Category)</a>
            
            <h2>
                <small><a href="/category/tech/atom.xml">Atom Feed</a></small>
            </h2>
            
        </header>

        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2017&#x2F;02&#x2F;04&#x2F;synapse-0-19-is-here-just-in-time-for-fosdem&#x2F;" title="Synapse 0.19 is here, just in time for FOSDEM!">Synapse 0.19 is here, just in time for FOSDEM!</a></h2>
                <span>
                    04.02.2017 00:00
                    —
                    <a href="/category/tech">
                        Tech
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>We're happy to announce the release of Synapse 0.19.0 (same as 0.19.0-rc4) today, just in time for anyone discovering Matrix for the first time at FOSDEM 2017!  In fact, here's Erik doing the release right now (with moral support from Luke):</p>
<img class="aligncenter size-large wp-image-1900" src="/blog/wp-content/uploads/2017/02/release-1024x768.jpg" alt="release" width="1024" height="768" />
<p>This is a pretty big release, with a bunch of new features and lots and lots of debugging and optimisation work following on some of the dramas that we had with 0.18 over the Christmas break.  The biggest things are:</p>
<ul>
 	<li>IPv6 Support (unless you have an IPv6 only resolver), thanks to contributions from Glyph from Twisted and Kyrias!</li>
 	<li>A new API for tracking the E2E devices present in a room (required for fixing many of the remaining E2E bugs...)</li>
 	<li>Rewrite the 'state resolution' algorithm to be orders of magnitude more performant</li>
 	<li>Lots of tuning to the caching logic.</li>
</ul>
If you're already running a server, please upgrade!  And if you're not, go grab yourself a <a href="https://github.com/matrix-org/synapse">brand new Synapse</a> from Github. Debian packages will follow shortly (as soon as Erik can figure out the necessary backporting required for Twisted 16.6.0)
<p>And here's the full changelog...</p>
<p> </p>
<div class="release-header">
<h1 class="release-title">Changes in synapse v0.19.0 (2017-02-04)</h1>
</div>
<div class="markdown-body">
<p>No changes since RC 4.</p>
<h1>Changes in synapse v0.19.0-rc4 (2017-02-02)</h1>
<ul>
 	<li>Bump cache sizes for common membership queries (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1879" data-url="https://github.com/matrix-org/synapse/issues/1879" data-id="204961298" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1879</a>)</li>
</ul>
<h1>Changes in synapse v0.19.0-rc3 (2017-02-02)</h1>
<ul>
 	<li>Fix email push in pusher worker (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1875" data-url="https://github.com/matrix-org/synapse/issues/1875" data-id="204840617" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1875</a>)</li>
 	<li>Make presence.get_new_events a bit faster (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1876" data-url="https://github.com/matrix-org/synapse/issues/1876" data-id="204868725" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1876</a>)</li>
 	<li>Make /keys/changes a bit more performant (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1877" data-url="https://github.com/matrix-org/synapse/issues/1877" data-id="204905372" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1877</a>)</li>
</ul>
<h1>Changes in synapse v0.19.0-rc2 (2017-02-02)</h1>
<ul>
 	<li>Include newly joined users in /keys/changes API (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1872" data-url="https://github.com/matrix-org/synapse/issues/1872" data-id="204651600" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1872</a>)</li>
</ul>
<h1>Changes in synapse v0.19.0-rc1 (2017-02-02)</h1>
Features:
<ul>
 	<li>Add support for specifying multiple bind addresses (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1709" data-url="https://github.com/matrix-org/synapse/issues/1709" data-id="196299310" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1709</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1712" data-url="https://github.com/matrix-org/synapse/issues/1712" data-id="196557084" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1712</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1795" data-url="https://github.com/matrix-org/synapse/issues/1795" data-id="199882750" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1795</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1835" data-url="https://github.com/matrix-org/synapse/issues/1835" data-id="202121261" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1835</a>). Thanks to <a class="user-mention" href="https://github.com/kyrias">@kyrias</a>!</li>
 	<li>Add /account/3pid/delete endpoint (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1714" data-url="https://github.com/matrix-org/synapse/issues/1714" data-id="196744832" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1714</a>)</li>
 	<li>Add config option to configure the Riot URL used in notification emails (PR <a class="issue-link js-issue-link" title="Allow configuring the Riot URL used in notification emails" href="https://github.com/matrix-org/synapse/pull/1811" data-id="200657367" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1811</a>). Thanks to <a class="user-mention" href="https://github.com/aperezdc">@aperezdc</a>!</li>
 	<li>Add username and password config options for turn server (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1832" data-url="https://github.com/matrix-org/synapse/issues/1832" data-id="201858252" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1832</a>). Thanks to <a class="user-mention" href="https://github.com/xsteadfastx">@xsteadfastx</a>!</li>
 	<li>Implement device lists updates over federation (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1857" data-url="https://github.com/matrix-org/synapse/issues/1857" data-id="203413361" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1857</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1861" data-url="https://github.com/matrix-org/synapse/issues/1861" data-id="204067531" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1861</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1864" data-url="https://github.com/matrix-org/synapse/issues/1864" data-id="204251726" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1864</a>)</li>
 	<li>Implement /keys/changes (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1869" data-url="https://github.com/matrix-org/synapse/issues/1869" data-id="204547521" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1869</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1872" data-url="https://github.com/matrix-org/synapse/issues/1872" data-id="204651600" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1872</a>)</li>
</ul>
Changes:
<ul>
 	<li>Improve IPv6 support (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1696" data-url="https://github.com/matrix-org/synapse/issues/1696" data-id="195001361" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1696</a>). Thanks to <a class="user-mention" href="https://github.com/kyrias">@kyrias</a> and <a class="user-mention" href="https://github.com/glyph">@glyph</a>!</li>
 	<li>Log which files we saved attachments to in the media_repository (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1791" data-url="https://github.com/matrix-org/synapse/issues/1791" data-id="199834508" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1791</a>)</li>
 	<li>Linearize updates to membership via PUT /state/ to better handle multiple joins (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1787" data-url="https://github.com/matrix-org/synapse/issues/1787" data-id="199625078" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1787</a>)</li>
 	<li>Limit number of entries to prefill from cache on startup (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1792" data-url="https://github.com/matrix-org/synapse/issues/1792" data-id="199837759" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1792</a>)</li>
 	<li>Remove full_twisted_stacktraces option (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1802" data-url="https://github.com/matrix-org/synapse/issues/1802" data-id="200333064" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1802</a>)</li>
 	<li>Measure size of some caches by sum of the size of cached values (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1815" data-url="https://github.com/matrix-org/synapse/issues/1815" data-id="201019660" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1815</a>)</li>
 	<li>Measure metrics of string_cache (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1821" data-url="https://github.com/matrix-org/synapse/issues/1821" data-id="201347397" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1821</a>)</li>
 	<li>Reduce logging verbosity (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1822" data-url="https://github.com/matrix-org/synapse/issues/1822" data-id="201347914" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1822</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1823" data-url="https://github.com/matrix-org/synapse/issues/1823" data-id="201350918" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1823</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1824" data-url="https://github.com/matrix-org/synapse/issues/1824" data-id="201351456" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1824</a>)</li>
 	<li>Don't clobber a displayname or avatar_url if provided by an m.room.member event (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1852" data-url="https://github.com/matrix-org/synapse/issues/1852" data-id="202898869" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1852</a>)</li>
 	<li>Better handle 401/404 response for federation /send/ (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1866" data-url="https://github.com/matrix-org/synapse/issues/1866" data-id="204298485" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1866</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1871" data-url="https://github.com/matrix-org/synapse/issues/1871" data-id="204619103" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1871</a>)</li>
</ul>
Fixes:
<ul>
 	<li>Fix ability to change password to a non-ascii one (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1711" data-url="https://github.com/matrix-org/synapse/issues/1711" data-id="196303488" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1711</a>)</li>
 	<li>Fix push getting stuck due to looking at the wrong view of state (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1820" data-url="https://github.com/matrix-org/synapse/issues/1820" data-id="201302378" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1820</a>)</li>
 	<li>Fix email address comparison to be case insensitive (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1827" data-url="https://github.com/matrix-org/synapse/issues/1827" data-id="201573837" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1827</a>)</li>
 	<li>Fix occasional inconsistencies of room membership (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1836" data-url="https://github.com/matrix-org/synapse/issues/1836" data-id="202122666" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1836</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1840" data-url="https://github.com/matrix-org/synapse/issues/1840" data-id="202175956" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1840</a>)</li>
</ul>
Performance:
<ul>
 	<li>Don't block messages sending on bumping presence (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1789" data-url="https://github.com/matrix-org/synapse/issues/1789" data-id="199812171" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1789</a>)</li>
 	<li>Change device_inbox stream index to include user (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1793" data-url="https://github.com/matrix-org/synapse/issues/1793" data-id="199845292" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1793</a>)</li>
 	<li>Optimise state resolution (PR <a class="issue-link js-issue-link" title=" Optimise state resolution" href="https://github.com/matrix-org/synapse/pull/1818" data-id="201285644" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1818</a>)</li>
 	<li>Use DB cache of joined users for presence (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1862" data-url="https://github.com/matrix-org/synapse/issues/1862" data-id="204068613" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1862</a>)</li>
 	<li>Add an index to make membership queries faster (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1867" data-url="https://github.com/matrix-org/synapse/issues/1867" data-id="204327354" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1867</a>)</li>
</ul>
</div>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2017&#x2F;01&#x2F;25&#x2F;matrix-org-homeserver-outage-25th-jan-2017&#x2F;" title="Matrix.org homeserver outage (25th Jan 2017)">Matrix.org homeserver outage (25th Jan 2017)</a></h2>
                <span>
                    25.01.2017 00:00
                    —
                    <a href="/category/tech">
                        Tech
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi folks,</p>
<p>As many will have noticed there was a major outage on the Matrix homeserver for matrix.org last night (UK-time).  This impacted anyone with an account on the matrix.org server, as well as anyone using matrix.org-hosted bots &amp; bridges.  As Matrix rooms are shared over all participants, rooms with participants on other servers were unaffected (for users on those servers). Here's a quick explanation of what went wrong (times are UTC):</p>
<ul>
<li>2017-01-24 16:00 - We notice that we're badly running out of diskspace on the matrix.org backup postgres replica.  (Turns out the backup box, whilst identical hardware to the master, had been built out as RAID-10 rather than RAID-5 and so has less disk space).
</li><li>2017-01-24 17:00 - We decide to drop a large DB index: <code>event_push_actions(room_id, event_id, user_id, profile_tag)</code>, which was taking up a disproportionate amount of disk space, on the basis that it didn't appear to be being used according to the postgres stats.  All seems good.
</li><li>2017-01-24 ~23:00 - The core matrix.org team go to bed.
</li><li>2017-01-24 23:33 - Someone redacts an event in a very active room (probably #matrix:matrix.org) which necessitates redacting the associated push notification from the event_push_actions table.  This takes out a lock within persist_event, which is then blocked on deleting the push notification.  It turns out that this deletion requires the missing DB constraint, causing the query to run for hours whilst holding the transaction lock.  The symptoms are that anything reading events from the DB was blocked on the transaction, causing messages not to be relayed to other clients or servers despite appearing to send correctly.  Meanwhile, the fact that events are being received by the server fine (including over federation) makes the monitoring graphs look largely healthy.
</li><li>2017-01-24 23:35 - End-to-end monitoring detects problems, and sends alerts into pagerduty and various Matrix rooms.  Unfortunately we'd failed to upgrade the pageduty trial into a paid account a few months ago, however, so the alerts are lost.
</li><li>2017-01-25 08:00 - Matrix team starts to wake up and spot problems, but confusion over the right escalation process (especially with Matthew on holiday) means folks assume that other members of the team must already be investigating.
</li><li>2017-01-25 09:00 - Server gets restarted, service starts to resume, although box suffers from load problems as traffic tries to catch up.
</li><li>2017-01-25 09:45 - Normal service on the homeserver itself is largely resumed (other than bridges; see below)
</li><li>2017-01-25 10:41 - Root cause established and the redaction path is patched on matrix.org to stop a recurrence.
</li><li>2017-01-25 11:15 - Bridges are seen to be lagging and taking much longer to recover than expected.   Decision made to let them continue to catch up normally rather than risk further disruption (e.g. IRC join/part spam) by restarting them.
</li><li>2017-01-25 13:00 - All hosted bridges returned to normal.</li>
</ul>
<p>Obviously this is rather embarrassing, and a huge pain for everyone using the matrix.org homeserver - many apologies indeed for the outage. On the plus side, all the other Matrix homeservers out there carried on without noticing any problems (which actually complicated spotting that things had broken, given many of the core team primarily use their personal homeservers).</p>
<p>In some ways the root cause here is that the core team has been focusing all its energy recently on improving the overall Matrix codebase rather than operational issues on matrix.org itself, and as a result our ops practices have fallen behind (especially as the health of the Matrix ecosystem as a whole is arguably more important than the health of a single homeserver deployment).  However, we clearly need to improve things here given the number of people (&gt;750K at the last count) dependent on the Matrix.org homeserver and its bridges &amp; bots.</p>
<p>Lessons learnt on our side are:</p>
<ul>
<li>Make sure that even though we had monitoring graphs & thresholds set up on all the right things... monitoring alerts actually have to be routed somewhere useful - i.e. phone calls to the team's phones.  Pagerduty is now set up and running properly to this end.</li>
<li>Make sure that people know to wake up the right people anyway if the monitoring alerting system fails.</li>
<li>To be even more paranoid about hotfixes to production at 5pm, especially if they can wait 'til the next day (as this one could have).</li>
<li>To investigate ways to rapidly recover bridges without causing unnecessary disruption.</li>
</ul>
<p>Apologies again to everyone who was bitten by this - we're doing everything we can to ensure it doesn't happen again.</p>
<p>Matthew &amp; the team.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2017&#x2F;01&#x2F;06&#x2F;synapse-0-18-6-is-out-please-upgrade-especially-if-on-0-18-5&#x2F;" title="Synapse 0.18.7 is out - Please upgrade, especially if on 0.18.5 or 0.18.6.">Synapse 0.18.7 is out - Please upgrade, especially if on 0.18.5 or 0.18.6.</a></h2>
                <span>
                    06.01.2017 00:00
                    —
                    <a href="/category/tech">
                        Tech
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p><del>TL;DR: Please upgrade to <a href="https://github.com/matrix-org/synapse/releases/tag/v0.18.6">Synapse 0.18.6</a>, especially if you are on 0.18.5 which is a bad release.</del></p>
<p>TL;DR: Please upgrade to <strong><a href="https://github.com/matrix-org/synapse/releases/tag/v0.18.7">Synapse 0.18.7</a> </strong>- especially if you are on 0.18.5 or 0.18.6 which both have serious federation bugs.</p>
<p>Synapse 0.18.5 contained a really nasty regression in the federation code which causes servers to echo transactions that they receive back out to the other servers participating in a room. This has effectively resulted in a gradual amplification of federation traffic as more people have installed 0.18.5, causing every transaction to be received N times over where N is the number of servers in the room.</p>
<p>We'll do a full write-up once we're happy we've tracked down all the root problems here, but the short story is that this hit critical mass around Dec 26, where typical Synapses started to fail to keep up with the traffic - especially when requests hit some of the more inefficient or buggy codepaths in Synapse.  As servers started to overload with inbound connections, this in turn started to slow down and consume resources on the connecting servers - especially due to an architectural mistake in Synapse which blocks inbound connections until the request has been fully processed (which could require the receiving server in turn to make outbound connections), rather than releasing the inbound connection asap.  This hit the point that servers were running out of file descriptors due to all the outbound and inbound connections, at which point they started to entirely tarpit inbound connections, resulting in a slow feedback loop making the whole situation even worse.</p>
<p>We've spent the last two weeks hunting all the individual inefficient requests which were mysteriously starting to cause more problems than they ever had before; then trying to understand the feedback misbehaviour; before finally discovering the regression in 0.18.5 as the plausible root cause of the problem.  Troubleshooting has been complicated by most of the team having unplugged for the holidays, and because this is the first (and hopefully last!) failure mode to be distributed across the whole network, making debugging something of a nightmare - especially when the overloading was triggering a plethora of different exotic failure modes.  Huge thanks to everyone who has shared their server logs with the team to help debug this.</p>
<p>Some of these failure modes are still happening (and we're working on fixing them), but we believe that if everyone upgrades away from the bad 0.18.5 release most of the symptoms will go away, or at least go back to being as bad as they were before.  Meanwhile, if you find your server suddenly grinding to a halt after upgrading to <del>0.18.6</del> 0.18.7 please come tell us in <a href="https://matrix.to/#/#matrix-dev:matrix.org">#matrix-dev:matrix.org</a>.</p>
<p>We're enormously sorry if you've been bitten by the federation instability this has caused - and many many thanks for your patience whilst we've hunted it down.  On the plus side, it's given us a lot of <em>very</em> useful insight into how to implement federation in future homeservers to not suffer from any of these failure modes.  It's also revealed the root cause of why Synapse's RAM usage is quite so bad - it turns out that it actually idles at around 200MB with default caching, but there's a particular codepath which causes it to spike temporarily by 1GB or so - and that RAM is then not released back to the OS.  We're working on a fix for this too, but it'll come after 0.18.7.</p>
<p>Unfortunately the original release of 0.18.6 still exhibits the root bug, but 0.18.7 (originally released as 0.18.7-rc2) should finally fix this.  Sorry for all the upgrades :(</p>
<p>So <a href="https://github.com/matrix-org/synapse/releases/tag/v0.18.7">please upgrade as soon as possible</a> to 0.18.7.  <a href="/packages/debian">Debian packages</a> are available as normal.</p>
<p>thanks,</p>
<p>Matthew</p>
<div class="markdown-body">
<h3>Changes in synapse v0.18.7 (2017-01-09)</h3>
<ul>
<li>No changes from v0.18.7-rc2</li>
</ul>
<h3>Changes in synapse v0.18.7-rc2 (2017-01-07)</h3>
Bug fixes:
<ul>
 	<li>Fix error in rc1's discarding invalid inbound traffic logic that was incorrectly discarding missing events
</li>
</ul>
<h3>Changes in synapse v0.18.7-rc1 (2017-01-06)</h3>
Bug fixes:
<ul>
 	<li>Fix error in #PR 1764 to actually fix the nightmare #1753 bug.
</li>
 	<li>Improve deadlock logging further
</li>
 	<li>Discard inbound federation traffic from invalid domains, to immunise 
against #1753
</li>
</ul>
<h3>Changes in synapse v0.18.6 (2017-01-06)</h3>
Bug fixes:
<ul>
 	<li>Fix bug when checking if a guest user is allowed to join a room - thanks to Patrik Oldsberg (PR <a class="issue-link js-issue-link" title="handlers/room_member: fix guest access check when joining rooms" href="https://github.com/matrix-org/synapse/pull/1772" data-id="199209215" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1772</a>)</li>
</ul>
<h3>Changes in synapse v0.18.6-rc3 (2017-01-05)</h3>
Bug fixes:
<ul>
 	<li>Fix bug where we failed to send ban events to the banned server (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1758" data-url="https://github.com/matrix-org/synapse/issues/1758" data-id="198709898" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1758</a>)</li>
 	<li>Fix bug where we sent event that didn't originate on this server to other servers (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1764" data-url="https://github.com/matrix-org/synapse/issues/1764" data-id="198934605" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1764</a>)</li>
 	<li>Fix bug where processing an event from a remote server took a long time because we were making long HTTP requests (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1765" data-url="https://github.com/matrix-org/synapse/issues/1765" data-id="198940353" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1765</a>, PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1744" data-url="https://github.com/matrix-org/synapse/issues/1744" data-id="198236017" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1744</a>)</li>
</ul>
Changes:
<ul>
 	<li>Improve logging for debugging deadlocks (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1766" data-url="https://github.com/matrix-org/synapse/issues/1766" data-id="198946790" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1766</a>, PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1767" data-url="https://github.com/matrix-org/synapse/issues/1767" data-id="198958245" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1767</a>)</li>
</ul>
<h3>Changes in synapse v0.18.6-rc2 (2016-12-30)</h3>
Bug fixes:
<ul>
 	<li>Fix memory leak in twisted by initialising logging correctly (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1731" data-url="https://github.com/matrix-org/synapse/issues/1731" data-id="198134635" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1731</a>)</li>
 	<li>Fix bug where fetching missing events took an unacceptable amount of time in large rooms (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1734" data-url="https://github.com/matrix-org/synapse/issues/1734" data-id="198178611" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1734</a>)</li>
</ul>
<h3>Changes in synapse v0.18.6-rc1 (2016-12-29)</h3>
Bug fixes:
<ul>
 	<li>Make sure that outbound connections are closed (PR <a class="issue-link js-issue-link" title="Wrap connections in an N minute timeout to ensure they get reaped correctly" href="https://github.com/matrix-org/synapse/pull/1725" data-id="197934419" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1725</a>)</li>
</ul>
</div>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2016&#x2F;12&#x2F;19&#x2F;matrix-appservice-irc-0-7-0-is-out&#x2F;" title="matrix-appservice-irc 0.7.0 is out!">matrix-appservice-irc 0.7.0 is out!</a></h2>
                <span>
                    19.12.2016 00:00
                    —
                    <a href="/category/tech">
                        Tech
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Also, we've just released a major update to the IRC bridge codebase after trialling it on the matrix.org-hosted bridges for the last few days.</p>
<p>The big news is:</p>
<ul>
 	<li>The bridge uses Synapse 0.18.5's new APIs for managing the public room list (improving performance a bunch)</li>
 	<li>Much faster startup using the new /joined_rooms and /joined_members APIs in Synapse 0.18.5</li>
 	<li>The bridge will now remember your NickServ password (encrypted at rest) if you want it to via the <code>!storepass</code> command</li>
 	<li>You can now set arbitrary user modes for IRC clients on connection (to mitigate PM spam etc)</li>
 	<li>After a split, the bridge will drop Matrix-&gt;IRC messages older than N seconds, rather than try to catch the IRC room up on everything they missed on Matrix :S</li>
 	<li>Operational metrics are now implemented using Prometheus rather than statsd</li>
 	<li>New <code>!quit</code> command to nuke your user from the remote IRC network</li>
 	<li>Membership list syncing for IRC-&gt;Matrix is enormously improved, and enabled for all matrix.org-hosted bridges apart from Freenode.  &lt;b&gt;At last, membership lists should be in sync between IRC and Matrix; please let us know if they're not&lt;/b&gt;.</li>
 	<li>Better error logging</li>
</ul>
For full details, please see <a href="https://github.com/matrix-org/matrix-appservice-irc/blob/master/CHANGELOG.md">the changelog</a>.
<p>With things like NickServ-pass storing, !quit support and full bi-directional membership list syncing, it's never been a better time to run your own IRC bridge.  Please install or upgrade today from <a href="https://github.com/matrix-org/matrix-appservice-irc">https://github.com/matrix-org/matrix-appservice-irc</a>!</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2016&#x2F;12&#x2F;19&#x2F;synapse-0-18-5-released&#x2F;" title="Synapse 0.18.5 released!">Synapse 0.18.5 released!</a></h2>
                <span>
                    19.12.2016 00:00
                    —
                    <a href="/category/tech">
                        Tech
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi folks,</p>
<p>We released synapse 0.18.5 on Friday.  This is mainly about fixing performance problems with the unread room counts and the public room directory; polishing the E2E endpoints based on beta feedback; and general minor bits and bobs.</p>
<p>Get it whilst it's (almost) hot from <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>!  Changelog follows:</p>
<h3>Changes in synapse v0.18.5 (2016-12-16)</h3>
Bug fixes:
<ul>
 	<li>Fix federation /backfill returning events it shouldn't (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1700" data-url="https://github.com/matrix-org/synapse/issues/1700" data-id="195535459" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1700</a>)</li>
 	<li>Fix crash in url preview (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1701" data-url="https://github.com/matrix-org/synapse/issues/1701" data-id="195654621" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1701</a>)</li>
</ul>
<h3>Changes in synapse v0.18.5-rc3 (2016-12-13)</h3>
Features:
<ul>
 	<li>Add support for E2E for guests (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1653" data-url="https://github.com/matrix-org/synapse/issues/1653" data-id="191729740" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1653</a>)</li>
 	<li>Add new API appservice specific public room list (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1676" data-url="https://github.com/matrix-org/synapse/issues/1676" data-id="193810881" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1676</a>)</li>
 	<li>Add new room membership APIs (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1680" data-url="https://github.com/matrix-org/synapse/issues/1680" data-id="194337450" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1680</a>)</li>
</ul>
Changes:
<ul>
 	<li>Enable guest access for private rooms by default (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/653" data-url="https://github.com/matrix-org/synapse/issues/653" data-id="141629328" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#653</a>)</li>
 	<li>Limit the number of events that can be created on a given room concurrently (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1620" data-url="https://github.com/matrix-org/synapse/issues/1620" data-id="188559220" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1620</a>)</li>
 	<li>Log the args that we have on UI auth completion (PR <a class="issue-link js-issue-link" title="Log the args that we have on UI auth completion" href="https://github.com/matrix-org/synapse/pull/1649" data-id="191480434" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1649</a>)</li>
 	<li>Stop generating refresh_tokens (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1654" data-url="https://github.com/matrix-org/synapse/issues/1654" data-id="191730725" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1654</a>)</li>
 	<li>Stop putting a time caveat on access tokens (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1656" data-url="https://github.com/matrix-org/synapse/issues/1656" data-id="191962876" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1656</a>)</li>
 	<li>Remove unspecced GET endpoints for e2e keys (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1694" data-url="https://github.com/matrix-org/synapse/issues/1694" data-id="194929277" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1694</a>)</li>
</ul>
Bug fixes:
<ul>
 	<li>Fix handling of 500 and 429's over federation (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1650" data-url="https://github.com/matrix-org/synapse/issues/1650" data-id="191542366" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1650</a>)</li>
 	<li>Fix Content-Type header parsing (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1660" data-url="https://github.com/matrix-org/synapse/issues/1660" data-id="192589052" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1660</a>)</li>
 	<li>Fix error when previewing sites that include unicode, thanks to <a class="user-mention" href="https://github.com/kyrias">@kyrias</a> (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1664" data-url="https://github.com/matrix-org/synapse/issues/1664" data-id="192830301" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1664</a>)</li>
 	<li>Fix some cases where we drop read receipts (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1678" data-url="https://github.com/matrix-org/synapse/issues/1678" data-id="194321090" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1678</a>)</li>
 	<li>Fix bug where calls to <code>/sync</code> didn't correctly timeout (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1683" data-url="https://github.com/matrix-org/synapse/issues/1683" data-id="194627488" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1683</a>)</li>
 	<li>Fix bug where E2E key query would fail if a single remote host failed (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1686" data-url="https://github.com/matrix-org/synapse/issues/1686" data-id="194665373" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1686</a>)</li>
</ul>
<h3>Changes in synapse v0.18.5-rc2 (2016-11-24)</h3>
Bug fixes:
<ul>
 	<li>Don't send old events over federation, fixes bug in -rc1.</li>
</ul>
<h3>Changes in synapse v0.18.5-rc1 (2016-11-24)</h3>
Features:
<ul>
 	<li>Implement "event_fields" in filters (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1638" data-url="https://github.com/matrix-org/synapse/issues/1638" data-id="190978482" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1638</a>)</li>
</ul>
Changes:
<ul>
 	<li>Use external ldap auth package (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1628" data-url="https://github.com/matrix-org/synapse/issues/1628" data-id="189389095" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1628</a>)</li>
 	<li>Split out federation transaction sending to a worker (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1635" data-url="https://github.com/matrix-org/synapse/issues/1635" data-id="190696205" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1635</a>)</li>
 	<li>Fail with a coherent error message if <code>/sync?filter=</code> is invalid (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1636" data-url="https://github.com/matrix-org/synapse/issues/1636" data-id="190714631" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1636</a>)</li>
 	<li>More efficient notif count queries (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1644" data-url="https://github.com/matrix-org/synapse/issues/1644" data-id="191311986" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1644</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2016&#x2F;11&#x2F;22&#x2F;synapse-0-18-4&#x2F;" title="Synapse 0.18.4">Synapse 0.18.4</a></h2>
                <span>
                    22.11.2016 00:00
                    —
                    <a href="/category/tech">
                        Tech
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Uncharacteristically, we're actually remembering to announce a new release of Synapse!</p>
<p>Major performance fixes on federation, as well as the changes required to support E2E encrypted attachments (yay!)</p>
<p>Please install or upgrade from <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a> :)</p>
<div class="markdown-body">
<h3></h3>
<h3>Changes in synapse v0.18.4 (2016-11-22)</h3>
Bug fixes:
<ul>
 	<li>Add workaround for buggy clients that the fail to register (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1632" data-url="https://github.com/matrix-org/synapse/issues/1632" data-id="190371942" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1632</a>)</li>
</ul>
<h3>Changes in synapse v0.18.4-rc1 (2016-11-14)</h3>
Changes:
<ul>
 	<li>Various database efficiency improvements (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1188" data-url="https://github.com/matrix-org/synapse/issues/1188" data-id="186341262" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1188</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1192" data-url="https://github.com/matrix-org/synapse/issues/1192" data-id="187084488" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1192</a>)</li>
 	<li>Update default config to blacklist more internal IPs, thanks to Euan Kemp <a class="user-mention" href="https://github.com/euank">@euank</a> (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1198" data-url="https://github.com/matrix-org/synapse/issues/1198" data-id="187605325" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1198</a>)</li>
 	<li>Allow specifying duration in minutes in config, thanks to Daniel Dent <a class="user-mention" href="https://github.com/DanielDent">@DanielDent</a> (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1625" data-url="https://github.com/matrix-org/synapse/issues/1625" data-id="188899917" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1625</a>)</li>
</ul>
Bug fixes:
<ul>
 	<li>Fix media repo to set CORs headers on responses (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1190" data-url="https://github.com/matrix-org/synapse/issues/1190" data-id="186776121" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1190</a>)</li>
 	<li>Fix registration to not error on non-ascii passwords (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1191" data-url="https://github.com/matrix-org/synapse/issues/1191" data-id="187025542" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1191</a>)</li>
 	<li>Fix create event code to limit the number of prev_events (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1615" data-url="https://github.com/matrix-org/synapse/issues/1615" data-id="187962678" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1615</a>)</li>
 	<li>Fix bug in transaction ID deduplication (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/1624" data-url="https://github.com/matrix-org/synapse/issues/1624" data-id="188782596" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#1624</a>)</li>
</ul>
</div>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2016&#x2F;08&#x2F;15&#x2F;matrix-irc-bridge-reaches-v0-4-0&#x2F;" title="Matrix-IRC Bridge reaches v0.4.0">Matrix-IRC Bridge reaches v0.4.0</a></h2>
                <span>
                    15.08.2016 00:00
                    —
                    <a href="/category/tech">
                        Tech
                    </a>
                    —
                    <a
                        href="/author/kegan-dougal">
                        Kegan Dougal
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>A new version of the IRC bridge has been released onto NPM and the matrix.org bridges!</p>
<p>The IRC bridge has undergone quite a number of modifications since its <a href="/blog/2015/04/22/matrix-irc-application-service/">original inception</a> over a year ago. Version 0.4 introduces a number of additional features and improvements, which can be found in the <a href="https://github.com/matrix-org/matrix-appservice-irc/blob/master/CHANGELOG.md">changelog</a>. These include automatically linkifying large blocks of text and mirroring kicks/bans to and from Matrix.</p>
<p>With a plethora of protocol gotchas and non-standard features on well-known IRC networks, IRC is a challenging protocol to work with. It's inevitable that some corner cases are not handled well by the bridge. Over time, the bridge has been hardened by edge cases which we have encountered and patched. These releases signify the continual improvement in the robustness of the bridge, which we aim to continue with into the foreseeable future.</p>
<p>Performance wise, our busiest bridge which we host is the bridge to <a href="http://freenode.net/">Freenode</a>. We now have over 1300 active connections to it and have a steady rate of about 240 messages per minute going through to Matrix. We expect to see this number increase significantly over the next few months. Let's see what the next year will bring!</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2016&#x2F;03&#x2F;30&#x2F;synapse-0-14-is-released&#x2F;" title="Synapse 0.14 is released!">Synapse 0.14 is released!</a></h2>
                <span>
                    30.03.2016 00:00
                    —
                    <a href="/category/tech">
                        Tech
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>We just released Synapse 0.14.0 - a major update which incorporates lots of work on making Synapse more RAM efficient. There's still a lot of room for further improvements, but the main headlines are reducing the resident memory footprint dramatically by interning strings and deduplicating events across the many different caches. It also adds a much-needed <code>SYNAPSE_CACHE_FACTOR</code> environment variable that can be used to globally decrease or increase the sizing of all of Synapse's various caches (with an associated slow-down or speed-up in performance). Quite how improved the new memory footprint seems to very much depend on your own use case, but it's certainly a step in the right direction.</p>
<p>For more details on recent Synapse performance work (and a general state of the union for the whole Matrix ecosystem), check out <a href="/blog/2016/03/26/the-matrix-spring-special/">our Spring update</a>.</p>
<p>Get all new synapse from <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a> - we recommend upgrading (or installing!) asap :)</p>
<p>Full changelog follows:</p>
<p> </p>
<div class="markdown-body">
<h1>Changes in synapse v0.14.0 (2016-03-30)</h1>
No changes from v0.14.0-rc2
<h1>Changes in synapse v0.14.0-rc2 (2016-03-23)</h1>
Features:
<ul>
	<li>Add published room list API (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/657" data-url="https://github.com/matrix-org/synapse/issues/657" data-id="142376806" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#657</a>)</li>
</ul>
Changes:
<ul>
	<li>Change various caches to consume less memory (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/656" data-url="https://github.com/matrix-org/synapse/issues/656" data-id="141883503" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#656</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/658" data-url="https://github.com/matrix-org/synapse/issues/658" data-id="142428334" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#658</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/660" data-url="https://github.com/matrix-org/synapse/issues/660" data-id="142630190" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#660</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/662" data-url="https://github.com/matrix-org/synapse/issues/662" data-id="142908266" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#662</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/663" data-url="https://github.com/matrix-org/synapse/issues/663" data-id="142922725" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#663</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/665" data-url="https://github.com/matrix-org/synapse/issues/665" data-id="142938097" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#665</a>)</li>
	<li>Allow rooms to be published without requiring an alias (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/664" data-url="https://github.com/matrix-org/synapse/issues/664" data-id="142929970" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#664</a>)</li>
	<li>Intern common strings in caches to reduce memory footprint (<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/666" data-url="https://github.com/matrix-org/synapse/issues/666" data-id="143009852" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#666</a>)</li>
</ul>
Bug fixes:
<ul>
	<li>Fix reject invites over federation (PR <a class="issue-link js-issue-link" title="Persist rejection of invites over federation" href="https://github.com/matrix-org/synapse/pull/646" data-id="140973458" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#646</a>)</li>
	<li>Fix bug where registration was not idempotent (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/649" data-url="https://github.com/matrix-org/synapse/issues/649" data-id="141252178" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#649</a>)</li>
	<li>Update aliases event after deleting aliases (PR <a class="issue-link js-issue-link" title="Update aliases event after deletion" href="https://github.com/matrix-org/synapse/pull/652" data-id="141592232" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#652</a>)</li>
	<li>Fix unread notification count, which was sometimes wrong (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/661" data-url="https://github.com/matrix-org/synapse/issues/661" data-id="142657556" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#661</a>)</li>
</ul>
<h1>Changes in synapse v0.14.0-rc1 (2016-03-14)</h1>
Features:
<ul>
	<li>Add event_id to response to state event PUT (PR <a class="issue-link js-issue-link" title="client/v1/room: include event_id in response to state event PUT" href="https://github.com/matrix-org/synapse/pull/581" data-id="134248706" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#581</a>)</li>
	<li>Allow guest users access to messages in rooms they have joined (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/587" data-url="https://github.com/matrix-org/synapse/issues/587" data-id="134846121" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#587</a>)</li>
	<li>Add config for what state is included in a room invite (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/598" data-url="https://github.com/matrix-org/synapse/issues/598" data-id="135736142" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#598</a>)</li>
	<li>Send the inviter's member event in room invite state (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/607" data-url="https://github.com/matrix-org/synapse/issues/607" data-id="136466943" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#607</a>)</li>
	<li>Add error codes for malformed/bad JSON in /login (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/608" data-url="https://github.com/matrix-org/synapse/issues/608" data-id="136642285" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#608</a>)</li>
	<li>Add support for changing the actions for default rules (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/609" data-url="https://github.com/matrix-org/synapse/issues/609" data-id="136680904" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#609</a>)</li>
	<li>Add environment variable SYNAPSE_CACHE_FACTOR, default it to 0.1 (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/612" data-url="https://github.com/matrix-org/synapse/issues/612" data-id="137568719" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#612</a>)</li>
	<li>Add ability for alias creators to delete aliases (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/614" data-url="https://github.com/matrix-org/synapse/issues/614" data-id="137594003" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#614</a>)</li>
	<li>Add profile information to invites (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/624" data-url="https://github.com/matrix-org/synapse/issues/624" data-id="138490446" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#624</a>)</li>
</ul>
Changes:
<ul>
	<li>Enforce user_id exclusivity for AS registrations (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/572" data-url="https://github.com/matrix-org/synapse/issues/572" data-id="133037977" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#572</a>)</li>
	<li>Make adding push rules idempotent (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/587" data-url="https://github.com/matrix-org/synapse/issues/587" data-id="134846121" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#587</a>)</li>
	<li>Improve presence performance (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/582" data-url="https://github.com/matrix-org/synapse/issues/582" data-id="134315572" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#582</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/586" data-url="https://github.com/matrix-org/synapse/issues/586" data-id="134829627" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#586</a>)</li>
	<li>Change presence semantics for <code>last_active_ago</code> (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/582" data-url="https://github.com/matrix-org/synapse/issues/582" data-id="134315572" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#582</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/586" data-url="https://github.com/matrix-org/synapse/issues/586" data-id="134829627" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#586</a>)</li>
	<li>Don't allow <code>m.room.create</code> to be changed (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/596" data-url="https://github.com/matrix-org/synapse/issues/596" data-id="135558604" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#596</a>)</li>
	<li>Add 800x600 to default list of valid thumbnail sizes (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/616" data-url="https://github.com/matrix-org/synapse/issues/616" data-id="137914530" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#616</a>)</li>
	<li>Always include kicks and bans in full /sync (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/625" data-url="https://github.com/matrix-org/synapse/issues/625" data-id="138502688" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#625</a>)</li>
	<li>Send history visibility on boundary changes (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/626" data-url="https://github.com/matrix-org/synapse/issues/626" data-id="138524888" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#626</a>)</li>
	<li>Register endpoint now returns a refresh_token (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/637" data-url="https://github.com/matrix-org/synapse/issues/637" data-id="139811456" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#637</a>)</li>
</ul>
Bug fixes:
<ul>
	<li>Fix bug where we returned incorrect state in /sync (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/573" data-url="https://github.com/matrix-org/synapse/issues/573" data-id="133215098" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#573</a>)</li>
	<li>Always return a JSON object from push rule API (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/606" data-url="https://github.com/matrix-org/synapse/issues/606" data-id="136392145" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#606</a>)</li>
	<li>Fix bug where registering without a user id sometimes failed (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/610" data-url="https://github.com/matrix-org/synapse/issues/610" data-id="137394765" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#610</a>)</li>
	<li>Report size of ExpiringCache in cache size metrics (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/611" data-url="https://github.com/matrix-org/synapse/issues/611" data-id="137537841" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#611</a>)</li>
	<li>Fix rejection of invites to empty rooms (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/615" data-url="https://github.com/matrix-org/synapse/issues/615" data-id="137638777" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#615</a>)</li>
	<li>Fix usage of <code>bcrypt</code> to not use <code>checkpw</code> (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/619" data-url="https://github.com/matrix-org/synapse/issues/619" data-id="137949188" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#619</a>)</li>
	<li>Pin <code>pysaml2</code> dependency (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/634" data-url="https://github.com/matrix-org/synapse/issues/634" data-id="139556355" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#634</a>)</li>
	<li>Fix bug in <code>/sync</code> where timeline order was incorrect for backfilled events (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/635" data-url="https://github.com/matrix-org/synapse/issues/635" data-id="139635294" data-error-text="Failed to load issue title" data-permission-text="Issue title is private">#635</a>)</li>
</ul>
</div>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2016&#x2F;02&#x2F;10&#x2F;synapse-0-13-released&#x2F;" title="Synapse 0.13 released!">Synapse 0.13 released!</a></h2>
                <span>
                    10.02.2016 00:00
                    —
                    <a href="/category/tech">
                        Tech
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>Synapse 0.13 was released this afternoon, bringing a new wave of features, bug fixes and performance fixes.  The main headlines include: huge performance increases (big catchup /syncs that were taking 20s now take 0.3s!), support for server-side per-room unread message and notification badge counts, ability for guest accounts to upgrade into fully-fledged accounts, change default push rules back to notifying for group chats, and loads of bug fixes.  This release incorporates what-was 0.12.1-rc1.</p>
<p><b>Please note that on first launch after upgrading a pre-0.13 server to 0.13 or later, synapse will add a large database index which may take several minutes to complete.  Whilst the index is added the service will be unresponsive.</b></p>
<p>Please get the new release from <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a> and have fun!</p>
<p>Matthew</p>
<p>Full release notes:</p>
<code>
Changes in synapse v0.13.1 (2016-02-10)
=======================================
<ul>
<li>Bump matrix-angular-sdk (matrix web console) dependency to 0.6.8 to
pull in the fix for SYWEB-361 so that the default client can display
HTML messages again(!)</li>
</ul>
<h1 id="changes-in-synapse-v0-13-0-2016-02-10">Changes in synapse v0.13.0 (2016-02-10)</h1>
<p>This version includes an upgrade of the schema, specifically adding an index to
the <code>events</code> table. This may cause synapse to pause for several minutes the
first time it is started after the upgrade.</p>
<p>Changes:</p>
<ul>
<li>Improve general performance (PR #540, #543. #544, #54, #549, #567)</li>
<li>Change guest user ids to be incrementing integers (PR #550)</li>
<li>Improve performance of public room list API (PR #552)</li>
<li>Change profile API to omit keys rather than return null (PR #557)</li>
<li>Add <code>/media/r0</code> endpoint prefix, which is equivalent to <code>/media/v1/</code>
(PR #595)</li>
</ul>
<p>Bug fixes:</p>
<ul>
<li>Fix bug with upgrading guest accounts where it would fail if you opened the
registration email on a different device (PR #547)</li>
<li>Fix bug where unread count could be wrong (PR #568)</li>
</ul>
<h1 id="changes-in-synapse-v0-12-1-rc1-2016-01-29">Changes in synapse v0.12.1-rc1 (2016-01-29)</h1>
<p>Features:</p>
<ul>
<li>Add unread notification counts in <code>/sync</code> (PR #456)</li>
<li>Add support for inviting 3pids in <code>/createRoom</code> (PR #460)</li>
<li>Add ability for guest accounts to upgrade (PR #462)</li>
<li>Add <code>/versions</code> API (PR #468)</li>
<li>Add <code>event</code> to <code>/context</code> API (PR #492)</li>
<li>Add specific error code for invalid user names in <code>/register</code> (PR #499)</li>
<li>Add support for push badge counts (PR #507)</li>
<li>Add support for non-guest users to peek in rooms using <code>/events</code> (PR #510)</li>
</ul>
<p>Changes:</p>
<ul>
<li>Change <code>/sync</code> so that guest users only get rooms they've joined (PR #469)</li>
<li>Change to require unbanning before other membership changes (PR #501)</li>
<li>Change default push rules to notify for all messages (PR #486)</li>
<li>Change default push rules to not notify on membership changes (PR #514)</li>
<li>Change default push rules in one to one rooms to only notify for events that
are messages (PR #529)</li>
<li>Change <code>/sync</code> to reject requests with a <code>from</code> query param (PR #512)</li>
<li>Change server manhole to use SSH rather than telnet (PR #473)</li>
<li>Change server to require AS users to be registered before use (PR #487)</li>
<li>Change server not to start when ASes are invalidly configured (PR #494)</li>
<li>Change server to require ID and <code>as_token</code> to be unique for AS's (PR #496)</li>
<li>Change maximum pagination limit to 1000 (PR #497)</li>
</ul>
<p>Bug fixes:</p>
<ul>
<li>Fix bug where <code>/sync</code> didn't return when something under the leave key
changed (PR #461)</li>
<li>Fix bug where we returned smaller rather than larger than requested
thumbnails when <code>method=crop</code> (PR #464)</li>
<li>Fix thumbnails API to only return cropped thumbnails when asking for a
cropped thumbnail (PR #475)</li>
<li>Fix bug where we occasionally still logged access tokens (PR #477)</li>
<li>Fix bug where <code>/events</code> would always return immediately for guest users
(PR #480)</li>
<li>Fix bug where <code>/sync</code> unexpectedly returned old left rooms (PR #481)</li>
<li>Fix enabling and disabling push rules (PR #498)</li>
<li>Fix bug where <code>/register</code> returned 500 when given unicode username
(PR #513)</li>
</ul>
</code>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2016&#x2F;01&#x2F;04&#x2F;synapse-0-12-released&#x2F;" title="Synapse 0.12 released!">Synapse 0.12 released!</a></h2>
                <span>
                    04.01.2016 00:00
                    —
                    <a href="/category/tech">
                        Tech
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Happy 2016 everyone!</p>
<p>To greet the new year, we bring you all new Synapse 0.12. The focus here has been a wide range of polishing, bugfixes, performance improvements and feature tweaks. The biggest news are that the 'v2' sync APIs are now production ready; the search APIs now work much better; 3rd party ID invites now work; and we now mount the whole client-server API under the <code>/_matrix/client/r0</code> URI prefix, as per the <a href="/docs/spec/r0.0.0/client_server.html">r0.0.0 release of the Client Server API</a> from a few weeks ago. The <code>r0</code> release unifies what were previously the somewhat confusing mix of 'v1' and 'v2' APIs as a single set of endpoints which play nice together.</p>
<p>We highly recommend all homeservers upgrading to v0.12.0 as soon as possible. Get it now from <a href="https://github.com/matrix-org/synapse/">https://github.com/matrix-org/synapse/</a> or via our shiny new Debian packages at <a href="/packages/debian/">https://matrix.org/packages/debian/</a>.</p>
<p> </p>
<p>Full changelog follows:</p>
<h3>Changes in synapse v0.12.0 (2016-01-04)</h3>
<ul>
    <li>Expose <code>/login</code> under <code>r0</code> (PR #459)</li>
</ul>
<a name="user-content-changes-in-synapse-v0-12-0-rc3-2015-12-23"></a>
<h3><a id="user-content-changes-in-synapse-v0120-rc3-2015-12-23" class="anchor" href="https://github.com/matrix-org/synapse/blob/master/CHANGES.rst#changes-in-synapse-v0120-rc3-2015-12-23"></a>Changes in synapse v0.12.0-rc3 (2015-12-23)</h3>
<ul>
    <li>Allow guest accounts access to <code>/sync</code> (PR #455)</li>
    <li>Allow filters to include/exclude rooms at the room level rather than just from the components of the sync for each room. (PR #454)</li>
    <li>Include urls for room avatars in the response to <code>/publicRooms</code> (PR #453)</li>
    <li>Don't set a identicon as the avatar for a user when they register (PR #450)</li>
    <li>Add a <code>display_name</code> to third-party invites (PR #449)</li>
    <li>Send more information to the identity server for third-party invites so that it can send richer messages to the invitee (PR #446)</li>
    <li>Cache the responses to <code>/initialSync</code> for 5 minutes. If a client retries a request to <code>/initialSync</code> before the a response was computed to the first request then the same response is used for both requests (PR #457)</li>
    <li>Fix a bug where synapse would always request the signing keys of remote servers even when the key was cached locally (PR #452)</li>
    <li>Fix 500 when pagination search results (PR #447)</li>
    <li>Fix a bug where synapse was leaking raw email address in third-party invites (PR #448)</li>
</ul>
<a name="user-content-changes-in-synapse-v0-12-0-rc2-2015-12-14"></a>
<h3><a id="user-content-changes-in-synapse-v0120-rc2-2015-12-14" class="anchor" href="https://github.com/matrix-org/synapse/blob/master/CHANGES.rst#changes-in-synapse-v0120-rc2-2015-12-14"></a>Changes in synapse v0.12.0-rc2 (2015-12-14)</h3>
<ul>
    <li>Add caches for whether rooms have been forgotten by a user (PR #434)</li>
    <li>Remove instructions to use <code>--process-dependency-link</code> since all of the dependencies of synapse are on PyPI (PR #436)</li>
    <li>Parallelise the processing of <code>/sync</code> requests (PR #437)</li>
    <li>Fix race updating presence in <code>/events</code> (PR #444)</li>
    <li>Fix bug back-populating search results (PR #441)</li>
    <li>Fix bug calculating state in <code>/sync</code> requests (PR #442)</li>
</ul>
<a name="user-content-changes-in-synapse-v0-12-0-rc1-2015-12-10"></a>
<h3><a id="user-content-changes-in-synapse-v0120-rc1-2015-12-10" class="anchor" href="https://github.com/matrix-org/synapse/blob/master/CHANGES.rst#changes-in-synapse-v0120-rc1-2015-12-10"></a>Changes in synapse v0.12.0-rc1 (2015-12-10)</h3>
<ul>
    <li>Host the client APIs released as r0 by <a href="/docs/spec/r0.0.0/client_server.html">https://matrix.org/docs/spec/r0.0.0/client_server.html</a> on paths prefixed by<code>/_matrix/client/r0</code>. (PR #430, PR #415, PR #400)</li>
    <li>Updates the client APIs to match r0 of the matrix specification.
<ul>
    <li>All APIs return events in the new event format, old APIs also include the fields needed to parse the event using the old format for compatibility. (PR #402)</li>
    <li>Search results are now given as a JSON array rather than a JSON object (PR #405)</li>
    <li>Miscellaneous changes to search (PR #403, PR #406, PR #412)</li>
    <li>Filter JSON objects may now be passed as query parameters to <code>/sync</code> (PR #431)</li>
    <li>Fix implementation of <code>/admin/whois</code> (PR #418)</li>
    <li>Only include the rooms that user has left in <code>/sync</code> if the client requests them in the filter (PR #423)</li>
    <li>Don't push for <code>m.room.message</code> by default (PR #411)</li>
    <li>Add API for setting per account user data (PR #392)</li>
    <li>Allow users to forget rooms (PR #385)</li>
</ul>
</li>
    <li>Performance improvements and monitoring:
<ul>
    <li>Add per-request counters for CPU time spent on the main python thread. (PR #421, PR #420)</li>
    <li>Add per-request counters for time spent in the database (PR #429)</li>
    <li>Make state updates in the C+S API idempotent (PR #416)</li>
    <li>Only fire <code>user_joined_room</code> if the user has actually joined. (PR #410)</li>
    <li>Reuse a single http client, rather than creating new ones (PR #413)</li>
</ul>
</li>
    <li>Fixed a bug upgrading from older versions of synapse on postgresql (PR #417)</li>
</ul>

                
            </div>
        </article>
        
        <nav class="pagination">
    <div class="prev">
        
        <a href="&#x2F;category&#x2F;tech&#x2F;page&#x2F;2&#x2F;">‹ Previous</a>
        
    </div>
    <span class="page-number">3 / 6</span>
    <div class="prev">
        
        <a href="&#x2F;category&#x2F;tech&#x2F;page&#x2F;4&#x2F;">Next ›</a>
        
    </div>
</nav>

    </div>
</div>

    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="&#x2F;code"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p>© 2022 The Matrix.org Foundation C.I.C.</p>
</footer>

</body>

</html>
