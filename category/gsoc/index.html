<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - GSOC</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/png" href="/assets/favicon.png" />
    <link rel="stylesheet" href="/style.css" />

    
<link rel="alternate" type="application/rss+xml" title="RSS" href="/category/gsoc/atom.xml">
</head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            ">
            Blog
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <a href="&#x2F;docs&#x2F;" class="section ">
                Documentation
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                </div>
            </div>
        </div>
        
        
        
        
        
        <div class="section-wrap">
            <a href="&#x2F;ecosystem&#x2F;" class="section ">
                Ecosystem
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bots&#x2F;">Bots</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        
<div id="taxonomy-single">
    <div class="content">
        <header>
            <h1>GSOC</h1>
            20 posts tagged with "GSOC" <a href="/category">(See all Category)</a>
            
            <h2>
                <small><a href="/category/gsoc/atom.xml">Atom Feed</a></small>
            </h2>
            
        </header>

        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;09&#x2F;18&#x2F;gsoc-report-moving-matrix-ircd-to-async-await-and-futures-0-3&#x2F;" title="GSOC report: Moving matrix-ircd to async&#x2F;await and futures 0.3">GSOC report: Moving matrix-ircd to async&#x2F;await and futures 0.3</a></h2>
                <span>
                    18.09.2020 13:05
                    —
                    <a href="/category/gsoc">
                        GSOC
                    </a>
                    —
                    <a
                        href="/author/brooks-karlik">
                        Brooks Karlik
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>This is part of a series of reports on the <a href="https://summerofcode.withgoogle.com/organizations/6060943798173696"><em>six</em> projects</a> assigned to Matrix for Google Summer of Code 2020.</p>
<p><a href="https://summerofcode.withgoogle.com/organizations/6060943798173696/#5911643604647936">View project: Moving <code>matrix-ircd</code> to async/await and <code>futures</code> 0.3</a></p>
<hr />
<p>The goal of this project was to port <code>matrix-ircd</code> from the outdated combinators style of <code>futures</code> 0.1 to the new-and-improved style of <code>futures</code> 0.3. As initially proposed, this greatly improves code readability and removes the convoluted compiler errors that were pervasive in <code>futures</code> 0.1</p>
<h2 id="matrix-ircd">matrix-ircd</h2>
<p>The matrix-ircd project functions as a bridge between two chat platforms: Internet relay chat (irc) and Matrix. matrix-ircd lets you use any standard IRC Client to communicate with Matrix chatrooms and direct messages.</p>
<h2 id="mentors">Mentors</h2>
<p>This project is mentored by Philipp Mandler (<a href="https://github.com/phlmn">@phlmn</a>) and Jonas Platte (<a href="https://github.com/jplatte">@jplatte</a>). I would like to thank them for the helpful advice and code reviews they have given me over the course of GSoC 2020.</p>
<h2 id="project-results">Project Results</h2>
<p>Since much of the code was written in late 2016, there were many portions of the code that were unidiomatic and produced compiler errors. The first step I made was to remove all compiler errors from <code>cargo</code> and <code>clippy</code> in <a href="https://github.com/matrix-org/matrix-ircd/pull/64">#64</a>.</p>
<p>Additional tests were then written in various parts of the codebase to ensure that the upgrade would produce the same results. These changes were made in <a href="https://github.com/matrix-org/matrix-ircd/pull/65">#64</a> and <a href="https://github.com/matrix-org/matrix-ircd/pull/66">#66</a>.</p>
<p>Since the project master branch currently used a custom http implementation, I moved it to use <a href="https://crates.io/crates/hyper">hyper</a>, a fast and correct http implementation that already supported async/await. Additionally, I moved the module that most utilized http, <code>matrix</code>, to async-await and the new <code>hyper</code> code. Not only did these changes shrink the code by ~700 lines, they also removed a lot of unnecessary complexity. These changes were made in <a href="https://github.com/matrix-org/matrix-ircd/pull/67">#67</a>.</p>
<p>The last large module remaining, <code>irc</code>, was then ported to <code>irc</code>, along with its dependencies in <code>stream_fold.rs</code> and its upstream user in the <code>bridge</code> module. The most exciting part of these changes was the removal of the <code>futures</code> 0.1 dependency. All code was now running in <code>futures</code> 0.3! These changes also moved away from <a href="https://github.com/erikjohnston/tasked-futures">tasked-futures</a> which further improved code readability. This PR was in <a href="https://github.com/matrix-org/matrix-ircd/pull/71">#71</a>.</p>
<p>Since the bulk of the changes were now complete, I moved onto bug fixes. As <a href="github.com/jplatte">@jplatte</a> mentioned in #71, the current single threaded approach to the application was not ideal. In <a href="https://github.com/matrix-org/matrix-ircd/pull/72">#72</a> I updated all code to be multithreaded-compatible.</p>
<p>Lastly, In <a href="https://github.com/matrix-org/matrix-ircd/pull/77">#77</a> I included more tests to functions with heavy changes, added additional logging, removed unnecessary complexity that was introduced to keep code as &quot;1:1&quot; as possible, and added TLS support to <code>hyper</code> so that https would work. This patch also fixed a rather difficult bug regarding the irc TCP streams and the buffer they were reading into.</p>
<h2 id="remaining-work">Remaining Work</h2>
<p>Based on my personal testing there is <em>no additional work</em> to be done in the realm of updating to async/await. All tests pass and the IRC server and matrix bridge function as expected. @jplatte kindly announced in the <a href="https://matrix.org/blog/category/this-week-in-matrix#matrix-ircd---call-for-testing">This Week In Matrix</a> blog that we will be conducting public testing of the <code>async_await</code> branch on github. Barring any issues the async/await code should be merged into the master branch in the next few weeks.</p>
<h3 id="pull-request-list">Pull request list</h3>
<ul>
<li>https://github.com/matrix-org/matrix-ircd/pull/64</li>
<li>https://github.com/matrix-org/matrix-ircd/pull/65</li>
<li>https://github.com/matrix-org/matrix-ircd/pull/66</li>
<li>https://github.com/matrix-org/matrix-ircd/pull/67</li>
<li>https://github.com/matrix-org/matrix-ircd/pull/71</li>
<li>https://github.com/matrix-org/matrix-ircd/pull/72</li>
<li>https://github.com/matrix-org/matrix-ircd/pull/77</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;09&#x2F;16&#x2F;gsoc-report-ruma-procedural-macro-refactoring-and-more&#x2F;" title="GSOC report: 	Ruma procedural macro refactoring and more">GSOC report: 	Ruma procedural macro refactoring and more</a></h2>
                <span>
                    16.09.2020 16:35
                    —
                    <a href="/category/gsoc">
                        GSOC
                    </a>
                    —
                    <a
                        href="/author/devin-ragotzy">
                        Devin Ragotzy
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>This is part of a series of reports on the <a href="https://summerofcode.withgoogle.com/organizations/6060943798173696"><em>six</em> projects</a> assigned to Matrix for Google Summer of Code 2020.</p>
<p><a href="https://summerofcode.withgoogle.com/organizations/6060943798173696/#4756651216732160">View project: 	Ruma procedural macro refactoring and more</a></p>
<hr />
<p>Wow the summer has flown by, it feels like just yesterday I was learning how to rebase and what exactly it is Ruma does. I exaggerate slightly, but it is a big library with lots of public API surface. I have learned more in the last few months than in two years of school. I have been able to observe and participate in a project with a community growing around it, been a part of discussions about design and best practices, given and received numerous code reviews as well as learned the process of addressing the feedback, and working from a specification. In short, this has been an amazing opportunity to gain experience in all the things that are hard to obtain in a classroom.</p>
<p>My project goal was to improve the existing macros in ruma-events-macros and ruma-api-macros. It became clear early on that this would include some major API changes and that improving the macros as they were was pointless without also moving to a new public API. While improving the durability and readability of the macro code I also rewrote entire sections to accommodate the new design.</p>
<p>A quick overview of the Matrix protocol for reference: a client sends content that is interpreted by the server as events. The server distributes those events out to other clients and other servers (the server case is known as federation). Ruma groups these events by kind Message, State, Ephemeral, ToDevice and Basic which are represented as generic structs (<code>StateEvent&lt;C&gt;</code>). Each event kind needs to be able to hold many different content types, for state events there is room creation, room name, and membership events to name a
few. Using the macros, enums are generated to represent all state event possibilities, so a variant for membership, room name, etc. These types exist to support the core API request and response types for each endpoint that is defined by the Matrix specification.</p>
<h2 id="gsoc-starts-and-i-start-with-ruma-events">GSoC Starts and I start with ruma-events</h2>
<ul>
<li><a href="https://github.com/ruma/ruma-events/pull/85">remove old ruma-events macros</a></li>
<li><a href="https://github.com/ruma/ruma-events/pull/86">start work for event content derive, move to generic Event structs</a></li>
<li><a href="https://github.com/ruma/ruma-events/pull/101">collect all content types into enum</a></li>
<li><a href="https://github.com/ruma/ruma-events/pull/107">add more types, making sure the macro works</a></li>
<li><a href="https://github.com/ruma/ruma-events/pull/108">work on Event custom macro derive</a></li>
<li><a href="https://github.com/ruma/ruma-events/pull/111">remove raw modules and FromRaw trait</a></li>
<li><a href="https://github.com/ruma/ruma-events/pull/119">add each events enum</a></li>
<li><a href="https://github.com/ruma/ruma-events/pull/122">add trybuild tests for ruma-events</a></li>
</ul>
<h2 id="more-work-on-ruma-events-now-a-part-of-the-new-mono-repo">More work on ruma-events, now a part of the new mono-repo</h2>
<ul>
<li><a href="https://github.com/ruma/ruma/pull/52">deserialization optimization for Any*Event, and benchmarking to verify</a></li>
<li><a href="https://github.com/ruma/ruma/pull/68">reverting the removal of enum_enum macro, learning a lot of git along the way</a></li>
<li><a href="https://github.com/ruma/ruma/pull/69">it took me awhile but I got the hang of it, only one review issue!</a></li>
<li><a href="https://github.com/ruma/ruma/pull/97">add accessor methods to the enums, making them much nicer to use</a></li>
</ul>
<h2 id="work-on-ruma-client-api">Work on ruma-client-api</h2>
<ul>
<li><a href="https://github.com/ruma/ruma/pull/104">refactoring the Api::to_tokens code helped me get my head around this crate</a></li>
<li><a href="https://github.com/ruma/ruma/pull/105">notice my commit messages are starting to looking better</a></li>
<li><a href="https://github.com/ruma/ruma/pull/108">not everything works out...</a></li>
<li><a href="https://github.com/ruma/ruma/pull/109">but you get it eventually</a></li>
<li><a href="https://github.com/ruma/ruma/pull/111">deep dive into rust features, I learned a lot about them</a></li>
</ul>
<h2 id="back-to-ruma-events">Back to ruma-events</h2>
<ul>
<li><a href="https://github.com/ruma/ruma/pull/130">a ruma events and client-api rename</a></li>
<li><a href="https://github.com/ruma/ruma/pull/138">add code to generate redact method in event_enum!</a></li>
<li><a href="https://github.com/ruma/ruma/pull/139">adding to existing code without breaking everything is hard</a></li>
<li><a href="https://github.com/ruma/ruma/pull/155">converting to and from the rusty way</a></li>
<li><a href="https://github.com/ruma/ruma/pull/179">I love writing proc_macros, this was a fun one! Adding lifetimes in the req/resp macro</a></li>
</ul>
<h2 id="continuing-maintenance">Continuing maintenance</h2>
<ul>
<li><a href="https://github.com/ruma/ruma/pull/190">quality of life stuff, the day to day work of a maintainer</a></li>
<li><a href="https://github.com/ruma/ruma/pull/201">allow the internal macros to be used outside of the ruma crate more easily</a></li>
<li><a href="https://github.com/ruma/ruma/pull/213">adding small needed features to the macros</a></li>
<li><a href="https://github.com/ruma/ruma/pull/234">good ol' fashioned closing issues!</a></li>
</ul>
<p>One of my personal goals was to become more familiar with git. With the help of my mentor I now feel more confident using this tool that is so essential to developers. I became fairly adept at merging, rebasing, and navigating all the headaches that come with that. I learned plenty of new commands. A few highlights: <code>cherry-pick</code> and specific uses of <code>reset</code> to avoid copy-pasting fixes and adding more commits. I used the <code>reset</code> command to craft good commits, splitting work into appropriate chunks. I am glad that I had the opportunity to hone my git skills. I feel like I have accomplished my goal and then some!</p>
<p>I am proud of the work that I have done: Being part of moving ruma-events much closer to the <code>0.22</code> release and creating macros to generate types specific to the Matrix specification. Working with the community that has grown around Ruma has been rewarding and I plan on sticking around.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;09&#x2F;15&#x2F;gsoc-report-html-embeddable-matrix-chat-rooms&#x2F;" title="GSOC report: HTML Embeddable Matrix Chat Rooms">GSOC report: HTML Embeddable Matrix Chat Rooms</a></h2>
                <span>
                    15.09.2020 16:04
                    —
                    <a href="/category/gsoc">
                        GSOC
                    </a>
                    —
                    <a
                        href="/author/arnav-tiwari">
                        Arnav Tiwari
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>This is part of a series of reports on the <a href="https://summerofcode.withgoogle.com/organizations/6060943798173696"><em>six</em> projects</a> assigned to Matrix for Google Summer of Code 2020.</p>
<p><a href="https://summerofcode.withgoogle.com/organizations/6060943798173696/#5751467312414720">View project: HTML Embeddable Matrix Chat Rooms</a></p>
<hr />
<p>My name is <a href="https://github.com/arnav-t/">Arnav Tiwari</a> and I am a prefinal year undergraduate student from <a href="http://www.iitkgp.ac.in/">IIT Kharagpur</a> and I wanted to share my amazing journey with Matrix. I am a budding open-source enthusiast and this was my first experience with Google Summer of Code. For the past few months, I had been working on a project to develop an <a href="https://github.com/arnav-t/riot-embedded">HTML embeddable chat client</a> under the GSoC program for Matrix. Matrix provides a highly versatile SDK for making custom clients that can be leveraged for a variety of applications, one of which is using Matrix to power an embeddable chat client. A chat client itself can have numerous forms, whether it being a live chat to a simple comments section. This project was intended to provide an easy-to-use and yet highly customizable client that can be deployed on a website with minimal effort.</p>
<p>My goal for the project was to have a useable project by the end of the coding period, however, as it turned out, the project was going to be tested in the real world far sooner than that. The need for an embeddable client and the feasibility of the project to fulfill this role was demonstrated during the second month of the coding period itself. The client was <a href="https://2020.commcon.xyz/live/">deployed on the website of CommCon 2020</a>, a virtual conference on communication technologies (an apt place to be tested, coincidentally). On the days leading up to the conference and during the conference itself, I helped the organizers to set up, integrate, and troubleshoot the client when required. While the process went mostly without any hiccups, there was one small incident when the client broke during production. Since the project was still pretty early in development, I didn’t expect it to be bug-free and had anticipated the possibility of this happening. I was keeping an eye on things, which proved to be a prudent decision as I was able to fix this problem quickly and with minimal downtime. The rest of the conference went smoothly and the client performed quite well even when the number of users was quite large (A testament to Matrix’s scalability). Getting to experience this was a pleasant surprise since I never expected to have real users so soon, much less so many at once. Seeing the client being used out in the wild was a very fulfilling thing to witness. I also gained some very valuable feedback, courtesy of Dan, CommCon’s master of ceremonies. </p>
<p>Over the next month or so, I kept on steadily adding features and building up the client. The next big break for the project came in the form of another conference. <a href="https://akademy.kde.org/2020">KDE Akademy 2020</a>. This was a big surprise as I genuinely didn’t expect to see another large conference using the project so soon. The conference was scheduled to be held after a week or so after the end of the coding period. This time, however, the integration was almost completely handled by the conference organizers themselves since it had to be integrated with their version of BigBlueButton, a web conferencing system. As the conference drew nearer, things seemed to be working out well and there was no sign of trouble. When the day of the conference finally came, however, many things seem to break simultaneously due to an apparent incompatibility with BBB. In the end, despite the numerous attempts by the conference organizers and myself to remedy the issues, they had to roll back to an older version of the chat since the risk would be too great. The organizers were understandably disappointed since they had spent a while working on the integration and had seen the great potential of using this client in place of their old chat system.. Even though It was a sad conclusion to the journey, there were still many lessons to be learned. Most importantly, even though the client might work well in standalone circumstances, ease of integration might have some room for improvement. Open-source development never truly stops and I don’t intend to give up on this project. I look forward to constantly improving it and seeing more people adopt it.</p>
<p>These past few months were a spectacular experience. Even before starting this journey, I knew I would learn a lot but this still managed to exceed all my expectations. I got to learn things I never would have thought I would be able to experience under GSoC. I met some awesome people along the way, I’m extremely grateful to my mentors Ben Parsons and Travis Ralston for being the best mentors anyone could ever ask for. They were always approachable and friendly throughout the entire program and I never hesitated before asking for their help. Without their guidance, all of this would’ve certainly not been possible. Lastly, I want to express my gratitude to Matrix for believing in me and giving me the opportunity to undertake this project. The Matrix community is full of talented people who will go the extra mile if you ask them for help. It has truly been a pleasure working with them and I hope to continue working with them in the future. Cheers and hope to see continue seeing you all!</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;09&#x2F;10&#x2F;gsoc-report-enabling-e2ee-in-opsdroid-matrix-connector&#x2F;" title="GSOC report: Enabling E2EE in Opsdroid Matrix Connector">GSOC report: Enabling E2EE in Opsdroid Matrix Connector</a></h2>
                <span>
                    10.09.2020 14:50
                    —
                    <a href="/category/gsoc">
                        GSOC
                    </a>
                    —
                    <a
                        href="/author/tyagraj-desigar">
                        Tyagraj Desigar
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>This is part of a series of reports on the <a href="https://summerofcode.withgoogle.com/organizations/6060943798173696"><em>six</em> projects</a> assigned to Matrix for Google Summer of Code 2020.</p>
<p><a href="https://summerofcode.withgoogle.com/organizations/6060943798173696/#6107552447725568">View project: Enabling E2EE in Opsdroid Matrix Connector</a></p>
<hr />
<p>I'm <a href="https://github.com/Tyagdit">Tyagraj Desigar</a> and I worked on <a href="https://github.com/opsdroid/opsdroid">Opsdroid</a> with <a href="https://github.com/Cadair">Stuart Mumford</a> and <a href="https://github.com/SolarDrew">Drew Leonard</a>. Opsdroid is a python framework for creating platform agnostic bots usable with multiple chat services including matrix.</p>
<h2 id="the-plan">The Plan</h2>
<p>The project's focus was on the interaction layer (called a connector) between opsdroid and matrix. As it stood, the connector used the deprecated <a href="https://github.com/matrix-org/matrix-python-sdk">matrix-python-sdk</a> and had no support for encryption. The aim was to change this by moving over to <a href="https://github.com/poljar/matrix-nio">matrix-nio</a>.</p>
<p>I had planned to work on some other features as well:</p>
<ul>
<li>A database module for opsdroid using matrix state events</li>
<li>Support for unused matrix events</li>
<li>Homeserver lookup using <code>.well-known</code> API requests</li>
<li>Device verification process for the bot</li>
</ul>
<p>Porting to nio and adding encryption support was the bulk of the project, and the <strong>minimum</strong> I wanted to accomplish by the end of the project. I wanted to have a connector that worked as it did already with support for encrypted rooms which needed minimal extra configuration.</p>
<h2 id="the-process">The Process</h2>
<p>The process began with <a href="https://github.com/opsdroid/opsdroid/pull/1418">This PR</a> which gave us a head start with the migration to matrix-nio. Through helping to review the PR I got to understand how matrix-nio and opsdroid work. </p>
<p>The implementation of encryption support was a little tricky in that it was tough to figure out the process required to do that in the context of the connector. One problem we faced was the installation of dependencies. Installing <code>libolm</code>, a C library which nio uses for encryption was a less than smooth process. This spawned a couple side projects that dealt with the CI, testing and installation of opsdroid. In the end we found a solution and had a working connector on our hands.</p>
<p>Next we shifted focus to the database module. It was based on <a href="https://github.com/SolarDrew/database-matrix">this project</a>. I rewrote it with nio and added a few features. The idea was straightforward but the implementation had many catches since we were working under some constraints for the interfacing with opsdroid. It went through several iterations before we settled on the final product.</p>
<p>The encryption and database took longer than I had initially expected which meant we didn't get to work on adding support for more events and homeserver lookups. I had a go at adding device verification steps while working on the encryption support but that turned out to be quite complicated and would introduce some breaking changes, besides cross-signing had just been introduced so we decided to drop that till nio implemented some way to leverage cross-signing.</p>
<p>Along the way some issues cropped up with the testing frameworks and CI that were hard to pinpoint and caused further delays but were solved eventually.</p>
<h2 id="the-conclusion">The Conclusion</h2>
<p>I am extremely happy with what I've accomplished and hope that I have been able to achieve the standards set by the matrix community. It was a challenging and exhilarating experience. I have learned more in this project than I could've imagined and gained a ton of invaluable experience with software development thanks to my mentors who pushed me forward and guided me throughout. This journey was beyond amazing and I will be sure to contribute to matrix moving forward.</p>
<p>You can find complete details of everything I worked on during GSoC <a href="https://gist.github.com/Tyagdit/0e6feb332fc33c540db728092cc7ae7f">here</a>.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;09&#x2F;09&#x2F;gsoc-report-adding-features-in-end-to-end-encryption-for-nheko-reborn&#x2F;" title="GSOC report: Adding Features in End-to-End encryption for Nheko-Reborn">GSOC report: Adding Features in End-to-End encryption for Nheko-Reborn</a></h2>
                <span>
                    09.09.2020 00:00
                    —
                    <a href="/category/gsoc">
                        GSOC
                    </a>
                    —
                    <a
                        href="/author/ch-chethan-reddy">
                        CH Chethan Reddy
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>This is part of a series of reports on the <a href="https://summerofcode.withgoogle.com/organizations/6060943798173696"><em>six</em> projects</a> assigned to Matrix for Google Summer of Code 2020.</p>
<p><a href="https://summerofcode.withgoogle.com/organizations/6060943798173696/#6274781747347456">View project: Adding Features in End-to-End encryption for Nheko-Reborn</a></p>
<p>This is a re-publishing of Chetan's <a href="https://chethan2k1.github.io/blog/working-with-matrix.html">original blog post</a>.</p>
<hr />
<h2 id="whoami">whoami?</h2>
<p>I'm <a href="https://github.com/Chethan2k1">CH Chethan Reddy</a>. I'm currently pursuing Bachelors in Electronics and Communication Engineering at the <a href="https://www.nitt.edu/">National Institute of Technology, Trichy in India</a>. In my free time I like to swim, work on projects I find interesting, watch movies and do a lot of other &quot;interesting&quot; stuff. This summer I have interned in Matrix.org for around 3-4 months under GSoC and in this blog I'll be sharing my experience.</p>
<h2 id="why-matrix-org">Why Matrix.org?</h2>
<p>Being passionate about privacy, I wanted to select an organization that actively works on that, and clearly, Matrix.org topped my list. For anyone who doesn't know what Matrix is, in simple words, It is a decentralized communication protocol that supports many awesome features like messaging, end-to-end encryption, voip/video calls support, etc. It uses simple RESTful http APIs which keeps things very simple. The best part of the protocol is, it is decentralized, so if you have a custom domain name, you can setup a synapse server in a jiffy. Knowing all these who wouldn't choose Matrix?</p>
<h2 id="my-work">My Work</h2>
<p>I worked on Desktop Client called <a href="https://github.com/Nheko-Reborn/nheko">Nheko</a>. It is a light-weight Desktop Client that uses Qt Framework in the frontend and also uses a mtxclient library that implements Matrix-client server API written in C++. The scope of my project involved implementing Device-Verification and Cross-Signing in Nheko.</p>
<p>For people who have not used Matrix before, it is important to note that every device of a particular user is considered as a separate unit rather than user itself. For end-to-end encrypted chat to be viewable from a device, that particular device should be trusted by the sender's device. Device-verification and Cross-Signing are methods used for verifying.</p>
<p>Coming to <a href="https://chethan2k1.github.io/blog/final-report.html">the work I have implemented</a>, Device-verification is completely implemented in Nheko. As of now, SAS verification with to-device and room message verification is supported in Nheko. As far as Cross-Signing is concerned, verifying signatures of Cross-Signing keys and showing the verified status of devices have been implemented. The only remaining unfinished parts are SSSS and signing the keys after verification. After that Cross-signing should be feature-complete.</p>
<p>I wished to implement SSSS during my GSoC period, but I couldn't because I did not anticipate the additional things which came with verification while making my proposal. The additional works included : implementing the UI, changes to the userprofile dialog, working on the caching of verified users, and user keys. Moreover, due to the current pandemic, there were a few sudden changes in my academic schedule, which interrupted my work to some extent. While contributing at times I was stuck on some bugs like verifying the signatures, some random crashes in UserProfile and setting up relations in Room-Verification. However, with the help of my mentors, I was able to fix these bugs.</p>
<p>I'm really happy about the work I have done. I am hoping to further work on Nheko in the future, complete Cross-Signing and work on additional features for Nheko.</p>
<h2 id="community-and-mentors">Community and Mentors</h2>
<p>The best part of my experience this summer was the the Matrix community and the learning I had. I am really lucky to be part of the Matrix community which has many passionate people collectively working on really cool projects with clients, bridges, servers, bots and the spec. A special thanks to Uhoreg and Sorunome who have helped me in navigating through the spec.</p>
<p>Last but not the least, a big shout-out to both my mentors, Nico and red_sky, who were always there to help me with any issue in the project in spite of their personal commitments and dealt with my stupid questions with utmost patience and kindness. Without their active help and guidance this experience definitely would not have been so fun and great, they have clearly surpassed the expectations I had from mentors.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;09&#x2F;08&#x2F;gsoc-report-e2e-encryption-for-go-neb&#x2F;" title="GSOC report: E2E encryption for go-neb">GSOC report: E2E encryption for go-neb</a></h2>
                <span>
                    08.09.2020 17:37
                    —
                    <a href="/category/gsoc">
                        GSOC
                    </a>
                    —
                    <a
                        href="/author/nikolaos-filippakis">
                        Nikolaos Filippakis
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>This is part of a series of reports on the <a href="https://summerofcode.withgoogle.com/organizations/6060943798173696"><em>six</em> projects</a> assigned to Matrix for Google Summer of Code 2020.</p>
<p><a href="https://summerofcode.withgoogle.com/organizations/6060943798173696/#5910277670830080">View project: E2E encryption for go-neb</a></p>
<hr />
<p>Hello! I am <a href="https://github.com/nikofil">Nikos</a>, an MSc student in Computer Security. My original goal for this GSoC was to implement the basics of end-to-end encryption for <a href="https://github.com/matrix-org/go-neb">Go-NEB</a>, which is a popular and easily extendable bot for the Matrix protocol. I chose this project because it ticked off a lot of the boxes that I look for in a project: The Matrix protocol is very interesting and the e2e specification is fascinating, Go-NEB is written in Go which I wanted to learn better, plus I believe personally that crypto should be easy for everyone to use and adopted more.</p>
<p>My initial plan was to first create bindings in gomatrix for libolm, the C library that implements most of the necessary algorithms for Olm/Megolm, the protocols used in Matrix' end-to-end encryption. Then, I was going to write some nice APIs around those bindings so that most of the work done is hidden from the client that uses the library, and finally I would call these APIs from <a href="https://github.com/matrix-org/go-neb">Go-NEB</a> when needed to set up the encrypted sessions between devices in a room and use them to encrypt/decrypt messages as necessary. What we found out soon after GSoC started was that another library called <a href="https://github.com/tulir/mautrix-go">mautrix-go</a> that was based on gomatrix already did most of these things. My task then became to change the uses of gomatrix in Go-NEB for mautrix-go and make some slight changes to the latter if there were some incompatibilities. A month later, that task was done.</p>
<p>With two months to go in GSoC, my mentors came up with a new task: to implement a service for <a href="https://github.com/matrix-org/go-neb">Go-NEB</a> that allows other client developers to test their e2ee implementations easily. That resulted in a service called &quot;cryptotest&quot; which allows other clients in a specified room to execute some Neb commands which would trigger functions like the forwarding of keys between clients, another feature that had to be implemented in mautrix. Something else that I wanted to add and grabbed my interest was SAS device verification, a multi-step process that involves users comparing a string of numbers or emojis out-of-band to configure they are indeed talking to each other and not to a MITM. These were my main tasks during the second month and I was happy to have achieved them and made a decent verification API for clients to use. They were soon merged into mautrix and Go-NEB.</p>
<p>For my third month I proposed to implement a new Matrix feature called cross-signing, which was similar to SAS verification but dealt with verifying other users instead of their devices who would in turn verify their own devices, creating a graph of trust between users and devices. This functionality was strongly coupled with SSSS, another new feature that allows clients to store their encrypted secrets (in this case the multiple necessary signing keys) on the server, as well as in-room verification which allows verification between users. This task was more challenging as it uses multiple algorithms (some of which not in libolm) for deriving the keys, using them to encrypt other keys which in turn sign other keys. It was also more satisfying when I finally managed to generate the keys, store and retrieve them and then use them to sign another user and when I was done I felt like my understanding of cryptography levelled up.</p>
<p>All in all, I'm very satisfied with the overall experience. The spec was very clear in most cases and when it wasn't the community was always helpful and responsive. They were also happy to discuss the spec with me and explain the more intricate details. For that reason I wasn't asking questions directly to my mentors (besides for defining my tasks) but to the overall community. I'm also very grateful to my mentors, <a href="https://github.com/uhoreg">@uhoreg</a> and <a href="https://github.com/Kegsay">@Kegan</a> for picking me for this project and helping me with the planning aspect and reviewing my PRs. I'd lastly like to thank the maintainer of mautrix, <a href="https://github.com/tulir/">@tulir</a>, for reviewing and merging a lot of my work into his library.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;05&#x2F;11&#x2F;announcing-gsoc-2020-participants&#x2F;" title="Announcing GSOC 2020 Participants!">Announcing GSOC 2020 Participants!</a></h2>
                <span>
                    11.05.2020 00:00
                    —
                    <a href="/category/gsoc">
                        GSOC
                    </a>
                    —
                    <a
                        href="/author/ben-parsons">
                        Ben Parsons
                    </a>
                </span>
                
            </header>
            <div>
                
                <p><img src="/blog/img/gsoc.png" alt="GSOC Logo" /></p>
<p><a href="https://summerofcode.withgoogle.com/">Google Summer of Code</a> participants were announced last week. <strong><a href="https://summerofcode.withgoogle.com/organizations/6060943798173696/">This year Matrix was assigned SIX students!</a></strong></p>
<p>This is the most students we've have taken on in a single year, made possible by Matrix now acting as an umbrella organisation for multiple projects - this year that's Ruma, Nheko and OpsDroid. There are also students working on projects from the core team: go-neb, matrix-js-sdk and matrix-ircd.</p>
<p>We received dozens of applications this year, which made narrowing our focus to six students difficult, but we are proud to announce:</p>
<p><strong>Devin Ragotzy</strong>, who has been involved with the Ruma project in the past, will work on <em><a href="https://summerofcode.withgoogle.com/projects/#4756651216732160">Ruma procedural macro refactoring and more</a></em></p>
<p><strong>Arnav Tiwari</strong> will work with Travis and myself to create <em><a href="https://summerofcode.withgoogle.com/projects/#5751467312414720">HTML Embeddable Matrix Chat Rooms</a></em></p>
<p><strong>Nikolaos Filippakis</strong> will work to support <em><a href="https://summerofcode.withgoogle.com/projects/#5910277670830080">E2E encryption for go-neb</a></em>. Kegan, one of the original go-neb authors is particularly excited about this one</p>
<p><strong>Brooks Karlik</strong> will update matrix-ircd: <em><a href="https://summerofcode.withgoogle.com/projects/#5911643604647936">Move matrix-ircd to async/await</a></em>. This will be a welcome upgrade for anyone using that project!</p>
<p><strong>Tyagdit</strong> will work with Cadair and the <a href="/blog/2020/05/01/this-week-in-matrix-2020-05-01">OpsDroid team</a> on <em><a href="https://summerofcode.withgoogle.com/projects/#6107552447725568">Enabling E2EE in Opsdroid Matrix Connector</a></em></p>
<p><strong>Chethan Reddy</strong>, last but not least, will work with Nico and the Nheko gang on <em><a href="https://summerofcode.withgoogle.com/projects/#6274781747347456">Adding Features in End-to-End encryption for Nheko-Reborn</a></em></p>
<p>Congratulations all, and also congratulations and thank you to the projects the students will be working on!</p>
<p>Find out all about <a href="https://summerofcode.withgoogle.com/organizations/6060943798173696/">Matrix @ GSoC on Google's dedicated site</a>, and keep reading the Matrix blog where we'll have updates from the students.</p>
<hr />
<p>PS <strong>Alejandro Domínguez</strong> has a Matrix related project too: they'll be working under the GNOME organisation to <em><a href="https://summerofcode.withgoogle.com/projects/#6726209787920384">add Multi account support to Fractal</a></em>.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;09&#x2F;20&#x2F;qt-based-clients-end-to-end-encryption-support-final-report-g-so-c-2019&#x2F;" title="Qt-based clients end-to-end encryption support -- final report (GSoC 2019)">Qt-based clients end-to-end encryption support -- final report (GSoC 2019)</a></h2>
                <span>
                    20.09.2019 02:10
                    —
                    <a href="/category/gsoc">
                        GSOC
                    </a>
                    —
                    <a
                        href="/author/alexey-andreyev">
                        Alexey Andreyev
                    </a>
                </span>
                
            </header>
            <div>
                
                <h2 id="overview">Overview</h2>
<p>*<em>libQMatrixClient was <a href="https://github.com/quotient-im/libQuotient/issues/325">renamed</a> to libQuotient</em></p>
<p>The project aimed at adding end-to-end encryption to <a href="https://github.com/quotient-im/libQuotient">libQuotient</a> for future support in Qt/libQuotient-based clients like <a href="https://matrix.org/docs/projects/client/quaternion">Quaternion</a> and <a href="https://matrix.org/docs/projects/client/spectral">Spectal</a>, or even <a href="https://github.com/TelepathyIM/telepathy-tank">Telepathy IM</a>.</p>
<h2 id="the-work-done">The work done</h2>
<p>Regarding my initial <a href="https://github.com/quotient-im/libQuotient/wiki/_GSoC-2019-E2EE-proposal">proposal</a>, I’ve completed tasks enough for message receiving, and not finished tasks related to message sending.</p>
<p>Focused on libQuotient, I've also <a href="https://github.com/quotient-im/Quaternion/commits/aa13q-e2ee">added changes to Quaternion client</a> to support the proposed API and test the results.
I've reused libQtOlm, which is a Qt wrapper to the matrix olm library and <a href="https://gitlab.com/b0/libqtolm/merge_requests?scope=all&amp;utf8=%E2%9C%93&amp;state=all&amp;author_username=aa13q">contributed to provide better compatibility during its building and deployment</a>.
This also required to dive into the olm library itself and provide <a href="https://gitlab.matrix.org/matrix-org/olm/commit/aa0c9ab6b51d182cb78ab4cc75c81c0054765bde">minor patch</a> for the olm CMake files too.</p>
<p>So, the basic structure of the project changed a bit, libQtOlm was added as a dependency to support libolm:</p>
<pre style="background-color:#1e1e1e;color:#dcdcdc;"><code><span>                              +--------------------------------------------+
</span><span>                              |   Quaternion/Spectral/Telepathy|Tank/etc   |
</span><span>+------------------+          +--------------------------------------------+
</span><span>|      CS API      |  &lt;----&gt;  |                  libQuotient               |
</span><span>+------------------+          +-------------------------------+------------+
</span><span>|Synapse homeserver|          |               Qt              |  libQtOlm  |
</span><span>+------------------+          +--------------------------------------------+
</span><span>                                                              |   libolm   |
</span><span>                                                              +------------+
</span></code></pre>
<p>During the coding period, I've resorted to <a href="https://matrix.org/docs/spec/client_server/latest">the specification</a>, <a href="https://matrix.org/docs/guides/end-to-end-encryption-implementation-guide">the guide</a> and the <a href="https://github.com/Zil0/matrix-python-sdk/wiki">last year GSoC python implementation</a> actively. And added <a href="https://github.com/matrix-org/matrix-doc/pull/2157">minor fix for the documentation</a> about names constants at the documentation examples.</p>
<h2 id="demonstration">Demonstration</h2>
<p><a href="https://youtu.be/gGykLh4mVDg"><img src="https://i.imgur.com/BKmhvni.jpg" alt="Imgur" /></a></p>
<h2 id="future-work">Future work</h2>
<p>Talking about future work, the status is going to be captured at <a href="https://github.com/quotient-im/libQuotient/projects">libQuotient project board</a>. Next steps are:</p>
<ul>
<li>Managing devices list for users in the room</li>
<li>Sending encrypted messages</li>
</ul>
<p>While olm account management architecture and <code>device_one_time_keys_count</code> sync data handling is here, such tasks as session management after a restart and device verification still requires additional efforts. After that encrypted attachments support and key backups could also be added.</p>
<p>I'm going to take care about that, but it definitely will be harder as just a side project. I still have enthusiasm though :)</p>
<h2 id="conclusion">Conclusion</h2>
<p>To take part in the Google Summer of Code project was my dream. I'm very happy I've managed to took part this year, since it was the last year of my study, while I had doubts about my personal results until I've received final confirmation and the review.</p>
<p>From the beginning of the project, I've realized I'm very lucky since I've got all the chances to provide perfect results. <a href="https://github.com/Kaffeine">@Kaffeine</a> helped me a lot with my TelepathyIM contribution. He helped me to evolve my CMake, git and Qt/C++ skills and that's how I've started contributing to the libQuotient before GSoC. After that, it turns out that I've accepted and received even two mentors. <a href="https://github.com/uhoreg">@uhoreg</a> from the Matrix team, who helped me with End-to-End Encryption logic and olm/megolm understanding. And <a href="https://github.com/KitsuneRal">@kitsune</a> from the Quotient project, who helped me a lot with the code review, with the architecture decisions and the library logic, and even with the time management (he was the one who watched carefully about my results). The last year GSoC python implementation and guide from <a href="https://github.com/Zil0">@Zil0</a> were also here, and it turns out that Spectral developer <a href="https://github.com/encombhat">@BHat</a> provided QtOlm wrapper right before GSoC stated.</p>
<p>However, planning and updating the plan were my weak points, where I've made key mistakes, such as poor combination with my regular part-time job. And I definitely should have reserved a small vacation at least for the final period of the project to handle tasks better.</p>
<p>In the end, I've managed to debug the mistakes and provided encrypted messages receiving that could already be used at the clients. Also, I evolved my skills and dived into the megolm E2EE subject. I'm willing to continue my contribution to develop libQuotient as full-featured Qt-based Matrix library. </p>
<p>In general, I am not disappointed. I'm wishing luck to all the future students who are reading this. I'm happy to receive support and contribute to an international open project not only for myself, but also for the other developers and users.</p>
<h2 id="appendix-additional-links">Appendix: Additional links</h2>
<p><strong>GSoC project page</strong>: <a href="https://summerofcode.withgoogle.com/organizations/6624344617254912/#5821516577505280">link</a></p>
<p><strong>Mentors</strong>: <a href="https://matrix.to/#/@kitsune:matrix.org">Alexey Rusakov</a>, <a href="https://matrix.to/#/@uhoreg:matrix.org">Hubert Chathi</a></p>
<p><strong>GSoC Matrix room</strong>: <a href="https://matrix.to/#/#gsoc:matrix.org">link</a></p>
<p><strong>Contribution</strong>: <a href="https://github.com/quotient-im/libQuotient/issues?q=author%3Aa-andreyev+label%3AGSoC2019">libQuotient GSoC E2EE PRs list</a>, <a href="https://github.com/quotient-im/libQuotient/wiki/_GSoC-2019-E2EE-final-evaluation">full final report at the project wiki</a></p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;09&#x2F;10&#x2F;dendrite-development-final-report-g-so-c-2019&#x2F;" title="Dendrite development final report (GSoC 2019)">Dendrite development final report (GSoC 2019)</a></h2>
                <span>
                    10.09.2019 18:21
                    —
                    <a href="/category/gsoc">
                        GSOC
                    </a>
                    —
                    <a
                        href="/author/alex-chen">
                        Alex Chen
                    </a>
                </span>
                
            </header>
            <div>
                
                <h2 id="overview">Overview</h2>
<p>During GSoC 2019, I participated in and pushed forward the development of
<a href="https://github.com/matrix-org/dendrite">Dendrite</a>, a high-performance, scalable <a href="https://matrix.org/docs/guides/introduction">Matrix
homeserver</a> implementation written
in Go.</p>
<p>Like many others passionate about Dendrite, I've been eager to see the day when
it finally joins the decentralised, federated <a href="https://matrix.org/">Matrix
network</a>, so I worked on the project to see how much I
could do to bridge the gap between it and the current reference homeserver
implementation, <a href="https://github.com/matrix-org/synapse">Synapse</a>, in terms of
feature completeness.</p>
<p>Working on Dendrite in just one area would be insufficient to propel it, so my
work covers various
<a href="https://github.com/matrix-org/dendrite/blob/master/WIRING.md">components</a>
in the project, including the Client/Server API, Sync Server, Room Server,
and Federation Component. I also spent time refining the project's
documentation, improving its testing/continuous integration process, as well as
reviewing pull requests from Matrix.org members and the community.</p>
<p>Below is the major portion of my work presented as pull requests, categorised by
the components they belong to; a list of links to all the pull requests I
created/reviewed is also available at the end of this report.</p>
<h2 id="work-in-component-client-server-api">Work in Component: Client/Server API</h2>
<p><em>This component is the main handler of HTTP requests from the clients, except for
<code>/sync</code> requests - see next part.</em></p>
<p>Work done:</p>
<ul>
<li><a href="https://github.com/matrix-org/dendrite/pull/693">Implement client single event retrieval (#693)</a></li>
<li><a href="https://github.com/matrix-org/dendrite/pull/726">Implement profile retrieval over federation (#726)</a></li>
<li><a href="https://github.com/matrix-org/dendrite/pull/732">Add missing servers field in /directory/room/:alias response (#732)</a></li>
<li><a href="https://github.com/matrix-org/dendrite/pull/754">Implement room creation content (#754)</a></li>
<li>...and other fixes and improvements</li>
</ul>
<p>Work left:</p>
<ul>
<li><a href="https://github.com/matrix-org/dendrite/issues/668">Implement guest access (#668)</a>
<ul>
<li>This was removed from the plan for GSoC so work with higher priorities
according to the
<a href="https://github.com/matrix-org/dendrite/milestone/5">milestone</a> could be
done first.</li>
</ul>
</li>
</ul>
<h2 id="work-in-component-sync-server">Work in Component: Sync Server</h2>
<p><em>The Sync Server is responsible for handling the long polling notification
requests (<code>/sync</code> requests) and some other related requests from the clients.</em></p>
<p>Work done:</p>
<ul>
<li><a href="https://github.com/matrix-org/dendrite/pull/718">Add EDU support and typing notifications to /sync (#718)</a>
<ul>
<li>EDU stands for Ephemeral Data Units; they are events carrying short-term
status in the room, for example typing notifications.</li>
</ul>
</li>
<li><a href="https://github.com/matrix-org/dendrite/pull/751">Implement &quot;full_state&quot; query parameter for /sync (#751)</a></li>
<li>...and other fixes and improvements</li>
</ul>
<p>Work left:</p>
<ul>
<li>Support for other types of EDUs</li>
</ul>
<h2 id="work-in-component-room-server">Work in Component: Room Server</h2>
<p><em>The Room Server is, as its name suggests, where room events, state, etc. are
handled.</em></p>
<p>Work done:</p>
<ul>
<li><a href="https://github.com/matrix-org/dendrite/pull/768">Implement event redaction (#768)</a>
<ul>
<li>This also includes a relatively large chunk of changes in the Sync Server.</li>
</ul>
</li>
<li><a href="https://github.com/matrix-org/dendrite/pull/706">Fix permission and 404 response for alias deletion (#706)</a></li>
<li>...and other fixes and improvements</li>
</ul>
<p>Work left:</p>
<ul>
<li>Support for alias deletion by admins</li>
<li>Discussion on and implementation of event retention policies</li>
</ul>
<h2 id="work-in-component-federation">Work in Component: Federation</h2>
<p><em>The Federation Component sends requests to and receives requests from other
Matrix homeservers.</em></p>
<p>Work done:</p>
<ul>
<li><a href="https://github.com/matrix-org/dendrite/pull/781">Add joined hosts query APIs (#781)</a></li>
<li>(In <a href="https://github.com/matrix-org/gomatrixserverlib">matrix-org/gomatrixserverlib</a>) Support for more query
types in Federation Client: <a href="https://github.com/matrix-org/gomatrixserverlib/pull/130">Leave
API</a>, <a href="https://github.com/matrix-org/gomatrixserverlib/pull/129">Public Rooms
API</a>, <a href="https://github.com/matrix-org/gomatrixserverlib/pull/128">Profile Query
API</a></li>
<li>...and other fixes and improvements</li>
</ul>
<p>Work left:</p>
<ul>
<li>Implementation of a &quot;Most Recent Transaction Sender&quot; In-Memory Cache
<ul>
<li>There is a delay in this part of work because some dependency problems
took longer than expected to resolve, but this has been planned and will
be worked on after GSoC.</li>
</ul>
</li>
<li>Implementation of a component that handles backoff/retries for federation requests</li>
</ul>
<h2 id="general-fixes-improvements-maintenance-work">General Fixes, Improvements, Maintenance Work</h2>
<ul>
<li>Data race fixes
<ul>
<li><a href="https://github.com/matrix-org/dendrite/pull/748">Fix data races reported by go test -race ./... (#748)</a></li>
<li><a href="https://github.com/matrix-org/dendrite/pull/787">Fix data race in clientapi/routing/register.go (#787)</a></li>
</ul>
</li>
<li>Fixes for incorrect transaction ID scopes
<ul>
<li><a href="https://github.com/matrix-org/dendrite/pull/772">Fix transaction IDs in transaction cache have global scope (#772)</a></li>
<li><a href="https://github.com/matrix-org/dendrite/pull/789">Associate transactions with session IDs instead of device IDs (#789)</a></li>
</ul>
</li>
<li>Improvements for building/testing process
<ul>
<li><a href="https://github.com/matrix-org/dendrite/pull/714">Refine config and docs for sytest (#714)</a></li>
<li><a href="https://github.com/matrix-org/dendrite/pull/598">Fix build conflict between docker environment and host (#598)</a></li>
</ul>
</li>
</ul>
<h2 id="links-to-all-pull-requests">Links to All Pull Requests</h2>
<p>Here is a list of links to all the pull requests I have created/reviewed (by 26
Aug, 2019):</p>
<table><thead><tr><th>Repository</th><th>Pull Requests</th></tr></thead><tbody>
<tr><td><a href="https://github.com/matrix-org/dendrite">matrix-org/dendrite</a></td><td><a href="https://github.com/matrix-org/dendrite/pulls?utf8=%E2%9C%93&amp;q=is%3Apr+author%3ACnly+created%3A%3C2019-08-26">Created (36)</a> / <a href="https://github.com/matrix-org/dendrite/pulls?utf8=%E2%9C%93&amp;q=is%3Apr+reviewed-by%3ACnly+-author%3ACnly+created%3A%3C2019-08-26">Reviewed (27)</a></td></tr>
<tr><td><a href="https://github.com/matrix-org/gomatrixserverlib">matrix-org/gomatrixserverlib</a></td><td><a href="https://github.com/matrix-org/gomatrixserverlib/pulls?utf8=%E2%9C%93&amp;q=is%3Apr+author%3ACnly+created%3A%3C2019-08-26">Created (12)</a> / <a href="https://github.com/matrix-org/gomatrixserverlib/pulls?utf8=%E2%9C%93&amp;q=is%3Apr+reviewed-by%3ACnly+-author%3ACnly+created%3A%3C2019-08-26">Reviewed (1)</a></td></tr>
<tr><td><a href="https://github.com/matrix-org/sytest">matrix-org/sytest</a></td><td><a href="https://github.com/matrix-org/sytest/pulls?utf8=%E2%9C%93&amp;q=is%3Apr+author%3ACnly+created%3A%3C2019-08-26">Created (5)</a></td></tr>
</tbody></table>
<h2 id="appendix-on-dendrite-being-a-gsoc-project">Appendix: On Dendrite Being a GSoC Project</h2>
<p>I believe that Dendrite is a pretty special project to work on in the GSoC
program.</p>
<p>At its current state, Dendrite isn't a complete homeserver yet. This has left a
large portion of work on Dendrite wide open: As I worked on Dendrite, more than
often I'd find myself in a place to answer questions related to topics like
design or project architecture which, if not thoroughly thought through, might
have consequences in the future development of the project. For this reason, I
think working on Dendrite involves a set of challenges quite different from what
attempting to improve an already functioning piece of software would have
presented.</p>
<p>For the same reason, I think what Dendrite has taught me during the
summer was less about how to become more fluent in Go or more familiar with
various tools, but more about developing the mindset that powers software
projects behind the scenes. But this mindset, to myself, seems more valuable
than the former, indeed.</p>
<p>And at the end of this report, I'd like to thank my mentors
<a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> and
<a href="https://matrix.to/#/@brendan:abolivier.bzh">Brendan</a>, as well as everyone else
at Matrix who has answered my questions, discussed with me, and helped me
understand the code, and at the same time being super responsive. Without your
help, my GSoC experience wouldn't have been this enjoyable! :)</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;09&#x2F;09&#x2F;matrix-visualisations-final-report-g-so-c-2019&#x2F;" title="Matrix Visualisations final report (GSoC 2019)">Matrix Visualisations final report (GSoC 2019)</a></h2>
                <span>
                    09.09.2019 00:00
                    —
                    <a href="/category/gsoc">
                        GSOC
                    </a>
                    —
                    <a
                        href="/author/eisha-chen-yen-su">
                        Eisha Chen-yen-su
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>The Google Summer of Code 2019 is coming to an end for me, so it means that it’s time for the final report.</p>
<h2 id="the-work-done">The work done</h2>
<p>I’ve been taking care of the project “Matrix Visualisations” during these past months. This project aimed at initiating the development of a tool which allows the real-time visualisation of the events DAG of a given Matrix room, as seen from the perspective of one or more homeservers (HS’s).</p>
<p>Regarding my initial proposal, I’ve completed every task proposed and even implemented some additional functionalities. The application is not finished yet and there could be a lot of improvements added to it (especially regarding the design of the UI) but the core functionalities have been implemented.<br/>
I am going to precise what has been accomplished and then give some ideas of features to improve.</p>
<p>During GSoC, I have used two separate repositories for <a href="https://github.com/Kagamihime/matrix-visualisations">the frontend</a> and <a href="https://github.com/Kagamihime/matrix-visualisations-backend">the backend</a>. I will keep both of them because I’m referencing PRs from them (as PRs are easier to link than lengthy lists of commits).<br/>
However, this is <a href="https://github.com/Kagamihime/matrix-visualisations-complete">the repository</a> regrouping these two parts and this one will be moved to matrix-org for the continuation of this project.</p>
<h3 id="complete-the-implementation-of-the-cs-api-backend">Complete the implementation of the CS API backend</h3>
<p>During the application period, I wrote a prototype for this project. This prototype implemented some requests to the CS API (like <a href="https://matrix.org/docs/spec/client_server/r0.5.0#get-matrix-client-r0-login">/login</a>, <a href="https://matrix.org/docs/spec/client_server/r0.5.0#post-matrix-client-r0-logout">/logout</a> or <a href="https://matrix.org/docs/spec/client_server/r0.5.0#get-matrix-client-r0-sync">/sync</a>) but there were more requests to implement in order to be able to fully use this API:</p>
<ul>
<li>In order for the application to automatically join (and leave at the end) a room if the provided account hasn’t already joined it, I implemented the requests to <a href="https://matrix.org/docs/spec/client_server/r0.5.0#get-matrix-client-r0-joined-rooms">/joined_rooms</a>, <a href="https://matrix.org/docs/spec/client_server/r0.5.0#post-matrix-client-r0-rooms-roomid-join">/join</a> and <a href="https://matrix.org/docs/spec/client_server/r0.5.0#post-matrix-client-r0-rooms-roomid-leave">/leave</a>.</li>
<li>The request <a href="https://matrix.org/docs/spec/client_server/r0.5.0#get-matrix-client-r0-rooms-roomid-messages">/messages</a> has been implemented to allow the application to fetch previous messages.</li>
<li>For retrieving in real-time new events, I used the field <code>from</code> in the <a href="https://matrix.org/docs/spec/client_server/r0.5.0#get-matrix-client-r0-sync">/sync</a> request.</li>
</ul>
<p>I also did a lot of clean up in the source code from the prototype during this task. You can have more details in <a href="https://github.com/Kagamihime/matrix-visualisations/pull/1">this PR</a>.</p>
<h3 id="implement-the-first-ui-to-interact-with-the-dag">Implement the first UI to interact with the DAG</h3>
<p>First of all, a lot of work had to be made in order to properly update the displayed DAG when adding new events to it. At this point, I previously used the <code>setData</code> method of the <code>Network</code> object of <a href="https://visjs.org/">the visjs library</a> (which is used for displaying the graph and interacting with it) each time a node was added, but it was resetting the display each time it was called.<br/>
The proper solution was to progressively add nodes and edges to the <code>DataSet</code> object passed to the constructor of the network (see the documentation of <a href="https://visjs.github.io/vis-data/data/index.html">DataSet</a> and <a href="https://visjs.github.io/vis-network/docs/network/">Network</a> for more details).</p>
<p>The DAG has been set to be displayed vertically, the events with the same depth are at the same level, the deepest events are at the bottom. The events which origin is the HS on which we are making the observation are in green, those which are coming from other servers are in orange.
Here is a picture of what it looks like:
<img src="https://raw.githubusercontent.com/Kagamihime/gsoc-2019-final-report/master/events_display.png" alt="Events display" title="Events display" /></p>
<p>In the graph, there is a special node just after the earliest event which allows us to ask the application to load more events. Here is what it looks like:
<img src="https://raw.githubusercontent.com/Kagamihime/gsoc-2019-final-report/master/more_events_button.png" alt="More Events button" title="More Events button" /></p>
<p>When you double click on the node of an event, there is a text area on the right which displays its complete JSON body, like this:
<img src="https://raw.githubusercontent.com/Kagamihime/gsoc-2019-final-report/master/body_display.png" alt="JSON body display" title="JSON body display" /></p>
<p>I’ve also implemented the possibility to choose which particular fields of the event can be directly displayed in the labels of the nodes of the displayed graph:
<img src="https://raw.githubusercontent.com/Kagamihime/gsoc-2019-final-report/master/fields_selection.png" alt="Fields selection" title="Fields selection" /></p>
<h3 id="synapse-postgresql-backend">Synapse PostgreSQL backend</h3>
<p>Next, I implemented a backend for retrieving events from the PostgreSQL database of a Synapse HS. It is a small HTTP server which receives requests from the frontend application and then makes queries to the Synapse database to get the requested events.<br/>
You can find details about the API for using this backend in <a href="https://github.com/Kagamihime/matrix-visualisations-backend/blob/master/README.md">this readme</a>, in the “HTTP REST API” section.<br/>
You can find more details about this initial implementation: <a href="https://github.com/Kagamihime/matrix-visualisations-backend/pull/1">here</a>, <a href="https://github.com/Kagamihime/matrix-visualisations-backend/pull/2">here</a>, <a href="https://github.com/Kagamihime/matrix-visualisations-backend/pull/3">here</a> (my mentor helped me on this one, thanks to him), and <a href="https://github.com/Kagamihime/matrix-visualisations-backend/pull/5">here</a>.<br/>
I’ve added the support of this backend in the frontend application, as well as a way to choose which backend to use (between this one and the CS API) in <a href="https://github.com/Kagamihime/matrix-visualisations/pull/4">this PR</a>.</p>
<h3 id="multiple-views">Multiple views</h3>
<p>I implemented the ability to observe the same DAG of a room from multiple HS’s. This is done with “views”.</p>
<p><img src="https://raw.githubusercontent.com/Kagamihime/gsoc-2019-final-report/master/backend_selection.png" alt="View selection" title="View selection" /></p>
<p>In the picture above, you can see that there is a drop down menu from which you can select the view. The fields under this line are used to control the selected view: indicate where it will be connecting, for which room (you could as well observe a different room in a different view), etc…<br/>
By default, there is only one view but you can add as many as you want by clicking “Add a view”.</p>
<p>All the DAGs from the different views are displayed side-by-side within the same canvas, like this:
<img src="https://raw.githubusercontent.com/Kagamihime/gsoc-2019-final-report/master/multiple_dags.png" alt="Multiple DAGs" title="Multiple DAGs" /></p>
<p>You can have a look at the details of the implementation in <a href="https://github.com/Kagamihime/matrix-visualisations/pull/6">this PR</a>.</p>
<h3 id="add-federation-api-support">Add Federation API support</h3>
<p>The next major task I had to do was the implementation of a backend for retrieving events via the Federation API. I thought a lot about the possible options for the location of this backend and I decided to extend the web server created for the PostgreSQL Synapse backend, so that we could launch it in a “postgres mode” or “federation mode”. But the backend would offer the same HTTP API in both modes.</p>
<p>The backend uses <a href="https://matrix.org/docs/spec/server_server/r0.1.3">the Federation API</a> in the following way:</p>
<ul>
<li>Before being able to retrieve events from a certain room, the backend must join it with <a href="https://matrix.org/docs/spec/server_server/r0.1.3#get-matrix-federation-v1-make-join-roomid-userid">/make_join</a> and <a href="https://matrix.org/docs/spec/server_server/r0.1.3#put-matrix-federation-v1-send-join-roomid-eventid">/send_join</a> requests, it creates an “imaginary user” in this room. The join event created during this process will be the one returned by the endpoint <code>/deepest</code>.</li>
<li>To get earlier events, the backend uses <a href="https://matrix.org/docs/spec/server_server/r0.1.3#get-matrix-federation-v1-backfill-roomid">/backfill</a> requests.</li>
<li>In order to get new events, the backend listens for pushed events from other HS’s with the <a href="https://matrix.org/docs/spec/server_server/r0.1.3#put-matrix-federation-v1-send-txnid">/send</a> request.</li>
<li>When the observation is done, the backend makes the “imaginary user” leave the room by sending <a href="https://matrix.org/docs/spec/server_server/r0.1.3#get-matrix-federation-v1-make-leave-roomid-userid">/make_leave</a> and <a href="https://matrix.org/docs/spec/server_server/r0.1.3#put-matrix-federation-v1-send-leave-roomid-eventid">/send_leave</a> requests.</li>
</ul>
<p>The full details of the implementation are in <a href="https://github.com/Kagamihime/matrix-visualisations-backend/pull/8">this PR</a>. My mentor also helped me get the usage of the <code>Future</code>s  right thanks to <a href="https://github.com/Kagamihime/matrix-visualisations-backend/pull/7">this PR</a>.<br/>
There has been a small modification in the frontend too, because of the addition of the <code>/stop</code> endpoint in the backend’s HTTP API, these modifications are in <a href="https://github.com/Kagamihime/matrix-visualisations/pull/7">this PR</a>.</p>
<h3 id="display-the-state-of-the-room-for-a-given-event">Display the state of the room for a given event</h3>
<p>For each event, there is a state of the room associated with it, which describes what was the state of the room at the moment this event was accepted (the name of the room, its topic, its members and parameters, etc…).<br/>
So I’ve added a way to display this: when you have selected and displayed the JSON body of a given event, you can also request the associated room’s state. I have made it possible to use this feature with every backends: the CS API, the PostgreSQL database and the Federation API. You can have the full details of the implementation <a href="https://github.com/Kagamihime/matrix-visualisations-backend/pull/9">here</a> (for the backend) and <a href="https://github.com/Kagamihime/matrix-visualisations/pull/8">here</a> (for the frontend).</p>
<p>You can see the result of this feature in the picture below (there is a button “Room state at the selected event”, which allows to ask the application to fetch the state, and the text area under this button where the state is displayed):
<img src="https://raw.githubusercontent.com/Kagamihime/gsoc-2019-final-report/master/room_state.png" alt="Room's state display" title="Room's state display" /></p>
<h3 id="additional-fixes">Additional fixes</h3>
<p>Lastly, I’ve applied small fixes to the code of the backend, you can see them in <a href="https://github.com/Kagamihime/matrix-visualisations/pull/9">this PR</a>.</p>
<h2 id="possible-improvements">Possible improvements</h2>
<p>The objective of this project was to develop the core functionalities of this application, however there are a lot of improvements to bring to it, like:</p>
<ul>
<li>Adding the possibility to start the observation of a room from any events (provided that we have the ID of this events) instead of the latest one.</li>
<li>These hasn’t been any UI/UX work design, the CSS style sheet is minimal and the overall look isn’t beautiful or correctly organised. So there would be a lot of work to be done in this area by people with better knowledge in this field than me.</li>
<li>The timestamps of the events are not displayed in a human readable format and would be written as dates and hours to greatly improve the readability.</li>
<li>The application has been tested a lot, especially in situations of misusage. I’ve fixed some bugs which occurred when I was testing it but it was far from being an exhaustive testing, so there could be many improvements regarding the overall robustness of this software.</li>
<li>The backend supports HTTPS connections but has no mechanism for controlling the access of the data behind it (in particular, it means that if you should not run on a production database as it would basically allow anyone to access any data on it). So more work would be needed to make it secure.</li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>This experience has been really rewarding for me. I could discover more about the Matrix community and how the Matrix ecosystem works (on a technical point of view). I want to thank my mentor, Erik Johnston, for his guidance during these past months, and the people in this community who gave me advice.</p>
<p>GSoC has also allowed me to further improve my programming skills in general and discover many various things: the WASM technology, how to use Rust in this context thanks to the various existing libraries/frameworks available, the practical usage of SQL requests as well as TLS certificates and how to apply cryptographic signatures.<br/>
It was sometimes challenging to use such experimental technologies (due to the lack of clear documentation) but also very exiting!</p>
<p>Mid-September, I will start my class for my second and final year of my master degree (software engineering, specialised in distributed systems and applications) at Sorbonne Université so I will definitely have less free time. So I don’t think I’ll be able to actively continue to contribute but I will do my best to help other people to continue the work I’ve initiated.</p>

                
            </div>
        </article>
        
        <nav class="pagination">
    <div class="prev">
        
    </div>
    <span class="page-number">1 / 2</span>
    <div class="prev">
        
        <a href="&#x2F;category&#x2F;gsoc&#x2F;page&#x2F;2&#x2F;">Next ›</a>
        
    </div>
</nav>

    </div>
</div>

    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="&#x2F;code"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p>© 2022 The Matrix.org Foundation C.I.C.</p>
</footer>

</body>

</html>
