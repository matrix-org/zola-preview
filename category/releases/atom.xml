<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
	<title> - Releases</title>
	<link href="matrix.org/category/releases/atom.xml" rel="self" type="application/atom+xml"/>
  <link href="matrix.org"/>
	<generator uri="https://www.getzola.org/">Zola</generator>
	<updated>2023-03-28T00:00:00+00:00</updated>
	<id>matrix.org/category/releases/atom.xml</id>
	<entry xml:lang="en">
		<title>Security releases: matrix-js-sdk 24.0.0 and matrix-react-sdk 3.69.0</title>
		<published>2023-03-28T00:00:00+00:00</published>
		<updated>2023-03-28T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2023/03/28/security-releases-matrix-js-sdk-24-0-0-and-matrix-react-sdk-3-69-0/" type="text/html"/>
		<id>matrix.org/blog/2023/03/28/security-releases-matrix-js-sdk-24-0-0-and-matrix-react-sdk-3-69-0/</id>
		<content type="html">&lt;p&gt;Today we are issuing security releases of matrix-js-sdk and matrix-react-sdk to
patch a pair of High severity vulnerabilities
(&lt;a href=&quot;https:&#x2F;&#x2F;cve.mitre.org&#x2F;cgi-bin&#x2F;cvekey.cgi?keyword=CVE-2023-28427&quot;&gt;CVE-2023-28427&lt;&#x2F;a&gt;
&#x2F; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-js-sdk&#x2F;security&#x2F;advisories&#x2F;GHSA-mwq8-fjpf-c2gr&quot;&gt;GHSA-mwq8-fjpf-c2gr&lt;&#x2F;a&gt;
for matrix-js-sdk and
&lt;a href=&quot;https:&#x2F;&#x2F;cve.mitre.org&#x2F;cgi-bin&#x2F;cvekey.cgi?keyword=CVE-2023-28103&quot;&gt;CVE-2023-28103&lt;&#x2F;a&gt;
&#x2F; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-react-sdk&#x2F;security&#x2F;advisories&#x2F;GHSA-6g43-88cp-w5gv&quot;&gt;GHSA-6g43-88cp-w5gv&lt;&#x2F;a&gt;
for matrix-react-sdk).&lt;&#x2F;p&gt;
&lt;p&gt;Affected clients include those which depend on the affected libraries, such as
Element Web&#x2F;Desktop and Cinny. Releases of the affected clients should follow
shortly. We advise users of those clients to upgrade at their earliest
convenience.&lt;&#x2F;p&gt;
&lt;p&gt;The issues involve prototype pollution via events containing special strings in
key locations, which can temporarily disrupt normal functioning of
matrix-js-sdk and matrix-react-sdk, potentially impacting the consumer&#x27;s
ability to process data safely.&lt;&#x2F;p&gt;
&lt;p&gt;Although we have only demonstrated a denial-of-service-style impact, we cannot
completely rule out the possibility of a more severe impact due to the
relatively extensive attack surface. We have therefore classified this as High
severity and strongly recommend upgrading as a precautionary measure.&lt;&#x2F;p&gt;
&lt;p&gt;We found these issues during a codebase audit that we had &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;08&#x2F;31&#x2F;security-releases-matrix-js-sdk-19-4-0-and-matrix-react-sdk-3-53-0&quot;&gt;previously
announced&lt;&#x2F;a&gt;
in an earlier security release of matrix-js-sdk and matrix-react-sdk. The
earlier release had already addressed a set of similar vulnerabilities that
were assigned
&lt;a href=&quot;https:&#x2F;&#x2F;cve.mitre.org&#x2F;cgi-bin&#x2F;cvekey.cgi?keyword=CVE%2D2022%2D36059&quot;&gt;CVE-2022-36059&lt;&#x2F;a&gt;
&#x2F; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-js-sdk&#x2F;security&#x2F;advisories&#x2F;GHSA-rfv9-x7hh-xc32&quot;&gt;GHSA-rfv9-x7hh-xc32&lt;&#x2F;a&gt;
and
&lt;a href=&quot;https:&#x2F;&#x2F;cve.mitre.org&#x2F;cgi-bin&#x2F;cvekey.cgi?keyword=CVE%2D2022%2D36060&quot;&gt;CVE-2022-36060&lt;&#x2F;a&gt;
&#x2F; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-react-sdk&#x2F;security&#x2F;advisories&#x2F;GHSA-2x9c-qwgf-94xr&quot;&gt;GHSA-2x9c-qwgf-94xr&lt;&#x2F;a&gt;,
which we had initially decided not to disclose until the completion of the
audit. Now that the audit is finished, we are disclosing those previous
advisories as well.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.78 released</title>
		<published>2023-02-28T00:00:00+00:00</published>
		<updated>2023-02-28T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2023/02/28/synapse-1-78-released/" type="text/html"/>
		<id>matrix.org/blog/2023/02/28/synapse-1-78-released/</id>
		<content type="html">&lt;p&gt;Greetings Matrix fans! We&#x27;ve published Synapse &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.78.0&quot;&gt;version 1.78&lt;&#x2F;a&gt;
as the new stable release this week. Synapse admins are encouraged to upgrade
to it at their convenience. Please take a look at the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.78&#x2F;upgrade.html#upgrading-to-v1780&quot;&gt;upgrade notes&lt;&#x2F;a&gt;
for any important information about upgrading.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;announcements&quot;&gt;Announcements&lt;&#x2F;h2&gt;
&lt;p&gt;Please note that Synapse 1.78.0 replaces the &lt;code&gt;&#x2F;_synapse&#x2F;admin&#x2F;v1&#x2F;media&#x2F;&amp;lt;server_name&amp;gt;&#x2F;delete&lt;&#x2F;code&gt; admin API with an identical
endpoint at &lt;code&gt;&#x2F;_synapse&#x2F;admin&#x2F;v1&#x2F;media&#x2F;delete&lt;&#x2F;code&gt;. Please update your tooling to use the new endpoint. The deprecated version
will be removed in a future release.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-new-stuff&quot;&gt;The new stuff&lt;&#x2F;h2&gt;
&lt;p&gt;In case you were unaware, Synapse has a command line export data command which allows administrators to export data for
a specific user (you can read more about this command &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;latest&#x2F;usage&#x2F;administration&#x2F;admin_faq.html#how-can-i-export-user-data&quot;&gt;here&lt;&#x2F;a&gt;).
Synapse 1.78.0 updates this command adding account data to the user information that is returned by the export data command.&lt;&#x2F;p&gt;
&lt;p&gt;This version of Synapse also features a few changes to push rules, with implementations for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3758&quot;&gt;MSC3758&lt;&#x2F;a&gt;:
Add &lt;code&gt;event_property_is push&lt;&#x2F;code&gt; rule condition kind,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3966&quot;&gt;MSC3966&lt;&#x2F;a&gt;: &lt;code&gt;event_property_contains&lt;&#x2F;code&gt; push rule condition, and the removal of the spurious &lt;code&gt;dont_notify&lt;&#x2F;code&gt;
action from the defaults for the &lt;code&gt;.m.rule.reaction&lt;&#x2F;code&gt; pushrule. These changes empower end users to more fully customise their
notification rules - MSC3758 allows users to ask to be notified when a field in an event contains any type of value, rather
than only matching on strings, and MSC3966 provides crucial scaffolding for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3952&quot;&gt;MSC3952&lt;&#x2F;a&gt;: Intentional Mentions,
which aims to eliminate unintentional mentions and improve the experience of mentions in general.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse v1.78.0 includes some fixes for faster-joins related bugs as we work out the kinks. Some of these include a fix
for a bug introduced in Synapse 1.76.0 where partially-joined rooms could not be deleted using the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;latest&#x2F;admin_api&#x2F;rooms.html#delete-room-api&quot;&gt;purge room API&lt;&#x2F;a&gt;, and
a fix for a bug introduced in Synapse 1.75 where the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;latest&#x2F;postgres.html#porting-from-sqlite&quot;&gt;portdb script&lt;&#x2F;a&gt;
would fail to run after a room had been faster-joined. We continue to work to polish faster joins, and thank everyone who
filed an issue.&lt;&#x2F;p&gt;
&lt;p&gt;Finally, for those deployments using workers, v1.78.0 fixed a bug introduced in Synapse 1.76 where 5s delays would
occasionally occur.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;See the full &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.78.0&quot;&gt;changelog&lt;&#x2F;a&gt; for a
complete list of changes in the release. Also please have a look at the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.78&#x2F;upgrade.html#upgrading-to-v1780&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to this release, including (in no particular
order): jahway603, williamkray, 999lakhisidhu, hari01584, saddfox, dklimpel, realtyem
V02460, and thezaidbintariq.&lt;&#x2F;p&gt;
&lt;p&gt;We are also grateful to anyone helping us make Synapse better by sharing their
feedback and reporting issues, or helping with community support questions.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.77 released</title>
		<published>2023-02-16T00:00:00+00:00</published>
		<updated>2023-02-16T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2023/02/16/synapse-1-77-released/" type="text/html"/>
		<id>matrix.org/blog/2023/02/16/synapse-1-77-released/</id>
		<content type="html">&lt;p&gt;Greetings Matrix fans! We&#x27;ve published Synapse &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.77.0&quot;&gt;version 1.77&lt;&#x2F;a&gt;
as the new stable release this week. Synapse admins are encouraged to upgrade
to it at their convenience.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-new-stuff&quot;&gt;The new stuff&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;experimental-support-for-intentional-mentions-msc3952&quot;&gt;Experimental support for intentional mentions (MSC3952)&lt;&#x2F;h3&gt;
&lt;p&gt;Mentioning other users on Matrix is difficult: it is not possible to know if mentioning a user
by display name or Matrix ID will count as a mention, but is also too easy to mistakenly mention a user.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3952&quot;&gt;MSC3952&lt;&#x2F;a&gt; proposes a solution. Its idea is to make the mentioning explicit in the protocol using a dedicated event property,
instead of relying on searching the body of the message as before.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse now implements this as an experimental feature.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;experimental-support-to-suppress-notifications-from-message-edits-msc3958&quot;&gt;Experimental support to suppress notifications from message edits (MSC3958)&lt;&#x2F;h3&gt;
&lt;p&gt;Have you ever been annoyed by a noisy notification that keep coming back, but you can&#x27;t pinpoint
where it&#x27;s coming from?
This is usually because edits to a message where you are mentioned (or that mention &lt;code&gt;@room&lt;&#x2F;code&gt;) will
retrigger a noisy notification. That can be pretty annoying when the message is edited 10 times!&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3958&quot;&gt;MSC3958&lt;&#x2F;a&gt;
is here to solve that, and Synapse now implements it as an experimental feature.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;the-quest-for-speed-continues&quot;&gt;The quest for speed continues!&lt;&#x2F;h3&gt;
&lt;p&gt;Some iterative optimizations have been implemented that should make &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;14971&quot;&gt;joining or leaving&lt;&#x2F;a&gt;
large rooms even faster, and should also &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;14962&quot;&gt;improve sending message&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;See the full &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.77.0&quot;&gt;changelog&lt;&#x2F;a&gt;, for a
complete list of changes in the release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to these releases, including (in no particular
order) icp1994, dklimpel, Fizzadar and realtyem.&lt;&#x2F;p&gt;
&lt;p&gt;We are also grateful to anyone helping us make Synapse better by sharing their
feedback and reporting issues, or helping with community support questions.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Matrix v1.6 release</title>
		<published>2023-02-14T17:04:46+00:00</published>
		<updated>2023-02-14T17:04:46+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2023/02/14/matrix-v1-6-release/" type="text/html"/>
		<id>matrix.org/blog/2023/02/14/matrix-v1-6-release/</id>
		<content type="html">&lt;p&gt;Hey all,&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.6&#x2F;&quot;&gt;Matrix 1.6&lt;&#x2F;a&gt; is out there! Like Matrix 1.5 &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;11&#x2F;17&#x2F;matrix-v-1-5-release&quot;&gt;back in November&lt;&#x2F;a&gt;, this release is largely a maintenance update. Matrix 1.1 through 1.4 have been relatively major upgrades, so a little time between features doesn’t feel like a bad idea :)&lt;&#x2F;p&gt;
&lt;p&gt;As with all spec releases, we encourage implementations to gradually update over the next few months rather than have support for everything on release day - please be kind to the projects you use, and help them gain support if able.&lt;&#x2F;p&gt;
&lt;p&gt;Matrix 1.6 sees just 7 MSCs get merged, though this is to be expected from a maintenance release. Check out &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=eUPJ9zFV5IE&quot;&gt;Matthew’s Matrix 2.0 talk&lt;&#x2F;a&gt; at FOSDEM for an idea of what’s expected over the next few releases.&lt;&#x2F;p&gt;
&lt;p&gt;We’ve covered a couple of the MSCs below, but read on to the full changelog for the full picture.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;msc3030-jump-to-date-api&quot;&gt;MSC3030: Jump to date API&lt;&#x2F;h2&gt;
&lt;p&gt;_It’s here! The time machine we’ve been waiting for! _&lt;&#x2F;p&gt;
&lt;p&gt;Primarily part of the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;vector-im&#x2F;roadmap&#x2F;issues&#x2F;26&quot;&gt;Gitter feature parity project&lt;&#x2F;a&gt; (congratulations to the team &lt;a href=&quot;https:&#x2F;&#x2F;blog.gitter.im&#x2F;2023&#x2F;02&#x2F;13&#x2F;gitter-has-fully-migrated-to-matrix&#x2F;&quot;&gt;going all-in on Matrix&lt;&#x2F;a&gt;, by the way) to drive the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-public-archive&quot;&gt;Matrix Public Archive&lt;&#x2F;a&gt;, the &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.6&#x2F;client-server-api&#x2F;#get_matrixclientv1roomsroomidtimestamp_to_event&quot;&gt;new API&lt;&#x2F;a&gt; gives clients the ability to jump back in time to a nearby event. Being able to find something that was posted on a given day&#x2F;week, but not being sure of which keywords to look for is a major usability improvement - many thanks to the Gitter team for making Matrix better!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;msc3706-faster-joins-part-1&quot;&gt;MSC3706: Faster joins (part 1)&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;em&gt;Matrix is going voom&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2023&#x2F;01&#x2F;31&#x2F;synapse-1-76-released&quot;&gt;Synapse 1.76&lt;&#x2F;a&gt; enabled faster joins by default, and while there’s a lot of Python going into making joins as fast as possible, the specification side is a relatively small change at the moment: &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.6&#x2F;server-server-api&#x2F;#put_matrixfederationv2send_joinroomideventid&quot;&gt;just don’t send as many events during joins&lt;&#x2F;a&gt; (&lt;code&gt;omit_members&lt;&#x2F;code&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;There’s potentially more work on the horizon for making faster joins even faster and more robust, and some of that might involve spec work: keep an eye on Synapse releases and &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;category&#x2F;this-week-in-matrix&quot;&gt;TWIM&lt;&#x2F;a&gt; for updates as we make our way to faster joins in Matrix 2.0 :)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-full-changelog&quot;&gt;The full changelog&lt;&#x2F;h2&gt;
&lt;p&gt;MSCs are how the spec changes in the way it does - adding, fixing, and maintaining features for the whole ecosystem to use. Check out the full changelog below, and the &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;proposals&#x2F;&quot;&gt;Spec Change Proposals&lt;&#x2F;a&gt; page for more information on how these MSCs got merged (hint: they submitted a proposal, which anyone can do - take a look at the &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=SFkZz60RRfc&quot;&gt;Matrix Live episode&lt;&#x2F;a&gt; where Matthew covers the proposal process).&lt;&#x2F;p&gt;
&lt;!-- Intentionally blank line to ensure headers work in the concatenated changelog --&gt;
&lt;h3 id=&quot;client-server-api&quot;&gt;Client-Server API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add information on standard error responses for unknown endpoints&#x2F;methods, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3743&quot;&gt;MSC3743&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1347&quot;&gt;#1347&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;&#x2F;rooms&#x2F;&amp;lt;roomID&amp;gt;&#x2F;timestamp_to_event&lt;&#x2F;code&gt; endpoint, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3030&quot;&gt;MSC3030&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1366&quot;&gt;#1366&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Define &lt;code&gt;hkdf-hmac-sha256.v2&lt;&#x2F;code&gt; MAC method for SAS verification, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3783&quot;&gt;MSC3783&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1412&quot;&gt;#1412&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Clarify the power levels integer range. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1169&quot;&gt;#1169&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1355&quot;&gt;#1355&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that &lt;code&gt;&#x2F;context&lt;&#x2F;code&gt; always returns &lt;code&gt;event&lt;&#x2F;code&gt; even if &lt;code&gt;limit&lt;&#x2F;code&gt; is zero. Contributed by @sumnerevans at @beeper. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1239&quot;&gt;#1239&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify what fields are required when deleting a pusher (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1321&quot;&gt;#1321&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve the presentation of push rule kinds and actions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1348&quot;&gt;#1348&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add missing description to m.call.answer schema. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1353&quot;&gt;#1353&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix various typos throughout the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1363&quot;&gt;#1363&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify parts of the end-to-end encryption sections. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1381&quot;&gt;#1381&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move login API definitions to the right heading. Contributed by @HarHarLinks. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1382&quot;&gt;#1382&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify which events will be included in Stripped State. Contributed by @andybalaam. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1409&quot;&gt;#1409&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add links to the spec for the definition of 3PID &lt;code&gt;medium&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1417&quot;&gt;#1417&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Correct the order of the default override pushrules in the spec. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1421&quot;&gt;#1421&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve distinction between tags and their attributes in the rich text section. Contributed by Nico. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1433&quot;&gt;#1433&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;server-server-api&quot;&gt;Server-Server API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Breaking Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Remove &lt;code&gt;keyId&lt;&#x2F;code&gt; from the server &lt;code&gt;&#x2F;keys&lt;&#x2F;code&gt; endpoints, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3938&quot;&gt;MSC3938&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1350&quot;&gt;#1350&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add information on standard error responses for unknown endpoints&#x2F;methods, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3743&quot;&gt;MSC3743&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1347&quot;&gt;#1347&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;&#x2F;timestamp_to_event&#x2F;&amp;lt;roomID&amp;gt;&lt;&#x2F;code&gt; endpoint, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3030&quot;&gt;MSC3030&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1366&quot;&gt;#1366&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Extend &lt;code&gt;&#x2F;_matrix&#x2F;federation&#x2F;v2&#x2F;send_join&lt;&#x2F;code&gt; to allow omitting membership events, per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3706&quot;&gt;MSC3706&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1393&quot;&gt;#1393&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1398&quot;&gt;#1398&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Note that &lt;code&gt;&#x2F;_matrix&#x2F;federation&#x2F;v2&#x2F;send_join&lt;&#x2F;code&gt; should include heroes for nameless rooms, even when allowed to omit membership events, per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3943&quot;&gt;MSC3943&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1425&quot;&gt;#1425&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Include examples inline instead of using a reference for invite endpoint definitions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1349&quot;&gt;#1349&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;POST _matrix&#x2F;federation&#x2F;v1&#x2F;user&#x2F;keys&#x2F;claim&lt;&#x2F;code&gt; response schema. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1351&quot;&gt;#1351&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Correct the default invite level definition in the &amp;quot;Checks performed on receipt of a PDU&amp;quot; section. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1371&quot;&gt;#1371&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that CNAMEs are permissible for server names. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1376&quot;&gt;#1376&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;edu_type&lt;&#x2F;code&gt; in EDU examples. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1383&quot;&gt;#1383&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;application-service-api&quot;&gt;Application Service API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add information on standard error responses for unknown endpoints&#x2F;methods, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3743&quot;&gt;MSC3743&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1347&quot;&gt;#1347&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;identity-service-api&quot;&gt;Identity Service API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add information on standard error responses for unknown endpoints&#x2F;methods, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3743&quot;&gt;MSC3743&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1347&quot;&gt;#1347&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;push-gateway-api&quot;&gt;Push Gateway API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add information on standard error responses for unknown endpoints&#x2F;methods, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3743&quot;&gt;MSC3743&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1347&quot;&gt;#1347&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;room-versions&quot;&gt;Room Versions&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Update the default room version to 10, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3904&quot;&gt;MSC3904&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1397&quot;&gt;#1397&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Clarify the grammar for room versions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1422&quot;&gt;#1422&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix various typos throughout the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1423&quot;&gt;#1423&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;appendices&quot;&gt;Appendices&lt;&#x2F;h3&gt;
&lt;p&gt;No significant changes.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;internal-changes-tooling&quot;&gt;Internal Changes&#x2F;Tooling&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add link to the unstable spec to the README. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1357&quot;&gt;#1357&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve safety of the proposals retrieval script in the event of failure. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1368&quot;&gt;#1368&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Rename &lt;code&gt;&amp;lt;content&amp;gt;&lt;&#x2F;code&gt; to &lt;code&gt;content&lt;&#x2F;code&gt; in the OpenAPI files for content uploads. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1370&quot;&gt;#1370&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Stop autogenerating examples where we already have an example. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1384&quot;&gt;#1384&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve formatting of definitions in the Push Notifications section. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1415&quot;&gt;#1415&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.76 released</title>
		<published>2023-01-31T00:00:00+00:00</published>
		<updated>2023-01-31T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2023/01/31/synapse-1-76-released/" type="text/html"/>
		<id>matrix.org/blog/2023/01/31/synapse-1-76-released/</id>
		<content type="html">&lt;p&gt;Greetings Matrix fans! We&#x27;ve published Synapse &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.76.0&quot;&gt;version 1.76&lt;&#x2F;a&gt;
as the new stable release this week. Synapse admins are encouraged to upgrade
to it at their convenience. Please take a look at the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.76&#x2F;upgrade.html#upgrading-to-v1760&quot;&gt;upgrade notes&lt;&#x2F;a&gt;
for any important information about upgrading.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;announcements&quot;&gt;Announcements&lt;&#x2F;h2&gt;
&lt;p&gt;The big news is that faster joins for all has arrived! When joining a room for the first time,
Synapse 1.76.0 will request a partial join from the other server by default. Previously, server admins
had to opt-in to this using an experimental config flag.&lt;&#x2F;p&gt;
&lt;p&gt;Server admins can opt out of this feature for the time being by setting&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#1e1e1e;color:#dcdcdc;&quot;&gt;&lt;code&gt;&lt;span&gt;experimental:
&lt;&#x2F;span&gt;&lt;span&gt;    faster_joins: false
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;in their server config.&lt;&#x2F;p&gt;
&lt;p&gt;For everyone else, after a faster join Synapse considers that room &amp;quot;partially joined&amp;quot;. In this state, you should be able to&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;read incoming messages (on clients which support lazy-loaded members in &#x2F;sync);&lt;&#x2F;li&gt;
&lt;li&gt;see incoming state changes, e.g. room topic changes; and&lt;&#x2F;li&gt;
&lt;li&gt;send messages, if the room is unencrypted.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Synapse has to spend more effort to complete the join in the background. Once this finishes, you will be able to&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;send messages, if the room is encrypted;&lt;&#x2F;li&gt;
&lt;li&gt;retrieve room history from before your join, if permitted by the room settings; and&lt;&#x2F;li&gt;
&lt;li&gt;access the full list of room members.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Practically, this means that the experience of joining a large room over federation should be greatly improved. In past
versions of Synapse, joining a large room such as Matrix HQ over federation could take up to 30 mins. This time has been
cut to ~20-30 seconds to partially join in the new release. Those of you who have been watching this know this has been
a huge undertaking, big shout out to the team for getting it over the line! We&#x27;re excited the community to try it, as
always if you encounter any problems you are encouraged to file an &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;new?assignees=&amp;amp;labels=&amp;amp;template=BUG_REPORT.yml&quot;&gt;issue&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;changes-to-the-account-data-replication-streams&quot;&gt;Changes to the account data replication streams&lt;&#x2F;h3&gt;
&lt;p&gt;Please note that Synapse has changed the format of the account data and devices replication streams (between workers).
This is a forwards- and backwards-incompatible change: v1.75 workers cannot process account data replicated by v1.76
workers, and vice versa.&lt;&#x2F;p&gt;
&lt;p&gt;Once all workers are upgraded to v1.76 (or downgraded to v1.75), account data and device replication will resume as normal.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-new-stuff&quot;&gt;The new stuff&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;the-default-room-version-has-now-been-updated-to-v10&quot;&gt;The default room version has now been updated to &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.5&#x2F;rooms&#x2F;v10&#x2F;&quot;&gt;v10&lt;&#x2F;a&gt;&lt;&#x2F;h3&gt;
&lt;p&gt;Room version 10 is now the default room version in Synapse 1.76.0. This room version builds on v9 to introduce a new
&lt;code&gt;knock_restricted&lt;&#x2F;code&gt; join rule, allowing prospective members to more easily join such a room. The &lt;code&gt;knock_restricted&lt;&#x2F;code&gt; join
rule allows for prospective members of a room to join either through knocking or through &lt;code&gt;join_restrictions&lt;&#x2F;code&gt;, which allows
prospective members to join a restricted room based on whether they are a joined member of another room. You can read more
about restricted rooms &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.5&#x2F;client-server-api&#x2F;#restricted-rooms&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;synapse-now-implements-experimental-support-for-msc3930-push-rules-for-polls&quot;&gt;Synapse now implements experimental support for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3930&quot;&gt;MSC3930&lt;&#x2F;a&gt; Push rules for Polls&lt;&#x2F;h3&gt;
&lt;p&gt;Synapse has added some new, default push rules for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3381&quot;&gt;MSC3881&lt;&#x2F;a&gt;-esque event types.&lt;&#x2F;p&gt;
&lt;p&gt;This allows for notifications from polls, ie when a poll starts or ends.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;See the full &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.76.0&quot;&gt;changelog&lt;&#x2F;a&gt;, for a
complete list of changes in the release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to these releases, including: katlol, thezaidbintariq,
dklimpel, FSG-Cat, tjay27, emgrav, villepeh.&lt;&#x2F;p&gt;
&lt;p&gt;We are also grateful to anyone helping us make Synapse better by sharing their
feedback and reporting issues, or helping with community support questions.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.75 released</title>
		<published>2023-01-19T15:38:49+00:00</published>
		<updated>2023-01-19T15:38:49+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2023/01/19/synapse-1-75-released/" type="text/html"/>
		<id>matrix.org/blog/2023/01/19/synapse-1-75-released/</id>
		<content type="html">&lt;p&gt;We published Synapse &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.75.0&quot;&gt;version 1.75&lt;&#x2F;a&gt;
as the new stable release this week. Synapse admins are encouraged to upgrade
to it at their convenience. It seems like the blog post for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.74.0&quot;&gt;version 1.74&lt;&#x2F;a&gt;
was eaten by Santa&#x27;s reindeer, so this post will also cover changes from it.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;announcements&quot;&gt;Announcements&lt;&#x2F;h2&gt;
&lt;p&gt;There were no special announcements for the 1.75 release.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;synapse-1-74-icu-dependency-for-improved-user-search&quot;&gt;Synapse 1.74: ICU dependency for improved user search&lt;&#x2F;h3&gt;
&lt;p&gt;Synapse&#x27;s search functionality has long been poor when searching for non-English
terms. Synapse 1.74 &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;14464&quot;&gt;introduced&lt;&#x2F;a&gt;
support for an optional improved user search experience which has a better
awareness of Unicode. To do so, we use the &lt;a href=&quot;https:&#x2F;&#x2F;icu.unicode.org&#x2F;&quot;&gt;ICU library&lt;&#x2F;a&gt;
when Synapse is installed alongside the binding library &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;PyICU&#x2F;&quot;&gt;PyICU&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse installations using Matrix.org docker images or debian packages will
automatically have the new search mode enabled.&lt;&#x2F;p&gt;
&lt;p&gt;From-source installations will need to include the &lt;code&gt;user-search&lt;&#x2F;code&gt; extra when
&lt;code&gt;pip install&lt;&#x2F;code&gt; Synapse, e.g. &lt;code&gt;pip install matrix-synapse[user-search]&lt;&#x2F;code&gt;.
&lt;strong&gt;NB:&lt;&#x2F;strong&gt; because PyICU is not distributed as source-only on PyPI, you will need
to ensure the ICU development headers are available on your system. See the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.75&#x2F;upgrade.html#unicode-support-in-user-search&quot;&gt;upgrade notes&lt;&#x2F;a&gt;
for more info.&lt;&#x2F;p&gt;
&lt;p&gt;Please try out the new search mode and let us know how you find it in practice.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-new-stuff&quot;&gt;The new stuff&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;support-rfc7636-proof-key-for-code-exchange-for-oauth-single-sign-on&quot;&gt;Support &lt;a href=&quot;https:&#x2F;&#x2F;datatracker.ietf.org&#x2F;doc&#x2F;html&#x2F;rfc7636&quot;&gt;RFC7636&lt;&#x2F;a&gt; Proof Key for Code Exchange for OAuth single sign-on&lt;&#x2F;h3&gt;
&lt;p&gt;Synapse 1.75 adds support for RFC7636 code challenges in the OAuth 2.0 flow.&lt;&#x2F;p&gt;
&lt;p&gt;This is required by Twitter SSO and enabling it can protect against the
&amp;quot;authorization code interception attack&amp;quot;.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;experimental-support-for-removing-account-data-msc3391&quot;&gt;Experimental support for removing account data (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3391&quot;&gt;MSC3391&lt;&#x2F;a&gt;)&lt;&#x2F;h3&gt;
&lt;p&gt;Experimental support for removing account data has landed in Synapse.
It was previously possible to create or update account data but not remove them, this is now possible.&lt;&#x2F;p&gt;
&lt;p&gt;The support is experimental and needs to be enabled with a configuration flag since the MSC hasn&#x27;t landed yet.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;more-faster-remote-room-joins-fixes-and-improvements&quot;&gt;More faster remote room joins fixes and improvements&lt;&#x2F;h3&gt;
&lt;p&gt;In case you missed it we are working on dramatically improve performance of remote room joins, you can refer
to &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;10&#x2F;18&#x2F;testing-faster-remote-room-joins&quot;&gt;this blog post&lt;&#x2F;a&gt; for more details.&lt;&#x2F;p&gt;
&lt;p&gt;The last two Synapse releases brings that a lot closer to a proper release; in
particular they contain a lot of work to support faster joins in deployments
with multiple workers. The project continues in earnest; we hope to have more to
show off in the coming weeks.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;See the full &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.75.0&quot;&gt;changelog&lt;&#x2F;a&gt;, for a
complete list of changes in the release. Also please have a look at the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.75&#x2F;upgrade.html#upgrading-to-v1740&quot;&gt;upgrade
notes&lt;&#x2F;a&gt; for 1.74 version.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to these releases, including (in no particular
order): Ashish Kumar, Dirk Klimpel, Jeremy Kescher, Jeyachandran Rathnam,
Nick Mills-Barrett, Jason Little, Villepeh and Vertux.
We are also grateful to anyone helping us make Synapse better by sharing their
feedback and reporting issues, or helping with community support questions.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.73 released</title>
		<published>2022-12-07T00:00:00+00:00</published>
		<updated>2022-12-07T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/12/07/synapse-1-73-released/" type="text/html"/>
		<id>matrix.org/blog/2022/12/07/synapse-1-73-released/</id>
		<content type="html">&lt;p&gt;And here is another update to your beloved Matrix homeserver implementation, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.73.0&quot;&gt;Synapse
1.73&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;announcements&quot;&gt;Announcements&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;legacy-prometheus-metric-names-removed&quot;&gt;Legacy Prometheus metric names removed&lt;&#x2F;h3&gt;
&lt;p&gt;When releasing &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;10&#x2F;17&#x2F;synapse-1-69-released#upcoming-removal-of-deprecated-prometheus-metric-names&quot;&gt;Synapse 1.69&lt;&#x2F;a&gt;
a couple of months ago, we also announced the removal of old Prometheus metrics that have been replaced by more aptly named ones. 
he list of these metrics can be found &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.73&#x2F;metrics-howto.html#renaming-of-metrics--deprecation-of-old-names-in-12&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.73 implements the final phase of this plan and entirely removes support for those metrics. As a result,
the &lt;code&gt;enable_legacy_metrics&lt;&#x2F;code&gt; configuration option, which was introduced in
&lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;11&#x2F;22&#x2F;synapse-1-72-released#announcements&quot;&gt;Synapse 1.71&lt;&#x2F;a&gt;, has also been removed.&lt;&#x2F;p&gt;
&lt;p&gt;Server administrators who are still relying on these legacy metric names are encouraged to update their dashboards at their earliest convenience.
For more information, please refer to the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.73&#x2F;upgrade#legacy-prometheus-metric-names-have-now-been-removed&quot;&gt;upgrade notes&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-new-stuff&quot;&gt;The new stuff&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;performance&quot;&gt;Performance&lt;&#x2F;h3&gt;
&lt;p&gt;A bunch of performance improvements have been included in this release, specifically around
the &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.5&#x2F;client-server-api&#x2F;#get_matrixclientv3roomsroomidmessages&quot;&gt;&lt;code&gt;&#x2F;messages&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; endpoint.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;14527&quot;&gt;Improvements to event filtering on the client-server API&lt;&#x2F;a&gt; gave the matrix.org homeserver a first nice bump as visible on this graph:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2022-12-07-apdex-filter-events-improvement.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Various optimizations around &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;14491&quot;&gt;fetching&lt;&#x2F;a&gt; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;14508&quot;&gt;bundled&lt;&#x2F;a&gt;
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;14510&quot;&gt;aggregations&lt;&#x2F;a&gt; resulted in yet another nice improvement:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;&#x2F;blog&#x2F;img&#x2F;2022-12-07-bundled-aggregations-improvement.png&quot;&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2022-12-07-bundled-aggregations-improvement.png&quot; alt=&quot;&quot; &#x2F;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Note that the graph from the first image, and the second graph from the second image are &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Apdex&quot;&gt;apdexes&lt;&#x2F;a&gt;, which
is a measure that shows improvement when it goes up (as opposed to e.g. response times, which improve
when they go down).&lt;&#x2F;p&gt;
&lt;h3 id=&quot;extensible-events-experimental-support&quot;&gt;Extensible Events experimental support&lt;&#x2F;h3&gt;
&lt;p&gt;Experimental support for Extensible Events has landed in Synapse.&lt;&#x2F;p&gt;
&lt;p&gt;This is exciting since this global rework of events presentation has been in talks
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;1767&quot;&gt;for a while&lt;&#x2F;a&gt;, and
having an implementation to experiment with greatly helps bringing the feature
closer to completion.&lt;&#x2F;p&gt;
&lt;p&gt;Note that this support is still very much experimental as the related MSCs are still
under review and could change at any time, and therefore not recommended for use
in production.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;See the full &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.73.0&quot;&gt;changelog&lt;&#x2F;a&gt;, for a
complete list of changes in the release. Also please have a look at the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.73&#x2F;upgrade#upgrading-to-v1730&quot;&gt;upgrade
notes&lt;&#x2F;a&gt; for this version.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to this release, including (in no particular
order) &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;schmop&quot;&gt;schmop&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ashfame&quot;&gt;Ashish Kumar&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;realtyem&quot;&gt;realtyem&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;chapb&quot;&gt;Brennan Chapman&lt;&#x2F;a&gt;
as well as anyone helping us make Synapse better by sharing their feedback and reporting issues.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.72 released</title>
		<published>2022-11-22T00:00:00+00:00</published>
		<updated>2022-11-22T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/11/22/synapse-1-72-released/" type="text/html"/>
		<id>matrix.org/blog/2022/11/22/synapse-1-72-released/</id>
		<content type="html">&lt;p&gt;It&#x27;s not Christmas yet, but it&#x27;s time for a new release! Say hello to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.72.0&quot;&gt;Synapse
1.72&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;It seems like this blog didn&#x27;t self update through AI for the 2 preceding
updates so this post will cover 1.70 to 1.72, sorry if this is a bit long but
it&#x27;s been a while :)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;announcements&quot;&gt;Announcements&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;dropping-support-for-postgresql-10&quot;&gt;Dropping support for PostgreSQL 10&lt;&#x2F;h3&gt;
&lt;p&gt;PostgreSQL 10 has reached End Of Life: Synapse will no longer support it
beginning with version 1.72 so please upgrade your database if you have not
already done so.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;legacy-prometheus-metric-names-disabled-and-to-be-removed&quot;&gt;Legacy Prometheus metric names disabled and to be removed&lt;&#x2F;h3&gt;
&lt;p&gt;In previous versions of Synapse, some Prometheus metrics were emitted under two
different names, an older name that was non-compliant with OpenMetrics and
Prometheus conventions and a new compliant name.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.71 and later have the old metric names switched off by default.&lt;&#x2F;p&gt;
&lt;p&gt;For now it&#x27;s still possible to get them by using &lt;code&gt;enable_legacy_metrics: true&lt;&#x2F;code&gt;,
however server administrators still using legacy metric names are highly
encouraged to migrate, as they will be removed in 1.73.&lt;&#x2F;p&gt;
&lt;p&gt;You can find the full list of renamed metrics
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.72&#x2F;metrics-howto.html#renaming-of-metrics--deprecation-of-old-names-in-12&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;changes-to-the-events-received-by-application-services-interest&quot;&gt;Changes to the events received by application services (interest)&lt;&#x2F;h3&gt;
&lt;p&gt;Following the implementation of
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3905&quot;&gt;MSC3905&lt;&#x2F;a&gt;,
Synapse now only considers local users to be interesting to application
services. In other words, the users namespace regex in an app service&#x27;s
registration file is only applied against local users of the homeserver.&lt;&#x2F;p&gt;
&lt;p&gt;Please note, this probably doesn&#x27;t affect the expected behavior of your
application service, since an interesting local user in a room still means all
messages in the room (from local or remote users) will still be considered
interesting.&lt;&#x2F;p&gt;
&lt;p&gt;You can find a bit more info in the MSC and in the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.71&#x2F;upgrade.html#changes-to-the-events-received-by-application-services-interest&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-new-stuff&quot;&gt;The new stuff&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;threads-threads-threads&quot;&gt;Threads, threads, threads!&lt;&#x2F;h3&gt;
&lt;p&gt;Several MSCs related to threads got implemented:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3856&quot;&gt;MSC3856&lt;&#x2F;a&gt;
provide an API to fetch threads and related metadata.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3771&quot;&gt;MSC3771&lt;&#x2F;a&gt; and
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3773&quot;&gt;MSC3773&lt;&#x2F;a&gt;
implementing per thread read receipts and per thread notification counts.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3874&quot;&gt;MSC3874&lt;&#x2F;a&gt;
allows to filter out messages belonging to threads from the main timeline
(still considered experimental). Along with MSC3856, this should noticeably
improve performance of rooms that use threads heavily.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;This should significantly improve user experience related to threads, being
through behavior or performance impact.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;linking-events-together&quot;&gt;Linking events together&lt;&#x2F;h3&gt;
&lt;p&gt;Relationships are great, even more between events than humans!&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3664&quot;&gt;MSC3664&lt;&#x2F;a&gt; allows
Matrix clients to be notified in real time of related events, so you can now be
made quickly aware of this cat emoji reaction that your cat photo clearly
deserved.&lt;&#x2F;p&gt;
&lt;p&gt;Additionally, Synapse 1.72 includes an implementation of
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3912&quot;&gt;MSC3912&lt;&#x2F;a&gt;,
allowing users to redact the relations of a message alongside the message
itself. This is particularly helpful in cases like edits, where users usually
want to see their edits redacted at the same time as the original message. Note
that this implementation is currently incomplete and still experimental, though,
so watch this space!&lt;&#x2F;p&gt;
&lt;h3 id=&quot;faster-joins-continued&quot;&gt;Faster joins, continued&lt;&#x2F;h3&gt;
&lt;p&gt;We continue our journey to get everything going as transparently as possible
when doing fast remote room joins.&lt;&#x2F;p&gt;
&lt;p&gt;If you missed it you can refer to this previous &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;10&#x2F;18&#x2F;testing-faster-remote-room-joins&quot;&gt;blog
post&lt;&#x2F;a&gt; to
get a lot more infos, and feel free to grep Synapse changelog and the numerous
related issues&#x2F;PRs for all the gory details.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;See the full changelogs
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.70.0&quot;&gt;1.70&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.71.0&quot;&gt;1.71&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.72.0&quot;&gt;1.72&lt;&#x2F;a&gt;) for a
complete list of changes in the releases. Also please have a look at the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.72&#x2F;upgrade#upgrading-to-v1720&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for this version.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to this release, including (in no particular
order) &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;deepbluev7&quot;&gt;Nico&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;sando38&quot;&gt;sando38&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;realtyem&quot;&gt;realtyem&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;aceArt-GmbH&quot;&gt;aceArt GmbH&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;tuojamie&quot;&gt;Tuomas
Ojamies&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ashfame&quot;&gt;Ashish
Kumar&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;asymmetric&quot;&gt;asymmetric&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;www.beeper.com&#x2F;&quot;&gt;Beeper&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;renegaderyu&quot;&gt;Ryan
Miguel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ptman&quot;&gt;Paul
Tötterman&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Abdullah0sama&quot;&gt;Abdullah
Osama&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;thefinn93&quot;&gt;Finn&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;intelfx&quot;&gt;Ivan Shapovalov&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk
Klimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ShadowJonathan&quot;&gt;Jonathan de
Jong&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;MichaIng&quot;&gt;MichaIng&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;aaronraimist&quot;&gt;Aaron
Raimist&lt;&#x2F;a&gt; as well as anyone helping us make
Synapse better by sharing their feedback and reporting issues.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Matrix v1.5 release</title>
		<published>2022-11-17T16:56:36+00:00</published>
		<updated>2022-11-17T16:44:47+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/11/17/matrix-v1-5-release/" type="text/html"/>
		<id>matrix.org/blog/2022/11/17/matrix-v1-5-release/</id>
		<content type="html">&lt;p&gt;Hey all,&lt;&#x2F;p&gt;
&lt;p&gt;We’ve just released &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.5&quot;&gt;Matrix 1.5&lt;&#x2F;a&gt;, a largely maintenance update for the spec. We intentionally haven’t landed any major features in this release as Matrix 1.4, &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;09&#x2F;29&#x2F;matrix-v-1-4-release&quot;&gt;just shy of 2 months ago&lt;&#x2F;a&gt;, had introduced fairly large features for clients and servers to consider. As with all spec releases, we encourage implementations to gradually update over the next few months rather than expect them to have support for everything on release day.&lt;&#x2F;p&gt;
&lt;p&gt;Matrix 1.5 sees just 2 MSCs get merged, though this is to be expected from a maintenance release. We expect that the next release (in Q1 2023) will have a few more exciting features to it :)&lt;&#x2F;p&gt;
&lt;p&gt;We’ve covered both MSCs below, but read on to the full changelog for the full picture.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;msc3267-reference-relations&quot;&gt;MSC3267: Reference relations&lt;&#x2F;h2&gt;
&lt;p&gt;Already supported implicitly by the spec up until now, &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.5&#x2F;client-server-api&#x2F;#reference-relations&quot;&gt;reference relations&lt;&#x2F;a&gt; are a way to simply reference another event. Usually these sorts of relations are used for events which need to be related to each other, but a dedicated relationship type doesn’t make a lot of sense.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.5&#x2F;client-server-api&#x2F;#key-verification-framework&quot;&gt;In-room verification&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3381&quot;&gt;MSC3381: Polls&lt;&#x2F;a&gt; are examples of how these relations get used.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;msc3905-clarify-appservice-interest-in-user-ids&quot;&gt;MSC3905: Clarify appservice interest in user IDs&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3905&quot;&gt;MSC3905&lt;&#x2F;a&gt; fixes an issue in the specification where appservices (usually bridges) specifying a users regex without homeserver domain would end up receiving far more event traffic than they would have intended. With the MSC, appservices are now only considered interested in “local” users, regardless of how vague their users namespace is.&lt;&#x2F;p&gt;
&lt;p&gt;Overall this should have no effect on most bridges&#x2F;appservices, however if an appservice in the wild really does need to listen to all users on all homeservers, it can specify a non-exclusive namespace on all rooms instead.&lt;&#x2F;p&gt;
&lt;p&gt;While writing this MSC into the spec we took some time to clarify the appservice registration requirements more generally: check them out &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.5&#x2F;application-service-api&#x2F;#registration&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-full-changelog&quot;&gt;The full changelog&lt;&#x2F;h2&gt;
&lt;p&gt;MSCs are how the spec changes in the way it does - adding, fixing, and maintaining features for the whole ecosystem to use. Check out the full changelog below, and the &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;proposals&#x2F;&quot;&gt;Spec Change Proposals&lt;&#x2F;a&gt; page for more information on how these MSCs got merged (hint: they submitted a proposal, which anyone can do - take a look at the &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=SFkZz60RRfc&quot;&gt;Matrix Live episode&lt;&#x2F;a&gt; where Matthew covers the proposal process).&lt;&#x2F;p&gt;
&lt;h3 id=&quot;client-server-api&quot;&gt;Client-Server API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add &lt;code&gt;m.reference&lt;&#x2F;code&gt; relations, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3267&quot;&gt;MSC3267&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1206&quot;&gt;#1206&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add missing documentation for &lt;code&gt;m.key.verification.request&lt;&#x2F;code&gt; msgtype for in-room verification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1271&quot;&gt;#1271&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Fix various typos throughout the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1260&quot;&gt;#1260&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1265&quot;&gt;#1265&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1276&quot;&gt;#1276&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix naming of &lt;code&gt;device_one_time_keys_count&lt;&#x2F;code&gt; in &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1266&quot;&gt;#1266&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve display of event subtypes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1283&quot;&gt;#1283&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve documentation about ephemeral events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1284&quot;&gt;#1284&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Define a 400 response from &lt;code&gt;&#x2F;_matrix&#x2F;client&#x2F;v3&#x2F;directory&#x2F;rooms&#x2F;{roomAlias}&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1286&quot;&gt;#1286&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify parts of the end-to-end encryption sections. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1294&quot;&gt;#1294&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1345&quot;&gt;#1345&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Various clarifications throughout the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1306&quot;&gt;#1306&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Replace &lt;code&gt;set_sound&lt;&#x2F;code&gt; push rule action by &lt;code&gt;set_tweak&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1318&quot;&gt;#1318&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the behavior of &lt;code&gt;PUT &#x2F;_matrix&#x2F;client&#x2F;v3&#x2F;pushrules&#x2F;{scope}&#x2F;{kind}&#x2F;{ruleId}&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1319&quot;&gt;#1319&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that &lt;code&gt;.m.rule.master&lt;&#x2F;code&gt; has a higher priority than any push rule. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1320&quot;&gt;#1320&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Require request field &lt;code&gt;refresh_token&lt;&#x2F;code&gt; at endpoint &lt;code&gt;POST &#x2F;_matrix&#x2F;client&#x2F;v3&#x2F;refresh&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1323&quot;&gt;#1323&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a number of broken links in the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1330&quot;&gt;#1330&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add example read receipt to &lt;code&gt;GET &#x2F;_matrix&#x2F;client&#x2F;v3&#x2F;sync&lt;&#x2F;code&gt; response example. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1341&quot;&gt;#1341&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;server-server-api&quot;&gt;Server-Server API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Fix a number of broken links in the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1330&quot;&gt;#1330&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;application-service-api&quot;&gt;Application Service API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Clarify that application services can only register an interest in local users, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;issues&#x2F;3905&quot;&gt;MSC3905&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1305&quot;&gt;#1305&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;identity-service-api&quot;&gt;Identity Service API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Fix a number of broken links in the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1330&quot;&gt;#1330&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;push-gateway-api&quot;&gt;Push Gateway API&lt;&#x2F;h3&gt;
&lt;p&gt;No significant changes.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;room-versions&quot;&gt;Room Versions&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Reword the event auth rules to clarify that users cannot demote other users with the same power level. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1269&quot;&gt;#1269&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Various clarifications to the text on event authorisation rules. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1270&quot;&gt;#1270&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a number of broken links in the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1330&quot;&gt;#1330&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;appendices&quot;&gt;Appendices&lt;&#x2F;h3&gt;
&lt;p&gt;No significant changes.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;internal-changes-tooling&quot;&gt;Internal Changes&#x2F;Tooling&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Update docsy theme to v0.5.0 + matrix.org modifications (https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;docsy&#x2F;commit&#x2F;a0032f8db919a6c67ba6cdef2c455f105b6272a2). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1295&quot;&gt;#1295&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Improve error messages emitted by &lt;code&gt;resolve-additional-types&lt;&#x2F;code&gt; template. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1303&quot;&gt;#1303&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix link to API viewer. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1308&quot;&gt;#1308&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Stop rendering the subsections of the Client-Server API and Room Versions specs as their own separate pages. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1317&quot;&gt;#1317&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Use a link checker to ensure that we do not have broken links. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1329&quot;&gt;#1329&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1338&quot;&gt;#1338&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update instructions to preview Swagger definitions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1331&quot;&gt;#1331&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make definition anchors more unique. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1339&quot;&gt;#1339&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Generate the unstable changelogs with towncrier, for consistency. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1340&quot;&gt;#1340&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update CONTRIBUTING.md to mention that non-content changes to this repo should have an &amp;quot;internal&amp;quot; changelog entry. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1342&quot;&gt;#1342&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update module summary table with new modules: Event Replacements, Threading and Reference Relations. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1344&quot;&gt;#1344&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Disable RSS generation for the spec. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1346&quot;&gt;#1346&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.69 released</title>
		<published>2022-10-17T18:52:11+00:00</published>
		<updated>2022-10-17T18:07:15+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/10/17/synapse-1-69-released/" type="text/html"/>
		<id>matrix.org/blog/2022/10/17/synapse-1-69-released/</id>
		<content type="html">&lt;p&gt;Hey everyone, it&#x27;s time for a new Synapse release! &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.69.0&quot;&gt;Synapse
1.69&lt;&#x2F;a&gt; is out, fresh
out of the oven. But before we take a look at it, here&#x27;s a quick announcement:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;We have recently disclosed a moderate severity security vulnerability, which
was fixed in &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;07&#x2F;06&#x2F;synapse-1-62-released&#x2F;&quot;&gt;Synapse
1.62&lt;&#x2F;a&gt; (released on
July 5th 2022). This issue affects all homeservers running a version of
Synapse older than 1.62 with open federation. If this is the case for your
deployment, please update to a more recent version of Synapse at your earliest
convenience.&lt;&#x2F;p&gt;
&lt;p&gt;See advisory
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;security&#x2F;advisories&#x2F;GHSA-jhjh-776m-4765&quot;&gt;GHSA-jhjh-776m-4765&lt;&#x2F;a&gt;
and &lt;a href=&quot;https:&#x2F;&#x2F;www.cve.org&#x2F;CVERecord?id=CVE-2022-31152&quot;&gt;CVE-2022-31152&lt;&#x2F;a&gt; for more
information.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Now let&#x27;s see what&#x27;s new in Synapse 1.69!&lt;&#x2F;p&gt;
&lt;span id=&quot;continue-reading&quot;&gt;&lt;&#x2F;span&gt;&lt;h2 id=&quot;caching-in-modules&quot;&gt;Caching in modules&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse modules allow third-party developers to extend Synapse&#x27;s feature range
to include very custom features.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.69 includes tools modules can use to interact with Synapse&#x27;s caching
system, which includes features such as synchronising caches across multiple
Synapse workers.&lt;&#x2F;p&gt;
&lt;p&gt;Starting with this version, modules can import the &lt;code&gt;@cache()&lt;&#x2F;code&gt; decorator from
&lt;code&gt;synapse.module_api&lt;&#x2F;code&gt;, to decorate functions which results must be cached. Cached
functions need to be registered with
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.69.0&#x2F;synapse&#x2F;module_api&#x2F;__init__.py#L839-L853&quot;&gt;&lt;code&gt;ModuleApi.register_cached_function&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
at the module&#x27;s initialisation. Invalidating a cached function&#x27;s result for a
given set of arguments can be done using &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.69.0rc1&#x2F;synapse&#x2F;module_api&#x2F;__init__.py#L855-L872&quot;&gt;&lt;code&gt;ModuleApi.invalidate_cache&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;upcoming-removal-of-deprecated-prometheus-metric-names&quot;&gt;Upcoming removal of deprecated Prometheus metric names&lt;&#x2F;h2&gt;
&lt;p&gt;Back in &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2019&#x2F;07&#x2F;25&#x2F;synapse-1-2-0-released&quot;&gt;Synapse
1.2&lt;&#x2F;a&gt;, we deprecated a
number of Prometheus metrics, to replace them with more aptly named equivalents
that fit existing naming conventions better.&lt;&#x2F;p&gt;
&lt;p&gt;With Synapse 1.69, we&#x27;re announcing the plan for the removal for these
deprecated metrics. Synapse 1.71 (due to be released on November 8) will turn
these metrics off by default (though it will still be possible to enable them
back). Synapse 1.73 (due to be released on November 22) will remove them
altogether.&lt;&#x2F;p&gt;
&lt;p&gt;Server administrators using metrics dashboards that rely on the deprecated
metrics are encouraged to update their dashboards with the new metric names. See
the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.69&#x2F;upgrade.html#deprecation-of-legacy-prometheus-metric-names&quot;&gt;upgrade
notes&lt;&#x2F;a&gt; for more information.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse 1.69 also deprecates the &lt;code&gt;generate_short_term_login_token&lt;&#x2F;code&gt; module API
method in favour of the asynchronous &lt;code&gt;create_login_token&lt;&#x2F;code&gt; one. The deprecated
method will be removed in Synapse 1.71. See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.69&#x2F;upgrade.html#deprecation-of-the-generate_short_term_login_token-module-api-method&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;p&gt;Additionally, Synapse 1.69 introduces a forwards- and backwards-incompatible
change to the replication of read receipts. This means that read receipts
replicated by workers running Synapse 1.68 will not be able to be processed by
workers running Synapse 1.69 and vice-versa. Once all workers are made to run
Synapse 1.69 (or 1.68), replication of read receipts will resume as normal. See
the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.69&#x2F;upgrade.html#changes-to-the-receipts-replication-streams&quot;&gt;upgrade
notes&lt;&#x2F;a&gt; for more information.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.69.0&quot;&gt;full
changelog&lt;&#x2F;a&gt; for a
complete list of changes in this release. Also please have a look at the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.69&#x2F;upgrade#upgrading-to-v1690&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for this version.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to this release, including (in no particular
order) &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;lukasdenk&quot;&gt;lukasdenk&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk
Klimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ashfame&quot;&gt;Ashish
Kumar&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;www.famedly.com&#x2F;&quot;&gt;Famedly&lt;&#x2F;a&gt; and
&lt;a href=&quot;https:&#x2F;&#x2F;www.beeper.com&#x2F;&quot;&gt;Beeper&lt;&#x2F;a&gt;, as well as anyone helping us make Synapse
better by sharing their feedback and reporting issues.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Matrix v1.4 release</title>
		<published>2022-09-29T15:30:32+00:00</published>
		<updated>2022-09-29T15:30:32+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/09/29/matrix-v1-4-release/" type="text/html"/>
		<id>matrix.org/blog/2022/09/29/matrix-v1-4-release/</id>
		<content type="html">&lt;p&gt;Hey all,&lt;&#x2F;p&gt;
&lt;p&gt;It’s finally here: &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.4&#x2F;client-server-api&#x2F;#threading&quot;&gt;threads&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.4&#x2F;client-server-api&#x2F;#event-replacements&quot;&gt;edits&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.4&#x2F;client-server-api&#x2F;#private-read-receipts&quot;&gt;private read receipts&lt;&#x2F;a&gt;. v1.4 has been a little later than usual in the quarter because we wanted to make sure we nailed down all the core MSCs for threads before publishing the spec itself, but we’ve done that now and we’re excited about it.&lt;&#x2F;p&gt;
&lt;span id=&quot;continue-reading&quot;&gt;&lt;&#x2F;span&gt;
&lt;p&gt;Matrix 1.3 was &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;06&#x2F;16&#x2F;matrix-v-1-3-release&quot;&gt;just over 3 months ago&lt;&#x2F;a&gt;, though with the relatively large features there and the colossal implementation effort of v1.4 we’re not expecting everyone to have implementations on day 1. Instead, as with all spec releases, we encourage implementations to gradually update over the next few months. We’re additionally planning to make v1.5 (Q4 2022) more of a maintenance update to help make the backlog a bit easier on everyone, though we might prioritize a couple cool features in there too :)&lt;&#x2F;p&gt;
&lt;p&gt;Matrix 1.4 sees 14 MSCs get merged, but we can’t possibly go into detail on them all here. We’ve instead focused on the 3 major features we’re excited about - check out the changelog at the end for the full picture.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;threads&quot;&gt;🧵 Threads&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.4&#x2F;client-server-api&#x2F;#threading&quot;&gt;Threads&lt;&#x2F;a&gt;, a critical feature in terms of parity with other chat systems, have landed thanks to a whopping 6 MSCs: &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3440&quot;&gt;MSC3440&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3816&quot;&gt;MSC3816&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3856&quot;&gt;MSC3856&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3715&quot;&gt;MSC3715&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3771&quot;&gt;MSC3771&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3773&quot;&gt;MSC3773&lt;&#x2F;a&gt;. It’s been a lot of iteration on the reference implementations to get threads this far, and we’re excited to see how the client implementations evolve to provide more structured and less noisy communication for everyone - keep us updated with &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;category&#x2F;this-week-in-matrix&quot;&gt;TWIM&lt;&#x2F;a&gt; posts, please!&lt;&#x2F;p&gt;
&lt;p&gt;Threads have involved changes to event relationships (which were &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;06&#x2F;16&#x2F;matrix-v-1-3-release#aggregations-and-the-relationships-made-along-the-way&quot;&gt;fixed in v1.3&lt;&#x2F;a&gt;), read receipts, and notification counts, resulting in several different models and ways of solving the problem. We think we’ve reached a point that works for conversational threads, though there’s work on the horizon for threads-only rooms, Twitter-style free-form threads, etc to cover more needs of users.&lt;&#x2F;p&gt;
&lt;p&gt;Currently, the demonstration implementation of threads in Synapse and Element is working its way out of the proof-of-concept and beta stages (which were sufficient to validate the MSCs) and are on their way to exiting beta. Keep an eye on the respective blogs for news about production-ready threads!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;memo-edits&quot;&gt;📝 Edits&lt;&#x2F;h2&gt;
&lt;p&gt;Similar to reactions, err, &lt;em&gt;&lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;06&#x2F;16&#x2F;matrix-v-1-3-release#aggregations-and-the-relationships-made-along-the-way&quot;&gt;aggregations&lt;&#x2F;a&gt;&lt;&#x2F;em&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2676&quot;&gt;MSC2676&lt;&#x2F;a&gt; and its predecessors have been around for a long while. Edits have existed in the Element clients seemingly forever, and other clients have had troubles trying to implement the same feature: with it now in the spec, it should be a lot easier to bring edits into clients.&lt;&#x2F;p&gt;
&lt;p&gt;For edits, we’ve taken the route of making the MSC match reality, for better or worse. MSCs which improve or add functionality to the system are very much welcome - &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;proposals&#x2F;&quot;&gt;writing an MSC&lt;&#x2F;a&gt; is relatively easy and helps the whole community.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;busts-in-silhouette-private-read-receipts&quot;&gt;👥 Private read receipts&lt;&#x2F;h2&gt;
&lt;p&gt;Not everyone wants to broadcast that they’ve read a message, but also with read receipts tied into notifications those same people also probably don’t want stuck notifications. To address the problem, we’ve added a new &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.4&#x2F;client-server-api&#x2F;#private-read-receipts&quot;&gt;m.read.private receipt type&lt;&#x2F;a&gt; which behaves exactly like m.read, but is only visible to you.&lt;&#x2F;p&gt;
&lt;p&gt;We still have a rework of the notifications system in our long-term plan, but this should hopefully cover the privacy concerns for the time being :)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-full-changelog&quot;&gt;The full changelog&lt;&#x2F;h2&gt;
&lt;p&gt;MSCs are how the spec changes in the way it does - adding, fixing, and maintaining features for the whole ecosystem to use. The blog post can’t cover them all, but that doesn’t make them any less important! Check out the full changelog below, and the &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;proposals&#x2F;&quot;&gt;Spec Change Proposals&lt;&#x2F;a&gt; page for more information on how these MSCs got merged (hint: they submitted a proposal, which anyone can do - take a look at the &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=SFkZz60RRfc&quot;&gt;Matrix Live episode&lt;&#x2F;a&gt; where Matthew covers the proposal process).&lt;&#x2F;p&gt;
&lt;h3 id=&quot;client-server-api&quot;&gt;Client-Server API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Removed Endpoints&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Remove unused policy room sharing mechanism, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3844&quot;&gt;MSC3844&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1196&quot;&gt;#1196&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add a &lt;code&gt;.m.rule.room.server_acl&lt;&#x2F;code&gt; push rule to match &lt;code&gt;m.room.server_acl&lt;&#x2F;code&gt; events, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3786&quot;&gt;MSC3786&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1190&quot;&gt;#1190&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1201&quot;&gt;#1201&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;Cross-Origin-Resource-Policy&lt;&#x2F;code&gt; (CORP) headers to media repository, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3828&quot;&gt;MSC3828&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1197&quot;&gt;#1197&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Copy a room&#x27;s &lt;code&gt;type&lt;&#x2F;code&gt; when upgrading it, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3818&quot;&gt;MSC3818&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1198&quot;&gt;#1198&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;room_types&lt;&#x2F;code&gt; filter and &lt;code&gt;room_type&lt;&#x2F;code&gt; response to &lt;code&gt;&#x2F;publicRooms&lt;&#x2F;code&gt;, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3827&quot;&gt;MSC3827&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1199&quot;&gt;#1199&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;m.replace&lt;&#x2F;code&gt; relations (event edits), as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2676&quot;&gt;MSC2676&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1211&quot;&gt;#1211&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;m.read.private&lt;&#x2F;code&gt; receipts, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2285&quot;&gt;MSC2285&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1216&quot;&gt;#1216&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make &lt;code&gt;m.fully_read&lt;&#x2F;code&gt; optional on &lt;code&gt;&#x2F;read_markers&lt;&#x2F;code&gt;, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2285&quot;&gt;MSC2285&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1216&quot;&gt;#1216&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow &lt;code&gt;m.fully_read&lt;&#x2F;code&gt; markers to be set from &lt;code&gt;&#x2F;receipts&lt;&#x2F;code&gt;, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2285&quot;&gt;MSC2285&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1216&quot;&gt;#1216&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add threading via &lt;code&gt;m.thread&lt;&#x2F;code&gt; relations, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3440&quot;&gt;MSC3440&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3816&quot;&gt;MSC3816&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3856&quot;&gt;MSC3856&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3715&quot;&gt;MSC3715&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1254&quot;&gt;#1254&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add per-thread notifications and read receipts, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3771&quot;&gt;MSC3771&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3773&quot;&gt;MSC3773&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1255&quot;&gt;#1255&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Mention that the &lt;code&gt;&#x2F;rooms&#x2F;{roomId}&#x2F;invite&lt;&#x2F;code&gt; endpoint will return a 200 response if the user is already invited to the room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1084&quot;&gt;#1084&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix various typos throughout the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1135&quot;&gt;#1135&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1161&quot;&gt;#1161&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1164&quot;&gt;#1164&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1170&quot;&gt;#1170&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1180&quot;&gt;#1180&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1215&quot;&gt;#1215&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1238&quot;&gt;#1238&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1243&quot;&gt;#1243&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Describe return codes for account data endpoints, and clarify that per-room data does not inherit from the global data. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1155&quot;&gt;#1155&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that policy rule globs work like ACL globs. Contributed by Nico. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1165&quot;&gt;#1165&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the format of some structures in the End-to-end encryption module. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1166&quot;&gt;#1166&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add HTML anchors for object definitions in the formatted specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1174&quot;&gt;#1174&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Tweak the styling of &lt;code&gt;&amp;lt;code&amp;gt;&lt;&#x2F;code&gt; snippets in tables rendered from OpenAPI definitions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1179&quot;&gt;#1179&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update &amp;quot;API Standards&amp;quot; section to clarify how JSON is used. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1185&quot;&gt;#1185&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that the &amp;quot;device_id&amp;quot;, &amp;quot;user_id&amp;quot; and &amp;quot;access_token&amp;quot; fields are required in the response body of &lt;code&gt;POST &#x2F;_matrix&#x2F;client&#x2F;v3&#x2F;login&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1210&quot;&gt;#1210&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reinforce the relationship of refreshed access tokens to transaction IDs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1236&quot;&gt;#1236&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify enum values by separating possible values with commas. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1240&quot;&gt;#1240&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;server-server-api&quot;&gt;Server-Server API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add per-thread notifications and read receipts, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3771&quot;&gt;MSC3771&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3773&quot;&gt;MSC3773&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1255&quot;&gt;#1255&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add HTML anchors for object definitions in the formatted specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1174&quot;&gt;#1174&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Tweak the styling of &lt;code&gt;&amp;lt;code&amp;gt;&lt;&#x2F;code&gt; snippets in tables rendered from OpenAPI definitions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1179&quot;&gt;#1179&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update &amp;quot;API Standards&amp;quot; section to clarify how JSON is used. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1185&quot;&gt;#1185&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;application-service-api&quot;&gt;Application Service API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Breaking Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Replace homeserver authorization approach with an &lt;code&gt;Authorization&lt;&#x2F;code&gt; header instead of &lt;code&gt;access_token&lt;&#x2F;code&gt; when talking to the application service, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2832&quot;&gt;MSC2832&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1200&quot;&gt;#1200&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add HTML anchors for object definitions in the formatted specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1174&quot;&gt;#1174&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;identity-service-api&quot;&gt;Identity Service API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add HTML anchors for object definitions in the formatted specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1174&quot;&gt;#1174&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update &amp;quot;API Standards&amp;quot; section to clarify how JSON is used. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1185&quot;&gt;#1185&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;push-gateway-api&quot;&gt;Push Gateway API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add HTML anchors for object definitions in the formatted specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1174&quot;&gt;#1174&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;room-versions&quot;&gt;Room Versions&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;For room versions 1 through 10, clarify that events with rejected &lt;code&gt;auth_events&lt;&#x2F;code&gt; must be rejected. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1137&quot;&gt;#1137&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;For room versions 2–10: correct a mistaken clarification to the state resolution algorithm. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1158&quot;&gt;#1158&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;For room versions 7 through 10: Clarify that &lt;code&gt;invite-&amp;gt;knock&lt;&#x2F;code&gt; is actually a legal transition. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1175&quot;&gt;#1175&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;appendices&quot;&gt;Appendices&lt;&#x2F;h3&gt;
&lt;p&gt;No significant changes.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;internal-changes-tooling&quot;&gt;Internal Changes&#x2F;Tooling&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add internal changes changelog section. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1194&quot;&gt;#1194&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Render HTML anchors for object definition tables. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1191&quot;&gt;#1191&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Give rendered-data sections a background and some padding. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1195&quot;&gt;#1195&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix rendering of shortcodes within the client-server API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1205&quot;&gt;#1205&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the spacing of mapping types generated from the OpenAPI spec. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1230&quot;&gt;#1230&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Announcing Third Room Tech Preview 1</title>
		<published>2022-09-27T17:53:52+00:00</published>
		<updated>2022-09-27T17:53:52+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/09/27/announcing-third-room-tech-preview-1/" type="text/html"/>
		<id>matrix.org/blog/2022/09/27/announcing-third-room-tech-preview-1/</id>
		<content type="html">&lt;p&gt;We&#x27;re excited to announce the first tech preview of &lt;a href=&quot;https:&#x2F;&#x2F;thirdroom.io&#x2F;&quot;&gt;Third Room&lt;&#x2F;a&gt;, an open, standards-based, decentralised vision of the metaverse for the open Web, built entirely on Matrix… without cryptocurrencies, NFTs or walled gardens.&lt;&#x2F;p&gt;
&lt;p&gt;To see what it&#x27;s all about, head over to &lt;a href=&quot;https:&#x2F;&#x2F;thirdroom.io&#x2F;preview&quot;&gt;https:&#x2F;&#x2F;thirdroom.io&#x2F;preview&lt;&#x2F;a&gt; - or come chat in &lt;a href=&quot;https:&#x2F;&#x2F;matrix.to&#x2F;#&#x2F;#thirdroom-dev:matrix.org&quot;&gt;#thirdroom-dev:matrix.org&lt;&#x2F;a&gt; to learn more!&lt;&#x2F;p&gt;
&lt;iframe src=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;embed&#x2F;skC5TYRAgKE&quot; loading=&quot;lazy&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen&gt;&lt;&#x2F;iframe&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.68 released</title>
		<published>2022-09-27T16:34:55+00:00</published>
		<updated>2022-09-27T16:34:55+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/09/27/synapse-1-68-released/" type="text/html"/>
		<id>matrix.org/blog/2022/09/27/synapse-1-68-released/</id>
		<content type="html">&lt;p&gt;Hey everyone, it&#x27;s time for a new Synapse release! &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.68.0&quot;&gt;Synapse
1.68&lt;&#x2F;a&gt; just dropped,
let&#x27;s have a look at what&#x27;s inside.&lt;&#x2F;p&gt;
&lt;span id=&quot;continue-reading&quot;&gt;&lt;&#x2F;span&gt;&lt;h2 id=&quot;dependency-changes&quot;&gt;Dependency changes&lt;&#x2F;h2&gt;
&lt;p&gt;As announced in the &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;09&#x2F;14&#x2F;synapse-1-67-released&quot;&gt;Synapse 1.67 release
announcement&lt;&#x2F;a&gt;, Synapse
1.68 raises the minimum supported version of SQLite to version v3.27.0. This
means that, if your installation of Synapse is using SQLite to manage its
database, and the SQLite version used is lower than 3.27, you will need to
upgrade to a more recent version before updating to Synapse 1.68. This change does not impact deployments using the &lt;code&gt;matrixdotorg&#x2F;synapse&lt;&#x2F;code&gt; Docker image. &lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.68 also introduces the requirement of a Rust compiler for source
checkouts. The minimum required version of Rust is 1.58.1. Installations that
use &lt;code&gt;pip install matrix-synapse&lt;&#x2F;code&gt;, Debian packages from &lt;code&gt;packages.matrix.org&lt;&#x2F;code&gt; or
the &lt;code&gt;matrixdotorg&#x2F;synapse&lt;&#x2F;code&gt; Docker image to manage and run Synapse, are not
impacted by this change.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.68&#x2F;upgrade#upgrading-to-v1680&quot;&gt;upgrade
notes&lt;&#x2F;a&gt; for more information.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;admin-api-improvements&quot;&gt;Admin API improvements&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse 1.68 introduces a new admin API which allows server administrators to
query events in a given room that have been sent within a specific time window.
This API mirrors &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.3&#x2F;client-server-api&#x2F;#get_matrixclientv3roomsroomidmessages&quot;&gt;the specification&#x27;s &lt;code&gt;&#x2F;messages&lt;&#x2F;code&gt;
endpoint&lt;&#x2F;a&gt;,
and allows, among other things, paginating through a room&#x27;s history. See &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.68&#x2F;admin_api&#x2F;rooms.html#room-messages-api&quot;&gt;the
documentation&lt;&#x2F;a&gt; for more information.&lt;&#x2F;p&gt;
&lt;p&gt;This version of Synapse also introduces a new admin API to help administrator of
homeservers using an external authentication provider. This endpoint allows
looking up a specific identifier on the authentication provider and resolving it
into the identifier of the local user it&#x27;s associated with, if any. See &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.68&#x2F;admin_api&#x2F;user_admin_api.html#find-a-user-based-on-their-id-in-an-auth-provider&quot;&gt;the
documentation&lt;&#x2F;a&gt; for more information.&lt;&#x2F;p&gt;
&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.68&#x2F;admin_api&#x2F;user_admin_api.html#user-admin-api&quot;&gt;user admin
API&lt;&#x2F;a&gt;
has also been updated to allow administrator of homeservers &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;latest&#x2F;consent_tracking.html&quot;&gt;requiring agreement
to the server&#x27;s terms and
conditions&lt;&#x2F;a&gt;
to view and edit the timestamp at which each user has provided their agreement.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse 1.68 greatly improves the validation of user input on most of the
account management API endpoints.&lt;&#x2F;p&gt;
&lt;p&gt;This version of Synapse also adds a new &lt;code&gt;request_id_header&lt;&#x2F;code&gt; option to the
configuration of HTTP listeners, which allows tracking the identifier Synapse
generates for each request in that request&#x27;s response. This can be helpful for
correlating Synapse logs with reverse proxy logs. See &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.68&#x2F;usage&#x2F;configuration&#x2F;config_documentation.html#listeners&quot;&gt;the
documentation&lt;&#x2F;a&gt; for more information.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.68.0&quot;&gt;full
changelog&lt;&#x2F;a&gt; for a
complete list of changes in this release. Also please have a look at the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.68&#x2F;upgrade#upgrading-to-v1680&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for this version.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to this release, including (in no particular
order) &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dakariakin&quot;&gt;Denis Kariakin&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk
Klimpel&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;www.beeper.com&#x2F;&quot;&gt;Beeper&lt;&#x2F;a&gt;, as
well as anyone helping us make Synapse better by sharing their feedback and
reporting issues.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.67 released</title>
		<published>2022-09-14T13:03:21+00:00</published>
		<updated>2022-09-14T13:03:21+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/09/14/synapse-1-67-released/" type="text/html"/>
		<id>matrix.org/blog/2022/09/14/synapse-1-67-released/</id>
		<content type="html">&lt;p&gt;It&#x27;s that time again - Synapse release time! &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.67.0&quot;&gt;Synapse
1.67&lt;&#x2F;a&gt; is fresh out
of the oven, let&#x27;s have a look at what&#x27;s inside.&lt;&#x2F;p&gt;
&lt;span id=&quot;continue-reading&quot;&gt;&lt;&#x2F;span&gt;&lt;h2 id=&quot;removal-of-tcp-replication&quot;&gt;Removal of TCP replication&lt;&#x2F;h2&gt;
&lt;p&gt;As announced in the &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;09&#x2F;02&#x2F;synapse-1-66-released&quot;&gt;Synapse 1.66 release
announcement&lt;&#x2F;a&gt;, Synapse 1.67 removes support for the legacy TCP replication protocol.&lt;&#x2F;p&gt;
&lt;p&gt;As a reminder, Synapse can be configured to use workers to spread its load over
multiple processes, or even multiple machines. These workers communicate between
each other (and with the main Synapse process) using something we call
&amp;quot;replication&amp;quot;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.18.0&quot;&gt;Synapse 1.18&lt;&#x2F;a&gt;
deprecated its TCP-based replication protocol, and replaced it with a brand new
one using &lt;a href=&quot;https:&#x2F;&#x2F;redis.io&#x2F;&quot;&gt;Redis&lt;&#x2F;a&gt;. As of Synapse 1.67, this Redis-based
protocol is now the only protocol that can be used.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.67&#x2F;upgrade.html#direct-tcp-replication-is-no-longer-supported-migrate-to-redis&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;changes-for-installations-using-a-source-checkout&quot;&gt;Changes for installations using a source checkout&lt;&#x2F;h2&gt;
&lt;p&gt;Server admins who installed Synapse using a source checkout might already be
familiar with &lt;a href=&quot;https:&#x2F;&#x2F;python-poetry.org&#x2F;&quot;&gt;Poetry&lt;&#x2F;a&gt;. This is a tool we use
to better manage dependencies within Synapse. As of this version, we have
updated Synapse&#x27;s dependency on Poetry to require Poetry 1.2, which was recently
released.&lt;&#x2F;p&gt;
&lt;p&gt;It is also worth noting that Synapse 1.68, which is due to release on the 27th
of September, will require a Rust compiler when installed from a source
checkout. This is because we are in the process of introducing Rust in Synapse&#x27;s
code base, in order to make some hot code paths more efficient. See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.67&#x2F;upgrade.html#rust-requirement-in-the-next-release&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;p&gt;These two changes should not impact installations that use &lt;code&gt;pip install matrix-synapse&lt;&#x2F;code&gt;, Debian packages from &lt;code&gt;packages.matrix.org&lt;&#x2F;code&gt; or the
&lt;code&gt;matrixdotorg&#x2F;synapse&lt;&#x2F;code&gt; Docker image to manage and run Synapse.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse 1.68 (due on the 27th of September) will also require SQLite v3.27.0 or
higher when run with SQLite. Synapse 1.67 is the last version of Synapse to
support SQLite versions 3.22 to 3.26. See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.67&#x2F;upgrade.html#sqlite-version-requirement-in-the-next-release&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.67.0&quot;&gt;full
changelog&lt;&#x2F;a&gt; for a
complete list of changes in this release. Also please have a look at the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.67&#x2F;upgrade#upgrading-to-v1670&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for this version.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to this release, including (in no particular
order) &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk Klimpel&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;www.beeper.com&#x2F;&quot;&gt;Beeper&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Vetchu&quot;&gt;Jacek
Kuśnierz&lt;&#x2F;a&gt;, as well as anyone helping us make Synapse
better by sharing their feedback and reporting issues.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Security release of matrix-appservice-irc 0.35.0 (High severity)</title>
		<published>2022-09-13T16:56:43+00:00</published>
		<updated>2022-09-13T16:56:43+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/09/13/security-release-of-matrix-appservice-irc-0-35-0-high-severity/" type="text/html"/>
		<id>matrix.org/blog/2022/09/13/security-release-of-matrix-appservice-irc-0-35-0-high-severity/</id>
		<content type="html">&lt;p&gt;We&#x27;ve released a new version of matrix.org&#x27;s node-irc 1.3.0 and
matrix-appservice-irc 0.35.0, to patch several security issues:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;IRC mode operator confusion (Low, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-appservice-irc&#x2F;security&#x2F;advisories&#x2F;GHSA-cq7q-5c67-w39w&quot;&gt;GHSA-cq7q-5c67-w39w&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Parsing issue leading to room takeovers (High, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-appservice-irc&#x2F;security&#x2F;advisories&#x2F;GHSA-xvqg-mv25-rwvw&quot;&gt;GHSA-xvqg-mv25-rwvw&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Undisclosed issue (Moderate, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-appservice-irc&#x2F;security&#x2F;advisories&#x2F;GHSA-r3p6-cg2c-c4qw&quot;&gt;GHSA-r3p6-cg2c-c4qw&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;The details of the final vulnerability will be released at a later date,
pending an audit of the codebase to ensure it&#x27;s not affected by other similar
vulnerabilities.&lt;&#x2F;p&gt;
&lt;p&gt;The vulnerabilities have been patched in node-irc version 1.3.0 and
matrix-appservice-irc 0.35.0. You can get the release on
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-appservice-irc&#x2F;releases&quot;&gt;Github&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The bridges running on the Libera Chat, OFTC and other networks bridged by the
Matrix.org Foundation have been patched.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Please upgrade your IRC bridge as soon as possible.&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The above vulnerabilities were reported by &lt;a href=&quot;https:&#x2F;&#x2F;valentin-lorentz.fr&#x2F;&quot;&gt;Val
Lorentz&lt;&#x2F;a&gt;. Thank you!&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.66 released</title>
		<published>2022-09-02T00:00:00+00:00</published>
		<updated>2022-09-02T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/09/02/synapse-1-66-released/" type="text/html"/>
		<id>matrix.org/blog/2022/09/02/synapse-1-66-released/</id>
		<content type="html">&lt;p&gt;Hey all, we&#x27;ve just released &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.66.0&quot;&gt;Synapse 1.66&lt;&#x2F;a&gt;! Let&#x27;s have a
look at what&#x27;s inside this release.&lt;&#x2F;p&gt;
&lt;span id=&quot;continue-reading&quot;&gt;&lt;&#x2F;span&gt;&lt;h2 id=&quot;removal-of-email-verification-delegation&quot;&gt;Removal of email verification delegation&lt;&#x2F;h2&gt;
&lt;p&gt;Before Synapse 1.66, homeserver administrators had the possibility to
configure Synapse to delegate verifying email addresses to an identity
server (using the &lt;code&gt;account_threepid_delegates.email&lt;&#x2F;code&gt; configuration setting).
This feature relied on old APIs from the Matrix specification that have since
been &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.3&#x2F;changelog&#x2F;#identity-service-api-1-1&quot;&gt;removed&lt;&#x2F;a&gt; from it.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;08&#x2F;03&#x2F;synapse-1-64-released&quot;&gt;Synapse 1.64&lt;&#x2F;a&gt; announced the
deprecation of this feature, and the addition of a warning at startup when
the configuration setting is in use.&lt;&#x2F;p&gt;
&lt;p&gt;As of Synapse 1.66, support for this feature has been fully removed, and
Synapse will refuse to start if the configuration setting for it is in use.&lt;&#x2F;p&gt;
&lt;p&gt;If this has not already been done, administrators of servers that were
previously using this feature are encouraged to configure an SMTP server that
Synapse can use to verify email addresses on its own. See the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.66&#x2F;usage&#x2F;configuration&#x2F;config_documentation.html#email&quot;&gt;configuration guide&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;p&gt;Also see the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.66&#x2F;upgrade.html#delegation-of-email-validation-no-longer-supported&quot;&gt;upgrade notes&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;planned-removal-of-support-for-tcp-replication&quot;&gt;Planned removal of support for TCP replication&lt;&#x2F;h2&gt;
&lt;p&gt;Most server administrators already know that Synapse can be made to scale
horizontally by deploying &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;latest&#x2F;workers.html&quot;&gt;workers&lt;&#x2F;a&gt;. Workers are
processes running alongside Synapse&#x27;s main process to allow offloading some
of the work it would otherwise be doing, load balancing some of the traffic,
etc.&lt;&#x2F;p&gt;
&lt;p&gt;In a deployment of Synapse that uses workers, these processes use replication
to share information between themselves. One of the earliest protocols
Synapse used for replication was built on top of TCP.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.18.0&quot;&gt;Synapse 1.18&lt;&#x2F;a&gt; introduced a new
Redis-based replication protocol for workers to use and deprecated the
TCP-based protocol, without specifying a removal date.&lt;&#x2F;p&gt;
&lt;p&gt;This week we&#x27;re announcing that support for TCP replication will be removed
from Synapse in version 1.67, which is expected to come out around Sep 13th.
See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.66.0&quot;&gt;release notes&lt;&#x2F;a&gt; for more
details.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse 1.66 also includes some improvements to validation on endpoints using
&lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;latest&#x2F;client-server-api&#x2F;#user-interactive-authentication-api&quot;&gt;User-Interactive Authentication&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;This version of Synapse also adds compression support for federation traffic.
See &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.66&#x2F;usage&#x2F;configuration&#x2F;config_documentation.html#listeners&quot;&gt;the configuration guide&lt;&#x2F;a&gt;
for more information on how to compress HTTP traffic.&lt;&#x2F;p&gt;
&lt;p&gt;Furthermore, Synapse 1.66 improves the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.66&#x2F;admin_api&#x2F;rooms.html#room-details-api&quot;&gt;Room Details admin API&lt;&#x2F;a&gt;
and allows administrators to see if all local users have marked a given room
as &amp;quot;forgotten&amp;quot;.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.66.0&quot;&gt;full
changelog&lt;&#x2F;a&gt; for a
complete list of changes in this release. Also please have a look at the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.66&#x2F;upgrade#upgrading-to-v1660&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for this version.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend
our thanks to everyone who contributed to this release, including (in no
particular order) &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk Klimpel&lt;&#x2F;a&gt; and
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;AntoninLoubiere&quot;&gt;Antonin Loubiere&lt;&#x2F;a&gt;, as well as anyone
helping us make Synapse better by sharing their feedback and reporting
issues.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Security releases: matrix-js-sdk 19.4.0 and matrix-react-sdk 3.53.0</title>
		<published>2022-08-31T18:13:45+00:00</published>
		<updated>2022-08-31T18:13:45+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/08/31/security-releases-matrix-js-sdk-19-4-0-and-matrix-react-sdk-3-53-0/" type="text/html"/>
		<id>matrix.org/blog/2022/08/31/security-releases-matrix-js-sdk-19-4-0-and-matrix-react-sdk-3-53-0/</id>
		<content type="html">&lt;p&gt;Today we are issuing security releases of matrix-js-sdk and matrix-react-sdk to
patch a couple of High severity vulnerabilities (reserved as
&lt;a href=&quot;https:&#x2F;&#x2F;cve.mitre.org&#x2F;cgi-bin&#x2F;cvekey.cgi?keyword=CVE%2D2022%2D36059&quot;&gt;CVE-2022-36059&lt;&#x2F;a&gt;
for the matrix-js-sdk and
&lt;a href=&quot;https:&#x2F;&#x2F;cve.mitre.org&#x2F;cgi-bin&#x2F;cvekey.cgi?keyword=CVE%2D2022%2D36060&quot;&gt;CVE-2022-36060&lt;&#x2F;a&gt;
for the matrix-react-sdk).&lt;&#x2F;p&gt;
&lt;p&gt;Affected clients include those which depend on the affected libraries, such as
Element Web&#x2F;Desktop and Cinny. Releases of the affected clients will follow
shortly. We advise users of those clients to upgrade at their earliest
convenience.&lt;&#x2F;p&gt;
&lt;p&gt;The vulnerabilities give an adversary who you share a room with the ability to
carry out a denial-of-service attack against the affected clients, making it
not show all of a user&#x27;s rooms or spaces and&#x2F;or causing minor temporary
corruption.&lt;&#x2F;p&gt;
&lt;p&gt;The full vulnerability details will be disclosed at a later date, to give
people time to upgrade and us to perform a more thorough audit of the codebase.&lt;&#x2F;p&gt;
&lt;p&gt;Note that while the vulnerability was to our knowledge never exploited
maliciously, some unintentional public testing has left some people affected by
the bug. We made a best effort to sanitize this to stop the breakage. If you
are affected, you may still need to clear the cache and reload your Matrix
client for it to take effect.&lt;&#x2F;p&gt;
&lt;p&gt;We thank &lt;a href=&quot;https:&#x2F;&#x2F;valentin-lorentz.fr&#x2F;&quot;&gt;Val Lorentz&lt;&#x2F;a&gt; who discovered and
reported the vulnerability over the weekend.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.65 released</title>
		<published>2022-08-17T15:44:53+00:00</published>
		<updated>2022-08-17T15:25:28+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/08/17/synapse-1-65-released/" type="text/html"/>
		<id>matrix.org/blog/2022/08/17/synapse-1-65-released/</id>
		<content type="html">&lt;p&gt;Hey everyone! We&#x27;ve just released &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.65.0&quot;&gt;Synapse
1.65&lt;&#x2F;a&gt;! Let&#x27;s have a
peek at what&#x27;s inside.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;private-read-receipts&quot;&gt;Private read receipts&lt;&#x2F;h2&gt;
&lt;p&gt;A feature that the more privacy-focused users of Matrix have been missing was
the ability to hide read receipts from other users. Read receipts in rooms can
tell a user which messages another user has read in a room. However, they can
also be an unwelcome indicator that a user is currently reading a certain room,
thus giving away the user&#x27;s activity on Matrix at a given time.&lt;&#x2F;p&gt;
&lt;p&gt;Hiding one&#x27;s read receipts from other Matrix users is unfortunately not as
straightforward as simply preventing a client from sharing read receipts with
the server. This is because read receipts are also used by Matrix homeservers to
calculate how much of a room a user has read, and generate notification counts
for rooms accordingly.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.65 introduces stable support for private read receipts. This feature,
described by
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2285&quot;&gt;MSC2285&lt;&#x2F;a&gt;, allows
clients to send a different type of read receipt to the server. This then tells
the homeserver to use this piece of information to update the user&#x27;s
notification counts, but not to share it with other users.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;improved-room-management-apis-for-modules&quot;&gt;Improved room management APIs for modules&lt;&#x2F;h2&gt;
&lt;p&gt;This version of Synapse includes two new module API methods to help Synapse
modules interact and manage rooms. The first one,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.65.0&#x2F;synapse&#x2F;module_api&#x2F;__init__.py#L1455-L1477&quot;&gt;&lt;code&gt;lookup_room_alias&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;,
allows modules to retrieve the room ID corresponding to a given room alias. This
works both for local and remote aliases. The second one,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.65.0&#x2F;synapse&#x2F;module_api&#x2F;__init__.py#L1479-L1528&quot;&gt;&lt;code&gt;create_room&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;,
allows modules to create new rooms on behalf of an existing user.&lt;&#x2F;p&gt;
&lt;p&gt;The
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.65.0&#x2F;synapse&#x2F;module_api&#x2F;__init__.py#L925-L1017&quot;&gt;&lt;code&gt;update_room_membership&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
method has also been updated in this release of Synapse to allow modules to join
a room the server is not already in via federation. This can be done by using
the new &lt;code&gt;remote_room_hosts&lt;&#x2F;code&gt; argument, which takes a list of homeservers to try
to join via.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse 1.65 stabilises the implementation of
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3827&quot;&gt;MSC3827&lt;&#x2F;a&gt;, which
allows filtering public room searches on room types. This means it is now
possible to search specifically for public spaces. For more information on this
feature, see &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;07&#x2F;20&#x2F;synapse-1-63-released&quot;&gt;the Synapse 1.63
announcement&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Additionally, Synapse 1.65 implements the new experimental error codes
documented by
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3827&quot;&gt;MSC3848&lt;&#x2F;a&gt;. Once
stabilised, these error codes will allow clients to show more specific errors to
their users about why an event could not be sent.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.65.0&quot;&gt;full
changelog&lt;&#x2F;a&gt; for a
complete list of changes in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to this release, including (in no particular
order) &lt;a href=&quot;https:&#x2F;&#x2F;www.beeper.com&#x2F;&quot;&gt;Beeper&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;andrewdoh&quot;&gt;andrewdoh&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;moan0s&quot;&gt;Julian-Samuel
Gebühr&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk
Klimpel&lt;&#x2F;a&gt;, as well as anyone helping us make Synapse
better by sharing their feedback and reporting issues.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.64 released</title>
		<published>2022-08-03T00:00:00+00:00</published>
		<updated>2022-08-03T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/08/03/synapse-1-64-released/" type="text/html"/>
		<id>matrix.org/blog/2022/08/03/synapse-1-64-released/</id>
		<content type="html">&lt;p&gt;It&#x27;s that time again: there&#x27;s a new Synapse release, fresh out of the oven!
Let&#x27;s take a look at what&#x27;s inside &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.64.0&quot;&gt;Synapse
1.64&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;delegating-email-verification-is-now-deprecated&quot;&gt;Delegating email verification is now deprecated&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.4.0&quot;&gt;Synapse 1.4.0&lt;&#x2F;a&gt;
introduced a configuration option (&lt;code&gt;account_threepid_delegates.email&lt;&#x2F;code&gt;) to allow
homeservers to delegate validating the ownership of email addresses to an
external identity server. This validation is used by Synapse when adding an
email address to a Matrix account, or before performing a password reset.&lt;&#x2F;p&gt;
&lt;p&gt;As of Synapse 1.64, this option is deprecated, and Synapse will print a warning
if it is used. This is because this option relies on old API endpoints that have
since been
&lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.3&#x2F;changelog&#x2F;#identity-service-api-1-1&quot;&gt;removed&lt;&#x2F;a&gt; from the
Matrix specification.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse can do this validation internally provided it is configured with details
of an SMTP server. Administrators currently relying on
&lt;code&gt;account_threepid_delegates.email&lt;&#x2F;code&gt; should therefore ensure that an SMTP server
is correctly configured, and remove the &lt;code&gt;account_threepid_delegates.email&lt;&#x2F;code&gt;
option. See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.64&#x2F;usage&#x2F;configuration&#x2F;config_documentation.html#email&quot;&gt;configuration
guide&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;p&gt;We plan to fully remove this configuration option in Synapse 1.66, which is
expected to be released on August 30th.&lt;&#x2F;p&gt;
&lt;p&gt;Note that the equivalent option to validate the ownership of phone numbers
(&lt;code&gt;account_threepid_delegates.msisdn&lt;&#x2F;code&gt;) can still be used, though we expect to
deprecate it in a future release of Synapse.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;improved-tls-support-for-sending-emails&quot;&gt;Improved TLS support for sending emails&lt;&#x2F;h2&gt;
&lt;p&gt;When configuring an SMTP server to use to send out emails to users, server
administrators can configure Synapse to use TLS to communicate to that server.
Until now, only &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Opportunistic_TLS&quot;&gt;STARTTLS&lt;&#x2F;a&gt; was
supported in this case.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.64 introduces a new &lt;code&gt;force_tls&lt;&#x2F;code&gt; configuration option in the &lt;code&gt;email&lt;&#x2F;code&gt;
section of the configuration file. If this new setting is set to &lt;code&gt;true&lt;&#x2F;code&gt; Synapse
will use TLS for the initial connection rather than upgrading via STARTTLS.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.64&#x2F;usage&#x2F;configuration&#x2F;config_documentation.html#email&quot;&gt;configuration
guide&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;memory-leak-in-frozendict&quot;&gt;Memory leak in &lt;code&gt;frozendict&lt;&#x2F;code&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;A couple of weeks ago, we
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Marco-Sulla&#x2F;python-frozendict&#x2F;issues&#x2F;60&quot;&gt;identified&lt;&#x2F;a&gt; a
memory leak within &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;frozendict&#x2F;&quot;&gt;frozendict&lt;&#x2F;a&gt;, which is
a library that Synapse relies on. This would in turn cause Synapse instances to
slowly leak memory when processing &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; requests.&lt;&#x2F;p&gt;
&lt;p&gt;We highly encourage server administrators who installed Synapse via &lt;code&gt;pip&lt;&#x2F;code&gt; to
upgrade their local version of &lt;code&gt;frozendict&lt;&#x2F;code&gt; to version 2.3.3 or later, which
includes a fix to this issue. The Docker image &lt;code&gt;matrixdotorg&#x2F;synapse&lt;&#x2F;code&gt; and the
Debian packages from &lt;code&gt;packages.matrix.org&lt;&#x2F;code&gt; already include the updated library.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;This version of Synapse introduces support for room version 10! This new room
version enables support for the new &lt;code&gt;knock_restricted&lt;&#x2F;code&gt; join rule, to allow
knocking into rooms which are otherwise restricted to members of a specific room
(or space). See &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.3&#x2F;rooms&#x2F;v10&#x2F;&quot;&gt;the Matrix specification about room version
10&lt;&#x2F;a&gt; for more information.&lt;&#x2F;p&gt;
&lt;p&gt;Additionally, Synapse 1.64 features a new rate limiter to limit the rate of joins to the same
room. It is intended as a mitigation against abuse scenarios involving joining a
lot of users from different homeservers to a room to then send spam across it.
See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;latest&#x2F;usage&#x2F;configuration&#x2F;config_documentation.html#rc_joins_per_room&quot;&gt;configuration
guide&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;p&gt;This release of Synapse also extends the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;latest&#x2F;admin_api&#x2F;rooms.html#list-room-api&quot;&gt;List
Rooms&lt;&#x2F;a&gt;
and &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;latest&#x2F;admin_api&#x2F;rooms.html#room-details-api&quot;&gt;Room
Details&lt;&#x2F;a&gt;
admin APIs to include the type of a room in responses, allowing server
administrators to differentiate spaces from other rooms.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.64.0&quot;&gt;full
changelog&lt;&#x2F;a&gt; for a
complete list of changes in this release. Also please have a look at the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.64&#x2F;upgrade#upgrading-to-v1640&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for this version.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to this release, including (in no particular
order) &lt;a href=&quot;https:&#x2F;&#x2F;www.beeper.com&#x2F;&quot;&gt;Beeper&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;andrewdoh&quot;&gt;andrewdoh&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;thomasweston12&quot;&gt;Thomas
Weston&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jejo86&quot;&gt;jejo86&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;villepeh&quot;&gt;villepeh&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;behrmann&quot;&gt;Jörg
Behrmann&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Vetchu&quot;&gt;Jacek
Kuśnierz&lt;&#x2F;a&gt;, as well as anyone helping us make Synapse
better by sharing their feedback and reporting issues.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.63 released</title>
		<published>2022-07-20T00:00:00+00:00</published>
		<updated>2022-07-20T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/07/20/synapse-1-63-released/" type="text/html"/>
		<id>matrix.org/blog/2022/07/20/synapse-1-63-released/</id>
		<content type="html">&lt;p&gt;Hey all, it&#x27;s time for another Synapse release! That&#x27;s right, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.63.0&quot;&gt;Synapse
1.63&lt;&#x2F;a&gt; is out,
let&#x27;s have a look at it.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;clarifications-on-anonymised-server-statistics&quot;&gt;Clarifications on &amp;quot;anonymised&amp;quot; server statistics&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse has the ability to report usage statistics to the Matrix.org Foundation
(or to another location, if configured to do so). These statistics, such as
number of users, number of rooms joined by the server, etc. (they don&#x27;t feature
any identifiable information about users and rooms) help us monitor the health
of the public federation.&lt;&#x2F;p&gt;
&lt;p&gt;In this release of Synapse, we have updated our public documentation about this
feature to clarify how it works and what exactly is being reported. This
documentation can be found &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.63&#x2F;usage&#x2F;administration&#x2F;monitoring&#x2F;reporting_homeserver_usage_statistics.html&quot;&gt;right
here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Note that previous documentation and prompts surrounding this feature called it
&amp;quot;anonymised&amp;quot; server statistics. This could easily be misinterpreted, as while
per-user statistics are not reported, homeserver server names are. We have
therefore changed said documentation and prompts to be clearer about
what is actually reported.&lt;&#x2F;p&gt;
&lt;p&gt;Note that your homeserver will never report any statistics if the &lt;code&gt;report_stats&lt;&#x2F;code&gt;
configuration option is set to &lt;code&gt;false&lt;&#x2F;code&gt;. Server admins who are curious about
which software is used by the Matrix.org Foundation to record server statistics
can check out &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;panopticon&quot;&gt;panopticon&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;improved-filtering-for-public-room-search&quot;&gt;Improved filtering for public room search&lt;&#x2F;h2&gt;
&lt;p&gt;This version of Synapse ships with an experimental implementation of
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3827&quot;&gt;MSC3827&lt;&#x2F;a&gt; which
allows filtering public room search results by room type. This feature will
enable better discoverability for Matrix Spaces (which are rooms with a specific
type, under the hood), as it will enable clients to search specifically for
public spaces.&lt;&#x2F;p&gt;
&lt;p&gt;This feature is still experimental as &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3827&quot;&gt;its
MSC&lt;&#x2F;a&gt; hasn&#x27;t
completed the MSC process yet, though it is in its final comment period at the
time this post is being written. This means a stable implementation will be
coming to Synapse very soon, so watch this space!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse 1.63 also includes a new rate limiter to limit invites per issuer. This
rate limiter can be configured using the new &lt;code&gt;rc_invites.per_issuer&lt;&#x2F;code&gt;
configuration setting, see &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;latest&#x2F;usage&#x2F;configuration&#x2F;config_documentation.html#rc_invites&quot;&gt;the
documentation&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.63.0&quot;&gt;full
changelog&lt;&#x2F;a&gt; for a
complete list of changes in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to this release, including (in no particular
order) &lt;a href=&quot;https:&#x2F;&#x2F;www.beeper.com&#x2F;&quot;&gt;Beeper&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;villepeh&quot;&gt;villepeh&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;arkamar&quot;&gt;Petr
Vaněk&lt;&#x2F;a&gt;, as well as anyone helping us make Synapse
better by sharing their feedback and reporting issues.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.62 released</title>
		<published>2022-07-06T16:37:01+00:00</published>
		<updated>2022-07-06T16:37:01+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/07/06/synapse-1-62-released/" type="text/html"/>
		<id>matrix.org/blog/2022/07/06/synapse-1-62-released/</id>
		<content type="html">&lt;p&gt;Hey all, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.62.0&quot;&gt;Synapse
1.62&lt;&#x2F;a&gt; is out! Let&#x27;s
have a look inside.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;spam-checker-improvements&quot;&gt;Spam checker improvements&lt;&#x2F;h2&gt;
&lt;p&gt;In the past few weeks, the Synapse team has been working with the Matrix.org
Trust &amp;amp; Safety team to help module developers build more efficient protections
against spam. As a consequence of this work, Synapse 1.62 introduces new ways
for modules to communicate the result of actions taken against a specific
message or operation through the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.62&#x2F;modules&#x2F;spam_checker_callbacks.html&quot;&gt;spam checker module
callbacks&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Previously, most spam checker callbacks would be expected to return a boolean
indicating whether a specific operation should be qualified as spam. Starting
from Synapse 1.62, modules are now expected to return either
&lt;code&gt;synapse.module_api.NOT_SPAM&lt;&#x2F;code&gt; (to indicate an action is not spammy), or an error
code that is part of &lt;code&gt;synapse.module_api.errors.Codes&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Note that the previous behaviour is still supported but is now deprecated, and
will be removed in a future version of Synapse.&lt;&#x2F;p&gt;
&lt;p&gt;See &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.62&#x2F;upgrade.html#new-signatures-for-spam-checker-callbacks&quot;&gt;the upgrade
notes&lt;&#x2F;a&gt;
for a list of the affected callbacks and an example of this change. Note that on
top of the list described there, the &lt;code&gt;check_event_for_spam&lt;&#x2F;code&gt; callback was also
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.62&#x2F;upgrade.html#new-signature-for-the-spam-checker-callback-check_event_for_spam&quot;&gt;updated with a similar
change&lt;&#x2F;a&gt;
in Synapse 1.61.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;This release of Synapse includes important performance improvements around
syncing, specifically around handling device lists and notifications.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.62 also introduce a changes of its optional dependency on the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-synapse-ldap3&quot;&gt;LDAP3
authentication provider
module&lt;&#x2F;a&gt; to
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-synapse-ldap3&#x2F;releases&#x2F;tag&#x2F;v0.2.1&quot;&gt;v0.2.1&lt;&#x2F;a&gt;
in order to fix an issue with usernames that include uppercase characters.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.62.0&quot;&gt;full
changelog&lt;&#x2F;a&gt; for a
complete list of changes in this release. Also please have a look at the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.62&#x2F;upgrade#upgrading-to-v1620&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for this version.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to this release, including (in no particular
order) &lt;a href=&quot;https:&#x2F;&#x2F;www.beeper.com&#x2F;&quot;&gt;Beeper&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;olmari&quot;&gt;Sami
Olmari&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Danieloni1&quot;&gt;Daniel
Aloni&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Thumbscrew&quot;&gt;Thumbscrew&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;aytchell&quot;&gt;Hannes
Lerchl&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Security release: Synapse 1.61.1</title>
		<published>2022-06-28T16:19:45+00:00</published>
		<updated>2022-06-28T16:19:45+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/06/28/security-release-synapse-1-61-1/" type="text/html"/>
		<id>matrix.org/blog/2022/06/28/security-release-synapse-1-61-1/</id>
		<content type="html">&lt;p&gt;Hey everyone!&lt;&#x2F;p&gt;
&lt;p&gt;Today we&#x27;re exceptionally releasing &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.61.1&quot;&gt;Synapse
1.61.1&lt;&#x2F;a&gt;, which comes
as a security release. &lt;strong&gt;Server administrators are encouraged to update as soon as
possible.&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;This release fixes a vulnerability with Synapse&#x27;s URL preview feature. URL
previews of some web pages can lead to unbounded recursion, causing the request
to either fail, or in some cases crash the running Synapse process.&lt;&#x2F;p&gt;
&lt;p&gt;Homeservers with the &lt;code&gt;url_preview_enabled&lt;&#x2F;code&gt; configuration option set to &lt;code&gt;false&lt;&#x2F;code&gt;
(the default value) are unaffected. Instances with the &lt;code&gt;enable_media_repo&lt;&#x2F;code&gt;
configuration option set to &lt;code&gt;false&lt;&#x2F;code&gt; are also unaffected, as this also disables
the URL preview functionality.&lt;&#x2F;p&gt;
&lt;p&gt;Server administrators who are unable to update Synapse should disable URL
previews by setting &lt;code&gt;url_preview_enabled: false&lt;&#x2F;code&gt; in their configuration file.
They can also delegate URL preview to a separate, dedicated worker to ensure the
process crashing does not impact other functionality of Synapse.&lt;&#x2F;p&gt;
&lt;p&gt;Please see &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;security&#x2F;advisories&#x2F;GHSA-22p3-qrh9-cx32&quot;&gt;this security
advisory&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.61 released</title>
		<published>2022-06-17T11:48:10+00:00</published>
		<updated>2022-06-17T11:48:10+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/06/17/synapse-1-61-released/" type="text/html"/>
		<id>matrix.org/blog/2022/06/17/synapse-1-61-released/</id>
		<content type="html">&lt;p&gt;Hey everyone! Guess what? &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.61.0&quot;&gt;Synapse
1.61&lt;&#x2F;a&gt; is out! Let&#x27;s
have a look at it.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;farewell-groups&quot;&gt;Farewell, groups&lt;&#x2F;h2&gt;
&lt;p&gt;If you are new to Matrix, you might have not heard of the feature referred to as
&amp;quot;groups&amp;quot; or &amp;quot;communities&amp;quot; (depending on the context). This feature allowed
grouping rooms and users to better represent a community, one of which being
&lt;code&gt;+matrix:matrix.org&lt;&#x2F;code&gt; which used to represent the Matrix community. This may
sound similar to &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2021&#x2F;05&#x2F;17&#x2F;the-matrix-space-beta&quot;&gt;Matrix
Spaces&lt;&#x2F;a&gt;, and it would
make sense since Spaces are meant to be a more powerful replacement for groups.&lt;&#x2F;p&gt;
&lt;p&gt;In &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;04&#x2F;05&#x2F;synapse-1-56-released&quot;&gt;Synapse 1.56&lt;&#x2F;a&gt;,
support for groups was deprecated, with a plan to fully remove it in a
later release of Synapse. This has now been done as of Synapse 1.61, and most of the
code supporting this feature has now been removed.&lt;&#x2F;p&gt;
&lt;p&gt;Note that this means that administrators of homeservers using workers can remove
endpoints related to groups from their reverse proxy configuration. See &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.61&#x2F;upgrade.html#removal-of-deprecated-communitygroups&quot;&gt;the
upgrade
notes&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;media-retention&quot;&gt;Media retention&lt;&#x2F;h2&gt;
&lt;p&gt;A common issue we see homeserver administrators struggle with is managing the
disk space used by Synapse. A non-negligible part of that disk space usage is
dedicated to storing files uploaded by Matrix users, both local and remote.&lt;&#x2F;p&gt;
&lt;p&gt;Up until now Synapse would only provide administrators with limited, manual ways
to manage the media store of their homeserver, via the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;develop&#x2F;admin_api&#x2F;media_admin_api.html&quot;&gt;admin
API&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;As of this release, Synapse now allows administrators to define retention
lifetimes for local and remote media. This allows media that hasn&#x27;t been
accessed in a long time to be automatically deleted, therefore freeing up disk
space. Server administrators wishing to control media retention more finely can
also define different policies for remote and local media.&lt;&#x2F;p&gt;
&lt;p&gt;This feature can be enabled by configuring the &lt;code&gt;media_retention&lt;&#x2F;code&gt; setting, see
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;develop&#x2F;usage&#x2F;configuration&#x2F;config_documentation.html#media_retention&quot;&gt;the configuration
guide&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;This release of Synapse introduces a change in the return value of the
&lt;code&gt;check_event_for_spam&lt;&#x2F;code&gt; spam checker module callback, in order to allow modules
more flexibility in communicating to users why their messages are rejected. This
is part of ongoing improvement works around spam checker callbacks, watch this
space next time for more information!&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.61.0&quot;&gt;full
changelog&lt;&#x2F;a&gt; for a
complete list of changes in this release. Also please have a look at the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.61&#x2F;upgrade#upgrading-to-v1610&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for this version.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to this release, including (in no particular
order) &lt;a href=&quot;https:&#x2F;&#x2F;www.beeper.com&#x2F;&quot;&gt;Beeper&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk
Klimpel&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Vetchu&quot;&gt;Jacek
Kuśnierz&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Matrix v1.3 release</title>
		<published>2022-06-16T17:16:38+00:00</published>
		<updated>2022-06-15T22:00:58+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/06/16/matrix-v1-3-release/" type="text/html"/>
		<id>matrix.org/blog/2022/06/16/matrix-v1-3-release/</id>
		<content type="html">&lt;p&gt;Hey all,&lt;&#x2F;p&gt;
&lt;p&gt;It’s another quarter and therefore &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.3&#x2F;&quot;&gt;another spec release&lt;&#x2F;a&gt;! Matrix 1.2 was &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;02&#x2F;02&#x2F;matrix-v-1-2-release&quot;&gt;released&lt;&#x2F;a&gt; back in February, and while a bit late in the quarter this time around we’ve still got some exciting additions coming to you in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Like last time, the speed of these releases might feel a bit quick for developers: fret not if you’re still working on v1.1 or v1.2 implementations. We’re not expecting that implementations update as soon as a new spec release is published, but rather that the ecosystem gradually update over the course of the next few months. Implementations should be aiming for as close to realtime as they can get though, particularly considering v1.4 is expected to have some large features (more on that later on).&lt;&#x2F;p&gt;
&lt;p&gt;Matrix 1.3 sees 14 MSCs get merged, but we can’t possibly go into detail on them all here. We’ve picked some notable highlights and recommend the full changelog at the bottom for a complete idea of what’s been going on.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;aggregations-and-the-relationships-made-along-the-way&quot;&gt;Aggregations and the relationships made along the way&lt;&#x2F;h2&gt;
&lt;p&gt;It’s no secret that &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;1849&quot;&gt;MSC1849&lt;&#x2F;a&gt;-style server-side aggregation of related messages have been in the review backlog for a while. We ended up splitting &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;1849&quot;&gt;MSC1849&lt;&#x2F;a&gt; down into more reviewable chunks like &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2675&quot;&gt;MSC2675&lt;&#x2F;a&gt;, allowing us to finally land the first pieces into Matrix 1.3 today.&lt;&#x2F;p&gt;
&lt;p&gt;In the spec there aren’t currently any defined relationships which make use of aggregations or even the &lt;code&gt;rel_type&lt;&#x2F;code&gt; described by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2674&quot;&gt;MSC2674&lt;&#x2F;a&gt;, but we do expect that v1.4 of the spec will have support for at least threads (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3440&quot;&gt;MSC3440&lt;&#x2F;a&gt;) and edits (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2676&quot;&gt;MSC2676&lt;&#x2F;a&gt;), filling the gap. For now, we’ve decided that holding aggregations back until v1.4 doesn’t make a lot of sense, so we have launched them into the world as-is for custom relations or for clients &amp;amp; servers to prepare for what’s expected to be coming in v1.4 of the spec.&lt;&#x2F;p&gt;
&lt;p&gt;To further prepare for threads, we’ve also removed some restrictions of rich replies through &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3676&quot;&gt;MSC3676&lt;&#x2F;a&gt;, thus allowing replies to be constructed with non-text messages like images. Check out the &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.3&#x2F;client-server-api&#x2F;#rich-replies&quot;&gt;new rich replies module&lt;&#x2F;a&gt; for more information.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;join-if-you-can-or-just-knock&quot;&gt;Join if you can, or just knock&lt;&#x2F;h2&gt;
&lt;p&gt;When we launched restricted rooms in Matrix 1.2 we &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;02&#x2F;02&#x2F;matrix-v-1-2-release#public-but-not-too-public-join-rules&quot;&gt;noted&lt;&#x2F;a&gt; that we forgot to handle a case where someone might want to support &lt;em&gt;both&lt;&#x2F;em&gt; knocking and restricted rooms at the same time. We’ve fixed that with a stop-gap join rule from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3787&quot;&gt;MSC3787&lt;&#x2F;a&gt; in &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.3&#x2F;rooms&#x2F;v10&#x2F;&quot;&gt;room version 10&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The new &lt;code&gt;knock_restricted&lt;&#x2F;code&gt; join rule allows the room to keep its desire to be restricted whilst also allowing members who do not meet the criteria to knock on the room instead. We’ll likely expand on this sort of mixing of join rules in proposals like &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3386&quot;&gt;MSC3386&lt;&#x2F;a&gt; down the line, however for now this should cover the gap in support. Next up: figuring out how to make encrypted room history available to these new joiners in a safe way.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;a-thread-for-next-time&quot;&gt;A thread for next time&lt;&#x2F;h2&gt;
&lt;p&gt;Originally planned for this release, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3440&quot;&gt;MSC3440&lt;&#x2F;a&gt;-style threads are anticipated to be ready for v1.4 (next quarter) with support for notifications and, of course, a whole new way to communicate in a room.&lt;&#x2F;p&gt;
&lt;p&gt;Threads are one of the more complicated features we’ve tried to land in recent history as it has a large impact on a wide variety of the spec: everything from event relationships (fixed in this release) to read receipts to push notifications needs to be worked out to build a system that not only users can understand, but also the developers trying to build it. With this massive surface area we just weren’t comfortable with adding threads to v1.3 as-is, given problems like notifications aren’t yet fully solved.&lt;&#x2F;p&gt;
&lt;p&gt;Alongside threads, we also anticipate that &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2676&quot;&gt;MSC2676&lt;&#x2F;a&gt;-style message editing will be landing in v1.4, finally specifying how to update an event’s contents without having to redact &amp;amp; re-send. Although message editing has been supported for a long time in some clients, we&#x27;re excited that it will finally become part of the official specification, meaning it can be implemented more widely. Messaging clients are encouraged to give the proposal an early read and possibly even attempt implementation if not already done to help us ensure the system is in a reasonable state for inclusion in the spec, though we do note that feature requests for edits will likely be deferred to a future MSC.&lt;&#x2F;p&gt;
&lt;p&gt;Keep an eye on &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;category&#x2F;this-week-in-matrix&quot;&gt;This Week In Matrix&lt;&#x2F;a&gt; for updates on what v1.4 is expected to include, and how things are progressing.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-full-changelog&quot;&gt;The full changelog&lt;&#x2F;h2&gt;
&lt;p&gt;MSCs are how the spec changes in the way it does - adding, fixing, and maintaining features for the whole ecosystem to use. The blog post can’t cover them all, but that doesn’t make them any less important! Check out the full changelog below, and the &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;unstable&#x2F;proposals&#x2F;&quot;&gt;Spec Change Proposals&lt;&#x2F;a&gt; page for more information on how these MSCs got merged (hint: they submitted a proposal, which anyone can do - take a look at the &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=SFkZz60RRfc&quot;&gt;Matrix Live episode&lt;&#x2F;a&gt; where Matthew covers the proposal process).&lt;&#x2F;p&gt;
&lt;h3 id=&quot;client-server-api&quot;&gt;Client-Server API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Deprecations&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Deprecate the &lt;code&gt;sender_key&lt;&#x2F;code&gt; and &lt;code&gt;device_id&lt;&#x2F;code&gt; on &lt;code&gt;m.megolm.v1.aes-sha2&lt;&#x2F;code&gt; events, and the &lt;code&gt;sender_key&lt;&#x2F;code&gt; on &lt;code&gt;m.room_key_request&lt;&#x2F;code&gt; to-device messages, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3700&quot;&gt;MSC3700&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1101&quot;&gt;#1101&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Make &lt;code&gt;from&lt;&#x2F;code&gt; optional on &lt;code&gt;GET &#x2F;_matrix&#x2F;client&#x2F;v3&#x2F;messages&lt;&#x2F;code&gt; to allow requesting events from the start or end of the room history, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3567&quot;&gt;MSC3567&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1002&quot;&gt;#1002&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add refresh tokens, per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2918&quot;&gt;MSC2918&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1056&quot;&gt;#1056&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1113&quot;&gt;#1113&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Relax the restrictions on Rich Replies, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3676&quot;&gt;MSC3676&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1062&quot;&gt;#1062&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Describe a structured system for event relationships, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2674&quot;&gt;MSC2674&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1062&quot;&gt;#1062&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Describe how relationships between events can be &amp;quot;aggregated&amp;quot;, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2675&quot;&gt;MSC2675&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3666&quot;&gt;MSC3666&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1062&quot;&gt;#1062&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for a new &lt;code&gt;knock_restricted&lt;&#x2F;code&gt; join rule in supported room versions, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3787&quot;&gt;MSC3787&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1099&quot;&gt;#1099&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Clarify that the url field in &lt;code&gt;m.room.avatar&lt;&#x2F;code&gt; events is not required. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;987&quot;&gt;#987&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that the &lt;code&gt;type&lt;&#x2F;code&gt; in user-interactive authentication can be omitted. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;989&quot;&gt;#989&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Adjust the OpenAPI specification so that the type &lt;code&gt;Flow information&lt;&#x2F;code&gt; is explicitly defined when the client-server API is rendered. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1003&quot;&gt;#1003&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Correct the default value for &lt;code&gt;invite&lt;&#x2F;code&gt; where it is not specified in an &lt;code&gt;m.room.power_levels&lt;&#x2F;code&gt; event. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1021&quot;&gt;#1021&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update various links which pointed to the old &lt;code&gt;matrix-doc&lt;&#x2F;code&gt; github repository. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1032&quot;&gt;#1032&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Removed &lt;code&gt;m.room.message.feedback&lt;&#x2F;code&gt; per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3582&quot;&gt;MSC3582&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1035&quot;&gt;#1035&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix various typos throughout the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1051&quot;&gt;#1051&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1054&quot;&gt;#1054&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1059&quot;&gt;#1059&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1081&quot;&gt;#1081&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1097&quot;&gt;#1097&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1110&quot;&gt;#1110&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1115&quot;&gt;#1115&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1126&quot;&gt;#1126&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1127&quot;&gt;#1127&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1128&quot;&gt;#1128&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1129&quot;&gt;#1129&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;issues&#x2F;3681&quot;&gt;#3681&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;issues&#x2F;3708&quot;&gt;#3708&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that state keys starting with &lt;code&gt;@&lt;&#x2F;code&gt; are in fact reserved. Regressed from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3658&quot;&gt;#3658&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1100&quot;&gt;#1100&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unenforced size limit on the &lt;code&gt;name&lt;&#x2F;code&gt; field of &lt;code&gt;m.room.name&lt;&#x2F;code&gt; events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;issues&#x2F;3669&quot;&gt;#3669&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove erroneous &lt;code&gt;room_id&lt;&#x2F;code&gt; field from examples of &lt;code&gt;m.read&lt;&#x2F;code&gt;, &lt;code&gt;m.typing&lt;&#x2F;code&gt; in &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; and &lt;code&gt;m.fully_read&lt;&#x2F;code&gt; in room account data. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;issues&#x2F;3679&quot;&gt;#3679&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the behaviour of &lt;code&gt;event_match&lt;&#x2F;code&gt; in push rule conditions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;issues&#x2F;3690&quot;&gt;#3690&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix incorrectly referenced &lt;code&gt;m.login.appservice&lt;&#x2F;code&gt; login identifier, instead using &lt;code&gt;m.login.application_service&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;issues&#x2F;3711&quot;&gt;#3711&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix membership state transitions to denote that &lt;code&gt;invite-&amp;gt;knock&lt;&#x2F;code&gt; and &lt;code&gt;external-&amp;gt;leave&lt;&#x2F;code&gt; are valid transitions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;issues&#x2F;3730&quot;&gt;#3730&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;server-server-api&quot;&gt;Server-Server API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add a &lt;code&gt;destination&lt;&#x2F;code&gt; property to the Authorization header, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3383&quot;&gt;MSC3383&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1067&quot;&gt;#1067&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Remove largely unused &lt;code&gt;origin&lt;&#x2F;code&gt; field from PDUs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;998&quot;&gt;#998&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update various links which pointed to the old &lt;code&gt;matrix-doc&lt;&#x2F;code&gt; github repository. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1032&quot;&gt;#1032&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the format for the Authorization header. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1038&quot;&gt;#1038&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1067&quot;&gt;#1067&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify what a &amp;quot;valid event&amp;quot; means when performing checks on a received PDU. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1045&quot;&gt;#1045&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that &lt;code&gt;valid_until_ts&lt;&#x2F;code&gt; is in milliseconds, like other timestamps used in Matrix. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1055&quot;&gt;#1055&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that checks on PDUs should refer to the state &lt;em&gt;before&lt;&#x2F;em&gt; an event. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1070&quot;&gt;#1070&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the historical handling of non-integer power levels. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1099&quot;&gt;#1099&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix various typos throughout the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1110&quot;&gt;#1110&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Correct misleading text for &lt;code&gt;&#x2F;send_join&lt;&#x2F;code&gt; response. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;issues&#x2F;3703&quot;&gt;#3703&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that the &lt;code&gt;content&lt;&#x2F;code&gt; for &lt;code&gt;X-Matrix&lt;&#x2F;code&gt; signature validation is the parsed JSON body. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;issues&#x2F;3727&quot;&gt;#3727&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;application-service-api&quot;&gt;Application Service API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add timestamp massaging as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3316&quot;&gt;MSC3316&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1094&quot;&gt;#1094&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;identity-service-api&quot;&gt;Identity Service API&lt;&#x2F;h3&gt;
&lt;p&gt;No significant changes.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;push-gateway-api&quot;&gt;Push Gateway API&lt;&#x2F;h3&gt;
&lt;p&gt;No significant changes.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;room-versions&quot;&gt;Room Versions&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add room version 10 as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3604&quot;&gt;MSC3604&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1099&quot;&gt;#1099&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Enforce integer power levels in room version 10 as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3667&quot;&gt;MSC3667&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1099&quot;&gt;#1099&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a &lt;code&gt;knock_restricted&lt;&#x2F;code&gt; join rule supported by room version 10 as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3787&quot;&gt;MSC3787&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1099&quot;&gt;#1099&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update the default room version to 9 as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3589&quot;&gt;MSC3589&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;issues&#x2F;3739&quot;&gt;#3739&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Improve readability and understanding of the state resolution algorithms. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1037&quot;&gt;#1037&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1042&quot;&gt;#1042&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1043&quot;&gt;#1043&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1120&quot;&gt;#1120&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve readability of the authorization rules. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1050&quot;&gt;#1050&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;For room versions 8, 9, and 10: clarify which homeserver is required to sign the join event. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1093&quot;&gt;#1093&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that room versions 1 through 9 accept stringy power levels, as noted by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3667&quot;&gt;MSC3667&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1099&quot;&gt;#1099&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;For all room versions: Add &lt;code&gt;m.federate&lt;&#x2F;code&gt; to the authorization rules, as originally intended. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1103&quot;&gt;#1103&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;For room versions 2 through 10: More explicitly define the mainline of a power event and the mainline ordering of other events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1107&quot;&gt;#1107&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;For room versions 7, 8, 9, and 10: fix join membership authorization rules when &lt;code&gt;join_rule&lt;&#x2F;code&gt; is &lt;code&gt;knock&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;issues&#x2F;3737&quot;&gt;#3737&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;appendices&quot;&gt;Appendices&lt;&#x2F;h3&gt;
&lt;p&gt;No significant changes.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.59 released</title>
		<published>2022-05-18T00:00:00+00:00</published>
		<updated>2022-05-18T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/05/18/synapse-1-59-released/" type="text/html"/>
		<id>matrix.org/blog/2022/05/18/synapse-1-59-released/</id>
		<content type="html">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.59.0&quot;&gt;Synapse 1.59&lt;&#x2F;a&gt; is
out! Let&#x27;s see what&#x27;s new in this version.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;generic-worker-types&quot;&gt;Generic worker types&lt;&#x2F;h2&gt;
&lt;p&gt;When Synapse instances are subject to high load, it can be useful to use workers
to balance the load more effectively. Workers are separate processes that can
take some of the load off the main Synapse process, and allow the homeserver to
scale more effectively.&lt;&#x2F;p&gt;
&lt;p&gt;In the past, Synapse only provided a specific set of types of workers, each
capable of handling a specific set of operations. For some time now we have been
working on allowing more flexibility around worker configuration, which started
all the way back in &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2020&#x2F;03&#x2F;23&#x2F;synapse-1-12-0-released&quot;&gt;Synapse
1.12.0&lt;&#x2F;a&gt; with the
introduction of a generic worker application type.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.59 furthers this work by deprecating the &lt;code&gt;synapse.app.appservice&lt;&#x2F;code&gt; and
&lt;code&gt;synapse.app.user_dir&lt;&#x2F;code&gt; worker application types. Homeserver administrators
should change the configuration of instances using these types to the generic
&lt;code&gt;synapse.app.generic_worker&lt;&#x2F;code&gt; application type, and use the
&lt;code&gt;notify_appservices_from_worker&lt;&#x2F;code&gt; and &lt;code&gt;update_user_directory_from_worker&lt;&#x2F;code&gt; to
delegate application service and user directory work (respectively) to a worker.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.59&#x2F;upgrade.html#deprecation-of-the-synapseappappservice-and-synapseappuser_dir-worker-application-types&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for more information on this change.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;push-rules&quot;&gt;Push rules&lt;&#x2F;h2&gt;
&lt;p&gt;Push rules allow Matrix clients to define notification rules on a homeserver.
One often reported issue with notification in Matrix is the fact that
notifications are sent out when server ACLs, which define which server(s) can
and cannot interact in a room, change. This is especially annoying during big
waves of abuse, as there might be multiple servers that need to be banned from
rooms, thus causing a lot of unneeded notifications.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.59 now supports silencing server ACL updates, by implementing the new
push rule documented in
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3786&quot;&gt;MSC3786&lt;&#x2F;a&gt;.
However, since this MSC hasn&#x27;t been incorporated into the spec yet, this
behaviour is disabled by default in Synapse: see &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;12601&quot;&gt;the implementation pull
request&lt;&#x2F;a&gt; for more information
on turning it on.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.59 also allows third-party modules to validate and change the actions
associated with an existing push rule via the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;d24a1486e5c5d69a8798a9d159fd9e06dfc8c3e3&#x2F;synapse&#x2F;module_api&#x2F;__init__.py#L1360-L1420&quot;&gt;Module
API&lt;&#x2F;a&gt;.
This is helpful for modules wishing to, for example, configuring specific
notification settings when new users register.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;As of Synapse 1.59, Synapse will not communicate the name of devices over
federation (unless configured otherwise), in order to better preserve user
privacy. See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.59&#x2F;upgrade.html#device-name-lookup-over-federation-has-been-disabled-by-default&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;p&gt;Also note that we have issued a patch release for 1.59 (1.59.1) which fixes a
long-standing bug that started to bite a good amount of server administrators.
Server admins that are looking into upgrading their instance to Synapse 1.59 are
recommended to upgrade to 1.59.1 rather than 1.59.0.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.59.0&quot;&gt;full
changelog&lt;&#x2F;a&gt; for a
complete list of changes in this release. Also please have a look at the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.59&#x2F;upgrade#upgrading-to-v1590&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for this version.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to this release, including (in no particular
order) &lt;a href=&quot;https:&#x2F;&#x2F;www.beeper.com&#x2F;&quot;&gt;Beeper&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk
Klimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;SimonBrandner&quot;&gt;Šimon
Brandner&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;henryclw&quot;&gt;henryclw&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;andrewdoh&quot;&gt;Andrew
Do&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.58 released</title>
		<published>2022-05-05T00:00:00+00:00</published>
		<updated>2022-05-05T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/05/05/synapse-1-58-released/" type="text/html"/>
		<id>matrix.org/blog/2022/05/05/synapse-1-58-released/</id>
		<content type="html">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.58.0&quot;&gt;Synapse 1.58&lt;&#x2F;a&gt; is
out! Let&#x27;s dive into this new release.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;poetry&quot;&gt;Poetry&lt;&#x2F;h2&gt;
&lt;p&gt;If you&#x27;ve been reading the past few Synapse release announcements, you might
have already heard about our efforts to integrate
&lt;a href=&quot;https:&#x2F;&#x2F;python-poetry.org&#x2F;&quot;&gt;Poetry&lt;&#x2F;a&gt; into Synapse. Poetry is a tool which
manages dependencies of a Python project. Its killer feature is its lockfile,
which explicitly pins all dependencies (direct and transitive) to a fixed
version, even across multiple Python versions and platforms. See more about why
we choose Poetry &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;11537&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;During the past few months, we&#x27;ve been hard at work converting Synapse and its
CI to use Poetry. The goal is to make our Docker images and Debian packages more
reproducible and to provide a fixed, known-good environment for CI. This will
help us to ensure the stability and security of Synapse installations.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.57&#x27;s Docker image was the first to use Poetry; after a successful
trial, this was extended to Synapse 1.58&#x27;s Debian packages. Installations from
PyPI using &lt;code&gt;pip&lt;&#x2F;code&gt; will &lt;em&gt;not&lt;&#x2F;em&gt; use the locked environment, though everyone is
welcome to install from source using &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;develop&#x2F;poetry.lock&quot;&gt;our
lockfile&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Huge props to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;DMRobertson&quot;&gt;David&lt;&#x2F;a&gt; from the Synapse team for
leading the work on this front.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;This release of Synapse also includes performance improvements around sharing
device list updates, which should greatly improve login times for large Matrix
accounts.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.58 also features the implementation of two MSCs:
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3383&quot;&gt;MSC3383&lt;&#x2F;a&gt; to
include a &lt;code&gt;destination&lt;&#x2F;code&gt; parameter in federation authentication headers, and
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2815&quot;&gt;MSC2815&lt;&#x2F;a&gt; which
(if enabled) allows room moderators to see the content of a redacted event (as
long as it hasn&#x27;t already been deleted by the homeserver).&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.58.0&quot;&gt;full
changelog&lt;&#x2F;a&gt; for a
complete list of changes in this release. Also please have a look at the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.58&#x2F;upgrade#upgrading-to-v1580&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for this version.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to this release, including (in no particular
order) &lt;a href=&quot;https:&#x2F;&#x2F;www.beeper.com&#x2F;&quot;&gt;Beeper&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk
Klimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;famedly.com&#x2F;&quot;&gt;Famedly&lt;&#x2F;a&gt; and
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;olmari&quot;&gt;Sami Olmari&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>0.34.0 security release for matrix-appservice-irc (High severity)</title>
		<published>2022-05-04T11:02:24+00:00</published>
		<updated>2022-05-04T09:27:14+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/05/04/0-34-0-security-release-for-matrix-appservice-irc-high-severity/" type="text/html"/>
		<id>matrix.org/blog/2022/05/04/0-34-0-security-release-for-matrix-appservice-irc-high-severity/</id>
		<content type="html">&lt;p&gt;We&#x27;ve released updates to matrix-appservice-irc and our forked node-irc that it depends on to patch a High security vulnerability.
It&#x27;s advised to update to 0.34.0 as soon as possible.&lt;&#x2F;p&gt;
&lt;p&gt;The vulnerability allows an attacker to manipulate a Matrix user into executing IRC commands
by having them reply to a maliciously crafted message.&lt;&#x2F;p&gt;
&lt;p&gt;Incorrect handling of a CR character allowed for making part of the message be sent to the IRC server verbatim
rather than as a message to the channel.&lt;&#x2F;p&gt;
&lt;p&gt;If you are currently a matrix-appservice-irc user, exercise caution when replying to messages from untrusted participants
in IRC bridged rooms until your bridge instance has been upgraded.&lt;&#x2F;p&gt;
&lt;p&gt;The vulnerability has been patched in node-irc version 1.2.1 and matrix-appservice-irc 0.34.0.
You can get the release &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-appservice-irc&#x2F;releases&#x2F;tag&#x2F;0.34.0&quot;&gt;on Github&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The bridges running on the Libera Chat, OFTC and other networks bridged by the Matrix.org Foundation have been patched.&lt;&#x2F;p&gt;
&lt;p&gt;The vulnerabilities are tracked as &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-appservice-irc&#x2F;security&#x2F;advisories&#x2F;GHSA-37hr-348p-rmf4&quot;&gt;GHSA-37hr-348p-rmf4&lt;&#x2F;a&gt; and
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;node-irc&#x2F;security&#x2F;advisories&#x2F;GHSA-52rh-5rpj-c3w6&quot;&gt;GHSA-52rh-5rpj-c3w6&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Thank you, &lt;a href=&quot;https:&#x2F;&#x2F;valentin-lorentz.fr&#x2F;&quot;&gt;Val Lorentz&lt;&#x2F;a&gt; for reporting this vulnerability.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.57 released</title>
		<published>2022-04-19T16:28:33+00:00</published>
		<updated>2022-04-19T16:28:33+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/04/19/synapse-1-57-released/" type="text/html"/>
		<id>matrix.org/blog/2022/04/19/synapse-1-57-released/</id>
		<content type="html">&lt;p&gt;Hey everyone! Guess what? &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.57.0&quot;&gt;Synapse
1.57&lt;&#x2F;a&gt; has just been
released! Let&#x27;s see what&#x27;s new in this version!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;application-services&quot;&gt;Application services&lt;&#x2F;h2&gt;
&lt;p&gt;Application services are piece of software that have privileged access to some
of the homeserver&#x27;s features. For example, they can create and manage multiple
users at the same time, which is especially useful for bridges.&lt;&#x2F;p&gt;
&lt;p&gt;This release of Synapse changes the way Synapse manually manages transaction
identifiers when talking to application services (a transaction being a group of
events the application service should know about). While this doesn&#x27;t have much
impact on the everyday life of a server administrator (besides fixing a
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;12209&quot;&gt;bug&lt;&#x2F;a&gt; and paving the way for
future performance improvements), this change means server admins should take
extra care when updating Synapse.&lt;&#x2F;p&gt;
&lt;p&gt;More specifically, if you are running a dedicated Synapse worker for handling
traffic related to application services, this worker &lt;strong&gt;must&lt;&#x2F;strong&gt; be stopped when
upgrading the main Synapse process to ensure the update is performed safely. See
the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.57&#x2F;upgrade#changes-to-database-schema-for-application-services&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for more information about this change, and instructions on recovering from an
incorrect upgrade.&lt;&#x2F;p&gt;
&lt;p&gt;This release of Synapse also continues work on bringing end-to-end capabilities
to application services, which I was already telling you about in the &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;01&#x2F;18&#x2F;synapse-1-50-released&quot;&gt;Synapse
1.50 release blog
post&lt;&#x2F;a&gt;. More
specifically, Synapse now supports sending device list updates to applications
services, as part of implementing
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3202&quot;&gt;MSC3202&lt;&#x2F;a&gt;. This
is still very experimental and definitely not production ready, but also very
exciting!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;improvements-to-the-module-system&quot;&gt;Improvements to the module system&lt;&#x2F;h2&gt;
&lt;p&gt;Modules allow third-party developers to expand Synapse with extra features that
wouldn&#x27;t necessarily fit into the Matrix specification and&#x2F;or ecosystem. In the
past release of Synapse, we have been improving this system to add more
functionality to it, and this one is no exception!&lt;&#x2F;p&gt;
&lt;p&gt;Synapse modules can now implement new callbacks to &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.57&#x2F;modules&#x2F;account_data_callbacks.html#on_account_data_updated&quot;&gt;react to account data
updates&lt;&#x2F;a&gt;,
as well as to &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.57&#x2F;modules&#x2F;third_party_rules_callbacks.html#on_threepid_bind&quot;&gt;react to new 3PID (email address, phone number)
associations&lt;&#x2F;a&gt;.
On the latter, note that this callback will only be called after a 3PID has been
validated on the homeserver, and does not trigger when the validation happens on
an identity server (e.g. when publishing a 3PID so that other users can look it
up).&lt;&#x2F;p&gt;
&lt;p&gt;The &lt;code&gt;ModuleApi&lt;&#x2F;code&gt; (which is the Python class enabling modules to interact with
Synapse) has also been updated to allow module to read and write global account
data. This can be done by using the new
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;e31d06f6f0923d001736f5e6e08616293bd4b120&#x2F;synapse&#x2F;module_api&#x2F;__init__.py#L1401-L1464&quot;&gt;&lt;code&gt;AccountDataManager&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
class, which can be accessed as &lt;code&gt;api.account_data_manager&lt;&#x2F;code&gt; (where &lt;code&gt;api&lt;&#x2F;code&gt; is an
instance of &lt;code&gt;ModuleApi&lt;&#x2F;code&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;The module API has also been updated with a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;e31d06f6f0923d001736f5e6e08616293bd4b120&#x2F;synapse&#x2F;module_api&#x2F;__init__.py#L543-L552&quot;&gt;new
method&lt;&#x2F;a&gt;,
to allow modules to promote an existing user to server administrator (or demote
a server administrator to a normal user). This follows up on an improvement
introduced in &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;04&#x2F;05&#x2F;synapse-1-56-released&quot;&gt;Synapse
1.56&lt;&#x2F;a&gt; allowing modules
to promote users to server administrators when registering them.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;This release also includes a performance improvement for workers handling
&lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; requests. While this change makes starting this kind of workers slightly
more heavy performance-wise, it aims at improving the load associated with the
first &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; requests hitting it right after starting. See &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;12367#issuecomment-1088574192&quot;&gt;this
comment&lt;&#x2F;a&gt;
for more details.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.57 also now includes bundled aggregations in message search results by
default, as
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3666&quot;&gt;MSC3666&lt;&#x2F;a&gt; has
been accepted and has finished its final comment period.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.57.0&quot;&gt;full
changelog&lt;&#x2F;a&gt; for a
complete list of changes in this release. Also please have a look at the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.57&#x2F;upgrade#upgrading-to-v1570&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for this version.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to this release, including (in no particular
order) &lt;a href=&quot;https:&#x2F;&#x2F;www.beeper.com&#x2F;&quot;&gt;Beeper&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk
Klimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;famedly.com&#x2F;&quot;&gt;Famedly&lt;&#x2F;a&gt; and
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;watson28&quot;&gt;Jorge Florian&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.56 released</title>
		<published>2022-04-05T00:00:00+00:00</published>
		<updated>2022-04-05T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/04/05/synapse-1-56-released/" type="text/html"/>
		<id>matrix.org/blog/2022/04/05/synapse-1-56-released/</id>
		<content type="html">&lt;p&gt;Happy release day everyone! &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.56.0&quot;&gt;Synapse
1.56&lt;&#x2F;a&gt; is out! Let&#x27;s
have a look at what&#x27;s new in this release.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;additional-restrictions-around-registration&quot;&gt;Additional restrictions around registration&lt;&#x2F;h2&gt;
&lt;p&gt;One common abuse scenario we have seen on Matrix over the years is attackers
making use of public homeservers with open registration to automatically create
multiple accounts in order to evade sanctions. Sometimes, this can lead to these
public homeservers being banned across multiple public rooms despite their
administrator(s) not being directly at fault.&lt;&#x2F;p&gt;
&lt;p&gt;In order to mitigate this, starting from this release, Synapse will refuse to
start by default if it is configured with open registration with no additional
verification. This means users wishing to register on these homeservers will
need to authenticate themselves, either via
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;8a519f8abc6de772167c2cca101d22ee2052fafc&#x2F;docs&#x2F;sample_config.yaml#L1285&quot;&gt;email&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.56&#x2F;CAPTCHA_SETUP.html&quot;&gt;recaptcha&lt;&#x2F;a&gt; or
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.56&#x2F;usage&#x2F;administration&#x2F;admin_api&#x2F;registration_tokens.html&quot;&gt;registration
tokens&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Please see the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.56&#x2F;upgrade.html#open-registration-without-verification-is-now-disabled-by-default&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;so-long-groups-and-thanks-for-all-the-fish&quot;&gt;So long groups, and thanks for all the fish&lt;&#x2F;h2&gt;
&lt;p&gt;Long-time users of Matrix might remember when, &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2017&#x2F;10&#x2F;24&#x2F;synapse-0-24-is-here&quot;&gt;way back in
2017&lt;&#x2F;a&gt;, we introduced
groups (also known as communities in some clients). Groups would let users
define a curated set of users and rooms to represent a given community that
others could refer to. We even used to have &lt;code&gt;+matrix:matrix.org&lt;&#x2F;code&gt; which was
the official group for the Matrix team and community.&lt;&#x2F;p&gt;
&lt;p&gt;If this sounds a bit familiar to you (and remind you of a certain other feature
of Matrix), that&#x27;s no coincidence. Some time ago, we had already identified a
good amount of shortcomings with groups, and decided to redesign the feature
entirely and release it under the name &amp;quot;spaces&amp;quot;. If you&#x27;re curious about this,
then you may wish to read the &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2021&#x2F;05&#x2F;17&#x2F;the-matrix-space-beta&quot;&gt;spaces announcement
blogpost&lt;&#x2F;a&gt; we released
at the time.&lt;&#x2F;p&gt;
&lt;p&gt;Now that spaces have been out of beta for some time, and have shown to be a very
useful feature to the ecosystem, we decided it was time to retire support for
groups from Synapse, after more than 4 years of good and loyal service. This
release of Synapse deprecates the feature, with a plan to disable it by default
in Synapse 1.58 (which is expected to be released next month).&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;As of this version, Synapse will also refuse to start the if the Postgres
database it is running against has a non-&lt;code&gt;C&lt;&#x2F;code&gt; locale, in order to prevent
accidental database corruption. See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.56&#x2F;upgrade.html#change-in-behaviour-for-postgresql-databases-with-unsafe-locale&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;p&gt;This release also includes the ability for modules to register server
administrators through the &lt;code&gt;register_user&lt;&#x2F;code&gt; method, as well as a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.56.0&#x2F;synapse&#x2F;module_api&#x2F;__init__.py#L1290-L1312&quot;&gt;new
method&lt;&#x2F;a&gt;
to allow modules to store external 3PID associations into Synapse&#x27;s database.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.56.0&quot;&gt;full
changelog&lt;&#x2F;a&gt; for a
complete list of changes in this release. Also please have a look at the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.56&#x2F;upgrade#upgrading-to-v1560&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for this version.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to this release, including (in no particular
order) &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk Klimpel&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;www.beeper.com&#x2F;&quot;&gt;Beeper&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;famedly.com&#x2F;&quot;&gt;Famedly&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;IronTooch&quot;&gt;IronTooch&lt;&#x2F;a&gt; and
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;villepeh&quot;&gt;villepeh&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.55 released</title>
		<published>2022-03-22T00:00:00+00:00</published>
		<updated>2022-03-22T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/03/22/synapse-1-55-released/" type="text/html"/>
		<id>matrix.org/blog/2022/03/22/synapse-1-55-released/</id>
		<content type="html">&lt;p&gt;Hi all, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.55.0&quot;&gt;Synapse
1.55&lt;&#x2F;a&gt; is out! Let&#x27;s
see the main talking points of this new release.&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;Update: After the initial release of Synapse 1.55, the developers of a
third-party tool (Jinja, which is the tool Synapse uses to render email and
web templates) released a new version of their project which proved
incompatible with Synapse. To address this issue, we have released &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.55.2&quot;&gt;Synapse
1.55.2&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Deployments of Synapse using the &lt;code&gt;matrixdotorg&#x2F;synapse&lt;&#x2F;code&gt; Docker image or Debian
packages from &lt;code&gt;packages.matrix.org&lt;&#x2F;code&gt; are not affected as they are already using
a compatible version of the tool.&lt;&#x2F;p&gt;
&lt;p&gt;It&#x27;s worth noting that the work we are doing to integrate
&lt;a href=&quot;https:&#x2F;&#x2F;python-poetry.org&#x2F;&quot;&gt;Poetry&lt;&#x2F;a&gt; into Synapse (more on that a bit further
in this post) will, once completed, prevent this kind of issues from
happening.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h2 id=&quot;removing-support-for-mjolnir-1-3-1-and-older&quot;&gt;Removing support for Mjolnir 1.3.1 and older&lt;&#x2F;h2&gt;
&lt;p&gt;Administrators of large homeservers and communities will already be familiar
with &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;mjolnir&quot;&gt;Mjolnir&lt;&#x2F;a&gt;, which is a tool designed
to help them moderate a large number of rooms in an efficient way. It includes a
bot as well as a Synapse module to better interface with the homeserver.&lt;&#x2F;p&gt;
&lt;p&gt;Due to a change in how we manage some of Synapse&#x27;s internal utilities, this
release of Synapse breaks compatibility with Mjolnir versions 1.3.1 and older.
Homeserver administrators using Mjolnir and upgrading to Synapse 1.55 should
make sure they&#x27;re running Mjolnir version 1.3.2 or later.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.55&#x2F;upgrade#compatibility-dropped-for-mjolnir-131-and-earlier&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;moving-synctl&quot;&gt;Moving &lt;code&gt;synctl&lt;&#x2F;code&gt;&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;code&gt;synctl&lt;&#x2F;code&gt; is a tool provided as part of Synapse to run and manage your instance
and its workers (if any).&lt;&#x2F;p&gt;
&lt;p&gt;As part of our work to integrate &lt;a href=&quot;https:&#x2F;&#x2F;python-poetry.org&#x2F;&quot;&gt;Poetry&lt;&#x2F;a&gt; in Synapse
(which in turn will enable a lot of cool things, such as reproducible builds),
we have recently moved the way we package this tool. As of this release,
homeserver administrators should stop invoking it using its direct path (e.g.
&lt;code&gt;&#x2F;path&#x2F;to&#x2F;synctl start&lt;&#x2F;code&gt;), but should instead call it directly, e.g. &lt;code&gt;synctl start&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;This means homeserver administrators using &lt;code&gt;synctl&lt;&#x2F;code&gt; must make sure that the tool
is in their &lt;code&gt;PATH&lt;&#x2F;code&gt;. This is automatically done when installing and upgrading
Synapse using the &lt;code&gt;matrixdotorg&#x2F;synapse&lt;&#x2F;code&gt; Docker image or Debian packages from
&lt;code&gt;packages.matrix.org&lt;&#x2F;code&gt;. When installing from a wheel, sdist, or PyPI, an
executable is created in your Python installation&#x27;s &lt;code&gt;bin&lt;&#x2F;code&gt; directory.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.55&#x2F;upgrade#synctl-script-has-been-moved&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;This release also introduces new module callbacks, allowing homeserver
administrators to more efficiently review which users are able to deactivate
users and shutdown rooms. More information on that in &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.55&#x2F;modules&#x2F;third_party_rules_callbacks.html#check_can_shutdown_room&quot;&gt;Synapse&#x27;s
documentation&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;We have also started experimenting with using the native Python asyncio event
loop in Synapse which, if successful, would make it easier to use building
blocks from the Python ecosystem when adding new features to Synapse.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.55.0&quot;&gt;full
changelog&lt;&#x2F;a&gt; for a
complete list of changes in this release. Also please have a look at the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.55&#x2F;upgrade#upgrading-to-v1550&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for this version.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to this release, including (in no particular
order) &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk Klimpel&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;www.beeper.com&#x2F;&quot;&gt;Beeper&lt;&#x2F;a&gt;, and
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;cremesk&quot;&gt;~creme&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.54 released</title>
		<published>2022-03-08T00:00:00+00:00</published>
		<updated>2022-03-08T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/03/08/synapse-1-54-released/" type="text/html"/>
		<id>matrix.org/blog/2022/03/08/synapse-1-54-released/</id>
		<content type="html">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.54.0&quot;&gt;Synapse 1.54&lt;&#x2F;a&gt; is
out! Let&#x27;s see what goodness is coming your way with this new release.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;improving-url-previews&quot;&gt;Improving URL previews&lt;&#x2F;h2&gt;
&lt;p&gt;As part of the Matrix specification, Matrix clients have the option to rely on
the homeserver to generate URL previews. This means the homeserver (in this case
Synapse) needs to have a look at the content at that URL and extract data to
send back to the client.&lt;&#x2F;p&gt;
&lt;p&gt;In the past, Synapse has had issues with generating complete URL previews, and
some metadata (e.g. image, description) would be missing from the data that
Synapse sends to clients. Synapse 1.54 includes improvements to the generation
of URL previews, and while testing it we&#x27;ve been able to observe improvements to
previews generated for Twitter and Reddit.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;new-module-callbacks&quot;&gt;New module callbacks&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse modules allow third-party developers to write extra features for
Synapse, that wouldn&#x27;t necessarily be generic enough to fit within the Matrix
specification. This includes custom behaviours such as smarter event filters,
bespoke media storage providers, or spam checkers. Since we rewrote Synapse&#x27;s
module system in &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2021&#x2F;06&#x2F;30&#x2F;security-update-synapse-1-37-1-released#synapse-137-release-announcement&quot;&gt;Synapse
1.37&lt;&#x2F;a&gt;,
we have been improving it by adding new callback functions that module can
implement, allowing them to interface better with Synapse.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.54 includes three new module callbacks. One of them,
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.54&#x2F;modules&#x2F;password_auth_provider_callbacks.html#get_displayname_for_registration&quot;&gt;&lt;code&gt;get_displayname_for_registration&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;,
allows modules to define the display name for newly registered users. Together
with the existing
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.54&#x2F;modules&#x2F;password_auth_provider_callbacks.html#get_username_for_registration&quot;&gt;&lt;code&gt;get_username_for_registration&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
introduced in &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;02&#x2F;08&#x2F;synapse-1-52-released&#x2F;&quot;&gt;Synapse
1.52&lt;&#x2F;a&gt;, they allow
modules a better control over the user registration process.&lt;&#x2F;p&gt;
&lt;p&gt;The two other module callbacks introduced in Synapse 1.54,
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.54&#x2F;modules&#x2F;third_party_rules_callbacks.html#on_profile_update&quot;&gt;&lt;code&gt;on_profile_update&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
and
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.54&#x2F;modules&#x2F;third_party_rules_callbacks.html#on_user_deactivation_status_changed&quot;&gt;&lt;code&gt;on_user_deactivation_status_changed&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;,
allow modules to react to profile changes, as well as the deactivation (or
reactivation) of users.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;This release of Synapse also includes more work to make joining large Matrix
rooms faster (I was telling you about that in the &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;02&#x2F;22&#x2F;synapse-1-53-released&quot;&gt;Synapse 1.53 release
announcement&lt;&#x2F;a&gt;). While
it&#x27;s still very experimental and not yet ready for show time, it&#x27;s still very
exciting to see this work happening!&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.54 also includes a change to the &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;latest&#x2F;client-server-api&#x2F;#get_matrixclientversions&quot;&gt;client-side versions
endpoint&lt;&#x2F;a&gt;
to advertise Matrix 1.1 and 1.2. See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;02&#x2F;02&#x2F;matrix-v-1-2-release&quot;&gt;Matrix
1.2&lt;&#x2F;a&gt; release
announcement to read all about the changes this latest version of the
specification brings to the ecosystem.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.54.0&quot;&gt;full
changelog&lt;&#x2F;a&gt; for a
complete list of changes in this release. Also please have a look at the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.54&#x2F;upgrade#upgrading-to-v1540&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for this version.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to this release, including (in no particular
order) &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk Klimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;AndrewRyanChama&quot;&gt;Andrew
Ryan&lt;&#x2F;a&gt;, and
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;lukasdenk&quot;&gt;lukasdenk&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.53 released</title>
		<published>2022-02-22T14:53:37+00:00</published>
		<updated>2022-02-22T14:53:37+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/02/22/synapse-1-53-released/" type="text/html"/>
		<id>matrix.org/blog/2022/02/22/synapse-1-53-released/</id>
		<content type="html">&lt;p&gt;Rejoice everyone, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.53.0&quot;&gt;Synapse 1.53&lt;&#x2F;a&gt; is out! Let&#x27;s have a look at what&#x27;s new with this release.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;stabilisation-of-registration-tokens&quot;&gt;Stabilisation of registration tokens&lt;&#x2F;h2&gt;
&lt;p&gt;Registration tokens is a feature introduced in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.42.0&quot;&gt;Synapse 1.42.0&lt;&#x2F;a&gt;, which allows homeserver administrators to force their users to use specific tokens when registering. This is similar to Synapse&#x27;s &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;6f440fd859c411af8c32478b4353f7550619c3bd&#x2F;docs&#x2F;sample_config.yaml#L1291-L1294&quot;&gt;registration shared secret&lt;&#x2F;a&gt; support, but with added features, such as the possibility to limit how users can be registered with the same token, or to make a token expire. See &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.53&#x2F;usage&#x2F;administration&#x2F;admin_api&#x2F;registration_tokens.html&quot;&gt;the admin API documentation&lt;&#x2F;a&gt; for more information on how to manage registration tokens on your homeserver.&lt;&#x2F;p&gt;
&lt;p&gt;Registration tokens were initially proposed to the Matrix specification in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3231&quot;&gt;MSC3231&lt;&#x2F;a&gt; by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;govynnus&quot;&gt;Callum Brown&lt;&#x2F;a&gt; during their Google Summer of Code internship last summer. The MSC has since been accepted, and released in the stable Matrix specification as of &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;02&#x2F;02&#x2F;matrix-v-1-2-release&quot;&gt;Matrix v1.2&lt;&#x2F;a&gt;. As a result, its Synapse implementation has been updated to remove support for unstable identifiers. Administrators of homeservers on which the reverse proxy rules explicitly allow the unstable route for this feature need to update their configuration. Same goes for developers of Matrix clients that support this feature. See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.53&#x2F;upgrade#stablisation-of-msc3231&quot;&gt;upgrade notes&lt;&#x2F;a&gt; for more information.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;time-based-cache-expiry-now-enabled-by-default&quot;&gt;Time-based cache expiry now enabled by default&lt;&#x2F;h2&gt;
&lt;p&gt;To avoid being overly intensive on resources by making too many queries to the database, Synapse maintains several in-memory caches to store data it needs to use frequently. However, this comes with the inconvenience that, if Synapse needs to store too much data, these caches can become fairly big and occupy too much space in the host&#x27;s memory.&lt;&#x2F;p&gt;
&lt;p&gt;Historically, Synapse has dealt with this issue by having set sizes for each cache, either hardcoded or set in the configuration, and evicting the oldest items when exceeding this size. &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.38.0&quot;&gt;Synapse 1.38&lt;&#x2F;a&gt; introduced the possibility for homeserver administrators to configure Synapse to evict cache entries based on the time they were last accessed on. This mechanism acts on top of the aforementioned eviction policy, and allows automatically evicting entries that haven&#x27;t been accessed for some time, leaving more room in the caches to store data that needs to be accessed more often.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.53 enables this behaviour by default. Without specific configuration, Synapse will automatically evict cache entries that haven&#x27;t been accessed for more than 30 minutes. Server administrators that were already using this feature might need to update their configuration, as this change deprecates the &lt;code&gt;expiry_time&lt;&#x2F;code&gt; configuration setting, which will be removed in a future version of Synapse. See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.53&#x2F;upgrade#time-based-cache-expiry-is-now-enabled-by-default&quot;&gt;upgrade notes&lt;&#x2F;a&gt; for more information.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;You might have heard that we&#x27;re working on improving the time it takes to join big Matrix rooms with Synapse. If not, then you definitely want to have a look at &lt;a href=&quot;https:&#x2F;&#x2F;youtu.be&#x2F;yxV73TQAodE?t=1095&quot;&gt;the demos Matrix live&lt;&#x2F;a&gt; that was published earlier this month and includes more details and a demo of the work we&#x27;ve been doing in this area.&lt;&#x2F;p&gt;
&lt;p&gt;This release of Synapse includes an implementation of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3706&quot;&gt;MSC3706&lt;&#x2F;a&gt;, which is part of this work. It&#x27;s still very experimental and definitely not production-ready, but it&#x27;s a huge stepping stone towards making room joins snappier than ever.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ve also been continuing our work towards enabling end-to-end encryption for application services (see the &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;01&#x2F;18&#x2F;synapse-1-50-released&quot;&gt;Synapse 1.50 release blogpost&lt;&#x2F;a&gt; for more context on that). Synapse 1.53 includes support for sending to-device messages to application services. This is also still very experimental, watch this space for future updates.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.53.0&quot;&gt;full changelog&lt;&#x2F;a&gt; for a complete list of changes in this release. Also please have a look at the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.53&#x2F;upgrade#upgrading-to-v1530&quot;&gt;upgrade notes&lt;&#x2F;a&gt; for this version.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including (in no particular order) &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk Klimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;bradjones1&quot;&gt;Brad Jones&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;a-mnich&quot;&gt;Alexander Mnich&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.52 released</title>
		<published>2022-02-08T00:00:00+00:00</published>
		<updated>2022-02-08T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/02/08/synapse-1-52-released/" type="text/html"/>
		<id>matrix.org/blog/2022/02/08/synapse-1-52-released/</id>
		<content type="html">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.52.0&quot;&gt;Synapse 1.52&lt;&#x2F;a&gt; is out! Here&#x27;s what&#x27;s new with this week&#x27;s release.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;twisted-security-release&quot;&gt;Twisted security release&lt;&#x2F;h2&gt;
&lt;p&gt;The team behind &lt;a href=&quot;https:&#x2F;&#x2F;twistedmatrix.com&#x2F;&quot;&gt;Twisted&lt;&#x2F;a&gt;, which is the main framework Synapse uses under the hood, recently released &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;twisted&#x2F;twisted&#x2F;releases&#x2F;tag&#x2F;twisted-22.1.0&quot;&gt;Twisted 22.1&lt;&#x2F;a&gt;. This version fixes a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;twisted&#x2F;twisted&#x2F;security&#x2F;advisories&#x2F;GHSA-92x2-jw7w-xvvx&quot;&gt;security vulnerability&lt;&#x2F;a&gt; within the Twisted library.&lt;&#x2F;p&gt;
&lt;p&gt;While preparing the release of Synapse 1.52, we have investigated the impact of this vulnerability on Synapse. We came to the conclusion that it does not affect Synapse. We however advise server administrators to ensure they use an up-to-date version of the library as a matter of good practice.&lt;&#x2F;p&gt;
&lt;p&gt;For instances installed with &lt;code&gt;pip&lt;&#x2F;code&gt;, the library can be updated with &lt;code&gt;pip install --upgrade Twisted treq&lt;&#x2F;code&gt;. For instances installed with the &lt;code&gt;matrixdotorg&#x2F;synapse&lt;&#x2F;code&gt; Docker image or Debian packages from &lt;code&gt;packages.matrix.org&lt;&#x2F;code&gt;, updating to Synapse 1.52.0 is sufficient, as these images and packages include up-to-date versions of all dependencies.&lt;&#x2F;p&gt;
&lt;p&gt;It is also worth noting that a release candidate for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;twisted&#x2F;twisted&#x2F;releases&#x2F;tag&#x2F;twisted-22.2.0rc1&quot;&gt;Twisted 22.2&lt;&#x2F;a&gt; has been published, with a fix for a potential denial of service vulnerability with SSH. Administrators of Synapse homeservers that have the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.52&#x2F;manhole.html&quot;&gt;manhole&lt;&#x2F;a&gt; feature enabled (which is the only feature of Synapse using SSH) are encouraged to ensure access to the manhole is correctly restricted (e.g. by preventing access from external locations).&lt;&#x2F;p&gt;
&lt;h2 id=&quot;federation-admin-apis&quot;&gt;Federation admin APIs&lt;&#x2F;h2&gt;
&lt;p&gt;This release of Synapse introduces a few admin APIs to help server administrators monitor and handle how their Synapse homeserver interacts with other federated homeservers. &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.52&#x2F;usage&#x2F;administration&#x2F;admin_api&#x2F;federation.html#destination-rooms&quot;&gt;One of these APIs&lt;&#x2F;a&gt; offers server administrators a way to visualise which rooms are shared between the local homeserver and a given remote one.&lt;&#x2F;p&gt;
&lt;p&gt;Another API allows server administrators to &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.52&#x2F;usage&#x2F;administration&#x2F;admin_api&#x2F;federation.html#reset-connection-timeout&quot;&gt;reset federation timeouts&lt;&#x2F;a&gt;. If Synapse fails to connect to a remote homeserver, it will make note of the failure and will not retry the connection after a certain amount of time. This can happen if the remote homeserver goes offline or experiences connectivity issues. Synapse has a few ways of figuring out whether a remote homeserver has come back online, but this new admin API adds a way for administrators to manually tell Synapse a destination should be available.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;This release also improves Synapse&#x27;s deactivation behaviour by deleting account data when deactivating a user. &amp;quot;Account data&amp;quot; refers to private arbitrary data that is specific to an account. It is used among other things for secure server-side storage (SSSS) which allows securely backing up end-to-end encryption keys.&lt;&#x2F;p&gt;
&lt;p&gt;Please see the Synapse &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.52.0&#x2F;CHANGES.md&quot;&gt;release notes&lt;&#x2F;a&gt; for a complete list of changes in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including (in no particular order) &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk Klimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;totallynotvaishnav&quot;&gt;Vaishnav Nair&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;sequentialread&quot;&gt;SequentialRead Software&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Fizzadar&quot;&gt;Nick Barrett from Beeper&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Matrix v1.2 release</title>
		<published>2022-02-02T18:57:31+00:00</published>
		<updated>2022-02-02T18:57:31+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/02/02/matrix-v1-2-release/" type="text/html"/>
		<id>matrix.org/blog/2022/02/02/matrix-v1-2-release/</id>
		<content type="html">&lt;p&gt;Hey all,&lt;&#x2F;p&gt;
&lt;p&gt;Welcome to the second installment of our quarterly spec releases. If it feels like it hasn’t been long since our last release, you’re not alone! Our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2021&#x2F;11&#x2F;09&#x2F;matrix-v-1-1-release&quot;&gt;last release&lt;&#x2F;a&gt; was just 3 months ago, introducing the new platform and world we build within.&lt;&#x2F;p&gt;
&lt;p&gt;This improvement in speed might seem &lt;em&gt;too&lt;&#x2F;em&gt; fast, but fret not: implementations are not expected to update as soon as the new spec is published. Rather, it is more realistic to expect that the ecosystem gradually update over the course of the following few months&#x2F;year. Particularly after the massive release that was v1.1.&lt;&#x2F;p&gt;
&lt;p&gt;So, what’s new in v1.2? With 18 MSCs merged there’s a lot to cover - we’ve picked some notable highlights and recommend the full changelog at the bottom for a complete idea of what’s been going on.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;rearchitecting-with-spaces&quot;&gt;Rearchitecting with Spaces&lt;&#x2F;h2&gt;
&lt;p&gt;Spaces launched into beta &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2021&#x2F;05&#x2F;17&#x2F;the-matrix-space-beta&quot;&gt;last May&lt;&#x2F;a&gt;, redefining how we can use rooms on Matrix to represent different data structures. Described mostly as &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;1772&quot;&gt;MSC1772&lt;&#x2F;a&gt;, Spaces are simply rooms with a specific &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.2&#x2F;client-server-api&#x2F;#rooms-1&quot;&gt;type in their m.room.create event&lt;&#x2F;a&gt;. With state events being used to define which other rooms (meaning Spaces too) are part of that Space, the possibilities for tree-like structured data become endless.&lt;&#x2F;p&gt;
&lt;p&gt;There’s still quite a lot of work to do in the Spaces space (hah), though we’re excited to see it all land. For instance, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3216&quot;&gt;MSC3216&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2962&quot;&gt;MSC2962&lt;&#x2F;a&gt; target power level syncing, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3219&quot;&gt;MSC3219&lt;&#x2F;a&gt; aims for flair, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3089&quot;&gt;MSC3089&lt;&#x2F;a&gt; looks at file structures using Spaces. We might even be able to replace the public room directory with a server-wide space, making writing clients a little bit easier.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;public-but-not-too-public-join-rules&quot;&gt;Public, but not &lt;em&gt;too&lt;&#x2F;em&gt; public, join rules&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.2&#x2F;client-server-api&#x2F;#restricted-rooms&quot;&gt;Restricted rooms&lt;&#x2F;a&gt; are new in this release from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3083&quot;&gt;MSC3083&lt;&#x2F;a&gt;. In these rooms (&lt;em&gt;and therefore Spaces too!&lt;&#x2F;em&gt;), the join rules can be configured such that a member of another room can join without needing an invite. In a typical setup, this means that a Space could be set as invite-only, but all the rooms and Spaces underneath that Space could allow joins for members of the parent Space. When someone wishes to explore the universe you’ve laid out in your Space they can simply join the interesting rooms without having to ask for invites &lt;em&gt;constantly&lt;&#x2F;em&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;This feature changes how membership events are authorized, so is only available in room versions 8 and 9 (both introduced in this release). Room version 9 fixes a relatively rare bug from version 8, so we’d recommend using v9 if you’re planning an upgrade for this functionality.&lt;&#x2F;p&gt;
&lt;p&gt;Further work in this area involves figuring out how to keep membership lists perfectly in sync between the rooms, which is currently done by external tooling. For example, evicting someone from the parent Space could (optionally) evict the user from all the subsequent rooms and Spaces too.&lt;&#x2F;p&gt;
&lt;p&gt;We also need to figure out how to support both knocking and restricted rooms at the same time (oops). &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3613&quot;&gt;MSC3613&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3386&quot;&gt;MSC3386&lt;&#x2F;a&gt; both tackle this problem in different ways and timescales.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;matrix-a-uri&quot;&gt;Matrix: A URI&lt;&#x2F;h2&gt;
&lt;p&gt;A massive shoutout goes to kitsune and the whole community for working on &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2312&quot;&gt;MSC2312&lt;&#x2F;a&gt;, giving us a URI we can pass around outside of Matrix to bring us back in. The early work on this &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;455&quot;&gt;dates all the way back to 2014&lt;&#x2F;a&gt;, the very beginning of Matrix’s development, and has since been &lt;a href=&quot;https:&#x2F;&#x2F;www.iana.org&#x2F;assignments&#x2F;uri-schemes&#x2F;prov&#x2F;matrix&quot;&gt;marked Provisional&lt;&#x2F;a&gt; by the IANA.&lt;&#x2F;p&gt;
&lt;p&gt;The full spec is available &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.2&#x2F;appendices&#x2F;#uris&quot;&gt;here&lt;&#x2F;a&gt; - feel free to discuss it at &lt;a href=&quot;matrix:r&#x2F;matrix-spec:matrix.org&quot;&gt;matrix:r&#x2F;matrix-spec:matrix.org&lt;&#x2F;a&gt; ;)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-full-changelog&quot;&gt;The full changelog&lt;&#x2F;h2&gt;
&lt;p&gt;MSCs are how the spec changes in the way it does - adding, fixing, and maintaining features for the whole ecosystem to use. The blog post can’t cover them all, but that doesn’t make them any less important! Check out the full changelog below, and the &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;unstable&#x2F;proposals&#x2F;&quot;&gt;Spec Change Proposals&lt;&#x2F;a&gt; page for more information on how these MSCs got merged (hint: they submitted a proposal, which anyone can do - take a look at the &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=SFkZz60RRfc&quot;&gt;Matrix Live episode&lt;&#x2F;a&gt; where Matthew covers the proposal process).&lt;&#x2F;p&gt;
&lt;h3 id=&quot;client-server-api&quot;&gt;Client-Server API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Breaking Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;The &lt;code&gt;prev_content&lt;&#x2F;code&gt; field is now returned inside the &lt;code&gt;unsigned&lt;&#x2F;code&gt; property of events, rather than at the top level, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3442&quot;&gt;MSC3442&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3524&quot;&gt;#3524&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;The &lt;code&gt;aliases&lt;&#x2F;code&gt; property from the chunks returned by &lt;code&gt;&#x2F;publicRooms&lt;&#x2F;code&gt;, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2432&quot;&gt;MSC2432&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3624&quot;&gt;#3624&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;New Endpoints&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add the Space Hierarchy API (&lt;code&gt;GET &#x2F;_matrix&#x2F;client&#x2F;v1&#x2F;rooms&#x2F;{roomId}&#x2F;hierarchy&lt;&#x2F;code&gt;) as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2946&quot;&gt;MSC2946&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3610&quot;&gt;#3610&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;&#x2F;_matrix&#x2F;client&#x2F;v1&#x2F;register&#x2F;m.login.registration_token&#x2F;validity&lt;&#x2F;code&gt; as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3231&quot;&gt;MSC3231&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3616&quot;&gt;#3616&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Extend &lt;code&gt;&#x2F;_matrix&#x2F;client&#x2F;r0&#x2F;login&lt;&#x2F;code&gt; to accept a &lt;code&gt;m.login.appservice&lt;&#x2F;code&gt;, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2778&quot;&gt;MSC2778&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3324&quot;&gt;#3324&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for &lt;code&gt;restricted&lt;&#x2F;code&gt; rooms as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3083&quot;&gt;MSC3083&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3289&quot;&gt;MSC3289&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3375&quot;&gt;MSC3375&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3387&quot;&gt;#3387&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;is_guest&lt;&#x2F;code&gt; to &lt;code&gt;&#x2F;account&#x2F;whoami&lt;&#x2F;code&gt; as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3069&quot;&gt;MSC3069&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3605&quot;&gt;#3605&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Expand guest access to sending any room event and state event as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3419&quot;&gt;MSC3419&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3605&quot;&gt;#3605&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add Spaces and room types as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;1772&quot;&gt;MSC1772&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2946&quot;&gt;MSC2946&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3610&quot;&gt;#3610&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add new &lt;code&gt;m.set_displayname&lt;&#x2F;code&gt;, &lt;code&gt;m.set_avatar_url&lt;&#x2F;code&gt;, and &lt;code&gt;m.3pid_changes&lt;&#x2F;code&gt; capabilities as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3283&quot;&gt;MSC3283&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3614&quot;&gt;#3614&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for fallback keys (optional keys used once one-time keys run out), as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2732&quot;&gt;MSC2732&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3615&quot;&gt;#3615&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add token-authenticated registration support as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3231&quot;&gt;MSC3231&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3616&quot;&gt;#3616&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Make &lt;code&gt;AesHmacSha2KeyDescription&lt;&#x2F;code&gt; consistent with &lt;code&gt;KeyDescription&lt;&#x2F;code&gt; in marking &lt;code&gt;name&lt;&#x2F;code&gt; as optional. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3481&quot;&gt;#3481&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix various typos throughout the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3482&quot;&gt;#3482&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3495&quot;&gt;#3495&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3509&quot;&gt;#3509&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3535&quot;&gt;#3535&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3591&quot;&gt;#3591&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3601&quot;&gt;#3601&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3611&quot;&gt;#3611&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3671&quot;&gt;#3671&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3680&quot;&gt;#3680&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Explicitly mention RFC5870 in the definition of &lt;code&gt;m.location&lt;&#x2F;code&gt; events (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3492&quot;&gt;#3492&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;403 M_FORBIDDEN&lt;&#x2F;code&gt; error code to &lt;code&gt;&#x2F;profile&#x2F;{userId}&lt;&#x2F;code&gt; as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3550&quot;&gt;MSC3550&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3530&quot;&gt;#3530&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the description of the &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; API, including a fix to an ASCII art diagram. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3543&quot;&gt;#3543&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that &lt;code&gt;base_url&lt;&#x2F;code&gt; in client &lt;code&gt;well_known&lt;&#x2F;code&gt; may or may not include trailing slash. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3562&quot;&gt;#3562&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify which signature to check when decrypting &lt;code&gt;m.olm.v1.curve25519-aes-sha2&lt;&#x2F;code&gt; messages. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3573&quot;&gt;#3573&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify what &amp;quot;Stripped State&amp;quot; is and what purpose it serves, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3173&quot;&gt;MSC3173&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3606&quot;&gt;#3606&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify how to interpret missing one-time key counts. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3636&quot;&gt;#3636&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Correct the schema for the responses  for various API endpoints. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3650&quot;&gt;#3650&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that group mentions are no longer in the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3652&quot;&gt;#3652&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Distinguish between &amp;quot;federation&amp;quot; event format as exchanged by the Federation API, and the &amp;quot;client&amp;quot; event formats as used in the client-server and AS APIs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3658&quot;&gt;#3658&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the rendering of the responses for various API endpoints. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3674&quot;&gt;#3674&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;server-server-api&quot;&gt;Server-Server API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;New Endpoints&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add the Space Hierarchy API (&lt;code&gt;GET &#x2F;_matrix&#x2F;federation&#x2F;v1&#x2F;hierarchy&#x2F;{roomId}&lt;&#x2F;code&gt;) as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2946&quot;&gt;MSC2946&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3610&quot;&gt;#3610&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3660&quot;&gt;#3660&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add support for &lt;code&gt;restricted&lt;&#x2F;code&gt; rooms as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3083&quot;&gt;MSC3083&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3289&quot;&gt;MSC3289&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3375&quot;&gt;MSC3375&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3387&quot;&gt;#3387&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Fix various typos throughout the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3527&quot;&gt;#3527&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that &lt;code&gt;GET &#x2F;_matrix&#x2F;federation&#x2F;v1&#x2F;event_auth&#x2F;{roomId}&#x2F;{eventId}&lt;&#x2F;code&gt; does &lt;em&gt;not&lt;&#x2F;em&gt; return the auth chain for the full state of the room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3583&quot;&gt;#3583&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the rendering of the responses for various API endpoints. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3674&quot;&gt;#3674&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;application-service-api&quot;&gt;Application Service API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Distinguish between &amp;quot;federation&amp;quot; event format as exchanged by the Federation API, and the &amp;quot;client&amp;quot; event formats as used in the client-server and AS APIs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3658&quot;&gt;#3658&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the rendering of the responses for various API endpoints. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3674&quot;&gt;#3674&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Correct the documentation for the response value for &lt;code&gt;GET &#x2F;_matrix&#x2F;app&#x2F;v1&#x2F;thirdparty&#x2F;protocol&#x2F;{protocol}&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3675&quot;&gt;#3675&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;identity-service-api&quot;&gt;Identity Service API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add the &lt;code&gt;room_type&lt;&#x2F;code&gt; to stored invites as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3288&quot;&gt;MSC3288&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3610&quot;&gt;#3610&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Fix the rendering of the responses for various API endpoints. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3674&quot;&gt;#3674&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;push-gateway-api&quot;&gt;Push Gateway API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Fix the rendering of the responses for various API endpoints. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3674&quot;&gt;#3674&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;room-versions&quot;&gt;Room Versions&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add Room Version 8 as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3289&quot;&gt;MSC3289&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3387&quot;&gt;#3387&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add Room Version 9 as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3375&quot;&gt;MSC3375&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3387&quot;&gt;#3387&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Fully specify room versions to indicate what exactly is carried over from parent versions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3432&quot;&gt;#3432&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3661&quot;&gt;#3661&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarifications to sections on event IDs and event formats. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3501&quot;&gt;#3501&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove a number of fields which were incorrectly shown to form part of the &lt;code&gt;unsigned&lt;&#x2F;code&gt; data of a Federation PDU. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3522&quot;&gt;#3522&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix heading order of room version specifications to be consistent. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3683&quot;&gt;#3683&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add missing &amp;quot;Signing key validity period&amp;quot; section to room version 6. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3683&quot;&gt;#3683&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix auth rules to allow membership of &lt;code&gt;knock&lt;&#x2F;code&gt; -&amp;gt; &lt;code&gt;leave&lt;&#x2F;code&gt; in v7, v8, and v9. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3694&quot;&gt;#3694&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;appendices&quot;&gt;Appendices&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Describe &amp;quot;Common Namespaced Identifier Grammar&amp;quot; as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2758&quot;&gt;MSC2758&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3171&quot;&gt;#3171&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Describe the &lt;code&gt;matrix:&lt;&#x2F;code&gt; URI scheme as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2312&quot;&gt;MSC2312&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3608&quot;&gt;#3608&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.51 released</title>
		<published>2022-01-25T00:00:00+00:00</published>
		<updated>2022-01-25T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/01/25/synapse-1-51-released/" type="text/html"/>
		<id>matrix.org/blog/2022/01/25/synapse-1-51-released/</id>
		<content type="html">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.51.0&quot;&gt;Synapse 1.51&lt;&#x2F;a&gt; is out! Here&#x27;s what&#x27;s new with this week&#x27;s release.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;deprecation-of-the-webclient-listener&quot;&gt;Deprecation of the &lt;code&gt;webclient&lt;&#x2F;code&gt; listener&lt;&#x2F;h2&gt;
&lt;p&gt;A long time ago, Synapse used to serve a very basic web Matrix client (named &amp;quot;console&amp;quot;) that could be used to connect to the homeserver. Server administrators could chose to make it available to their users by configuring a &lt;code&gt;webclient&lt;&#x2F;code&gt; listener.&lt;&#x2F;p&gt;
&lt;p&gt;This web client was removed in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.34.0&quot;&gt;Synapse 0.34&lt;&#x2F;a&gt; back in 2018, but the &lt;code&gt;webclient&lt;&#x2F;code&gt; listener stayed, instead allowing server admins to serve the web client of their choice (or redirect to it) through the &lt;code&gt;web_client_location&lt;&#x2F;code&gt; configuration file.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.53 will remove the &lt;code&gt;webclient&lt;&#x2F;code&gt; listener, as well as the ability to set &lt;code&gt;web_client_location&lt;&#x2F;code&gt; to a static directory (instead of a HTTP(S) URL). See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;develop&#x2F;upgrade#upgrading-to-v1510&quot;&gt;upgrade notes&lt;&#x2F;a&gt; for more information.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;aggregations-and-sync&quot;&gt;Aggregations and sync&lt;&#x2F;h2&gt;
&lt;p&gt;The concept of server-side aggregation in Matrix is defined in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2675&quot;&gt;MSC2675&lt;&#x2F;a&gt; and is the ability for homeservers to extend the information included in an event using other events that relate to it. This allows, for example, clients to quickly retrieve the reactions associated with a given message, or its latest edit.&lt;&#x2F;p&gt;
&lt;p&gt;This release includes a number of notable performance improvements to calculating aggregations when responding to &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; requests. We continue to measure and investigate potential performance improvements in this area, which should end up greatly benefiting &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; response times.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;fosdem&quot;&gt;FOSDEM&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;fosdem.org&quot;&gt;FOSDEM&lt;&#x2F;a&gt;, one of the biggest gatherings around free and open-source software in the world, is happening next week! Just like last year, the conference will happen online and will be hosted on Matrix. And just like last year, it will be packed with super interesting Matrix-related (but not only) talks.&lt;&#x2F;p&gt;
&lt;p&gt;One new addition this year is the presence of a whole devroom dedicated to Matrix. It will be hosted on February 6th, and you can already find its whole schedule of talks &lt;a href=&quot;https:&#x2F;&#x2F;fosdem.org&#x2F;2022&#x2F;schedule&#x2F;track&#x2F;matrixorg_foundation_and_community&#x2F;&quot;&gt;right here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The Synapse team will be giving a couple of talks during the day: &lt;a href=&quot;https:&#x2F;&#x2F;fosdem.org&#x2F;2022&#x2F;schedule&#x2F;event&#x2F;matrix_events_uninitiatied&#x2F;&quot;&gt;Events for the Uninitiated&lt;&#x2F;a&gt; by Shay at 11:10, and &lt;a href=&quot;https:&#x2F;&#x2F;fosdem.org&#x2F;2022&#x2F;schedule&#x2F;event&#x2F;matrix_extend_synapse&#x2F;&quot;&gt;Beyond the Matrix: Extend the capabilities of your Synapse homeserver&lt;&#x2F;a&gt; by yours truly at 16:40 (all times CET). Come say hi! 🙂&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;This release includes a couple of spaces-related bug fixes, specifically related to the &lt;code&gt;&#x2F;_matrix&#x2F;client&#x2F;v1&#x2F;room&#x2F;{roomId}&#x2F;hierarchy&lt;&#x2F;code&gt; API. One of them in particular targets a bug in spaces that include more than 50 rooms, and should make it much easier to look for a specific room inside a space.&lt;&#x2F;p&gt;
&lt;p&gt;The &lt;code&gt;synapse_review_recent_signups&lt;&#x2F;code&gt; script, which allows homeserver administrators to review recent signups (e.g. in the event of a spam attack), was also improved with an option to exclude virtual users belonging to an application service from the results. See &lt;code&gt;synapse_review_recent_signups --help&lt;&#x2F;code&gt; for more information.&lt;&#x2F;p&gt;
&lt;p&gt;Please see the Synapse &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.51.0&#x2F;CHANGES.md&quot;&gt;release notes&lt;&#x2F;a&gt; for a complete list of changes in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including (in no particular order) &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk Klimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;br4nnigan&quot;&gt;br4nnigan&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;blastrock&quot;&gt;Philippe Daouadi&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dsonck92&quot;&gt;Daniël Sonck&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;AndrewFerr&quot;&gt;AndrewFerr&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.50 released</title>
		<published>2022-01-18T18:34:29+00:00</published>
		<updated>2022-01-18T17:58:48+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2022/01/18/synapse-1-50-released/" type="text/html"/>
		<id>matrix.org/blog/2022/01/18/synapse-1-50-released/</id>
		<content type="html">&lt;p&gt;Welcome all for the first Synapse release of 2022: &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.50.0&quot;&gt;Synapse 1.50&lt;&#x2F;a&gt;!&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note that, as per our &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.50&#x2F;deprecation_policy.html&quot;&gt;platform dependency deprecation policy&lt;&#x2F;a&gt;, Synapse no longer supports Python 3.6 and PostgreSQL 9.6 as of this version. As a result, we have also stopped shipping Debian packages for Ubuntu 18.04 LTS (Bionic Beaver), as it ships with Python 3.6.&lt;&#x2F;p&gt;
&lt;p&gt;As a reminder, please note that Ubuntu 21.04 (Hirsute Hippo) reaches its own end of life &lt;a href=&quot;https:&#x2F;&#x2F;lists.ubuntu.com&#x2F;archives&#x2F;ubuntu-announce&#x2F;2021-December&#x2F;000275.html&quot;&gt;on January 20, 2022&lt;&#x2F;a&gt;. Past this date we will stop producing new packages for Ubuntu 21.04.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h2 id=&quot;encrypted-application-services&quot;&gt;Encrypted application services&lt;&#x2F;h2&gt;
&lt;p&gt;Application services (sometimes called &amp;quot;appservices&amp;quot;), are privileged processes that can interact with a Matrix homeserver in a way a normal user cannot. This is especially useful for bridges, as it allows them to register and puppet multiple users on the homeserver to replicate activity from other platforms.&lt;&#x2F;p&gt;
&lt;p&gt;One of the main shortcomings of application services currently is that they do not support end-to-end encryption. This means that messages sent through a bridge are never encrypted and always visible by the homeserver.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ve recently started work to tackle this issue in the form of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3202&quot;&gt;MSC3202&lt;&#x2F;a&gt;. A first part of implementing this MSC (allowing application services to masquerade as specific devices) has landed in this release of Synapse; work is still ongoing towards a full implementation, so watch this space!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;improved-reliability-on-device-list-updates&quot;&gt;Improved reliability on device list updates&lt;&#x2F;h2&gt;
&lt;p&gt;While working on this release, we identified a long-standing bug that could prevent Synapse from sending device lists update over federation if the server had a high number of active users and&#x2F;or users with a lot of devices connected to their account.&lt;&#x2F;p&gt;
&lt;p&gt;This bug was introduced back in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.0.0&quot;&gt;Synapse 1.0.0&lt;&#x2F;a&gt;, and meant that the homeserver would miss some device list updates when communicating with other homeservers if the amount of updates to send was too high. In practice, this means users on remote homeservers could see outdated device information for other users (including outdated device verification statuses).&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.50 includes a fix to this bug. This should contribute towards making the propagation of device list updates more reliable.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;This release introduces support for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3419&quot;&gt;MSC3419&lt;&#x2F;a&gt;, which allows guest users to send arbitrary state events into a room. This will be especially useful to the ongoing work on &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3401&quot;&gt;group VoIP calls&lt;&#x2F;a&gt;, which involves having users send new state events into the room to signal their participation in a call.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ve also stabilised identifiers for cross-signing and fallback keys now that &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;1756&quot;&gt;MSC1756&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2732&quot;&gt;MSC2732&lt;&#x2F;a&gt; have been merged into the Matrix spec.&lt;&#x2F;p&gt;
&lt;p&gt;On the documentation side of things, the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.50&#x2F;turn-howto.html&quot;&gt;page&lt;&#x2F;a&gt; on setting up and configuring a TURN server has been updated to feature instructions on how to deal with NATs. This is a much welcome addition as configuring TURN is something a lot of Synapse admins struggle with!&lt;&#x2F;p&gt;
&lt;p&gt;Please see the Synapse &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.50.0&#x2F;CHANGES.md&quot;&gt;release notes&lt;&#x2F;a&gt; for a complete list of changes in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk Klimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;itchychips&quot;&gt;Donny Johnson&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;AndrewFerr&quot;&gt;AndrewFerr&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: An issue preventing client logins (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;11763&quot;&gt;#11763&lt;&#x2F;a&gt;) was identified immediately following the release of Synapse 1.50.0. We released &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.50.1&quot;&gt;Synapse 1.50.1&lt;&#x2F;a&gt; the same day with a fix for this issue.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.49.0 released</title>
		<published>2021-12-14T00:00:00+00:00</published>
		<updated>2021-12-14T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/12/14/synapse-1-49-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/12/14/synapse-1-49-0-released/</id>
		<content type="html">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.49.0&quot;&gt;Synapse 1.49.0&lt;&#x2F;a&gt; is out now!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;platform-deprecations&quot;&gt;Platform deprecations&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse 1.49.0 is the last version of Synapse to officially support Python 3.6 and PostgreSQL 9.6. This follows our &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.49&#x2F;deprecation_policy.html&quot;&gt;platform dependency deprecation policy&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;As a consequence of this, Synapse 1.49.0 is the last version of Synapse to support Ubuntu 18.04 LTS (Bionic Beaver), as it ships with Python 3.6.&lt;&#x2F;p&gt;
&lt;p&gt;On the topic of supported Ubuntu releases, please note that Ubuntu 21.04 (Hirsute Hippo) reaches its own end of life &lt;a href=&quot;https:&#x2F;&#x2F;lists.ubuntu.com&#x2F;archives&#x2F;ubuntu-announce&#x2F;2021-December&#x2F;000275.html&quot;&gt;on January 20, 2022&lt;&#x2F;a&gt;. Past this date we will stop producing new packages for Ubuntu 21.04.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved documentation&lt;&#x2F;h2&gt;
&lt;p&gt;Up until now, a lot of very useful information was stored on the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;wiki&quot;&gt;Synapse repo&#x27;s wiki&lt;&#x2F;a&gt;, which wasn&#x27;t well advertised nor well reviewed.&lt;&#x2F;p&gt;
&lt;p&gt;With this release, we have migrated most of this information to Synapse&#x27;s &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;latest&quot;&gt;documentation website&lt;&#x2F;a&gt;, so all the information you need to set up, maintain and troubleshoot a Synapse instance lives at the same place. Included in these new pages are the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.49&#x2F;usage&#x2F;administration&#x2F;admin_faq.html&quot;&gt;server admin FAQ&lt;&#x2F;a&gt; and a &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.49&#x2F;usage&#x2F;administration&#x2F;understanding_synapse_through_grafana_graphs.html&quot;&gt;guide to Synapse&#x27;s Grafana dashboard&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.49&#x2F;media_repository.html&quot;&gt;media repository&lt;&#x2F;a&gt; documentation has also been updated with a lot of details about how Synapse stores media files.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;refresh-tokens&quot;&gt;Refresh tokens&lt;&#x2F;h2&gt;
&lt;p&gt;When a Matrix client needs to authenticate a request to a homeserver, it uses what is called an access token. Sometimes server administrators might not want a user&#x27;s access token to live forever (e.g. for security reasons). To address this concern, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2918&quot;&gt;MSC2918&lt;&#x2F;a&gt; introduces the concept of refresh tokens to Matrix.&lt;&#x2F;p&gt;
&lt;p&gt;Initial support for refresh tokens in Synapse was introduced in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.38.0&quot;&gt;version 1.38.0&lt;&#x2F;a&gt;. Synapse 1.49.0 finalises and stabilises this implementation, allowing any client that supports this feature to use it as it is currently described in the related MSC.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;This release introduces the last changes needed to Synapse for basic threading support. It also introduces support for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3030&quot;&gt;MSC3030&lt;&#x2F;a&gt;, which allows clients to jump to a specific date in a room&#x27;s history (expect a sneak peek of this in the next episode of Matrix Live!).&lt;&#x2F;p&gt;
&lt;p&gt;Another interesting point is the addition of a couple of &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.49&#x2F;usage&#x2F;administration&#x2F;admin_api&#x2F;federation.html&quot;&gt;admin APIs for federation&lt;&#x2F;a&gt;. More specifically, they allow you to visualise all of the other homeservers your Synapse instance has been interacting with, as well as how successful the last attempts at communicating with them have been.&lt;&#x2F;p&gt;
&lt;p&gt;Please see the Synapse &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.49.0&#x2F;CHANGES.md&quot;&gt;release notes&lt;&#x2F;a&gt; for a complete list of changes in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk Klimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Ma27&quot;&gt;Maximilian Bosch&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;tulir&quot;&gt;Tulir Asokan&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;till-next-year&quot;&gt;Till next year&lt;&#x2F;h2&gt;
&lt;p&gt;This is the last release of Synapse of 2021! The Synapse team will take a break for the holidays, pushing the next release of Synapse (1.50.0) to January 11, 2022.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;d like to thank everyone who has been using Synapse, contributing to it, and&#x2F;or supporting us for the past year, and we hope to see you again in 2022! 🎆&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.48.0 released</title>
		<published>2021-11-30T00:00:00+00:00</published>
		<updated>2021-11-30T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/11/30/synapse-1-48-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/11/30/synapse-1-48-0-released/</id>
		<content type="html">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.48.0&quot;&gt;Synapse 1.48.0&lt;&#x2F;a&gt; is out now!&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;NOTE:&lt;&#x2F;strong&gt; Synapse 1.49, due out on December 14th, will be the &lt;strong&gt;last release of Synapse to support Python 3.6 or PostgreSQL 9.6&lt;&#x2F;strong&gt; per our &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.48&#x2F;deprecation_policy.html&quot;&gt;platform dependency deprecation policy&lt;&#x2F;a&gt;. Accordingly, we will remove support for Ubuntu 18.04 LTS (Bionic) at the same date, as it ships with Python 3.6.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h2 id=&quot;password-resets-and-identity-servers&quot;&gt;Password resets and identity servers&lt;&#x2F;h2&gt;
&lt;p&gt;This release removes the long-deprecated &lt;code&gt;trust_identity_server_for_password_resets&lt;&#x2F;code&gt; configuration option. This option was initially deprecated in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.4.0&quot;&gt;Synapse 1.4.0&lt;&#x2F;a&gt; back in October 2019.&lt;&#x2F;p&gt;
&lt;p&gt;Admins of servers still using this configuration option will need to update their Synapse configuration to send password resets through an SMTP server directly rather than relying on identity servers to send them on their behalf.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;new-admin-apis-and-improved-alignment-with-matrix-1-1&quot;&gt;New &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;latest&#x2F;usage&#x2F;administration&#x2F;admin_api&#x2F;index.html&quot;&gt;admin APIs&lt;&#x2F;a&gt; and improved alignment with Matrix 1.1&lt;&#x2F;h2&gt;
&lt;p&gt;This release also introduces a handful of new admin APIs, allowing administrators to &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;latest&#x2F;admin_api&#x2F;user_admin_api.html#controlling-whether-a-user-is-shadow-banned&quot;&gt;un-shadow-ban users&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;latest&#x2F;admin_api&#x2F;rooms.html#block-room-api&quot;&gt;block a room&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;latest&#x2F;usage&#x2F;administration&#x2F;admin_api&#x2F;background_updates.html#run&quot;&gt;run specific background updates&lt;&#x2F;a&gt; (but we&#x27;ll talk about this last one a bit later on). The &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;latest&#x2F;admin_api&#x2F;rooms.html#delete-room-api&quot;&gt;delete room API&lt;&#x2F;a&gt; has also been updated to be able to run in the background or to block a room pre-emptively, even if the server doesn&#x27;t know about it yet.&lt;&#x2F;p&gt;
&lt;p&gt;This release also brings Synapse into greater alignment with version 1.1 of &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2021&#x2F;11&#x2F;09&#x2F;matrix-v-1-1-release&quot;&gt;the Matrix specification&lt;&#x2F;a&gt; by adding support for API paths beginning &lt;code&gt;&#x2F;_matrix&#x2F;client&#x2F;v3&lt;&#x2F;code&gt; and &lt;code&gt;&#x2F;_matrix&#x2F;media&#x2F;v3&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;background-updates&quot;&gt;Background updates&lt;&#x2F;h2&gt;
&lt;p&gt;When Synapse updates from one version to another, it might need to run large scale updates on its database. In order to avoid blocking startup for too long while waiting for these updates to run, Synapse runs them in the background after starting.&lt;&#x2F;p&gt;
&lt;p&gt;Lately the Synapse team has been doing some work to improve the performance of these background updates. More specifically, this release includes a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;11421&quot;&gt;performance fix&lt;&#x2F;a&gt; for a background update introduced in Synapse 1.47.0, as well as a &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;latest&#x2F;usage&#x2F;administration&#x2F;admin_api&#x2F;background_updates.html#run&quot;&gt;new admin API&lt;&#x2F;a&gt; to let admins rerun specific updates.&lt;&#x2F;p&gt;
&lt;p&gt;Future Synapse updates will also include &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;11306&quot;&gt;module capabilities&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;11260&quot;&gt;more configuration options&lt;&#x2F;a&gt; for controlling background updates.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;This release also includes some improved support of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3440&quot;&gt;MSC3440&lt;&#x2F;a&gt; to help threading. It also adds support for the stable identifiers from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2778&quot;&gt;MSC2778&lt;&#x2F;a&gt;, bringing Synapse closer to supporting end-to-end (or end-to-bridge) encryption support for application services.&lt;&#x2F;p&gt;
&lt;p&gt;We also now publish a Docker image, &lt;code&gt;matrixdotorg&#x2F;synapse:develop&lt;&#x2F;code&gt;, which tracks the development head of Synapse.&lt;&#x2F;p&gt;
&lt;p&gt;Please see the Synapse &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.48.0&#x2F;CHANGES.md&quot;&gt;Release Notes&lt;&#x2F;a&gt; for a complete list of changes in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk Klimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;binarymaster&quot;&gt;Stanislav Motylkov&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;tulir&quot;&gt;Tulir Asokan&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Neeeflix&quot;&gt;Neeeflix&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.47.1 released</title>
		<published>2021-11-23T12:46:48+00:00</published>
		<updated>2021-11-23T12:46:48+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/11/23/synapse-1-47-1-released/" type="text/html"/>
		<id>matrix.org/blog/2021/11/23/synapse-1-47-1-released/</id>
		<content type="html">&lt;p&gt;Today we are releasing Synapse 1.47.1, a security update based on last week&#x27;s release of &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2021&#x2F;11&#x2F;17&#x2F;synapse-1-47-0-released&quot;&gt;Synapse 1.47.0&lt;&#x2F;a&gt;. This &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.47.1&quot;&gt;release&lt;&#x2F;a&gt; patches one high severity issue affecting Synapse installations 1.47.0 and earlier using the media repository. An attacker could cause these Synapses to download a remote file and store it in a directory outside the media repository. &lt;&#x2F;p&gt;
&lt;p&gt;Note that:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;This only affects homeservers using Synapse&#x27;s built-in media repository, as opposed to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse-s3-storage-provider&quot;&gt;synapse-s3-storage-provider&lt;&#x2F;a&gt; or &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;turt2live&#x2F;matrix-media-repo&quot;&gt;matrix-media-repo&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;Attackers cannot control the exact name or destination of the stored file.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;To quote from the advisory:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;h3 id=&quot;ghsa-3hfw-x7gx-437c-cve-2021-41281-path-traversal-when-downloading-remote-media&quot;&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;security&#x2F;advisories&#x2F;GHSA-3hfw-x7gx-437c&quot;&gt;GHSA-3hfw-x7gx-437c&lt;&#x2F;a&gt; &#x2F; CVE-2021-41281: Path traversal when downloading remote media.&lt;&#x2F;h3&gt;
&lt;h4 id=&quot;impact&quot;&gt;Impact&lt;&#x2F;h4&gt;
&lt;p&gt;Synapse instances with the media repository enabled can be tricked into downloading a file from a remote server into an arbitrary directory, potentially outside the media store directory.&lt;&#x2F;p&gt;
&lt;p&gt;The last two directories and file name of the path are chosen randomly by Synapse and cannot be controlled by an attacker, which limits the impact.&lt;&#x2F;p&gt;
&lt;p&gt;Homeservers with the media repository disabled are unaffected. Homeservers configured with a federation whitelist are also unaffected.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;security&#x2F;advisories&#x2F;GHSA-3hfw-x7gx-437c&quot;&gt;advisory&lt;&#x2F;a&gt; has full details, including workarounds.&lt;&#x2F;p&gt;
&lt;p&gt;This issue was discovered and fixed by our internal security team.&lt;&#x2F;p&gt;
&lt;p&gt;Please update at your earliest convenience.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.47.0 released</title>
		<published>2021-11-17T00:00:00+00:00</published>
		<updated>2021-11-17T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/11/17/synapse-1-47-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/11/17/synapse-1-47-0-released/</id>
		<content type="html">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.47.0&quot;&gt;Synapse 1.47.0&lt;&#x2F;a&gt; is out now!&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;NOTE:&lt;&#x2F;strong&gt; We anticipate publishing a &lt;strong&gt;security release&lt;&#x2F;strong&gt;, Synapse 1.47.1, on the coming Tuesday, the 23rd of November.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.47.1 will contain a fix for a high severity issue.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Synapse 1.47.0 features additions to the admin and module APIs, a plethora of fixes for long-standing bugs, and a raft of internal improvements. Server administrators should note that this release removes a deprecated API for deleting a room and deprecates a module callback. Consult the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;develop&#x2F;upgrade#upgrading-to-v1470&quot;&gt;upgrade notes&lt;&#x2F;a&gt; for more details.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;new-admin-and-module-apis&quot;&gt;New &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;latest&#x2F;usage&#x2F;administration&#x2F;admin_api&#x2F;index.html&quot;&gt;admin&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;latest&#x2F;modules&#x2F;index.html&quot;&gt;module&lt;&#x2F;a&gt; APIs&lt;&#x2F;h2&gt;
&lt;p&gt;Administrators can now &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;11099&quot;&gt;search for rooms by their ID or alias&lt;&#x2F;a&gt;. We hope this will be particularly useful for projects like &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Awesome-Technologies&#x2F;synapse-admin&quot;&gt;synapse-admin&lt;&#x2F;a&gt;! We&#x27;ve also exposed an API to allow admins to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;11263&quot;&gt;control Synapse&#x27;s background updates&lt;&#x2F;a&gt;.  And while it&#x27;s not strictly an API change, there&#x27;s a small &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;11211&#x2F;files&quot;&gt;patch&lt;&#x2F;a&gt; which makes it easier for homeservers to redirect matrix traffic to port 443.&lt;&#x2F;p&gt;
&lt;p&gt;Authors of pluggable modules have some new toys to play with. There&#x27;s &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;11126&quot;&gt;a way to listen for new events&lt;&#x2F;a&gt;; a means to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;11204&quot;&gt;retrieve room state&lt;&#x2F;a&gt; and the ability to edit a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;11147&quot;&gt;user&#x27;s membership of a room&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;bug-fixes-and-refactors&quot;&gt;Bug Fixes and Refactors&lt;&#x2F;h2&gt;
&lt;p&gt;We fixed a variety of different bugs in this release, many of which were long-standing. It&#x27;s good to see them dealt with! Worth mentioning in particular:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Improvements to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10097&quot;&gt;the&lt;&#x2F;a&gt; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;11199&quot;&gt;handling&lt;&#x2F;a&gt; of the &lt;code&gt;device_inbox&lt;&#x2F;code&gt; table, which trim redundant data to reduce database bloat.&lt;&#x2F;li&gt;
&lt;li&gt;Fixes related to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;11255&quot;&gt;restarting&lt;&#x2F;a&gt; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;11262&quot;&gt;workers&lt;&#x2F;a&gt;, to ensure a more reliable upgrade process.&lt;&#x2F;li&gt;
&lt;li&gt;Fix being &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;11135&quot;&gt;unable to join certain v1 rooms&lt;&#x2F;a&gt;, e.g. &lt;code&gt;#NextCloud:matrix.org&lt;&#x2F;code&gt;, whose state contained floating point numbers.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;11207&quot;&gt;Fix serialisation and duplication errors&lt;&#x2F;a&gt; when sending ephemeral events to application services.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Additionally, work continues on improving type-checking coverage, both &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;11205&quot;&gt;in&lt;&#x2F;a&gt; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;11164&quot;&gt;Synapse&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;sygnal&#x2F;pull&#x2F;264&quot;&gt;in&lt;&#x2F;a&gt; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;sygnal&#x2F;pull&#x2F;271&quot;&gt;Sygnal&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;sydent-2-5-1&quot;&gt;Sydent 2.5.1&lt;&#x2F;h2&gt;
&lt;p&gt;This week also saw the release of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;sydent&#x2F;releases&#x2F;tag&#x2F;v2.5.1&quot;&gt;Sydent 2.5.1&lt;&#x2F;a&gt;, the reference implementation of a Matrix Identity Server. This is a minor release which mainly tidies up error handling to reduce the amount of noise in logs. It should also make it easier for us to diagnose some outstanding bugs which remain to be squashed.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything Else&lt;&#x2F;h2&gt;
&lt;p&gt;In the background, we&#x27;re still working away at implementing &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3440&quot;&gt;MSC3440&lt;&#x2F;a&gt; to facilitate threading. Early tests are promising. We&#x27;re also exploring &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2775&quot;&gt;MSC2775&lt;&#x2F;a&gt; as a means to speed up room joins. Both will be long term projects that should hopefully reap major rewards for the Matrix ecosystem. Lastly, there&#x27;s support for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3288&quot;&gt;MSC3228&lt;&#x2F;a&gt; to allow identity servers to provide bespoke invites to spaces. We mentioned this &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2021&#x2F;11&#x2F;02&#x2F;synapse-1-46-0-released#sydent-250&quot;&gt;last time&lt;&#x2F;a&gt; in Sydent release notes; now we&#x27;ve got support for it on the Synapse side.&lt;&#x2F;p&gt;
&lt;p&gt;Please see the Synapse &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.47.0&#x2F;CHANGES.md&quot;&gt;Release Notes&lt;&#x2F;a&gt; for a complete list of changes in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk Klimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;JohannesKleine&quot;&gt;JohannesKleine&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;l00ptr&quot;&gt;l00ptr&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Fizzadar&quot;&gt;Nick Barrett&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rogersheu&quot;&gt;rogersheu&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;samuel-p&quot;&gt;Samuel Philipp&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;samip5&quot;&gt;Skyler Mäntysaari&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;sumnerevans&quot;&gt;Sumner Evans&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Matrix v1.1 release</title>
		<published>2021-11-09T21:28:29+00:00</published>
		<updated>2021-11-09T16:06:10+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/11/09/matrix-v1-1-release/" type="text/html"/>
		<id>matrix.org/blog/2021/11/09/matrix-v1-1-release/</id>
		<content type="html">&lt;p&gt;Hey all,&lt;&#x2F;p&gt;
&lt;p&gt;Once again it&#x27;s been &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2020&#x2F;05&#x2F;27&#x2F;room-version-6-client-server-r-0-6-1-and-federation-r-0-1-4-spec-releases&quot;&gt;a little while&lt;&#x2F;a&gt; since we&#x27;ve done a spec release (sorry; we&#x27;re aiming for quarterly releases from here on out), but this time we have some pretty big news: we&#x27;ve got an &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&quot;&gt;all-new spec platform&lt;&#x2F;a&gt; and a new versioning scheme. The new spec platform has been needed for a long time to make better sense of what Matrix is, and as part of getting that out the door we reduced the number of &amp;quot;Matrix versions&amp;quot; to just one.&lt;&#x2F;p&gt;
&lt;p&gt;Huge thanks to Will Bamberg for building it out for us, anoa for working out the deployment details, and everyone for testing it all. They talk at length about what this specification even is and about the platform itself on &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=gsdMgXug7u8&quot;&gt;Matrix Live S6E19&lt;&#x2F;a&gt;. It&#x27;s the single greatest improvement to the spec we&#x27;ve seen to date.&lt;&#x2F;p&gt;
&lt;p&gt;The new versioning scheme presents the whole specification as a single document, making it easier to check compatibility between implementations and the spec itself. Previously, a grid would have to be drawn to show whether Server-Server r0.1.4 is compatible with Client-Server r0.6.1 - while obvious at release time, the historical context gets lost quite easily. Now, with a single version number, the entire specification is compatible across a single version number: servers implementing Matrix 1.1 will be compatible with clients implementing v1.1, and vice versa. For the specification itself, this means we no longer have to carefully point and update links between the APIs, as they&#x27;ll instead be versioned together.&lt;&#x2F;p&gt;
&lt;p&gt;Changing the versioning of the specification does have an impact on the Client-Server API in particular, however. You may have noticed that Client-Server APIs are currently versioned at &amp;quot;r0&amp;quot;. By removing rX.Y.Z versioning, all of the endpoints suddenly don&#x27;t have a version to reference. All endpoints across the specification are now versioned individually to allow for breaking changes at the endpoint level. They no longer require the whole specification to be listed as a breaking change: a v1 endpoint can get additions&#x2F;changes which are backwards compatible, but if we need to change format (for example) then it&#x27;ll get bumped up to v2, leaving v1 in its last known state.&lt;&#x2F;p&gt;
&lt;p&gt;For the Client-Server API, a slight complication is that v1 and v2 (alpha) are already versions familiar to those that have been around for a while - to avoid confusing those people, existing Client-Server API endpoints will start at v3. New endpoints introduced after v1.1 will start at v1 instead.&lt;&#x2F;p&gt;
&lt;p&gt;It&#x27;s been well over a year since the last release, which means there&#x27;s a whole lot of features and changes to cover. Here we&#x27;ll try to cover the things most clients&#x2F;servers will have to worry about, but we do still recommend reading through the changelog included below. Overall, 28 MSCs have been merged through this release, but some have had to be excluded in the interest of getting the spec release out there. Many of them are expected to be in the next anticipated release (which should hopefully be next quarter).&lt;&#x2F;p&gt;
&lt;h2 id=&quot;clients-there-s-a-lot-of-stuff&quot;&gt;Clients: There&#x27;s a lot of stuff&lt;&#x2F;h2&gt;
&lt;p&gt;In Matrix 1.1, client developers get all sorts of new features to play with. Clients which support end-to-end encryption should explore &lt;strong&gt;&lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.1&#x2F;client-server-api&#x2F;#server-side-key-backups&quot;&gt;key backups&lt;&#x2F;a&gt;&lt;&#x2F;strong&gt;, &lt;strong&gt;&lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.1&#x2F;client-server-api&#x2F;#cross-signing&quot;&gt;cross-signing&lt;&#x2F;a&gt;&lt;&#x2F;strong&gt;, &lt;strong&gt;&lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.1&#x2F;client-server-api&#x2F;#secrets&quot;&gt;SSSS&lt;&#x2F;a&gt;&lt;&#x2F;strong&gt;, and &lt;strong&gt;&lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.1&#x2F;client-server-api&#x2F;#key-verification-framework&quot;&gt;breaking changes to verification&lt;&#x2F;a&gt;&lt;&#x2F;strong&gt;. Quite a lot of this stuff has existed for a while, but has made it into the specification formally now. As an added bonus, the emoji for SAS verification &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;tree&#x2F;master&#x2F;data-definitions&quot;&gt;have been translated&lt;&#x2F;a&gt; (&lt;a href=&quot;https:&#x2F;&#x2F;translate.element.io&#x2F;projects&#x2F;matrix-doc&#x2F;sas-emoji-v1&#x2F;&quot;&gt;contribute here&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;Knocking has also landed in the spec (thanks Sorunome for leading the charge on this!), opening up the ability for rooms to optionally allow people to request invites to join. This can be helpful for semi-private rooms where it can be easier to approve&#x2F;deny requests compared to finding someone&#x27;s MXID and manually inviting them. This does require a &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.1&#x2F;rooms&#x2F;v7&#x2F;&quot;&gt;v7 room&lt;&#x2F;a&gt; to work, however.&lt;&#x2F;p&gt;
&lt;p&gt;Thanks again to Sorunome, &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.1&#x2F;client-server-api&#x2F;#spoiler-messages&quot;&gt;Message Spoilers&lt;&#x2F;a&gt; have been officially included in Matrix. People can now safely discuss the ending to the latest movie without being banned for spoilers. Though, as a new feature, there&#x27;s a chance that the spoiler text still gets included in the message: clients should update as soon as possible to avoid their users accidentally getting banned for spoiling the conclusion to the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;1772&quot;&gt;Spaces saga&lt;&#x2F;a&gt; ;)&lt;&#x2F;p&gt;
&lt;p&gt;There&#x27;s a few other smaller improvements&#x2F;additions, and of course the regular &amp;quot;various clarifications and bug fixes&amp;quot; to take a look at. For a sample checklist, check out &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;vector-im&#x2F;element-web&#x2F;issues&#x2F;16876&quot;&gt;element-web&#x27;s issue&lt;&#x2F;a&gt; on the subject.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;servers-knock-knock-it-s-a-new-room-version&quot;&gt;Servers: Knock knock, it&#x27;s a new room version&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.1&#x2F;rooms&#x2F;v7&#x2F;&quot;&gt;Room version 7&lt;&#x2F;a&gt; has landed, bringing forth the ability for users to knock on rooms (requesting an invite to join). The changes are largely scoped to using the reserved keywords for join rules and membership, and are described through the auth rules. Thankfully, the changes over v6 are minimally invasive so should be quick to implement.&lt;&#x2F;p&gt;
&lt;p&gt;Additionally, the &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.1&#x2F;server-server-api&#x2F;#end-to-end-encryption&quot;&gt;cross-signing bits&lt;&#x2F;a&gt; have been included in the API responses and EDU definitions. &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2020&#x2F;05&#x2F;06&#x2F;cross-signing-and-end-to-end-encryption-by-default-is-here&quot;&gt;Matthew&#x27;s blog post&lt;&#x2F;a&gt; from last year (it really has been that long...) describes cross-signing and the history of its implementation.&lt;&#x2F;p&gt;
&lt;p&gt;As per usual, there&#x27;s also various specification errors corrected to aid understanding. &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;11079&quot;&gt;Synapse has an exhaustive issue&lt;&#x2F;a&gt; to detail what servers might need to do.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;PS: Room versions 8 and 9 are also out there, but will be included in a future spec release.&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-full-changelog&quot;&gt;The full changelog&lt;&#x2F;h2&gt;
&lt;p&gt;We haven&#x27;t mentioned identity servers, bridges, etc in this post but they have changes too! Below is the whole changelog, the entire year and a bit of it. Thank you to everyone who has submitted MSCs, and congratulations on getting them released. If we forgot yours, please mention it in &lt;a href=&quot;https:&#x2F;&#x2F;matrix.to&#x2F;#&#x2F;#matrix-spec:matrix.org&quot;&gt;#matrix-spec:matrix.org&lt;&#x2F;a&gt; so we can apologize and correct.&lt;&#x2F;p&gt;
&lt;p&gt;PS: The MSC process is how changes to Matrix are made, and you (yes, you) can propose those changes too. Check out the &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=SFkZz60RRfc&quot;&gt;Matrix Live episode&lt;&#x2F;a&gt; where Matthew talks about how this process works, and how we avoid blocking clients from implementing their proposals behind the relatively slow spec release cycles.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;client-server-api&quot;&gt;Client-Server API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Breaking Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Document &lt;code&gt;curve25519-hkdf-sha256&lt;&#x2F;code&gt; key agreement method for SAS verification, and deprecate old method as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2630&quot;&gt;MSC2630&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2687&quot;&gt;#2687&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;m.key.verification.ready&lt;&#x2F;code&gt; and &lt;code&gt;m.key.verification.done&lt;&#x2F;code&gt; to key verification framework as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2366&quot;&gt;MSC2366&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3139&quot;&gt;#3139&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Deprecations&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Deprecate starting verifications that don&#x27;t start with &lt;code&gt;m.key.verification.request&lt;&#x2F;code&gt; as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3122&quot;&gt;MSC3122&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3199&quot;&gt;#3199&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;New Endpoints&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add key backup (&lt;code&gt;&#x2F;room_keys&#x2F;*&lt;&#x2F;code&gt;) endpoints as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;1219&quot;&gt;MSC1219&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2387&quot;&gt;#2387&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2639&quot;&gt;#2639&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;POST &#x2F;keys&#x2F;device_signing&#x2F;upload&lt;&#x2F;code&gt; and &lt;code&gt;POST &#x2F;keys&#x2F;signatures&#x2F;upload&lt;&#x2F;code&gt; as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;1756&quot;&gt;MSC1756&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2536&quot;&gt;#2536&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;&#x2F;knock&lt;&#x2F;code&gt; endpoint as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2403&quot;&gt;MSC2403&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3154&quot;&gt;#3154&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;&#x2F;login&#x2F;sso&#x2F;redirect&#x2F;{idpId}&lt;&#x2F;code&gt; as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2858&quot;&gt;MSC2858&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3163&quot;&gt;#3163&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Removed Endpoints&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Remove unimplemented &lt;code&gt;m.login.oauth2&lt;&#x2F;code&gt; and &lt;code&gt;m.login.token&lt;&#x2F;code&gt; user-interactive authentication mechanisms as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2610&quot;&gt;MSC2610&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2611&quot;&gt;MSC2611&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2609&quot;&gt;#2609&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Document how clients can advise recipients that it is withholding decryption keys as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2399&quot;&gt;MSC2399&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2399&quot;&gt;#2399&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add cross-signing properties to the response of &lt;code&gt;POST &#x2F;keys&#x2F;query&lt;&#x2F;code&gt; as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;1756&quot;&gt;MSC1756&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2536&quot;&gt;#2536&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Document Secure Secret Storage and Sharing as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;1946&quot;&gt;MSC1946&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2472&quot;&gt;MSC2472&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2597&quot;&gt;#2597&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a &lt;code&gt;device_id&lt;&#x2F;code&gt; parameter to login fallback as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2604&quot;&gt;MSC2604&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2709&quot;&gt;#2709&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Added a common set of translations for SAS Emoji. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2728&quot;&gt;#2728&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Added support for &lt;code&gt;reason&lt;&#x2F;code&gt; on all membership events and related endpoints as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2367&quot;&gt;MSC2367&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2795&quot;&gt;#2795&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a 404 &lt;code&gt;M_NOT_FOUND&lt;&#x2F;code&gt; error to push rule endpoints as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2663&quot;&gt;MSC2663&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2796&quot;&gt;#2796&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make &lt;code&gt;reason&lt;&#x2F;code&gt; and &lt;code&gt;score&lt;&#x2F;code&gt; parameters optional in the content reporting API as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2414&quot;&gt;MSC2414&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2807&quot;&gt;#2807&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow guests to get the list of members for a room as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2689&quot;&gt;MSC2689&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2808&quot;&gt;#2808&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for spoilers as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2010&quot;&gt;MSC2010&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2557&quot;&gt;MSC2557&lt;&#x2F;a&gt;, and &lt;code&gt;color&lt;&#x2F;code&gt; attribute as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2422&quot;&gt;MSC2422&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3098&quot;&gt;#3098&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;&amp;lt;details&amp;gt;&lt;&#x2F;code&gt; and &lt;code&gt;&amp;lt;summary&amp;gt;&lt;&#x2F;code&gt; to the suggested HTML subset as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2184&quot;&gt;MSC2184&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3100&quot;&gt;#3100&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add key verification using in-room messages as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2241&quot;&gt;MSC2241&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3139&quot;&gt;#3139&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3150&quot;&gt;#3150&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add information about using SSSS for cross-signing and key backup. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3147&quot;&gt;#3147&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add key verification method using QR codes as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;1544&quot;&gt;MSC1544&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3149&quot;&gt;#3149&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Document how clients can simplify usage of Secure Secret Storage as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2874&quot;&gt;MSC2874&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3151&quot;&gt;#3151&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for knocking, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2403&quot;&gt;MSC2403&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3154&quot;&gt;#3154&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3254&quot;&gt;#3254&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Multiple SSO providers are possible through &lt;code&gt;m.login.sso&lt;&#x2F;code&gt; as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2858&quot;&gt;MSC2858&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3163&quot;&gt;#3163&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;device_id&lt;&#x2F;code&gt; to &lt;code&gt;&#x2F;account&#x2F;whoami&lt;&#x2F;code&gt; response as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2033&quot;&gt;MSC2033&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3166&quot;&gt;#3166&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Downgrade identity server discovery failures to &lt;code&gt;FAIL_PROMPT&lt;&#x2F;code&gt; as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2284&quot;&gt;MSC2284&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3169&quot;&gt;#3169&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Re-version all endpoints to be &lt;code&gt;v3&lt;&#x2F;code&gt; as a starting point instead of &lt;code&gt;r0&lt;&#x2F;code&gt; as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2844&quot;&gt;MSC2844&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3421&quot;&gt;#3421&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Fix issues with &lt;code&gt;age&lt;&#x2F;code&gt; and &lt;code&gt;unsigned&lt;&#x2F;code&gt; being shown in the wrong places. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2591&quot;&gt;#2591&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix definitions for room version capabilities. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2592&quot;&gt;#2592&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix various typos throughout the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2594&quot;&gt;#2594&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2599&quot;&gt;#2599&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2809&quot;&gt;#2809&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2878&quot;&gt;#2878&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2885&quot;&gt;#2885&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2888&quot;&gt;#2888&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3116&quot;&gt;#3116&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3339&quot;&gt;#3339&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify link to OpenID Connect specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2605&quot;&gt;#2605&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the behaviour of SSO login and UI-Auth. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2608&quot;&gt;#2608&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove spurious &lt;code&gt;room_id&lt;&#x2F;code&gt; from &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; examples. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2629&quot;&gt;#2629&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reorganize information in Push Notifications module for clarity. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2634&quot;&gt;#2634&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve consistency and clarity of event schema &lt;code&gt;title&lt;&#x2F;code&gt;s. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2647&quot;&gt;#2647&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix schema issues in &lt;code&gt;m.key.verification.accept&lt;&#x2F;code&gt; and secret storage. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2653&quot;&gt;#2653&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reword &amp;quot;UI Authorization&amp;quot; to &amp;quot;User-Interactive Authentication&amp;quot; to be more clear. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2667&quot;&gt;#2667&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix schemas for push rule actions to represent their alternative object form. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2669&quot;&gt;#2669&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix usage of &lt;code&gt;highlight&lt;&#x2F;code&gt; tweak for consistency. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2670&quot;&gt;#2670&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the behaviour of &lt;code&gt;state&lt;&#x2F;code&gt; for &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; with lazy-loading. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2754&quot;&gt;#2754&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify description of &lt;code&gt;m.room.redaction&lt;&#x2F;code&gt; event. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2814&quot;&gt;#2814&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Mark &lt;code&gt;messages&lt;&#x2F;code&gt; as a required JSON body field in &lt;code&gt;PUT &#x2F;_matrix&#x2F;client&#x2F;r0&#x2F;sendToDevice&#x2F;{eventType}&#x2F;{txnId}&lt;&#x2F;code&gt; calls. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2928&quot;&gt;#2928&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Correct examples of &lt;code&gt;client_secret&lt;&#x2F;code&gt; request body parameters so that they do not include invalid characters. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2985&quot;&gt;#2985&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix example MXC URI for &lt;code&gt;m.presence&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3091&quot;&gt;#3091&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that event bodies are untrusted, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2801&quot;&gt;MSC2801&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3099&quot;&gt;#3099&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the maximum event size restriction (65535 bytes -&amp;gt; 65536). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3127&quot;&gt;#3127&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update &lt;code&gt;Access-Control-Allow-Headers&lt;&#x2F;code&gt; recommendation to fit CORS specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3225&quot;&gt;#3225&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Explicitly state that &lt;code&gt;replacement_room&lt;&#x2F;code&gt; is a room ID in &lt;code&gt;m.room.tombstone&lt;&#x2F;code&gt; events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3233&quot;&gt;#3233&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that all request bodies are required. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3238&quot;&gt;#3238&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3332&quot;&gt;#3332&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add missing titles to some scheams. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3330&quot;&gt;#3330&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add User-Interactive Authentication fields to cross-signing APIs as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;1756&quot;&gt;MSC1756&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3331&quot;&gt;#3331&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Mention that a canonical alias event should be added when a room is created with an alias. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3337&quot;&gt;#3337&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an &#x27;API conventions&#x27; section to the Appendices. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3350&quot;&gt;#3350&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the documentation around the pagination tokens used by &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt;, &lt;code&gt;&#x2F;rooms&#x2F;{room_id}&#x2F;messages&lt;&#x2F;code&gt;, &lt;code&gt;&#x2F;initialSync&lt;&#x2F;code&gt;, &lt;code&gt;&#x2F;rooms&#x2F;{room_id}&#x2F;initialSync&lt;&#x2F;code&gt;, and &lt;code&gt;&#x2F;notifications&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3353&quot;&gt;#3353&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove the inaccurate &#x27;Pagination&#x27; section. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3366&quot;&gt;#3366&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify how &lt;code&gt;redacted_because&lt;&#x2F;code&gt; is meant to work. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3411&quot;&gt;#3411&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove extraneous &lt;code&gt;mimetype&lt;&#x2F;code&gt; from &lt;code&gt;EncryptedFile&lt;&#x2F;code&gt; examples, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2582&quot;&gt;MSC2582&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3412&quot;&gt;#3412&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Describe how &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2844&quot;&gt;MSC2844&lt;&#x2F;a&gt; affects the &lt;code&gt;&#x2F;versions&lt;&#x2F;code&gt; endpoint. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3420&quot;&gt;#3420&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix documentation errors around &lt;code&gt;threepid_creds&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3471&quot;&gt;#3471&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;server-server-api&quot;&gt;Server-Server API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;New Endpoints&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add &lt;code&gt;&#x2F;make_knock&lt;&#x2F;code&gt; and &lt;code&gt;&#x2F;send_knock&lt;&#x2F;code&gt; endpoints as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2403&quot;&gt;MSC2403&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3154&quot;&gt;#3154&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add cross-signing information to &lt;code&gt;GET &#x2F;user&#x2F;keys&lt;&#x2F;code&gt; and &lt;code&gt;GET &#x2F;user&#x2F;devices&#x2F;{userId}&lt;&#x2F;code&gt;, &lt;code&gt;m.device_list_update&lt;&#x2F;code&gt; EDU, and a new &lt;code&gt;m.signing_key_update&lt;&#x2F;code&gt; EDU as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;1756&quot;&gt;MSC1756&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2536&quot;&gt;#2536&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for knocking, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2403&quot;&gt;MSC2403&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3154&quot;&gt;#3154&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Specify that &lt;code&gt;GET &#x2F;_matrix&#x2F;federation&#x2F;v1&#x2F;make_join&#x2F;{roomId}&#x2F;{userId}&lt;&#x2F;code&gt; can return a 404 if the room is unknown. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2688&quot;&gt;#2688&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix various typos throughout the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2888&quot;&gt;#2888&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3116&quot;&gt;#3116&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3128&quot;&gt;#3128&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3207&quot;&gt;#3207&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Correct the &lt;code&gt;&#x2F;_matrix&#x2F;federation&#x2F;v1&#x2F;user&#x2F;devices&#x2F;{userId}&lt;&#x2F;code&gt; response which actually returns &lt;code&gt;&amp;quot;self_signing_key&amp;quot;&lt;&#x2F;code&gt; instead of &lt;code&gt;&amp;quot;self_signing_keys&amp;quot;&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3312&quot;&gt;#3312&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Explain the reasons why &lt;code&gt;&amp;lt;hostname&amp;gt;&lt;&#x2F;code&gt; TLS certificate is needed rather than &lt;code&gt;&amp;lt;delegated_hostname&amp;gt;&lt;&#x2F;code&gt; for SRV delegation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3322&quot;&gt;#3322&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Tweak the example PDU diagram to better demonstrate situations with multiple &lt;code&gt;prev_events&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3340&quot;&gt;#3340&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;application-service-api&quot;&gt;Application Service API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Fix various typos throughout the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2888&quot;&gt;#2888&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;identity-service-api&quot;&gt;Identity Service API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;New Endpoints&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add &lt;code&gt;GET &#x2F;_matrix&#x2F;identity&#x2F;versions&lt;&#x2F;code&gt; API as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2320&quot;&gt;MSC2320&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3101&quot;&gt;#3101&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Removed Endpoints&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;The v1 identity service API has been removed in favour of the v2 API, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2713&quot;&gt;MSC2713&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3170&quot;&gt;#3170&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Fix various typos throughout the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2888&quot;&gt;#2888&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that some identifiers must be case folded prior to processing, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2265&quot;&gt;MSC2265&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3167&quot;&gt;#3167&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3176&quot;&gt;#3176&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Describe how &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2844&quot;&gt;MSC2844&lt;&#x2F;a&gt; affects the &lt;code&gt;&#x2F;versions&lt;&#x2F;code&gt; endpoint. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3459&quot;&gt;#3459&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;push-gateway-api&quot;&gt;Push Gateway API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Clarify where to get information about the various parameter values for the notify endpoint. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2763&quot;&gt;#2763&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.46.0 released</title>
		<published>2021-11-02T00:00:00+00:00</published>
		<updated>2021-11-02T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/11/02/synapse-1-46-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/11/02/synapse-1-46-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.46.0 is out now and includes support for Ubuntu 21.10: Impish Indri.&lt;&#x2F;p&gt;
&lt;p&gt;This release includes a fix for a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;11049&quot;&gt;performance regression&lt;&#x2F;a&gt; that surfaced in Synapse 1.44.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;progress-on-threading&quot;&gt;Progress on Threading&lt;&#x2F;h2&gt;
&lt;p&gt;While still disabled by default, we&#x27;re beginning to land code in Synapse to support threaded discussions in Matrix. In particular, the &lt;code&gt;m.thread&lt;&#x2F;code&gt; event relationship defined in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3440&quot;&gt;MSC3440&lt;&#x2F;a&gt; is now implemented behind a configuration flag.&lt;&#x2F;p&gt;
&lt;p&gt;There are still many open questions here, and MSC3440 has not yet been approved to merge into the Matrix spec, but it&#x27;s a start. Threading is essential to Matrix&#x27;s continued growth and adoption, and we&#x27;re excited to provide server-side support to this effort.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;bug-fixes-and-refactors&quot;&gt;Bug Fixes and Refactors&lt;&#x2F;h2&gt;
&lt;p&gt;This release is mostly comprised of bug fixes and improvements to static typing. Of note:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;The &lt;code&gt;export-data&lt;&#x2F;code&gt; admin command now works and is tested in CI. This command helps server administrators respond to GDPR Subject Access Requests.&lt;&#x2F;li&gt;
&lt;li&gt;A weeks-long effort to refactor how Synapse validates the &lt;code&gt;auth_events&lt;&#x2F;code&gt; field of incoming PDUs has concluded, resolving a few corner cases which could incorrectly allow events into the room state which should instead be rejected.&lt;&#x2F;li&gt;
&lt;li&gt;Further static type hints have been added to Synapse, improving our precise type coverage to 85% of all lines. Currently, 13% of the Python files in &lt;code&gt;synapse&#x2F;&lt;&#x2F;code&gt; are skipped during mypy runs. We&#x27;d like to cut this in half by the end of the year, as well as increasing overall precise coverage in the codebase.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;sydent-2-5-0&quot;&gt;Sydent 2.5.0&lt;&#x2F;h2&gt;
&lt;p&gt;This week also saw the release of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;sydent&#x2F;releases&#x2F;tag&#x2F;v2.5.0&quot;&gt;Sydent 2.5.0&lt;&#x2F;a&gt;, the reference implementation of a Matrix Identity Server. In addition to fixing bugs, Sydent 2.5.0 passes &lt;code&gt;mypy --strict&lt;&#x2F;code&gt;, uses Jinja2 for templates, and supports the &lt;code&gt;room_type&lt;&#x2F;code&gt; field from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3288&quot;&gt;MSC3288&lt;&#x2F;a&gt; to better differentiate between invitations to rooms and invitations to Spaces.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything Else&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;The Admin API to &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.46&#x2F;admin_api&#x2F;user_admin_api.html#create-or-modify-account&quot;&gt;create or modify accounts&lt;&#x2F;a&gt; now accepts a &lt;code&gt;user_type&lt;&#x2F;code&gt; field, allowing for accounts to be set as belonging to bots or support staff.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.46&#x2F;modules&#x2F;password_auth_provider_callbacks.html&quot;&gt;Password auth providers&lt;&#x2F;a&gt; can now be implemented using the new pluggable extension module APIs.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Please see the Synapse &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.46.0&#x2F;CHANGES.md&quot;&gt;Release Notes&lt;&#x2F;a&gt; for a complete list of changes in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;aaronraimist&quot;&gt;aaronraimist&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;AndrewFerr&quot;&gt;AndrewFerr&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;dklimpel&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Legogris&quot;&gt;Legogris&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.45.1 released</title>
		<published>2021-10-20T00:00:00+00:00</published>
		<updated>2021-10-20T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/10/20/synapse-1-45-1-released/" type="text/html"/>
		<id>matrix.org/blog/2021/10/20/synapse-1-45-1-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.45.1 is out now! Python 3.10 and PostgreSQL 14 are now tested and supported by Synapse. Support for Python 3.6 and PostgreSQL 9.6 will be removed by the end of the year.&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;&#x2F;strong&gt; This release may require changes to how media storage providers access your homeserver&#x27;s configuration. See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.45&#x2F;upgrade.html#upgrading-to-v1450&quot;&gt;Upgrade Notes&lt;&#x2F;a&gt; for more information.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;&#x2F;strong&gt; Synapse 1.45.0 was released yesterday and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10947&quot;&gt;changed&lt;&#x2F;a&gt; how Synapse&#x27;s monthly active user limits were calculated. Today&#x27;s release of 1.45.1 &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;11127&quot;&gt;reverts&lt;&#x2F;a&gt; that change, but is otherwise identical to 1.45.0.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h2 id=&quot;support-for-oembed-autodiscovery&quot;&gt;Support for oEmbed Autodiscovery&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse can now automatically discover rich metadata when generating previews of links to sites which support &lt;a href=&quot;https:&#x2F;&#x2F;oembed.com&quot;&gt;oEmbed&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Before:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2021-10-20-synapse-1.44-link-preview.png&quot; alt=&quot;synapse-1.44-link-preview&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;After:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2021-10-20-synapse-1.45-link-preview.png&quot; alt=&quot;synapse-1.45-link-preview&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Note that URL previews are generated server-side, and thus generally disabled in encrypted rooms to avoid leaking information about message content to your homeserver. You may need to adjust the room&#x27;s settings to see the new oEmbed previews.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;fixing-stuck-messages&quot;&gt;Fixing Stuck Messages&lt;&#x2F;h2&gt;
&lt;p&gt;This release of Synapse &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;9424&quot;&gt;fixes a race condition&lt;&#x2F;a&gt; which would occasionally prevent your sent events from syncing back down to all of your clients. This caused messages to look like they were stuck at the bottom of the room, waiting to finish sending, even though other users would receive and see them normally.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;improved-privacy-for-per-room-nicknames&quot;&gt;Improved Privacy for Per-Room Nicknames&lt;&#x2F;h2&gt;
&lt;p&gt;Matrix allows users to set their display names to be different things in different rooms. For example, you might use an alias in public rooms, but your real name in rooms shared with friends and family.&lt;&#x2F;p&gt;
&lt;p&gt;To make it easy to initiate conversations with people, each homeserver maintains a user directory with the Matrix ID, display name, and avatar of the users it sees. Previously, this directory would be updated with the most recent profile metadata that Synapse had seen for a user, even if it was only changed in a single room.&lt;&#x2F;p&gt;
&lt;p&gt;As of 1.45, Synapse only uses includes the &lt;em&gt;default&lt;&#x2F;em&gt; display name of local users in its user directory, ignoring room-specific nicknames or avatars. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5677&quot;&gt;#5677&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;h2 id=&quot;internals&quot;&gt;Internals&lt;&#x2F;h2&gt;
&lt;p&gt;This release includes numerous fixes and improvements to Synapse&#x27;s internals.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;We&#x27;ve added countless static type annotations to Synapse (and related projects like Sydent), giving us greater confidence in its correctness and reducing maintenance costs. Several modules newly have &lt;em&gt;all&lt;&#x2F;em&gt; of their definitions typed, allowing us to require and enforce complete type coverage for all future edits therein.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;This release includes meaningful fixes and improvements to our OpenTracing and logging machinery, helping us better catch and eliminate bugs in Synapse. This work ultimately reduced matrix.org&#x27;s Sentry event volume by an order of magnitude.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Magic accessor methods have been removed from Synapse&#x27;s &lt;code&gt;Config&lt;&#x2F;code&gt; class. Previously, Synapse would interpret references like &lt;code&gt;config.send_federation&lt;&#x2F;code&gt; by attempting to guess a reasonable full path, like &lt;code&gt;config.worker.send_federation&lt;&#x2F;code&gt;. As of Synapse 1.45, the full path must be specified directly. This prevents errors where values could be drawn from unexpected or incorrect sections of the server&#x27;s configuration.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything Else&lt;&#x2F;h2&gt;
&lt;p&gt;We&#x27;d like to extend a special thanks to Fizzadar from &lt;a href=&quot;https:&#x2F;&#x2F;www.beeper.com&#x2F;&quot;&gt;Beeper&lt;&#x2F;a&gt; for improving Synapse&#x27;s &lt;code&gt;update_synapse_database&lt;&#x2F;code&gt; script (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10954&quot;&gt;#10954&lt;&#x2F;a&gt;) to allow schema changes to occur while Synapse is running. This is a great step toward reducing the downtime associated with upgrades.&lt;&#x2F;p&gt;
&lt;p&gt;These are just the highlights; please see the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.45&#x2F;upgrade.html#upgrading-to-v1450&quot;&gt;Upgrade Notes&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.45.0&#x2F;CHANGES.md&quot;&gt;Release Notes&lt;&#x2F;a&gt; for a complete list of changes in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;AndrewFerr&quot;&gt;AndrewFerr&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;dklimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Fizzadar&quot;&gt;Fizzadar&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;lukaslihotzki&quot;&gt;lukaslihotzki&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;maxkratz&quot;&gt;maxkratz&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.44.0 released</title>
		<published>2021-10-05T23:44:54+00:00</published>
		<updated>2021-10-05T23:44:54+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/10/05/synapse-1-44-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/10/05/synapse-1-44-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.44.0 is out now!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;loads-of-bug-fixes&quot;&gt;Loads of Bug Fixes&lt;&#x2F;h2&gt;
&lt;p&gt;This release primarily includes fixes for over a dozen long-standing bugs. For example:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Messages containing null bytes are now properly indexed for search.&lt;&#x2F;li&gt;
&lt;li&gt;The Room Search Admin API now allows searching for rooms with non-ascii titles.&lt;&#x2F;li&gt;
&lt;li&gt;URL preview caches, which are meant to be ephemeral, are no longer mirrored from the local media store into other media providers.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;faster-json-responses&quot;&gt;Faster JSON Responses&lt;&#x2F;h2&gt;
&lt;p&gt;We now stay within C code while generating large JSON objects for responses, which should be substantially faster than the previous technique, which fell back to Python for encoding.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;new-extension-module-apis&quot;&gt;New Extension Module APIs&lt;&#x2F;h2&gt;
&lt;p&gt;Spam checker modules can now use a &lt;code&gt;user_may_create_room_with_invites&lt;&#x2F;code&gt; callback to inspect room creation events which include invitations to users via Matrix or other media (email, etc.).&lt;&#x2F;p&gt;
&lt;p&gt;Additionally, the ModuleApi can now inspect IP and User Agent data, as well as checking whether Rooms and MXIDs are local to the current homeserver.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything Else&lt;&#x2F;h2&gt;
&lt;p&gt;We&#x27;ve also been busy refactoring. For example:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Prometheus stats now distinguish between cache evictions due to entries expiring, and cache evictions due to the cache being full.&lt;&#x2F;li&gt;
&lt;li&gt;The &lt;code&gt;synapse.handlers&lt;&#x2F;code&gt;, &lt;code&gt;synapse.rest&lt;&#x2F;code&gt;, and &lt;code&gt;synapse.storage.databases.state&lt;&#x2F;code&gt; modules are now fully type annotated and checked by mypy, among others.&lt;&#x2F;li&gt;
&lt;li&gt;The user directory search code was cleaned up in preparation for future fixes.&lt;&#x2F;li&gt;
&lt;li&gt;Another half dozen pull requests were merged with an aim toward clarifying federated event authentication code (and associated logging).&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Lastly, this release has seen considerable work toward supporting &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2716&quot;&gt;MSC2716: Incrementally importing history into existing rooms&lt;&#x2F;a&gt;, along with an update to match the current state of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3231&quot;&gt;MSC3231: Token authenticated registration&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;These are just the highlights; please see the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.44&#x2F;upgrade.html#upgrading-to-v1440&quot;&gt;Upgrade Notes&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.44.0&#x2F;CHANGES.md&quot;&gt;Release Notes&lt;&#x2F;a&gt; for a complete list of changes in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;aaronraimist&quot;&gt;aaronraimist&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;cvwright&quot;&gt;cvwright&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;govynnus&quot;&gt;govynnus&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Kokokokoka&quot;&gt;Kokokokoka&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;tulir&quot;&gt;tulir&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.43.0 released</title>
		<published>2021-09-21T22:03:44+00:00</published>
		<updated>2021-09-21T22:03:44+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/09/21/synapse-1-43-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/09/21/synapse-1-43-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.43.0 is out now!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;preparing-for-spaces&quot;&gt;Preparing for Spaces&lt;&#x2F;h2&gt;
&lt;p&gt;Quite a lot of work has gone into preparing for Spaces to graduate from beta testing. For example, Synapse now:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Asks clients to prefer &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3375&quot;&gt;room version 9&lt;&#x2F;a&gt; when creating restricted rooms (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;10772&quot;&gt;#10772&lt;&#x2F;a&gt;), via the API defined in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3244&quot;&gt;MSC3244: room version capabilities&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;Allows the Spaces Summary APIs to be handled by worker processes.&lt;&#x2F;li&gt;
&lt;li&gt;Omits rooms with unknown room versions from the Spaces Summary.&lt;&#x2F;li&gt;
&lt;li&gt;Properly handles upgrades of Spaces to different room versions.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything Else&lt;&#x2F;h2&gt;
&lt;p&gt;This release of Synapse also:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Includes initial work toward fully supporting oEmbed for embedding URL previews (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;10714&quot;&gt;#10714&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;10759&quot;&gt;#10759&lt;&#x2F;a&gt;).&lt;&#x2F;li&gt;
&lt;li&gt;Slightly speeds up room joins over federation (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;10754&quot;&gt;#10754&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;10755&quot;&gt;#10755&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;10756&quot;&gt;#10756&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;10780&quot;&gt;#10780&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;10784&quot;&gt;#10784&lt;&#x2F;a&gt;).&lt;&#x2F;li&gt;
&lt;li&gt;Somewhat improves service restart times for large Synapse deployments.&lt;&#x2F;li&gt;
&lt;li&gt;Significantly refactors federation event authentication code for greater clarity (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;10744&quot;&gt;#10744&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;10745&quot;&gt;#10745&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;10746&quot;&gt;#10746&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;10771&quot;&gt;#10771&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;10773&quot;&gt;#10773&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;10781&quot;&gt;#10781&lt;&#x2F;a&gt;).&lt;&#x2F;li&gt;
&lt;li&gt;Adds further static type hints to various modules.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;We&#x27;ve also spent quite a lot of time on SyTest, our integration test suite. In particular, many of the tests made assumptions about event processing which were not correct when targeting a multi-worker Synapse deployment. These flakey tests have plagued our continuous integration pipelines, and are finally being fixed.&lt;&#x2F;p&gt;
&lt;p&gt;These are just the highlights; please see the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.43.0&#x2F;CHANGES.md&quot;&gt;Release Notes&lt;&#x2F;a&gt; for a complete list of changes in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;AndrewFerr&quot;&gt;AndrewFerr&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;BramvdnHeuvel&quot;&gt;BramvdnHeuvel&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;cuttingedge1109&quot;&gt;cuttingedge1109&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.42.0 released</title>
		<published>2021-09-07T00:00:00+00:00</published>
		<updated>2021-09-07T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/09/07/synapse-1-42-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/09/07/synapse-1-42-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.42.0 is out now!&lt;&#x2F;p&gt;
&lt;p&gt;This release includes changes that you may need to be aware of before upgrading, such as the removal of two deprecated Admin APIs or a retroactive fix to ensure that email notifications are only sent to addresses which are presently associated with an account. Please see the  &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.42&#x2F;upgrade.html#upgrading-to-v1420&quot;&gt;Upgrade Notes&lt;&#x2F;a&gt; for details.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;room-version-9-a-bugfix-for-restricted-rooms&quot;&gt;Room Version 9: A Bugfix for Restricted Rooms&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse 1.42 includes support for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3375&quot;&gt;Room Version 9&lt;&#x2F;a&gt;, which fixes &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;3373&quot;&gt;an oversight&lt;&#x2F;a&gt; in the list of event fields which were protected from redaction in Room Version 8&#x27;s &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3083&quot;&gt;restricted rooms&lt;&#x2F;a&gt;. This makes it possible, in certain circumstances, for a restricted room to degrade into a state where participating servers will disagree about the room&#x27;s membership.&lt;&#x2F;p&gt;
&lt;p&gt;Because changing a room version&#x27;s redaction algorithm also changes the way that event IDs are calculated, properly fixing this issue required the creation of a new room version.&lt;&#x2F;p&gt;
&lt;p&gt;To ensure compatibility with existing servers, Synapse 1.42&#x27;s &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3244&quot;&gt;MSC3244: Room version capabilities&lt;&#x2F;a&gt; hints will continue to ask clients to prefer Room Version 8 when creating restricted rooms and Room Version 6 otherwise. A future release of Synapse will ask clients to prefer Room Version 9 for restricted rooms.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;handling-unknown-rooms&quot;&gt;Handling Unknown Rooms&lt;&#x2F;h2&gt;
&lt;p&gt;Very rarely, users find themselves in rooms created with unstable or experimental room versions. Then, when Synapse removes support for these versions, bad things happen. The server no longer understands how to interact with that room version, which means &lt;em&gt;you&lt;&#x2F;em&gt; can&#x27;t interact with that room. And if you can&#x27;t interact with that room, you can&#x27;t &lt;em&gt;leave&lt;&#x2F;em&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;In Synapse 1.42, rooms with unknown room versions are no longer returned down &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt;. This prevents them from appearing in your client, though you may need to empty your client&#x27;s cache and re-sync to see any effect.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;new-mscs&quot;&gt;New MSCs&lt;&#x2F;h2&gt;
&lt;p&gt;In addition to Room Version 9 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3375&quot;&gt;MSC3375&lt;&#x2F;a&gt;), this release includes:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;An initial implementation of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3231&quot;&gt;MSC3231: Token authenticated registration&lt;&#x2F;a&gt;, which makes it possible for homeservers to disable user registration while still allowing new accounts to be made by people who know a pre-shared secret.&lt;&#x2F;p&gt;
&lt;p&gt;This MSC and its implementations were produced as part of a Google Summer of Code (GSoC) project by Callum Brown.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;An updated implementation of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2946&quot;&gt;MSC2946: Spaces Summary&lt;&#x2F;a&gt; following recent changes to the proposal.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Support for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3283&quot;&gt;MSC3283: Expose capabilities for profile actions&lt;&#x2F;a&gt;, which hints to clients whether or not a server allows users to change their display name, avatar, or email address.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything Else&lt;&#x2F;h2&gt;
&lt;p&gt;In addition to the usual array of improvements to performance, type hints, error messages, and documentation:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Custom Presence Router modules can now be built using Synapse&#x27;s &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.42&#x2F;modules.html#presence-router-callbacks&quot;&gt;new, unified module interface&lt;&#x2F;a&gt; which debuted in Synapse 1.37.&lt;&#x2F;li&gt;
&lt;li&gt;Code around federation event handling and authentication has been significantly refactored to improve reliability and maintainability, including extracting nearly 1,800 lines of code from the &lt;code&gt;FederationHandler&lt;&#x2F;code&gt; class into a separate &lt;code&gt;FederationEventHandler&lt;&#x2F;code&gt; class.&lt;&#x2F;li&gt;
&lt;li&gt;Backfilling history and fetching missing events now use the same code paths, reducing the potential for bugs.&lt;&#x2F;li&gt;
&lt;li&gt;Concurrently fetching the same large set of events (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10703&quot;&gt;#10703&lt;&#x2F;a&gt;) is now much more efficient, preventing the process hangs which were possible in prior, extreme cases.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;These are just the highlights; please see the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.42&#x2F;upgrade.html#upgrading-to-v1420&quot;&gt;Upgrade Notes&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.42.0&#x2F;CHANGES.md&quot;&gt;Release Notes&lt;&#x2F;a&gt; for a complete list of changes in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;aaronraimist&quot;&gt;aaronraimist&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;dklimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;govynnus&quot;&gt;govynnus&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;HugoDelval&quot;&gt;HugoDelval&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.41.1 released</title>
		<published>2021-08-31T00:00:00+00:00</published>
		<updated>2021-08-31T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/08/31/synapse-1-41-1-released/" type="text/html"/>
		<id>matrix.org/blog/2021/08/31/synapse-1-41-1-released/</id>
		<content type="html">&lt;p&gt;Today we are releasing Synapse 1.41.1, a security update based on last week&#x27;s release of &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2021&#x2F;08&#x2F;24&#x2F;synapse-1-41-0-released&quot;&gt;Synapse 1.41.0&lt;&#x2F;a&gt;. This release patches two moderate severity issues which could reveal metadata about private rooms:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;security&#x2F;advisories&#x2F;GHSA-3x4c-pq33-4w3q&quot;&gt;GHSA-3x4c-pq33-4w3q&lt;&#x2F;a&gt; &#x2F; CVE-2021-39164: Enumerating a private room&#x27;s list of members and their display names.&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;If an unauthorized user both knows the Room ID of a private room &lt;em&gt;and&lt;&#x2F;em&gt; that room&#x27;s history visibility is set to &lt;code&gt;shared&lt;&#x2F;code&gt;, then they may be able to enumerate the room&#x27;s members, including their display names.&lt;&#x2F;p&gt;
&lt;p&gt;The unauthorized user must be on the same homeserver as a user who is a member of the target room.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;security&#x2F;advisories&#x2F;GHSA-jj53-8fmw-f2w2&quot;&gt;GHSA-jj53-8fmw-f2w2&lt;&#x2F;a&gt; &#x2F; CVE-2021-39163: Disclosing a private room&#x27;s name, avatar, topic, and number of members.&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;If an unauthorized user knows the Room ID of a private room, then its name, avatar, topic, and number of members may be disclosed through Group &#x2F; Community features.&lt;&#x2F;p&gt;
&lt;p&gt;The unauthorized user must be on the same homeserver as a user who is a member of the target room, and their homeserver must allow non-administrators to create groups (&lt;code&gt;enable_group_creation&lt;&#x2F;code&gt; in the Synapse configuration; off by default).&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Note that in both cases:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;The private room&#x27;s Room ID must be known to the attacker.&lt;&#x2F;li&gt;
&lt;li&gt;Another user on the attacker&#x27;s homeserver must be a legitimate member of the target room.&lt;&#x2F;li&gt;
&lt;li&gt;The information disclosed is &lt;em&gt;already&lt;&#x2F;em&gt; present in the database and thus legitimately known to the administrators of homeservers participating in the target room.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;We&#x27;d like to credit &lt;a href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;0xkasper&quot;&gt;0xkasper&lt;&#x2F;a&gt; for discovering and responsibly disclosing these issues.&lt;&#x2F;p&gt;
&lt;p&gt;This release also fixes a small regression in 1.41.0 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;10709&quot;&gt;#10709&lt;&#x2F;a&gt;) which broke compatibility with older Twisted versions when Synapse was a configured to send email.&lt;&#x2F;p&gt;
&lt;p&gt;Please update at your earliest convenience.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.41.0 released</title>
		<published>2021-08-24T00:00:00+00:00</published>
		<updated>2021-08-24T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/08/24/synapse-1-41-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/08/24/synapse-1-41-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.41.0 is out now!&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;NOTE:&lt;&#x2F;strong&gt; We anticipate publishing a &lt;strong&gt;security release&lt;&#x2F;strong&gt; next Tuesday, the 31st of August.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.41.1 will contain fixes for two moderate severity issues.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;Synapse 1.41 includes changes to forward proxies, template settings, and media workers which may require your attention. Please see the  &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.41&#x2F;upgrade.html#upgrading-to-v1410&quot;&gt;Upgrade Notes&lt;&#x2F;a&gt; for details.&lt;&#x2F;p&gt;
&lt;p&gt;Also, this release &lt;strong&gt;removes support for Ubuntu 20.10&lt;&#x2F;strong&gt; (Groovy Gorilla), which reached End of Life last month. Support for Ubuntu 18.04 LTS (Bionic Beaver) and Ubuntu 21.04 (Hirsute Hippo) will be withdrawn near the end of this year under our &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.41&#x2F;deprecation_policy.html&quot;&gt;platform deprecation policy&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;promoting-restricted-rooms&quot;&gt;Promoting Restricted Rooms&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse 1.41 includes experimental support for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3244&quot;&gt;MSC3244: Room version capabilities&lt;&#x2F;a&gt;, which indicates to clients that they should use Room Version 8 when creating &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3083&quot;&gt;restricted rooms&lt;&#x2F;a&gt;. For example, Element&#x27;s clients will use the MSC3244 metadata, which is on by default in Synapse 1.41, to determine whether to show end users the UI for creating restricted rooms.&lt;&#x2F;p&gt;
&lt;p&gt;Room Version 6 will remain the default for newly created rooms which do not explicitly request the restricted room capabilities at creation time. This strikes a balance between the broad compatibility of an older default room version, while still making newer features available upon request.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;new-mscs&quot;&gt;New MSCs&lt;&#x2F;h2&gt;
&lt;p&gt;This version of Synapse implements experimental support for:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3266&quot;&gt;MSC3266: Room summary API&lt;&#x2F;a&gt; which provides a simple way to obtain information about a specific room, such as its join rules, room type, etc.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3288&quot;&gt;MSC3288: Add room type in store invite&lt;&#x2F;a&gt; which lets identity servers differentiate between invitations to rooms and invitations to Spaces.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3244&quot;&gt;MSC3244: Room version capabilities&lt;&#x2F;a&gt; as described above.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;We&#x27;ve also added pagination to the Spaces Summary API based on updates to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2946&quot;&gt;MSC2946&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Work towards implementing &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2716&quot;&gt;MSC2716: Incrementally importing history into existing rooms&lt;&#x2F;a&gt; continues, with several related pull requests landing in this release.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;more-admin-apis&quot;&gt;More Admin APIs&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse now has an Admin APIs to:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.41&#x2F;admin_api&#x2F;user_admin_api.html#delete-media-uploaded-by-a-user&quot;&gt;Delete media uploaded by a user&lt;&#x2F;a&gt; from your homeserver&#x27;s local media storage.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.41&#x2F;admin_api&#x2F;user_admin_api.html#create-or-modify-account&quot;&gt;Edit the external ids&lt;&#x2F;a&gt; associated with a user by Single Sign-On &#x2F; OpenID Connect providers.&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.41&#x2F;admin_api&#x2F;user_admin_api.html#check-username-availability&quot;&gt;Check if a username is available&lt;&#x2F;a&gt;, which behaves similarly to the &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;spec&#x2F;client_server&#x2F;r0.6.0#get-matrix-client-r0-register-available&quot;&gt;related client-server API&lt;&#x2F;a&gt; in the Matrix Spec, but the Admin API version works even when registration is disabled on a homeserver.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything Else&lt;&#x2F;h2&gt;
&lt;p&gt;In addition to the usual boosts to performance and reliability like &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10119&quot;&gt;#10119&lt;&#x2F;a&gt; or &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10513&quot;&gt;#10513&lt;&#x2F;a&gt;, this release includes several notable improvements:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;The &lt;code&gt;&#x2F;createRoom&lt;&#x2F;code&gt; endpoint can now be &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10564&quot;&gt;handled by workers&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;Synapse can now route outbound federation requests, remote media downloads, and public key fetches through a &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.41&#x2F;setup&#x2F;forward_proxy.html&quot;&gt;forward proxy&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;Custom template configuration has now been centralized into a single &lt;code&gt;custom_templates_directory&lt;&#x2F;code&gt; &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.41&#x2F;templates.html&quot;&gt;configuration setting&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;Matrix clients which allow users to &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;spec&#x2F;client_server&#x2F;latest#id64&quot;&gt;set a &lt;code&gt;status_msg&lt;&#x2F;code&gt; with their presence&lt;&#x2F;a&gt; will find that Synapse no longer arbitrarily unsets the message when a user goes offline. Instead, each user&#x27;s &lt;code&gt;status_msg&lt;&#x2F;code&gt; will persist until it is deliberately cleared by their client.&lt;&#x2F;li&gt;
&lt;li&gt;The extension module API now exposes a function, &lt;code&gt;get_userinfo_by_id&lt;&#x2F;code&gt;, which accepts an MXID and returns a &lt;code&gt;UserInfo&lt;&#x2F;code&gt; object. This should simplify writing extension modules like spam checkers.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;These are just the highlights; please see the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.41&#x2F;upgrade.html#upgrading-to-v1410&quot;&gt;Upgrade Notes&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.41.0&#x2F;CHANGES.md&quot;&gt;Release Notes&lt;&#x2F;a&gt; for a complete list of changes in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Bubu&quot;&gt;Bubu&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;dklimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;H-Shay&quot;&gt;H-Shay&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ilmari&quot;&gt;ilmari&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Kentokamoto&quot;&gt;Kentokamoto&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;SimonBrandner&quot;&gt;SimonBrandner&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;warricksothr&quot;&gt;warricksothr&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.40.0 released</title>
		<published>2021-08-10T00:00:00+00:00</published>
		<updated>2021-08-10T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/08/10/synapse-1-40-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/08/10/synapse-1-40-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.40.0 is out now!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;support-for-room-version-8&quot;&gt;Support for Room Version 8&lt;&#x2F;h2&gt;
&lt;p&gt;This release of Synapse includes stable support for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3289&quot;&gt;Room Version 8&lt;&#x2F;a&gt;! Version 8 codifies a concept of &amp;quot;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3083&quot;&gt;restricted rooms&lt;&#x2F;a&gt;&amp;quot; which are private rooms joinable only by direct invitation or by being a member of other, designated Spaces &#x2F; rooms.&lt;&#x2F;p&gt;
&lt;p&gt;This means you can create a Matrix Space for your company, team, or guild, and instead of inviting people to the Space &lt;em&gt;and&lt;&#x2F;em&gt; directly to a bunch of private rooms, you can simply configure your private rooms such that membership in the Space &lt;em&gt;automatically&lt;&#x2F;em&gt; confers access to the private rooms.&lt;&#x2F;p&gt;
&lt;p&gt;This is a major improvement to access control in Matrix, and we can&#x27;t wait to use it ourselves.&lt;&#x2F;p&gt;
&lt;p&gt;Note that client support for managing restricted rooms is still forthcoming, and you&#x27;ll want to ensure that your users are on homeservers which support v8 before upgrading existing rooms. To ensure compatibility across federation, the default for newly created rooms remains at v6 for the time being.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything Else&lt;&#x2F;h2&gt;
&lt;p&gt;A few other items worth calling out:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Synapse can now optionally recycle PostgreSQL connections after a specified number of transactions (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10440&quot;&gt;#10440&lt;&#x2F;a&gt;), which may mitigate slow memory leaks in the database. Thanks to GitHub user hifi.&lt;&#x2F;li&gt;
&lt;li&gt;We have a whole new documentation page explaining &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.40&#x2F;development&#x2F;room-dag-concepts.html&quot;&gt;Room DAG Concepts&lt;&#x2F;a&gt; like depth, stream ordering, extremities, outliers, and state groups.&lt;&#x2F;li&gt;
&lt;li&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.40&#x2F;admin_api&#x2F;user_admin_api.html#list-accounts&quot;&gt;Admin API for listing accounts&lt;&#x2F;a&gt; now returns a &lt;code&gt;creation_ts&lt;&#x2F;code&gt; property indicating when an account was created. Thanks to work by dklimpel.&lt;&#x2F;li&gt;
&lt;li&gt;Synapse should better detect character encodings in URL previews thanks to a contribution by srividyut.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;In addition to further work towards implementing &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2716&quot;&gt;MSC2716: Incrementally Importing History into Existing Rooms&lt;&#x2F;a&gt;, we&#x27;ve landed support for:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2033&quot;&gt;MSC2033&lt;&#x2F;a&gt;: The &lt;code&gt;&#x2F;account&#x2F;whoami&lt;&#x2F;code&gt; endpoint now includes the &lt;code&gt;device_id&lt;&#x2F;code&gt; associated with the access token used to make the request.&lt;&#x2F;li&gt;
&lt;li&gt;(Experimental) &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3244&quot;&gt;MSC3244&lt;&#x2F;a&gt;: The &lt;code&gt;&#x2F;_matrix&#x2F;client&#x2F;r0&#x2F;capabilities&lt;&#x2F;code&gt; endpoint may include metadata about which room versions support which capabilities (like knocking on restricted joins).&lt;&#x2F;li&gt;
&lt;li&gt;(Experimental) &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2285&quot;&gt;MSC2285&lt;&#x2F;a&gt;: Clients may mark messages as read on the server without updating their externally visible read receipts, implemented by SimonBrandner.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;These are just the highlights; please see the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.40.0&#x2F;CHANGES.md&quot;&gt;Release Notes&lt;&#x2F;a&gt; for a complete list of changes in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;dklimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;hifi&quot;&gt;hifi&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;SimonBrandner&quot;&gt;SimonBrandner&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;srividyut&quot;&gt;srividyut&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.39.0 released</title>
		<published>2021-07-29T00:00:00+00:00</published>
		<updated>2021-07-29T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/07/29/synapse-1-39-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/07/29/synapse-1-39-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.39.0 is now available!&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ve done quite a bit of work this release on Synapse&#x27;s new interface for extension modules:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Synapse&#x27;s &lt;code&gt;account_validity&lt;&#x2F;code&gt; option has been extracted into a built-in &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.39&#x2F;modules.html#account-validity-callbacks&quot;&gt;extension module&lt;&#x2F;a&gt;. If your configuration previously enabled &lt;code&gt;account_validity&lt;&#x2F;code&gt;, it will continue working as before, but it is now easier to override and customize.&lt;&#x2F;li&gt;
&lt;li&gt;The third party event rules callbacks have also been &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.39&#x2F;modules.html#third-party-rules-callbacks&quot;&gt;experimentally ported&lt;&#x2F;a&gt; to the new module interface.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;We&#x27;ve also improved the Space Summary API to list all rooms which a user could join (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10298&quot;&gt;#10298&lt;&#x2F;a&gt;). This is especially important with the pending standardization of Room Version 8, which includes &lt;em&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3083&quot;&gt;MSC3083&lt;&#x2F;a&gt;: Restricting room membership based on membership in other rooms.&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;p&gt;MadLittleMods landed several pull requests on the path to implementing &lt;em&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2716&quot;&gt;MSC2716&lt;&#x2F;a&gt;: Incrementally importing history into existing rooms&lt;&#x2F;em&gt; (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10250&quot;&gt;#10250&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10276&quot;&gt;#10276&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;More than anything else, this release contains an absolutely enormous load of internal cleanup. For example:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;ShadowJonathan ran &lt;code&gt;pyupgrade&lt;&#x2F;code&gt; on the entire codebase, bringing it up to modern Py3.6+ conventions, then separately used &lt;code&gt;com2ann&lt;&#x2F;code&gt; to move us from legacy &lt;code&gt;# type: foo&lt;&#x2F;code&gt; type hints to more modern inline annotations.&lt;&#x2F;li&gt;
&lt;li&gt;We finished converting several integer columns in our database to bigint as a precautionary measure.&lt;&#x2F;li&gt;
&lt;li&gt;We&#x27;ve made innumerable improvements to our CI configuration; including moving completely to GitHub Actions.&lt;&#x2F;li&gt;
&lt;li&gt;Countless small improvements to performance, reliability, and error logging.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;But that&#x27;s not all! Synapse 1.39 also allows for setting credentials for HTTP proxy connections thanks to work by dklimpel; previously, Synapse was only able to provide authentication for HTTPS proxies.&lt;&#x2F;p&gt;
&lt;p&gt;Please see the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.39&#x2F;upgrade.html#upgrading-to-v1390&quot;&gt;Upgrade Notes&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.39.0&#x2F;CHANGES.md&quot;&gt;Release Notes&lt;&#x2F;a&gt; for a complete list of changes in this rele ase.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;andir&quot;&gt;andir&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;dklimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ilmari&quot;&gt;ilmari&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;LukeWalsh&quot;&gt;LukeWalsh&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;moritzdietz&quot;&gt;moritzdietz&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ShadowJonathan&quot;&gt;ShadowJonathan&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;xmunoz&quot;&gt;xmunoz&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Dendrite 0.4.1 Released</title>
		<published>2021-07-26T00:00:00+00:00</published>
		<updated>2021-07-26T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/07/26/dendrite-0-4-1-released/" type="text/html"/>
		<id>matrix.org/blog/2021/07/26/dendrite-0-4-1-released/</id>
		<content type="html">&lt;p&gt;It&#x27;s only been two weeks since Dendrite 0.4 landed, but there&#x27;s already a
significant new release with Dendrite 0.4.1 (it&#x27;s amazing how much work we
can do on Dendrite when not off chasing low-bandwidth and P2P Matrix!)&lt;&#x2F;p&gt;
&lt;p&gt;This release further improves memory performance and radically improves
state resolution performance (rumour has it that it&#x27;s a 10x speed-up).
Meanwhile, SS API sytest coverage is up to 91%(!!) and CS API is now at 63%.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;re going to try to keep the pressure up over the coming weeks - and once
sytest is at 100% coverage (and we&#x27;re not missing any big features which sytest
doesn&#x27;t cover yet) we&#x27;ll be declaring a 1.0 :)&lt;&#x2F;p&gt;
&lt;p&gt;If you&#x27;re running Dendrite, please upgrade.  If not, perhaps this would be a
good version to give it a try?  You can get it, as always from,
https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;dendrite&#x2F;releases&#x2F;tag&#x2F;v0.4.1.  The changelog
follows:&lt;&#x2F;p&gt;
&lt;h3 id=&quot;features&quot;&gt;Features&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;Support for room version 7 has been added&lt;&#x2F;li&gt;
&lt;li&gt;Key notary support is now more complete, allowing Dendrite to be used as a notary server for looking up signing keys&lt;&#x2F;li&gt;
&lt;li&gt;State resolution v2 performance has been optimised further by caching the create event, power levels and join rules in memory instead of parsing them repeatedly&lt;&#x2F;li&gt;
&lt;li&gt;The media API now handles cases where the maximum file size is configured to be less than 0 for unlimited size&lt;&#x2F;li&gt;
&lt;li&gt;The &lt;code&gt;initial_state&lt;&#x2F;code&gt; in a &lt;code&gt;&#x2F;createRoom&lt;&#x2F;code&gt; request is now respected when creating a room&lt;&#x2F;li&gt;
&lt;li&gt;Code paths for checking if servers are joined to rooms have been optimised significantly&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;fixes&quot;&gt;Fixes&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;A bug resulting in &lt;code&gt;cannot xref null state block with snapshot&lt;&#x2F;code&gt; during the new state storage migration has been fixed&lt;&#x2F;li&gt;
&lt;li&gt;Invites are now retired correctly when rejecting an invite from a remote server which is no longer reachable&lt;&#x2F;li&gt;
&lt;li&gt;The DNS cache &lt;code&gt;cache_lifetime&lt;&#x2F;code&gt; option is now handled correctly (contributed by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;S7evinK&quot;&gt;S7evinK&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Invalid events in a room join response are now dropped correctly, rather than failing the entire join&lt;&#x2F;li&gt;
&lt;li&gt;The &lt;code&gt;prev_state&lt;&#x2F;code&gt; of an event will no longer be populated incorrectly to the state of the current event&lt;&#x2F;li&gt;
&lt;li&gt;Receiving an invite to an unsupported room version will now correctly return the &lt;code&gt;M_UNSUPPORTED_ROOM_VERSION&lt;&#x2F;code&gt; error code instead of &lt;code&gt;M_BAD_JSON&lt;&#x2F;code&gt; (contributed by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;meenal06&quot;&gt;meenal06&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;-- Team Dendrite&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.38.0 released</title>
		<published>2021-07-13T00:00:00+00:00</published>
		<updated>2021-07-13T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/07/13/synapse-1-38-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/07/13/synapse-1-38-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.38.0 is out now!&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;NOTE:&lt;&#x2F;strong&gt; We released Synapse 1.38.1 on Thursday, July 22nd. It &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;10456&quot;&gt;mitigates&lt;&#x2F;a&gt; a client bug with Synapse 1.38.0&#x27;s smaller sync responses which prevented new Element Android sessions from successfully participating in encrypted conversations. Server administrators are strongly encouraged to upgrade.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h2 id=&quot;big-integers&quot;&gt;(Big) Integers&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse&#x27;s database schema used &lt;code&gt;integer&lt;&#x2F;code&gt; columns in a few places where values could potentially overflow a maximum value of 2&lt;sup&gt;31&lt;&#x2F;sup&gt;. One such column is &lt;code&gt;events.stream_ordering&lt;&#x2F;code&gt;, which surpassed 2&lt;sup&gt;31&lt;&#x2F;sup&gt; on matrix.org last week.&lt;&#x2F;p&gt;
&lt;p&gt;To prevent overflows, Synapse 1.38 will automatically convert several &lt;code&gt;integer&lt;&#x2F;code&gt; columns to &lt;code&gt;bigint&lt;&#x2F;code&gt; as a background update. While homeservers will function normally during this task, it could result in increased disk I&#x2F;O for several hours or days. Note that &lt;strong&gt;homeservers may need several gigabytes of free space&lt;&#x2F;strong&gt; to successfully rebuild associated database indexes and complete the upgrade.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.38&#x2F;upgrade.html#upgrading-to-v1380&quot;&gt;upgrade notes&lt;&#x2F;a&gt; for more details.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;expiring-caches&quot;&gt;Expiring Caches&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse has a new configuration option, &lt;code&gt;caches.expiry_time&lt;&#x2F;code&gt;, which can be set to enable evicting items from caches if they go too long without being accessed. This helps servers reclaim memory used by large yet infrequently used caches.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;smaller-sync-responses&quot;&gt;Smaller Sync Responses&lt;&#x2F;h2&gt;
&lt;p&gt;The response to &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; now omits optional keys when they would otherwise be empty. This can significantly reduce the size of incremental syncs, as demonstrated in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6579&quot;&gt;#6579&lt;&#x2F;a&gt;. Thanks to deepbluev7 for  initially submitting this in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9919&quot;&gt;#9919&lt;&#x2F;a&gt;, which made it into this release via &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10214&quot;&gt;#10214&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything Else&lt;&#x2F;h2&gt;
&lt;p&gt;A few other items worth calling out:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;This release includes an experimental implementation of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2918&quot;&gt;MSC2918: Refresh tokens&lt;&#x2F;a&gt;, which adds initial support for complementary access &#x2F; refresh tokens in line with OAuth best practices (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9450&quot;&gt;#9450&lt;&#x2F;a&gt;).&lt;&#x2F;li&gt;
&lt;li&gt;Synapse now &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10290&quot;&gt;ships a script&lt;&#x2F;a&gt; to review recently registered accounts, which can be useful in cleaning up servers in the wake of malicious, automated registrations like we witnessed during last month&#x27;s &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2021&#x2F;06&#x2F;30&#x2F;security-update-synapse-1-37-1-released&quot;&gt;spam attack&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;We&#x27;ve also fixed a few rough edges (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10263&quot;&gt;#10263&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10303&quot;&gt;#10303&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10336&quot;&gt;#10336&lt;&#x2F;a&gt;) in the spam mitigations from 1.37.1, and would encourage you to update.&lt;&#x2F;li&gt;
&lt;li&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.38&#x2F;admin_api&#x2F;user_admin_api.html&quot;&gt;Admin API for querying user information&lt;&#x2F;a&gt; now includes information about a user&#x27;s SSO identities in its response.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;These are just the highlights; please see the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.38&#x2F;upgrade.html#upgrading-to-v1380&quot;&gt;Upgrade Notes&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.38.0&#x2F;CHANGES.md&quot;&gt;Release Notes&lt;&#x2F;a&gt; for a complete list of changes in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;deepbluev7&quot;&gt;deepbluev7&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;dklimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;fkr&quot;&gt;fkr&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;sideshowbarker&quot;&gt;sideshowbarker&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Dendrite 0.4.0 Released</title>
		<published>2021-07-12T00:00:00+00:00</published>
		<updated>2021-07-12T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/07/12/dendrite-0-4-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/07/12/dendrite-0-4-0-released/</id>
		<content type="html">&lt;p&gt;After quite a significant gap between releases — version 0.3.11 was released at the beginning of March — we&#x27;re happy to finally announce the release of Dendrite 0.4.0 today!&lt;&#x2F;p&gt;
&lt;p&gt;The full changelog for the release is &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;dendrite&#x2F;releases&#x2F;tag&#x2F;v0.4.0&quot;&gt;available on GitHub&lt;&#x2F;a&gt;, but we wanted to take the opportunity to talk a little about some of the changes that have gone into this release.&lt;&#x2F;p&gt;
&lt;p&gt;Recently our release cadence for Dendrite has slowed as we have spent more time within the team working on &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;pinecone&quot;&gt;Pinecone&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;lb&quot;&gt;Low Bandwidth Matrix&lt;&#x2F;a&gt;. These are major areas of research for us which we hope will unlock a number of new opportunities within the Matrix ecosystem, allowing us to &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2021&#x2F;05&#x2F;06&#x2F;introducing-the-pinecone-overlay-network&quot;&gt;build on Matrix anywhere&lt;&#x2F;a&gt; and to &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2021&#x2F;06&#x2F;10&#x2F;low-bandwidth-matrix-an-implementation-guide&quot;&gt;reduce the protocol-level footprint&lt;&#x2F;a&gt;. However, Dendrite has not been forgotten amidst the excitement and we will be spending more time working on Dendrite again in the coming months.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;state-storage&quot;&gt;State storage&lt;&#x2F;h3&gt;
&lt;p&gt;One of the major features in v0.4.0 is that we&#x27;ve introduced newly-refactored state storage in the roomserver database. The goal here is to make state storage significantly more efficient by ensuring that we deduplicate state  blocks and snapshots wherever we can. By ensuring that all state blocks and snapshots are ordered strictly, and by enforcing uniqueness constraints on the hashes of the blocks&#x2F;snapshots, we&#x27;ve been able to achieve this.&lt;&#x2F;p&gt;
&lt;p&gt;This was largely spurred on by watching &lt;code&gt;dendrite.matrix.org&lt;&#x2F;code&gt; consuming a rather alarming amount of disk space on a daily basis. In this particular instance, moving to the new state storage resulted in a 15x improvement on disk utilisation for state blocks and a further 2x improvement for state snapshot references immediately after the migration, and the growth rate of the database has slowed substantially since. &lt;&#x2F;p&gt;
&lt;p&gt;Ensuring that we don&#x27;t waste disk space is one of the most important factors in ensuring that Dendrite operates well at any scale — future datacentre deployments supporting many users will find storage overheads decreased and small&#x2F;embedded single-user deployments (such as P2P, on mobile devices or in the browser) will fit much more effectively onto resource-constrained targets.&lt;&#x2F;p&gt;
&lt;p&gt;After upgrading to v0.4.0, Dendrite will run an automatic migration to update your homeserver to the new state storage format. This might take a while on larger databases so please expect some downtime. &lt;&#x2F;p&gt;
&lt;h3 id=&quot;optimisations&quot;&gt;Optimisations&lt;&#x2F;h3&gt;
&lt;p&gt;We&#x27;ve continued to squeeze further optimisations into the federation and state resolution code, aiming to reduce the amount of CPU burn and memory utilisation. Some of the feedback that we receive most often from those that have been experimenting with the Dendrite betas is around the sudden spikes in resource usage, especially when joined to large rooms.&lt;&#x2F;p&gt;
&lt;p&gt;The bulk of this resource usage comes either from attempting to reconcile missing events or running state resolution in rooms with lots of members, as potentially large state sets of events need to be brought into memory in order to do so. We&#x27;ve introduced some transaction-level caches for dealing with missing auth&#x2F;prev events to reduce the memory pressure and we&#x27;ve also tweaked the caching around around &lt;code&gt;&#x2F;get_missing_events&lt;&#x2F;code&gt; to ensure we don&#x27;t duplicate any state events in memory.&lt;&#x2F;p&gt;
&lt;p&gt;Resource spikes aren&#x27;t completely eliminated but this should smooth out CPU and memory utilisation significantly. In the case of &lt;code&gt;dendrite.matrix.org&lt;&#x2F;code&gt;,  which is joined to some 6500 rooms at present, memory utilisation of the Dendrite process typically sits around 1.5GB at present. &lt;&#x2F;p&gt;
&lt;p&gt;State Resolution v2 has also seen further optimisations in the power-level checking, which should reduce CPU usage even more.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;bridges&quot;&gt;Bridges&lt;&#x2F;h3&gt;
&lt;p&gt;Thanks to Half-Shot&#x27;s perseverance and contributions, we&#x27;ve merged a couple PRs and worked on some further fixes for getting Application Services working correctly in Dendrite. Whilst not entirely feature-complete and with a number of features still to go, enough support is now present to support basic bridging functionality.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ve done quite a bit of preliminary testing with &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-appservice-irc&quot;&gt;matrix-appservice-irc&lt;&#x2F;a&gt; and have also heard a number of success stories from the community with &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;tulir&#x2F;mautrix-whatsapp&quot;&gt;mautrix-whatsapp&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;tulir&#x2F;mautrix-telegram&quot;&gt;mautrix-telegram&lt;&#x2F;a&gt;. Others may work too — let us know what you find!&lt;&#x2F;p&gt;
&lt;h3 id=&quot;bug-hunting&quot;&gt;Bug-hunting&lt;&#x2F;h3&gt;
&lt;p&gt;A number of bugs in various places (including the roomserver, federation API and media API) which could cause Dendrite to crash have also been fixed.  Some of these have been contributed by the community in pull requests, so we extend our thanks to anyone who has submitted a fix to the project.&lt;&#x2F;p&gt;
&lt;p&gt;A special mention also goes to Jakob Varmose Bentzen for reporting a security issue to us around the legacy &lt;code&gt;&#x2F;v1&#x2F;register&lt;&#x2F;code&gt; endpoint, where a flaw in the legacy shared secret registration allowed malicious users to create accounts. We&#x27;ve since removed this legacy endpoint and the vulnerability is now fixed. &lt;&#x2F;p&gt;
&lt;h3 id=&quot;what-s-next&quot;&gt;What&#x27;s next&lt;&#x2F;h3&gt;
&lt;p&gt;There are still a number of missing user-facing features which we will be working on over the coming months, as well as some architectural issues that we will look to address.&lt;&#x2F;p&gt;
&lt;p&gt;A notable area of work involves attempting to remove the dependency on Kafka for polylith deployments. Kafka is very resource-heavy in operation and somewhat limits us to the types of interactions that we can perform between components. It&#x27;s also very difficult to manage retention correctly, in the interests of not endlessly consuming disk space here either.&lt;&#x2F;p&gt;
&lt;p&gt;As usual, Dendrite is still considered beta so you may not want to rely on it for production systems, although it should be stable enough to experiment with. If you find any bugs or anything that doesn&#x27;t look right, please let us know:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;matrix.to&#x2F;#&#x2F;#dendrite:matrix.org&quot;&gt;#dendrite:matrix.org&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;dendrite&#x2F;issues&quot;&gt;GitHub Issues&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;We&#x27;re also open to contributions, so don&#x27;t be afraid to open pull requests. Finally, thanks for your continued support!&lt;&#x2F;p&gt;
&lt;p&gt;— Team Dendrite&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Security update: Synapse 1.37.1 released</title>
		<published>2021-06-30T00:00:00+00:00</published>
		<updated>2021-06-30T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/06/30/security-update-synapse-1-37-1-released/" type="text/html"/>
		<id>matrix.org/blog/2021/06/30/security-update-synapse-1-37-1-released/</id>
		<content type="html">&lt;p&gt;Hi all,&lt;&#x2F;p&gt;
&lt;p&gt;Over the last few days we&#x27;ve seen a distributed spam attack across the public Matrix network, where large numbers of spambots have been registered across servers with open registration and then used to flood abusive traffic into rooms such as Matrix HQ.&lt;&#x2F;p&gt;
&lt;p&gt;The spam itself has been handled by &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;moderation#banning-servers&quot;&gt;temporarily banning the abused servers&lt;&#x2F;a&gt;. However, on Monday and Tuesday the volume of traffic triggered performance problems for the homeservers participating in targeted rooms (e.g. memory explosions, or very delayed federation).  This was due to a combination of factors, but one of the most important ones was Synapse issue &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;9490&quot;&gt;#9490&lt;&#x2F;a&gt;: that one busy room could cause head-of-line blocking, starving your server from processing events in other rooms, causing all traffic to fall behind.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;re happy to say that Synapse 1.37.1 &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10272&quot;&gt;fixes this&lt;&#x2F;a&gt; and we now process inbound federation traffic asynchronously, ensuring that one busy room won&#x27;t impact others.  First impressions are that this has significantly improved federation performance and end-to-end encryption stability — for instance, new E2EE keys from remote users for a given conversation should arrive immediately rather than being blocked behind other traffic.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Please upgrade to Synapse 1.37.1 as soon as possible, in order to increase resilience to any other traffic spikes.&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Also, we highly recommend that you disable open registration or, if you keep it enabled, use SSO or require email validation to avoid abusive signups. Empirically adding a CAPTCHA is not enough. Otherwise you may find your server blocked all over the place if it is hosting spambots.&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Finally, if your server has open registration, PLEASE check whether spambots have been registered on your server, and deactivate them.  Once deactivated, you will need to contact abuse@matrix.org to request that blocks on your server are removed&lt;&#x2F;strong&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Your best bet for spotting and neutralising dormant spambots is to review signups on your homeserver over the past 3-5 days and deactivate suspicious users. We do not recommend relying solely on lists of suspicious IP addresses for this task, as the distributed nature of the attack means any such list is likely to be incomplete or include shared proxies which may also catch legitimate users.&lt;&#x2F;p&gt;
&lt;p&gt;To ease review, we&#x27;re working on an auditing script in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10290&quot;&gt;#10290&lt;&#x2F;a&gt;; feedback on whether this is useful would be appreciated. Problematic accounts can then be dealt with using the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.37&#x2F;admin_api&#x2F;user_admin_api.html#deactivate-account&quot;&gt;Deactivate Account Admin API&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Meanwhile, over to Dan for the Synapse 1.37 release notes.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;synapse-1-37-release-announcement&quot;&gt;Synapse 1.37 Release Announcement&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse 1.37 is now available!&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;**Note: ** The legacy APIs for Spam Checker extension modules are now considered deprecated and targeted for removal in August. Please see &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.37&#x2F;modules.html#porting-an-existing-module-that-uses-the-old-interface&quot;&gt;the module docs&lt;&#x2F;a&gt; for information on updating.&lt;&#x2F;p&gt;
&lt;p&gt;This release also removes Synapse&#x27;s built-in support for the obsolete ACMEv1 protocol for automatically obtaining TLS certificates. Server administrators should place Synapse behind a &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.37&#x2F;reverse_proxy.html&quot;&gt;reverse proxy&lt;&#x2F;a&gt; for TLS termination, or switch to a standalone ACMEv2 client like &lt;a href=&quot;https:&#x2F;&#x2F;certbot.eff.org&#x2F;&quot;&gt;certbot&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h3 id=&quot;knock-knock&quot;&gt;Knock, knock?&lt;&#x2F;h3&gt;
&lt;p&gt;After nearly 18 months and 129 commits, Synapse now includes support for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2403&quot;&gt;MSC2403: Add &amp;quot;knock&amp;quot; feature&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;unstable&#x2F;rooms&#x2F;v7&#x2F;&quot;&gt;Room Version 7&lt;&#x2F;a&gt;! This feature allows users to directly request admittance to private rooms, without having to track down an invitation out-of-band. One caveat: Though the server-side foundation is there, knocking is not &lt;em&gt;yet&lt;&#x2F;em&gt; implemented in clients.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;a-unified-interface-for-extension-modules&quot;&gt;A Unified Interface for Extension Modules&lt;&#x2F;h3&gt;
&lt;p&gt;Third party modules can customize Synapse&#x27;s behavior, implementing things like bespoke media storage providers or user event filters. However, Synapse previously lacked a unified means of enumerating and configuring third-party modules. That changes with Synapse 1.37, which introduces a new, &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.37&#x2F;modules.html&quot;&gt;generic interface for extensions&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;This new interface consolidates configuration into one place, allowing for more flexibility and granularity by explicitly registering callbacks with specific hooks. You can learn more about the new module API in the docs linked above, or in &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;playlist?list=PLl5dnxRMP1hULbP8MYk2noPKFCFyg-SHK&quot;&gt;Matrix Live&lt;&#x2F;a&gt; S6E29, due out this Friday, July 2nd.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;safer-reauthentication&quot;&gt;Safer Reauthentication&lt;&#x2F;h3&gt;
&lt;p&gt;User-interactive authentication (&amp;quot;UIA&amp;quot;) is required for potentially dangerous actions like removing devices or uploading cross-signing keys. However, Synapse can optionally be configured to provide a brief grace period such that users are not prompted to re-authenticate on actions taken shortly after logging in or otherwise authenticating.&lt;&#x2F;p&gt;
&lt;p&gt;This improves user experience, but also creates risks for clients which rely on UIA as a guard against actions like account deactivation. Synapse 1.37 protects users by exempting especially risky actions from the grace period. See &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10184&quot;&gt;#10184&lt;&#x2F;a&gt; for details.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;smaller-improvements&quot;&gt;Smaller Improvements&lt;&#x2F;h3&gt;
&lt;p&gt;We&#x27;ve landed a number of smaller improvements which, together, make Synapse more responsive and reliable. We now:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;More efficiently respond to key requests, preventing excessive load (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10221&quot;&gt;#10221&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10144&quot;&gt;#10144&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Render docs for each &lt;code&gt;vX.Y&lt;&#x2F;code&gt; Synapse release, starting with v1.37 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10198&quot;&gt;#10198&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ensure that log entries from failures during early startup are not lost (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10191&quot;&gt;#10191&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Have a notion of database schema &amp;quot;compatibility versions&amp;quot;, allowing for more graceful upgrades and downgrades of Synapse (&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.37&#x2F;development&#x2F;database_schema.html#synapse-schema-versions&quot;&gt;docs&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;We&#x27;ve also resolved two bugs which could cause sync requests to immediately return with empty payloads (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8518&quot;&gt;#8518&lt;&#x2F;a&gt;), producing a tight loop of repeated network requests.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;everything-else&quot;&gt;Everything Else&lt;&#x2F;h3&gt;
&lt;p&gt;Lastly, we&#x27;ve merged an experimental implementation of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2716&quot;&gt;MSC2716: Incrementally importing history into existing rooms&lt;&#x2F;a&gt; (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9247&quot;&gt;#9247&lt;&#x2F;a&gt;) as part of Element&#x27;s work to fully &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2020&#x2F;09&#x2F;30&#x2F;welcoming-gitter-to-matrix&quot;&gt;integrate Gitter into Matrix&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;These are just the highlights; please see the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.37.1&#x2F;UPGRADE.rst#upgrading-to-v1370&quot;&gt;Upgrade Information&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.37.1&#x2F;CHANGES.md&quot;&gt;Release Notes&lt;&#x2F;a&gt; for a complete list of changes in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;aaronraimist&quot;&gt;aaronraimist&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Bubu&quot;&gt;Bubu&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;dklimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jkanefendt&quot;&gt;jkanefendt&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;lukaslihotzki&quot;&gt;lukaslihotzki&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mikure&quot;&gt;mikure&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Sorunome&quot;&gt;Sorunome&lt;&#x2F;a&gt;,&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.36.0 released</title>
		<published>2021-06-15T11:20:40+00:00</published>
		<updated>2021-06-14T23:14:35+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/06/15/synapse-1-36-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/06/15/synapse-1-36-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.36.0 is out, and it&#x27;s a big one!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;room-join-memory-improvements&quot;&gt;Room Join Memory Improvements&lt;&#x2F;h2&gt;
&lt;p&gt;We did it! Synapse no longer experiences a memory spike when joining large &#x2F; complex rooms.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2021-06-15-synapse-1.36-join-memory.png&quot; alt=&quot;Memory usage graph for Synapse 1.33 and 1.36&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;These improvements mainly arise from processing join responses incrementally, rather than trying to load everything into memory at once. However, realizing these gains involved a fair bit of rewriting, as the entire processing pipeline had to work incrementally, and with appropriately sized batches, to avoid downstream bottlenecks. You can hear more about our original plans for this work in last month&#x27;s Matrix Live: &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=694VuhmVmfo&quot;&gt;S6E23 — Dan and Erik talk about Synapse&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;presence-improvements&quot;&gt;Presence Improvements&lt;&#x2F;h2&gt;
&lt;p&gt;Running presence on a single worker process is now expected to work correctly. This feature first debuted in &lt;a href=&quot;&#x2F;blog&#x2F;2021&#x2F;05&#x2F;05&#x2F;synapse-1-33-0-released&quot;&gt;Synapse 1.33&lt;&#x2F;a&gt;, but a few bugs cropped up which could lead to presence state becoming outdated. With &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10149&quot;&gt;#10149&lt;&#x2F;a&gt; merged, we believe the last of these issues to be resolved.&lt;&#x2F;p&gt;
&lt;p&gt;We had also noticed a recent increase in presence load on federation workers; this was ultimately tracked to two bugs, both fixed in this release: We were processing local presence via federation workers (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10163&quot;&gt;#10163&lt;&#x2F;a&gt;) and we were occasionally sending duplicate presence updates (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10165&quot;&gt;#10165)&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;With both issues fixed, outgoing federation load has returned to normal levels:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2021-06-15-synapse-1.36-fed-sender-tx-rate.png&quot; alt=&quot;Graph of outgoing federation transaction rate ranging from around 75 Hz down to under 25 Hz&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;(Thank you to David Mehren for this graph from issue &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;10153&quot;&gt;#10153&lt;&#x2F;a&gt;)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything Else&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse now has two new Admin APIs for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.36.0&#x2F;docs&#x2F;admin_api&#x2F;media_admin_api.md#unprotecting-media-from-being-quarantined&quot;&gt;unprotecting&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.36.0&#x2F;docs&#x2F;admin_api&#x2F;media_admin_api.md#remove-media-from-quarantine-by-id&quot;&gt;removing&lt;&#x2F;a&gt; media from quarantine, thanks to contributions by dklimpel.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse now implements the stable &lt;code&gt;&#x2F;_matrix&#x2F;client&#x2F;r0&#x2F;rooms&#x2F;{roomId}&#x2F;aliases&lt;&#x2F;code&gt; endpoint originally introduced by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2432&quot;&gt;MSC2432&lt;&#x2F;a&gt;, and, thanks to contributions by govynnus, makes the &lt;code&gt;reason&lt;&#x2F;code&gt; and &lt;code&gt;score&lt;&#x2F;code&gt; fields of event reports optional per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2414&quot;&gt;MSC2414&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;These are just the highlights; please see the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.36.0&#x2F;CHANGES.md&quot;&gt;Release Notes&lt;&#x2F;a&gt; for a complete list of changes in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;14mRh4X0r&quot;&gt;14mRh4X0r&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;aaronraimist&quot;&gt;aaronraimist&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;bradtgmurray&quot;&gt;bradtgmurray&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;crcastle&quot;&gt;crcastle&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;dklimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;govynnus&quot;&gt;govynnus&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;RhnSharma&quot;&gt;RhnSharma&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.35.0 released</title>
		<published>2021-06-01T00:00:00+00:00</published>
		<updated>2021-06-01T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/06/01/synapse-1-35-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/06/01/synapse-1-35-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.35.0 is out! This release focused on improving internals as we drive toward better memory performance during room joins, but more on that below.&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Update:&lt;&#x2F;strong&gt; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.35.1&quot;&gt;Synapse 1.35.1&lt;&#x2F;a&gt; was published on Thursday, June 3rd. It resolves a bug (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;10109&quot;&gt;#10109&lt;&#x2F;a&gt;) which mistakenly listed invite-only rooms in the Spaces summary.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;d also like to call the attention of client developers to a deprecation: The unstable prefixes used during development of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;blob&#x2F;master&#x2F;proposals&#x2F;2858-Multiple-SSO-Identity-Providers.md#unstable-prefix&quot;&gt;MSC2858: Multiple SSO Identity Providers&lt;&#x2F;a&gt; will be removed from Synapse 1.38, due out in August. Please ensure your client supports the stable identifiers for this feature.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h2 id=&quot;spaces-on-by-default&quot;&gt;Spaces: On by Default&lt;&#x2F;h2&gt;
&lt;p&gt;Following the successful release of &lt;a href=&quot;&#x2F;blog&#x2F;2021&#x2F;05&#x2F;17&#x2F;synapse-1-34-0-released&quot;&gt;Synapse 1.34&lt;&#x2F;a&gt;, the experimental Spaces flag is now enabled by default. If you had manually enabled the &lt;code&gt;experimental_features: { spaces_enabled: true }&lt;&#x2F;code&gt; flag in your homeserver configuration, you may now remove it.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;bug-squashing&quot;&gt;Bug Squashing&lt;&#x2F;h2&gt;
&lt;p&gt;This release of Synapse fixes an issue which could cause federated room joins to fail when the join response exceeded a size limit which was too low (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10082&quot;&gt;#10082&lt;&#x2F;a&gt;). We&#x27;ve also improved what Synapse logs when it drops a connection in similar circumstances (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10091&quot;&gt;#10091&lt;&#x2F;a&gt;), which should aid diagnosis if a similar issue were to arise in the future.&lt;&#x2F;p&gt;
&lt;p&gt;GitHub user thermaq contributed a fix (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10014&quot;&gt;#10014&lt;&#x2F;a&gt;) for a bug  which could cause user presence state to become stale.&lt;&#x2F;p&gt;
&lt;p&gt;Lastly our OpenTracing support now allows for profiling end-to-end performance on a per-user basis (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9978&quot;&gt;#9978&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;h2 id=&quot;an-update-on-room-joins&quot;&gt;An Update on Room Joins&lt;&#x2F;h2&gt;
&lt;p&gt;We&#x27;ve been hammering away at shrinking Synapse&#x27;s memory footprint when joining large &#x2F; complex rooms, and while we&#x27;re not there yet, the end is in sight! In particular, this release includes many internal refactorings, including using &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;ijson&#x2F;&quot;&gt;ijson&lt;&#x2F;a&gt; to parse the JSON response to &lt;code&gt;&#x2F;send_join&lt;&#x2F;code&gt; (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9958&quot;&gt;#9958&lt;&#x2F;a&gt;), clearing the way for substantial improvements.&lt;&#x2F;p&gt;
&lt;p&gt;Memory usage still spikes because we&#x27;re effectively doing the same work with a different library, but ijson&#x27;s design allows for iterative parsing. This will pay dividends once we modify the code downstream of &lt;code&gt;&#x2F;send_join&lt;&#x2F;code&gt; to take advantage of it.&lt;&#x2F;p&gt;
&lt;p&gt;Concretely, Erik Johnston has an experimental branch of Synapse which completely eliminates the memory spike:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2021-06-01-synapse-1.35-join-memory.png&quot; alt=&quot;Memory usage graph for Synapse 1.33, 1.35, and an experimental branch&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The remaining work is centered on splitting that branch into self-contained, reviewable pull requests, like a rewrite of the Synapse Keyring class (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;10035&quot;&gt;#10035&lt;&#x2F;a&gt;). After that&#x27;s merged, we&#x27;ll need to make one further change to properly batch up work, at which point we should attain the efficiency gains from Erik&#x27;s experiment.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything Else&lt;&#x2F;h2&gt;
&lt;p&gt;GitHub user savyajha contributed a security hardened systemd unit file which effectively sandboxes Synapse (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9803&quot;&gt;#9803&lt;&#x2F;a&gt;). While not enabled by default, we&#x27;d encourage security conscious users to review the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.35.0&#x2F;contrib&#x2F;systemd&#x2F;override-hardened.conf&quot;&gt;example file&lt;&#x2F;a&gt; and associated &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.35.0&#x2F;docs&#x2F;systemd-with-workers&#x2F;README.md#hardening&quot;&gt;documentation&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Please see the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.35.0&#x2F;CHANGES.md&quot;&gt;Release Notes&lt;&#x2F;a&gt; for a complete list of changes in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;dklimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jerinjtitus&quot;&gt;jerinjtitus&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;junquera&quot;&gt;junquera&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;lonyeon&quot;&gt;lonyeon&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;savyajha&quot;&gt;savyajha&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;thermaq&quot;&gt;thermaq&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.34.0 released</title>
		<published>2021-05-17T16:45:18+00:00</published>
		<updated>2021-05-17T15:13:26+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/05/17/synapse-1-34-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/05/17/synapse-1-34-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.34.0 is now available, and it&#x27;s loaded with new features and performance improvements.&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;&#x2F;strong&gt; This release deprecates and replaces the &lt;code&gt;room_invite_state_types&lt;&#x2F;code&gt; configuration option. If you&#x27;ve customized that for your homeserver, please review the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.34.0&#x2F;UPGRADE.rst#upgrading-to-v1340&quot;&gt;Upgrade Notes&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ve also marked the v1 room deletion Admin API as deprecated. Instead of sending a &lt;code&gt;POST&lt;&#x2F;code&gt; to a path ending in &lt;code&gt;&#x2F;delete&lt;&#x2F;code&gt;, administrators are encourage to instead send an HTTP &lt;code&gt;DELETE&lt;&#x2F;code&gt; to &lt;code&gt;&#x2F;_synapse&#x2F;admin&#x2F;v1&#x2F;rooms&#x2F;&amp;lt;room_id&amp;gt;&lt;&#x2F;code&gt;. Thanks to ThibF for implementing this (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9889&quot;&gt;#9889&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;h2 id=&quot;spaces&quot;&gt;Spaces&lt;&#x2F;h2&gt;
&lt;p&gt;The highlight of this release is support for Spaces, now that &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;1772&quot;&gt;MSC1772: Matrix Spaces&lt;&#x2F;a&gt; has merged into the Matrix spec!&lt;&#x2F;p&gt;
&lt;p&gt;Synapse also has support for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2946&quot;&gt;MSC2946: Spaces Summary&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3083&quot;&gt;MSC3083: Restricting room membership based on space membership&lt;&#x2F;a&gt;, but these are off by default as they&#x27;re still under development. To enable these experimental MSCs, set &lt;code&gt;experimental_features: { spaces_enabled: true }&lt;&#x2F;code&gt; in your homeserver configuration. These &lt;em&gt;are&lt;&#x2F;em&gt; enabled on the matrix.org homeserver, and we encourage you to experiment with Spaces there and let us know in the &lt;a href=&quot;https:&#x2F;&#x2F;matrix.to&#x2F;#&#x2F;#spaces-feedback:matrix.org&quot;&gt;Spaces Feedback Room&lt;&#x2F;a&gt; if you encounter any issues.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;memory-and-caching&quot;&gt;Memory and Caching&lt;&#x2F;h2&gt;
&lt;p&gt;Memory consumption and caching have been a major focus of the Synapse team this quarter, and we&#x27;ve made significant strides:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Synapse has a new &lt;code&gt;gc_min_interval&lt;&#x2F;code&gt; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.34.0&#x2F;docs&#x2F;sample_config.yaml#L155-L163&quot;&gt;configuration option&lt;&#x2F;a&gt; with reasonable defaults to prevent Python&#x27;s garbage collector from running too frequently and thrashing when a large homeserver has its collection thresholds set too low.&lt;&#x2F;li&gt;
&lt;li&gt;Synapse will report &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9882&quot;&gt;memory allocation stats&lt;&#x2F;a&gt; to Prometheus when using jemalloc.&lt;&#x2F;li&gt;
&lt;li&gt;Synapse will also &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9904&quot;&gt;measure Redis cache response times&lt;&#x2F;a&gt; and report those to Prometheus.&lt;&#x2F;li&gt;
&lt;li&gt;For debugging, Synapse can &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9881&quot;&gt;optionally track&lt;&#x2F;a&gt; the memory use of each LruCache.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;We have a few more tricks up our sleeves; to learn more about how we&#x27;re planning to improve the memory cost of joining large rooms, check out last week&#x27;s &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=694VuhmVmfo&quot;&gt;Matrix Live&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;other-fixes-and-improvements&quot;&gt;Other Fixes and Improvements&lt;&#x2F;h2&gt;
&lt;p&gt;We&#x27;ve also landed significant improvements to:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Sending events when Redis is available (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;9905&quot;&gt;#9905&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;9950&quot;&gt;#9950&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;9951&quot;&gt;#9951&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Joining large rooms when presence is enabled (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;9910&quot;&gt;#9910&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;9916&quot;&gt;#9916&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Backfilling history in large rooms (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;9935&quot;&gt;#9935&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;...and fixed bugs that:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Prevented cross-account &lt;code&gt;m.room_key_request&lt;&#x2F;code&gt; messages from being delivered (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;9961&quot;&gt;#9961&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;9965&quot;&gt;#9965&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Incorrectly applied room creation &#x2F; invitation rate limits to users and app services which &lt;em&gt;should&lt;&#x2F;em&gt; have been exempt (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;9968&quot;&gt;#9968&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;The health check on our Docker images now responds more quickly upon successful startup thanks to improvements by maquis196 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9913&quot;&gt;#9913&lt;&#x2F;a&gt;), and for especially privacy-conscious homeservers, device names can now be shielded over federation thanks to a contribution by aaronraimist (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9945&quot;&gt;#9945&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;h2 id=&quot;new-access-token-format&quot;&gt;New Access Token Format&lt;&#x2F;h2&gt;
&lt;p&gt;Inspired by &lt;a href=&quot;https:&#x2F;&#x2F;github.blog&#x2F;2021-04-05-behind-githubs-new-authentication-token-formats&#x2F;&quot;&gt;GitHub&#x27;s new token format&lt;&#x2F;a&gt;, we&#x27;ve &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;5588&quot;&gt;restructured Synapse&#x27;s access token format&lt;&#x2F;a&gt; to follow the pattern:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#1e1e1e;color:#dcdcdc;&quot;&gt;&lt;code&gt;&lt;span&gt;syt_&amp;lt;UnpaddedBase64MXIDLocalPart&amp;gt;_&amp;lt;20RandomLetters&amp;gt;_&amp;lt;CRC32&amp;gt;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;So a token for &lt;code&gt;@example:matrix.org&lt;&#x2F;code&gt; might look like:&lt;&#x2F;p&gt;
&lt;pre style=&quot;background-color:#1e1e1e;color:#dcdcdc;&quot;&gt;&lt;code&gt;&lt;span&gt;syt_ZXhhbXBsZQ_KfJetOcLWEKCvYdKnQLV_0i3W80
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;p&gt;Existing tokens remain valid; this is just for new tokens. We hope the new format reduces network overhead while also making it easier identify misplaced tokens in logs and repositories.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything Else&lt;&#x2F;h2&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.34.0&#x2F;UPGRADE.rst#upgrading-to-v1340&quot;&gt;Upgrading Instructions&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.34.0&#x2F;CHANGES.md&quot;&gt;Release Notes&lt;&#x2F;a&gt; for further information on this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;aaronraimist&quot;&gt;aaronraimist&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;maquis196&quot;&gt;maquis196&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ThibF&quot;&gt;ThibF&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.33.2 released</title>
		<published>2021-05-11T23:53:39+00:00</published>
		<updated>2021-05-11T23:53:39+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/05/11/synapse-1-33-2-released/" type="text/html"/>
		<id>matrix.org/blog/2021/05/11/synapse-1-33-2-released/</id>
		<content type="html">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.33.2&quot;&gt;Synapse 1.33.2&lt;&#x2F;a&gt; is now available.&lt;&#x2F;p&gt;
&lt;p&gt;This release fixes a denial of service issue (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;security&#x2F;advisories&#x2F;GHSA-x345-32rc-8h85&quot;&gt;CVE-2021-29471&lt;&#x2F;a&gt;) where evaluating specially crafted push rules could lead to excessive CPU load. Server administrators are encouraged to upgrade.&lt;&#x2F;p&gt;
&lt;p&gt;To learn more about Synapse 1.33, see last week&#x27;s &lt;a href=&quot;&#x2F;blog&#x2F;2021&#x2F;05&#x2F;05&#x2F;synapse-1-33-0-released&quot;&gt;release announcement&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.33.0 released</title>
		<published>2021-05-05T00:00:00+00:00</published>
		<updated>2021-05-05T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/05/05/synapse-1-33-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/05/05/synapse-1-33-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.33.0 is out! Three main items of note:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;We plan to release &lt;del&gt;1.33.1&lt;&#x2F;del&gt; &lt;ins&gt;1.33.2&lt;&#x2F;ins&gt; with a &lt;strong&gt;low severity security fix&lt;&#x2F;strong&gt; on Tuesday next week, and we&#x27;re interested in your thoughts on decoupling routine security fixes from normal releases. Please weigh in on &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;discussions&#x2F;9914&quot;&gt;this discussion&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;Note:&lt;&#x2F;strong&gt; We shipped 1.33.1 with a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;9936&quot;&gt;small dependency fix&lt;&#x2F;a&gt; when installing Synapse via &lt;code&gt;pip&lt;&#x2F;code&gt;. A security release is still planned for Tuesday, which will now be 1.33.2.&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;If you use Synapse&#x27;s optional account revalidation feature (see &lt;code&gt;account_validity&lt;&#x2F;code&gt; in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.33.0&#x2F;docs&#x2F;sample_config.yaml#L1373-L1455&quot;&gt;config.yaml&lt;&#x2F;a&gt;), you&#x27;ll want to review the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.33.0&#x2F;UPGRADE.rst#upgrading-to-v1330&quot;&gt;upgrading instructions&lt;&#x2F;a&gt; as we&#x27;ve made a few small changes to the email templates it uses.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Synapse now has &lt;em&gt;very&lt;&#x2F;em&gt; experimental support for moving presence off of the main process. This has not yet been extensively validated, so please proceed with caution. We expect to get this to a point where we can confidently recommend it in the coming weeks.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;Otherwise, this is another release focused on internals. We&#x27;re driving toward a goal of reducing excess memory consumption when joining large or complex rooms, and most of our effort (aside from the presence work) has been focused on measurement, instrumentation, and experimentation for that.&lt;&#x2F;p&gt;
&lt;p&gt;We did manage to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9825&quot;&gt;slightly speed up room joins&lt;&#x2F;a&gt;, improve the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9821&quot;&gt;performance of the user directory&lt;&#x2F;a&gt;, and refine our implementation of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3083&quot;&gt;MSC3083&lt;&#x2F;a&gt;. Additionally, thanks to work by ShadowJonathan, Synapse now passes all of &lt;code&gt;flake8-bugbear&lt;&#x2F;code&gt;&#x27;s &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;PyCQA&#x2F;flake8-bugbear&quot;&gt;lints&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.33.0&#x2F;UPGRADE.rst#upgrading-to-v1330&quot;&gt;Upgrading Instructions&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.33.0&#x2F;CHANGES.md&quot;&gt;Release Notes&lt;&#x2F;a&gt; for further information.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;thank-you&quot;&gt;Thank You&lt;&#x2F;h3&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rkfg&quot;&gt;rkfg&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ShadowJonathan&quot;&gt;ShadowJonathan&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.32.2 released</title>
		<published>2021-04-22T18:16:38+00:00</published>
		<updated>2021-04-22T18:16:38+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/04/22/synapse-1-32-2-released/" type="text/html"/>
		<id>matrix.org/blog/2021/04/22/synapse-1-32-2-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.32.2 is out! &lt;strong&gt;Synapse now requires Python 3.6&lt;&#x2F;strong&gt; (or later) and we&#x27;ve made a few small changes which you should be aware of before upgrading. These are documented in the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.32.2&#x2F;UPGRADE.rst#upgrading-to-v1320&quot;&gt;upgrade notes&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;&#x2F;strong&gt; We scrubbed the releases of Synapse 1.32.0 and 1.32.1 as we discovered a pair of regressions including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;9853&quot;&gt;a bug&lt;&#x2F;a&gt; with Prometheus metrics after tagging the release. These have been resolved.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;On Monday, humankind flew a helicopter on Mars. And while our pursuit of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;1772&quot;&gt;Space(s)&lt;&#x2F;a&gt; is considerably more modest, it is nevertheless progressing apace: Synapse 1.32 includes an experimental implementation of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3083&quot;&gt;MSC3083&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;This release also includes a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9491&quot;&gt;new Synapse module&lt;&#x2F;a&gt; for routing of presence updates, which can allow devices to share presence information without requiring that they also share a room. Please note there are some &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9823&quot;&gt;nuances to worker configuration&lt;&#x2F;a&gt; when using this module which we hope to iron out in a future release.&lt;&#x2F;p&gt;
&lt;p&gt;The Admin API is newly able to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.32.2&#x2F;docs&#x2F;admin_api&#x2F;user_admin_api.rst#override-ratelimiting-for-users&quot;&gt;manage rate limits&lt;&#x2F;a&gt;, and the user listing endpoint can finally &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9691&quot;&gt;sort its results&lt;&#x2F;a&gt; by a variety of criteria.&lt;&#x2F;p&gt;
&lt;p&gt;Otherwise, this is again a very internals-focused release: many additional type hints, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9654&quot;&gt;improvements to structured logging&lt;&#x2F;a&gt;, and small cleanups, especially those possible now that we&#x27;ve left Python 3.5 behind. We&#x27;ve made changes to how we check whether accounts are &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9711&quot;&gt;exempt from rate limits&lt;&#x2F;a&gt; to avoid cases where we mistakenly applied limits to Application Services which should have been exempt, and we&#x27;ve fixed a bug with sharded federation senders which could occasionally &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9770&quot;&gt;pin the CPU&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.32.2&#x2F;UPGRADE.rst#upgrading-to-v1320&quot;&gt;Upgrading Instructions&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.32.2&#x2F;CHANGES.md#synapse-1322-2021-04-22&quot;&gt;Release Notes&lt;&#x2F;a&gt; for further information.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;thank-you&quot;&gt;Thank You&lt;&#x2F;h3&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;dklimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;languitar&quot;&gt;languitar&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ShadowJonathan&quot;&gt;ShadowJonathan&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;xmunoz&quot;&gt;xmunoz&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.31.0 released</title>
		<published>2021-04-07T00:00:18+00:00</published>
		<updated>2021-04-07T00:00:18+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/04/06/synapse-1-31-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/04/06/synapse-1-31-0-released/</id>
		<content type="html">&lt;p&gt;We&#x27;ve released &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.31.0&quot;&gt;Synapse 1.31.0&lt;&#x2F;a&gt;!&lt;&#x2F;p&gt;
&lt;p&gt;Mainly internal changes this time (type hints, code lints, etc.) but we&#x27;ve also landed &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9643&quot;&gt;some&lt;&#x2F;a&gt; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9652&quot;&gt;initial&lt;&#x2F;a&gt; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9653&quot;&gt;work&lt;&#x2F;a&gt; on &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2946&quot;&gt;MSC2946: Spaces Summary&lt;&#x2F;a&gt;. And speaking of MSCs, Synapse 1.31 has an experimental flag which can enable support for the draft &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;3026&quot;&gt;MSC3026: &amp;quot;busy&amp;quot; presence state&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.31 can now restrict OpenID Connect logins based on &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9609&quot;&gt;userinfo attributes&lt;&#x2F;a&gt; (Thanks, HubbeKing!).&lt;&#x2F;p&gt;
&lt;p&gt;This release &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9634&quot;&gt;fixes a rare infinite loop&lt;&#x2F;a&gt; when fetching cross-signing keys or handling device list updates, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9640&quot;&gt;further&lt;&#x2F;a&gt; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9639&quot;&gt;improves&lt;&#x2F;a&gt; the speed of federation catchup. It also makes Admin APIs around user reactivation &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9636&quot;&gt;behave correctly&lt;&#x2F;a&gt; when account passwords are disabled.&lt;&#x2F;p&gt;
&lt;p&gt;See the  &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.31.0&quot;&gt;Release Notes&lt;&#x2F;a&gt; for further information.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;the-final-python-3-5-release&quot;&gt;The Final Python 3.5 Release&lt;&#x2F;h3&gt;
&lt;p&gt;This is the last release of Synapse to support Python 3.5 or PostgreSQL 9.5, and the last release of official packages for Debian 9 (Stretch) and Ubuntu 16.04 LTS (Xenial).&lt;&#x2F;p&gt;
&lt;p&gt;Future releases of Synapse will follow upstream end-of-life dates for &lt;a href=&quot;https:&#x2F;&#x2F;endoflife.date&#x2F;python&quot;&gt;Python&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;endoflife.date&#x2F;postgresql&quot;&gt;Postgres&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Accordingly, we anticipate ending support for Python 3.6 and PostgreSQL 9.6 in December of this year. We will also cease producing packages for Ubuntu 18.04 LTS (Bionic) at that time.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;thank-you&quot;&gt;Thank You&lt;&#x2F;h3&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;http:&#x2F;&#x2F;github.com&#x2F;ankitdobhal&quot;&gt;ankitdobhal&lt;&#x2F;a&gt;, &lt;a href=&quot;http:&#x2F;&#x2F;github.com&#x2F;blakehawkins&quot;&gt;blakehawkins&lt;&#x2F;a&gt;, &lt;a href=&quot;http:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;dklimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;http:&#x2F;&#x2F;github.com&#x2F;fuzzmz&quot;&gt;fuzzmz&lt;&#x2F;a&gt;, &lt;a href=&quot;http:&#x2F;&#x2F;github.com&#x2F;HubbeKing&quot;&gt;HubbeKing&lt;&#x2F;a&gt;, &lt;a href=&quot;http:&#x2F;&#x2F;github.com&#x2F;languitar&quot;&gt;languitar&lt;&#x2F;a&gt;, &lt;a href=&quot;http:&#x2F;&#x2F;github.com&#x2F;sandhose&quot;&gt;sandhose&lt;&#x2F;a&gt;, and &lt;a href=&quot;http:&#x2F;&#x2F;github.com&#x2F;ShadowJonathan&quot;&gt;ShadowJonathan&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.30.1 released</title>
		<published>2021-03-26T16:12:04+00:00</published>
		<updated>2021-03-26T16:12:04+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/03/26/synapse-1-30-1-released/" type="text/html"/>
		<id>matrix.org/blog/2021/03/26/synapse-1-30-1-released/</id>
		<content type="html">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.30.1&quot;&gt;Synapse 1.30.1&lt;&#x2F;a&gt; is now available. This release is identical to Synapse 1.30.0, with the exception of explicitly setting a minimum version of the Python Cryptography library to ensure that users of Synapse are protected from yesterday&#x27;s &lt;a href=&quot;https:&#x2F;&#x2F;mta.openssl.org&#x2F;pipermail&#x2F;openssl-announce&#x2F;2021-March&#x2F;000198.html&quot;&gt;OpenSSL security advisories&lt;&#x2F;a&gt;, especially CVE-2021-3449.&lt;&#x2F;p&gt;
&lt;p&gt;Note that Cryptography defaults to bundling its own statically linked copy of OpenSSL, which means that you may not be protected by your operating system&#x27;s security updates.&lt;&#x2F;p&gt;
&lt;p&gt;It&#x27;s also worth noting that Cryptography no longer supports Python 3.5, so admins deploying to older environments like Debian 9 (Stretch) or Ubuntu 16.04 (Xenial) may not be protected against this or future vulnerabilities.&lt;&#x2F;p&gt;
&lt;p&gt;The next release of Synapse will be the last to support Python 3.5.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.30.0 released</title>
		<published>2021-03-22T16:56:46+00:00</published>
		<updated>2021-03-22T16:56:46+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/03/22/synapse-1-30-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/03/22/synapse-1-30-0-released/</id>
		<content type="html">&lt;p&gt;We&#x27;ve released &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.30.0&quot;&gt;Synapse 1.30.0&lt;&#x2F;a&gt;!&lt;&#x2F;p&gt;
&lt;p&gt;A key theme of this release was stability and resilience around federation. We&#x27;ve landed changes to be &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9561&quot;&gt;less eager about entering catch up mode&lt;&#x2F;a&gt; and to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9567&quot;&gt;retry on HTTP 500 errors&lt;&#x2F;a&gt;, while also &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9597&quot;&gt;rejecting transactions&lt;&#x2F;a&gt; which arrive before we&#x27;ve completed processing earlier transactions from that same server. We&#x27;ve significantly &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9601&quot;&gt;optimized how we handle missing events&lt;&#x2F;a&gt; when receiving incoming federation traffic, and we&#x27;ve found a way to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9576&quot;&gt;re-use the chain cover index&lt;&#x2F;a&gt; (from &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2021&#x2F;01&#x2F;28&#x2F;synapse-1-26-0-released&quot;&gt;Synapse 1.26&lt;&#x2F;a&gt;) when responding to the &lt;code&gt;state_ids&lt;&#x2F;code&gt; endpoint.&lt;&#x2F;p&gt;
&lt;p&gt;That last one turns out to be a pretty big deal: we&#x27;ve seen an order of magnitude improvement in both the CPU and DB cost of the &lt;code&gt;state_ids&lt;&#x2F;code&gt; endpoint. For example, the average CPU usage by that endpoint on matrix.org dropped from few seconds to well under 100ms:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2021-03-22-synapse-1.30rc1-state_ids-cpu.png&quot; alt=&quot;CPU usage graph&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Enjoy. 🙂&lt;&#x2F;p&gt;
&lt;p&gt;This release also includes further improves to our SSO support, including allowing spam checkers to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9626&quot;&gt;distinguish between new registrations and first-time SSO users&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9587&quot;&gt;fixing account reactivation when local passwords are disabled&lt;&#x2F;a&gt;. Now that &lt;em&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2858&quot;&gt;MSC2858: Multiple SSO Identity Providers&lt;&#x2F;a&gt;&lt;&#x2F;em&gt; has passed its Final Comment Period, we&#x27;ve also updated Synapse to respond to the stable versions of endpoints introduced by that MSC.&lt;&#x2F;p&gt;
&lt;p&gt;See the  &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.30.0&quot;&gt;Release Notes&lt;&#x2F;a&gt; for further information.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;python-platform-deprecations&quot;&gt;Python &#x2F; Platform Deprecations&lt;&#x2F;h3&gt;
&lt;p&gt;As a reminder, the next release of Synapse (1.31, scheduled for April 5th) will be the last to support Python 3.5 or PostgreSQL 9.5, both of which have reached their upstream end of life.&lt;&#x2F;p&gt;
&lt;p&gt;We will also cease building packages for Ubuntu 16.04 (Xenial) and Debian 9 (Stretch) at the same time.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;application-service-registration-changes&quot;&gt;Application Service Registration Changes&lt;&#x2F;h3&gt;
&lt;p&gt;Note that Application Services &lt;em&gt;must&lt;&#x2F;em&gt; provide a &lt;code&gt;type&lt;&#x2F;code&gt; parameter with the value &lt;code&gt;&amp;quot;m.login.application_service&amp;quot;&lt;&#x2F;code&gt; when calling &lt;code&gt;POST &#x2F;_matrix&#x2F;client&#x2F;r0&#x2F;register&lt;&#x2F;code&gt;. Synapse currently allows registration without an explicit &lt;code&gt;type&lt;&#x2F;code&gt;, but this &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9548&quot;&gt;divergence from the spec&lt;&#x2F;a&gt; will be resolved in a future release.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;thanks&quot;&gt;Thanks&lt;&#x2F;h3&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;dklimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ShadowJonathan&quot;&gt;ShadowJonathan&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;tlvb&quot;&gt;tlvb&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.29.0 released</title>
		<published>2021-03-08T22:26:13+00:00</published>
		<updated>2021-03-08T17:42:33+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/03/08/synapse-1-29-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/03/08/synapse-1-29-0-released/</id>
		<content type="html">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.29.0&quot;&gt;Synapse 1.29.0&lt;&#x2F;a&gt; is now available!&lt;&#x2F;p&gt;
&lt;p&gt;This release includes several useful new configuration options for administrators of federated home servers. In all cases, the defaults match Synapse&#x27;s prior behavior.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;AndrewFerr &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9203&quot;&gt;implemented&lt;&#x2F;a&gt; &lt;code&gt;include_profile_data_on_invite&lt;&#x2F;code&gt; and &lt;code&gt;allow_profile_lookup_over_federation&lt;&#x2F;code&gt; which can limit disclosure of your users&#x27; profile information. These both default to True.&lt;&#x2F;li&gt;
&lt;li&gt;We&#x27;ve also &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9383&quot;&gt;implemented&lt;&#x2F;a&gt; &lt;code&gt;user_directory.prefer_local_users&lt;&#x2F;code&gt; which weights users on the same homeserver higher in directory searches. This defaults to False.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Synapse is now easier to run in proxied environments, with tzyl &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9372&quot;&gt;implementing&lt;&#x2F;a&gt; support for the &lt;code&gt;NO_PROXY&lt;&#x2F;code&gt; environment variable, as well as recognizing lowercase variants of that and related proxy variables.&lt;&#x2F;p&gt;
&lt;p&gt;Under the hood, we&#x27;ve been steadily improving our type hints, especially in light of the recent release of Twisted 21.2.0 which includes its own type annotations. We&#x27;ve also landed &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9402&quot;&gt;some improvements&lt;&#x2F;a&gt; which reduce the amount of work Synapse does when presence is enabled and you join a room for the first time. Oh, and the media repository now &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9438&quot;&gt;regenerates missing thumbnails&lt;&#x2F;a&gt; on demand.&lt;&#x2F;p&gt;
&lt;p&gt;Lastly, if you deploy Synapse behind a reverse proxy, Synapse now expects to receive an &lt;code&gt;X-Forwarded-Proto&lt;&#x2F;code&gt; header on incoming requests and will log a warning if it is missing. See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v1.29.0&#x2F;UPGRADE.rst#upgrading-to-v1290&quot;&gt;upgrade notes&lt;&#x2F;a&gt; for more information. The &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v1.29.0&#x2F;CHANGES.md&quot;&gt;full changelog&lt;&#x2F;a&gt; has more information on what&#x27;s in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;aaronraimist&quot;&gt;aaronraimist&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;AndrewFerr&quot;&gt;AndrewFerr&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;dklimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ShadowJonathan&quot;&gt;ShadowJonathan&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;tzyl&quot;&gt;tzyl&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.28.0 released</title>
		<published>2021-02-25T00:00:00+00:00</published>
		<updated>2021-02-25T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/02/25/synapse-1-28-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/02/25/synapse-1-28-0-released/</id>
		<content type="html">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.28.0&quot;&gt;Synapse 1.28.0&lt;&#x2F;a&gt; is now available!&lt;&#x2F;p&gt;
&lt;p&gt;This release comes with several further improvements to the user experience of single sign-on and numerous bugfixes and stability improvements.&lt;&#x2F;p&gt;
&lt;p&gt;For admins, Synapse 1.28 adds a new Admin API for retrieving &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.28.0&#x2F;docs&#x2F;admin_api&#x2F;rooms.md#event-context-api&quot;&gt;event context&lt;&#x2F;a&gt; and implements new spam checker hooks which enable checking file uploads and remote downloads. We&#x27;ve also improved memory usage of media repository workers.&lt;&#x2F;p&gt;
&lt;p&gt;Lastly, we have marked an undocumented Admin API for deprecation. If any of your tools use &lt;code&gt;&#x2F;_synapse&#x2F;admin&#x2F;v1&#x2F;users&#x2F;&amp;lt;user_id&amp;gt;&lt;&#x2F;code&gt; to get account information, please replace that with the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v1.28.0&#x2F;docs&#x2F;admin_api&#x2F;user_admin_api.rst#list-accounts&quot;&gt;V2 List Accounts&lt;&#x2F;a&gt; API, which has been available since Synapse 1.7.0.&lt;&#x2F;p&gt;
&lt;p&gt;There are no special upgrade instructions for 1.28.0. See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v1.28.0&#x2F;CHANGES.md&quot;&gt;full changelog&lt;&#x2F;a&gt; for more details on what&#x27;s in this release.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;arya2331&quot;&gt;arya2331&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;auscompgeek&quot;&gt;auscompgeek&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;bubu&quot;&gt;bubu&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;compu42&quot;&gt;compu42&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;dklimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dykstranet&quot;&gt;dykstranet&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;shadowjonathan&quot;&gt;shadowjonathan&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;d also like to thank &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Yoric&quot;&gt;yoric&lt;&#x2F;a&gt; for thoroughly reviewing and re-organizing the Synapse &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.28.0&#x2F;CONTRIBUTING.md&quot;&gt;CONTRIBUTING.md&lt;&#x2F;a&gt; file.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.27.0 released</title>
		<published>2021-02-18T23:25:00+00:00</published>
		<updated>2021-02-18T23:25:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/02/18/synapse-1-27-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/02/18/synapse-1-27-0-released/</id>
		<content type="html">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.27.0&quot;&gt;Synapse 1.27.0&lt;&#x2F;a&gt; is now available!&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;re especially proud of this release, as this is the version of Synapse that powered &lt;a href=&quot;&#x2F;blog&#x2F;2021&#x2F;02&#x2F;15&#x2F;how-we-hosted-fosdem-2021-on-matrix&quot;&gt;FOSDEM 2021 on Matrix&lt;&#x2F;a&gt;. As such, our main focus was on stability, performance, and long-awaited support for social login.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;what-s-new&quot;&gt;What&#x27;s New&lt;&#x2F;h3&gt;
&lt;p&gt;To our surprise, nearly &lt;em&gt;half&lt;&#x2F;em&gt; of all people who created accounts on the FOSDEM homeserver did so via a social login method. Full support for those methods is included in Synapse 1.27.0, and already available for all users on the matrix.org homeserver.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ve also changed how we use Redis in larger deployments, making Synapse more resilient to lost connections and eliminating delays when restarting with multiple federation senders.&lt;&#x2F;p&gt;
&lt;p&gt;Our Server Admin APIs saw a few tweaks, including new APIs to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.27.0&#x2F;docs&#x2F;admin_api&#x2F;rooms.md#forward-extremities-admin-api&quot;&gt;query and delete forward extremities&lt;&#x2F;a&gt; or &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.27.0&#x2F;docs&#x2F;admin_api&#x2F;rooms.md#room-state-api&quot;&gt;list the current state of a room&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v1.27.0&#x2F;CHANGES.md&quot;&gt;full changelog&lt;&#x2F;a&gt; for more.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;breaking-changes-for-sso&quot;&gt;Breaking Changes for SSO&lt;&#x2F;h3&gt;
&lt;p&gt;If you use Single Sign-On (SSO) via SAML, OAuth2, or OpenID Connect you &lt;strong&gt;must&lt;&#x2F;strong&gt; adjust your provider&#x27;s configuration before upgrading to Synapse 1.27.0, as some endpoint URLs have changed. See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v1.27.0&#x2F;UPGRADE.rst#upgrading-to-v1270&quot;&gt;upgrading notes&lt;&#x2F;a&gt; for more information.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;dropping-armv7-docker-images&quot;&gt;Dropping ARMv7 Docker Images&lt;&#x2F;h3&gt;
&lt;p&gt;We were unable to produce ARM-based Docker images for this release due to problems with cross-compilation. As a result, we have made the difficult decision to cease building 32-bit ARMv7 Docker images as part of our release process. We will resume publishing ARM64 images with the next Synapse release.&lt;&#x2F;p&gt;
&lt;p&gt;Users on ARMv7 platforms (most notably Raspberry Pis) should consider building images locally using Synapse&#x27;s Dockerfile or switching to installing Synapse directly as a Python module. Users with Raspberry Pi 3&#x27;s or newer also have the option of installing a 64-bit Linux distribution and using an ARM64 Docker image.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;thank-you-to-our-contributors&quot;&gt;Thank you to our contributors&lt;&#x2F;h3&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;dklimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;intelfx&quot;&gt;intelfx&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jcgruenhage&quot;&gt;jcgruenhage&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Oliver-Hanikel&quot;&gt;Oliver-Hanikel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rht&quot;&gt;rht&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;y-pankaj&quot;&gt;y-pankaj&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.26.0 released</title>
		<published>2021-01-28T00:00:00+00:00</published>
		<updated>2021-01-28T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/01/28/synapse-1-26-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/01/28/synapse-1-26-0-released/</id>
		<content type="html">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.26.0&quot;&gt;Synapse 1.26.0&lt;&#x2F;a&gt; is now available!&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;&#x2F;strong&gt; This release includes a new database schema version. If you need to roll back to Synapse 1.25.0, you will also need to follow the associated &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.26.0&#x2F;UPGRADE.rst#upgrading-to-v1260&quot;&gt;database downgrade instructions&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;In addition to a truckload of refactoring and general improvements, Synapse 1.26.0 includes three major new features:&lt;&#x2F;p&gt;
&lt;ol&gt;
&lt;li&gt;A &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.26.0&#x2F;docs&#x2F;auth_chain_difference_algorithm.md&quot;&gt;brand new algorithm&lt;&#x2F;a&gt; for calculating the auth chain difference, which should dramatically improve worst case performance during state resolution (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8622&quot;&gt;#8622&lt;&#x2F;a&gt;).&lt;&#x2F;li&gt;
&lt;li&gt;Initial support for enabling &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;9110&quot;&gt;multiple OpenID Connect providers&lt;&#x2F;a&gt;, paving the way for proper multi-provider social login workflows.&lt;&#x2F;li&gt;
&lt;li&gt;A significant speed-up to redaction performance in large rooms.&lt;&#x2F;li&gt;
&lt;&#x2F;ol&gt;
&lt;p&gt;It also brings several improvements to Admin APIs:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Specific media items can be &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.26.0&#x2F;docs&#x2F;admin_api&#x2F;media_admin_api.md#protecting-media-from-being-quarantined&quot;&gt;protected from quarantine&lt;&#x2F;a&gt;. &lt;&#x2F;li&gt;
&lt;li&gt;The &lt;code&gt;joined_rooms&lt;&#x2F;code&gt; API now &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.26.0&#x2F;docs&#x2F;admin_api&#x2F;user_admin_api.rst#list-room-memberships-of-an-user&quot;&gt;works for remote users&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;Deactivating a user can now &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.26.0&#x2F;docs&#x2F;admin_api&#x2F;user_admin_api.rst#deactivate-account&quot;&gt;optionally remove their avatar URL and display name&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;We&#x27;ve also made it possible to offload several additional APIs to worker processes, including read receipts and account data persistence, further improving Synapse&#x27;s scalability.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.26.0&#x2F;CHANGES.md&quot;&gt;full changelog&lt;&#x2F;a&gt; for more.&lt;&#x2F;p&gt;
&lt;p&gt;Lastly, a reminder: we have &lt;strong&gt;deprecated Python 3.5 and PostgreSQL 9.5&lt;&#x2F;strong&gt; and will cease support at the end of March. Due to deprecations in our Python tooling, we were unable to produce a binary package for Ubuntu 16.04 LTS (Xenial) in time for this release. We have resolved this for 1.27.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;0xflotus&quot;&gt;0xflotus&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;chris-ruecker&quot;&gt;chris-ruecker&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;dklimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;emelie-qis&quot;&gt;emelie-qis&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jerinjtitus&quot;&gt;jerinjtitus&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;tzyl&quot;&gt;tzyl&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.25.0 released</title>
		<published>2021-01-13T00:00:00+00:00</published>
		<updated>2021-01-13T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2021/01/13/synapse-1-25-0-released/" type="text/html"/>
		<id>matrix.org/blog/2021/01/13/synapse-1-25-0-released/</id>
		<content type="html">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.25.0&quot;&gt;Synapse 1.25.0&lt;&#x2F;a&gt; is now available! With this release, we are &lt;strong&gt;deprecating Python 3.5 and PostgreSQL 9.5&lt;&#x2F;strong&gt; and will cease producing binary packages for Debian 9 (Stretch) and Ubuntu 16.04 (Xenial) after a transition period which lasts through March 2021. See &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.25.0&#x2F;CHANGES.md&quot;&gt;the changelog&lt;&#x2F;a&gt; for further details.&lt;&#x2F;p&gt;
&lt;p&gt;We are also deprecating the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;tree&#x2F;master&#x2F;docs&#x2F;admin_api&#x2F;purge_room.md&quot;&gt;Purge Room&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;tree&#x2F;master&#x2F;docs&#x2F;admin_api&#x2F;shutdown_room.md&quot;&gt;Shutdown Room&lt;&#x2F;a&gt; Admin APIs and will remove them in a future release. Please update your code to use the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;tree&#x2F;master&#x2F;docs&#x2F;admin_api&#x2F;rooms.md#delete-room-api&quot;&gt;Delete Room&lt;&#x2F;a&gt; Admin API instead.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.25.0 brings over a month&#x27;s worth of improvements, including:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;The ability for users to pick their own username when using Single Sign-On, right from within Synapse.&lt;&#x2F;li&gt;
&lt;li&gt;Support for &lt;code&gt;async&lt;&#x2F;code&gt; Python methods in custom spam checker modules.&lt;&#x2F;li&gt;
&lt;li&gt;New ways to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.25.0&#x2F;UPGRADE.rst#upgrading-to-v1250&quot;&gt;restrict allowed IP address ranges&lt;&#x2F;a&gt; for outgoing requests from Synapse.&lt;&#x2F;li&gt;
&lt;li&gt;Significantly faster v2 state resolution on rooms with large numbers of power level events, which are common in some types of bridged IRC rooms.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.25.0&#x2F;CHANGES.md&quot;&gt;full changelog&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.25.0&#x2F;UPGRADE.rst#upgrading-to-v1250&quot;&gt;upgrade notes&lt;&#x2F;a&gt; for more.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;aaronraimist&quot;&gt;@aaronraimist&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Bubu&quot;&gt;@Bubu&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;@dklimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;edwargix&quot;&gt;@edwargix&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;fossterer&quot;&gt;@fossterer&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jdreichmann&quot;&gt;@jdreichmann&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jerinjtitus&quot;&gt;@jerinjtitus&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;MadLittleMods&quot;&gt;@MadLittleMods&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.24.0 and 1.23.1 released</title>
		<published>2020-12-09T23:51:05+00:00</published>
		<updated>2020-12-09T23:51:05+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/12/09/synapse-1-24-0-and-1-23-1-released/" type="text/html"/>
		<id>matrix.org/blog/2020/12/09/synapse-1-24-0-and-1-23-1-released/</id>
		<content type="html">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.24.0&quot;&gt;Synapse 1.24.0&lt;&#x2F;a&gt; is now available!&lt;&#x2F;p&gt;
&lt;p&gt;This release fixes a denial of service vulnerability (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;security&#x2F;advisories&#x2F;GHSA-hxmp-pqch-c8mm&quot;&gt;GHSA-hxmp-pqch-c8mm&lt;&#x2F;a&gt; &#x2F; &lt;a href=&quot;https:&#x2F;&#x2F;cve.mitre.org&#x2F;cgi-bin&#x2F;cvename.cgi?name=CVE-2020-26257&quot;&gt;CVE-2020-26257&lt;&#x2F;a&gt;) in which a malicious homeserver could send malformed events into a room which would then break federation of that room.&lt;&#x2F;p&gt;
&lt;p&gt;This follows the disclosure of a denial of service vulnerability in OpenSSL (&lt;a href=&quot;https:&#x2F;&#x2F;www.openssl.org&#x2F;news&#x2F;secadv&#x2F;20201208.txt&quot;&gt;CVE-2020-1971&lt;&#x2F;a&gt;). If you have installed Synapse from source, please ensure your host is up to date and then execute &lt;code&gt;pip install &#x27;cryptography&amp;gt;=3.3&#x27;&lt;&#x2F;code&gt; inside your Synapse virtualenv.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ve also released &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.23.1&quot;&gt;Synapse 1.23.1&lt;&#x2F;a&gt; which includes that security fix and a small patch to maintain Python 3.5 compatibility. It is otherwise &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;compare&#x2F;v1.23.0...v1.23.1&quot;&gt;identical to 1.23.0&lt;&#x2F;a&gt;. Note that Synapse 1.24.0 includes backwards incompatible changes which may affect a small number of users. See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;develop&#x2F;UPGRADE.rst#upgrading-to-v1240&quot;&gt;notes on upgrading&lt;&#x2F;a&gt; for more information.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.24.0 brings a pair of new Admin APIs, including a way to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.24.0&#x2F;docs&#x2F;admin_api&#x2F;user_admin_api.rst#login-as-a-user&quot;&gt;log in as users&lt;&#x2F;a&gt; and to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.24.0&#x2F;docs&#x2F;admin_api&#x2F;rooms.md#delete-room-api&quot;&gt;forcibly purge&lt;&#x2F;a&gt; rooms when deleting them. We&#x27;ve also made numerous bug fixes and improvements to SSO support, especially around OpenID Connect and SAML providers.&lt;&#x2F;p&gt;
&lt;p&gt;This release includes an optional change to push notification badges: currently, the number in the badge is based on the count of &lt;em&gt;rooms&lt;&#x2F;em&gt; with unread messages. However, in some specialized cases you may want the badge to show the count of &lt;em&gt;all&lt;&#x2F;em&gt; unread messages, even if there are multiple unread messages in the same room. This behavior can now be toggled with a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;8820&quot;&gt;new configuration setting&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Additionally, for server admins, the deprecated &lt;code&gt;&#x2F;_matrix&#x2F;client&#x2F;*&#x2F;admin&lt;&#x2F;code&gt; Admin API endpoints &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8785&quot;&gt;have been removed&lt;&#x2F;a&gt;. If you have tools which target these endpoints, please update them to use the &lt;code&gt;&#x2F;_synapse&#x2F;admin&lt;&#x2F;code&gt; URL prefix instead.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.24.0&#x2F;CHANGES.md&quot;&gt;full changelog&lt;&#x2F;a&gt; for more.&lt;&#x2F;p&gt;
&lt;p&gt;Installation instructions are available &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md&quot;&gt;on GitHub&lt;&#x2F;a&gt;, as is the &lt;code&gt;v1.24.0&lt;&#x2F;code&gt; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.24.0&quot;&gt;release tag&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;angdraug&quot;&gt;@angdraug&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;chagai95&quot;&gt;@chagai95&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;daenney&quot;&gt;@daenney&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;@dklimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jordanbancino&quot;&gt;@jordanbancino&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;localguru&quot;&gt;@localguru&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;nchamo&quot;&gt;@nchamo&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ShadowJonathan&quot;&gt;@ShadowJonathan&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;TeFiLeDo&quot;&gt;@TeFiLeDo&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;tulir&quot;&gt;@tulir&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;waylon531&quot;&gt;@waylon531&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.23.0 released</title>
		<published>2020-11-18T00:00:00+00:00</published>
		<updated>2020-11-18T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/11/18/synapse-1-23-0-released/" type="text/html"/>
		<id>matrix.org/blog/2020/11/18/synapse-1-23-0-released/</id>
		<content type="html">&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Reminder:&lt;&#x2F;strong&gt; On Monday, we will be announcing a denial of service vulnerability which affects Synapse versions prior to 1.20.0. If you have not upgraded recently, please do so.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.23.0&quot;&gt;Synapse 1.23.0&lt;&#x2F;a&gt; now available!&lt;&#x2F;p&gt;
&lt;p&gt;For Synapse admins, this release support generating structured logs via the standard logging configuration (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8607&quot;&gt;#8607&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8685&quot;&gt;#8685&lt;&#x2F;a&gt;). This may require changing your synapse configuration; see the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.23.0rc1&#x2F;UPGRADE.rst#upgrading-to-v1230&quot;&gt;upgrade notes&lt;&#x2F;a&gt; for more information.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ve also added many new Admin APIs, contributed by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;@dklimpel&lt;&#x2F;a&gt;:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add API to get information about uploaded media (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8647&quot;&gt;#8647&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add API for local user media statistics (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8700&quot;&gt;#8700&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make it possible to delete files that were not used for a defined time (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8519&quot;&gt;#8519&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Split API for reported events into detail and list endpoints. This is a breaking change to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8217&quot;&gt;#8217&lt;&#x2F;a&gt; which was introduced in Synapse v1.21.0. Those who already use this API should check their scripts (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8539&quot;&gt;#8539&lt;&#x2F;a&gt;) &lt;&#x2F;li&gt;
&lt;li&gt;Allow server admins to list users&#x27; notification pushers (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8610&quot;&gt;#8610&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8689&quot;&gt;#8689&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Lastly, Synapse 1.23.0 addresses some significant bugs, including regressions in the SQLite-to-PostgreSQL database porting script (&lt;a href=&quot;http:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8729&quot;&gt;#8729&lt;&#x2F;a&gt;, &lt;a href=&quot;http:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8730&quot;&gt;#8730&lt;&#x2F;a&gt;, &lt;a href=&quot;http:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8755&quot;&gt;#8755&lt;&#x2F;a&gt;) and an issue which could prevent Synapse from recovering after losing its connection to its database (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8726&quot;&gt;#8726&lt;&#x2F;a&gt;). Synapse will also reject ACL modifications from clients which would otherwise cause a server to ban itself from a room (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8708&quot;&gt;#8708&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;Installation instructions are available &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md&quot;&gt;on GitHub&lt;&#x2F;a&gt;, as is the &lt;code&gt;v1.23.0&lt;&#x2F;code&gt; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.23.0&quot;&gt;release tag&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;chagai95&quot;&gt;@chagai95&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;@dklimpel&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The full changelog for 1.23.0 is as follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-23-0-2020-11-18&quot;&gt;Synapse 1.23.0 (2020-11-18)&lt;&#x2F;h1&gt;
&lt;p&gt;This release changes the way structured logging is configured. See the &lt;a href=&quot;UPGRADE.rst#upgrading-to-v1230&quot;&gt;upgrade notes&lt;&#x2F;a&gt; for details.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;&#x2F;strong&gt;: We are aware of a trivially exploitable denial of service vulnerability in versions of Synapse prior to 1.20.0. Complete details will be disclosed on Monday, November 23rd. If you have not upgraded recently, please do so.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a dependency versioning bug in the Dockerfile that prevented Synapse from starting. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8767&quot;&gt;#8767&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-23-0rc1-2020-11-13&quot;&gt;Synapse 1.23.0rc1 (2020-11-13)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add a push rule that highlights when a jitsi conference is created in a room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8286&quot;&gt;#8286&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an admin api to delete a single file or files that were not used for a defined time from server. Contributed by @dklimpel. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8519&quot;&gt;#8519&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Split admin API for reported events (&lt;code&gt;GET &#x2F;_synapse&#x2F;admin&#x2F;v1&#x2F;event_reports&lt;&#x2F;code&gt;) into detail and list endpoints. This is a breaking change to #8217 which was introduced in Synapse v1.21.0. Those who already use this API should check their scripts. Contributed by @dklimpel. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8539&quot;&gt;#8539&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Support generating structured logs via the standard logging configuration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8607&quot;&gt;#8607&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8685&quot;&gt;#8685&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an admin API to allow server admins to list users&#x27; pushers. Contributed by @dklimpel. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8610&quot;&gt;#8610&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8689&quot;&gt;#8689&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an admin API &lt;code&gt;GET &#x2F;_synapse&#x2F;admin&#x2F;v1&#x2F;users&#x2F;&amp;lt;user_id&amp;gt;&#x2F;media&lt;&#x2F;code&gt; to get information about uploaded media. Contributed by @dklimpel. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8647&quot;&gt;#8647&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an admin API for local user media statistics. Contributed by @dklimpel. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8700&quot;&gt;#8700&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;displayname&lt;&#x2F;code&gt; to Shared-Secret Registration for admins. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8722&quot;&gt;#8722&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix fetching of E2E cross signing keys over federation when only one of the master key and device signing key is cached already. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8455&quot;&gt;#8455&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where Synapse would blindly forward bad responses from federation to clients when retrieving profile information. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8580&quot;&gt;#8580&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where the account validity endpoint would silently fail if the user ID did not have an expiration time. It now returns a 400 error. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8620&quot;&gt;#8620&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix email notifications for invites without local state. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8627&quot;&gt;#8627&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix handling of invalid group IDs to return a 400 rather than log an exception and return a 500. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8628&quot;&gt;#8628&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix handling of User-Agent headers that are invalid UTF-8, which caused user agents of users to not get correctly recorded. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8632&quot;&gt;#8632&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug in the &lt;code&gt;joined_rooms&lt;&#x2F;code&gt; admin API if the user has never joined any rooms. The bug was introduced, along with the API, in v1.21.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8643&quot;&gt;#8643&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix exception during handling multiple concurrent requests for remote media when using multiple media repositories. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8682&quot;&gt;#8682&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug that prevented Synapse from recovering after losing connection to the database. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8726&quot;&gt;#8726&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where the &lt;code&gt;&#x2F;_synapse&#x2F;admin&#x2F;v1&#x2F;send_server_notice&lt;&#x2F;code&gt; API could send notices to non-notice rooms. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8728&quot;&gt;#8728&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix PostgreSQL port script fails when DB has no backfilled events. Broke in v1.21.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8729&quot;&gt;#8729&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix PostgreSQL port script to correctly handle foreign key constraints. Broke in v1.21.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8730&quot;&gt;#8730&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix PostgreSQL port script so that it can be run again after a failure. Broke in v1.21.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8755&quot;&gt;#8755&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Instructions for Azure AD in the OpenID Connect documentation. Contributed by peterk. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8582&quot;&gt;#8582&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve the sample configuration for single sign-on providers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8635&quot;&gt;#8635&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the filepath of Dex&#x27;s example config and the link to Dex&#x27;s Getting Started guide in the OpenID Connect docs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8657&quot;&gt;#8657&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Note support for Python 3.9. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8665&quot;&gt;#8665&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Minor updates to docs on running tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8666&quot;&gt;#8666&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Interlink prometheus&#x2F;grafana documentation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8667&quot;&gt;#8667&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Notes on SSO logins and media_repository worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8701&quot;&gt;#8701&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Document experimental support for running multiple event persisters. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8706&quot;&gt;#8706&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add information regarding the various sources of, and expected contributions to, Synapse&#x27;s documentation to &lt;code&gt;CONTRIBUTING.md&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8714&quot;&gt;#8714&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Migrate documentation &lt;code&gt;docs&#x2F;admin_api&#x2F;event_reports&lt;&#x2F;code&gt; to markdown. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8742&quot;&gt;#8742&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some helpful hints to the README for new Synapse developers. Contributed by @chagai95. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8746&quot;&gt;#8746&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Optimise &lt;code&gt;&#x2F;createRoom&lt;&#x2F;code&gt; with multiple invited users. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8559&quot;&gt;#8559&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Implement and use an &lt;code&gt;@lru_cache&lt;&#x2F;code&gt; decorator. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8595&quot;&gt;#8595&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t instantiate Requester directly. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8614&quot;&gt;#8614&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Type hints for &lt;code&gt;RegistrationStore&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8615&quot;&gt;#8615&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Change schema to support access tokens belonging to one user but granting access to another. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8616&quot;&gt;#8616&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unused OPTIONS handlers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8621&quot;&gt;#8621&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Run &lt;code&gt;mypy&lt;&#x2F;code&gt; as part of the lint.sh script. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8633&quot;&gt;#8633&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Correct Synapse&#x27;s PyPI package name in the OpenID Connect installation instructions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8634&quot;&gt;#8634&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Catch exceptions during initialization of &lt;code&gt;password_providers&lt;&#x2F;code&gt;. Contributed by Nicolai Søborg. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8636&quot;&gt;#8636&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix typos and spelling errors in the code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8639&quot;&gt;#8639&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce number of OpenTracing spans started. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8640&quot;&gt;#8640&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8668&quot;&gt;#8668&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8670&quot;&gt;#8670&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add field &lt;code&gt;total&lt;&#x2F;code&gt; to device list in admin API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8644&quot;&gt;#8644&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add more type hints to the application services code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8655&quot;&gt;#8655&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8693&quot;&gt;#8693&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Tell Black to format code for Python 3.5. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8664&quot;&gt;#8664&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t pull event from DB when handling replication traffic. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8669&quot;&gt;#8669&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Abstract some invite-related code in preparation for landing knocking. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8671&quot;&gt;#8671&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8688&quot;&gt;#8688&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify representation of events in logfiles. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8679&quot;&gt;#8679&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t require &lt;code&gt;hiredis&lt;&#x2F;code&gt; package to be installed to run unit tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8680&quot;&gt;#8680&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix typing info on cache call signature to accept &lt;code&gt;on_invalidate&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8684&quot;&gt;#8684&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fail tests if they do not await coroutines. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8690&quot;&gt;#8690&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve start time by adding an index to &lt;code&gt;e2e_cross_signing_keys.stream_id&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8694&quot;&gt;#8694&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Re-organize the structured logging code to separate the TCP transport handling from the JSON formatting. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8697&quot;&gt;#8697&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Use Python 3.8 in Docker images by default. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8698&quot;&gt;#8698&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove the &amp;quot;draft&amp;quot; status of the Room Details Admin API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8702&quot;&gt;#8702&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve the error returned when a non-string displayname or avatar_url is used when updating a user&#x27;s profile. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8705&quot;&gt;#8705&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Block attempts by clients to send server ACLs, or redactions of server ACLs, that would result in the local server being blocked from the room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8708&quot;&gt;#8708&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add metrics the allow the local sysadmin to track 3PID &lt;code&gt;&#x2F;requestToken&lt;&#x2F;code&gt; requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8712&quot;&gt;#8712&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Consolidate duplicated lists of purged tables that are checked in tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8713&quot;&gt;#8713&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some &lt;code&gt;mdui:UIInfo&lt;&#x2F;code&gt; element examples for &lt;code&gt;saml2_config&lt;&#x2F;code&gt; in the homeserver config. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8718&quot;&gt;#8718&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve the error message returned when a remote server incorrectly sets the &lt;code&gt;Content-Type&lt;&#x2F;code&gt; header in response to a JSON request. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8719&quot;&gt;#8719&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Speed up repeated state resolutions on the same room by caching event ID to auth event ID lookups. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8752&quot;&gt;#8752&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Dendrite 0.3.0 released</title>
		<published>2020-11-16T17:44:46+00:00</published>
		<updated>2020-11-16T17:44:46+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/11/16/dendrite-0-3-0-released/" type="text/html"/>
		<id>matrix.org/blog/2020/11/16/dendrite-0-3-0-released/</id>
		<content type="html">&lt;p&gt;Hi all,&lt;&#x2F;p&gt;
&lt;p&gt;Heads up that we just cut another beta release of Dendrite - now at 0.3.0!&lt;&#x2F;p&gt;
&lt;p&gt;This is a really fun release given almost all the changes are contributed from
the wider community - so huge thanks to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;S7evinK&quot;&gt;S7evinK&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;MayeulC&quot;&gt;MayeulC&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;felix&quot;&gt;felix&lt;&#x2F;a&gt;!&lt;&#x2F;p&gt;
&lt;p&gt;The main new feature is full Read Receipt support thanks to S7evinK, which
makes an enormous perceptual improvement when using Dendrite - so especial
thanks are due there :)&lt;&#x2F;p&gt;
&lt;p&gt;So, if you&#x27;re interested in helping us test, please spin up a copy from
https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;dendrite and let us know how it goes - and if you&#x27;re
already running one, now is an excellent time to upgrade!&lt;&#x2F;p&gt;
&lt;p&gt;Full changelog (including 0.2.1, which we forgot to blog about) follows:&lt;&#x2F;p&gt;
&lt;h2 id=&quot;dendrite-0-3-0-2020-11-16&quot;&gt;Dendrite 0.3.0 (2020-11-16)&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;features&quot;&gt;Features&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;Read receipts (both inbound and outbound) are now supported (contributed by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;S7evinK&quot;&gt;S7evinK&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Forgetting rooms is now supported (contributed by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;S7evinK&quot;&gt;S7evinK&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;The &lt;code&gt;-version&lt;&#x2F;code&gt; command line flag has been added (contributed by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;S7evinK&quot;&gt;S7evinK&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;fixes&quot;&gt;Fixes&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;User accounts that contain the &lt;code&gt;=&lt;&#x2F;code&gt; character can now be registered&lt;&#x2F;li&gt;
&lt;li&gt;Backfilling should now work properly on rooms with world-readable history visibility (contributed by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;MayeulC&quot;&gt;MayeulC&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;The &lt;code&gt;gjson&lt;&#x2F;code&gt; dependency has been updated for correct JSON integer ranges&lt;&#x2F;li&gt;
&lt;li&gt;Some more client event fields have been marked as omit-when-empty (contributed by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;S7evinK&quot;&gt;S7evinK&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;The &lt;code&gt;build.sh&lt;&#x2F;code&gt; script has been updated to work properly on all POSIX platforms (contributed by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;felix&quot;&gt;felix&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;dendrite-0-2-1-2020-10-22&quot;&gt;Dendrite 0.2.1 (2020-10-22)&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;fixes-1&quot;&gt;Fixes&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;Forward extremities are now calculated using only references from other extremities, rather than including outliers, which should fix cases where state can become corrupted (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;dendrite&#x2F;pull&#x2F;1556&quot;&gt;#1556&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Old state events will no longer be processed by the sync API as new, which should fix some cases where clients incorrectly believe they have joined or left rooms (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;dendrite&#x2F;pull&#x2F;1548&quot;&gt;#1548&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;More SQLite database locking issues have been resolved in the latest events updater (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;dendrite&#x2F;pull&#x2F;1554&quot;&gt;#1554&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Internal HTTP API calls are now made using H2C (HTTP&#x2F;2) in polylith mode, mitigating some potential head-of-line blocking issues (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;dendrite&#x2F;pull&#x2F;1541&quot;&gt;#1541&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Roomserver output events no longer incorrectly flag state rewrites (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;dendrite&#x2F;pull&#x2F;1557&quot;&gt;#1557&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Notification levels are now parsed correctly in power level events (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;gomatrixserverlib&#x2F;pull&#x2F;228&quot;&gt;gomatrixserverlib#228&lt;&#x2F;a&gt;, contributed by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Pestdoktor&quot;&gt;Pestdoktor&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Invalid UTF-8 is now correctly rejected when making federation requests (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;gomatrixserverlib&#x2F;pull&#x2F;229&quot;&gt;gomatrixserverlib#229&lt;&#x2F;a&gt;, contributed by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Pestdoktor&quot;&gt;Pestdoktor&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>How we fixed Synapse&#x27;s scalability!</title>
		<published>2020-11-03T00:00:00+00:00</published>
		<updated>2020-11-03T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/11/03/how-we-fixed-synapse-s-scalability/" type="text/html"/>
		<id>matrix.org/blog/2020/11/03/how-we-fixed-synapse-s-scalability/</id>
		<content type="html">&lt;p&gt;Hi all,&lt;&#x2F;p&gt;
&lt;p&gt;We had a major break-through in Synapse 1.22 which we want to talk about in
more detail: &lt;strong&gt;Synapse now scales horizontally across multiple python
processes.&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Horizontal scaling means that you can support more users and traffic by adding
in more python processes (spread over more machines, if necessary) without
there being a single bottleneck which all the traffic is passing through - as
opposed to vertical scaling where you make things go faster overall by making
the bottleneck go faster.&lt;&#x2F;p&gt;
&lt;p&gt;After many years of having to vertically scale Synapse (by trying to make the
main process go faster) we’re now finally at the point where you can configure
Synapse so that &lt;strong&gt;messages no longer flow through the main process&lt;&#x2F;strong&gt; -
eliminating the bottleneck entirely.  What’s more, the Matrix.org homeserver
has now been successfully running in this config and enjoying the massive
scalability improvements for the last 2 weeks! Huge kudos goes to Erik and the
wider Synapse team for pulling this off.&lt;&#x2F;p&gt;
&lt;p&gt;Some readers might wonder how this ties in with &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2020&#x2F;10&#x2F;08&#x2F;dendrite-is-entering-beta&quot;&gt;Dendrite entering
beta&lt;&#x2F;a&gt;, given one
of Dendrite’s design goals is full horizontal scalability.  The answer is that
we’re very much using Dendrite for experimentation and next-gen stuff at the
moment (currently focused more on scaling downwards for P2P rather than
scaling upwards for megaservers) - while Synapse is the stable and long-term
supported option.&lt;&#x2F;p&gt;
&lt;p&gt;So, that’s the context - now over to Erik with more than you could possibly
ever want to know about how we actually did it...&lt;&#x2F;p&gt;
&lt;h2 id=&quot;background&quot;&gt;Background&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse started life off back in 2014 as a single monolithic python process,
and for quite a while we made it scale by adding more and more in-memory
caches to speed things up by avoiding hitting the database (at the expense of
RAM).  It looked like this:&lt;&#x2F;p&gt;
&lt;div style=&quot;margin: auto; max-width: 640px;&quot;&gt;
    &lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2020-11-03-synapse1.png&quot;&#x2F;&gt;
&lt;&#x2F;div&gt;
&lt;p&gt;Eventually the caches stopped helping and we needed more than one thread of
execution in order to spread CPU across multiple cores. Python’s Global
Interpreter Lock (&lt;a href=&quot;https:&#x2F;&#x2F;wiki.python.org&#x2F;moin&#x2F;GlobalInterpreterLock&quot;&gt;GIL&lt;&#x2F;a&gt;)
means that Python can mainly only use one CPU core at a time, so starting more
threads doesn’t help with scalability - you have to run multiple processes.&lt;&#x2F;p&gt;
&lt;p&gt;Now, the vast majority of the work that Synapse does is related to “streams”.
These are append only sequences of rows, such as the events stream, typing
stream, receipts stream, etc. When a new event arrives (for example) we write
it to the events stream, and then notify anything waiting that there has been
an update. The &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; endpoint, for instance, will wait for updates to streams
and send them down to long-polling Matrix clients. &lt;&#x2F;p&gt;
&lt;p&gt;Streams support being added to concurrently, so have a concept of the
“persisted up-to position”. This is the point where &lt;strong&gt;all&lt;&#x2F;strong&gt; rows before that
point have finished persisting. Readers only read up to the current “persisted
up-to position”, so that they don’t skip updates that haven’t finished
persisting at that point. (E.g. if two events A and B get assigned positions 5
and 6, but B finishes persisting first, then the persisted up to position will
remain at 4 until A finishes persisting and then it jumps to 6).&lt;&#x2F;p&gt;
&lt;p&gt;To split any meaningful amount of work into separate processes, we need to add
a mechanism where processes can be told that updates to streams have happened
(otherwise they’d have to repeatedly poll the DB, which would be deeply
inefficient). The architecture ended up being one where we had the “main”
process that streams updates via a custom replication protocol (initially
long-polling HTTP; later custom TCP) to any number of “worker” processes. This
meant that we could move sync stream handling (and other read apis) off the
main process and onto workers, but also that all database writes had to go
through the single main process (as it was a star topology, the main process
could talk to all workers but workers could only talk to the main process and
not each other).&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2020-11-03-synapse2.png&quot; alt=&quot;2020-11-03-synapse2.png&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;As an aside: cache invalidations also had to be streamed down the replication
connections, which has the side effect that we could only cache things that
would only be invalidated on the main process.&lt;&#x2F;p&gt;
&lt;p&gt;We continued to move more and more read APIs out onto separate workers. We
also added workers in front of the main process that would e.g. handle the
creation of the new events, authenticating, etc, and then call out to the main
process with the event for it to persist the event.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;moving-writes-off-the-main-process&quot;&gt;Moving writes off the main process&lt;&#x2F;h2&gt;
&lt;p&gt;Eventually we ran out of stuff to move out of the main process that didn’t
involve writing to the DB. To write stuff from other processes we needed a way
for the workers to stream updates to each other. The easiest and most obvious
way was to just use Redis and its pub&#x2F;sub support. &lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2020-11-03-synapse3.png&quot; alt=&quot;2020-11-03-synapse3.png&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;This almost allowed us to move writing of a particular stream to a different
worker, &lt;em&gt;except&lt;&#x2F;em&gt; writing to streams generally also meant invalidating caches
which in itself requires writing to a stream. We needed a way of writing to
the cache invalidation stream from multiple workers at once.&lt;&#x2F;p&gt;
&lt;p&gt;Sharding the cache invalidation thankfully turned out to be easy, as workers
would simply call the cache invalidation function whenever they get an
invalidation notice over replication. In particular, the ordering of
invalidations from different workers doesn’t matter and so there isn’t a need
to calculate a single “persisted up-to position”. Sharding then just becomes a
case of adding the name of the worker that is writing the update to the
replication stream, and then workers reading from it can basically treat the
cache stream the same as if they were multiple streams, one per worker.&lt;&#x2F;p&gt;
&lt;p&gt;This then unlocks the ability to move writing of streams off the main process
and onto different workers - and so we added the “event persister” worker for
offloading the main event stream off the main process:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2020-11-03-synapse4.png&quot; alt=&quot;2020-11-03-synapse4.png&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;sharding-the-events-stream&quot;&gt;Sharding the events stream&lt;&#x2F;h2&gt;
&lt;p&gt;Eventually the worker responsible for doing nothing but persisting events
started maxing out CPU. This meant that we had to look at sharding the events
stream, i.e. writing to it from multiple workers.&lt;&#x2F;p&gt;
&lt;p&gt;This is more complicated than sharding the cache invalidation stream as the
ordering of the events does matter; we send them down sync streams, in order,
with a token that indicates where the sync stream is up to in the events
stream. This means that workers need to be able to calculate a “persisted
up-to position” when getting updates from different workers. &lt;&#x2F;p&gt;
&lt;p&gt;The easiest way of doing that is to simply set the persisted up-to position as
the minimum position received over federation from all active writers. This
works, except events would only be processed after all other writers have
subsequently written events (to advance the persisted position past the point
at which the event was written), which can add a lot of latency depending on
how often events are written. &lt;&#x2F;p&gt;
&lt;p&gt;A refinement is to note that if you have a persisted up-to position of 10,
then receive updates at sequential positions 11, 12, 13 and 14, you know that
everything between 10 and 14 has finished persisting (as you received updates
about them), and so can set the persisted up-to position to 14. Annoyingly,
it’s not required that positions are sequential without gaps (due to various
technical considerations), and so in the worst case this still has the same
problems as the naïve solution.&lt;&#x2F;p&gt;
&lt;p&gt;To avoid these problems we change the persisted up-to position to be a &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;Vector_clock&quot;&gt;vector
clock&lt;&#x2F;a&gt; of positions; tracking a
vector of positions - one per writer. This still allows answering the query of
“get all events after token X” (as events are written with the position and
the name of the writer). The persisted up-to position is then calculated by
just tracking the last position seen to arrive over replication from each
writer. &lt;&#x2F;p&gt;
&lt;p&gt;This allows writing events from multiple workers, while ensuring that other
workers can correctly keep track of a “persisted up-to position”. Then it&#x27;s
just a matter of inspecting the code to ensure that it does not assume that it
is the only writer to the stream. In the case of writing to the events stream,
we note that the function persisting events assumes it&#x27;s the only writer for a
given room, so when sharding we have to ensure that there are no concurrent
writes to the same room. This is most easily done by sharding based on room
ID, and ensuring that the mapping of room ID to worker does not change
(without coordination).&lt;&#x2F;p&gt;
&lt;p&gt;The only thing left is to then encode the vector clock position into the sync
tokens. We want to ensure that these tokens are not too long, as they get
included as query string parameters (e.g. the &lt;code&gt;since=&lt;&#x2F;code&gt; parameter of &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt;).
By assigning persistent unique integer IDs to workers the vector clock can be
persisted as a sequence of pairs of integers, which is relatively few bytes so
long as we don’t have too many workers writing to the events stream. We can
further reduce the size of the tokens by calculating an integer “persisted
up-to position” as we did before, encoding that and only including positions
for workers that are larger than the integer persisted upto position. (The
idea here is that most of the time only a small number of workers will be
ahead of the calculated persisted up-to position, and so we only need to
encode those).&lt;&#x2F;p&gt;
&lt;p&gt;And this is what we have today:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2020-11-03-synapse5.png&quot; alt=&quot;2020-11-03-synapse5.png&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The major limitation of the current situation is that you can’t dynamically
add&#x2F;remove workers which persist events, as the sharding by room ID is
calculated at startup, and so changing it requires restarting the whole
system. This could be replaced by any system that allowed coordination over
which persister is allowed to write to a room at any given point. However this
is likely tricky to get right in practice, but would allow dynamic auto
scaling of deployments, or automatically recovering from a worker that gets
wedged&#x2F;dies.&lt;&#x2F;p&gt;
&lt;p&gt;Finally, it’s worth noting that sharding event persisters isn’t the only
performance work that’s been going on - switching everything over to python 3
and async twisted has helped, along with lots of smaller optimisations on the
hot paths, and further rebalancing workers (e.g. moving background jobs off
the master process to dedicated workers).  We’ve also benefited a lot from the
maintainability of rolling out mypy typing throughout the codebase.  And next
up, we’ll be going back to speeding up the codebase as a whole - starting with
algorithmic state resolution improvements! 🎉&lt;&#x2F;p&gt;
&lt;h3 id=&quot;performance&quot;&gt;Performance&lt;&#x2F;h3&gt;
&lt;p&gt;So, how does it stack up?&lt;&#x2F;p&gt;
&lt;p&gt;Here’s the send time heatmap on Matrix.org showing the step change on Oct 16th
when we rolled out the second event persister (full disclosure: this also
coincides with moving background processes off the main Synapse process to a
background worker).  As you can see, we go from messages being spread over a
huge range of durations (up to several seconds) to the sweet spot being 50ms
or less - a spectacular improvement!&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2020-11-03-synapse-heatmap.png&quot; alt=&quot;2020-11-03-synapse-heatmap.png&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Meanwhile, here’s the actual CPU utilisation as we split the traffic from a
single event persister (yellow) to two persisters (one yellow, one blue),
showing the sharding beautifully horizontally balancing CPU between the two
active&#x2F;active worker processes:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2020-11-03-synapse-cpu.png&quot; alt=&quot;2020-11-03-synapse-cpu.png&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;We’ve yet to loadtest to see just how fast we can go now (before we start
hitting bottlenecks on the postgres cluster), but it sure feels good to have
all our CPU headroom back on Matrix.org again, ready for the next wave of
users to arrive.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;conclusion&quot;&gt;Conclusion&lt;&#x2F;h3&gt;
&lt;p&gt;So there you have it: folks running massive homeservers (50K+ concurrent
users) like Matrix.org (and &lt;em&gt;cough&lt;&#x2F;em&gt; various high profile public sector
deployments) are no longer held hostage by the bottleneck of the main synapse
process and should feel free to experiment with setting up event persister
workers to handle high traffic loads.  Otherwise, if you can spread your users
over smaller servers, that’s also a good bet (assuming they don’t have
massively overlapping room membership, like we see on Matrix.org.)&lt;&#x2F;p&gt;
&lt;p&gt;The current &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;develop&#x2F;docs&#x2F;workers.md&quot;&gt;worker
documentation&lt;&#x2F;a&gt;
is up-to-date, although does assume you are already very familiar with how to
administer Synapse.  It’s also very much subject to change, as we keep adding
new workers and improving the architecture.  However, now is a pretty good
time to get involved if you’re interested in large-scale Matrix deployments.&lt;&#x2F;p&gt;
&lt;p&gt;-- The Synapse Team&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.22.0 released</title>
		<published>2020-10-27T17:01:23+00:00</published>
		<updated>2020-10-27T17:01:23+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/10/27/synapse-1-22-0-released/" type="text/html"/>
		<id>matrix.org/blog/2020/10/27/synapse-1-22-0-released/</id>
		<content type="html">&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.22.0&quot;&gt;Synapse 1.22.0&lt;&#x2F;a&gt; now available!&lt;&#x2F;p&gt;
&lt;p&gt;This release focused on improving Synapse&#x27;s horizontal scalability, including:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Support for running background tasks in separate worker processes.&lt;&#x2F;li&gt;
&lt;li&gt;Fixes to sharded event persisters, which were experimentally introduced in 1.21.0.&lt;&#x2F;li&gt;
&lt;li&gt;Fixing a message duplication bug with worker-based deployments. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8476&quot;&gt;#8476&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Synapse 1.22.0 also has a few other notable changes:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Defaulting to &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;spec&#x2F;rooms&#x2F;v6&quot;&gt;version 6&lt;&#x2F;a&gt; rooms, per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2788&#x2F;&quot;&gt;MSC2788&lt;&#x2F;a&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;Initial support for three new experimental MSCs:
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2732&quot;&gt;MSC2732&lt;&#x2F;a&gt;: Supporting olm fallback keys&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2697&quot;&gt;MSC2697&lt;&#x2F;a&gt;: Supporting device dehydration&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2409&quot;&gt;MSC2409&lt;&#x2F;a&gt;: Allowing appservices to receive ephemeral events like read receipts, presence, and typing indicators.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Multi-arch Docker images, covering &lt;code&gt;arm64&lt;&#x2F;code&gt; and &lt;code&gt;arm&#x2F;v7&lt;&#x2F;code&gt; in addition to &lt;code&gt;amd64&lt;&#x2F;code&gt;.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Installation instructions are available &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md&quot;&gt;on GitHub&lt;&#x2F;a&gt;, as is the &lt;code&gt;v1.22.0&lt;&#x2F;code&gt; &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.22.0&quot;&gt;release tag&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Lastly, Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our thanks to everyone who contributed to this release, including &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Akkowicz&quot;&gt;@Akkowicz&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;BBBSnowball&quot;&gt;@BBBSnowball&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;maquis196&quot;&gt;@maquis196&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;samuel-p&quot;&gt;@samuel-p&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The full changelog for 1.22.0 is as follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-22-0-2020-10-27&quot;&gt;Synapse 1.22.0 (2020-10-27)&lt;&#x2F;h1&gt;
&lt;p&gt;No significant changes.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-22-0rc2-2020-10-26&quot;&gt;Synapse 1.22.0rc2 (2020-10-26)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix bugs where ephemeral events were not sent to appservices. Broke in v1.22.0rc1. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8648&quot;&gt;#8648&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8656&quot;&gt;#8656&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;user_daily_visits&lt;&#x2F;code&gt; table to not have duplicate rows per user&#x2F;device due to multiple user agents. Broke in v1.22.0rc1. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8654&quot;&gt;#8654&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-22-0rc1-2020-10-22&quot;&gt;Synapse 1.22.0rc1 (2020-10-22)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add a configuration option for always using the &amp;quot;userinfo endpoint&amp;quot; for OpenID Connect. This fixes support for some identity providers, e.g. GitLab. Contributed by Benjamin Koch. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7658&quot;&gt;#7658&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add ability for &lt;code&gt;ThirdPartyEventRules&lt;&#x2F;code&gt; modules to query and manipulate whether a room is in the public rooms directory. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8292&quot;&gt;#8292&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8467&quot;&gt;#8467&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for olm fallback keys (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2732&quot;&gt;MSC2732&lt;&#x2F;a&gt;). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8312&quot;&gt;#8312&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8501&quot;&gt;#8501&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for running background tasks in a separate worker process. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8369&quot;&gt;#8369&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8458&quot;&gt;#8458&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8489&quot;&gt;#8489&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8513&quot;&gt;#8513&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8544&quot;&gt;#8544&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8599&quot;&gt;#8599&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for device dehydration (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2697&quot;&gt;MSC2697&lt;&#x2F;a&gt;). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8380&quot;&gt;#8380&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2409&quot;&gt;MSC2409&lt;&#x2F;a&gt;, which allows sending typing, read receipts, and presence events to appservices. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8437&quot;&gt;#8437&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8590&quot;&gt;#8590&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Change default room version to &amp;quot;6&amp;quot;, per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2788&quot;&gt;MSC2788&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8461&quot;&gt;#8461&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add the ability to send non-membership events into a room via the &lt;code&gt;ModuleApi&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8479&quot;&gt;#8479&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Increase default upload size limit from 10M to 50M. Contributed by @Akkowicz. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8502&quot;&gt;#8502&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for modifying event content in &lt;code&gt;ThirdPartyRules&lt;&#x2F;code&gt; modules. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8535&quot;&gt;#8535&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8564&quot;&gt;#8564&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a longstanding bug where invalid ignored users in account data could break clients. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8454&quot;&gt;#8454&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where backfilling a room with an event that was missing the &lt;code&gt;redacts&lt;&#x2F;code&gt; field would break. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8457&quot;&gt;#8457&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t attempt to respond to some requests if the client has already disconnected. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8465&quot;&gt;#8465&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix message duplication if something goes wrong after persisting the event. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8476&quot;&gt;#8476&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix incremental sync returning an incorrect &lt;code&gt;prev_batch&lt;&#x2F;code&gt; token in timeline section, which when used to paginate returned events that were included in the incremental sync. Broken since v0.16.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8486&quot;&gt;#8486&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Expose the &lt;code&gt;uk.half-shot.msc2778.login.application_service&lt;&#x2F;code&gt; to clients from the login API. This feature was added in v1.21.0, but was not exposed as a potential login flow. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8504&quot;&gt;#8504&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix error code for &lt;code&gt;&#x2F;profile&#x2F;{userId}&#x2F;displayname&lt;&#x2F;code&gt; to be &lt;code&gt;M_BAD_JSON&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8517&quot;&gt;#8517&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug introduced in v1.7.0 that could cause Synapse to insert values from non-state &lt;code&gt;m.room.retention&lt;&#x2F;code&gt; events into the &lt;code&gt;room_retention&lt;&#x2F;code&gt; database table. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8527&quot;&gt;#8527&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix not sending events over federation when using sharded event writers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8536&quot;&gt;#8536&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a long standing bug where email notifications for encrypted messages were blank. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8545&quot;&gt;#8545&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix increase in the number of &lt;code&gt;There was no active span...&lt;&#x2F;code&gt; errors logged when using OpenTracing. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8567&quot;&gt;#8567&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug that prevented errors encountered during execution of the &lt;code&gt;synapse_port_db&lt;&#x2F;code&gt; from being correctly printed. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8585&quot;&gt;#8585&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix appservice transactions to only include a maximum of 100 persistent and 100 ephemeral events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8606&quot;&gt;#8606&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;updates-to-the-docker-image&quot;&gt;Updates to the Docker image&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Added multi-arch support (arm64,arm&#x2F;v7) for the docker images. Contributed by @maquis196. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7921&quot;&gt;#7921&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for passing commandline args to the synapse process. Contributed by @samuel-p. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8390&quot;&gt;#8390&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Update the directions for using the manhole with coroutines. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8462&quot;&gt;#8462&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve readme by adding new shield.io badges. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8493&quot;&gt;#8493&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Added note about docker in manhole.md regarding which ip address to bind to. Contributed by @Maquis196. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8526&quot;&gt;#8526&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Document the new behaviour of the &lt;code&gt;allowed_lifetime_min&lt;&#x2F;code&gt; and &lt;code&gt;allowed_lifetime_max&lt;&#x2F;code&gt; settings in the room retention configuration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8529&quot;&gt;#8529&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Drop unused &lt;code&gt;device_max_stream_id&lt;&#x2F;code&gt; table. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8589&quot;&gt;#8589&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Check for unreachable code with mypy. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8432&quot;&gt;#8432&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add unit test for event persister sharding. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8433&quot;&gt;#8433&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow events to be sent to clients sooner when using sharded event persisters. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8439&quot;&gt;#8439&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8488&quot;&gt;#8488&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8496&quot;&gt;#8496&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8499&quot;&gt;#8499&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Configure &lt;code&gt;public_baseurl&lt;&#x2F;code&gt; when using demo scripts. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8443&quot;&gt;#8443&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add SQL logging on queries that happen during startup. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8448&quot;&gt;#8448&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Speed up unit tests when using PostgreSQL. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8450&quot;&gt;#8450&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove redundant database loads of stream_ordering for events we already have. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8452&quot;&gt;#8452&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce inconsistencies between codepaths for membership and non-membership events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8463&quot;&gt;#8463&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Combine &lt;code&gt;SpamCheckerApi&lt;&#x2F;code&gt; with the more generic &lt;code&gt;ModuleApi&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8464&quot;&gt;#8464&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Additional testing for &lt;code&gt;ThirdPartyEventRules&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8468&quot;&gt;#8468&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;-d&lt;&#x2F;code&gt; option to &lt;code&gt;.&#x2F;scripts-dev&#x2F;lint.sh&lt;&#x2F;code&gt; to lint files that have changed since the last git commit. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8472&quot;&gt;#8472&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Unblacklist some sytests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8474&quot;&gt;#8474&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Include the log level in the phone home stats. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8477&quot;&gt;#8477&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove outdated sphinx documentation, scripts and configuration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8480&quot;&gt;#8480&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify error message when plugin config parsers raise an error. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8492&quot;&gt;#8492&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove the deprecated &lt;code&gt;Handlers&lt;&#x2F;code&gt; object. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8494&quot;&gt;#8494&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a threadsafety bug in unit tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8497&quot;&gt;#8497&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add user agent to user_daily_visits table. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8503&quot;&gt;#8503&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add type hints to various parts of the code base. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8407&quot;&gt;#8407&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8505&quot;&gt;#8505&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8507&quot;&gt;#8507&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8547&quot;&gt;#8547&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8562&quot;&gt;#8562&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8609&quot;&gt;#8609&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unused code from the test framework. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8514&quot;&gt;#8514&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Apply some internal fixes to the &lt;code&gt;HomeServer&lt;&#x2F;code&gt; class to make its code more idiomatic and statically-verifiable. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8515&quot;&gt;#8515&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Factor out common code between &lt;code&gt;RoomMemberHandler._locally_reject_invite&lt;&#x2F;code&gt; and &lt;code&gt;EventCreationHandler.create_event&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8537&quot;&gt;#8537&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve database performance by executing more queries without starting transactions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8542&quot;&gt;#8542&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Rename &lt;code&gt;Cache&lt;&#x2F;code&gt; to &lt;code&gt;DeferredCache&lt;&#x2F;code&gt;, to better reflect its purpose. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8548&quot;&gt;#8548&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move metric registration code down into &lt;code&gt;LruCache&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8561&quot;&gt;#8561&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8591&quot;&gt;#8591&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Replace &lt;code&gt;DeferredCache&lt;&#x2F;code&gt; with the lighter-weight &lt;code&gt;LruCache&lt;&#x2F;code&gt; where possible. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8563&quot;&gt;#8563&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add virtualenv-generated folders to &lt;code&gt;.gitignore&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8566&quot;&gt;#8566&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;get_immediate&lt;&#x2F;code&gt; method to &lt;code&gt;DeferredCache&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8568&quot;&gt;#8568&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix mypy not properly checking across the codebase, additionally, fix a typing assertion error in &lt;code&gt;handlers&#x2F;auth.py&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8569&quot;&gt;#8569&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;synmark&lt;&#x2F;code&gt; benchmark runner. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8571&quot;&gt;#8571&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Modify &lt;code&gt;DeferredCache.get()&lt;&#x2F;code&gt; to return &lt;code&gt;Deferred&lt;&#x2F;code&gt;s instead of &lt;code&gt;ObservableDeferred&lt;&#x2F;code&gt;s. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8572&quot;&gt;#8572&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Adjust a protocol-type definition to fit &lt;code&gt;sqlite3&lt;&#x2F;code&gt; assertions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8577&quot;&gt;#8577&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Support macOS on the &lt;code&gt;synmark&lt;&#x2F;code&gt; benchmark runner. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8578&quot;&gt;#8578&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update &lt;code&gt;mypy&lt;&#x2F;code&gt; static type checker to 0.790. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8583&quot;&gt;#8583&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8600&quot;&gt;#8600&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Re-organize the structured logging code to separate the TCP transport handling from the JSON formatting. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8587&quot;&gt;#8587&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove extraneous unittest logging decorators from unit tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8592&quot;&gt;#8592&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Minor optimisations in caching code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8593&quot;&gt;#8593&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8594&quot;&gt;#8594&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Dendrite 0.2.0 released</title>
		<published>2020-10-20T19:35:01+00:00</published>
		<updated>2020-10-20T19:35:01+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/10/20/dendrite-0-2-0-released/" type="text/html"/>
		<id>matrix.org/blog/2020/10/20/dendrite-0-2-0-released/</id>
		<content type="html">&lt;p&gt;Hi all,&lt;&#x2F;p&gt;
&lt;p&gt;It&#x27;s been over a week since our next-generation homeserver &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2020&#x2F;10&#x2F;08&#x2F;dendrite-is-entering-beta&quot;&gt;Dendrite entered
beta&lt;&#x2F;a&gt;, and it&#x27;s
been a wild rollercoaster ride as the team has been frantically zapping all
the initial teething issues that came up - mostly around room federation
getting &#x27;stuck&#x27; due to needing to fix bugs in how room state is managed.  Huge
huge thanks to everyone who has spun up a Dendrite to experiment and report
bugs!&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;re now in an impressively better place, and it&#x27;s feeling way more stable now
(but please don&#x27;t trust it with your data yet).  So we&#x27;ve skipped 0.1.x and jumped
straight to 0.2.0.&lt;&#x2F;p&gt;
&lt;p&gt;Now would be a great time for more intrepid explorers to try spinning up a
server from https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;dendrite and see how it feels - the
more feedback the better.  And if you got scared off by weird bugs in 0.1.0,
now&#x27;s the right time to try it again!&lt;&#x2F;p&gt;
&lt;p&gt;Full changelog follows:&lt;&#x2F;p&gt;
&lt;h2 id=&quot;dendrite-0-2-0-2020-10-20&quot;&gt;Dendrite 0.2.0 (2020-10-20)&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;important&quot;&gt;Important&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;This release makes breaking changes for polylith deployments, since they now use the multi-personality binary rather than separate binary files
&lt;ul&gt;
&lt;li&gt;Users of polylith deployments should revise their setups to use the new binary - see the Features section below&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;This release also makes breaking changes for Docker deployments, as are now publishing images to Docker Hub in separate repositories for monolith and polylith
&lt;ul&gt;
&lt;li&gt;New repositories are as follows: &lt;a href=&quot;https:&#x2F;&#x2F;hub.docker.com&#x2F;repository&#x2F;docker&#x2F;matrixdotorg&#x2F;dendrite-monolith&quot;&gt;matrixdotorg&#x2F;dendrite-monolith&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;hub.docker.com&#x2F;repository&#x2F;docker&#x2F;matrixdotorg&#x2F;dendrite-polylith&quot;&gt;matrixdotorg&#x2F;dendrite-polylith&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;The new &lt;code&gt;latest&lt;&#x2F;code&gt; tag will be updated with the latest release, and new versioned tags, e.g. &lt;code&gt;v0.2.0&lt;&#x2F;code&gt;, will preserve specific release versions&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;dendrite&#x2F;tree&#x2F;master&#x2F;build&#x2F;docker&quot;&gt;Sample Compose configs&lt;&#x2F;a&gt; have been updated - if you are running a Docker deployment, please review the changes&lt;&#x2F;li&gt;
&lt;li&gt;Images for the client API proxy and federation API proxy are no longer provided as they are unsupported - please use &lt;a href=&quot;docs&#x2F;nginx&#x2F;&quot;&gt;nginx&lt;&#x2F;a&gt; (or another reverse proxy) instead&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;features&quot;&gt;Features&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;Dendrite polylith deployments now use a special multi-personality binary, rather than separate binaries
&lt;ul&gt;
&lt;li&gt;This is cleaner, builds faster and simplifies deployment&lt;&#x2F;li&gt;
&lt;li&gt;The first command line argument states the component to run, e.g. &lt;code&gt;.&#x2F;dendrite-polylith-multi roomserver&lt;&#x2F;code&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Database migrations are now run at startup&lt;&#x2F;li&gt;
&lt;li&gt;Invalid UTF-8 in requests is now rejected (contributed by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Pestdoktor&quot;&gt;Pestdoktor&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fully read markers are now implemented in the client API (contributed by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Lesterpig&quot;&gt;Lesterpig&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Missing auth events are now retrieved from other servers in the room, rather than just the event origin&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;m.room.create&lt;&#x2F;code&gt; events are now validated properly when processing a &lt;code&gt;&#x2F;send_join&lt;&#x2F;code&gt; response&lt;&#x2F;li&gt;
&lt;li&gt;The roomserver now implements &lt;code&gt;KindOld&lt;&#x2F;code&gt; for handling historic events without them becoming forward extremity candidates, i.e. for backfilled or missing events&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;fixes&quot;&gt;Fixes&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;State resolution v2 performance has been improved dramatically when dealing with large state sets&lt;&#x2F;li&gt;
&lt;li&gt;The roomserver no longer processes outlier events if they are already known&lt;&#x2F;li&gt;
&lt;li&gt;A SQLite locking issue in the previous events updater has been fixed&lt;&#x2F;li&gt;
&lt;li&gt;The client API &lt;code&gt;&#x2F;state&lt;&#x2F;code&gt; endpoint now correctly returns state after the leave event, if the user has left the room&lt;&#x2F;li&gt;
&lt;li&gt;The client API &lt;code&gt;&#x2F;createRoom&lt;&#x2F;code&gt; endpoint now sends cumulative state to the roomserver for the initial room events&lt;&#x2F;li&gt;
&lt;li&gt;The federation API &lt;code&gt;&#x2F;send&lt;&#x2F;code&gt; endpoint now correctly requests the entire room state from the roomserver when needed&lt;&#x2F;li&gt;
&lt;li&gt;Some internal HTTP API paths have been fixed in the user API (contributed by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;S7evinK&quot;&gt;S7evinK&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;A race condition in the rate limiting code resulting in concurrent map writes has been fixed&lt;&#x2F;li&gt;
&lt;li&gt;Each component now correctly starts a consumer&#x2F;producer connection in monolith mode (when using Kafka)&lt;&#x2F;li&gt;
&lt;li&gt;State resolution is no longer run for single trusted state snapshots that have been verified before&lt;&#x2F;li&gt;
&lt;li&gt;A crash when rolling back the transaction in the latest events updater has been fixed&lt;&#x2F;li&gt;
&lt;li&gt;Typing events are now ignored when the sender domain does not match the origin server&lt;&#x2F;li&gt;
&lt;li&gt;Duplicate redaction entries no longer result in database errors&lt;&#x2F;li&gt;
&lt;li&gt;Recursion has been removed from the code path for retrieving missing events&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;QueryMissingAuthPrevEvents&lt;&#x2F;code&gt; now returns events that have no associated state as if they are missing&lt;&#x2F;li&gt;
&lt;li&gt;Signing key fetchers no longer ignore keys for the local domain, if retrieving a key that is not known in the local config&lt;&#x2F;li&gt;
&lt;li&gt;Federation timeouts have been adjusted so we don&#x27;t give up on remote requests so quickly&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;create-account&lt;&#x2F;code&gt; no longer relies on the device database (contributed by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ThatNerdyPikachu&quot;&gt;ThatNerdyPikachu&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;known-issues&quot;&gt;Known issues&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;Old events can incorrectly appear in &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; as if they are new when retrieving missing events from federated servers, causing them to appear at the bottom of the timeline in clients&lt;&#x2F;li&gt;
&lt;li&gt;Memory can explode when catching up after a federation outage.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.21.2 released, and security advisory.</title>
		<published>2020-10-15T17:25:42+00:00</published>
		<updated>2020-10-15T17:16:42+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/10/15/synapse-1-21-2-released-and-security-advisory/" type="text/html"/>
		<id>matrix.org/blog/2020/10/15/synapse-1-21-2-released-and-security-advisory/</id>
		<content type="html">&lt;p&gt;Hi folks,&lt;&#x2F;p&gt;
&lt;p&gt;Today we have released Synapse 1.21.2, which fixes a couple of minor bugs that crept into the previous release. Full details are below.&lt;&#x2F;p&gt;
&lt;p&gt;Separately, we are advising any administrators who have not yet upgraded to Synapse 1.21.0 or later to do so as soon as possible. Previous versions of Synapse were vulnerable to a cross-site-scripting (XSS) attack; the bug was fixed in Synapse 1.21.0 with &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;8444&quot;&gt;PR #8444&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The changelog for 1.21.2 is as follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-21-2-2020-10-15&quot;&gt;Synapse 1.21.2 (2020-10-15)&lt;&#x2F;h1&gt;
&lt;p&gt;Debian packages and Docker images have been rebuilt using the latest versions of dependency libraries, including authlib 0.15.1. Please see bugfixes below.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix rare bug where sending an event would fail due to a racey assertion. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8530&quot;&gt;#8530&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;An updated version of the authlib dependency is included in the Docker and Debian images to fix an issue using OpenID Connect. See &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8534&quot;&gt;#8534&lt;&#x2F;a&gt; for details.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.21.1 released</title>
		<published>2020-10-13T00:00:00+00:00</published>
		<updated>2020-10-13T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/10/13/synapse-1-21-1-released/" type="text/html"/>
		<id>matrix.org/blog/2020/10/13/synapse-1-21-1-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.21.1 has landed!&lt;&#x2F;p&gt;
&lt;p&gt;Highlights of 1.21.1 include:-&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Add experimental support for sharding event persister. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8294&quot;&gt;#8294&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8387&quot;&gt;#8387&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8396&quot;&gt;#8396&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8419&quot;&gt;#8419&lt;&#x2F;a&gt;)&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Add experimental prometheus metric to track numbers of &amp;quot;large&amp;quot; rooms for state resolutiom. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8425&quot;&gt;#8425&lt;&#x2F;a&gt;)&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Add prometheus metrics to track federation delays. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8430&quot;&gt;#8430&lt;&#x2F;a&gt;)&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Fix messages not being sent over federation until an event is sent into the same room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8230&quot;&gt;#8230&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8247&quot;&gt;#8247&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8258&quot;&gt;#8258&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8272&quot;&gt;#8272&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8322&quot;&gt;#8322&lt;&#x2F;a&gt;)&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;We&#x27;ve also made some improvements to SSO and added new admin APIs.&lt;&#x2F;p&gt;
&lt;p&gt;Get the new releases from any of the usual sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md. 1.21.1 is on github &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.21.1&quot;&gt;here&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The changelog for 1.21.1 is as follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-21-1-2020-10-13&quot;&gt;Synapse 1.21.1 (2020-10-13)&lt;&#x2F;h1&gt;
&lt;p&gt;This release fixes a regression in v1.21.0 that prevented debian packages from being built.&lt;&#x2F;p&gt;
&lt;p&gt;It is otherwise identical to v1.21.0.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-21-0-2020-10-12&quot;&gt;Synapse 1.21.0 (2020-10-12)&lt;&#x2F;h1&gt;
&lt;p&gt;No significant changes since v1.21.0rc3.&lt;&#x2F;p&gt;
&lt;p&gt;As &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v1.21.1&#x2F;CHANGES.md#synapse-1200-2020-09-22&quot;&gt;noted in v1.20.0&lt;&#x2F;a&gt;, a future release will drop support for accessing Synapse&#x27;s &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;tree&#x2F;master&#x2F;docs&#x2F;admin_api&quot;&gt;Admin API&lt;&#x2F;a&gt; under the &lt;code&gt;&#x2F;_matrix&#x2F;client&#x2F;*&lt;&#x2F;code&gt; endpoint prefixes. At that point, the Admin API will only be accessible under &lt;code&gt;&#x2F;_synapse&#x2F;admin&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-21-0rc3-2020-10-08&quot;&gt;Synapse 1.21.0rc3 (2020-10-08)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix duplication of events on high traffic servers, caused by PostgreSQL &lt;code&gt;could not serialize access due to concurrent update&lt;&#x2F;code&gt; errors. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8456&quot;&gt;#8456&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add Groovy Gorilla to the list of distributions we build &lt;code&gt;.deb&lt;&#x2F;code&gt;s for. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8475&quot;&gt;#8475&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-21-0rc2-2020-10-02&quot;&gt;Synapse 1.21.0rc2 (2020-10-02)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Convert additional templates from inline HTML to Jinja2 templates. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8444&quot;&gt;#8444&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a regression in v1.21.0rc1 which broke thumbnails of remote media. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8438&quot;&gt;#8438&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Do not expose the experimental &lt;code&gt;uk.half-shot.msc2778.login.application_service&lt;&#x2F;code&gt; flow in the login API, which caused a compatibility problem with Element iOS. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8440&quot;&gt;#8440&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix malformed log line in new federation &amp;quot;catch up&amp;quot; logic. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8442&quot;&gt;#8442&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix DB query on startup for negative streams which caused long start up times. Introduced in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8374&quot;&gt;#8374&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8447&quot;&gt;#8447&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-21-0rc1-2020-10-01&quot;&gt;Synapse 1.21.0rc1 (2020-10-01)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features-1&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Require the user to confirm that their password should be reset after clicking the email confirmation link. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8004&quot;&gt;#8004&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an admin API &lt;code&gt;GET &#x2F;_synapse&#x2F;admin&#x2F;v1&#x2F;event_reports&lt;&#x2F;code&gt; to read entries of table &lt;code&gt;event_reports&lt;&#x2F;code&gt;. Contributed by @dklimpel. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8217&quot;&gt;#8217&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Consolidate the SSO error template across all configuration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8248&quot;&gt;#8248&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8405&quot;&gt;#8405&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a configuration option to specify a whitelist of domains that a user can be redirected to after validating their email or phone number. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8275&quot;&gt;#8275&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8417&quot;&gt;#8417&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add experimental support for sharding event persister. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8294&quot;&gt;#8294&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8387&quot;&gt;#8387&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8396&quot;&gt;#8396&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8419&quot;&gt;#8419&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add the room topic and avatar to the room details admin API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8305&quot;&gt;#8305&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an admin API for querying rooms where a user is a member. Contributed by @dklimpel. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8306&quot;&gt;#8306&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;uk.half-shot.msc2778.login.application_service&lt;&#x2F;code&gt; login type to allow appservices to login. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8320&quot;&gt;#8320&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a configuration option that allows existing users to log in with OpenID Connect. Contributed by @BBBSnowball and @OmmyZhang. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8345&quot;&gt;#8345&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add prometheus metrics for replication requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8406&quot;&gt;#8406&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Support passing additional single sign-on parameters to the client. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8413&quot;&gt;#8413&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add experimental reporting of metrics on expensive rooms for state-resolution. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8420&quot;&gt;#8420&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add experimental prometheus metric to track numbers of &amp;quot;large&amp;quot; rooms for state resolutiom. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8425&quot;&gt;#8425&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add prometheus metrics to track federation delays. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8430&quot;&gt;#8430&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-2&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a bug in the media repository where remote thumbnails with the same size but different crop methods would overwrite each other. Contributed by @deepbluev7. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7124&quot;&gt;#7124&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix inconsistent handling of non-existent push rules, and stop tracking the &lt;code&gt;enabled&lt;&#x2F;code&gt; state of removed push rules. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7796&quot;&gt;#7796&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a longstanding bug when storing a media file with an empty &lt;code&gt;upload_name&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7905&quot;&gt;#7905&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix messages not being sent over federation until an event is sent into the same room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8230&quot;&gt;#8230&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8247&quot;&gt;#8247&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8258&quot;&gt;#8258&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8272&quot;&gt;#8272&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8322&quot;&gt;#8322&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a longstanding bug where files that could not be thumbnailed would result in an Internal Server Error. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8236&quot;&gt;#8236&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8435&quot;&gt;#8435&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Upgrade minimum version of &lt;code&gt;canonicaljson&lt;&#x2F;code&gt; to version 1.4.0, to fix an unicode encoding issue. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8262&quot;&gt;#8262&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix longstanding bug which could lead to incomplete database upgrades on SQLite. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8265&quot;&gt;#8265&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix stack overflow when stderr is redirected to the logging system, and the logging system encounters an error. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8268&quot;&gt;#8268&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug which cause the logging system to report errors, if &lt;code&gt;DEBUG&lt;&#x2F;code&gt; was enabled and no &lt;code&gt;context&lt;&#x2F;code&gt; filter was applied. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8278&quot;&gt;#8278&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix edge case where push could get delayed for a user until a later event was pushed. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8287&quot;&gt;#8287&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix fetching malformed events from remote servers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8324&quot;&gt;#8324&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;UnboundLocalError&lt;&#x2F;code&gt; from occurring when appservices send a malformed register request. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8329&quot;&gt;#8329&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t send push notifications to expired user accounts. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8353&quot;&gt;#8353&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a regression in v1.19.0 with reactivating users through the admin API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8362&quot;&gt;#8362&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where during device registration the length of the device name wasn&#x27;t limited. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8364&quot;&gt;#8364&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Include &lt;code&gt;guest_access&lt;&#x2F;code&gt; in the fields that are checked for null bytes when updating &lt;code&gt;room_stats_state&lt;&#x2F;code&gt;. Broke in v1.7.2. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8373&quot;&gt;#8373&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix theoretical race condition where events are not sent down &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; if the synchrotron worker is restarted without restarting other workers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8374&quot;&gt;#8374&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug which could cause errors in rooms with malformed membership events, on servers using sqlite. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8385&quot;&gt;#8385&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &amp;quot;Re-starting finished log context&amp;quot; warning when receiving an event we already had over federation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8398&quot;&gt;#8398&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix incorrect handling of timeouts on outgoing HTTP requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8400&quot;&gt;#8400&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a regression in v1.20.0 in the &lt;code&gt;synapse_port_db&lt;&#x2F;code&gt; script regarding the &lt;code&gt;ui_auth_sessions_ips&lt;&#x2F;code&gt; table. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8410&quot;&gt;#8410&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unnecessary 3PID registration check when resetting password via an email address. Bug introduced in v0.34.0rc2. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8414&quot;&gt;#8414&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add &lt;code&gt;&#x2F;_synapse&#x2F;client&lt;&#x2F;code&gt; to the reverse proxy documentation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8227&quot;&gt;#8227&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add note to the reverse proxy settings documentation about disabling Apache&#x27;s mod_security2. Contributed by Julian Fietkau (@jfietkau). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8375&quot;&gt;#8375&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve description of &lt;code&gt;server_name&lt;&#x2F;code&gt; config option in &lt;code&gt;homserver.yaml&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8415&quot;&gt;#8415&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Drop support for &lt;code&gt;prometheus_client&lt;&#x2F;code&gt; older than 0.4.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8426&quot;&gt;#8426&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes-1&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix tests on distros which disable TLSv1.0. Contributed by @danc86. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8208&quot;&gt;#8208&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Simplify the distributor code to avoid unnecessary work. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8216&quot;&gt;#8216&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove the &lt;code&gt;populate_stats_process_rooms_2&lt;&#x2F;code&gt; background job and restore functionality to &lt;code&gt;populate_stats_process_rooms&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8243&quot;&gt;#8243&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up type hints for &lt;code&gt;PaginationConfig&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8250&quot;&gt;#8250&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8282&quot;&gt;#8282&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Track the latest event for every destination and room for catch-up after federation outage. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8256&quot;&gt;#8256&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix non-user visible bug in implementation of &lt;code&gt;MultiWriterIdGenerator.get_current_token_for_writer&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8257&quot;&gt;#8257&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Switch to the JSON implementation from the standard library. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8259&quot;&gt;#8259&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add type hints to &lt;code&gt;synapse.util.async_helpers&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8260&quot;&gt;#8260&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Simplify tests that mock asynchronous functions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8261&quot;&gt;#8261&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add type hints to &lt;code&gt;StreamToken&lt;&#x2F;code&gt; and &lt;code&gt;RoomStreamToken&lt;&#x2F;code&gt; classes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8279&quot;&gt;#8279&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Change &lt;code&gt;StreamToken.room_key&lt;&#x2F;code&gt; to be a &lt;code&gt;RoomStreamToken&lt;&#x2F;code&gt; instance. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8281&quot;&gt;#8281&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor notifier code to correctly use the max event stream position. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8288&quot;&gt;#8288&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Use slotted classes where possible. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8296&quot;&gt;#8296&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Support testing the local Synapse checkout against the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;complement&#x2F;&quot;&gt;Complement homeserver test suite&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8317&quot;&gt;#8317&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update outdated usages of &lt;code&gt;metaclass&lt;&#x2F;code&gt; to python 3 syntax. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8326&quot;&gt;#8326&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move lint-related dependencies to package-extra field, update CONTRIBUTING.md to utilise this. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8330&quot;&gt;#8330&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8377&quot;&gt;#8377&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Use the &lt;code&gt;admin_patterns&lt;&#x2F;code&gt; helper in additional locations. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8331&quot;&gt;#8331&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix test logging to allow braces in log output. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8335&quot;&gt;#8335&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove &lt;code&gt;__future__&lt;&#x2F;code&gt; imports related to Python 2 compatibility. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8337&quot;&gt;#8337&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Simplify &lt;code&gt;super()&lt;&#x2F;code&gt; calls to Python 3 syntax. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8344&quot;&gt;#8344&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bad merge from &lt;code&gt;release-v1.20.0&lt;&#x2F;code&gt; branch to &lt;code&gt;develop&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8354&quot;&gt;#8354&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Factor out a &lt;code&gt;_send_dummy_event_for_room&lt;&#x2F;code&gt; method. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8370&quot;&gt;#8370&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve logging of state resolution. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8371&quot;&gt;#8371&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add type annotations to &lt;code&gt;SimpleHttpClient&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8372&quot;&gt;#8372&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor ID generators to use &lt;code&gt;async with&lt;&#x2F;code&gt; syntax. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8383&quot;&gt;#8383&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;EventStreamPosition&lt;&#x2F;code&gt; type. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8388&quot;&gt;#8388&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Create a mechanism for marking tests &amp;quot;logcontext clean&amp;quot;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8399&quot;&gt;#8399&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;A pair of tiny cleanups in the federation request code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8401&quot;&gt;#8401&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add checks on startup that PostgreSQL sequences are consistent with their associated tables. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8402&quot;&gt;#8402&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Do not include appservice users when calculating the total MAU for a server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8404&quot;&gt;#8404&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Typing fixes for &lt;code&gt;synapse.handlers.federation&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8422&quot;&gt;#8422&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Various refactors to simplify stream token handling. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8423&quot;&gt;#8423&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make stream token serializing&#x2F;deserializing async. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8427&quot;&gt;#8427&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Dendrite is entering Beta!</title>
		<published>2020-10-08T00:00:00+00:00</published>
		<updated>2020-10-08T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/10/08/dendrite-is-entering-beta/" type="text/html"/>
		<id>matrix.org/blog/2020/10/08/dendrite-is-entering-beta/</id>
		<content type="html">&lt;p&gt;Hi all,&lt;&#x2F;p&gt;
&lt;p&gt;We’re very excited to announce that Dendrite, the next-generation Matrix homeserver from the core Matrix team, is at last exiting alpha development and entering beta testing!&lt;&#x2F;p&gt;
&lt;p&gt;The path we’ve taken to get here has been quite a curious one, and it’s worth recapping to give context on why it’s taken reality a little while to catch up with the dream. :)&lt;&#x2F;p&gt;
&lt;p&gt;The Dendrite project has its roots in 2016 as &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;dendron&quot;&gt;Dendron&lt;&#x2F;a&gt;: an attempt to write a next-generation homeserver in Golang rather than Python, in order to benefit from Go’s stronger typing, ease of profiling (no twisted stack-shredding via deferredInlineCallbacks), multithreading and faster GC performance.  The idea for Dendron was to do a &lt;a href=&quot;https:&#x2F;&#x2F;martinfowler.com&#x2F;bliki&#x2F;StranglerFigApplication.html&quot;&gt;strangler pattern&lt;&#x2F;a&gt; rewrite of Synapse - where we’d insert Dendron in front of Synapse as a load balancer, and incrementally replace Synapse’s API endpoints with ones implemented by Dendron.&lt;&#x2F;p&gt;
&lt;p&gt;However, as the project started to progress, it became clear that this was going to end up with many of Synapse’s architectural choices being baked into the project - particularly the DB schema and data flow architecture, such that the new endpoints could interoperate with the existing Python ones.  We got as far as putting Dendron live on matrix.org and moving some of the login&#x2F;registration APIs over to it… but then work fizzled out due to Synapse demanding more urgent attention as traffic grew on Matrix.org, combined with concerns about whether Dendron was the right approach in general.&lt;&#x2F;p&gt;
&lt;p&gt;So, towards the end of 2016 (after the rush to launch &lt;del&gt;Vector&lt;&#x2F;del&gt; &lt;del&gt;Riot&lt;&#x2F;del&gt; Element that summer), we went back to the drawing board to devise Dendrite—“Dendron done right!”—as opposed to Dendron, which in retrospect was Dendrite done wrong. ;) The new vision was:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Build a massively horizontally scalable architecture, such that large Matrix deployments like matrix.org and big government deployments could run smoothly without the constant scalability headaches we were seeing at the time with Synapse&lt;&#x2F;li&gt;
&lt;li&gt;Do so by splitting the server into well-defined microservice components, each of which could independently horizontally scale, each with its own DB (if desired)&lt;&#x2F;li&gt;
&lt;li&gt;Connect the components together with a set of append-only logs via &lt;a href=&quot;https:&#x2F;&#x2F;kafka.apache.org&#x2F;&quot;&gt;Kafka&lt;&#x2F;a&gt; or similar, easily letting components shard and maintain their databases from the logs, allowing rolling upgrades, possibly schema upgrades, and all sorts of other niceties.  The logs effectively become a primary source of truth rather than putting all the onus on a massive monolithic ever-growing database&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Rather than Dendron’s top-down approach, instead Dendrite started bottom-up with the very hardest bit: &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;gomatrixserverlib&quot;&gt;gomatrixserverlib&lt;&#x2F;a&gt;, a standalone Go library implementing the state resolution algorithms and performing federation requests (such that it might also someday be used as a general purpose way to add Matrix federation support to an existing Go codebase).&lt;&#x2F;p&gt;
&lt;p&gt;Then we started building out the various components to implement the various services, starting with the roomserver (the service which models the history and state of one or more rooms in the server), then the syncserver (the service which implements the &#x2F;sync API to let clients receive messages), etc. We even implemented a simplified in-memory version of Kafka named &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;naffka&quot;&gt;naffka&lt;&#x2F;a&gt;—useful for glueing together the microservice components when running them all within a single binary.&lt;&#x2F;p&gt;
&lt;p&gt;Things were looking pretty positive by the summer of 2017: we had the server sending&#x2F;receiving messages, federating with Synapse, and looking tantalisingly close:&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;We just sent the first ever synapse-&amp;gt;dendrite federated traffic, including full dendrite media API (thumbnailing, fed, etc)!!! :D :D :D &lt;a href=&quot;https:&#x2F;&#x2F;t.co&#x2F;sBcM2jMAr6&quot;&gt;pic.twitter.com&#x2F;sBcM2jMAr6&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;&amp;mdash; Matrix (@matrixdotorg) &lt;a href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg&#x2F;status&#x2F;872861579141947392?ref_src=twsrc%5Etfw&quot;&gt;June 8, 2017&lt;&#x2F;a&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;However, we then hit three fairly major obstacles:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2017&#x2F;07&#x2F;07&#x2F;a-call-to-arms-supporting-matrix&quot;&gt;Matrix lost its funding&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;In the ensuing uncertainty, the two lead developers (Mjark &amp;amp; Kegan) went to work elsewhere&lt;&#x2F;li&gt;
&lt;li&gt;Meanwhile, Matrix uptake was starting to explode and Synapse was failing to scale to handle the traffic on matrix.org (and elsewhere)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;At first, having formed what would become New Vector (now Element) to keep the rest of the core team hired, we pushed to see if we could get Dendrite finished fast enough to replace Synapse, with Erik &amp;amp; richvdh jumping over from Synapse to pick up the remaining work.  However, it became clear that we urgently needed a quicker solution to address all the overloaded Synapses out there, and so they swung back to focus on improving Synapse (taking inspiration from some of the design of Dendrite - e.g. offloading endpoints onto worker processes connected via replication streams, and using &lt;a href=&quot;https:&#x2F;&#x2F;opentracing.io&#x2F;&quot;&gt;OpenTracing&lt;&#x2F;a&gt; to debug traffic as it flows over the various services).&lt;&#x2F;p&gt;
&lt;p&gt;At this point, Dendrite maintenance was in effect valiantly taken over by the community, with Brendan and later Anoa keeping the ball going in 2017, joined by APWhitehat in GSoC 2018 and cnly in GSoC 2019.  The fact that Dendrite is now here today is thanks in no small part to their work to keep the project alive in its “wilderness years” between Sept 2017 and Dec 2019.&lt;&#x2F;p&gt;
&lt;p&gt;Meanwhile, it became clear that we were overdue getting Matrix itself out of beta - and the last thing we wanted to do was to split and dilute the implementation work of Matrix 1.0 over both Synapse and Dendrite - so we consciously made the decision to focus all our effort on Synapse for solving the remaining bugs and challenges.&lt;&#x2F;p&gt;
&lt;p&gt;Then, in July 2019, &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2019&#x2F;06&#x2F;11&#x2F;introducing-matrix-1-0-and-the-matrix-org-foundation&quot;&gt;Matrix and Synapse exited beta&lt;&#x2F;a&gt;, and we finally started to see light at the end of the tunnel.  In October we started dusting off Dendrite again - looking to use it as a relatively simple and flexible codebase for &lt;a href=&quot;https:&#x2F;&#x2F;youtu.be&#x2F;eA0KnTt4O7E?t=1423&quot;&gt;experimenting with Peer-to-Peer Matrix&lt;&#x2F;a&gt;, not least because being Go it can compile to WebAssembly and run clientside, and because even though Dendrite was originally built with massive deployments in mind, it turns out the elastic scaling means it can also scale down pretty small too—as a part of the &lt;a href=&quot;http:&#x2F;&#x2F;testflight.apple.com&#x2F;join&#x2F;Tgh2MEk6&quot;&gt;iOS P2P demo&lt;&#x2F;a&gt;, we’ve even ran full Dendrite homeservers on iPhones embedded into Element iOS! :)&lt;&#x2F;p&gt;
&lt;p&gt;In Dec 2019, we finally got to the point where Element could fund full-time dedicated development on Dendrite once again, with Neil Alexander joining the project and focusing fulltime on getting Dendrite out of alpha and getting it working for P2P and embedded usage (adding libp2p as a federation transport, and adding SQLite support) - and in Jan 2020 we got Dendrite &lt;a href=&quot;https:&#x2F;&#x2F;archive.fosdem.org&#x2F;2020&#x2F;schedule&#x2F;event&#x2F;dip_p2p_matrix&#x2F;&quot;&gt;successfully running clientside in a WASM service worker&lt;&#x2F;a&gt; (just in time for FOSDEM!). Then, in Feb 2020, Kegan returned to the project to work fulltime on Dendrite - and the race began in earnest to get Dendrite ready for beta!&lt;&#x2F;p&gt;
&lt;p&gt;Here’s a pretty picture courtesy of GitHub to visualise the progress:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2020-10-08-dendrite-contributors.png&quot; alt=&quot;020-10-08-dendrite-contributors.png&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Throughout 2020 there’s been a huge amount of stabilisation work and polish:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Refactoring much of Dendrite’s foundation to make the codebase more maintainable&lt;&#x2F;li&gt;
&lt;li&gt;Created all-new user server, key server, signing key server microservices&lt;&#x2F;li&gt;
&lt;li&gt;Moving some work from existing microservices (ultimately superseding the former currentstateserver, publicroomsapi and typingserver microservices altogether)&lt;&#x2F;li&gt;
&lt;li&gt;Developing new testing infrastructure:
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;complement&quot;&gt;Complement&lt;&#x2F;a&gt; - our brand new Golang Matrix integration test harness&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;dendrite&#x2F;blob&#x2F;master&#x2F;are-we-synapse-yet.py&quot;&gt;Are We Synapse Yet&lt;&#x2F;a&gt; - an aggregator which parses sytest&#x2F;complement output to compare how close Dendrite is to passing&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;All the Matrix 1.0 work - particularly state res v2 &amp;amp; room version support&lt;&#x2F;li&gt;
&lt;li&gt;Making it work with more P2P transports for &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2020&#x2F;06&#x2F;02&#x2F;introducing-p-2-p-matrix&#x2F;&quot;&gt;all the exciting P2P experiments&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;Supporting backfill and fetching missing events&lt;&#x2F;li&gt;
&lt;li&gt;Fixing up SQLite support to make it work as a first class citizen (with shared storage code where we can!)&lt;&#x2F;li&gt;
&lt;li&gt;Supporting both sending and rejecting invites (even over federation)&lt;&#x2F;li&gt;
&lt;li&gt;E2E encryption support (one-time keys, device lists, send-to-device support)&lt;&#x2F;li&gt;
&lt;li&gt;Improved federation sender logic (resend retries, backoffs, blacklisting, metrics, resetting backoffs when receiving transactions)&lt;&#x2F;li&gt;
&lt;li&gt;Handling both inbound and outbound redactions&lt;&#x2F;li&gt;
&lt;li&gt;User interactive authentication (and implemented on various ‘sudo’ endpoints e.g. deleting devices and changing passwords)&lt;&#x2F;li&gt;
&lt;li&gt;Respecting server ACLs&lt;&#x2F;li&gt;
&lt;li&gt;Rejecting &#x2F; soft-failing events properly&lt;&#x2F;li&gt;
&lt;li&gt;Support for database schema upgrades&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;... which brings us at last to the present day (Oct 2020), as we declare Dendrite sufficiently stable that we consider it ready for beta testing!&lt;&#x2F;p&gt;
&lt;p&gt;In practice, this means **Dendrite is now ready for experimentation by adventurous Matrix sysadmins. It is &lt;em&gt;NOT&lt;&#x2F;em&gt; ready for production usage yet, but we need folks to test it and help us iron out the remaining bugs!  **Please do not trust it with sensitive data yet, and we don’t recommend trying to run it at scale yet as we haven’t done any serious optimisation work yet.&lt;&#x2F;p&gt;
&lt;p&gt;That said, we do provide the following guarantees:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;We’re providing versioned releases from here on in, beginning with &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;dendrite&#x2F;releases&#x2F;tag&#x2F;v0.1.0&quot;&gt;0.1.0&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;We don’t expect any major breaking changes to the config or architecture before 1.0&lt;&#x2F;li&gt;
&lt;li&gt;Ready for early adopters to try running Dendrite without experiencing ~daily breaking churn&lt;&#x2F;li&gt;
&lt;li&gt;The database schema is now stable and will upgrade itself going forwards - your database should now be here to stay! (assuming we don’t hit any nasty data loss bugs during beta)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;In terms of comparison with Synapse, the main things you should get excited about are:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Dendrite aims to provide an &lt;strong&gt;efficient&lt;&#x2F;strong&gt;, &lt;strong&gt;reliable&lt;&#x2F;strong&gt; and &lt;strong&gt;scalable&lt;&#x2F;strong&gt; alternative to Synapse:
&lt;ul&gt;
&lt;li&gt;Efficient: A small memory footprint with better baseline performance than an out-of-the-box Synapse&lt;&#x2F;li&gt;
&lt;li&gt;Reliable: Implements the Matrix specification as written, using the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;sytest&quot;&gt;same test suite&lt;&#x2F;a&gt; as Synapse as well as a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;complement&quot;&gt;brand new Go test suite&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;Scalable: can run on multiple machines and eventually scale to massive homeserver deployments&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;This means significantly less memory usage than Synapse (depends on joined rooms, often between 50MB - 400MB resident memory) - although we haven’t tuned this at all yet!&lt;&#x2F;li&gt;
&lt;li&gt;All-new database model, where every microservice instance has its own database tables, letting them scale arbitrarily wide&lt;&#x2F;li&gt;
&lt;li&gt;The ability to efficiently use all your available CPU cores without needing to split into separate processes, thanks to Go and our extensive use of goroutines.  No more Python global interpreter lock! :)&lt;&#x2F;li&gt;
&lt;li&gt;Future experimental MSCs are likely to land in Dendrite before Synapse (e.g &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;blob&#x2F;matthew&#x2F;msc2753&#x2F;proposals&#x2F;2753-peeking-via-sync-v2.md&quot;&gt;MSC2753 Peeking via &#x2F;sync&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;blob&#x2F;matthew&#x2F;msc2444&#x2F;proposals&#x2F;2444-peeking-over-federation-peek-api.md&quot;&gt;MSC2444 Peeking over Federation&lt;&#x2F;a&gt; are already being prototyped (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;dendrite&#x2F;pull&#x2F;1370&quot;&gt;#1370&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;dendrite&#x2F;pull&#x2F;1391&quot;&gt;#1391&lt;&#x2F;a&gt;) in Dendrite rather than Synapse!)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;The provisos you should know about however are:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;We’re not feature complete yet: sytest reports 56% CS API coverage and 77% Federation coverage. &lt;strong&gt;NB: these are always going to be underestimates of how much Dendrite actually performs due to how the tests are spread out, in actuality it’s likely more 70% CS, 95% Fed.&lt;&#x2F;strong&gt;&lt;&#x2F;li&gt;
&lt;li&gt;No read receipts, membership lazy-loading, presence, push notifications, search, event context, key backups, cross-signing. See changelog for full limitations.&lt;&#x2F;li&gt;
&lt;li&gt;Not battle-tested in the wild by many people (there are probably only ~10 dendrites on the open network today!) - so there’s likely to be a broad spectrum of bugs at first.&lt;&#x2F;li&gt;
&lt;li&gt;Clients that require more exotic features, like lazy loading, may not behave properly yet&lt;&#x2F;li&gt;
&lt;li&gt;Please &lt;strong&gt;use Postgres rather than SQLite wherever possible&lt;&#x2F;strong&gt;—it’s faster and has fewer issues regarding concurrency (some requests on SQLite Dendrites may 500 with ‘database is locked’ - though we’ve worked hard to eliminate most of these)&lt;&#x2F;li&gt;
&lt;li&gt;Dendrite can run in either “monolith” or “polylith” mode. In monolith, all the microservices are linked into a single binary - and &lt;strong&gt;we recommend running in this configuration wherever possible&lt;&#x2F;strong&gt; for now. Monolith mode is &lt;em&gt;extremely&lt;&#x2F;em&gt; capable as it is and has fewer moving parts for things to go wrong and will be the right choice for the majority of beta deployments!&lt;&#x2F;li&gt;
&lt;li&gt;Whilst Dendrite is nearly 100% federation compatible, there may still be situations where it will split-brain and disagree with the current room state that Synapse has calculated. We expect these issues to resolve as we get more user feedback.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Architecture-wise, this is what Dendrite looks like under the hood today:&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2020-10-08-dendrite-arch.svg&quot; alt=&quot;2020-10-08-dendrite-arch.svg&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;To get up and running, please install Go and head on over to the Get Started guide at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;dendrite#get-started&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;dendrite#get-started&lt;&#x2F;a&gt; to join the fun :)&lt;&#x2F;p&gt;
&lt;p&gt;In terms of where we’re going next:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Read receipts. It’s a major missing feature and impacts UX significantly.&lt;&#x2F;li&gt;
&lt;li&gt;100% Federation coverage (according to sytest). It’s crucial that Dendrite instances play nicely with other servers. This will be the best metric we have for asserting that we are just as capable as Synapse at the fed level.&lt;&#x2F;li&gt;
&lt;li&gt;Optimisation—&lt;strong&gt;Dendrite has not been optimised yet for speed or resource utilisation!&lt;&#x2F;strong&gt;
&lt;ul&gt;
&lt;li&gt;We plan to add benchmarks which will stress test different microservices in the presence of many different scaling factors (number of users, number of rooms, size of room, number of devices per user, number of sync requests, etc). This will hopefully allow us to identify early on bottlenecks and slow algorithms&lt;&#x2F;li&gt;
&lt;li&gt;Good old fashioned pprof with known slow scenarios to see what’s consuming CPU&#x2F;memory and fixing issues ad-hoc (which we’ve already done a bit of pre-beta). This may involve adding additional in-memory caches, with a healthy respect for the complexities it may introduce (which Synapse has been bitten by)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;We plan to add first class feature flag support for experimental MSCs—experimentation is one thing which makes Dendrite notably different from Synapse, and supporting it more thoroughly going forwards will be important. This may mean adding additional hooks; potentially a dedicated microservice to cleanly separate experiments, we don’t know yet&lt;&#x2F;li&gt;
&lt;li&gt;P2P work will continue with vigour now we have a working, featureful, and relatively stable HS to embed and play with&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Longer term, it’s pretty hard to say right now when we expect to exit beta (it took Synapse 5 years to exit beta, after all ;) - but obviously we’ll need Dendrite to have parity with Synapse and have no known serious bugs.&lt;&#x2F;p&gt;
&lt;p&gt;Finally: you’re probably wondering what this means for Synapse.  Synapse is here to stay - with tens of thousands of deployments around the world serving tens of millions of users.  The majority of the core team is still focused on improving and optimising Synapse, and we’ll be keeping improving it for the foreseeable.&lt;&#x2F;p&gt;
&lt;p&gt;However, we’ll certainly be experimenting with new stuff on Dendrite first - whether that’s P2P, portable accounts, new-style communities, peeking etc.  We expect Synapse to be the stable long-term-supported solution, while Dendrite (particularly while in beta) will be the more unstable and experimental platform. In the longer term we’ll provide ways of migrating from Synapse to Dendrite however (probably via portable accounts), and perhaps in future new deployments may choose to use Dendrite - a bit like you might choose to use nginx rather than Apache for a new web server these days. But this will be a long transition—meanwhile we expect to see more and more next-generation homeservers like &lt;a href=&quot;http:&#x2F;&#x2F;conduit.rs&#x2F;&quot;&gt;Conduit&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;gitlab.com&#x2F;mascarene&#x2F;mascarene&quot;&gt;Mascarene&lt;&#x2F;a&gt; or &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-construct&#x2F;construct&quot;&gt;Construct&lt;&#x2F;a&gt; coming of age too.&lt;&#x2F;p&gt;
&lt;p&gt;So, there you have it. If you’re an intrepid sysadmin please spin up a Dendrite and start filing bugs! :)&lt;&#x2F;p&gt;
&lt;p&gt;— Matthew, Neil Alexander, Kegan and the whole Matrix team.&lt;&#x2F;p&gt;
&lt;p&gt;Here’s the official changelog:&lt;&#x2F;p&gt;
&lt;h3 id=&quot;client-server-api-features&quot;&gt;Client-Server API Features&lt;&#x2F;h3&gt;
&lt;h4 id=&quot;account-registration-and-management&quot;&gt;Account registration and management&lt;&#x2F;h4&gt;
&lt;ul&gt;
&lt;li&gt;Registration: By password only.&lt;&#x2F;li&gt;
&lt;li&gt;Login: By password only. No fallback.&lt;&#x2F;li&gt;
&lt;li&gt;Logout: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Change password: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Link email&#x2F;msisdn to account: No.&lt;&#x2F;li&gt;
&lt;li&gt;Deactivate account: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Check if username is available: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Account data: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;OpenID: No.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;rooms&quot;&gt;Rooms&lt;&#x2F;h4&gt;
&lt;ul&gt;
&lt;li&gt;Room creation: Yes, including presets.&lt;&#x2F;li&gt;
&lt;li&gt;Joining rooms: Yes, including by alias or &lt;code&gt;?server_name=&lt;&#x2F;code&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;Event sending: Yes, including transaction IDs.&lt;&#x2F;li&gt;
&lt;li&gt;Aliases: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Published room directory: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Kicking users: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Banning users: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Inviting users: Yes, but not third-party invites.&lt;&#x2F;li&gt;
&lt;li&gt;Forgetting rooms: No.&lt;&#x2F;li&gt;
&lt;li&gt;Room versions: All (v1 - v6)&lt;&#x2F;li&gt;
&lt;li&gt;Tagging: Yes.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;user-management&quot;&gt;User management&lt;&#x2F;h4&gt;
&lt;ul&gt;
&lt;li&gt;User directory: Basic support.&lt;&#x2F;li&gt;
&lt;li&gt;Ignoring users: No.&lt;&#x2F;li&gt;
&lt;li&gt;Groups&#x2F;Communities: No.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;device-management&quot;&gt;Device management&lt;&#x2F;h4&gt;
&lt;ul&gt;
&lt;li&gt;Creating devices: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Deleting devices: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Send-to-device messaging: Yes.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;sync&quot;&gt;Sync&lt;&#x2F;h4&gt;
&lt;ul&gt;
&lt;li&gt;Filters: Timeline limit only. Rest unimplemented.&lt;&#x2F;li&gt;
&lt;li&gt;Deprecated &lt;code&gt;&#x2F;events&lt;&#x2F;code&gt; and &lt;code&gt;&#x2F;initialSync&lt;&#x2F;code&gt;: No.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;room-events&quot;&gt;Room events&lt;&#x2F;h4&gt;
&lt;ul&gt;
&lt;li&gt;Typing: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Receipts: No.&lt;&#x2F;li&gt;
&lt;li&gt;Read Markers: No.&lt;&#x2F;li&gt;
&lt;li&gt;Presence: No.&lt;&#x2F;li&gt;
&lt;li&gt;Content repository (attachments): Yes.&lt;&#x2F;li&gt;
&lt;li&gt;History visibility: No, defaults to &lt;code&gt;joined&lt;&#x2F;code&gt;.&lt;&#x2F;li&gt;
&lt;li&gt;Push notifications: No.&lt;&#x2F;li&gt;
&lt;li&gt;Event context: No.&lt;&#x2F;li&gt;
&lt;li&gt;Reporting content: No.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;end-to-end-encryption&quot;&gt;End-to-End Encryption&lt;&#x2F;h4&gt;
&lt;ul&gt;
&lt;li&gt;Uploading device keys: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Downloading device keys: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Claiming one-time keys: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Querying key changes: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Cross-Signing: No.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;misc&quot;&gt;Misc&lt;&#x2F;h4&gt;
&lt;ul&gt;
&lt;li&gt;Server-side search: No.&lt;&#x2F;li&gt;
&lt;li&gt;Guest access: Partial.&lt;&#x2F;li&gt;
&lt;li&gt;Room previews: No, partial support for Peeking via MSC2753.&lt;&#x2F;li&gt;
&lt;li&gt;Third-Party networks: No.&lt;&#x2F;li&gt;
&lt;li&gt;Server notices: No.&lt;&#x2F;li&gt;
&lt;li&gt;Policy lists: No.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;federation-features&quot;&gt;Federation Features&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;Querying keys (incl. notary): Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Server ACLs: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Sending transactions: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Joining rooms: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Inviting to rooms: Yes, but not third-party invites.&lt;&#x2F;li&gt;
&lt;li&gt;Leaving rooms: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Content repository: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Backfilling &#x2F; get_missing_events: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Retrieving state of the room (&lt;code&gt;&#x2F;state&lt;&#x2F;code&gt; and &lt;code&gt;&#x2F;state_ids&lt;&#x2F;code&gt;): Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Public rooms: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Querying profile data: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Device management: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Send-to-Device messaging: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Querying&#x2F;Claiming E2E Keys: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Typing: Yes.&lt;&#x2F;li&gt;
&lt;li&gt;Presence: No.&lt;&#x2F;li&gt;
&lt;li&gt;Receipts: No.&lt;&#x2F;li&gt;
&lt;li&gt;OpenID: No.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.20.0 released</title>
		<published>2020-09-22T19:30:01+00:00</published>
		<updated>2020-09-22T19:30:01+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/09/22/synapse-1-20-0-released/" type="text/html"/>
		<id>matrix.org/blog/2020/09/22/synapse-1-20-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.20.0 is here!&lt;&#x2F;p&gt;
&lt;p&gt;Highlights of 1.20.0 include:-&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Shadow ban support.&lt;&#x2F;li&gt;
&lt;li&gt;Unread message counts in the sync response to help our client developers, this is a precursor to improving notification support.&lt;&#x2F;li&gt;
&lt;li&gt;No less than 28 async&#x2F;await PRs, so we can finally share all the hard work.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Also take note that in a future release, we will be dropping support for accessing Synapse&#x27;s Admin API using the &lt;code&gt;&#x2F;_matrix&#x2F;client&#x2F;* prefixes&lt;&#x2F;code&gt;. More details follow in the changelog.&lt;&#x2F;p&gt;
&lt;p&gt;Get the new releases from any of the usual sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md. 1.20.0 is on github &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.20.0&quot;&gt;here&lt;&#x2F;a&gt;, and 1.20.0rc4 is &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.20.0rc4&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The changelog for 1.20.0 is as follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-20-0-2020-09-22&quot;&gt;Synapse 1.20.0 (2020-09-22)&lt;&#x2F;h1&gt;
&lt;p&gt;No significant changes since v1.20.0rc5.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;removal-warning&quot;&gt;Removal warning&lt;&#x2F;h2&gt;
&lt;p&gt;Historically, the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;tree&#x2F;master&#x2F;docs&quot;&gt;Synapse Admin API&lt;&#x2F;a&gt; has been accessible under the &lt;code&gt;&#x2F;_matrix&#x2F;client&#x2F;api&#x2F;v1&#x2F;admin&lt;&#x2F;code&gt;, &lt;code&gt;&#x2F;_matrix&#x2F;client&#x2F;unstable&#x2F;admin&lt;&#x2F;code&gt;, &lt;code&gt;&#x2F;_matrix&#x2F;client&#x2F;r0&#x2F;admin&lt;&#x2F;code&gt; and &lt;code&gt;&#x2F;_synapse&#x2F;admin&lt;&#x2F;code&gt; prefixes. In a future release, we will be dropping support for accessing Synapse&#x27;s Admin API using the &lt;code&gt;&#x2F;_matrix&#x2F;client&#x2F;*&lt;&#x2F;code&gt; prefixes. This makes it easier for homeserver admins to lock down external access to the Admin API endpoints.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-20-0rc5-2020-09-18&quot;&gt;Synapse 1.20.0rc5 (2020-09-18)&lt;&#x2F;h1&gt;
&lt;p&gt;In addition to the below, Synapse 1.20.0rc5 also includes the bug fix that was included in 1.19.3.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add flags to the &lt;code&gt;&#x2F;versions&lt;&#x2F;code&gt; endpoint for whether new rooms default to using E2EE. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8343&quot;&gt;#8343&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix rate limiting of federation &lt;code&gt;&#x2F;send&lt;&#x2F;code&gt; requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8342&quot;&gt;#8342&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a longstanding bug where back pagination over federation could get stuck if it failed to handle a received event. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8349&quot;&gt;#8349&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Blacklist &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2753&quot;&gt;MSC2753&lt;&#x2F;a&gt; SyTests until it is implemented. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8285&quot;&gt;#8285&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-20-0rc4-2020-09-16&quot;&gt;Synapse 1.20.0rc4 (2020-09-16)&lt;&#x2F;h1&gt;
&lt;p&gt;Synapse 1.20.0rc4 is identical to 1.20.0rc3, with the addition of the security fix that was included in 1.19.2.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-20-0rc3-2020-09-11&quot;&gt;Synapse 1.20.0rc3 (2020-09-11)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a bug introduced in v1.20.0rc1 where the wrong exception was raised when invalid JSON data is encountered. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8291&quot;&gt;#8291&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-20-0rc2-2020-09-09&quot;&gt;Synapse 1.20.0rc2 (2020-09-09)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes-2&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a bug introduced in v1.20.0rc1 causing some features related to notifications to misbehave following the implementation of unread counts. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8280&quot;&gt;#8280&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-20-0rc1-2020-09-08&quot;&gt;Synapse 1.20.0rc1 (2020-09-08)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;removal-warning-1&quot;&gt;Removal warning&lt;&#x2F;h2&gt;
&lt;p&gt;Some older clients used a &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;spec&#x2F;client_server&#x2F;r0.6.1#post-matrix-client-r0-register-email-requesttoken&quot;&gt;disallowed character&lt;&#x2F;a&gt; (&lt;code&gt;:&lt;&#x2F;code&gt;) in the &lt;code&gt;client_secret&lt;&#x2F;code&gt; parameter of various endpoints. The incorrect behaviour was allowed for backwards compatibility, but is now being removed from Synapse as most users have updated their client. Further context can be found at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6766&quot;&gt;#6766&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;features-1&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add an endpoint to query your shared rooms with another user as an implementation of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2666&quot;&gt;MSC2666&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7785&quot;&gt;#7785&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Iteratively encode JSON to avoid blocking the reactor. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8013&quot;&gt;#8013&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8116&quot;&gt;#8116&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for shadow-banning users (ignoring any message send requests). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8034&quot;&gt;#8034&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8092&quot;&gt;#8092&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8095&quot;&gt;#8095&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8142&quot;&gt;#8142&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8152&quot;&gt;#8152&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8157&quot;&gt;#8157&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8158&quot;&gt;#8158&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8176&quot;&gt;#8176&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Use the default template file when its equivalent is not found in a custom template directory. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8037&quot;&gt;#8037&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8107&quot;&gt;#8107&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8252&quot;&gt;#8252&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add unread messages count to sync responses, as specified in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2654&quot;&gt;MSC2654&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8059&quot;&gt;#8059&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8254&quot;&gt;#8254&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8270&quot;&gt;#8270&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8274&quot;&gt;#8274&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Optimise &lt;code&gt;&#x2F;federation&#x2F;v1&#x2F;user&#x2F;devices&#x2F;&lt;&#x2F;code&gt; API by only returning devices with encryption keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8198&quot;&gt;#8198&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-3&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a memory leak by limiting the length of time that messages will be queued for a remote server that has been unreachable. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7864&quot;&gt;#7864&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;Re-starting finished log context PUT-nnnn&lt;&#x2F;code&gt; warning when event persistence failed. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8081&quot;&gt;#8081&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Synapse now correctly enforces the valid characters in the &lt;code&gt;client_secret&lt;&#x2F;code&gt; parameter used in various endpoints. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8101&quot;&gt;#8101&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug introduced in v1.7.2 impacting message retention policies that would allow federated homeservers to dictate a retention period that&#x27;s lower than the configured minimum allowed duration in the configuration file. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8104&quot;&gt;#8104&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a long-standing bug where invalid JSON would be accepted by Synapse. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8106&quot;&gt;#8106&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug introduced in Synapse v1.12.0 which could cause &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; requests to fail with a 404 if you had a very old outstanding room invite. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8110&quot;&gt;#8110&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Return a proper error code when the rooms of an invalid group are requested. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8129&quot;&gt;#8129&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug which could cause a leaked postgres connection if synapse was set to daemonize. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8131&quot;&gt;#8131&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the error code if a user tries to register with a numeric ID. This bug was introduced in v1.15.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8135&quot;&gt;#8135&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where appservices with ratelimiting disabled would still be ratelimited when joining rooms. This bug was introduced in v1.19.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8139&quot;&gt;#8139&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix logging in via OpenID Connect with a provider that uses integer user IDs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8190&quot;&gt;#8190&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a longstanding bug where user directory updates could break when unexpected profile data was included in events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8223&quot;&gt;#8223&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a longstanding bug where stats updates could break when unexpected profile data was included in events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8226&quot;&gt;#8226&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix slow start times for large servers by removing a table scan of the &lt;code&gt;users&lt;&#x2F;code&gt; table from startup code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8271&quot;&gt;#8271&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;updates-to-the-docker-image&quot;&gt;Updates to the Docker image&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix builds of the Docker image on non-x86 platforms. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8144&quot;&gt;#8144&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Added curl for healthcheck support and readme updates for the change. Contributed by @maquis196. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8147&quot;&gt;#8147&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Link to matrix-synapse-rest-password-provider in the password provider documentation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8111&quot;&gt;#8111&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Updated documentation to note that Synapse does not follow &lt;code&gt;HTTP 308&lt;&#x2F;code&gt; redirects due to an upstream library not supporting them. Contributed by Ryan Cole. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8120&quot;&gt;#8120&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Explain better what GDPR-erased means when deactivating a user. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8189&quot;&gt;#8189&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes-1&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add filter &lt;code&gt;name&lt;&#x2F;code&gt; to the &lt;code&gt;&#x2F;users&lt;&#x2F;code&gt; admin API, which filters by user ID or displayname. Contributed by Awesome Technologies Innovationslabor GmbH. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7377&quot;&gt;#7377&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8163&quot;&gt;#8163&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce run times of some unit tests by advancing the reactor a fewer number of times. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7757&quot;&gt;#7757&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t fail &lt;code&gt;&#x2F;submit_token&lt;&#x2F;code&gt; requests on incorrect session ID if &lt;code&gt;request_token_inhibit_3pid_errors&lt;&#x2F;code&gt; is turned on. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7991&quot;&gt;#7991&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert various parts of the codebase to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8071&quot;&gt;#8071&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8072&quot;&gt;#8072&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8074&quot;&gt;#8074&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8075&quot;&gt;#8075&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8076&quot;&gt;#8076&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8087&quot;&gt;#8087&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8100&quot;&gt;#8100&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8119&quot;&gt;#8119&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8121&quot;&gt;#8121&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8133&quot;&gt;#8133&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8156&quot;&gt;#8156&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8162&quot;&gt;#8162&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8166&quot;&gt;#8166&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8168&quot;&gt;#8168&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8173&quot;&gt;#8173&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8191&quot;&gt;#8191&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8192&quot;&gt;#8192&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8193&quot;&gt;#8193&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8194&quot;&gt;#8194&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8195&quot;&gt;#8195&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8197&quot;&gt;#8197&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8199&quot;&gt;#8199&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8200&quot;&gt;#8200&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8201&quot;&gt;#8201&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8202&quot;&gt;#8202&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8207&quot;&gt;#8207&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8213&quot;&gt;#8213&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8214&quot;&gt;#8214&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove some unused database functions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8085&quot;&gt;#8085&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add type hints to various parts of the codebase. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8090&quot;&gt;#8090&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8127&quot;&gt;#8127&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8187&quot;&gt;#8187&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8241&quot;&gt;#8241&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8140&quot;&gt;#8140&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8183&quot;&gt;#8183&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8232&quot;&gt;#8232&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8235&quot;&gt;#8235&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8237&quot;&gt;#8237&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8244&quot;&gt;#8244&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Return the previous stream token if a non-member event is a duplicate. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8093&quot;&gt;#8093&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8112&quot;&gt;#8112&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Separate &lt;code&gt;get_current_token&lt;&#x2F;code&gt; into two since there are two different use cases for it. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8113&quot;&gt;#8113&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove &lt;code&gt;ChainedIdGenerator&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8123&quot;&gt;#8123&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce the amount of whitespace in JSON stored and sent in responses. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8124&quot;&gt;#8124&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update the test federation client to handle streaming responses. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8130&quot;&gt;#8130&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Micro-optimisations to &lt;code&gt;get_auth_chain_ids&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8132&quot;&gt;#8132&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor &lt;code&gt;StreamIdGenerator&lt;&#x2F;code&gt; and &lt;code&gt;MultiWriterIdGenerator&lt;&#x2F;code&gt; to have the same interface. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8161&quot;&gt;#8161&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add functions to &lt;code&gt;MultiWriterIdGen&lt;&#x2F;code&gt; used by events stream. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8164&quot;&gt;#8164&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8179&quot;&gt;#8179&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix tests that were broken due to the merge of 1.19.1. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8167&quot;&gt;#8167&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make &lt;code&gt;SlavedIdTracker.advance&lt;&#x2F;code&gt; have the same interface as &lt;code&gt;MultiWriterIDGenerator&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8171&quot;&gt;#8171&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unused &lt;code&gt;is_guest&lt;&#x2F;code&gt; parameter from, and add safeguard to, &lt;code&gt;MessageHandler.get_room_data&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8174&quot;&gt;#8174&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8181&quot;&gt;#8181&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Standardize the mypy configuration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8175&quot;&gt;#8175&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor some of &lt;code&gt;LoginRestServlet&lt;&#x2F;code&gt;&#x27;s helper methods, and move them to &lt;code&gt;AuthHandler&lt;&#x2F;code&gt; for easier reuse. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8182&quot;&gt;#8182&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;wait_for_stream_position&lt;&#x2F;code&gt; to allow multiple waiters on same stream ID. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8196&quot;&gt;#8196&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make &lt;code&gt;MultiWriterIDGenerator&lt;&#x2F;code&gt; work for streams that use negative values. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8203&quot;&gt;#8203&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor queries for device keys and cross-signatures. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8204&quot;&gt;#8204&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8205&quot;&gt;#8205&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8222&quot;&gt;#8222&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8224&quot;&gt;#8224&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8225&quot;&gt;#8225&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8231&quot;&gt;#8231&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8233&quot;&gt;#8233&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8234&quot;&gt;#8234&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix type hints for functions decorated with &lt;code&gt;@cached&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8240&quot;&gt;#8240&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove obsolete &lt;code&gt;order&lt;&#x2F;code&gt; field from federation send queues. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8245&quot;&gt;#8245&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Stop sub-classing from object. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8249&quot;&gt;#8249&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add more logging to debug slow startup. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8264&quot;&gt;#8264&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Do not attempt to upgrade database schema on worker processes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8266&quot;&gt;#8266&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8276&quot;&gt;#8276&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.19.2 released</title>
		<published>2020-09-16T00:00:00+00:00</published>
		<updated>2020-09-16T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/09/16/synapse-1-19-2-released/" type="text/html"/>
		<id>matrix.org/blog/2020/09/16/synapse-1-19-2-released/</id>
		<content type="html">&lt;p&gt;&lt;strong&gt;Synapse 1.19.2 is a security patch. All federating instances should upgrade immediately.&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Today we are releasing Synapse 1.19.2, which is a security patch release containing a fix to encountering invalid events over federation. We are also putting out a fourth release candidate for the upcoming Synapse 1.20.0 release with the same fix.&lt;&#x2F;p&gt;
&lt;p&gt;The bug prevents affected Synapse instances from joining rooms with invalid events. Server administrators running federating instances are strongly encouraged to update as soon as possible.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Those on Synapse 1.19.1 or earlier should upgrade to Synapse 1.19.2, while those who are running a release candidate of Synapse 1.20.0 should upgrade to 1.20.0rc4.&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Get the new releases from any of the usual sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md. 1.19.2 is on github &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.19.2&quot;&gt;here&lt;&#x2F;a&gt;, and 1.20.0rc4 is &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.20.0rc4&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The changelog for 1.19.2 is as follows:&lt;&#x2F;p&gt;
&lt;h2 id=&quot;synapse-1-19-2-2020-09-16&quot;&gt;Synapse 1.19.2 (2020-09-16)&lt;&#x2F;h2&gt;
&lt;p&gt;Due to the issue below server admins are encouraged to upgrade as soon as possible.
Bugfixes&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Fix joining rooms over federation that include malformed events. (#8324)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.19.1 released</title>
		<published>2020-08-27T12:26:48+00:00</published>
		<updated>2020-08-27T12:26:48+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/08/27/synapse-1-19-1-released/" type="text/html"/>
		<id>matrix.org/blog/2020/08/27/synapse-1-19-1-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.19.1 is a bug fix release to fix two bugs introduced in 1.19.0.&lt;&#x2F;p&gt;
&lt;p&gt;Those two bugs were related to the new rate-limiter on room joins, which was introduced in 1.19.0.&lt;&#x2F;p&gt;
&lt;p&gt;The first bug caused Synapse to ignore exceptions to rate-limiting for application services.&lt;&#x2F;p&gt;
&lt;p&gt;The second one prevented profile updates from being correctly propagated across rooms.&lt;&#x2F;p&gt;
&lt;p&gt;Sorry if you have been bitten!&lt;&#x2F;p&gt;
&lt;p&gt;Get 1.19.1 from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.19.1&quot;&gt;github&lt;&#x2F;a&gt; or any of the sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md.&lt;&#x2F;p&gt;
&lt;p&gt;Changelog since v1.19.0&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-19-1-2020-08-27&quot;&gt;Synapse 1.19.1 (2020-08-27)&lt;&#x2F;h1&gt;
&lt;p&gt;No significant changes.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-19-1rc1-2020-08-25&quot;&gt;Synapse 1.19.1rc1 (2020-08-25)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a bug introduced in v1.19.0 where appservices with ratelimiting disabled would still be ratelimited when joining rooms. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8139&quot;&gt;#8139&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug introduced in v1.19.0 that would cause e.g. profile updates to fail due to incorrect application of rate limits on join requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8153&quot;&gt;#8153&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.19.0 released</title>
		<published>2020-08-17T00:00:00+00:00</published>
		<updated>2020-08-17T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/08/17/synapse-1-19-0-released/" type="text/html"/>
		<id>matrix.org/blog/2020/08/17/synapse-1-19-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.19.0 is here and ready for action.&lt;&#x2F;p&gt;
&lt;p&gt;1.19.0 contains lots of async&#x2F;await changes, 27 separate PRs to be precise(thanks Patrick). These changes will provide some level of performance improvement, but the real value to us is that it will improve our ability to profile Synapse more effectively.&lt;&#x2F;p&gt;
&lt;p&gt;It also features improved logging performance, this is in part to reduce IO but also to reduce the total amount logged. We’d be really interested to get some feedback on if the changes help. You may also want to take a look at our new logging defaults to see if they would help reduce total disk space usage.&lt;&#x2F;p&gt;
&lt;p&gt;Some admins will rejoice that we have added a &lt;code&gt;&#x2F;health&lt;&#x2F;code&gt; end point to every configured HTTP listener which should make it easier to monitor multi-worker installs.&lt;&#x2F;p&gt;
&lt;p&gt;Finally 1.19.0 contains improvements to the Admin API allowing the admin to optionally purge rooms on deletion.&lt;&#x2F;p&gt;
&lt;p&gt;Get the new releases from any of the usual sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md. 1.19.0 is on github &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.19.0&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Changelog for 1.19.0 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-19-0-2020-08-17&quot;&gt;Synapse 1.19.0 (2020-08-17)&lt;&#x2F;h1&gt;
&lt;p&gt;No significant changes since 1.19.0rc1.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;removal-warning&quot;&gt;Removal warning&lt;&#x2F;h2&gt;
&lt;p&gt;As outlined in the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.18.0&quot;&gt;previous release&lt;&#x2F;a&gt;, we are no longer publishing Docker images with the &lt;code&gt;-py3&lt;&#x2F;code&gt; tag suffix. On top of that, we have also removed the &lt;code&gt;latest-py3&lt;&#x2F;code&gt; tag. Please see &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;develop&#x2F;UPGRADE.rst#upgrading-to-v1180&quot;&gt;the announcement in the upgrade notes for 1.18.0&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-19-0rc1-2020-08-13&quot;&gt;Synapse 1.19.0rc1 (2020-08-13)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add option to allow server admins to join rooms which fail complexity checks. Contributed by @lugino-emeritus. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7902&quot;&gt;#7902&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an option to purge room or not with delete room admin endpoint (&lt;code&gt;POST &#x2F;_synapse&#x2F;admin&#x2F;v1&#x2F;rooms&#x2F;&amp;lt;room_id&amp;gt;&#x2F;delete&lt;&#x2F;code&gt;). Contributed by @dklimpel. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7964&quot;&gt;#7964&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add rate limiting to users joining rooms. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8008&quot;&gt;#8008&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a &lt;code&gt;&#x2F;health&lt;&#x2F;code&gt; endpoint to every configured HTTP listener that can be used as a health check endpoint by load balancers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8048&quot;&gt;#8048&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow login to be blocked based on the values of SAML attributes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8052&quot;&gt;#8052&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow guest access to the &lt;code&gt;GET &#x2F;_matrix&#x2F;client&#x2F;r0&#x2F;rooms&#x2F;{room_id}&#x2F;members&lt;&#x2F;code&gt; endpoint, according to MSC2689. Contributed by Awesome Technologies Innovationslabor GmbH. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7314&quot;&gt;#7314&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a bug introduced in Synapse v1.7.2 which caused inaccurate membership counts in the room directory. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7977&quot;&gt;#7977&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a long standing bug: &#x27;Duplicate key value violates unique constraint &amp;quot;event_relations_id&amp;quot;&#x27; when message retention is configured. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7978&quot;&gt;#7978&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &amp;quot;no create event in auth events&amp;quot; when trying to reject invitation after inviter leaves. Bug introduced in Synapse v1.10.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7980&quot;&gt;#7980&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix various comments and minor discrepancies in server notices code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7996&quot;&gt;#7996&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a long standing bug where HTTP HEAD requests resulted in a 400 error. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7999&quot;&gt;#7999&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a long-standing bug which caused two copies of some log lines to be written when synctl was used along with a MemoryHandler logger. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8011&quot;&gt;#8011&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8012&quot;&gt;#8012&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;updates-to-the-docker-image&quot;&gt;Updates to the Docker image&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;We no longer publish Docker images with the &lt;code&gt;-py3&lt;&#x2F;code&gt; tag suffix, as &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;develop&#x2F;UPGRADE.rst#upgrading-to-v1180&quot;&gt;announced in the upgrade notes&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8056&quot;&gt;#8056&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Document how to set up a client .well-known file and fix several pieces of outdated documentation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7899&quot;&gt;#7899&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve workers docs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7990&quot;&gt;#7990&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8000&quot;&gt;#8000&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix typo in &lt;code&gt;docs&#x2F;workers.md&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7992&quot;&gt;#7992&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add documentation for how to undo a room shutdown. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7998&quot;&gt;#7998&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8010&quot;&gt;#8010&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Reduce the amount of whitespace in JSON stored and sent in responses. Contributed by David Vo. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7372&quot;&gt;#7372&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Switch to the JSON implementation from the standard library and bump the minimum version of the canonicaljson library to 1.2.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7936&quot;&gt;#7936&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7979&quot;&gt;#7979&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert various parts of the codebase to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7947&quot;&gt;#7947&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7948&quot;&gt;#7948&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7949&quot;&gt;#7949&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7951&quot;&gt;#7951&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7963&quot;&gt;#7963&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7973&quot;&gt;#7973&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7975&quot;&gt;#7975&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7976&quot;&gt;#7976&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7981&quot;&gt;#7981&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7987&quot;&gt;#7987&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7989&quot;&gt;#7989&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8003&quot;&gt;#8003&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8014&quot;&gt;#8014&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8016&quot;&gt;#8016&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8027&quot;&gt;#8027&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8031&quot;&gt;#8031&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8032&quot;&gt;#8032&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8035&quot;&gt;#8035&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8042&quot;&gt;#8042&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8044&quot;&gt;#8044&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8045&quot;&gt;#8045&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8061&quot;&gt;#8061&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8062&quot;&gt;#8062&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8063&quot;&gt;#8063&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8066&quot;&gt;#8066&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8069&quot;&gt;#8069&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8070&quot;&gt;#8070&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move some database-related log lines from the default logger to the database&#x2F;transaction loggers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7952&quot;&gt;#7952&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a script to detect source code files using non-unix line terminators. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7965&quot;&gt;#7965&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7970&quot;&gt;#7970&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Log the SAML session ID during creation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7971&quot;&gt;#7971&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Implement new experimental push rules for some users. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7997&quot;&gt;#7997&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove redundant and unreliable signature check for v1 Identity Service lookup responses. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8001&quot;&gt;#8001&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve the performance of the register endpoint. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8009&quot;&gt;#8009&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce less useful output in the newsfragment CI step. Add a link to the changelog section of the contributing guide on error. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8024&quot;&gt;#8024&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Rename storage layer objects to be more sensible. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8033&quot;&gt;#8033&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Change the default log config to reduce disk I&#x2F;O and storage for new servers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8040&quot;&gt;#8040&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an assertion on &lt;code&gt;prev_events&lt;&#x2F;code&gt; in &lt;code&gt;create_new_client_event&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8041&quot;&gt;#8041&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a comment to &lt;code&gt;ServerContextFactory&lt;&#x2F;code&gt; about the use of &lt;code&gt;SSLv23_METHOD&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8043&quot;&gt;#8043&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Log &lt;code&gt;OPTIONS&lt;&#x2F;code&gt; requests at &lt;code&gt;DEBUG&lt;&#x2F;code&gt; rather than &lt;code&gt;INFO&lt;&#x2F;code&gt; level to reduce amount logged at &lt;code&gt;INFO&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8049&quot;&gt;#8049&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce amount of outbound request logging at &lt;code&gt;INFO&lt;&#x2F;code&gt; level. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8050&quot;&gt;#8050&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;It is no longer necessary to explicitly define &lt;code&gt;filters&lt;&#x2F;code&gt; in the logging configuration. (Continuing to do so is redundant but harmless.) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8051&quot;&gt;#8051&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add and improve type hints. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8058&quot;&gt;#8058&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8064&quot;&gt;#8064&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8060&quot;&gt;#8060&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;8067&quot;&gt;#8067&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.18.0 released</title>
		<published>2020-07-30T18:34:09+00:00</published>
		<updated>2020-07-30T18:34:09+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/07/30/synapse-1-18-0-released/" type="text/html"/>
		<id>matrix.org/blog/2020/07/30/synapse-1-18-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.18.0 has landed.&lt;&#x2F;p&gt;
&lt;p&gt;The most important thing to know about 1.18.0 is that it contains support for sharding multiple workers. Specifically this means being able to run multiple federation senders, multiple client readers to handle registration and multiple push workers. This will be important for anyone running a large scale install of Synapse. You can read more about how to benefit from these changes in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;develop&#x2F;docs&#x2F;workers.md&quot;&gt;docs&#x2F;workers.md&lt;&#x2F;a&gt;. In the same spirit we also moved typing notifications from the main process.&lt;&#x2F;p&gt;
&lt;p&gt;Aside from that, we have new admin API support to list the users in a room, support for oEmbed for media previews (you can unfurl tweets again!) and a general slew of federation bug fixes.&lt;&#x2F;p&gt;
&lt;p&gt;Get the new releases from any of the usual sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md. 1.18.0 is on github &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.18.0&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Changelog for 1.18.0 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-18-0-2020-07-30&quot;&gt;Synapse 1.18.0 (2020-07-30)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Update worker docs with latest enhancements. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7969&quot;&gt;#7969&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-18-0rc2-2020-07-28&quot;&gt;Synapse 1.18.0rc2 (2020-07-28)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix an &lt;code&gt;AssertionError&lt;&#x2F;code&gt; exception introduced in v1.18.0rc1. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7876&quot;&gt;#7876&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix experimental support for moving typing off master when worker is restarted, which is broken in v1.18.0rc1. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7967&quot;&gt;#7967&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Further optimise queueing of inbound replication commands. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7876&quot;&gt;#7876&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-18-0rc1-2020-07-27&quot;&gt;Synapse 1.18.0rc1 (2020-07-27)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Include room states on invite events that are sent to application services. Contributed by @Sorunome. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6455&quot;&gt;#6455&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add delete room admin endpoint (&lt;code&gt;POST &#x2F;_synapse&#x2F;admin&#x2F;v1&#x2F;rooms&#x2F;&amp;lt;room_id&amp;gt;&#x2F;delete&lt;&#x2F;code&gt;). Contributed by @dklimpel. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7613&quot;&gt;#7613&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7953&quot;&gt;#7953&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add experimental support for running multiple federation sender processes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7798&quot;&gt;#7798&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add the option to validate the &lt;code&gt;iss&lt;&#x2F;code&gt; and &lt;code&gt;aud&lt;&#x2F;code&gt; claims for JWT logins. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7827&quot;&gt;#7827&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for handling registration requests across multiple client reader workers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7830&quot;&gt;#7830&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an admin API to list the users in a room. Contributed by Awesome Technologies Innovationslabor GmbH. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7842&quot;&gt;#7842&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow email subjects to be customised through Synapse&#x27;s configuration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7846&quot;&gt;#7846&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add the ability to re-activate an account from the admin API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7847&quot;&gt;#7847&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7908&quot;&gt;#7908&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add experimental support for running multiple pusher workers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7855&quot;&gt;#7855&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add experimental support for moving typing off master. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7869&quot;&gt;#7869&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7959&quot;&gt;#7959&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Report CPU metrics to prometheus for time spent processing replication commands. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7879&quot;&gt;#7879&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Support oEmbed for media previews. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7920&quot;&gt;#7920&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Abort federation requests where the client disconnects before the ratelimiter expires. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7930&quot;&gt;#7930&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Cache responses to &lt;code&gt;&#x2F;_matrix&#x2F;federation&#x2F;v1&#x2F;state_ids&lt;&#x2F;code&gt; to reduce duplicated work. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7931&quot;&gt;#7931&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix detection of out of sync remote device lists when receiving events from remote users. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7815&quot;&gt;#7815&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where Synapse fails to process an incoming event over federation if the server is missing too much of the event&#x27;s auth chain. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7817&quot;&gt;#7817&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug causing Synapse to misinterpret the value &lt;code&gt;off&lt;&#x2F;code&gt; for &lt;code&gt;encryption_enabled_by_default_for_room_type&lt;&#x2F;code&gt; in its configuration file(s) if that value isn&#x27;t surrounded by quotes. This bug was introduced in v1.16.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7822&quot;&gt;#7822&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where we did not always pass in &lt;code&gt;app_name&lt;&#x2F;code&gt; or &lt;code&gt;server_name&lt;&#x2F;code&gt; to email templates, including e.g. for registration emails. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7829&quot;&gt;#7829&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Errors which occur while using the non-standard JWT login now return the proper error: &lt;code&gt;403 Forbidden&lt;&#x2F;code&gt; with an error code of &lt;code&gt;M_FORBIDDEN&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7844&quot;&gt;#7844&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &amp;quot;AttributeError: &#x27;str&#x27; object has no attribute &#x27;get&#x27;&amp;quot; error message when applying per-room message retention policies. The bug was introduced in Synapse 1.7.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7850&quot;&gt;#7850&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug introduced in Synapse 1.10.0 which could cause a &amp;quot;no create event in auth events&amp;quot; error during room creation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7854&quot;&gt;#7854&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug which allowed empty rooms to be rejoined over federation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7859&quot;&gt;#7859&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &#x27;Unable to find a suitable guest user ID&#x27; error when using multiple client_reader workers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7866&quot;&gt;#7866&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a long standing bug where the tracing of async functions with opentracing was broken. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7872&quot;&gt;#7872&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7961&quot;&gt;#7961&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &amp;quot;TypeError in &lt;code&gt;synapse.notifier&lt;&#x2F;code&gt;&amp;quot; exceptions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7880&quot;&gt;#7880&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix deprecation warning due to invalid escape sequences. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7895&quot;&gt;#7895&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;updates-to-the-docker-image&quot;&gt;Updates to the Docker image&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Base docker image on Debian Buster rather than Alpine Linux. Contributed by @maquis196. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7839&quot;&gt;#7839&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation-1&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Provide instructions on using &lt;code&gt;register_new_matrix_user&lt;&#x2F;code&gt; via docker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7885&quot;&gt;#7885&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Change the sample config postgres user section to use &lt;code&gt;synapse_user&lt;&#x2F;code&gt; instead of &lt;code&gt;synapse&lt;&#x2F;code&gt; to align with the documentation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7889&quot;&gt;#7889&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reorder database paragraphs to promote postgres over sqlite. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7933&quot;&gt;#7933&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update the dates of ACME v1&#x27;s end of life in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;ACME.md&quot;&gt;&lt;code&gt;ACME.md&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7934&quot;&gt;#7934&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Remove unused &lt;code&gt;synapse_replication_tcp_resource_invalidate_cache&lt;&#x2F;code&gt; prometheus metric. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7878&quot;&gt;#7878&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove Ubuntu Eoan from the list of &lt;code&gt;.deb&lt;&#x2F;code&gt; packages that we build as it is now end-of-life. Contributed by @gary-kim. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7888&quot;&gt;#7888&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes-1&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Switch parts of the codebase from &lt;code&gt;simplejson&lt;&#x2F;code&gt; to the standard library &lt;code&gt;json&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7802&quot;&gt;#7802&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add type hints to the http server code and remove an unused parameter. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7813&quot;&gt;#7813&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add type hints to synapse.api.errors module. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7820&quot;&gt;#7820&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ensure that calls to &lt;code&gt;json.dumps&lt;&#x2F;code&gt; are compatible with the standard library json. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7836&quot;&gt;#7836&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove redundant &lt;code&gt;retry_on_integrity_error&lt;&#x2F;code&gt; wrapper for event persistence code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7848&quot;&gt;#7848&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Consistently use &lt;code&gt;db_to_json&lt;&#x2F;code&gt; to convert from database values to JSON objects. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7849&quot;&gt;#7849&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert various parts of the codebase to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7851&quot;&gt;#7851&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7860&quot;&gt;#7860&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7868&quot;&gt;#7868&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7871&quot;&gt;#7871&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7873&quot;&gt;#7873&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7874&quot;&gt;#7874&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7884&quot;&gt;#7884&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7912&quot;&gt;#7912&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7935&quot;&gt;#7935&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7939&quot;&gt;#7939&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7942&quot;&gt;#7942&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7944&quot;&gt;#7944&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for handling registration requests across multiple client reader workers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7853&quot;&gt;#7853&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Small performance improvement in typing processing. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7856&quot;&gt;#7856&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;The default value of &lt;code&gt;filter_timeline_limit&lt;&#x2F;code&gt; was changed from -1 (no limit) to 100. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7858&quot;&gt;#7858&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Optimise queueing of inbound replication commands. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7861&quot;&gt;#7861&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some type annotations to &lt;code&gt;HomeServer&lt;&#x2F;code&gt; and &lt;code&gt;BaseHandler&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7870&quot;&gt;#7870&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up &lt;code&gt;PreserveLoggingContext&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7877&quot;&gt;#7877&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Change &amp;quot;unknown room version&amp;quot; logging from &#x27;error&#x27; to &#x27;warning&#x27;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7881&quot;&gt;#7881&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Stop using &lt;code&gt;device_max_stream_id&lt;&#x2F;code&gt; table and just use &lt;code&gt;device_inbox.stream_id&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7882&quot;&gt;#7882&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Return an empty body for OPTIONS requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7886&quot;&gt;#7886&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix typo in generated config file. Contributed by @ThiefMaster. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7890&quot;&gt;#7890&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Import ABC from &lt;code&gt;collections.abc&lt;&#x2F;code&gt; for Python 3.10 compatibility. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7892&quot;&gt;#7892&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unused functions &lt;code&gt;time_function&lt;&#x2F;code&gt;, &lt;code&gt;trace_function&lt;&#x2F;code&gt;, &lt;code&gt;get_previous_frames&lt;&#x2F;code&gt;
and &lt;code&gt;get_previous_frame&lt;&#x2F;code&gt; from &lt;code&gt;synapse.logging.utils&lt;&#x2F;code&gt; module. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7897&quot;&gt;#7897&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Lint the &lt;code&gt;contrib&#x2F;&lt;&#x2F;code&gt; directory in CI and linting scripts, add &lt;code&gt;synctl&lt;&#x2F;code&gt; to the linting script for consistency with CI. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7914&quot;&gt;#7914&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Use Element CSS and logo in notification emails when app name is Element. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7919&quot;&gt;#7919&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Optimisation to &#x2F;sync handling: skip serializing the response if the client has already disconnected. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7927&quot;&gt;#7927&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;When a client disconnects, don&#x27;t log it as &#x27;Error processing request&#x27;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7928&quot;&gt;#7928&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add debugging to &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; response generation (disabled by default). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7929&quot;&gt;#7929&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update comments that refer to Deferreds for async functions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7945&quot;&gt;#7945&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Simplify error handling in federation handler. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7950&quot;&gt;#7950&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.17.0 released</title>
		<published>2020-07-13T16:38:01+00:00</published>
		<updated>2020-07-13T16:21:49+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/07/13/synapse-1-17-0-released/" type="text/html"/>
		<id>matrix.org/blog/2020/07/13/synapse-1-17-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.17.0 is here!&lt;&#x2F;p&gt;
&lt;p&gt;Hot on the heels of Synapse 1.16.1, 1.17.0 is a bug fix release most notably containing a fix for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2181&quot;&gt;&#x27;stuck invites&#x27;&lt;&#x2F;a&gt; which happen when we are unable to reject a room invite received over federation.&lt;&#x2F;p&gt;
&lt;p&gt;Get the new releases from any of the usual sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md. 1.17.0 is on github &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.17.0&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Changelog for 1.17.0 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-17-0-2020-07-13&quot;&gt;Synapse 1.17.0 (2020-07-13)&lt;&#x2F;h1&gt;
&lt;p&gt;Synapse 1.17.0 is identical to 1.17.0rc1, with the addition of the fix that was included in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;v1.16.1&quot;&gt;1.16.1&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-17-0rc1-2020-07-09&quot;&gt;Synapse 1.17.0rc1 (2020-07-09)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix inconsistent handling of upper and lower case in email addresses when used as identifiers for login, etc. Contributed by @dklimpel. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7021&quot;&gt;#7021&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &amp;quot;Tried to close a non-active scope!&amp;quot; error messages when opentracing is enabled. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7732&quot;&gt;#7732&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix incorrect error message when database CTYPE was set incorrectly. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7760&quot;&gt;#7760&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix to not ignore &lt;code&gt;set_tweak&lt;&#x2F;code&gt; actions in Push Rules that have no &lt;code&gt;value&lt;&#x2F;code&gt;, as permitted by the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7766&quot;&gt;#7766&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix synctl to handle empty config files correctly. Contributed by @kotovalexarian. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7779&quot;&gt;#7779&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fixes a long standing bug in worker mode where worker information was saved in the devices table instead of the original IP address and user agent. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7797&quot;&gt;#7797&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &#x27;stuck invites&#x27; which happen when we are unable to reject a room invite received over federation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7804&quot;&gt;#7804&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7809&quot;&gt;#7809&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7810&quot;&gt;#7810&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;updates-to-the-docker-image&quot;&gt;Updates to the Docker image&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Include libwebp in the Docker file to properly handle webp image uploads. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7791&quot;&gt;#7791&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Improve the documentation of the non-standard JSON web token login type. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7776&quot;&gt;#7776&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update doc links for caddy. Contributed by Nicolai Søborg. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7789&quot;&gt;#7789&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Refactor getting replication updates from database. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7740&quot;&gt;#7740&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Send push notifications with a high or low priority depending upon whether they may generate user-observable effects. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7765&quot;&gt;#7765&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Use symbolic names for replication stream names. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7768&quot;&gt;#7768&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add early returns to &lt;code&gt;_check_for_soft_fail&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7769&quot;&gt;#7769&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix up &lt;code&gt;synapse.handlers.federation&lt;&#x2F;code&gt; to pass mypy. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7770&quot;&gt;#7770&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert the appserver handler to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7775&quot;&gt;#7775&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow to use higher versions of prometheus_client &amp;lt;0.9.0 which are expected to introduce no breaking changes. Contributed by Oliver Kurz. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7780&quot;&gt;#7780&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update linting scripts and codebase to be compatible with &lt;code&gt;isort&lt;&#x2F;code&gt; v5. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7786&quot;&gt;#7786&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Stop populating unused table &lt;code&gt;local_invites&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7793&quot;&gt;#7793&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ensure that strings (not bytes) are passed into JSON serialization. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7799&quot;&gt;#7799&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Switch from simplejson to the standard library json. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7800&quot;&gt;#7800&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;signing_key&lt;&#x2F;code&gt; property to &lt;code&gt;HomeServer&lt;&#x2F;code&gt; to save code duplication. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7805&quot;&gt;#7805&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve stacktraces from exceptions in background processes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7808&quot;&gt;#7808&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix various spelling errors in comments and log lines. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7811&quot;&gt;#7811&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.16.0 released</title>
		<published>2020-07-08T19:18:23+00:00</published>
		<updated>2020-07-08T14:45:15+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/07/08/synapse-1-16-0-released/" type="text/html"/>
		<id>matrix.org/blog/2020/07/08/synapse-1-16-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.16.0 is here!&lt;&#x2F;p&gt;
&lt;p&gt;Notable additions in 1.16.0 include:-&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;An important performance fix to improve room state resolution.&lt;&#x2F;li&gt;
&lt;li&gt;An option to enable e2e by default for new rooms.&lt;&#x2F;li&gt;
&lt;li&gt;Ability to run multiple media repo workers side by side.&lt;&#x2F;li&gt;
&lt;li&gt;Ability to mark specific content as being safe from quarantine.&lt;&#x2F;li&gt;
&lt;li&gt;Bug fixes to make migrating from SQLite to Postgres more reliable - if you are running sqlite for anything other than evaluation purposes then please migrate!&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Note, we have deprecated the &lt;code&gt;m.login.jwt&lt;&#x2F;code&gt; login method in favour of &lt;code&gt;org.matrix.login.jwt&lt;&#x2F;code&gt; see the changelog for more details.&lt;&#x2F;p&gt;
&lt;p&gt;Enjoy!&lt;&#x2F;p&gt;
&lt;p&gt;Get the new releases from any of the usual sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md. 1.16.0 is on github &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.16.0&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Changelog for 1.16.0 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-16-0-2020-07-08&quot;&gt;Synapse 1.16.0 (2020-07-08)&lt;&#x2F;h1&gt;
&lt;p&gt;No significant changes since 1.16.0rc2.&lt;&#x2F;p&gt;
&lt;p&gt;Note that this release deprecates the &lt;code&gt;m.login.jwt&lt;&#x2F;code&gt; login method, renaming it to &lt;code&gt;org.matrix.login.jwt&lt;&#x2F;code&gt;, as &lt;code&gt;m.login.jwt&lt;&#x2F;code&gt; is not part of the Matrix spec. Otherwise the behaviour is identical. Synapse will accept both names for now, but this may change in a future release.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-16-0rc2-2020-07-02&quot;&gt;Synapse 1.16.0rc2 (2020-07-02)&lt;&#x2F;h1&gt;
&lt;p&gt;Synapse 1.16.0rc2 includes the security fixes released with Synapse 1.15.2.
Please see the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.15.2&quot;&gt;1.15.2 release notes&lt;&#x2F;a&gt; for more details.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Update postgres image in example &lt;code&gt;docker-compose.yaml&lt;&#x2F;code&gt; to tag &lt;code&gt;12-alpine&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7696&quot;&gt;#7696&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add some metrics for inbound and outbound federation latencies: &lt;code&gt;synapse_federation_server_pdu_process_time&lt;&#x2F;code&gt; and &lt;code&gt;synapse_event_processing_lag_by_event&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7771&quot;&gt;#7771&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-16-0rc1-2020-07-01&quot;&gt;Synapse 1.16.0rc1 (2020-07-01)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add an option to enable encryption by default for new rooms. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7639&quot;&gt;#7639&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for running multiple media repository workers. See &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v1.16.0&#x2F;docs&#x2F;workers.md&quot;&gt;docs&#x2F;workers.md&lt;&#x2F;a&gt; for instructions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7706&quot;&gt;#7706&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Media can now be marked as safe from quarantined. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7718&quot;&gt;#7718&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Expand the configuration options for auto-join rooms. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7763&quot;&gt;#7763&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Remove &lt;code&gt;user_id&lt;&#x2F;code&gt; from the response to &lt;code&gt;GET &#x2F;_matrix&#x2F;client&#x2F;r0&#x2F;presence&#x2F;{userId}&#x2F;status&lt;&#x2F;code&gt; to match the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7606&quot;&gt;#7606&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;In worker mode, ensure that replicated data has not already been received. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7648&quot;&gt;#7648&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix intermittent exception during startup, introduced in Synapse 1.14.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7663&quot;&gt;#7663&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Include a user-agent for federation and well-known requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7677&quot;&gt;#7677&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Accept the proper field (&lt;code&gt;phone&lt;&#x2F;code&gt;) for the &lt;code&gt;m.id.phone&lt;&#x2F;code&gt; identifier type. The legacy field of &lt;code&gt;number&lt;&#x2F;code&gt; is still accepted as a fallback. Bug introduced in v0.20.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7687&quot;&gt;#7687&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &amp;quot;Starting db txn &#x27;get_completed_ui_auth_stages&#x27; from sentinel context&amp;quot; warning. The bug was introduced in 1.13.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7688&quot;&gt;#7688&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Compare the URI and method during user interactive authentication (instead of the URI twice). Bug introduced in 1.13.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7689&quot;&gt;#7689&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a long standing bug where the response to the &lt;code&gt;GET room_keys&#x2F;version&lt;&#x2F;code&gt; endpoint had the incorrect type for the &lt;code&gt;etag&lt;&#x2F;code&gt; field. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7691&quot;&gt;#7691&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix logged error during device resync in opentracing. Broke in v1.14.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7698&quot;&gt;#7698&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Do not break push rule evaluation when receiving an event with a non-string body. This is a long-standing bug. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7701&quot;&gt;#7701&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fixs a long standing bug which resulted in an exception: &amp;quot;TypeError: argument of type &#x27;ObservableDeferred&#x27; is not iterable&amp;quot;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7708&quot;&gt;#7708&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;The &lt;code&gt;synapse_port_db&lt;&#x2F;code&gt; script no longer fails when the &lt;code&gt;ui_auth_sessions&lt;&#x2F;code&gt; table is non-empty. This bug has existed since v1.13.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7711&quot;&gt;#7711&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Synapse will now fetch media from the proper specified URL (using the r0 prefix instead of the unspecified v1). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7714&quot;&gt;#7714&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the tables ignored by &lt;code&gt;synapse_port_db&lt;&#x2F;code&gt; to be in sync the current database schema. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7717&quot;&gt;#7717&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix missing &lt;code&gt;Content-Length&lt;&#x2F;code&gt; on HTTP responses from the metrics handler. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7730&quot;&gt;#7730&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix large state resolutions from stalling Synapse for seconds at a time. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7735&quot;&gt;#7735&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7746&quot;&gt;#7746&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation-1&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Spelling correction in sample_config.yaml. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7652&quot;&gt;#7652&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Added instructions for how to use Keycloak via OpenID Connect to authenticate with Synapse. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7659&quot;&gt;#7659&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Corrected misspelling of PostgreSQL. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7724&quot;&gt;#7724&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Deprecate &lt;code&gt;m.login.jwt&lt;&#x2F;code&gt; login method in favour of &lt;code&gt;org.matrix.login.jwt&lt;&#x2F;code&gt;, as &lt;code&gt;m.login.jwt&lt;&#x2F;code&gt; is not part of the Matrix spec. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7675&quot;&gt;#7675&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes-1&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Refactor getting replication updates from database. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7636&quot;&gt;#7636&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean-up the login fallback code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7657&quot;&gt;#7657&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Increase the default SAML session expiry time to 15 minutes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7664&quot;&gt;#7664&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert the device message and pagination handlers to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7678&quot;&gt;#7678&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert typing handler to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7679&quot;&gt;#7679&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Require &lt;code&gt;parameterized&lt;&#x2F;code&gt; package version to be at least 0.7.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7680&quot;&gt;#7680&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor handling of &lt;code&gt;listeners&lt;&#x2F;code&gt; configuration settings. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7681&quot;&gt;#7681&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Replace uses of &lt;code&gt;six.iterkeys&lt;&#x2F;code&gt;&#x2F;&lt;code&gt;iteritems&lt;&#x2F;code&gt;&#x2F;&lt;code&gt;itervalues&lt;&#x2F;code&gt; with &lt;code&gt;keys()&lt;&#x2F;code&gt;&#x2F;&lt;code&gt;items()&lt;&#x2F;code&gt;&#x2F;&lt;code&gt;values()&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7692&quot;&gt;#7692&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for using &lt;code&gt;rust-python-jaeger-reporter&lt;&#x2F;code&gt; library to reduce jaeger tracing overhead. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7697&quot;&gt;#7697&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make Tox actions work on Debian 10. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7703&quot;&gt;#7703&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Replace all remaining uses of &lt;code&gt;six&lt;&#x2F;code&gt; with native Python 3 equivalents. Contributed by @ilmari. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7704&quot;&gt;#7704&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix broken link in sample config. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7712&quot;&gt;#7712&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Speed up state res v2 across large state differences. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7725&quot;&gt;#7725&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert directory handler to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7727&quot;&gt;#7727&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move &lt;code&gt;flake8&lt;&#x2F;code&gt; to the end of &lt;code&gt;scripts-dev&#x2F;lint.sh&lt;&#x2F;code&gt; as it takes the longest and could cause the script to exit early. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7738&quot;&gt;#7738&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Explain the &amp;quot;test&amp;quot; conditional requirement for dependencies is not all of the modules necessary to run the unit tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7751&quot;&gt;#7751&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some metrics for inbound and outbound federation latencies: &lt;code&gt;synapse_federation_server_pdu_process_time&lt;&#x2F;code&gt; and &lt;code&gt;synapse_event_processing_lag_by_event&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7755&quot;&gt;#7755&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.15.2 released with security fixes</title>
		<published>2020-07-02T17:58:57+00:00</published>
		<updated>2020-07-02T17:58:57+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/07/02/synapse-1-15-2-released-with-security-fixes/" type="text/html"/>
		<id>matrix.org/blog/2020/07/02/synapse-1-15-2-released-with-security-fixes/</id>
		<content type="html">&lt;p&gt;Folks, today we are releasing Synapse 1.15.2, which is a security release which contains fixes to two separate problems. We are also putting out the second release candidate for the forthcoming Synapse 1.16, including the same fixes.&lt;&#x2F;p&gt;
&lt;p&gt;Firstly, we have fixed a bug in the implementation of the room state resolution algorithm which could cause users to be unexpectedly ejected from rooms (Synapse issue &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7742&quot;&gt;#7742&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;Secondly, we have improved the security of pages served as part of the Single-Sign-on login flows to prevent clickjacking attacks. Thank you to &lt;a href=&quot;https:&#x2F;&#x2F;sandhose.fr&#x2F;&quot;&gt;Quentin Gliech&lt;&#x2F;a&gt; for reporting this.&lt;&#x2F;p&gt;
&lt;p&gt;We are not aware of either of these vulnerabilities being exploited in the wild, but we recommend that administrators upgrade as soon as possible. Those on Synapse 1.15.1 or earlier should upgrade to Synapse 1.15.2, while those who have already upgraded to Synapse 1.16.0rc1 should upgrade to 1.16.0rc2.&lt;&#x2F;p&gt;
&lt;p&gt;Get the new releases from any of the usual sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md. 1.15.2 is on github &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.15.2&quot;&gt;here&lt;&#x2F;a&gt;, and 1.16.0rc2 is &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.16.0rc2&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Changelog for 1.15.2 follows:&lt;&#x2F;p&gt;
&lt;h2 id=&quot;synapse-1-15-2-2020-07-02&quot;&gt;Synapse 1.15.2 (2020-07-02)&lt;&#x2F;h2&gt;
&lt;p&gt;Due to the two security issues highlighted below, server administrators are
encouraged to update Synapse. We are not aware of these vulnerabilities being
exploited in the wild.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;security-advisory&quot;&gt;Security advisory&lt;&#x2F;h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;A malicious homeserver could force Synapse to reset the state in a room to a
small subset of the correct state. This affects all Synapse deployments which
federate with untrusted servers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;commit&#x2F;96e9afe62500310977dc3cbc99a8d16d3d2fa15c&quot;&gt;96e9afe6&lt;&#x2F;a&gt;)&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;HTML pages served via Synapse were vulnerable to clickjacking attacks. This
predominantly affects homeservers with single-sign-on enabled, but all server
administrators are encouraged to upgrade.  (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;commit&#x2F;ea26e9a98b0541fc886a1cb826a38352b7599dbe&quot;&gt;ea26e9a9&lt;&#x2F;a&gt;)&lt;&#x2F;p&gt;
&lt;p&gt;This was reported by &lt;a href=&quot;https:&#x2F;&#x2F;sandhose.fr&#x2F;&quot;&gt;Quentin Gliech&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.15.1 released</title>
		<published>2020-06-16T12:25:32+00:00</published>
		<updated>2020-06-16T12:25:32+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/06/16/synapse-1-15-1-released/" type="text/html"/>
		<id>matrix.org/blog/2020/06/16/synapse-1-15-1-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.15.1 is a bug fix release to fix two bugs introduced in 1.15.0.&lt;&#x2F;p&gt;
&lt;p&gt;The first prevented users of certain clients (including Riot) to add or remove third party identifiers such as email addresses.&lt;&#x2F;p&gt;
&lt;p&gt;The second caused Synapse not to start when configured with certain password auth providers.&lt;&#x2F;p&gt;
&lt;p&gt;Sorry if you have been bitten!&lt;&#x2F;p&gt;
&lt;p&gt;Get 1.15.1 from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.15.1&quot;&gt;github&lt;&#x2F;a&gt; or any of the sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md.&lt;&#x2F;p&gt;
&lt;p&gt;Changelog since v1.15.0&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-15-1-2020-06-16&quot;&gt;Synapse 1.15.1 (2020-06-16)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a bug introduced in v1.15.0 that would crash Synapse on start when using certain password auth providers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7684&quot;&gt;#7684&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug introduced in v1.15.0 which meant that some 3PID management endpoints were not accessible on the correct URL. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7685&quot;&gt;#7685&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.15.0 released</title>
		<published>2020-06-11T18:27:48+00:00</published>
		<updated>2020-06-11T18:27:48+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/06/11/synapse-1-15-0-released/" type="text/html"/>
		<id>matrix.org/blog/2020/06/11/synapse-1-15-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.15.0 release day folks.&lt;&#x2F;p&gt;
&lt;p&gt;We continue our push to improve performance across the board. Factoring out event persistence into a separate worker pointed the way to a host of small but collectively important improvements. Expect further changes in coming releases.&lt;&#x2F;p&gt;
&lt;p&gt;Aside from that the admin API continues to grow (this time device management) and we have improved device list syncing to aid e2ee reliability.&lt;&#x2F;p&gt;
&lt;p&gt;We are receiving an increasing number of high quality PRs from the community, please keep them coming. Special thanks to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;cg505&quot;&gt;cg505&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;dklimpel&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;WGH&quot;&gt;WGH&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;olof&quot;&gt;olof&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ilmari&quot;&gt;ilmari&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Get 1.15.0 from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.15.0&quot;&gt;github&lt;&#x2F;a&gt; or any of the sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md.&lt;&#x2F;p&gt;
&lt;p&gt;Changelog since v1.14.0&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-15-0-2020-06-11&quot;&gt;Synapse 1.15.0 (2020-06-11)&lt;&#x2F;h1&gt;
&lt;p&gt;No significant changes.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-15-0rc1-2020-06-09&quot;&gt;Synapse 1.15.0rc1 (2020-06-09)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Advertise support for Client-Server API r0.6.0 and remove related unstable feature flags. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6585&quot;&gt;#6585&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an option to disable autojoining rooms for guest accounts. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6637&quot;&gt;#6637&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;For SAML authentication, add the ability to pass email addresses to be added to new users&#x27; accounts via SAML attributes. Contributed by Christopher Cooper. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7385&quot;&gt;#7385&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add admin APIs to allow server admins to manage users&#x27; devices. Contributed by @dklimpel. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7481&quot;&gt;#7481&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for generating thumbnails for WebP images. Previously, users would see an empty box instead of preview image. Contributed by @WGH-. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7586&quot;&gt;#7586&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Support the standardized &lt;code&gt;m.login.sso&lt;&#x2F;code&gt; user-interactive authentication flow. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7630&quot;&gt;#7630&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Allow new users to be registered via the admin API even if the monthly active user limit has been reached. Contributed by @dklimpel. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7263&quot;&gt;#7263&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix email notifications not being enabled for new users when created via the Admin API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7267&quot;&gt;#7267&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix str placeholders in an instance of &lt;code&gt;PrepareDatabaseException&lt;&#x2F;code&gt;. Introduced in Synapse v1.8.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7575&quot;&gt;#7575&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug in automatic user creation during first time login with &lt;code&gt;m.login.jwt&lt;&#x2F;code&gt;. Regression in v1.6.0. Contributed by @olof. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7585&quot;&gt;#7585&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug causing the cross-signing keys to be ignored when resyncing a device list. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7594&quot;&gt;#7594&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix metrics failing when there is a large number of active background processes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7597&quot;&gt;#7597&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where returning rooms for a group would fail if it included a room that the server was not in. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7599&quot;&gt;#7599&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix duplicate key violation when persisting read markers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7607&quot;&gt;#7607&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent an entire iteration of the device list resync loop from failing if one server responds with a malformed result. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7609&quot;&gt;#7609&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix exceptions when fetching events from a remote host fails. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7622&quot;&gt;#7622&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make &lt;code&gt;synctl restart&lt;&#x2F;code&gt; start synapse if it wasn&#x27;t running. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7624&quot;&gt;#7624&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Pass device information through to the login endpoint when using the login fallback. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7629&quot;&gt;#7629&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Advertise the &lt;code&gt;m.login.token&lt;&#x2F;code&gt; login flow when OpenID Connect is enabled. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7631&quot;&gt;#7631&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug in account data replication stream. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7656&quot;&gt;#7656&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Update the OpenBSD installation instructions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7587&quot;&gt;#7587&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Advertise Python 3.8 support in &lt;code&gt;setup.py&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7602&quot;&gt;#7602&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a link to &lt;code&gt;#synapse:matrix.org&lt;&#x2F;code&gt; in the troubleshooting section of the README. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7603&quot;&gt;#7603&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarifications to the admin api documentation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7647&quot;&gt;#7647&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Convert the identity handler to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7561&quot;&gt;#7561&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve query performance for fetching state from a PostgreSQL database. Contributed by @ilmari. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7567&quot;&gt;#7567&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Speed up processing of federation stream RDATA rows. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7584&quot;&gt;#7584&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add comment to systemd example to show postgresql dependency. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7591&quot;&gt;#7591&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor &lt;code&gt;Ratelimiter&lt;&#x2F;code&gt; to limit the amount of expensive config value accesses. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7595&quot;&gt;#7595&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert groups handlers to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7600&quot;&gt;#7600&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up exception handling in &lt;code&gt;SAML2ResponseResource&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7614&quot;&gt;#7614&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Check that all asynchronous tasks succeed and general cleanup of &lt;code&gt;MonthlyActiveUsersTestCase&lt;&#x2F;code&gt; and &lt;code&gt;TestMauLimit&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7619&quot;&gt;#7619&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert &lt;code&gt;get_user_id_by_threepid&lt;&#x2F;code&gt; to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7620&quot;&gt;#7620&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Switch to upstream &lt;code&gt;dh-virtualenv&lt;&#x2F;code&gt; rather than our fork for Debian package builds. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7621&quot;&gt;#7621&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update CI scripts to check the number in the newsfile fragment. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7623&quot;&gt;#7623&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Check if the localpart of a Matrix ID is reserved for guest users earlier in the registration flow, as well as when responding to requests to &lt;code&gt;&#x2F;register&#x2F;available&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7625&quot;&gt;#7625&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Minor cleanups to OpenID Connect integration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7628&quot;&gt;#7628&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Attempt to fix flaky test: &lt;code&gt;PhoneHomeStatsTestCase.test_performance_100&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7634&quot;&gt;#7634&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix typos of &lt;code&gt;m.olm.curve25519-aes-sha2&lt;&#x2F;code&gt; and &lt;code&gt;m.megolm.v1.aes-sha2&lt;&#x2F;code&gt; in comments, test files. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7637&quot;&gt;#7637&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert user directory, state deltas, and stats handlers to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7640&quot;&gt;#7640&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove some unused constants. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7644&quot;&gt;#7644&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix type information on &lt;code&gt;assert_*_is_admin&lt;&#x2F;code&gt; methods. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7645&quot;&gt;#7645&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert registration handler to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7649&quot;&gt;#7649&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.14.0 released</title>
		<published>2020-05-28T17:45:18+00:00</published>
		<updated>2020-05-28T17:23:47+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/05/28/synapse-1-14-0-released/" type="text/html"/>
		<id>matrix.org/blog/2020/05/28/synapse-1-14-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.14.0 has landed.&lt;&#x2F;p&gt;
&lt;p&gt;This release contains OpenId Connect support, so that admins can configure a whole range of SSO options. We&#x27;re really excited about what this means for helping users sign up and are considering it for matrix.org.&lt;&#x2F;p&gt;
&lt;p&gt;1.14.0 also contains finer grained cache configuration support, so that admins can tune caches in a more granular way. Our experience is that cache tuning can make a big difference to Synapse performance and over time we hope to continue improving cache tooling. Potentially we could even have caches auto-tune.&lt;&#x2F;p&gt;
&lt;p&gt;You&#x27;ll also find support for &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;spec&#x2F;rooms&#x2F;v6&quot;&gt;rooms v6&lt;&#x2F;a&gt;. v6 contains some small but important changes to improve the security of the room model. As with all room version upgrades we can&#x27;t switch to v6 as the default version immediately since we need to build up a critical mass of servers that can support it. So upgrade and watch this space for when we switch over properly.&lt;&#x2F;p&gt;
&lt;p&gt;As an aside we continue to be very happy with using Redis for worker inter-communication and will likely recommend it for production use in the coming weeks.&lt;&#x2F;p&gt;
&lt;p&gt;Get 1.14.0 from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.14.0&quot;&gt;github&lt;&#x2F;a&gt; or any of the sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md.&lt;&#x2F;p&gt;
&lt;p&gt;Changelog since v1.13.0&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-14-0-2020-05-28&quot;&gt;Synapse 1.14.0 (2020-05-28)&lt;&#x2F;h1&gt;
&lt;p&gt;No significant changes.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-14-0rc2-2020-05-27&quot;&gt;Synapse 1.14.0rc2 (2020-05-27)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix cache config to not apply cache factor to event cache. Regression in v1.14.0rc1. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7578&quot;&gt;#7578&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where &lt;code&gt;ReplicationStreamer&lt;&#x2F;code&gt; was not always started when replication was enabled. Bug introduced in v1.14.0rc1. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7579&quot;&gt;#7579&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix specifying individual cache factors for caches with special characters in their name. Regression in v1.14.0rc1. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7580&quot;&gt;#7580&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix the OIDC &lt;code&gt;client_auth_method&lt;&#x2F;code&gt; value in the sample config. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7581&quot;&gt;#7581&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-14-0rc1-2020-05-26&quot;&gt;Synapse 1.14.0rc1 (2020-05-26)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Synapse&#x27;s cache factor can now be configured in &lt;code&gt;homeserver.yaml&lt;&#x2F;code&gt; by the &lt;code&gt;caches.global_factor&lt;&#x2F;code&gt; setting. Additionally, &lt;code&gt;caches.per_cache_factors&lt;&#x2F;code&gt; controls the cache factors for individual caches. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6391&quot;&gt;#6391&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add OpenID Connect login&#x2F;registration support. Contributed by Quentin Gliech, on behalf of &lt;a href=&quot;https:&#x2F;&#x2F;connecteu.rs&quot;&gt;les Connecteurs&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7256&quot;&gt;#7256&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7457&quot;&gt;#7457&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add room details admin endpoint. Contributed by Awesome Technologies Innovationslabor GmbH. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7317&quot;&gt;#7317&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow for using more than one spam checker module at once. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7435&quot;&gt;#7435&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add additional authentication checks for &lt;code&gt;m.room.power_levels&lt;&#x2F;code&gt; event per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2209&quot;&gt;MSC2209&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7502&quot;&gt;#7502&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Implement room version 6 per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2240&quot;&gt;MSC2240&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7506&quot;&gt;#7506&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add highly experimental option to move event persistence off master. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7281&quot;&gt;#7281&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7374&quot;&gt;#7374&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7436&quot;&gt;#7436&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7440&quot;&gt;#7440&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7475&quot;&gt;#7475&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7490&quot;&gt;#7490&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7491&quot;&gt;#7491&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7492&quot;&gt;#7492&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7493&quot;&gt;#7493&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7495&quot;&gt;#7495&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7515&quot;&gt;#7515&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7516&quot;&gt;#7516&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7517&quot;&gt;#7517&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7542&quot;&gt;#7542&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a bug where event updates might not be sent over replication to worker processes after the stream falls behind. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7384&quot;&gt;#7384&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow expired user accounts to log out their device sessions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7443&quot;&gt;#7443&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug that would cause Synapse not to resync out-of-sync device lists. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7453&quot;&gt;#7453&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent rooms with 0 members or with invalid version strings from breaking group queries. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7465&quot;&gt;#7465&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Workaround for an upstream Twisted bug that caused Synapse to become unresponsive after startup. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7473&quot;&gt;#7473&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix Redis reconnection logic that can result in missed updates over replication if master reconnects to Redis without restarting. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7482&quot;&gt;#7482&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;When sending &lt;code&gt;m.room.member&lt;&#x2F;code&gt; events, omit &lt;code&gt;displayname&lt;&#x2F;code&gt; and &lt;code&gt;avatar_url&lt;&#x2F;code&gt; if they aren&#x27;t set instead of setting them to &lt;code&gt;null&lt;&#x2F;code&gt;. Contributed by Aaron Raimist. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7497&quot;&gt;#7497&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix incorrect &lt;code&gt;method&lt;&#x2F;code&gt; label on &lt;code&gt;synapse_http_matrixfederationclient_{requests,responses}&lt;&#x2F;code&gt; prometheus metrics. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7503&quot;&gt;#7503&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ignore incoming presence events from other homeservers if presence is disabled locally. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7508&quot;&gt;#7508&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a long-standing bug that broke the update remote profile background process. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7511&quot;&gt;#7511&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Hash passwords as early as possible during password reset. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7538&quot;&gt;#7538&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where a local user leaving a room could fail under rare circumstances. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7548&quot;&gt;#7548&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &amp;quot;Missing RelayState parameter&amp;quot; error when using user interactive authentication with SAML for some SAML providers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7552&quot;&gt;#7552&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix exception &lt;code&gt;&#x27;GenericWorkerReplicationHandler&#x27; object has no attribute &#x27;send_federation_ack&#x27;&lt;&#x2F;code&gt;, introduced in v1.13.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7564&quot;&gt;#7564&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;synctl&lt;&#x2F;code&gt; now warns if it was unable to stop Synapse and will not attempt to start Synapse if nothing was stopped. Contributed by Romain Bouyé. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6590&quot;&gt;#6590&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;updates-to-the-docker-image&quot;&gt;Updates to the Docker image&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Update docker runtime image to Alpine v3.11. Contributed by @Starbix. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7398&quot;&gt;#7398&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation-1&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Update information about mapping providers for SAML and OpenID. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7458&quot;&gt;#7458&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add additional reverse proxy example for Caddy v2. Contributed by Jeff Peeler. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7463&quot;&gt;#7463&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix copy-paste error in &lt;code&gt;ServerNoticesConfig&lt;&#x2F;code&gt; docstring. Contributed by @ptman. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7477&quot;&gt;#7477&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve the formatting of &lt;code&gt;reverse_proxy.md&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7514&quot;&gt;#7514&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Change the systemd worker service to check that the worker config file exists instead of silently failing. Contributed by David Vo. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7528&quot;&gt;#7528&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Minor clarifications to the TURN docs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7533&quot;&gt;#7533&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add typing annotations in &lt;code&gt;synapse.federation&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7382&quot;&gt;#7382&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert the room handler to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7396&quot;&gt;#7396&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve performance of &lt;code&gt;get_e2e_cross_signing_key&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7428&quot;&gt;#7428&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve performance of &lt;code&gt;mark_as_sent_devices_by_remote&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7429&quot;&gt;#7429&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7562&quot;&gt;#7562&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add type hints to the SAML handler. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7445&quot;&gt;#7445&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove storage method &lt;code&gt;get_hosts_in_room&lt;&#x2F;code&gt; that is no longer called anywhere. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7448&quot;&gt;#7448&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix some typos in the &lt;code&gt;notice_expiry&lt;&#x2F;code&gt; templates. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7449&quot;&gt;#7449&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert the federation handler to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7459&quot;&gt;#7459&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert the search handler to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7460&quot;&gt;#7460&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add type hints to &lt;code&gt;synapse.event_auth&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7505&quot;&gt;#7505&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert the room member handler to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7507&quot;&gt;#7507&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add type hints to room member handler. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7513&quot;&gt;#7513&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix typing annotations in &lt;code&gt;tests.replication&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7518&quot;&gt;#7518&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove some redundant Python 2 support code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7519&quot;&gt;#7519&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;All endpoints now respond with a 200 OK for &lt;code&gt;OPTIONS&lt;&#x2F;code&gt; requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7534&quot;&gt;#7534&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7560&quot;&gt;#7560&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Synapse now exports &lt;a href=&quot;https:&#x2F;&#x2F;doc.pypy.org&#x2F;en&#x2F;latest&#x2F;gc_info.html#gc-get-stats&quot;&gt;detailed allocator statistics&lt;&#x2F;a&gt; and basic GC timings as Prometheus metrics (&lt;code&gt;pypy_gc_time_seconds_total&lt;&#x2F;code&gt; and &lt;code&gt;pypy_memory_bytes&lt;&#x2F;code&gt;) when run under PyPy. Contributed by Ivan Shapovalov. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7536&quot;&gt;#7536&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove Ubuntu Cosmic and Disco from the list of distributions which we provide &lt;code&gt;.deb&lt;&#x2F;code&gt;s for, due to end-of-life. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7539&quot;&gt;#7539&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make worker processes return a stubbed-out response to &lt;code&gt;GET &#x2F;presence&lt;&#x2F;code&gt; requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7545&quot;&gt;#7545&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Optimise some references to &lt;code&gt;hs.config&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7546&quot;&gt;#7546&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;On upgrade room only send canonical alias once. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7547&quot;&gt;#7547&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix some indentation inconsistencies in the sample config. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7550&quot;&gt;#7550&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Include &lt;code&gt;synapse.http.site&lt;&#x2F;code&gt; in type checking. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7553&quot;&gt;#7553&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix some test code to not mangle stacktraces, to make it easier to debug errors. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7554&quot;&gt;#7554&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refresh apt cache when building &lt;code&gt;dh_virtualenv&lt;&#x2F;code&gt; docker image. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7555&quot;&gt;#7555&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Stop logging some expected HTTP request errors as exceptions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7556&quot;&gt;#7556&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7563&quot;&gt;#7563&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert sending mail to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7557&quot;&gt;#7557&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Simplify &lt;code&gt;reap_monthly_active_users&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7558&quot;&gt;#7558&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Room Version 6, Client-Server r0.6.1, and Federation r0.1.4 spec releases</title>
		<published>2020-05-27T00:00:00+00:00</published>
		<updated>2020-05-27T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/05/27/room-version-6-client-server-r0-6-1-and-federation-r0-1-4-spec-releases/" type="text/html"/>
		<id>matrix.org/blog/2020/05/27/room-version-6-client-server-r0-6-1-and-federation-r0-1-4-spec-releases/</id>
		<content type="html">&lt;h2 id=&quot;room-version-6-client-server-r0-6-1-and-federation-r0-1-4-spec-releases&quot;&gt;Room Version 6, Client-Server r0.6.1, and Federation r0.1.4 spec releases&lt;&#x2F;h2&gt;
&lt;p&gt;Hey all,&lt;&#x2F;p&gt;
&lt;p&gt;It&#x27;s been &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2019&#x2F;11&#x2F;08&#x2F;client-server-r-0-6-0-and-identity-service-r-0-3-0-releases&quot;&gt;a little while&lt;&#x2F;a&gt; since we&#x27;ve done a spec release, so here we are with &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;spec&#x2F;rooms&#x2F;v6&quot;&gt;Room Version 6&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;spec&#x2F;client_server&#x2F;r0.6.1&quot;&gt;Client-Server r0.6.1&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;spec&#x2F;server_server&#x2F;r0.1.4&quot;&gt;Federation r0.1.4&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Room Version 6 (and the associated Federation r0.1.4 release) is largely something for implementations to worry about. It contains new event authorisation rules, changes to the redaction algorithm, and stricter compliance for JSON.&lt;&#x2F;p&gt;
&lt;p&gt;Client-Server r0.6.1 contains a number of clarifications as well as SSO support for authorisation, &amp;quot;soft logout&amp;quot; to avoid needlessly destroying e2e history, and new ways to publish aliases within rooms.&lt;&#x2F;p&gt;
&lt;p&gt;If you&#x27;re wondering where all the E2E-by-default related MSCs are - we&#x27;re doing final iterations based on the real-world feedback from the E2E-by-default launch a few weeks ago, and they are then expected to land in the upcoming Client-Server r0.7.&lt;&#x2F;p&gt;
&lt;p&gt;Here&#x27;s all the MSCs that got merged since the last release:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2240&quot;&gt;MSC2240&lt;&#x2F;a&gt;: Room version 6&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2457&quot;&gt;MSC2457&lt;&#x2F;a&gt;: Invalidating devices during password modification&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2454&quot;&gt;MSC2454&lt;&#x2F;a&gt;: Support UI auth for SSO&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2451&quot;&gt;MSC2451&lt;&#x2F;a&gt;: Remove &lt;code&gt;query_auth&lt;&#x2F;code&gt; federation endpoint&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2432&quot;&gt;MSC2432&lt;&#x2F;a&gt;: Updated semantics for publishing room aliases&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2324&quot;&gt;MSC2324&lt;&#x2F;a&gt;: Facilitating early releases of software dependent on spec&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2313&quot;&gt;MSC2313&lt;&#x2F;a&gt;: Moderation policies as rooms&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;1466&quot;&gt;MSC1466&lt;&#x2F;a&gt;: Soft Logout&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2540&quot;&gt;MSC2540&lt;&#x2F;a&gt;: Stricter event validation: JSON compliance&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2209&quot;&gt;MSC2209&lt;&#x2F;a&gt;: Alter auth rules to check notifications in m.room.power_levels&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;1802&quot;&gt;MSC1802&lt;&#x2F;a&gt;: Remove the &#x27;200&#x27; value from some federation responses&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;client-server-r0-6-1-changelog&quot;&gt;Client-Server r0.6.1 changelog&lt;&#x2F;h3&gt;
&lt;h4 id=&quot;new-endpoints&quot;&gt;New Endpoints&lt;&#x2F;h4&gt;
&lt;ul&gt;
&lt;li&gt;Added &lt;code&gt;&#x2F;rooms&#x2F;{roomId}&#x2F;aliases&lt;&#x2F;code&gt; for retrieving local aliases for a room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2562&quot;&gt;#2562&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;backwards-compatible-changes&quot;&gt;Backwards Compatible Changes&lt;&#x2F;h4&gt;
&lt;ul&gt;
&lt;li&gt;Added data structures for defining moderation policies in rooms per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2313&quot;&gt;MSC2313&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2434&quot;&gt;#2434&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Optionally invalidate other access tokens during password modification per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2457&quot;&gt;MSC2457&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2523&quot;&gt;#2523&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add User-Interactive Authentication for SSO-backed homeserver per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2454&quot;&gt;MSC2454&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2532&quot;&gt;#2532&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add soft-logout support per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;1466&quot;&gt;MSC1466&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2546&quot;&gt;#2546&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Replaced legacy room alias handling with a more sustainable solution per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2432&quot;&gt;MSC2432&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2562&quot;&gt;#2562&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;spec-clarifications&quot;&gt;Spec Clarifications&lt;&#x2F;h4&gt;
&lt;ul&gt;
&lt;li&gt;List available enum values for the room versions capability. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2245&quot;&gt;#2245&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix various spelling errors throughout the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2351&quot;&gt;#2351&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2415&quot;&gt;#2415&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2453&quot;&gt;#2453&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2524&quot;&gt;#2524&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2553&quot;&gt;#2553&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2569&quot;&gt;#2569&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Minor clarifications to token-based User-Interactive Authentication. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2369&quot;&gt;#2369&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Minor clarification for what the user directory searches. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2381&quot;&gt;#2381&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix key export format example to match the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2430&quot;&gt;#2430&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the IV data type for encrypted files. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2492&quot;&gt;#2492&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the &lt;code&gt;.m.rule.contains_user_name&lt;&#x2F;code&gt; default push rule to set the highlight tweak. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2519&quot;&gt;#2519&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that an &lt;code&gt;event_id&lt;&#x2F;code&gt; is returned when sending events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2525&quot;&gt;#2525&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix some numbers in the specification to match their explanation text. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2554&quot;&gt;#2554&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move redaction algorithm into the room version specifications. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2563&quot;&gt;#2563&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify signature object structures for encryption. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2566&quot;&gt;#2566&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify which events are created as part of &lt;code&gt;&#x2F;createRoom&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2571&quot;&gt;#2571&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove claims that the homeserver is exclusively responsible for profile information in membership events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2574&quot;&gt;#2574&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;server-server-federation-r0-1-4-changelog&quot;&gt;Server-Server (Federation) r0.1.4 changelog&lt;&#x2F;h3&gt;
&lt;h4 id=&quot;new-endpoints-1&quot;&gt;New Endpoints&lt;&#x2F;h4&gt;
&lt;ul&gt;
&lt;li&gt;Add new &lt;code&gt;POST &#x2F;publicRooms&lt;&#x2F;code&gt; endpoint for filtering the room directory. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2305&quot;&gt;#2305&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add new v2 &lt;code&gt;&#x2F;send_join&lt;&#x2F;code&gt; and &lt;code&gt;&#x2F;send_leave&lt;&#x2F;code&gt; endpoints per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;1802&quot;&gt;MSC1802&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2547&quot;&gt;#2547&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;removed-endpoints&quot;&gt;Removed Endpoints&lt;&#x2F;h4&gt;
&lt;ul&gt;
&lt;li&gt;Remove the unused &lt;code&gt;query_auth&lt;&#x2F;code&gt; API per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2451&quot;&gt;MSC2451&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2470&quot;&gt;#2470&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;spec-clarifications-1&quot;&gt;Spec Clarifications&lt;&#x2F;h4&gt;
&lt;ul&gt;
&lt;li&gt;Move auth event selection to a more obvious location. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2392&quot;&gt;#2392&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix typo in Request Authentication python example. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2510&quot;&gt;#2510&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify which fields are required on the key server endpoints. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2527&quot;&gt;#2527&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the limits of &lt;code&gt;prev_events&lt;&#x2F;code&gt; and &lt;code&gt;auth_events&lt;&#x2F;code&gt; for PDUs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2538&quot;&gt;#2538&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify which events are targeted by backfill. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2559&quot;&gt;#2559&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the response format of the &lt;code&gt;&#x2F;send&lt;&#x2F;code&gt; endpoint. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2560&quot;&gt;#2560&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify signature object structures for encryption. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2566&quot;&gt;#2566&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the server names to use when signing requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2570&quot;&gt;#2570&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the state&#x2F;auth chain requirements for &lt;code&gt;&#x2F;send_join&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2575&quot;&gt;#2575&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix various spelling errors throughout the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2577&quot;&gt;#2577&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.13.0 released</title>
		<published>2020-05-19T00:00:00+00:00</published>
		<updated>2020-05-19T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/05/19/synapse-1-13-0-released/" type="text/html"/>
		<id>matrix.org/blog/2020/05/19/synapse-1-13-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.13.0 is here and it&#x27;s a whopper!&lt;&#x2F;p&gt;
&lt;p&gt;Highlights include new support for User Interactive Authentication (UIA) for Single Sign-on (SSO) installations. This means that for the first time features that require the user to re-authenticate are available for servers that authenticate by SSO. Notably this means that these servers now support cross signing!&lt;&#x2F;p&gt;
&lt;p&gt;SSO admins should take a look at the SSO notes in the changelog.&lt;&#x2F;p&gt;
&lt;p&gt;We have been working hard on performance for large scale installations. Anyone supporting more than a few thousand users is probably running Synapse in worker mode. This means splitting out functionality from the master process and making use of multiple cores (or machines) to spread the load. Cross process communication was previously handled by a home grown TCP based replication protocol. As part of our ongoing efforts to improve performance we have replaced this replication system with Redis and have been running Redis in production on matrix.org for the past 2 weeks.&lt;&#x2F;p&gt;
&lt;p&gt;Redis itself does not provide a significant performance win directly but it means that it is much less expensive to add new workers to a cluster. The topology of the old system meant that every additional worker carried a small but not insignificant overhead to the master process. Since moving to Redis we have doubled the number of workers backing matrix.org.&lt;&#x2F;p&gt;
&lt;p&gt;We still consider Redis to be experimental and admins should not feel obliged to upgrade. However it looks very promising and we are likely to deprecate the old replication system in future. So watch this space - Redis is the future.&lt;&#x2F;p&gt;
&lt;p&gt;Finally we&#x27;ve seen lots of improvements to our documentation and many thanks for those in the community making contributions in this area.&lt;&#x2F;p&gt;
&lt;p&gt;It is also worth noting for those of you contributing to Synapse that the &lt;code&gt;develop&lt;&#x2F;code&gt; branch is now the default. More details in the changelog, so take a look.&lt;&#x2F;p&gt;
&lt;p&gt;Get 1.13.0 from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.13.0&quot;&gt;github&lt;&#x2F;a&gt; or any of the sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md.&lt;&#x2F;p&gt;
&lt;p&gt;Changelog since v1.12.4&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-13-0-2020-05-19&quot;&gt;Synapse 1.13.0 (2020-05-19)&lt;&#x2F;h1&gt;
&lt;p&gt;This release brings some potential changes necessary for certain configurations of Synapse:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;If your Synapse is configured to use SSO and have a custom &lt;code&gt;sso_redirect_confirm_template_dir&lt;&#x2F;code&gt; configuration option set, you will need to duplicate the new &lt;code&gt;sso_auth_confirm.html&lt;&#x2F;code&gt;, &lt;code&gt;sso_auth_success.html&lt;&#x2F;code&gt; and &lt;code&gt;sso_account_deactivated.html&lt;&#x2F;code&gt; templates into that directory.&lt;&#x2F;li&gt;
&lt;li&gt;Synapse plugins using the &lt;code&gt;complete_sso_login&lt;&#x2F;code&gt; method of &lt;code&gt;synapse.module_api.ModuleApi&lt;&#x2F;code&gt; should instead switch to the async&#x2F;await version, &lt;code&gt;complete_sso_login_async&lt;&#x2F;code&gt;, which includes additional checks. The former version is now deprecated.&lt;&#x2F;li&gt;
&lt;li&gt;A bug was introduced in Synapse 1.4.0 which could cause the room directory to be incomplete or empty if Synapse was upgraded directly from v1.2.1 or earlier, to versions between v1.4.0 and v1.12.x.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Please review &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;UPGRADE.rst&quot;&gt;UPGRADE.rst&lt;&#x2F;a&gt; for more details on these changes and for general upgrade guidance.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;notice-of-change-to-the-default-git-branch-for-synapse&quot;&gt;Notice of change to the default &lt;code&gt;git&lt;&#x2F;code&gt; branch for Synapse&lt;&#x2F;h2&gt;
&lt;p&gt;With the release of Synapse 1.13.0, the default &lt;code&gt;git&lt;&#x2F;code&gt; branch for Synapse has changed to &lt;code&gt;develop&lt;&#x2F;code&gt;, which is the development tip. This is more consistent with common practice and modern &lt;code&gt;git&lt;&#x2F;code&gt; usage.&lt;&#x2F;p&gt;
&lt;p&gt;The &lt;code&gt;master&lt;&#x2F;code&gt; branch, which tracks the latest release, is still available. It is recommended that developers and distributors who have scripts which run builds using the default branch of Synapse should therefore consider pinning their scripts to &lt;code&gt;master&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Extend the &lt;code&gt;web_client_location&lt;&#x2F;code&gt; option to accept an absolute URL to use as a redirect. Adds a warning when running the web client on the same hostname as homeserver. Contributed by Martin Milata. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7006&quot;&gt;#7006&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Set &lt;code&gt;Referrer-Policy&lt;&#x2F;code&gt; header to &lt;code&gt;no-referrer&lt;&#x2F;code&gt; on media downloads. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7009&quot;&gt;#7009&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for running replication over Redis when using workers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7040&quot;&gt;#7040&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7325&quot;&gt;#7325&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7352&quot;&gt;#7352&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7401&quot;&gt;#7401&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7427&quot;&gt;#7427&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7439&quot;&gt;#7439&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7446&quot;&gt;#7446&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7450&quot;&gt;#7450&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7454&quot;&gt;#7454&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Admin API &lt;code&gt;POST &#x2F;_synapse&#x2F;admin&#x2F;v1&#x2F;join&#x2F;&amp;lt;roomIdOrAlias&amp;gt;&lt;&#x2F;code&gt; to join users to a room like &lt;code&gt;auto_join_rooms&lt;&#x2F;code&gt; for creation of users. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7051&quot;&gt;#7051&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add options to prevent users from changing their profile or associated 3PIDs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7096&quot;&gt;#7096&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Support SSO in the user interactive authentication workflow. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7102&quot;&gt;#7102&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7186&quot;&gt;#7186&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7279&quot;&gt;#7279&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7343&quot;&gt;#7343&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow server admins to define and enforce a password policy (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2000&quot;&gt;MSC2000&lt;&#x2F;a&gt;). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7118&quot;&gt;#7118&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve the support for SSO authentication on the login fallback page. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7152&quot;&gt;#7152&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7235&quot;&gt;#7235&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Always whitelist the login fallback in the SSO configuration if &lt;code&gt;public_baseurl&lt;&#x2F;code&gt; is set. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7153&quot;&gt;#7153&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Admin users are no longer required to be in a room to create an alias for it. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7191&quot;&gt;#7191&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Require admin privileges to enable room encryption by default. This does not affect existing rooms. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7230&quot;&gt;#7230&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a config option for specifying the value of the Accept-Language HTTP header when generating URL previews. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7265&quot;&gt;#7265&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow &lt;code&gt;&#x2F;requestToken&lt;&#x2F;code&gt; endpoints to hide the existence (or lack thereof) of 3PID associations on the homeserver. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7315&quot;&gt;#7315&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a configuration setting to tweak the threshold for dummy events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7422&quot;&gt;#7422&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Don&#x27;t attempt to use an invalid sqlite config if no database configuration is provided. Contributed by @nekatak. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6573&quot;&gt;#6573&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix single-sign on with CAS systems: pass the same service URL when requesting the CAS ticket and when calling the &lt;code&gt;proxyValidate&lt;&#x2F;code&gt; URL. Contributed by @Naugrimm. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6634&quot;&gt;#6634&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix missing field &lt;code&gt;default&lt;&#x2F;code&gt; when fetching user-defined push rules. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6639&quot;&gt;#6639&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve error responses when accessing remote public room lists. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6899&quot;&gt;#6899&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7368&quot;&gt;#7368&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Transfer alias mappings on room upgrade. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6946&quot;&gt;#6946&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ensure that a user interactive authentication session is tied to a single request. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7068&quot;&gt;#7068&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7455&quot;&gt;#7455&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug in the federation API which could cause occasional &amp;quot;Failed to get PDU&amp;quot; errors. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7089&quot;&gt;#7089&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Return the proper error (&lt;code&gt;M_BAD_ALIAS&lt;&#x2F;code&gt;) when a non-existent canonical alias is provided. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7109&quot;&gt;#7109&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug which meant that groups updates were not correctly replicated between workers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7117&quot;&gt;#7117&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix starting workers when federation sending not split out. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7133&quot;&gt;#7133&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ensure &lt;code&gt;is_verified&lt;&#x2F;code&gt; is a boolean in responses to &lt;code&gt;GET &#x2F;_matrix&#x2F;client&#x2F;r0&#x2F;room_keys&#x2F;keys&lt;&#x2F;code&gt;. Also warn the user if they forgot the &lt;code&gt;version&lt;&#x2F;code&gt; query param. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7150&quot;&gt;#7150&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix error page being shown when a custom SAML handler attempted to redirect when processing an auth response. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7151&quot;&gt;#7151&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Avoid importing &lt;code&gt;sqlite3&lt;&#x2F;code&gt; when using the postgres backend. Contributed by David Vo. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7155&quot;&gt;#7155&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix excessive CPU usage by &lt;code&gt;prune_old_outbound_device_pokes&lt;&#x2F;code&gt; job. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7159&quot;&gt;#7159&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug which could cause outbound federation traffic to stop working if a client uploaded an incorrect e2e device signature. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7177&quot;&gt;#7177&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug which could cause incorrect &#x27;cyclic dependency&#x27; error. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7178&quot;&gt;#7178&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug that could cause a user to be invited to a server notices (aka System Alerts) room without any notice being sent. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7199&quot;&gt;#7199&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix some worker-mode replication handling not being correctly recorded in CPU usage stats. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7203&quot;&gt;#7203&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Do not allow a deactivated user to login via SSO. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7240&quot;&gt;#7240&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7259&quot;&gt;#7259&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix --help command-line argument. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7249&quot;&gt;#7249&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix room publish permissions not being checked on room creation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7260&quot;&gt;#7260&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reject unknown session IDs during user interactive authentication instead of silently creating a new session. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7268&quot;&gt;#7268&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a SQL query introduced in Synapse 1.12.0 which could cause large amounts of logging to the postgres slow-query log. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7274&quot;&gt;#7274&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Persist user interactive authentication sessions across workers and Synapse restarts. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7302&quot;&gt;#7302&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fixed backwards compatibility logic of the first value of &lt;code&gt;trusted_third_party_id_servers&lt;&#x2F;code&gt; being used for &lt;code&gt;account_threepid_delegates.email&lt;&#x2F;code&gt;, which occurs when the former, deprecated option is set and the latter is not. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7316&quot;&gt;#7316&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where event updates might not be sent over replication to worker processes after the stream falls behind. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7337&quot;&gt;#7337&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7358&quot;&gt;#7358&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bad error handling that would cause Synapse to crash if it&#x27;s provided with a YAML configuration file that&#x27;s either empty or doesn&#x27;t parse into a key-value map. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7341&quot;&gt;#7341&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix incorrect metrics reporting for &lt;code&gt;renew_attestations&lt;&#x2F;code&gt; background task. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7344&quot;&gt;#7344&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent non-federating rooms from appearing in responses to federated &lt;code&gt;POST &#x2F;publicRoom&lt;&#x2F;code&gt; requests when a filter was included. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7367&quot;&gt;#7367&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug which would cause the room directory to be incorrectly populated if Synapse was upgraded directly from v1.2.1 or earlier to v1.4.0 or later. Note that this fix does not apply retrospectively; see the &lt;a href=&quot;UPGRADE.rst#upgrading-to-v1130&quot;&gt;upgrade notes&lt;&#x2F;a&gt; for more information. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7387&quot;&gt;#7387&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug in &lt;code&gt;EventContext.deserialize&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7393&quot;&gt;#7393&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a long-standing bug which could cause messages not to be sent over federation, when state events with state keys matching user IDs (such as custom user statuses) were received. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7376&quot;&gt;#7376&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Restore compatibility with non-compliant clients during the user interactive authentication process, fixing a problem introduced in v1.13.0rc1. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7483&quot;&gt;#7483&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Hash passwords as early as possible during registration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7523&quot;&gt;#7523&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Update Debian installation instructions to recommend installing the &lt;code&gt;virtualenv&lt;&#x2F;code&gt; package instead of &lt;code&gt;python3-virtualenv&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6892&quot;&gt;#6892&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve the documentation for database configuration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6988&quot;&gt;#6988&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve the documentation of application service configuration files. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7091&quot;&gt;#7091&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update pre-built package name for FreeBSD. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7107&quot;&gt;#7107&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update postgres docs with login troubleshooting information. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7119&quot;&gt;#7119&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up INSTALL.md a bit. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7141&quot;&gt;#7141&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add documentation for running a local CAS server for testing. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7147&quot;&gt;#7147&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve README.md by being explicit about public IP recommendation for TURN relaying. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7167&quot;&gt;#7167&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a small typo in the &lt;code&gt;metrics_flags&lt;&#x2F;code&gt; config option. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7171&quot;&gt;#7171&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update the contributed documentation on managing synapse workers with systemd, and bring it into the core distribution. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7234&quot;&gt;#7234&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add documentation to the &lt;code&gt;password_providers&lt;&#x2F;code&gt; config option. Add known password provider implementations to docs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7238&quot;&gt;#7238&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7248&quot;&gt;#7248&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Modify suggested nginx reverse proxy configuration to match Synapse&#x27;s default file upload size. Contributed by @ProCycleDev. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7251&quot;&gt;#7251&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Documentation of media_storage_providers options updated to avoid misunderstandings. Contributed by Tristan Lins. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7272&quot;&gt;#7272&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add documentation on monitoring workers with Prometheus. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7357&quot;&gt;#7357&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify endpoint usage in the users admin api documentation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7361&quot;&gt;#7361&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Remove nonfunctional &lt;code&gt;captcha_bypass_secret&lt;&#x2F;code&gt; option from &lt;code&gt;homeserver.yaml&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7137&quot;&gt;#7137&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add benchmarks for LruCache. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6446&quot;&gt;#6446&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Return total number of users and profile attributes in admin users endpoint. Contributed by Awesome Technologies Innovationslabor GmbH. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6881&quot;&gt;#6881&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Change device list streams to have one row per ID. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7010&quot;&gt;#7010&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove concept of a non-limited stream. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7011&quot;&gt;#7011&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move catchup of replication streams logic to worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7024&quot;&gt;#7024&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7195&quot;&gt;#7195&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7226&quot;&gt;#7226&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7239&quot;&gt;#7239&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7286&quot;&gt;#7286&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7290&quot;&gt;#7290&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7318&quot;&gt;#7318&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7326&quot;&gt;#7326&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7378&quot;&gt;#7378&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7421&quot;&gt;#7421&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert some of synapse.rest.media to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7110&quot;&gt;#7110&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7184&quot;&gt;#7184&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7241&quot;&gt;#7241&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;De-duplicate &#x2F; remove unused REST code for login and auth. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7115&quot;&gt;#7115&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert &lt;code&gt;*StreamRow&lt;&#x2F;code&gt; classes to inner classes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7116&quot;&gt;#7116&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up some LoggingContext code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7120&quot;&gt;#7120&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7181&quot;&gt;#7181&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7183&quot;&gt;#7183&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7408&quot;&gt;#7408&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7426&quot;&gt;#7426&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add explicit &lt;code&gt;instance_id&lt;&#x2F;code&gt; for USER_SYNC commands and remove implicit &lt;code&gt;conn_id&lt;&#x2F;code&gt; usage. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7128&quot;&gt;#7128&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactored the CAS authentication logic to a separate class. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7136&quot;&gt;#7136&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Run replication streamers on workers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7146&quot;&gt;#7146&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add tests for outbound device pokes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7157&quot;&gt;#7157&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix device list update stream ids going backward. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7158&quot;&gt;#7158&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Use &lt;code&gt;stream.current_token()&lt;&#x2F;code&gt; and remove &lt;code&gt;stream_positions()&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7172&quot;&gt;#7172&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move client command handling out of TCP protocol. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7185&quot;&gt;#7185&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move server command handling out of TCP protocol. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7187&quot;&gt;#7187&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix consistency of HTTP status codes reported in log lines. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7188&quot;&gt;#7188&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Only run one background database update at a time. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7190&quot;&gt;#7190&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove sent outbound device list pokes from the database. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7192&quot;&gt;#7192&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a background database update job to clear out duplicate &lt;code&gt;device_lists_outbound_pokes&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7193&quot;&gt;#7193&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove some extraneous debugging log lines. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7207&quot;&gt;#7207&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add explicit Python build tooling as dependencies for the snapcraft build. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7213&quot;&gt;#7213&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add typing information to federation server code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7219&quot;&gt;#7219&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Extend room admin api (&lt;code&gt;GET &#x2F;_synapse&#x2F;admin&#x2F;v1&#x2F;rooms&lt;&#x2F;code&gt;) with additional attributes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7225&quot;&gt;#7225&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Unblacklist &#x27;&#x2F;upgrade creates a new room&#x27; sytest for workers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7228&quot;&gt;#7228&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove redundant checks on &lt;code&gt;daemonize&lt;&#x2F;code&gt; from synctl. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7233&quot;&gt;#7233&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Upgrade jQuery to v3.4.1 on fallback login&#x2F;registration pages. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7236&quot;&gt;#7236&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Change log line that told user to implement onLogin&#x2F;onRegister fallback js functions to a warning, instead of an info, so it&#x27;s more visible. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7237&quot;&gt;#7237&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Correct the parameters of a test fixture. Contributed by Isaiah Singletary. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7243&quot;&gt;#7243&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert auth handler to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7261&quot;&gt;#7261&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some unit tests for replication. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7278&quot;&gt;#7278&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve typing annotations in &lt;code&gt;synapse.replication.tcp.streams.Stream&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7291&quot;&gt;#7291&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce log verbosity of url cache cleanup tasks. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7295&quot;&gt;#7295&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix sample SAML Service Provider configuration. Contributed by @frcl. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7300&quot;&gt;#7300&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix StreamChangeCache to work with multiple entities changing on the same stream id. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7303&quot;&gt;#7303&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix an incorrect import in IdentityHandler. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7319&quot;&gt;#7319&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce logging verbosity for successful federation requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7321&quot;&gt;#7321&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert some federation handler code to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7338&quot;&gt;#7338&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix collation for postgres for unit tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7359&quot;&gt;#7359&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert RegistrationWorkerStore.is_server_admin and dependent code to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7363&quot;&gt;#7363&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an &lt;code&gt;instance_name&lt;&#x2F;code&gt; to &lt;code&gt;RDATA&lt;&#x2F;code&gt; and &lt;code&gt;POSITION&lt;&#x2F;code&gt; replication commands. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7364&quot;&gt;#7364&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Thread through instance name to replication client. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7369&quot;&gt;#7369&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert synapse.server_notices to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7394&quot;&gt;#7394&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert synapse.notifier to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7395&quot;&gt;#7395&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix issues with the Python package manifest. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7404&quot;&gt;#7404&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent methods in &lt;code&gt;synapse.handlers.auth&lt;&#x2F;code&gt; from polling the homeserver config every request. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7420&quot;&gt;#7420&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Speed up fetching device lists changes when handling &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7423&quot;&gt;#7423&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Run group attestation renewal in series rather than parallel for performance. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7442&quot;&gt;#7442&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix linting errors in new version of Flake8. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7470&quot;&gt;#7470&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update the version of dh-virtualenv we use to build debs, and add focal to the list of target distributions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7526&quot;&gt;#7526&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.12.4 released</title>
		<published>2020-04-23T19:04:16+00:00</published>
		<updated>2020-04-23T19:04:16+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/04/23/synapse-1-12-4-released/" type="text/html"/>
		<id>matrix.org/blog/2020/04/23/synapse-1-12-4-released/</id>
		<content type="html">&lt;p&gt;A small patch release containing features and bugs to support the upcoming launch of cross signing. We are very close now :)&lt;&#x2F;p&gt;
&lt;p&gt;Get 1.12.4 from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.12.4&quot;&gt;github&lt;&#x2F;a&gt; or any of the sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md.&lt;&#x2F;p&gt;
&lt;p&gt;Changelog since v1.12.3&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-12-4-2020-04-23&quot;&gt;Synapse 1.12.4 (2020-04-23)&lt;&#x2F;h1&gt;
&lt;p&gt;No significant changes.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-12-4rc1-2020-04-22&quot;&gt;Synapse 1.12.4rc1 (2020-04-22)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Always send users their own device updates. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7160&quot;&gt;#7160&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for handling GET requests for &lt;code&gt;account_data&lt;&#x2F;code&gt; on a worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7311&quot;&gt;#7311&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a bug that prevented cross-signing with users on worker-mode synapses. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7255&quot;&gt;#7255&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Do not treat display names as globs in push rules. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7271&quot;&gt;#7271&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug with cross-signing devices belonging to remote users who did not share a room with any user on the local homeserver. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7289&quot;&gt;#7289&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.12.2 released</title>
		<published>2020-04-02T00:00:00+00:00</published>
		<updated>2020-04-02T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/04/02/synapse-1-12-2-released/" type="text/html"/>
		<id>matrix.org/blog/2020/04/02/synapse-1-12-2-released/</id>
		<content type="html">&lt;p&gt;A small patch release to fix regressions introduced in v1.11.0 and v1.12.0.&lt;&#x2F;p&gt;
&lt;p&gt;Update 1.12.3 is a fast follow release from 1.12.2&lt;&#x2F;p&gt;
&lt;p&gt;Get 1.12.3 (not 1.12.2) from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.12.3&quot;&gt;github&lt;&#x2F;a&gt; or any of the sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md.&lt;&#x2F;p&gt;
&lt;p&gt;Changelog since v1.12.0&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-12-3-2020-04-03&quot;&gt;Synapse 1.12.3 (2020-04-03)&lt;&#x2F;h1&gt;
&lt;ul&gt;
&lt;li&gt;Remove the the pin to Pillow 7.0 which was introduced in Synapse 1.12.2, and
correctly fix the issue with building the Debian packages. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7212&quot;&gt;#7212&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-12-2-2020-04-02&quot;&gt;Synapse 1.12.2 (2020-04-02)&lt;&#x2F;h1&gt;
&lt;p&gt;This release fixes &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7208&quot;&gt;an issue&lt;&#x2F;a&gt; with building the debian packages.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-12-1-2020-04-02&quot;&gt;Synapse 1.12.1 (2020-04-02)&lt;&#x2F;h1&gt;
&lt;p&gt;No significant changes since 1.12.1rc1.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-12-1rc1-2020-03-31&quot;&gt;Synapse 1.12.1rc1 (2020-03-31)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix starting workers when federation sending not split out. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7133&quot;&gt;#7133&lt;&#x2F;a&gt;). Introduced in v1.12.0.&lt;&#x2F;li&gt;
&lt;li&gt;Avoid importing &lt;code&gt;sqlite3&lt;&#x2F;code&gt; when using the postgres backend. Contributed by David Vo. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7155&quot;&gt;#7155&lt;&#x2F;a&gt;). Introduced in v1.12.0rc1.&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug which could cause outbound federation traffic to stop working if a client uploaded an incorrect e2e device signature. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7177&quot;&gt;#7177&lt;&#x2F;a&gt;). Introduced in v1.11.0.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.12.0 released</title>
		<published>2020-03-23T00:00:00+00:00</published>
		<updated>2020-03-23T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/03/23/synapse-1-12-0-released/" type="text/html"/>
		<id>matrix.org/blog/2020/03/23/synapse-1-12-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.12.0 is here.&lt;&#x2F;p&gt;
&lt;p&gt;The most important reason to upgrade to 1.12.0 is that it contains performance improvements to boost the efficiency of state resolution in room versions greater than v1 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7095&quot;&gt;#7095&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;It also contains an implementation of (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2432&quot;&gt;MSC2432&lt;&#x2F;a&gt;) designed to limit room alias abuse. The MSC contains the full details, but in short admins now have more control over aliases as they appear on their local server.&lt;&#x2F;p&gt;
&lt;p&gt;There is also plenty of ground work for our master process sharding project. Nothing that can be used today unfortunately, but expect big improvements for worker based deployments over the coming weeks.&lt;&#x2F;p&gt;
&lt;p&gt;Please pay special attention to the security advisory in the changelog, TL;DR make sure your installation is using Twisted 20.3.0.&lt;&#x2F;p&gt;
&lt;p&gt;Also, note that once Synapse 1.13.0 is released, the default branch will change to being &lt;code&gt;develop&lt;&#x2F;code&gt; rather than &lt;code&gt;master&lt;&#x2F;code&gt;. Again more details follow in the changelog.&lt;&#x2F;p&gt;
&lt;p&gt;Get the new release from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.12.0&quot;&gt;github&lt;&#x2F;a&gt; or any of the sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md.&lt;&#x2F;p&gt;
&lt;p&gt;Changelog since Synapse 1.11.1&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-12-0-2020-03-23&quot;&gt;Synapse 1.12.0 (2020-03-23)&lt;&#x2F;h1&gt;
&lt;p&gt;No significant changes since 1.12.0rc1.&lt;&#x2F;p&gt;
&lt;p&gt;Debian packages and Docker images are rebuilt using the latest versions of
dependency libraries, including Twisted 20.3.0. &lt;strong&gt;Please see security advisory
below&lt;&#x2F;strong&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;security-advisory&quot;&gt;Security advisory&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse may be vulnerable to request-smuggling attacks when it is used with a
reverse-proxy. The vulnerabilities are fixed in Twisted 20.3.0, and are
described in
&lt;a href=&quot;https:&#x2F;&#x2F;cve.mitre.org&#x2F;cgi-bin&#x2F;cvename.cgi?name=CVE-2020-10108&quot;&gt;CVE-2020-10108&lt;&#x2F;a&gt;
and
&lt;a href=&quot;https:&#x2F;&#x2F;cve.mitre.org&#x2F;cgi-bin&#x2F;cvename.cgi?name=CVE-2020-10109&quot;&gt;CVE-2020-10109&lt;&#x2F;a&gt;.
For a good introduction to this class of request-smuggling attacks, see
https:&#x2F;&#x2F;portswigger.net&#x2F;research&#x2F;http-desync-attacks-request-smuggling-reborn.&lt;&#x2F;p&gt;
&lt;p&gt;We are not aware of these vulnerabilities being exploited in the wild, and
do not believe that they are exploitable with current versions of any reverse
proxies. Nevertheless, we recommend that all Synapse administrators ensure that
they have the latest versions of the Twisted library to ensure that their
installation remains secure.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Administrators using the &lt;a href=&quot;https:&#x2F;&#x2F;hub.docker.com&#x2F;r&#x2F;matrixdotorg&#x2F;synapse&#x2F;&quot;&gt;&lt;code&gt;matrix.org&lt;&#x2F;code&gt; Docker
image&lt;&#x2F;a&gt; or the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md#matrixorg-packages&quot;&gt;Debian&#x2F;Ubuntu
packages from
&lt;code&gt;matrix.org&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;
should ensure that they have version 1.12.0 installed: these images include
Twisted 20.3.0.&lt;&#x2F;li&gt;
&lt;li&gt;Administrators who have &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md#installing-from-source&quot;&gt;installed Synapse from
source&lt;&#x2F;a&gt;
should upgrade Twisted within their virtualenv by running:&lt;pre data-lang=&quot;sh&quot; style=&quot;background-color:#1e1e1e;color:#dcdcdc;&quot; class=&quot;language-sh &quot;&gt;&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;&lt;span&gt;&amp;lt;path_to_virtualenv&amp;gt;&#x2F;bin&#x2F;pip install &lt;&#x2F;span&gt;&lt;span style=&quot;color:#d69d85;&quot;&gt;&amp;#39;Twisted&amp;gt;=20.3.0&amp;#39;
&lt;&#x2F;span&gt;&lt;&#x2F;code&gt;&lt;&#x2F;pre&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Administrators who have installed Synapse from distribution packages should
consult the information from their distributions.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;The &lt;code&gt;matrix.org&lt;&#x2F;code&gt; Synapse instance was not vulnerable to these vulnerabilities.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;advance-notice-of-change-to-the-default-git-branch-for-synapse&quot;&gt;Advance notice of change to the default &lt;code&gt;git&lt;&#x2F;code&gt; branch for Synapse&lt;&#x2F;h2&gt;
&lt;p&gt;Currently, the default &lt;code&gt;git&lt;&#x2F;code&gt; branch for Synapse is &lt;code&gt;master&lt;&#x2F;code&gt;, which tracks the
latest release.&lt;&#x2F;p&gt;
&lt;p&gt;After the release of Synapse 1.13.0, we intend to change this default to
&lt;code&gt;develop&lt;&#x2F;code&gt;, which is the development tip. This is more consistent with common
practice and modern &lt;code&gt;git&lt;&#x2F;code&gt; usage.&lt;&#x2F;p&gt;
&lt;p&gt;Although we try to keep &lt;code&gt;develop&lt;&#x2F;code&gt; in a stable state, there may be occasions
where regressions creep in. Developers and distributors who have scripts which
run builds using the default branch of &lt;code&gt;Synapse&lt;&#x2F;code&gt; should therefore consider
pinning their scripts to &lt;code&gt;master&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-12-0rc1-2020-03-19&quot;&gt;Synapse 1.12.0rc1 (2020-03-19)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Changes related to room alias management (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2432&quot;&gt;MSC2432&lt;&#x2F;a&gt;):
&lt;ul&gt;
&lt;li&gt;Publishing&#x2F;removing a room from the room directory now requires the user to have a power level capable of modifying the canonical alias, instead of the room aliases. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6965&quot;&gt;#6965&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Validate the &lt;code&gt;alt_aliases&lt;&#x2F;code&gt; property of canonical alias events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6971&quot;&gt;#6971&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Users with a power level sufficient to modify the canonical alias of a room can now delete room aliases. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6986&quot;&gt;#6986&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Implement updated authorization rules and redaction rules for aliases events, from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2261&quot;&gt;MSC2261&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2432&quot;&gt;MSC2432&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7037&quot;&gt;#7037&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Stop sending m.room.aliases events during room creation and upgrade. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6941&quot;&gt;#6941&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Synapse no longer uses room alias events to calculate room names for push notifications. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6966&quot;&gt;#6966&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;The room list endpoint no longer returns a list of aliases. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6970&quot;&gt;#6970&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove special handling of aliases events from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2260&quot;&gt;MSC2260&lt;&#x2F;a&gt; added in v1.10.0rc1. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7034&quot;&gt;#7034&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Expose the &lt;code&gt;synctl&lt;&#x2F;code&gt;, &lt;code&gt;hash_password&lt;&#x2F;code&gt; and &lt;code&gt;generate_config&lt;&#x2F;code&gt; commands in the snapcraft package. Contributed by @devec0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6315&quot;&gt;#6315&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Check that server_name is correctly set before running database updates. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6982&quot;&gt;#6982&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Break down monthly active users by &lt;code&gt;appservice_id&lt;&#x2F;code&gt; and emit via Prometheus. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7030&quot;&gt;#7030&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Render a configurable and comprehensible error page if something goes wrong during the SAML2 authentication process. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7058&quot;&gt;#7058&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7067&quot;&gt;#7067&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an optional parameter to control whether other sessions are logged out when a user&#x27;s password is modified. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7085&quot;&gt;#7085&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add prometheus metrics for the number of active pushers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7103&quot;&gt;#7103&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7106&quot;&gt;#7106&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve performance when making HTTPS requests to sygnal, sydent, etc, by sharing the SSL context object between connections. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7094&quot;&gt;#7094&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;When a user&#x27;s profile is updated via the admin API, also generate a displayname&#x2F;avatar update for that user in each room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6572&quot;&gt;#6572&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a couple of bugs in email configuration handling. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6962&quot;&gt;#6962&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix an issue affecting worker-based deployments where replication would stop working, necessitating a full restart, after joining a large room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6967&quot;&gt;#6967&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;duplicate key&lt;&#x2F;code&gt; error which was logged when rejoining a room over federation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6968&quot;&gt;#6968&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent user from setting &#x27;deactivated&#x27; to anything other than a bool on the v2 PUT &#x2F;users Admin API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6990&quot;&gt;#6990&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix py35-old CI by using native tox package. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7018&quot;&gt;#7018&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug causing &lt;code&gt;org.matrix.dummy_event&lt;&#x2F;code&gt; to be included in responses from &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7035&quot;&gt;#7035&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug that renders UTF-8 text files incorrectly when loaded from media. Contributed by @TheStranjer. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7044&quot;&gt;#7044&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug that would cause Synapse to respond with an error about event visibility if a client tried to request the state of a room at a given token. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7066&quot;&gt;#7066&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Repair a data-corruption issue which was introduced in Synapse 1.10, and fixed in Synapse 1.11, and which could cause &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; to return with 404 errors about missing events and unknown rooms. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7070&quot;&gt;#7070&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug causing account validity renewal emails to be sent even if the feature is turned off in some cases. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7074&quot;&gt;#7074&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Updated CentOS8 install instructions. Contributed by Richard Kellner. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6925&quot;&gt;#6925&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;POSTGRES_INITDB_ARGS&lt;&#x2F;code&gt; in the &lt;code&gt;contrib&#x2F;docker&#x2F;docker-compose.yml&lt;&#x2F;code&gt; example docker-compose configuration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6984&quot;&gt;#6984&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Change date in &lt;a href=&quot;.&#x2F;INSTALL.md#tls-certificates&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md&lt;&#x2F;a&gt; for last date of getting TLS certificates to November 2019. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7015&quot;&gt;#7015&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Document that the fallback auth endpoints must be routed to the same worker node as the register endpoints. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7048&quot;&gt;#7048&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Remove the unused query_auth federation endpoint per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2451&quot;&gt;MSC2451&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7026&quot;&gt;#7026&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add type hints to &lt;code&gt;logging&#x2F;context.py&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6309&quot;&gt;#6309&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some clarifications to &lt;code&gt;README.md&lt;&#x2F;code&gt; in the database schema directory. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6615&quot;&gt;#6615&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactoring work in preparation for changing the event redaction algorithm. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6874&quot;&gt;#6874&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6875&quot;&gt;#6875&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6983&quot;&gt;#6983&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7003&quot;&gt;#7003&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve performance of v2 state resolution for large rooms. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6952&quot;&gt;#6952&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7095&quot;&gt;#7095&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce time spent doing GC, by freezing objects on startup. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6953&quot;&gt;#6953&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Minor performance fixes to &lt;code&gt;get_auth_chain_ids&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6954&quot;&gt;#6954&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t record remote cross-signing keys in the &lt;code&gt;devices&lt;&#x2F;code&gt; table. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6956&quot;&gt;#6956&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Use flake8-comprehensions to enforce good hygiene of list&#x2F;set&#x2F;dict comprehensions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6957&quot;&gt;#6957&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Merge worker apps together. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6964&quot;&gt;#6964&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7002&quot;&gt;#7002&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7055&quot;&gt;#7055&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7104&quot;&gt;#7104&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove redundant &lt;code&gt;store_room&lt;&#x2F;code&gt; call from &lt;code&gt;FederationHandler._process_received_pdu&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6979&quot;&gt;#6979&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update warning for incorrect database collation&#x2F;ctype to include link to documentation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6985&quot;&gt;#6985&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some type annotations to the database storage classes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6987&quot;&gt;#6987&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Port &lt;code&gt;synapse.handlers.presence&lt;&#x2F;code&gt; to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6991&quot;&gt;#6991&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7019&quot;&gt;#7019&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some type annotations to the federation base &amp;amp; client classes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6995&quot;&gt;#6995&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Port &lt;code&gt;synapse.rest.keys&lt;&#x2F;code&gt; to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7020&quot;&gt;#7020&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a type check to &lt;code&gt;is_verified&lt;&#x2F;code&gt; when processing room keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7045&quot;&gt;#7045&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add type annotations and comments to the auth handler. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;7063&quot;&gt;#7063&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.11.1 released</title>
		<published>2020-03-03T00:00:00+00:00</published>
		<updated>2020-03-03T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/03/03/synapse-1-11-1-released/" type="text/html"/>
		<id>matrix.org/blog/2020/03/03/synapse-1-11-1-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.11.1 is a security release which contains a fix impacting installations using Single Sign-On (i.e. SAML2 or CAS) for authentication. Administrators of such installations are encouraged to upgrade as soon as possible.&lt;&#x2F;p&gt;
&lt;p&gt;Admins not using Single Sign-On to authenticate users are not affected though may wish to upgrade anyway to pull in some unrelated bug fixes.&lt;&#x2F;p&gt;
&lt;p&gt;Thanks to &lt;a href=&quot;https:&#x2F;&#x2F;twitter.com&#x2F;rhysmdnz&quot;&gt;Rhys Davies&lt;&#x2F;a&gt; for the responsible disclosure.&lt;&#x2F;p&gt;
&lt;p&gt;Get the new release from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.11.1&quot;&gt;github&lt;&#x2F;a&gt; or any of the sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md.&lt;&#x2F;p&gt;
&lt;p&gt;Changelog since Synapse 1.11.0&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-11-1-2020-03-03&quot;&gt;Synapse 1.11.1 (2020-03-03)&lt;&#x2F;h1&gt;
&lt;p&gt;This release includes a security fix impacting installations using Single Sign-On (i.e. SAML2 or CAS) for authentication. Administrators of such installations are encouraged to upgrade as soon as possible.&lt;&#x2F;p&gt;
&lt;p&gt;The release also includes fixes for a couple of other bugs.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add a confirmation step to the SSO login flow before redirecting users to the redirect URL. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;commit&#x2F;b2bd54a2e31d9a248f73fadb184ae9b4cbdb49f9&quot;&gt;b2bd54a2&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;commit&#x2F;65c73cdfec1876a9fec2fd2c3a74923cd146fe0b&quot;&gt;65c73cdf&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;commit&#x2F;a0178df10422a76fd403b82d2b2a4ed28a9a9d1e&quot;&gt;a0178df1&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fixed set a user as an admin with the admin API &lt;code&gt;PUT &#x2F;_synapse&#x2F;admin&#x2F;v2&#x2F;users&#x2F;&amp;lt;user_id&amp;gt;&lt;&#x2F;code&gt;. Contributed by @dklimpel. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6910&quot;&gt;#6910&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug introduced in Synapse 1.11.0 which sometimes caused errors when joining rooms over federation, with &lt;code&gt;&#x27;coroutine&#x27; object has no attribute &#x27;event_id&#x27;&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6996&quot;&gt;#6996&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.9.1 released</title>
		<published>2020-01-28T00:00:00+00:00</published>
		<updated>2020-01-28T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/01/28/synapse-1-9-1-released/" type="text/html"/>
		<id>matrix.org/blog/2020/01/28/synapse-1-9-1-released/</id>
		<content type="html">&lt;p&gt;A quick bug fix release that affects admins making use of monthly active user limits. You will know if you are affected because 1.9.0 will not start up. Apologies if you were bitten by this one!&lt;&#x2F;p&gt;
&lt;p&gt;Get the new release from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.9.1&quot;&gt;github&lt;&#x2F;a&gt; or any of the sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md.&lt;&#x2F;p&gt;
&lt;p&gt;Changelog since Synapse 1.9.1&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-9-1-2020-01-28&quot;&gt;Synapse 1.9.1 (2020-01-28)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix bug where setting &lt;code&gt;mau_limit_reserved_threepids&lt;&#x2F;code&gt; config would cause Synapse to refuse to start. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6793&quot;&gt;#6793&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.9.0 released</title>
		<published>2020-01-23T00:00:00+00:00</published>
		<updated>2020-01-23T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/01/23/synapse-1-9-0-released/" type="text/html"/>
		<id>matrix.org/blog/2020/01/23/synapse-1-9-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.9.0 contains a bunch of new admin APIs as well as bug fixes to existing ones. In particular we have a new end point that allows admins to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;admin_api&#x2F;rooms.md&quot;&gt;query which rooms their server participates in&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Aside from that it is worth noting that we have officially dropped support for SQLite versions &amp;lt; 3.11. Though more generally we would recommend that all admins &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v1.9.0&#x2F;docs&#x2F;postgres.md&quot;&gt;migrate to Postgres&lt;&#x2F;a&gt; for anything other than test and evaluation purposes.&lt;&#x2F;p&gt;
&lt;p&gt;Get the new release from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.9.0&quot;&gt;github&lt;&#x2F;a&gt; or any of the sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md.&lt;&#x2F;p&gt;
&lt;p&gt;Changelog since Synapse 1.8.0&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-9-0-2020-01-23&quot;&gt;Synapse 1.9.0 (2020-01-23)&lt;&#x2F;h1&gt;
&lt;p&gt;&lt;strong&gt;WARNING&lt;&#x2F;strong&gt;: As of this release, Synapse no longer supports versions of SQLite before 3.11, and will refuse to start when configured to use an older version. Administrators are recommended to migrate their database to Postgres (see instructions &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v1.9.0&#x2F;docs&#x2F;postgres.md&quot;&gt;here&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;If your Synapse deployment uses workers, note that the reverse-proxy configurations for the &lt;code&gt;synapse.app.media_repository&lt;&#x2F;code&gt;, &lt;code&gt;synapse.app.federation_reader&lt;&#x2F;code&gt; and &lt;code&gt;synapse.app.event_creator&lt;&#x2F;code&gt; workers have changed, with the addition of a few paths (see the updated configurations &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v1.9.0&#x2F;docs&#x2F;workers.md#available-worker-applications&quot;&gt;here&lt;&#x2F;a&gt;). Existing configurations will continue to work.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix endpoint documentation for the List Rooms admin API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6770&quot;&gt;#6770&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-9-0rc1-2020-01-22&quot;&gt;Synapse 1.9.0rc1 (2020-01-22)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Allow admin to create or modify a user. Contributed by Awesome Technologies Innovationslabor GmbH. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5742&quot;&gt;#5742&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add new quarantine media admin APIs to quarantine by media ID or by user who uploaded the media. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6681&quot;&gt;#6681&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6756&quot;&gt;#6756&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;org.matrix.e2e_cross_signing&lt;&#x2F;code&gt; to &lt;code&gt;unstable_features&lt;&#x2F;code&gt; in &lt;code&gt;&#x2F;versions&lt;&#x2F;code&gt; as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;1756&quot;&gt;MSC1756&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6712&quot;&gt;#6712&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a new admin API to list and filter rooms on the server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6720&quot;&gt;#6720&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Correctly proxy HTTP errors due to API calls to remote group servers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6654&quot;&gt;#6654&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix media repo admin APIs when using a media worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6664&quot;&gt;#6664&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &amp;quot;CRITICAL&amp;quot; errors being logged when a request is received for a uri containing non-ascii characters. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6682&quot;&gt;#6682&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where we would assign a numeric user ID if somebody tried registering with an empty username. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6690&quot;&gt;#6690&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;purge_room&lt;&#x2F;code&gt; admin API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6711&quot;&gt;#6711&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug causing Synapse to not always purge quiet rooms with a low &lt;code&gt;max_lifetime&lt;&#x2F;code&gt; in their message retention policies when running the automated purge jobs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6714&quot;&gt;#6714&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the &lt;code&gt;synapse_port_db&lt;&#x2F;code&gt; not correctly running background updates. Thanks @tadzik for reporting. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6718&quot;&gt;#6718&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix changing password via user admin API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6730&quot;&gt;#6730&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;&#x2F;events&#x2F;:event_id&lt;&#x2F;code&gt; deprecated API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6731&quot;&gt;#6731&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix monthly active user limiting support for worker mode, fixes &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4639&quot;&gt;#4639&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6742&quot;&gt;#6742&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug when setting &lt;code&gt;account_validity&lt;&#x2F;code&gt; to an empty block in the config. Thanks to @Sorunome for reporting. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6747&quot;&gt;#6747&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;AttributeError: &#x27;NoneType&#x27; object has no attribute &#x27;get&#x27;&lt;&#x2F;code&gt; in &lt;code&gt;hash_password&lt;&#x2F;code&gt; when configuration has an empty &lt;code&gt;password_config&lt;&#x2F;code&gt;. Contributed by @ivilata. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6753&quot;&gt;#6753&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the &lt;code&gt;docker-compose.yaml&lt;&#x2F;code&gt; overriding the entire &lt;code&gt;&#x2F;etc&lt;&#x2F;code&gt; folder of the container. Contributed by Fabian Meyer. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6656&quot;&gt;#6656&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation-1&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a typo in the configuration example for purge jobs in the sample configuration file. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6621&quot;&gt;#6621&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add complete documentation of the message retention policies support. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6624&quot;&gt;#6624&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6665&quot;&gt;#6665&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some helpful tips about changelog entries to the GitHub pull request template. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6663&quot;&gt;#6663&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the &lt;code&gt;account_validity&lt;&#x2F;code&gt; and &lt;code&gt;email&lt;&#x2F;code&gt; sections of the sample configuration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6685&quot;&gt;#6685&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add more endpoints to the documentation for Synapse workers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6698&quot;&gt;#6698&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Synapse no longer supports versions of SQLite before 3.11, and will refuse to start when configured to use an older version. Administrators are recommended to migrate their database to Postgres (see instructions &lt;a href=&quot;docs&#x2F;postgres.md&quot;&gt;here&lt;&#x2F;a&gt;). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6675&quot;&gt;#6675&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add &lt;code&gt;local_current_membership&lt;&#x2F;code&gt; table for tracking local user membership state in rooms. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6655&quot;&gt;#6655&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6728&quot;&gt;#6728&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Port &lt;code&gt;synapse.replication.tcp&lt;&#x2F;code&gt; to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6666&quot;&gt;#6666&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fixup &lt;code&gt;synapse.replication&lt;&#x2F;code&gt; to pass mypy checks. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6667&quot;&gt;#6667&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow &lt;code&gt;additional_resources&lt;&#x2F;code&gt; to implement &lt;code&gt;IResource&lt;&#x2F;code&gt; directly. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6686&quot;&gt;#6686&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow REST endpoint implementations to raise a &lt;code&gt;RedirectException&lt;&#x2F;code&gt;, which will redirect the user&#x27;s browser to a given location. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6687&quot;&gt;#6687&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Updates and extensions to the module API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6688&quot;&gt;#6688&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Updates to the SAML mapping provider API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6689&quot;&gt;#6689&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6723&quot;&gt;#6723&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove redundant &lt;code&gt;RegistrationError&lt;&#x2F;code&gt; class. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6691&quot;&gt;#6691&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t block processing of incoming EDUs behind processing PDUs in the same transaction. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6697&quot;&gt;#6697&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove duplicate check for the &lt;code&gt;session&lt;&#x2F;code&gt; query parameter on the &lt;code&gt;&#x2F;auth&#x2F;xxx&#x2F;fallback&#x2F;web&lt;&#x2F;code&gt; Client-Server endpoint. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6702&quot;&gt;#6702&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Attempt to retry sending a transaction when we detect a remote server has come back online, rather than waiting for a transaction to be triggered by new data. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6706&quot;&gt;#6706&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;StateMap&lt;&#x2F;code&gt; type alias to simplify types. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6715&quot;&gt;#6715&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a &lt;code&gt;DeltaState&lt;&#x2F;code&gt; to track changes to be made to current state during event persistence. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6716&quot;&gt;#6716&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add more logging around message retention policies support. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6717&quot;&gt;#6717&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;When processing a SAML response, log the assertions for easier configuration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6724&quot;&gt;#6724&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fixup &lt;code&gt;synapse.rest&lt;&#x2F;code&gt; to pass mypy. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6732&quot;&gt;#6732&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6764&quot;&gt;#6764&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fixup &lt;code&gt;synapse.api&lt;&#x2F;code&gt; to pass mypy. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6733&quot;&gt;#6733&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow streaming cache &#x27;invalidate all&#x27; to workers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6749&quot;&gt;#6749&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unused CI docker compose files. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6754&quot;&gt;#6754&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.8.0 released</title>
		<published>2020-01-09T00:00:00+00:00</published>
		<updated>2020-01-09T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2020/01/09/synapse-1-8-0-released/" type="text/html"/>
		<id>matrix.org/blog/2020/01/09/synapse-1-8-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.8.0 has arrived, it contains a whole host of bug fixes and tweaks, most notably fixing some long standing problems with search.&lt;&#x2F;p&gt;
&lt;p&gt;More generally we are spending a lot of time  improving the e2ee experience ahead of switching on e2ee by default, so watch this space.&lt;&#x2F;p&gt;
&lt;p&gt;Get the new release from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.8.0&quot;&gt;github&lt;&#x2F;a&gt; or any of the sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-8-0-2020-01-09&quot;&gt;Synapse 1.8.0 (2020-01-09)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix &lt;code&gt;GET&lt;&#x2F;code&gt; request on &lt;code&gt;&#x2F;_synapse&#x2F;admin&#x2F;v2&#x2F;users&lt;&#x2F;code&gt; endpoint. Contributed by Awesome Technologies Innovationslabor GmbH. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6563&quot;&gt;#6563&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix incorrect signing of responses from the key server implementation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6657&quot;&gt;#6657&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-8-0rc1-2020-01-07&quot;&gt;Synapse 1.8.0rc1 (2020-01-07)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add v2 APIs for the &lt;code&gt;send_join&lt;&#x2F;code&gt; and &lt;code&gt;send_leave&lt;&#x2F;code&gt; federation endpoints (as described in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;1802&quot;&gt;MSC1802&lt;&#x2F;a&gt;). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6349&quot;&gt;#6349&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a develop script to generate full SQL schemas. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6394&quot;&gt;#6394&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add custom SAML username mapping functionality through an external provider plugin. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6411&quot;&gt;#6411&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Automatically delete empty groups&#x2F;communities. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6453&quot;&gt;#6453&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add option &lt;code&gt;limit_profile_requests_to_users_who_share_rooms&lt;&#x2F;code&gt; to prevent requirement of a local user sharing a room with another user to query their profile information. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6523&quot;&gt;#6523&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an &lt;code&gt;export_signing_key&lt;&#x2F;code&gt; script to extract the public part of signing keys when rotating them. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6546&quot;&gt;#6546&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add experimental config option to specify multiple databases. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6580&quot;&gt;#6580&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Raise an error if someone tries to use the &lt;code&gt;log_file&lt;&#x2F;code&gt; config option. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6626&quot;&gt;#6626&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Prevent redacted events from being returned during message search. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6377&quot;&gt;#6377&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6522&quot;&gt;#6522&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent error on trying to search a upgraded room when the server is not in the predecessor room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6385&quot;&gt;#6385&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve performance of looking up cross-signing keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6486&quot;&gt;#6486&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix race which occasionally caused deleted devices to reappear. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6514&quot;&gt;#6514&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix missing row in &lt;code&gt;device_max_stream_id&lt;&#x2F;code&gt; that could cause unable to decrypt errors after server restart. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6555&quot;&gt;#6555&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug which meant that we did not send systemd notifications on startup if acme was enabled. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6571&quot;&gt;#6571&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix exception when fetching the &lt;code&gt;matrix.org:ed25519:auto&lt;&#x2F;code&gt; key. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6625&quot;&gt;#6625&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where a moderator upgraded a room and became an admin in the new room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6633&quot;&gt;#6633&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix an error which was thrown by the &lt;code&gt;PresenceHandler&lt;&#x2F;code&gt; &lt;code&gt;_on_shutdown&lt;&#x2F;code&gt; handler. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6640&quot;&gt;#6640&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix exceptions in the synchrotron worker log when events are rejected. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6645&quot;&gt;#6645&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ensure that upgraded rooms are removed from the directory. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6648&quot;&gt;#6648&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug causing Synapse not to fetch missing events when it believes it has every event in the room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6652&quot;&gt;#6652&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Document the Room Shutdown Admin API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6541&quot;&gt;#6541&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reword sections of &lt;a href=&quot;docs&#x2F;federate.md&quot;&gt;docs&#x2F;federate.md&lt;&#x2F;a&gt; that explained delegation at time of Synapse 1.0 transition. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6601&quot;&gt;#6601&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Added the section &#x27;Configuration&#x27; in &lt;a href=&quot;docs&#x2F;turn-howto.md&quot;&gt;docs&#x2F;turn-howto.md&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6614&quot;&gt;#6614&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Remove redundant code from event authorisation implementation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6502&quot;&gt;#6502&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unused, undocumented &lt;code&gt;&#x2F;_matrix&#x2F;content&lt;&#x2F;code&gt; API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6628&quot;&gt;#6628&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add &lt;em&gt;experimental&lt;&#x2F;em&gt; support for multiple physical databases and split out state storage to separate data store. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6245&quot;&gt;#6245&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6510&quot;&gt;#6510&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6511&quot;&gt;#6511&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6513&quot;&gt;#6513&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6564&quot;&gt;#6564&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6565&quot;&gt;#6565&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Port sections of code base to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6496&quot;&gt;#6496&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6504&quot;&gt;#6504&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6505&quot;&gt;#6505&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6517&quot;&gt;#6517&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6559&quot;&gt;#6559&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6647&quot;&gt;#6647&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6653&quot;&gt;#6653&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove &lt;code&gt;SnapshotCache&lt;&#x2F;code&gt; in favour of &lt;code&gt;ResponseCache&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6506&quot;&gt;#6506&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Silence mypy errors for files outside those specified. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6512&quot;&gt;#6512&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up some logging when handling incoming events over federation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6515&quot;&gt;#6515&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Test more folders against mypy. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6534&quot;&gt;#6534&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update &lt;code&gt;mypy&lt;&#x2F;code&gt; to new version. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6537&quot;&gt;#6537&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Adjust the sytest blacklist for worker mode. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6538&quot;&gt;#6538&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unused &lt;code&gt;get_pagination_rows&lt;&#x2F;code&gt; methods from &lt;code&gt;EventSource&lt;&#x2F;code&gt; classes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6557&quot;&gt;#6557&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up logs from the push notifier at startup. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6558&quot;&gt;#6558&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve diagnostics on database upgrade failure. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6570&quot;&gt;#6570&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce the reconnect time when worker replication fails, to make it easier to catch up. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6617&quot;&gt;#6617&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Simplify http handling by removing redundant &lt;code&gt;SynapseRequestFactory&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6619&quot;&gt;#6619&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a workaround for synapse raising exceptions when fetching the notary&#x27;s own key from the notary. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6620&quot;&gt;#6620&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Automate generation of the sample log config. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6627&quot;&gt;#6627&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Simplify event creation code by removing redundant queries on the &lt;code&gt;event_reference_hashes&lt;&#x2F;code&gt; table. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6629&quot;&gt;#6629&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix errors when &lt;code&gt;frozen_dicts&lt;&#x2F;code&gt; are enabled. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6642&quot;&gt;#6642&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Get the new release from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.8.0&quot;&gt;github&lt;&#x2F;a&gt; or any of the sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.7.3 released</title>
		<published>2019-12-31T00:00:00+00:00</published>
		<updated>2019-12-31T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/12/31/synapse-1-7-3-released/" type="text/html"/>
		<id>matrix.org/blog/2019/12/31/synapse-1-7-3-released/</id>
		<content type="html">&lt;p&gt;Hi all,&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ve just released Synapse 1.7.3 - an important bug fix to address a class of failures due to malformed events.  We&#x27;ve seen this in the wild over the last few days, so we&#x27;d recommend updating as soon as possible, especially if you are having problems federating.&lt;&#x2F;p&gt;
&lt;p&gt;Get the new release from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.7.3&quot;&gt;github&lt;&#x2F;a&gt; or any of the sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md.&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.7.2 is:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-7-3-2019-12-31&quot;&gt;Synapse 1.7.3 (2019-12-31)&lt;&#x2F;h1&gt;
&lt;p&gt;This release fixes a long-standing bug in the state resolution algorithm.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix exceptions caused by state resolution choking on malformed events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6608&quot;&gt;#6608&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.7.2 released</title>
		<published>2019-12-20T00:00:00+00:00</published>
		<updated>2019-12-20T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/12/20/synapse-1-7-2-released/" type="text/html"/>
		<id>matrix.org/blog/2019/12/20/synapse-1-7-2-released/</id>
		<content type="html">&lt;p&gt;Hi all,&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ve just released Synapse 1.7.2 - a minor point release to address two regressions which snuck into 1.7.0 and 1.7.1.  Sorry for the upgrade faff; hopefully we will be back to a saner release cadence shortly.  Reminder that if you are on 1.7.0 or earlier you should upgrade asap as 1.7.1 contained security fixes.&lt;&#x2F;p&gt;
&lt;p&gt;Get the new release from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.7.2&quot;&gt;github&lt;&#x2F;a&gt; or any of the sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md.&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.7.1 is:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-7-2-2019-12-20&quot;&gt;Synapse 1.7.2 (2019-12-20)&lt;&#x2F;h1&gt;
&lt;p&gt;This release fixes some regressions introduced in Synapse 1.7.0 and 1.7.1.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a regression introduced in Synapse 1.7.1 which caused errors when attempting to backfill rooms over federation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6576&quot;&gt;#6576&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug introduced in Synapse 1.7.0 which caused an error on startup when upgrading from versions before 1.3.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6578&quot;&gt;#6578&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.7.1 released</title>
		<published>2019-12-18T00:00:00+00:00</published>
		<updated>2019-12-18T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/12/18/synapse-1-7-1-released/" type="text/html"/>
		<id>matrix.org/blog/2019/12/18/synapse-1-7-1-released/</id>
		<content type="html">&lt;p&gt;Hi folks; today we are releasing Synapse 1.7.1.&lt;&#x2F;p&gt;
&lt;p&gt;This is a security release which fixes some problems which affected all previous versions of Synapse. We advise all admins whose servers are open to public federation to upgrade as soon as possible.&lt;&#x2F;p&gt;
&lt;p&gt;Full details follow, but the most important change improves event authorization, thereby preventing the ability to add certain events to a given room erroneously.&lt;&#x2F;p&gt;
&lt;p&gt;You can get the new release from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.7.1&quot;&gt;github&lt;&#x2F;a&gt; or any of the sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md.&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.7.0 follows:&lt;&#x2F;p&gt;
&lt;h2 id=&quot;security-updates&quot;&gt;Security updates&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a bug which could cause room events to be incorrectly authorized using events from a different room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6501&quot;&gt;#6501&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6503&quot;&gt;#6503&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6521&quot;&gt;#6521&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6524&quot;&gt;#6524&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6530&quot;&gt;#6530&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6531&quot;&gt;#6531&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug causing responses to the &lt;code&gt;&#x2F;context&lt;&#x2F;code&gt; client endpoint to not use the pruned version of the event. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6553&quot;&gt;#6553&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a cause of state resets in room versions 2 onwards. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6556&quot;&gt;#6556&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6560&quot;&gt;#6560&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a bug which could cause the federation server to incorrectly return errors when handling certain obscure event graphs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6526&quot;&gt;#6526&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6527&quot;&gt;#6527&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.7.0 released</title>
		<published>2019-12-13T00:00:00+00:00</published>
		<updated>2019-12-13T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/12/13/synapse-1-7-0-released/" type="text/html"/>
		<id>matrix.org/blog/2019/12/13/synapse-1-7-0-released/</id>
		<content type="html">&lt;p&gt;Hello people, it’s Synapse 1.7.0 time.&lt;&#x2F;p&gt;
&lt;p&gt;This release includes some long requested features, most notably the ability to automatically delete message data after a predefined period. For more details take a look at the config &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.7.0&#x2F;docs&#x2F;sample_config.yaml#L332-L393&quot;&gt;here&lt;&#x2F;a&gt; ─ it should be pretty self explanatory.&lt;&#x2F;p&gt;
&lt;p&gt;Another significant change this release is to explicitly set room directories to be private by default. Previously it was possible to inadvertently configure the directory to be visible to arbitrary Matrix servers and the internet in general.&lt;&#x2F;p&gt;
&lt;p&gt;This means that for those admins who want their room directories to be publicly searchable (matrix.org for instance) they need to explicitly say so in the config. For more details see the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.7.0&#x2F;UPGRADE.rst#upgrading-to-v170&quot;&gt;upgrade notes&lt;&#x2F;a&gt; and our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2019&#x2F;11&#x2F;09&#x2F;avoiding-unwelcome-visitors-on-private-matrix-servers&#x2F;&quot;&gt;blog post&lt;&#x2F;a&gt; explaining the situation in greater detail.&lt;&#x2F;p&gt;
&lt;p&gt;We also have early support for ephemeral messages, as well as the ability to specify a reason when rejecting an invite (amongst other actions).&lt;&#x2F;p&gt;
&lt;p&gt;Aside from all of that, we want to let you know about some changes on the horizon. Currently Synapse runs Sqlite by default. This is great in that it gets new admins going quickly without needing to install and configure Postgres. The downside of using Sqlite is that it offers very poor performance, especially once a server tries to join the federation. In truth Sqlite is only really there to demonstrate the service, but for anything other than the most trivial cases it is essential to migrate to Postgres.&lt;&#x2F;p&gt;
&lt;p&gt;Over the past few months we’ve been working to improve the migration path to Postgres such that finally we feel confident to actively encourage admins to migrate. What’s more, in a future release we will forcibly prevent SQLite-backed servers federating unless the admin explicitly sets a config flag to show that they understand the trade-off they are making.&lt;&#x2F;p&gt;
&lt;p&gt;Overall we see these changes as something that will improve everyone’s experience of the matrix federation. We’ll talk more about this closer to the time, but please expect a change in the coming months and if you are running SQLite, consider this a nudge to get yourself migrated.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.7.0&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.6.1 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-7-0-2019-12-13&quot;&gt;Synapse 1.7.0 (2019-12-13)&lt;&#x2F;h1&gt;
&lt;p&gt;This release changes the default settings so that only local authenticated users can query the server&#x27;s room directory. See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.7.0&#x2F;UPGRADE.rst#upgrading-to-v170&quot;&gt;upgrade notes&lt;&#x2F;a&gt; for details.&lt;&#x2F;p&gt;
&lt;p&gt;Support for SQLite versions before 3.11 is now deprecated. A future release will refuse to start if used with an SQLite version before 3.11.&lt;&#x2F;p&gt;
&lt;p&gt;Administrators are reminded that SQLite should not be used for production instances. Instructions for migrating to Postgres are available &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.7.0&#x2F;docs&#x2F;postgres.md&quot;&gt;here&lt;&#x2F;a&gt;. A future release of synapse will, by default, disable federation for servers using SQLite.&lt;&#x2F;p&gt;
&lt;p&gt;No significant changes since 1.7.0rc2.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-7-0rc2-2019-12-11&quot;&gt;Synapse 1.7.0rc2 (2019-12-11)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix incorrect error message for invalid requests when setting user&#x27;s avatar URL. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6497&quot;&gt;#6497&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix support for SQLite 3.7. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6499&quot;&gt;#6499&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix regression where sending email push would not work when using a pusher worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6507&quot;&gt;#6507&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6509&quot;&gt;#6509&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-7-0rc1-2019-12-09&quot;&gt;Synapse 1.7.0rc1 (2019-12-09)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Implement per-room message retention policies. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5815&quot;&gt;#5815&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6436&quot;&gt;#6436&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add etag and count fields to key backup endpoints to help clients guess if there are new keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5858&quot;&gt;#5858&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;&#x2F;admin&#x2F;v2&#x2F;users&lt;&#x2F;code&gt; endpoint with pagination. Contributed by Awesome Technologies Innovationslabor GmbH. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5925&quot;&gt;#5925&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Require User-Interactive Authentication for &lt;code&gt;&#x2F;account&#x2F;3pid&#x2F;add&lt;&#x2F;code&gt;, meaning the user&#x27;s password will be required to add a third-party ID to their account. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6119&quot;&gt;#6119&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Implement the &lt;code&gt;&#x2F;_matrix&#x2F;federation&#x2F;unstable&#x2F;net.atleastfornow&#x2F;state&#x2F;&amp;lt;context&amp;gt;&lt;&#x2F;code&gt; API as drafted in MSC2314. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6176&quot;&gt;#6176&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Configure privacy-preserving settings by default for the room directory. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6355&quot;&gt;#6355&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add ephemeral messages support by partially implementing &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2228&quot;&gt;MSC2228&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6409&quot;&gt;#6409&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2367&quot;&gt;MSC 2367&lt;&#x2F;a&gt;, which allows specifying a reason on all membership events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6434&quot;&gt;#6434&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Transfer non-standard power levels on room upgrade. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6237&quot;&gt;#6237&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix error from the Pillow library when uploading RGBA images. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6241&quot;&gt;#6241&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Correctly apply the event filter to the &lt;code&gt;state&lt;&#x2F;code&gt;, &lt;code&gt;events_before&lt;&#x2F;code&gt; and &lt;code&gt;events_after&lt;&#x2F;code&gt; fields in the response to &lt;code&gt;&#x2F;context&lt;&#x2F;code&gt; requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6329&quot;&gt;#6329&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix caching devices for remote users when using workers, so that we don&#x27;t attempt to refetch (and potentially fail) each time a user requests devices. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6332&quot;&gt;#6332&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent account data syncs getting lost across TCP replication. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6333&quot;&gt;#6333&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug: TypeError in &lt;code&gt;register_user()&lt;&#x2F;code&gt; while using LDAP auth module. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6406&quot;&gt;#6406&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix an intermittent exception when handling read-receipts. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6408&quot;&gt;#6408&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix broken guest registration when there are existing blocks of numeric user IDs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6420&quot;&gt;#6420&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix startup error when http proxy is defined. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6421&quot;&gt;#6421&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix error when using synapse_port_db on a vanilla synapse db. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6449&quot;&gt;#6449&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix uploading multiple cross signing signatures for the same user. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6451&quot;&gt;#6451&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug which lead to exceptions being thrown in a loop when a cross-signed device is deleted. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6462&quot;&gt;#6462&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;synapse_port_db&lt;&#x2F;code&gt; not exiting with a 0 code if something went wrong during the port process. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6470&quot;&gt;#6470&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve sanity-checking when receiving events over federation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6472&quot;&gt;#6472&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix inaccurate per-block Prometheus metrics. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6491&quot;&gt;#6491&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix small performance regression for sending invites. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6493&quot;&gt;#6493&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Back out cross-signing code added in Synapse 1.5.0, which caused a performance regression. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6494&quot;&gt;#6494&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Update documentation and variables in user contributed systemd reference file. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6369&quot;&gt;#6369&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6490&quot;&gt;#6490&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix link in the user directory documentation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6388&quot;&gt;#6388&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add build instructions to the docker readme. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6390&quot;&gt;#6390&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Switch Ubuntu package install recommendation to use python3 packages in INSTALL.md. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6443&quot;&gt;#6443&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Write some docs for the quarantine_media api. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6458&quot;&gt;#6458&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert CONTRIBUTING.rst to markdown (among other small fixes). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6461&quot;&gt;#6461&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Remove admin&#x2F;v1&#x2F;users_paginate endpoint. Contributed by Awesome Technologies Innovationslabor GmbH. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5925&quot;&gt;#5925&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove fallback for federation with old servers which lack the &#x2F;federation&#x2F;v1&#x2F;state_ids API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6488&quot;&gt;#6488&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add benchmarks for structured logging and improve output performance. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6266&quot;&gt;#6266&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve the performance of outputting structured logging. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6322&quot;&gt;#6322&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor some code in the event authentication path for clarity. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6343&quot;&gt;#6343&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6468&quot;&gt;#6468&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6480&quot;&gt;#6480&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up some unnecessary quotation marks around the codebase. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6362&quot;&gt;#6362&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Complain on startup instead of 500&#x27;ing during runtime when &lt;code&gt;public_baseurl&lt;&#x2F;code&gt; isn&#x27;t set when necessary. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6379&quot;&gt;#6379&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a test scenario to make sure room history purges don&#x27;t break &lt;code&gt;&#x2F;messages&lt;&#x2F;code&gt; in the future. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6392&quot;&gt;#6392&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarifications for the email configuration settings. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6423&quot;&gt;#6423&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add more tests to the blacklist when running in worker mode. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6429&quot;&gt;#6429&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor data store layer to support multiple databases in the future. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6454&quot;&gt;#6454&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6464&quot;&gt;#6464&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6469&quot;&gt;#6469&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6487&quot;&gt;#6487&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Port synapse.rest.client.v1 to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6482&quot;&gt;#6482&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Port synapse.rest.client.v2_alpha to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6483&quot;&gt;#6483&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Port SyncHandler to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6484&quot;&gt;#6484&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.6.0 released</title>
		<published>2019-11-26T00:00:00+00:00</published>
		<updated>2019-11-26T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/11/26/synapse-1-6-0-released/" type="text/html"/>
		<id>matrix.org/blog/2019/11/26/synapse-1-6-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.6.0 has landed and is here to brighten your day!&lt;&#x2F;p&gt;
&lt;p&gt;1.6.0&#x27;s most notable feature is that of label based filtering. It allows for messages to be tagged with a given label so that clients can filter on the label, this means that clients can subscribe to specific topics in a room, such as #lunch.&lt;&#x2F;p&gt;
&lt;p&gt;Completely separately, from here on in new rooms will be version 5 by default, all this means in practice is that servers will respect server signing key validity periods. This won&#x27;t make a lot of difference in day to day operation, but it is an important security consideration and we now have sufficient penetration across the federation to make version 5 the default.&lt;&#x2F;p&gt;
&lt;p&gt;Aside from that there are a bunch of bug fixes and improvements, including fixing a bug that in some cases prevented messages being decrypted shortly after a restart (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6363&quot;&gt;#6363&lt;&#x2F;a&gt;) and generally improving the room upgrade experience (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6232&quot;&gt;#6232&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6235&quot;&gt;#6235&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.6.0&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.5.1 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-6-0-2019-11-26&quot;&gt;Synapse 1.6.0 (2019-11-26)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix phone home stats reporting. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6418&quot;&gt;#6418&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-6-0rc2-2019-11-25&quot;&gt;Synapse 1.6.0rc2 (2019-11-25)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a bug which could cause the background database update handler for event labels to get stuck in a loop raising exceptions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6407&quot;&gt;#6407&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-6-0rc1-2019-11-20&quot;&gt;Synapse 1.6.0rc1 (2019-11-20)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add federation support for cross-signing. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5727&quot;&gt;#5727&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Increase default room version from 4 to 5, thereby enforcing server key validity period checks. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6220&quot;&gt;#6220&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for outbound http proxying via http_proxy&#x2F;HTTPS_PROXY env vars. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6238&quot;&gt;#6238&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Implement label-based filtering on &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; and &lt;code&gt;&#x2F;messages&lt;&#x2F;code&gt; (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2326&quot;&gt;MSC2326&lt;&#x2F;a&gt;). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6301&quot;&gt;#6301&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6310&quot;&gt;#6310&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6340&quot;&gt;#6340&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-2&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix LruCache callback deduplication for Python 3.8. Contributed by @V02460. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6213&quot;&gt;#6213&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove a room from a server&#x27;s public rooms list on room upgrade. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6232&quot;&gt;#6232&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6235&quot;&gt;#6235&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Delete keys from key backup when deleting backup versions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6253&quot;&gt;#6253&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make notification of cross-signing signatures work with workers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6254&quot;&gt;#6254&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix exception when remote servers attempt to join a room that they&#x27;re not allowed to join. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6278&quot;&gt;#6278&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent errors from appearing on Synapse startup if &lt;code&gt;git&lt;&#x2F;code&gt; is not installed. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6284&quot;&gt;#6284&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Appservice requests will no longer contain a double slash prefix when the appservice url provided ends in a slash. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6306&quot;&gt;#6306&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;&#x2F;purge_room&lt;&#x2F;code&gt; admin API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6307&quot;&gt;#6307&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the &lt;code&gt;hidden&lt;&#x2F;code&gt; field in the &lt;code&gt;devices&lt;&#x2F;code&gt; table for SQLite versions prior to 3.23.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6313&quot;&gt;#6313&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug which caused rejected events to be persisted with the wrong room state. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6320&quot;&gt;#6320&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where &lt;code&gt;rc_login&lt;&#x2F;code&gt; ratelimiting would prematurely kick in. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6335&quot;&gt;#6335&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent the server taking a long time to start up when guest registration is enabled. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6338&quot;&gt;#6338&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where upgrading a guest account to a full user would fail when account validity is enabled. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6359&quot;&gt;#6359&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;to_device&lt;&#x2F;code&gt; stream ID getting reset every time Synapse restarts, which had the potential to cause unable to decrypt errors. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6363&quot;&gt;#6363&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix permission denied error when trying to generate a config file with the docker image. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6389&quot;&gt;#6389&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Contributor documentation now mentions script to run linters. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6164&quot;&gt;#6164&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Modify CAPTCHA_SETUP.md to update the terms &lt;code&gt;private key&lt;&#x2F;code&gt; and &lt;code&gt;public key&lt;&#x2F;code&gt; to &lt;code&gt;secret key&lt;&#x2F;code&gt; and &lt;code&gt;site key&lt;&#x2F;code&gt; respectively. Contributed by Yash Jipkate. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6257&quot;&gt;#6257&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update &lt;code&gt;INSTALL.md&lt;&#x2F;code&gt; Email section to talk about &lt;code&gt;account_threepid_delegates&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6272&quot;&gt;#6272&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a small typo in &lt;code&gt;account_threepid_delegates&lt;&#x2F;code&gt; configuration option. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6273&quot;&gt;#6273&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add a CI job to test the &lt;code&gt;synapse_port_db&lt;&#x2F;code&gt; script. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6140&quot;&gt;#6140&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6276&quot;&gt;#6276&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert EventContext to an attrs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6218&quot;&gt;#6218&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move &lt;code&gt;persist_events&lt;&#x2F;code&gt; out from main data store. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6240&quot;&gt;#6240&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6300&quot;&gt;#6300&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce verbosity of user&#x2F;room stats. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6250&quot;&gt;#6250&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce impact of debug logging. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6251&quot;&gt;#6251&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Expose some homeserver functionality to spam checkers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6259&quot;&gt;#6259&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Change cache descriptors to always return deferreds. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6263&quot;&gt;#6263&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6291&quot;&gt;#6291&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix incorrect comment regarding the functionality of an &lt;code&gt;if&lt;&#x2F;code&gt; statement. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6269&quot;&gt;#6269&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update CI to run &lt;code&gt;isort&lt;&#x2F;code&gt; over the &lt;code&gt;scripts&lt;&#x2F;code&gt; and &lt;code&gt;scripts-dev&lt;&#x2F;code&gt; directories. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6270&quot;&gt;#6270&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Replace every instance of &lt;code&gt;logger.warn&lt;&#x2F;code&gt; method with &lt;code&gt;logger.warning&lt;&#x2F;code&gt; as the former is deprecated. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6271&quot;&gt;#6271&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6314&quot;&gt;#6314&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Port replication http server endpoints to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6274&quot;&gt;#6274&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Port room rest handlers to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6275&quot;&gt;#6275&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove redundant CLI parameters on CI&#x27;s &lt;code&gt;flake8&lt;&#x2F;code&gt; step. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6277&quot;&gt;#6277&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Port &lt;code&gt;federation_server.py&lt;&#x2F;code&gt; to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6279&quot;&gt;#6279&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Port receipt and read markers to async&#x2F;wait. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6280&quot;&gt;#6280&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Split out state storage into separate data store. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6294&quot;&gt;#6294&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6295&quot;&gt;#6295&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor EventContext for clarity. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6298&quot;&gt;#6298&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update the version of black used to 19.10b0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6304&quot;&gt;#6304&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some documentation about worker replication. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6305&quot;&gt;#6305&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move admin endpoints into separate files. Contributed by Awesome Technologies Innovationslabor GmbH. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6308&quot;&gt;#6308&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Document the use of &lt;code&gt;lint.sh&lt;&#x2F;code&gt; for code style enforcement &amp;amp; extend it to run on specified paths only. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6312&quot;&gt;#6312&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add optional python dependencies and dependant binary libraries to snapcraft packaging. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6317&quot;&gt;#6317&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove the dependency on psutil and replace functionality with the stdlib &lt;code&gt;resource&lt;&#x2F;code&gt; module. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6318&quot;&gt;#6318&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6336&quot;&gt;#6336&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve documentation for EventContext fields. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6319&quot;&gt;#6319&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some checks that we aren&#x27;t using state from rejected events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6330&quot;&gt;#6330&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add continuous integration for python 3.8. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6341&quot;&gt;#6341&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Correct spacing&#x2F;case of various instances of the word &amp;quot;homeserver&amp;quot;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6357&quot;&gt;#6357&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Temporarily blacklist the failing unit test PurgeRoomTestCase.test_purge_room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6361&quot;&gt;#6361&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Client-server r0.6.0 and Identity Service r0.3.0 releases</title>
		<published>2019-11-08T00:00:00+00:00</published>
		<updated>2019-11-08T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/11/08/client-server-r0-6-0-and-identity-service-r0-3-0-releases/" type="text/html"/>
		<id>matrix.org/blog/2019/11/08/client-server-r0-6-0-and-identity-service-r0-3-0-releases/</id>
		<content type="html">&lt;p&gt;Hey all,&lt;&#x2F;p&gt;
&lt;p&gt;For the last several months the team has been working on &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2019&#x2F;06&#x2F;30&#x2F;tightening-up-privacy-in-matrix&quot;&gt;tightening up privacy in Matrix&lt;&#x2F;a&gt;, and with the &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2019&#x2F;09&#x2F;27&#x2F;privacy-improvements-in-synapse-1-4-and-riot-1-4&quot;&gt;1.4 release of Synapse and Riot&lt;&#x2F;a&gt; quite a lot has been done in the area. One of the remaining pieces was to release all the specification changes to help other client&#x2F;server implementations achieve the same goals, and now we&#x27;ve done that.&lt;&#x2F;p&gt;
&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;spec&#x2F;client_server&#x2F;r0.6.0&quot;&gt;Client-Server r0.6.0&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;spec&#x2F;identity_service&#x2F;r0.3.0&quot;&gt;Identity Service r0.3.0&lt;&#x2F;a&gt; spec releases both cover the privacy improvements added through a number of MSCs in the last few months. Of particular note is that identity servers are now expected to support terms of service endpoints, which requires authentication that clients might need to worry about - check the spec changelogs for details.&lt;&#x2F;p&gt;
&lt;p&gt;The full changelog for the Client-Server r0.6.0 release is:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Breaking Changes&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add &lt;code&gt;id_access_token&lt;&#x2F;code&gt; as a required request parameter to a few
endpoints which require an &lt;code&gt;id_server&lt;&#x2F;code&gt; parameter as part of
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2140&quot;&gt;MSC2140&lt;&#x2F;a&gt;.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2255&quot;&gt;#2255&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;New Endpoints&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add &lt;code&gt;POST &#x2F;account&#x2F;3pid&#x2F;unbind&lt;&#x2F;code&gt; for removing a 3PID from an identity
server.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2282&quot;&gt;#2282&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Backwards Compatible Changes&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add &lt;code&gt;M_USER_DEACTIVATED&lt;&#x2F;code&gt; error code.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2234&quot;&gt;#2234&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove &lt;code&gt;bind_msisdn&lt;&#x2F;code&gt; and &lt;code&gt;bind_email&lt;&#x2F;code&gt; from &lt;code&gt;&#x2F;register&lt;&#x2F;code&gt; now that the
identity server&#x27;s bind endpoint requires authentication.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2279&quot;&gt;#2279&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;m.identity_server&lt;&#x2F;code&gt; account data for tracking the user&#x27;s
preferred identity server.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2281&quot;&gt;#2281&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Deprecate &lt;code&gt;id_server&lt;&#x2F;code&gt; and make it optional in several places.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2310&quot;&gt;#2310&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Spec Clarifications&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add missing format fields to &lt;code&gt;m.room.message$m.notice&lt;&#x2F;code&gt; schema.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2125&quot;&gt;#2125&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove &amp;quot;required&amp;quot; designation from the &lt;code&gt;url&lt;&#x2F;code&gt; field of certain
&lt;code&gt;m.room.message&lt;&#x2F;code&gt; msgtypes.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2129&quot;&gt;#2129&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix various typos throughout the specification.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2131&quot;&gt;#2131&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2136&quot;&gt;#2136&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2148&quot;&gt;#2148&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2215&quot;&gt;#2215&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the distinction between &lt;code&gt;m.key.verification.start&lt;&#x2F;code&gt; and its
&lt;code&gt;m.sas.v1&lt;&#x2F;code&gt; variant.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2132&quot;&gt;#2132&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix link to Olm signing specification.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2133&quot;&gt;#2133&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the conditions for the &lt;code&gt;.m.rule.room_one_to_one&lt;&#x2F;code&gt; push rule.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2152&quot;&gt;#2152&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the encryption algorithms supported by the device of the
device keys example.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2157&quot;&gt;#2157&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that &lt;code&gt;&#x2F;rooms&#x2F;:roomId&#x2F;event&#x2F;:eventId&lt;&#x2F;code&gt; returns a Matrix error.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2204&quot;&gt;#2204&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a missing &lt;code&gt;state_key&lt;&#x2F;code&gt; check on &lt;code&gt;.m.rule.tombstone&lt;&#x2F;code&gt;.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2223&quot;&gt;#2223&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the &lt;code&gt;m.room_key_request&lt;&#x2F;code&gt; &lt;code&gt;action&lt;&#x2F;code&gt; value, setting it from
&lt;code&gt;cancel_request&lt;&#x2F;code&gt; to &lt;code&gt;request_cancellation&lt;&#x2F;code&gt;.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2247&quot;&gt;#2247&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that the &lt;code&gt;submit_url&lt;&#x2F;code&gt; field is without authentication.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2341&quot;&gt;#2341&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the expected phone number format.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2342&quot;&gt;#2342&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that clients should consider not requesting URL previews in
encrypted rooms.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2343&quot;&gt;#2343&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add missing information on how filters are meant to work with
&lt;code&gt;&#x2F;context&lt;&#x2F;code&gt;.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2344&quot;&gt;#2344&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify what the keys are for rooms in &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt;.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2345&quot;&gt;#2345&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;The full changelog for the Identity Service r0.3.0 release is:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;New Endpoints&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add &lt;code&gt;&#x2F;account&lt;&#x2F;code&gt;, &lt;code&gt;&#x2F;account&#x2F;register&lt;&#x2F;code&gt;, and &lt;code&gt;&#x2F;account&#x2F;logout&lt;&#x2F;code&gt; to
authenticate with the identity server.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2255&quot;&gt;#2255&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add endpoints for accepting and handling terms of service.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2258&quot;&gt;#2258&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;&#x2F;hash_details&lt;&#x2F;code&gt; and a new &lt;code&gt;&#x2F;lookup&lt;&#x2F;code&gt; endpoint for performing
hashed association lookups.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2287&quot;&gt;#2287&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Backwards Compatible Changes&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Deprecate the v1 API in favour of an authenticated v2 API.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2254&quot;&gt;#2254&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.5.0 released</title>
		<published>2019-10-29T00:00:00+00:00</published>
		<updated>2019-10-29T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/10/29/synapse-1-5-0-released/" type="text/html"/>
		<id>matrix.org/blog/2019/10/29/synapse-1-5-0-released/</id>
		<content type="html">&lt;p&gt;That&#x27;s right folks Synapse 1.5.0 is here and ready to make your life just a little bit better.&lt;&#x2F;p&gt;
&lt;p&gt;First things first, this release includes a security fix (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6262&quot;&gt;#6262&lt;&#x2F;a&gt;, below). Administrators are encouraged to upgrade as soon as possible.&lt;&#x2F;p&gt;
&lt;p&gt;Aside from that, the main thing you&#x27;ll notice in 1.5.0 is a massive performance improvement to the room directory, which means that servers with large directories to scan will return much more quickly. This is especially true for matrix.org but all servers will benefit.&lt;&#x2F;p&gt;
&lt;p&gt;Another key win is finally fixing some bugs in the sqlite -&amp;gt; postgres migrator script. Sqlite mode is there strictly for testing purposes and should never be used in a production setting let alone a federating homeserver. So if you are currently using Sqlite now is the time to migrate. What&#x27;s more the script is now in CI so it can&#x27;t easily break in the future (with apologies to anyone bitten by the old script...).&lt;&#x2F;p&gt;
&lt;p&gt;A final final point, we have some preparatory work for e2ee cross signing, the overall feature is not ready for release just yet but we are getting really close. Watch this space.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.5.0&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.4.1 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-5-0-2019-10-29&quot;&gt;Synapse 1.5.0 (2019-10-29)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;security-updates&quot;&gt;Security updates&lt;&#x2F;h2&gt;
&lt;p&gt;This release includes a security fix (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6262&quot;&gt;#6262&lt;&#x2F;a&gt;, below). Administrators are encouraged to upgrade as soon as possible.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix bug where room directory search was case sensitive. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6268&quot;&gt;#6268&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-5-0rc2-2019-10-28&quot;&gt;Synapse 1.5.0rc2 (2019-10-28)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Update list of boolean columns in &lt;code&gt;synapse_port_db&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6247&quot;&gt;#6247&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &#x2F;keys&#x2F;query API on workers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6256&quot;&gt;#6256&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve signature checking on some federation APIs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6262&quot;&gt;#6262&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Move schema delta files to the correct data store. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6248&quot;&gt;#6248&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Small performance improvement by removing repeated config lookups in room stats calculation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6255&quot;&gt;#6255&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-5-0rc1-2019-10-24&quot;&gt;Synapse 1.5.0rc1 (2019-10-24)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Improve quality of thumbnails for 1-bit&#x2F;8-bit color palette images. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2142&quot;&gt;#2142&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add ability to upload cross-signing signatures. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5726&quot;&gt;#5726&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow uploading of cross-signing keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5769&quot;&gt;#5769&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;CAS login now provides a default display name for users if a &lt;code&gt;displayname_attribute&lt;&#x2F;code&gt; is set in the configuration file. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6114&quot;&gt;#6114&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reject all pending invites for a user during deactivation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6125&quot;&gt;#6125&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add config option to suppress client side resource limit alerting. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6173&quot;&gt;#6173&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-2&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Return an HTTP 404 instead of 400 when requesting a filter by ID that is unknown to the server. Thanks to @krombel for contributing this! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2380&quot;&gt;#2380&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where users could be invited twice to the same group. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3436&quot;&gt;#3436&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;&#x2F;createRoom&lt;&#x2F;code&gt; failing with badly-formatted MXIDs in the invitee list. Thanks to @wener291! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4088&quot;&gt;#4088&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make the &lt;code&gt;synapse_port_db&lt;&#x2F;code&gt; script create the right indexes on a new PostgreSQL database. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6102&quot;&gt;#6102&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6178&quot;&gt;#6178&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6243&quot;&gt;#6243&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug when uploading a large file: Synapse responds with &lt;code&gt;M_UNKNOWN&lt;&#x2F;code&gt; while it should be &lt;code&gt;M_TOO_LARGE&lt;&#x2F;code&gt; according to spec. Contributed by Anshul Angaria. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6109&quot;&gt;#6109&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix user push rules being deleted from a room when it is upgraded. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6144&quot;&gt;#6144&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t 500 when trying to exchange a revoked 3PID invite. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6147&quot;&gt;#6147&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix transferring notifications and tags when joining an upgraded room that is new to your server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6155&quot;&gt;#6155&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where guest account registration can wedge after restart. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6161&quot;&gt;#6161&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix monthly active user reaping when reserved users are specified. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6168&quot;&gt;#6168&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;&#x2F;federation&#x2F;v1&#x2F;state&lt;&#x2F;code&gt; endpoint not supporting newer room versions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6170&quot;&gt;#6170&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where we were updating censored events as bytes rather than text, occasionally causing invalid JSON being inserted breaking APIs that attempted to fetch such events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6186&quot;&gt;#6186&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix occasional missed updates in the room and user directories. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6187&quot;&gt;#6187&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix tracing of non-JSON APIs, &lt;code&gt;&#x2F;media&lt;&#x2F;code&gt;, &lt;code&gt;&#x2F;key&lt;&#x2F;code&gt; etc. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6195&quot;&gt;#6195&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where presence would not get timed out correctly if a synchrotron worker is used and restarted. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6212&quot;&gt;#6212&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;synapse_port_db: Add 2 additional BOOLEAN_COLUMNS to be able to convert from database schema v56. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6216&quot;&gt;#6216&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where the Synapse demo script blacklisted &lt;code&gt;::1&lt;&#x2F;code&gt; (ipv6 localhost) from receiving federation traffic. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6229&quot;&gt;#6229&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;updates-to-the-docker-image&quot;&gt;Updates to the Docker image&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix logging getting lost for the docker image. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6197&quot;&gt;#6197&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes-1&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Update &lt;code&gt;user_filters&lt;&#x2F;code&gt; table to have a unique index, and non-null columns. Thanks to @pik for contributing this. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;1172&quot;&gt;#1172&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6175&quot;&gt;#6175&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6184&quot;&gt;#6184&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow devices to be marked as hidden, for use by features such as cross-signing.
This adds a new field with a default value to the devices field in the database,
and so the database upgrade may take a long time depending on how many devices
are in the database. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5759&quot;&gt;#5759&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move lookup-related functions from RoomMemberHandler to IdentityHandler. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5978&quot;&gt;#5978&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve performance of the public room list directory. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6019&quot;&gt;#6019&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6152&quot;&gt;#6152&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6153&quot;&gt;#6153&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6154&quot;&gt;#6154&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Edit header dicts docstrings in &lt;code&gt;SimpleHttpClient&lt;&#x2F;code&gt; to note that &lt;code&gt;str&lt;&#x2F;code&gt; or &lt;code&gt;bytes&lt;&#x2F;code&gt; can be passed as header keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6077&quot;&gt;#6077&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add snapcraft packaging information. Contributed by @devec0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6084&quot;&gt;#6084&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6191&quot;&gt;#6191&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Kill off half-implemented password-reset via sms. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6101&quot;&gt;#6101&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove &lt;code&gt;get_user_by_req&lt;&#x2F;code&gt; opentracing span and add some tags. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6108&quot;&gt;#6108&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Drop some unused database tables. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6115&quot;&gt;#6115&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add env var to turn on tracking of log context changes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6127&quot;&gt;#6127&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor configuration loading to allow better typechecking. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6137&quot;&gt;#6137&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Log responder when responding to media request. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6139&quot;&gt;#6139&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve performance of &lt;code&gt;find_next_generated_user_id&lt;&#x2F;code&gt; DB query. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6148&quot;&gt;#6148&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Expand type-checking on modules imported by &lt;code&gt;synapse.config&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6150&quot;&gt;#6150&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Use Postgres ANY for selecting many values. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6156&quot;&gt;#6156&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add more caching to &lt;code&gt;_get_joined_users_from_context&lt;&#x2F;code&gt; DB query. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6159&quot;&gt;#6159&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some metrics on the federation sender. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6160&quot;&gt;#6160&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some logging to the rooms stats updates, to try to track down a flaky test. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6167&quot;&gt;#6167&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unused &lt;code&gt;timeout&lt;&#x2F;code&gt; parameter from &lt;code&gt;_get_public_room_list&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6179&quot;&gt;#6179&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reject (accidental) attempts to insert bytes into postgres tables. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6186&quot;&gt;#6186&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make &lt;code&gt;version&lt;&#x2F;code&gt; optional in body of &lt;code&gt;PUT &#x2F;room_keys&#x2F;version&#x2F;{version}&lt;&#x2F;code&gt;, since it&#x27;s redundant. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6189&quot;&gt;#6189&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make storage layer responsible for adding device names to key, rather than the handler. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6193&quot;&gt;#6193&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Port &lt;code&gt;synapse.rest.admin&lt;&#x2F;code&gt; module to use async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6196&quot;&gt;#6196&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Enforce that all boolean configuration values are lowercase in CI. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6203&quot;&gt;#6203&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove some unused event-auth code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6214&quot;&gt;#6214&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove &lt;code&gt;Auth.check&lt;&#x2F;code&gt; method. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6217&quot;&gt;#6217&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove &lt;code&gt;format_tap.py&lt;&#x2F;code&gt; script in favour of a perl reimplementation in Sytest&#x27;s repo. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6219&quot;&gt;#6219&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor storage layer in preparation to support having multiple databases. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6231&quot;&gt;#6231&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove some extra quotation marks across the codebase. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6236&quot;&gt;#6236&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.4.1 released</title>
		<published>2019-10-18T00:00:00+00:00</published>
		<updated>2019-10-18T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/10/18/synapse-1-4-1-released/" type="text/html"/>
		<id>matrix.org/blog/2019/10/18/synapse-1-4-1-released/</id>
		<content type="html">&lt;p&gt;Hi all,&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ve released Synapse 1.4.1 as a small but important bugfix to 1.4.0.&lt;&#x2F;p&gt;
&lt;p&gt;This fixes a regression which crept in with our newly implemented &amp;quot;erase redacted data after N days&amp;quot; feature where some APIs
would fail when hitting erased redactions - anyone on Synapse 1.4.0 will want to upgrade asap.&lt;&#x2F;p&gt;
&lt;p&gt;As always, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.4.1&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.4.0 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-4-1-2019-10-18&quot;&gt;Synapse 1.4.1 (2019-10-18)&lt;&#x2F;h1&gt;
&lt;p&gt;No changes since 1.4.1rc1.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-4-1rc1-2019-10-17&quot;&gt;Synapse 1.4.1rc1 (2019-10-17)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix bug where redacted events were sometimes incorrectly censored in the database, breaking APIs that attempted to fetch such events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6185&quot;&gt;#6185&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;commit&#x2F;5b0e9948eaae801643e594b5abc8ee4b10bd194e&quot;&gt;5b0e9948&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>matrix-appservice-slack bridge 1.0 is here!</title>
		<published>2019-10-03T00:00:00+00:00</published>
		<updated>2019-10-03T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/10/03/matrix-appservice-slack-bridge-1-0-is-here/" type="text/html"/>
		<id>matrix.org/blog/2019/10/03/matrix-appservice-slack-bridge-1-0-is-here/</id>
		<content type="html">&lt;p&gt;Hello Matrix enthusiasts! Yesterday we released &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-appservice-slack&#x2F;releases&#x2F;tag&#x2F;1.0.0&quot;&gt;matrix-appservice-slack 1.0&lt;&#x2F;a&gt;. This marks a major milestone
in bridge development for the Matrix.org team, being our first bridge to ever reach 1.0. The decision to
release this version came after we decided that the bridge had gained enough features and reached a point
of stability where it could be deployed in the wild with minimal risk.&lt;&#x2F;p&gt;
&lt;p&gt;For those not in the know, the Slack bridge is Node.JS based, and bridges slack channels &amp;amp; users into Matrix
seamlessly. And for those wondering, yes it works with Mattermost too (since their API is compatible with Slack)!
In previous versions only a limited subset of features were supported, making heavy usage of Slack’s
webhook API. As of 1.0, the bridge now makes use of the newer Slack Events&#x2F;RTM API which gives us all we need for
a richer bridging experience. Everything from edits and reactions to typing notifications is supported in the 1.0 release.&lt;&#x2F;p&gt;
&lt;p&gt;Finally for those who are self hosting, we are pleased to offer the ability to &amp;quot;puppet&amp;quot; your Slack account using the
bridge. Puppeting is the process in which the bridge will send messages as if you were sending them from the Slack client
directly, when you talk using your Matrix account. This opens the door to seamless bridging and direct messaging support.&lt;&#x2F;p&gt;
&lt;p&gt;For those wishing to bridge their whole workspace across, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;SolarDrew&#x2F;skill-picard&quot;&gt;picard&lt;&#x2F;a&gt; exists
as a tool to manage large scale Slack bridge deployments. This tool is provided by &lt;a href=&quot;https:&#x2F;&#x2F;matrix.to&#x2F;#&#x2F;@Cadair:matrix.org&quot;&gt;Cadair&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;matrix.to&#x2F;#&#x2F;@SolarDrew:matrix.org&quot;&gt;SolarDrew&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2019-10-03-slack1.0-threading.png&quot; alt=&quot;Slack Screenshot&quot; &#x2F;&gt;
Threading &amp;amp; Reactions!&lt;&#x2F;p&gt;
&lt;p&gt;The bridge has undergone some pretty serious code surgery as well. The whole codebase has been rewritten in
TypeScript to take advantage of type checking and generic types. The bridge is currently based upon the
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-appservice-bridge&#x2F;&quot;&gt;matrix-appservice-bridge&lt;&#x2F;a&gt; library. The datastore interface now supports PostgreSQL, which allows for administrators to inspect and edit the database while the bridge is running, as well as offering  helpful performance boost over the NeDB datastore format that was used previously. Finally, the codebase has proper Unit and Integration Tests to ensure new changes will not cause any regressions in behaviour. In short, &lt;strong&gt;now is an excellent time to get involved and hack on the bridge&lt;&#x2F;strong&gt;. There is already a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-appservice-slack&#x2F;issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22&quot;&gt;crafted list of easy issues&lt;&#x2F;a&gt; for new and experienced bridge devs.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2019-10-03-slack1.0-perfmem.png&quot; alt=&quot;Grafana memory usage graph&quot; &#x2F;&gt;
Memory usage of the bridge comparison&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2019-10-03-slack1.0-perfcpu.png&quot; alt=&quot;Grafana CPU usage graph&quot; &#x2F;&gt;
CPU usage of the bridge comparison&lt;&#x2F;p&gt;
&lt;p&gt;In terms of how many users matrix.org is currently serving at the moment, we present to you some figures:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;2562 bridged rooms&lt;&#x2F;li&gt;
&lt;li&gt;764 teams connected to the bridge&lt;&#x2F;li&gt;
&lt;li&gt;103711 events have passed through the bridge since the launch of 0.3.2&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Of course, our work doesn’t stop at 1.0. The plan for the immediate future of the bridge
is to continue adding support for other event types coming from Matrix and Slack to create
an ever richer experience. Obvious features are things like topic changes, and syncing membership
across the bridge. In the long term future we would also like to add community support to the bridge,
so whole Slack workspaces can be bridged across with a single click.&lt;&#x2F;p&gt;
&lt;p&gt;That’s all from me, and I would like to say a massive thank you to &lt;a href=&quot;https:&#x2F;&#x2F;matrix.to&#x2F;#&#x2F;@Cadair:matrix.org&quot;&gt;Cadair&lt;&#x2F;a&gt;
and &lt;a href=&quot;https:&#x2F;&#x2F;matrix.to&#x2F;#&#x2F;@benpa:matrix.org&quot;&gt;Ben&lt;&#x2F;a&gt; for both their code and review work on the project and as always,
thank you to the community for using the bridge and reporting issues. 🙂&lt;&#x2F;p&gt;
&lt;p&gt;Useful links:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;matrix.to&#x2F;#&#x2F;#matrix_appservice_slack:matrix.org&quot;&gt;Matrix Room&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-appservice-slack&quot;&gt;Project Home&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;matrix-appservice-slack.readthedocs.io&#x2F;en&#x2F;stable&#x2F;&quot;&gt;Docs&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.4.0 released</title>
		<published>2019-10-03T00:00:00+00:00</published>
		<updated>2019-10-03T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/10/03/synapse-1-4-0-released/" type="text/html"/>
		<id>matrix.org/blog/2019/10/03/synapse-1-4-0-released/</id>
		<content type="html">&lt;p&gt;Wheyhey as I live and breathe 1.4.0 is here!&lt;&#x2F;p&gt;
&lt;p&gt;1.4.0 should be considered ‘The Privacy Release’ and is the cumulation of a huge body of work spanning multiple projects to improve data privacy in the matrix ecosystem. You can read more about the &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2019&#x2F;09&#x2F;27&#x2F;privacy-improvements-in-synapse-1-4-and-riot-1-4&quot;&gt;full project here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;While we consider 1.4.0 to be a huge leap forward in terms of data privacy, it is really important to note that it contains breaking changes.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;If you currently rely on email or SMS delivery via an identity server you must modify your Synapse configuration.&lt;&#x2F;li&gt;
&lt;li&gt;If you have configured custom templates, then eight new templates must be added to your templates directory.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;If either apply to you failure to act will break your installation. Full details can be found in the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;UPGRADE.rst#upgrading-to-v140&quot;&gt;upgrade notes&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;so-what-has-changed&quot;&gt;So what has changed?&lt;&#x2F;h2&gt;
&lt;p&gt;It is possible for a user to associate an email address or phone number with their account, for a number of reasons:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;For use when logging in, as an alternative to the user id.&lt;&#x2F;li&gt;
&lt;li&gt;In the case of email, as an alternative contact to help with account recovery.&lt;&#x2F;li&gt;
&lt;li&gt;In the case of email, to receive notifications of missed messages.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Before an email address or phone number can be added to a user&#x27;s account, or before such an address is used to carry out a password-reset, Synapse must confirm the operation with the owner of the email address or phone number. It does this by sending an email or text giving the user a link or token to confirm receipt. This process is known as &#x27;3pid verification&#x27;. (&#x27;3pid&#x27;, or &#x27;threepid&#x27;, stands for third-party identifier, and we use it to refer to external identifiers such as email addresses and phone numbers.)&lt;&#x2F;p&gt;
&lt;p&gt;Previous versions of Synapse delegated the task of 3pid verification to an identity server by default. In most cases this server is vector.im or matrix.org.&lt;&#x2F;p&gt;
&lt;p&gt;In Synapse 1.4.0, for security and privacy reasons, the homeserver will no longer delegate this task to an identity server by default. Instead, the server administrator will need to explicitly decide how they would like the verification messages to be sent.&lt;&#x2F;p&gt;
&lt;p&gt;In the medium term, the vector.im and matrix.org identity servers will disable support for delegated 3pid verification entirely. However, in order to ease the transition, they will retain the capability for a limited period. Delegated email verification will be disabled on Monday 2nd December 2019 (giving roughly 2 months notice). Disabling delegated SMS verification will follow some time after that once SMS verification support lands in Synapse.&lt;&#x2F;p&gt;
&lt;p&gt;Once delegated 3pid verification support has been disabled in the vector.im and matrix.org identity servers, all Synapse versions that depend on those instances will be unable to verify email and phone numbers through them. There are no imminent plans to remove delegated 3pid verification from Sydent generally. (Sydent is the identity server project that backs the vector.im and matrix.org instances).&lt;&#x2F;p&gt;
&lt;h2 id=&quot;why-is-this-necessary&quot;&gt;Why is this necessary?&lt;&#x2F;h2&gt;
&lt;p&gt;Prior to 1.4.0, the identity server was providing two related-but-separate functions:&lt;&#x2F;p&gt;
&lt;p&gt;a directory for users to publish their contact details and to look up their contacts by their email addresses and phone numbers.
a &amp;quot;trusted third party communications network delegate&amp;quot;, providing SMS- and email-sending functionality to all homeservers for registration and password reset.&lt;&#x2F;p&gt;
&lt;p&gt;The intention behind the identity server&#x27;s providing 2. was one of convenience: to save homeserver admins the burden of configuring their homeservers to send email, as well as sparing us the effort of writing generic SMS-gateway integration that would allow any homeserver admin to configure their homeserver to send SMS via their chosen SMS aggregator.&lt;&#x2F;p&gt;
&lt;p&gt;By exposing this &#x27;trusted email&#x2F;sms delegate&#x27; functionality, however, and by including references to the New Vector identity servers in the default configuration for both Synapse and Riot, we created a situation in which users on non-New Vector run homeservers (who had never seen our privacy notice) could easily end up sharing their email addresses and phone numbers with a New Vector identity server.&lt;&#x2F;p&gt;
&lt;p&gt;Using identity servers for registration and password reset introduced yet further complexity - since password reset is a sensitive operation, it was important that the homeserver only use &#x27;trusted&#x27; identity servers for this purpose (with the trust being configured by the homeserver admin in the homeserver config). But this created ambiguity over who was ultimately responsible for the choice of identity server and when they could make that choice - the client could present a default identity server at login&#x2F;registration&#x2F;password reset time, which the user could choose to override before logging in, but unless the identity server ultimately selected were on the homeserver admin&#x27;s &#x27;trusted identity servers&#x27; list, any identity server operations that were proxied via the homeserver would have been blocked by the homeserver. However, not all identity server operations initiated by the client were proxied via the homeserver - some were sent directly from the client to the identity server, and would not have been filtered.&lt;&#x2F;p&gt;
&lt;p&gt;The best way to solve this problem is to have individual homeservers take ownership for their own email and SMS needs. In the case of email this means configuring details of an appropriate SMTP server or continuing to delegate through an identity server that will allow it to do so. If a homeserver admin makes the active choice to use New Vector&#x27;s identity servers for delegation (up until 1st December), they should make their own users aware through their privacy notice.&lt;&#x2F;p&gt;
&lt;p&gt;This delegation is entirely separate from the user&#x27;s choice of identity server for user directory services. As of right now the user is free to choose and trust whichever identity server they wish, or to choose not to use an identity server at all.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;are-there-any-other-data-privacy-features&quot;&gt;Are there any other data privacy features?&lt;&#x2F;h2&gt;
&lt;p&gt;Yes, 1.4.0 now &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;1287&quot;&gt;automatically garbage collects redacted messages&lt;&#x2F;a&gt; (defaults to 7 days) and removes &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;6098&#x2F;files&quot;&gt;unused IP and user agent information&lt;&#x2F;a&gt; stored in the user_ips table (defaults to 30 days). Finally, Synapse now &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;6090&#x2F;files&quot;&gt;warns in its logs&lt;&#x2F;a&gt; if you are using matrix.org as a trusted key server, in case you wish to use a different server to help discover other servers’ keys.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;anything-else&quot;&gt;Anything else?&lt;&#x2F;h2&gt;
&lt;p&gt;Aside from privacy, we’ve expanded our OpenTracing support and fixed a host of bugs. However the thing that is most exciting is switching on our solution for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5319&quot;&gt;mitigating forward extremities build up&lt;&#x2F;a&gt;’ by default.&lt;&#x2F;p&gt;
&lt;p&gt;In some cases rooms can accumulate ‘forward extremities’, which are simply an artefact of attempting to resolve the room state over multiple servers. Forward extremities are necessary to ensure that each server can independently arrive at the same view of the room eventually, however processing these extremities can be &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;1760&quot;&gt;computationally expensive and degrade server performance overall&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Originally it was an experimental config option but we now feel confident to turn it on by default for all instances - it should make a big difference for the CPU of servers in fragmented rooms.&lt;&#x2F;p&gt;
&lt;p&gt;So that’s it folks, thanks for making it this far. As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.4.0&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.3.1 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-4-0-2019-10-03&quot;&gt;Synapse 1.4.0 (2019-10-03)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Redact &lt;code&gt;client_secret&lt;&#x2F;code&gt; in server logs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6158&quot;&gt;#6158&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-4-0rc2-2019-10-02&quot;&gt;Synapse 1.4.0rc2 (2019-10-02)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix bug in background update that adds last seen information to the &lt;code&gt;devices&lt;&#x2F;code&gt; table, and improve its performance on Postgres. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6135&quot;&gt;#6135&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bad performance of censoring redactions background task. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6141&quot;&gt;#6141&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix fetching censored redactions from DB, which caused APIs like initial sync to fail if it tried to include the censored redaction. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6145&quot;&gt;#6145&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix exceptions when storing large retry intervals for down remote servers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6146&quot;&gt;#6146&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix up sample config entry for &lt;code&gt;redaction_retention_period&lt;&#x2F;code&gt; option. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6117&quot;&gt;#6117&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-4-0rc1-2019-09-26&quot;&gt;Synapse 1.4.0rc1 (2019-09-26)&lt;&#x2F;h1&gt;
&lt;p&gt;Note that this release includes significant changes around 3pid verification. Administrators are reminded to review the &lt;a href=&quot;UPGRADE.rst#upgrading-to-v140&quot;&gt;upgrade notes&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Changes to 3pid verification:
&lt;ul&gt;
&lt;li&gt;Add the ability to send registration emails from the homeserver rather than delegating to an identity server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5835&quot;&gt;#5835&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5940&quot;&gt;#5940&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5993&quot;&gt;#5993&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5994&quot;&gt;#5994&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5868&quot;&gt;#5868&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Replace &lt;code&gt;trust_identity_server_for_password_resets&lt;&#x2F;code&gt; config option with &lt;code&gt;account_threepid_delegates&lt;&#x2F;code&gt;, and make the &lt;code&gt;id_server&lt;&#x2F;code&gt; parameteter optional on &lt;code&gt;*&#x2F;requestToken&lt;&#x2F;code&gt; endpoints, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2263&quot;&gt;MSC2263&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5876&quot;&gt;#5876&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5969&quot;&gt;#5969&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6028&quot;&gt;#6028&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Switch to using the v2 Identity Service &lt;code&gt;&#x2F;lookup&lt;&#x2F;code&gt; API where available, with fallback to v1. (Implements &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2134&quot;&gt;MSC2134&lt;&#x2F;a&gt; plus &lt;code&gt;id_access_token authentication&lt;&#x2F;code&gt; for v2 Identity Service APIs from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2140&quot;&gt;MSC2140&lt;&#x2F;a&gt;). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5897&quot;&gt;#5897&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove &lt;code&gt;bind_email&lt;&#x2F;code&gt; and &lt;code&gt;bind_msisdn&lt;&#x2F;code&gt; parameters from &lt;code&gt;&#x2F;register&lt;&#x2F;code&gt; ala &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2140&quot;&gt;MSC2140&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5964&quot;&gt;#5964&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;m.id_access_token&lt;&#x2F;code&gt; to &lt;code&gt;unstable_features&lt;&#x2F;code&gt; in &lt;code&gt;&#x2F;versions&lt;&#x2F;code&gt; as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2264&quot;&gt;MSC2264&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5974&quot;&gt;#5974&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Use the v2 Identity Service API for 3PID invites. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5979&quot;&gt;#5979&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;POST &#x2F;_matrix&#x2F;client&#x2F;unstable&#x2F;account&#x2F;3pid&#x2F;unbind&lt;&#x2F;code&gt; endpoint from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2140&quot;&gt;MSC2140&lt;&#x2F;a&gt; for unbinding a 3PID from an identity server without removing it from the homeserver user account. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5980&quot;&gt;#5980&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6062&quot;&gt;#6062&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Use &lt;code&gt;account_threepid_delegate.email&lt;&#x2F;code&gt; and &lt;code&gt;account_threepid_delegate.msisdn&lt;&#x2F;code&gt; for validating threepid sessions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6011&quot;&gt;#6011&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow homeserver to handle or delegate email validation when adding an email to a user&#x27;s account. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6042&quot;&gt;#6042&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Implement new Client Server API endpoints &lt;code&gt;&#x2F;account&#x2F;3pid&#x2F;add&lt;&#x2F;code&gt; and &lt;code&gt;&#x2F;account&#x2F;3pid&#x2F;bind&lt;&#x2F;code&gt; as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2290&quot;&gt;MSC2290&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6043&quot;&gt;#6043&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an unstable feature flag for separate add&#x2F;bind 3pid APIs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6044&quot;&gt;#6044&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove &lt;code&gt;bind&lt;&#x2F;code&gt; parameter from Client Server POST &lt;code&gt;&#x2F;account&lt;&#x2F;code&gt; endpoint as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2290&#x2F;&quot;&gt;MSC2290&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6067&quot;&gt;#6067&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;POST &#x2F;add_threepid&#x2F;msisdn&#x2F;submit_token&lt;&#x2F;code&gt; endpoint for proxying submitToken on an &lt;code&gt;account_threepid_handler&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6078&quot;&gt;#6078&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;submit_url&lt;&#x2F;code&gt; response parameter to &lt;code&gt;*&#x2F;msisdn&#x2F;requestToken&lt;&#x2F;code&gt; endpoints. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6079&quot;&gt;#6079&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;m.require_identity_server&lt;&#x2F;code&gt; flag to &#x2F;version&#x27;s unstable_features. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5972&quot;&gt;#5972&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Enhancements to OpenTracing support:
&lt;ul&gt;
&lt;li&gt;Make OpenTracing work in worker mode. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5771&quot;&gt;#5771&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Pass OpenTracing contexts between servers when transmitting EDUs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5852&quot;&gt;#5852&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;OpenTracing for device list updates. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5853&quot;&gt;#5853&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a tag recording a request&#x27;s authenticated entity and corresponding servlet in OpenTracing. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5856&quot;&gt;#5856&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add minimum OpenTracing for client servlets. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5983&quot;&gt;#5983&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Check at setup that OpenTracing is installed if it&#x27;s enabled in the config. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5985&quot;&gt;#5985&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Trace replication send times. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5986&quot;&gt;#5986&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Include missing OpenTracing contexts in outbout replication requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5982&quot;&gt;#5982&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix sending of EDUs when OpenTracing is enabled with an empty whitelist. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5984&quot;&gt;#5984&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix invalid references to None while OpenTracing if the log context slips. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5988&quot;&gt;#5988&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5991&quot;&gt;#5991&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;OpenTracing for room and e2e keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5855&quot;&gt;#5855&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add OpenTracing span over HTTP push processing. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6003&quot;&gt;#6003&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Add an admin API to purge old rooms from the database. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5845&quot;&gt;#5845&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Retry well-known lookups if we have recently seen a valid well-known record for the server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5850&quot;&gt;#5850&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for filtered room-directory search requests over federation (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2197&quot;&gt;MSC2197&lt;&#x2F;a&gt;, in order to allow upcoming room directory query performance improvements. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5859&quot;&gt;#5859&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Correctly retry all hosts returned from SRV when we fail to connect. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5864&quot;&gt;#5864&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add admin API endpoint for setting whether or not a user is a server administrator. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5878&quot;&gt;#5878&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Enable cleaning up extremities with dummy events by default to prevent undue build up of forward extremities. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5884&quot;&gt;#5884&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add config option to sign remote key query responses with a separate key. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5895&quot;&gt;#5895&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for config templating. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5900&quot;&gt;#5900&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Users with the type of &amp;quot;support&amp;quot; or &amp;quot;bot&amp;quot; are no longer required to consent. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5902&quot;&gt;#5902&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Let synctl accept a directory of config files. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5904&quot;&gt;#5904&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Increase max display name size to 256. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5906&quot;&gt;#5906&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add admin API endpoint for getting whether or not a user is a server administrator. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5914&quot;&gt;#5914&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Redact events in the database that have been redacted for a week. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5934&quot;&gt;#5934&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;New prometheus metrics:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;synapse_federation_known_servers&lt;&#x2F;code&gt;: represents the total number of servers your server knows about (i.e. is in rooms with), including itself. Enable by setting &lt;code&gt;metrics_flags.known_servers&lt;&#x2F;code&gt; to True in the configuration.(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5981&quot;&gt;#5981&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;synapse_build_info&lt;&#x2F;code&gt;: exposes the Python version, OS version, and Synapse version of the running server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6005&quot;&gt;#6005&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Give appropriate exit codes when synctl fails. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5992&quot;&gt;#5992&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Apply the federation blacklist to requests to identity servers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6000&quot;&gt;#6000&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;report_stats_endpoint&lt;&#x2F;code&gt; option to configure where stats are reported to, if enabled. Contributed by @Sorunome. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6012&quot;&gt;#6012&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add config option to increase ratelimits for room admins redacting messages. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6015&quot;&gt;#6015&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Stop sending federation transactions to servers which have been down for a long time. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6026&quot;&gt;#6026&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make the process for mapping SAML2 users to matrix IDs more flexible. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6037&quot;&gt;#6037&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Return a clearer error message when a timeout occurs when attempting to contact an identity server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6073&quot;&gt;#6073&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent password reset&#x27;s submit_token endpoint from accepting trailing slashes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6074&quot;&gt;#6074&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Return 403 on &lt;code&gt;&#x2F;register&#x2F;available&lt;&#x2F;code&gt; if registration has been disabled. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6082&quot;&gt;#6082&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Explicitly log when a homeserver does not have the &lt;code&gt;trusted_key_servers&lt;&#x2F;code&gt; config field configured. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6090&quot;&gt;#6090&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for pruning old rows in &lt;code&gt;user_ips&lt;&#x2F;code&gt; table. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6098&quot;&gt;#6098&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-2&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Don&#x27;t create broken room when &lt;code&gt;power_level_content_override.users&lt;&#x2F;code&gt; does not contain &lt;code&gt;creator_id&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5633&quot;&gt;#5633&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix database index so that different backup versions can have the same sessions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5857&quot;&gt;#5857&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix Synapse looking for config options &lt;code&gt;password_reset_failure_template&lt;&#x2F;code&gt; and &lt;code&gt;password_reset_success_template&lt;&#x2F;code&gt;, when they are actually &lt;code&gt;password_reset_template_failure_html&lt;&#x2F;code&gt;, &lt;code&gt;password_reset_template_success_html&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5863&quot;&gt;#5863&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix stack overflow when recovering an appservice which had an outage. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5885&quot;&gt;#5885&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix error message which referred to &lt;code&gt;public_base_url&lt;&#x2F;code&gt; instead of &lt;code&gt;public_baseurl&lt;&#x2F;code&gt;. Thanks to @aaronraimist for the fix! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5909&quot;&gt;#5909&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix 404 for thumbnail download when &lt;code&gt;dynamic_thumbnails&lt;&#x2F;code&gt; is &lt;code&gt;false&lt;&#x2F;code&gt; and the thumbnail was dynamically generated. Fix reported by rkfg. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5915&quot;&gt;#5915&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a cache-invalidation bug for worker-based deployments. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5920&quot;&gt;#5920&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix admin API for listing media in a room not being available with an external media repo. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5966&quot;&gt;#5966&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix list media admin API always returning an error. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5967&quot;&gt;#5967&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix room and user stats tracking. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5971&quot;&gt;#5971&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5998&quot;&gt;#5998&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6029&quot;&gt;#6029&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Return a &lt;code&gt;M_MISSING_PARAM&lt;&#x2F;code&gt; if &lt;code&gt;sid&lt;&#x2F;code&gt; is not provided to &lt;code&gt;&#x2F;account&#x2F;3pid&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5995&quot;&gt;#5995&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;federation_certificate_verification_whitelist&lt;&#x2F;code&gt; now will not cause &lt;code&gt;TypeErrors&lt;&#x2F;code&gt; to be raised (a regression in 1.3). Additionally, it now supports internationalised domain names in their non-canonical representation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5996&quot;&gt;#5996&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Only count real users when checking for auto-creation of auto-join room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6004&quot;&gt;#6004&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ensure support users can be registered even if MAU limit is reached. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6020&quot;&gt;#6020&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where login error was shown incorrectly on SSO fallback login. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6024&quot;&gt;#6024&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug in calculating the federation retry backoff period. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6025&quot;&gt;#6025&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent exceptions being logged when extremity-cleanup events fail due to lack of user consent to the terms of service. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6053&quot;&gt;#6053&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove POST method from password-reset &lt;code&gt;submit_token&lt;&#x2F;code&gt; endpoint until we implement &lt;code&gt;submit_url&lt;&#x2F;code&gt; functionality. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6056&quot;&gt;#6056&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix logcontext spam on non-Linux platforms. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6059&quot;&gt;#6059&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ensure query parameters in email validation links are URL-encoded. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6063&quot;&gt;#6063&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug which caused SAML attribute maps to be overridden by defaults. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6069&quot;&gt;#6069&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the logged number of updated items for the &lt;code&gt;users_set_deactivated_flag&lt;&#x2F;code&gt; background update. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6092&quot;&gt;#6092&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;sid&lt;&#x2F;code&gt; to &lt;code&gt;next_link&lt;&#x2F;code&gt; for email validation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6097&quot;&gt;#6097&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Threepid validity checks on msisdns should not be dependent on &lt;code&gt;threepid_behaviour_email&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6104&quot;&gt;#6104&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ensure that servers which are not configured to support email address verification do not offer it in the registration flows. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6107&quot;&gt;#6107&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;updates-to-the-docker-image&quot;&gt;Updates to the Docker image&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Avoid changing &lt;code&gt;UID&#x2F;GID&lt;&#x2F;code&gt; if they are already correct. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5970&quot;&gt;#5970&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Provide &lt;code&gt;SYNAPSE_WORKER&lt;&#x2F;code&gt; envvar to specify python module. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6058&quot;&gt;#6058&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Convert documentation to markdown (from rst) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5849&quot;&gt;#5849&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update &lt;code&gt;INSTALL.md&lt;&#x2F;code&gt; to say that Python 2 is no longer supported. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5953&quot;&gt;#5953&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add developer documentation for using SAML2. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6032&quot;&gt;#6032&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some notes on rolling back to v1.3.1. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6049&quot;&gt;#6049&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update the upgrade notes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6050&quot;&gt;#6050&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Remove shared-secret registration from &lt;code&gt;&#x2F;_matrix&#x2F;client&#x2F;r0&#x2F;register&lt;&#x2F;code&gt; endpoint. Contributed by Awesome Technologies Innovationslabor GmbH. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5877&quot;&gt;#5877&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Deprecate the &lt;code&gt;trusted_third_party_id_servers&lt;&#x2F;code&gt; option. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5875&quot;&gt;#5875&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes-1&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Lay the groundwork for structured logging output. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5680&quot;&gt;#5680&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Retry well-known lookup before the cache expires, giving a grace period where the remote well-known can be down but we still use the old result. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5844&quot;&gt;#5844&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove log line for debugging issue #5407. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5860&quot;&gt;#5860&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor the Appservice scheduler code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5886&quot;&gt;#5886&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Compatibility with v2 Identity Service APIs other than &#x2F;lookup. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5892&quot;&gt;#5892&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6013&quot;&gt;#6013&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Stop populating some unused tables. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5893&quot;&gt;#5893&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6047&quot;&gt;#6047&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add missing index on &lt;code&gt;users_in_public_rooms&lt;&#x2F;code&gt; to improve the performance of directory queries. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5894&quot;&gt;#5894&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve the logging when we have an error when fetching signing keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5896&quot;&gt;#5896&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for database engine-specific schema deltas, based on file extension. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5911&quot;&gt;#5911&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update Buildkite pipeline to use plugins instead of buildkite-agent commands. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5922&quot;&gt;#5922&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add link in sample config to the logging config schema. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5926&quot;&gt;#5926&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unnecessary parentheses in return statements. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5931&quot;&gt;#5931&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unused &lt;code&gt;jenkins&#x2F;prepare_sytest.sh&lt;&#x2F;code&gt; file. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5938&quot;&gt;#5938&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move Buildkite pipeline config to the pipelines repo. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5943&quot;&gt;#5943&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unnecessary return statements in the codebase which were the result of a regex run. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5962&quot;&gt;#5962&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove left-over methods from v1 registration API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5963&quot;&gt;#5963&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Cleanup event auth type initialisation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5975&quot;&gt;#5975&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up dependency checking at setup. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5989&quot;&gt;#5989&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update OpenTracing docs to use the unified &lt;code&gt;trace&lt;&#x2F;code&gt; method. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5776&quot;&gt;#5776&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Small refactor of function arguments and docstrings in&lt;code&gt; RoomMemberHandler&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6009&quot;&gt;#6009&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unused &lt;code&gt;origin&lt;&#x2F;code&gt; argument on &lt;code&gt;FederationHandler.add_display_name_to_third_party_invite&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6010&quot;&gt;#6010&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a &lt;code&gt;failure_ts&lt;&#x2F;code&gt; column to the &lt;code&gt;destinations&lt;&#x2F;code&gt; database table. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6016&quot;&gt;#6016&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6072&quot;&gt;#6072&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up some code in the retry logic. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6017&quot;&gt;#6017&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the structured logging tests stomping on the global log configuration for subsequent tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6023&quot;&gt;#6023&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up the sample config for SAML authentication. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6064&quot;&gt;#6064&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Change mailer logging to reflect Synapse doesn&#x27;t just do chat notifications by email now. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6075&quot;&gt;#6075&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move last-seen info into devices table. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6089&quot;&gt;#6089&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unused parameter to &lt;code&gt;get_user_id_by_threepid&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6099&quot;&gt;#6099&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor the user-interactive auth handling. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6105&quot;&gt;#6105&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor code for calculating registration flows. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6106&quot;&gt;#6106&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.3.1 released</title>
		<published>2019-08-17T00:00:00+00:00</published>
		<updated>2019-08-17T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/08/17/synapse-1-3-1-released/" type="text/html"/>
		<id>matrix.org/blog/2019/08/17/synapse-1-3-1-released/</id>
		<content type="html">&lt;p&gt;Some of you will have been bitten by a bug that &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5866&quot;&gt;prevented Synapse 1.3.0 from starting up correctly&lt;&#x2F;a&gt;. If this is you, please upgrade.&lt;&#x2F;p&gt;
&lt;p&gt;Additionally we have taken the opportunity to fix a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5865&quot;&gt;dependency bug&lt;&#x2F;a&gt; for our intrepid packagers.&lt;&#x2F;p&gt;
&lt;p&gt;Apologies for the inconvenience.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.3.1&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.3.0 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-3-1-2019-08-17&quot;&gt;Synapse 1.3.1 (2019-08-17)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Drop hard dependency on &lt;code&gt;sdnotify&lt;&#x2F;code&gt; python package. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5871&quot;&gt;#5871&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix startup issue (hang on ACME provisioning) due to ordering of Twisted reactor startup. Thanks to @chrismoos for supplying the fix. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5867&quot;&gt;#5867&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.3.0 released</title>
		<published>2019-08-15T00:00:00+00:00</published>
		<updated>2019-08-15T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/08/15/synapse-1-3-0-released/" type="text/html"/>
		<id>matrix.org/blog/2019/08/15/synapse-1-3-0-released/</id>
		<content type="html">&lt;p&gt;Well now, Synapse 1.3.0 is here.&lt;&#x2F;p&gt;
&lt;p&gt;The main thing to know about 1.3.0 is that is contains performance improvements to reduce disk I&#x2F;O and reduce RAM usage. We’ve been running it on matrix.org for a week or so and are really pleased with the results.&lt;&#x2F;p&gt;
&lt;p&gt;Check out our message send heat map.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2019-08-15-message-send.png&quot; alt=&quot;Message Send&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Other than that there are a bunch of bug fixes and tweaks to generally make things run more smoothly.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.3.0&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.2.1 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-3-0-2019-08-15&quot;&gt;Synapse 1.3.0 (2019-08-15)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix 500 Internal Server Error on &lt;code&gt;publicRooms&lt;&#x2F;code&gt; when the public room list was
cached. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5851&quot;&gt;#5851&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-3-0rc1-2019-08-13&quot;&gt;Synapse 1.3.0rc1 (2019-08-13)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Use &lt;code&gt;M_USER_DEACTIVATED&lt;&#x2F;code&gt; instead of &lt;code&gt;M_UNKNOWN&lt;&#x2F;code&gt; for errcode when a deactivated user attempts to login. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5686&quot;&gt;#5686&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add sd_notify hooks to ease systemd integration and allows usage of Type=Notify. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5732&quot;&gt;#5732&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Synapse will no longer serve any media repo admin endpoints when &lt;code&gt;enable_media_repo&lt;&#x2F;code&gt; is set to False in the configuration. If a media repo worker is used, the admin APIs relating to the media repo will be served from it instead. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5754&quot;&gt;#5754&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5848&quot;&gt;#5848&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Synapse can now be configured to not join remote rooms of a given &amp;quot;complexity&amp;quot; (currently, state events) over federation. This option can be used to prevent adverse performance on resource-constrained homeservers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5783&quot;&gt;#5783&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow defining HTML templates to serve the user on account renewal attempt when using the account validity feature. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5807&quot;&gt;#5807&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix UISIs during homeserver outage. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5693&quot;&gt;#5693&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5789&quot;&gt;#5789&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix stack overflow in server key lookup code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5724&quot;&gt;#5724&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;start.sh no longer uses deprecated cli option. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5725&quot;&gt;#5725&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Log when we receive an event receipt from an unexpected origin. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5743&quot;&gt;#5743&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix debian packaging scripts to correctly build sid packages. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5775&quot;&gt;#5775&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Correctly handle redactions of redactions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5788&quot;&gt;#5788&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Return 404 instead of 403 when accessing &#x2F;rooms&#x2F;{roomId}&#x2F;event&#x2F;{eventId} for an event without the appropriate permissions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5798&quot;&gt;#5798&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix check that tombstone is a state event in push rules. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5804&quot;&gt;#5804&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix error when trying to login as a deactivated user when using a worker to handle login. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5806&quot;&gt;#5806&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where user &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; stream could get wedged in rare circumstances. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5825&quot;&gt;#5825&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;The purge_remote_media.sh script was fixed. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5839&quot;&gt;#5839&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Synapse now no longer accepts the &lt;code&gt;-v&lt;&#x2F;code&gt;&#x2F;&lt;code&gt;--verbose&lt;&#x2F;code&gt;, &lt;code&gt;-f&lt;&#x2F;code&gt;&#x2F;&lt;code&gt;--log-file&lt;&#x2F;code&gt;, or &lt;code&gt;--log-config&lt;&#x2F;code&gt; command line flags, and removes the deprecated &lt;code&gt;verbose&lt;&#x2F;code&gt; and &lt;code&gt;log_file&lt;&#x2F;code&gt; configuration file options. Users of these options should migrate their options into the dedicated log configuration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5678&quot;&gt;#5678&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5729&quot;&gt;#5729&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove non-functional &#x27;expire_access_token&#x27; setting. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5782&quot;&gt;#5782&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Make Jaeger fully configurable. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5694&quot;&gt;#5694&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add precautionary measures to prevent future abuse of &lt;code&gt;window.opener&lt;&#x2F;code&gt; in default welcome page. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5695&quot;&gt;#5695&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce database IO usage by optimising queries for current membership. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5706&quot;&gt;#5706&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5738&quot;&gt;#5738&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5746&quot;&gt;#5746&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5752&quot;&gt;#5752&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5770&quot;&gt;#5770&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5774&quot;&gt;#5774&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5792&quot;&gt;#5792&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5793&quot;&gt;#5793&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve caching when fetching &lt;code&gt;get_filtered_current_state_ids&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5713&quot;&gt;#5713&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t accept opentracing data from clients. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5715&quot;&gt;#5715&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Speed up PostgreSQL unit tests in CI. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5717&quot;&gt;#5717&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update the coding style document. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5719&quot;&gt;#5719&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve database query performance when recording retry intervals for remote hosts. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5720&quot;&gt;#5720&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a set of opentracing utils. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5722&quot;&gt;#5722&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Cache result of get_version_string to reduce overhead of &lt;code&gt;&#x2F;version&lt;&#x2F;code&gt; federation requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5730&quot;&gt;#5730&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Return &#x27;user_type&#x27; in admin API user endpoints results. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5731&quot;&gt;#5731&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t package the sytest test blacklist file. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5733&quot;&gt;#5733&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Replace uses of returnValue with plain return, as returnValue is not needed on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5736&quot;&gt;#5736&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Blacklist some flakey tests in worker mode. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5740&quot;&gt;#5740&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix some error cases in the caching layer. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5749&quot;&gt;#5749&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a prometheus metric for pending cache lookups. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5750&quot;&gt;#5750&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Stop trying to fetch events with event_id=None. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5753&quot;&gt;#5753&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert RedactionTestCase to modern test style. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5768&quot;&gt;#5768&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow looping calls to be given arguments. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5780&quot;&gt;#5780&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Set the logs emitted when checking typing and presence timeouts to DEBUG level, not INFO. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5785&quot;&gt;#5785&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove DelayedCall debugging from the test suite, as it is no longer required in the vast majority of Synapse&#x27;s tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5787&quot;&gt;#5787&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove some spurious exceptions from the logs where we failed to talk to a remote server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5790&quot;&gt;#5790&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve performance when making &lt;code&gt;.well-known&lt;&#x2F;code&gt; requests by sharing the SSL options between requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5794&quot;&gt;#5794&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Disable codecov GitHub comments on PRs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5796&quot;&gt;#5796&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t allow clients to send tombstone events that reference the room it&#x27;s sent in. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5801&quot;&gt;#5801&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Deny redactions of events sent in a different room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5802&quot;&gt;#5802&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Deny sending well known state types as non-state events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5805&quot;&gt;#5805&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Handle incorrectly encoded query params correctly by returning a 400. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5808&quot;&gt;#5808&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Handle pusher being deleted during processing rather than logging an exception. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5809&quot;&gt;#5809&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Return 502 not 500 when failing to reach any remote server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5810&quot;&gt;#5810&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce global pauses in the events stream caused by expensive state resolution during persistence. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5826&quot;&gt;#5826&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a lower bound to well-known lookup cache time to avoid repeated lookups. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5836&quot;&gt;#5836&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Whitelist history visbility sytests in worker mode tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5843&quot;&gt;#5843&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Critical Security Update - Synapse 1.2.1 released</title>
		<published>2019-07-26T00:00:00+00:00</published>
		<updated>2019-07-26T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/07/26/critical-security-update-synapse-1-2-1-released/" type="text/html"/>
		<id>matrix.org/blog/2019/07/26/critical-security-update-synapse-1-2-1-released/</id>
		<content type="html">&lt;p&gt;Today we release Synapse 1.2.1 as a critical security update. It contains patches relating to redactions and event federation. The patches address long standing bugs, and are not regressions specific to the previous version (1.2).  &lt;strong&gt;All admins, regardless of current version, should upgrade asap&lt;&#x2F;strong&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;This release includes &lt;em&gt;four&lt;&#x2F;em&gt; security fixes:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Prevent an attack where a federated server could send redactions for arbitrary events in v1 and v2 rooms. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5767&quot;&gt;#5767&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent a denial-of-service attack where cycles of redaction events would make Synapse spin infinitely. Thanks to &lt;code&gt;@lrizika:matrix.org&lt;&#x2F;code&gt; for identifying and responsibly disclosing this issue. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;commit&#x2F;0f2ecb961&quot;&gt;0f2ecb961&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent an attack where users could be joined or parted from public rooms without their consent. Thanks to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dylangerdaly&quot;&gt;Dylanger&lt;&#x2F;a&gt; for identifying and responsibly disclosing this issue. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5744&quot;&gt;#5744&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a vulnerability where a federated server could spoof read-receipts from
users on other servers. Thanks to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dylangerdaly&quot;&gt;Dylanger&lt;&#x2F;a&gt; for identifying this issue too. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5743&quot;&gt;#5743&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Additionally, the following fix was in Synapse &lt;strong&gt;1.2.0&lt;&#x2F;strong&gt;, but was not correctly
identified during the original release:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;It was possible for a room moderator to send a redaction for an &lt;code&gt;m.room.create&lt;&#x2F;code&gt; event, which would downgrade the room to version 1. Thanks to &lt;code&gt;@&#x2F;dev&#x2F;ponies:ponies.im&lt;&#x2F;code&gt; for identifying and responsibly disclosing this issue! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5701&quot;&gt;#5701&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;You can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.2.1&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Alternatively check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Thanks for bearing with us.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.2.0 released</title>
		<published>2019-07-25T00:00:00+00:00</published>
		<updated>2019-07-25T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/07/25/synapse-1-2-0-released/" type="text/html"/>
		<id>matrix.org/blog/2019/07/25/synapse-1-2-0-released/</id>
		<content type="html">&lt;p&gt;Hey hey, Synapse 1.2.0 is here. It contains aggregations support, better error handling for  deactivated accounts and some important bug fixes for redacting messages. Special thanks to community members &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;skalarproduktraum&quot;&gt;skalarproduktraum&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Lrizika&quot;&gt;Lrizika&lt;&#x2F;a&gt; for submissions to improve our documentation.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.2.0&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.1.0 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-2-0-2019-07-25&quot;&gt;Synapse 1.2.0 (2019-07-25)&lt;&#x2F;h1&gt;
&lt;p&gt;No significant changes.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-2-0rc2-2019-07-24&quot;&gt;Synapse 1.2.0rc2 (2019-07-24)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a regression introduced in v1.2.0rc1 which led to incorrect labels on some prometheus metrics. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5734&quot;&gt;#5734&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-2-0rc1-2019-07-22&quot;&gt;Synapse 1.2.0rc1 (2019-07-22)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add support for opentracing. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5544&quot;&gt;#5544&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5712&quot;&gt;#5712&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add ability to pull all locally stored events out of synapse that a particular user can see. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5589&quot;&gt;#5589&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a basic admin command app to allow server operators to run Synapse admin commands separately from the main production instance. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5597&quot;&gt;#5597&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;sender&lt;&#x2F;code&gt; and &lt;code&gt;origin_server_ts&lt;&#x2F;code&gt; fields to &lt;code&gt;m.replace&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5613&quot;&gt;#5613&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add default push rule to ignore reactions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5623&quot;&gt;#5623&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Include the original event when asking for its relations. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5626&quot;&gt;#5626&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Implement &lt;code&gt;session_lifetime&lt;&#x2F;code&gt; configuration option, after which access tokens will expire. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5660&quot;&gt;#5660&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Return &amp;quot;This account has been deactivated&amp;quot; when a deactivated user tries to login. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5674&quot;&gt;#5674&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Enable aggregations support by default (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5714&quot;&gt;#5714&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix &#x27;utime went backwards&#x27; errors on daemonization. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5609&quot;&gt;#5609&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Various minor fixes to the federation request rate limiter. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5621&quot;&gt;#5621&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Forbid viewing relations on an event once it has been redacted. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5629&quot;&gt;#5629&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix requests to the &lt;code&gt;&#x2F;store_invite&lt;&#x2F;code&gt; endpoint of identity servers being sent in the wrong format. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5638&quot;&gt;#5638&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix newly-registered users not being able to lookup their own profile without joining a room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5644&quot;&gt;#5644&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug in #5626 that prevented the original_event field from actually having the contents of the original event in a call to &lt;code&gt;&#x2F;relations&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5654&quot;&gt;#5654&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix 3PID bind requests being sent to identity servers as &lt;code&gt;application&#x2F;x-form-www-urlencoded&lt;&#x2F;code&gt; data, which is deprecated. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5658&quot;&gt;#5658&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix some problems with authenticating redactions in recent room versions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5699&quot;&gt;#5699&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5700&quot;&gt;#5700&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5707&quot;&gt;#5707&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ignore redactions of m.room.create events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5701&quot;&gt;#5701&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;updates-to-the-docker-image&quot;&gt;Updates to the Docker image&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Base Docker image on a newer Alpine Linux version (3.8 -&amp;gt; 3.10). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5619&quot;&gt;#5619&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add missing space in default logging file format generated by the Docker image. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5620&quot;&gt;#5620&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add information about nginx normalisation to reverse_proxy.rst. Contributed by @skalarproduktraum - thanks! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5397&quot;&gt;#5397&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;--no-pep517 should be --no-use-pep517 in the documentation to setup the development environment. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5651&quot;&gt;#5651&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improvements to Postgres setup instructions. Contributed by @Lrizika - thanks! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5661&quot;&gt;#5661&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Minor tweaks to postgres documentation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5675&quot;&gt;#5675&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Remove support for the &lt;code&gt;invite_3pid_guest&lt;&#x2F;code&gt; configuration setting. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5625&quot;&gt;#5625&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Move logging code out of &lt;code&gt;synapse.util&lt;&#x2F;code&gt; and into &lt;code&gt;synapse.logging&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5606&quot;&gt;#5606&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5617&quot;&gt;#5617&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a blacklist file to the repo to blacklist certain sytests from failing CI. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5611&quot;&gt;#5611&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make runtime errors surrounding password reset emails much clearer. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5616&quot;&gt;#5616&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove dead code for persiting outgoing federation transactions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5622&quot;&gt;#5622&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;lint.sh&lt;&#x2F;code&gt; to the scripts-dev folder which will run all linting steps required by CI. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5627&quot;&gt;#5627&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move RegistrationHandler.get_or_create_user to test code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5628&quot;&gt;#5628&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some more common python virtual-environment paths to the black exclusion list. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5630&quot;&gt;#5630&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Some counter metrics exposed over Prometheus have been renamed, with the old names preserved for backwards compatibility and deprecated. See &lt;code&gt;docs&#x2F;metrics-howto.rst&lt;&#x2F;code&gt; for details. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5636&quot;&gt;#5636&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Unblacklist some user_directory sytests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5637&quot;&gt;#5637&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Factor out some redundant code in the login implementation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5639&quot;&gt;#5639&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update ModuleApi to avoid register(generate_token=True). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5640&quot;&gt;#5640&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove access-token support from &lt;code&gt;RegistrationHandler.register&lt;&#x2F;code&gt;, and rename it. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5641&quot;&gt;#5641&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove access-token support from &lt;code&gt;RegistrationStore.register&lt;&#x2F;code&gt;, and rename it. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5642&quot;&gt;#5642&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve logging for auto-join when a new user is created. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5643&quot;&gt;#5643&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unused and unnecessary check for FederationDeniedError in _exception_to_failure. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5645&quot;&gt;#5645&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a small typo in a code comment. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5655&quot;&gt;#5655&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up exception handling around client access tokens. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5656&quot;&gt;#5656&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a mechanism for per-test homeserver configuration in the unit tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5657&quot;&gt;#5657&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Inline issue_access_token. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5659&quot;&gt;#5659&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update the sytest BuildKite configuration to checkout Synapse in &lt;code&gt;&#x2F;src&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5664&quot;&gt;#5664&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a &lt;code&gt;docker&lt;&#x2F;code&gt; type to the towncrier configuration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5673&quot;&gt;#5673&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert &lt;code&gt;synapse.federation.transport.server&lt;&#x2F;code&gt; to &lt;code&gt;async&lt;&#x2F;code&gt;. Might improve some stack traces. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5689&quot;&gt;#5689&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Documentation for opentracing. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5703&quot;&gt;#5703&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.1.0 released</title>
		<published>2019-07-04T00:00:00+00:00</published>
		<updated>2019-07-04T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/07/04/synapse-1-1-0-released/" type="text/html"/>
		<id>matrix.org/blog/2019/07/04/synapse-1-1-0-released/</id>
		<content type="html">&lt;p&gt;Right folks, this is our first post 1.0 release, which means that we have now
officially &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2019&#x2F;04&#x2F;08&#x2F;synapse-deprecating-postgres-9-4-and-python-2-x&quot;&gt;dropped support for Python 2 and Postgres
9.4&lt;&#x2F;a&gt;.
This means that we can start making use of Python 3 specific features and you
should expect lots of associated performance wins over the coming months. See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;UPGRADE.rst#upgrading-to-v110&quot;&gt;upgrade notes&lt;&#x2F;a&gt; for more.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.1.0 also contains a reworked approach to the Docker image, as well lots
of performance improvements with special focus on DB IO - expect more to come
in this area.&lt;&#x2F;p&gt;
&lt;p&gt;Special thanks to community member &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;galexrt&quot;&gt;Alexander
Trost&lt;&#x2F;a&gt; for rounding out  our SAML support and also
to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dhoffend&quot;&gt;Daniel Hoffend&lt;&#x2F;a&gt; for contributing the ability
to disable local password authentication.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.1.0&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.0.0 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-1-0-2019-07-04&quot;&gt;Synapse 1.1.0 (2019-07-04)&lt;&#x2F;h1&gt;
&lt;p&gt;As of v1.1.0, Synapse no longer supports Python 2, nor Postgres version 9.4.
See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;UPGRADE.rst#upgrading-to-v110&quot;&gt;upgrade notes&lt;&#x2F;a&gt; for more details.&lt;&#x2F;p&gt;
&lt;p&gt;This release also deprecates the use of environment variables to configure the
docker image. See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v1.1.0&#x2F;docker&#x2F;README.md#legacy-dynamic-configuration-file-support&quot;&gt;docker README&lt;&#x2F;a&gt;
for more details.&lt;&#x2F;p&gt;
&lt;p&gt;No changes since 1.1.0rc2.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-1-0rc2-2019-07-03&quot;&gt;Synapse 1.1.0rc2 (2019-07-03)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix regression in 1.1rc1 where OPTIONS requests to the media repo would fail. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5593&quot;&gt;#5593&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Removed the &lt;code&gt;SYNAPSE_SMTP_*&lt;&#x2F;code&gt; docker container environment variables. Using these environment variables prevented the docker container from starting in Synapse v1.0, even though they didn&#x27;t actually allow any functionality anyway. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5596&quot;&gt;#5596&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a number of &amp;quot;Starting txn from sentinel context&amp;quot; warnings. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5605&quot;&gt;#5605&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Update github templates. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5552&quot;&gt;#5552&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-1-0rc1-2019-07-02&quot;&gt;Synapse 1.1.0rc1 (2019-07-02)&lt;&#x2F;h1&gt;
&lt;p&gt;As of v1.1.0, Synapse no longer supports Python 2, nor Postgres version 9.4.
See the &lt;a href=&quot;UPGRADE.rst#upgrading-to-v110&quot;&gt;upgrade notes&lt;&#x2F;a&gt; for more details.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Added possibility to disable local password authentication. Contributed by Daniel Hoffend. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5092&quot;&gt;#5092&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add monthly active users to phonehome stats. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5252&quot;&gt;#5252&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow expired user to trigger renewal email sending manually. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5363&quot;&gt;#5363&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Statistics on forward extremities per room are now exposed via Prometheus. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5384&quot;&gt;#5384&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5458&quot;&gt;#5458&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5461&quot;&gt;#5461&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add --no-daemonize option to run synapse in the foreground, per issue #4130. Contributed by Soham Gumaste. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5412&quot;&gt;#5412&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5587&quot;&gt;#5587&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fully support SAML2 authentication. Contributed by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;galexrt&quot;&gt;Alexander Trost&lt;&#x2F;a&gt; - thank you! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5422&quot;&gt;#5422&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow server admins to define implementations of extra rules for allowing or denying incoming events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5440&quot;&gt;#5440&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5474&quot;&gt;#5474&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5477&quot;&gt;#5477&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for handling pagination APIs on client reader worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5505&quot;&gt;#5505&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5513&quot;&gt;#5513&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5531&quot;&gt;#5531&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve help and cmdline option names for --generate-config options. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5512&quot;&gt;#5512&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow configuration of the path used for ACME account keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5516&quot;&gt;#5516&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5521&quot;&gt;#5521&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5522&quot;&gt;#5522&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add --data-dir and --open-private-ports options. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5524&quot;&gt;#5524&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Split public rooms directory auth config in two settings, in order to manage client auth independently from the federation part of it. Obsoletes the &amp;quot;restrict_public_rooms_to_local_users&amp;quot; configuration setting. If &amp;quot;restrict_public_rooms_to_local_users&amp;quot; is set in the config, Synapse will act as if both new options are enabled, i.e. require authentication through the client API and deny federation requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5534&quot;&gt;#5534&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;The minimum TLS version used for outgoing federation requests can now be set with &lt;code&gt;federation_client_minimum_tls_version&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5550&quot;&gt;#5550&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Optimise devices changed query to not pull unnecessary rows from the database, reducing database load. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5559&quot;&gt;#5559&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add new metrics for number of forward extremities being persisted and number of state groups involved in resolution. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5476&quot;&gt;#5476&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix bug processing incoming events over federation if call to &lt;code&gt;&#x2F;get_missing_events&lt;&#x2F;code&gt; fails. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5042&quot;&gt;#5042&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent more than one room upgrade happening simultaneously on the same room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5051&quot;&gt;#5051&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where running synapse_port_db would cause the account validity feature to fail because it didn&#x27;t set the type of the email_sent column to boolean. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5325&quot;&gt;#5325&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Warn about disabling email-based password resets when a reset occurs, and remove warning when someone attempts a phone-based reset. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5387&quot;&gt;#5387&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix email notifications for unnamed rooms with multiple people. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5388&quot;&gt;#5388&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix exceptions in federation reader worker caused by attempting to renew attestations, which should only happen on master worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5389&quot;&gt;#5389&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix handling of failures fetching remote content to not log failures as exceptions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5390&quot;&gt;#5390&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where deactivated users could receive renewal emails if the account validity feature is on. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5394&quot;&gt;#5394&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix missing invite state after exchanging 3PID invites over federaton. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5464&quot;&gt;#5464&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix intermittent exceptions on Apple hardware. Also fix bug that caused database activity times to be under-reported in log lines. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5498&quot;&gt;#5498&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix logging error when a tampered event is detected. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5500&quot;&gt;#5500&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where clients could tight loop calling &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; for a period. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5507&quot;&gt;#5507&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug with &lt;code&gt;jinja2&lt;&#x2F;code&gt; preventing Synapse from starting. Users who had this problem should now simply need to run &lt;code&gt;pip install matrix-synapse&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5514&quot;&gt;#5514&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a regression where homeservers on private IP addresses were incorrectly blacklisted. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5523&quot;&gt;#5523&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fixed m.login.jwt using unregistered user_id and added pyjwt&amp;gt;=1.6.4 as jwt conditional dependencies. Contributed by Pau Rodriguez-Estivill. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5555&quot;&gt;#5555&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5586&quot;&gt;#5586&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug that would cause invited users to receive several emails for a single 3PID invite in case the inviter is rate limited. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5576&quot;&gt;#5576&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;updates-to-the-docker-image&quot;&gt;Updates to the Docker image&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add ability to change Docker containers &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;List_of_tz_database_time_zones&quot;&gt;timezone&lt;&#x2F;a&gt; with the &lt;code&gt;TZ&lt;&#x2F;code&gt; variable. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5383&quot;&gt;#5383&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update docker image to use Python 3.7. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5546&quot;&gt;#5546&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Deprecate the use of environment variables for configuration, and make the use of a static configuration the default. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5561&quot;&gt;#5561&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5562&quot;&gt;#5562&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5566&quot;&gt;#5566&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5567&quot;&gt;#5567&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Increase default log level for docker image to INFO. It can still be changed by editing the generated log.config file. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5547&quot;&gt;#5547&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Send synapse logs to the docker logging system, by default. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5565&quot;&gt;#5565&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Open the non-TLS port by default. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5568&quot;&gt;#5568&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix failure to start under docker with SAML support enabled. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5490&quot;&gt;#5490&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Use a sensible location for data files when generating a config file. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5563&quot;&gt;#5563&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Python 2.7 is no longer a supported platform. Synapse now requires Python 3.5+ to run. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5425&quot;&gt;#5425&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;PostgreSQL 9.4 is no longer supported. Synapse requires Postgres 9.5+ or above for Postgres support. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5448&quot;&gt;#5448&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove support for cpu_affinity setting. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5525&quot;&gt;#5525&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Improve README section on performance troubleshooting. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4276&quot;&gt;#4276&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add information about how to install and run &lt;code&gt;black&lt;&#x2F;code&gt; on the codebase to code_style.rst. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5537&quot;&gt;#5537&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve install docs on choosing server_name. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5558&quot;&gt;#5558&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes-1&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add logging to 3pid invite signature verification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5015&quot;&gt;#5015&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update example haproxy config to a more compatible setup. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5313&quot;&gt;#5313&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Track deactivated accounts in the database. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5378&quot;&gt;#5378&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5465&quot;&gt;#5465&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5493&quot;&gt;#5493&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up code for sending federation EDUs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5381&quot;&gt;#5381&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a sponsor button to the repo. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5382&quot;&gt;#5382&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5386&quot;&gt;#5386&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t log non-200 responses from federation queries as exceptions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5383&quot;&gt;#5383&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update Python syntax in contrib&#x2F; to Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5446&quot;&gt;#5446&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update federation_client dev script to support &lt;code&gt;.well-known&lt;&#x2F;code&gt; and work with python3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5447&quot;&gt;#5447&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;SyTest has been moved to Buildkite. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5459&quot;&gt;#5459&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Demo script now uses python3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5460&quot;&gt;#5460&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Synapse can now handle RestServlets that return coroutines. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5475&quot;&gt;#5475&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5585&quot;&gt;#5585&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;The demo servers talk to each other again. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5478&quot;&gt;#5478&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an EXPERIMENTAL config option to try and periodically clean up extremities by sending dummy events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5480&quot;&gt;#5480&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Synapse&#x27;s codebase is now formatted by &lt;code&gt;black&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5482&quot;&gt;#5482&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Some cleanups and sanity-checking in the CPU and database metrics. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5499&quot;&gt;#5499&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve email notification logging. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5502&quot;&gt;#5502&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &amp;quot;Unexpected entry in &#x27;full_schemas&#x27;&amp;quot; log warning. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5509&quot;&gt;#5509&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve logging when generating config files. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5510&quot;&gt;#5510&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor and clean up Config parser for maintainability. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5511&quot;&gt;#5511&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make the config clearer in that email.template_dir is relative to the Synapse&#x27;s root directory, not the &lt;code&gt;synapse&#x2F;&lt;&#x2F;code&gt; folder within it. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5543&quot;&gt;#5543&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update v1.0.0 release changelog to include more information about changes to password resets. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5545&quot;&gt;#5545&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove non-functioning check_event_hash.py dev script. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5548&quot;&gt;#5548&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Synapse will now only allow TLS v1.2 connections when serving federation, if it terminates TLS. As Synapse&#x27;s allowed ciphers were only able to be used in TLSv1.2 before, this does not change behaviour. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5550&quot;&gt;#5550&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Logging when running GC collection on generation 0 is now at the DEBUG level, not INFO. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5557&quot;&gt;#5557&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce the amount of stuff we send in the docker context. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5564&quot;&gt;#5564&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Point the reverse links in the Purge History contrib scripts at the intended location. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5570&quot;&gt;#5570&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.0.0 released</title>
		<published>2019-06-11T00:00:00+00:00</published>
		<updated>2019-06-11T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/06/11/synapse-1-0-0-released/" type="text/html"/>
		<id>matrix.org/blog/2019/06/11/synapse-1-0-0-released/</id>
		<content type="html">&lt;p&gt;Well here it is: Synapse 1.0.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.0 is the reference implementation of the &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;spec&quot;&gt;Matrix 1.0 spec&lt;&#x2F;a&gt;. The goal of the release overall has been to focus on security and stability, such that we can officially declare Synapse (and Matrix) out of beta and recommended for production use. This means changing the default room protocol version used for new rooms to be &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;blob&#x2F;37871106c6fc6013c17b5711fb93853fff140267&#x2F;proposals&#x2F;2002-rooms-v4.md&quot;&gt;v4&lt;&#x2F;a&gt;, which includes the new &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;blob&#x2F;f714aaadd011ac736d779f8460202a8d95799123&#x2F;proposals&#x2F;1442-state-resolution.md&quot;&gt;state resolution algorithm&lt;&#x2F;a&gt;, as well as &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;blob&#x2F;erikj&#x2F;event_id_hashes&#x2F;proposals&#x2F;1659-event-id-as-hashes.md&quot;&gt;collision-resistant event IDs&lt;&#x2F;a&gt;, which are now formatted to be &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;blob&#x2F;rav&#x2F;proposal&#x2F;no_slash_in_event_id&#x2F;proposals&#x2F;1884-replace-slashes-in-event_ids.md&quot;&gt;URL safe&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.0 also ships with support for the upcoming &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;spec&#x2F;rooms&#x2F;v5.html&quot;&gt;v5 room protocol&lt;&#x2F;a&gt; (which enforces honouring server key validity periods), but this will not be used as the default for new rooms until a sufficient number of servers support it.&lt;&#x2F;p&gt;
&lt;p&gt;Please note that Synapse 1.0 does &lt;strong&gt;not&lt;&#x2F;strong&gt; include significant performance work or new features - our focus has been almost exclusively on providing a reference implementation of the Matrix 1.0 protocol. But having cleared our backlog on security&#x2F;stability issues we will finally be now unblocked to pursue work around reducing RAM footprint, eliminating forward-extremity build up, and shipping new features like Edits, Reactions &amp;amp; E2E cross-signing support.&lt;&#x2F;p&gt;
&lt;p&gt;As part of the security work, Synapse 1.0 contains a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;MSC1711_certificates_FAQ.md#it-used-to-work-just-fine-why-are-you-breaking-everything&quot;&gt;breaking change&lt;&#x2F;a&gt; that requires a valid TLS certificate on the federation API endpoint. &lt;strong&gt;Servers that do not configure their certificate will no longer be able to federate post 1.0.&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;It is also worth noting that Synapse 1.0.0 is the last release that will support Python 2.x and Postgres 9.4. For more information see &lt;a href=&quot;&#x2F;blog&#x2F;2019&#x2F;04&#x2F;08&#x2F;synapse-deprecating-postgres-9-4-and-python-2-x&quot;&gt;here&lt;&#x2F;a&gt; but the TL;DR is that you should upgrade asap.&lt;&#x2F;p&gt;
&lt;p&gt;This release has been a long time coming. Many thanks indeed to everyone who helped test the release candidates and provided feedback along the way.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.0 is just one component of a larger Matrix 1.0 release, which you can &lt;a href=&quot;&#x2F;blog&#x2F;2019&#x2F;06&#x2F;11&#x2F;introducing-matrix-1-0-and-the-matrix-org-foundation&quot;&gt;read all about here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.0.0&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 0.99.5 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-0-0-2019-06-11&quot;&gt;Synapse 1.0.0 (2019-06-11)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix bug where attempting to send transactions with large number of EDUs can fail. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5418&quot;&gt;#5418&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Expand the federation guide to include relevant content from the MSC1711 FAQ (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5419&quot;&gt;#5419&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Move password reset links to &#x2F;_matrix&#x2F;client&#x2F;unstable namespace. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5424&quot;&gt;#5424&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-0-0rc3-2019-06-10&quot;&gt;Synapse 1.0.0rc3 (2019-06-10)&lt;&#x2F;h1&gt;
&lt;p&gt;Security: Fix authentication bug introduced in 1.0.0rc1. Please upgrade to rc3 immediately&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-0-0rc2-2019-06-10&quot;&gt;Synapse 1.0.0rc2 (2019-06-10)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Remove redundant warning about key server response validation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5392&quot;&gt;#5392&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where old keys stored in the database with a null valid until timestamp caused all verification requests for that key to fail. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5415&quot;&gt;#5415&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix excessive memory using with default &lt;code&gt;federation_verify_certificates: true&lt;&#x2F;code&gt; configuration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5417&quot;&gt;#5417&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-0-0rc1-2019-06-07&quot;&gt;Synapse 1.0.0rc1 (2019-06-07)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Synapse now more efficiently collates room statistics. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4338&quot;&gt;#4338&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5260&quot;&gt;#5260&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5324&quot;&gt;#5324&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add experimental support for relations (aka reactions and edits). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5220&quot;&gt;#5220&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ability to configure default room version. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5223&quot;&gt;#5223&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5249&quot;&gt;#5249&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow configuring a range for the account validity startup job. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5276&quot;&gt;#5276&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;CAS login will now hit the r0 API, not the deprecated v1 one. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5286&quot;&gt;#5286&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Validate federation server TLS certificates by default (implements &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;blob&#x2F;master&#x2F;proposals&#x2F;1711-x509-for-federation.md&quot;&gt;MSC1711&lt;&#x2F;a&gt;). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5359&quot;&gt;#5359&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update &#x2F;_matrix&#x2F;client&#x2F;versions to reference support for r0.5.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5360&quot;&gt;#5360&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a script to generate new signing-key files. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5361&quot;&gt;#5361&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update upgrade and installation guides ahead of 1.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5371&quot;&gt;#5371&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Replace the &lt;code&gt;perspectives&lt;&#x2F;code&gt; configuration section with &lt;code&gt;trusted_key_servers&lt;&#x2F;code&gt;, and make validating the signatures on responses optional (since TLS will do this job for us). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5374&quot;&gt;#5374&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add ability to perform password reset via email without trusting the identity server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5377&quot;&gt;#5377&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Set default room version to v4. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5379&quot;&gt;#5379&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-2&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fixes client-server API not sending &amp;quot;m.heroes&amp;quot; to lazy-load &#x2F;sync requests when a rooms name or its canonical alias are empty. Thanks to @dnaf for this work! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5089&quot;&gt;#5089&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent federation device list updates breaking when processing multiple updates at once. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5156&quot;&gt;#5156&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix worker registration bug caused by ClientReaderSlavedStore being unable to see get_profileinfo. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5200&quot;&gt;#5200&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix race when backfilling in rooms with worker mode. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5221&quot;&gt;#5221&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix appservice timestamp massaging. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5233&quot;&gt;#5233&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ensure that server_keys fetched via a notary server are correctly signed. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5251&quot;&gt;#5251&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Show the correct error when logging out and access token is missing. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5256&quot;&gt;#5256&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix error code when there is an invalid parameter on &#x2F;_matrix&#x2F;client&#x2F;r0&#x2F;publicRooms (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5257&quot;&gt;#5257&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix error when downloading thumbnail with missing width&#x2F;height parameter. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5258&quot;&gt;#5258&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix schema update for account validity. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5268&quot;&gt;#5268&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where we leaked extremities when we soft failed events, leading to performance degradation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5274&quot;&gt;#5274&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5278&quot;&gt;#5278&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5291&quot;&gt;#5291&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &amp;quot;db txn &#x27;update_presence&#x27; from sentinel context&amp;quot; log messages. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5275&quot;&gt;#5275&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix dropped logcontexts during high outbound traffic. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5277&quot;&gt;#5277&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where it is not possible to get events in the federation format with the request &lt;code&gt;GET &#x2F;_matrix&#x2F;client&#x2F;r0&#x2F;rooms&#x2F;{roomId}&#x2F;messages&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5293&quot;&gt;#5293&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix performance problems with the rooms stats background update. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5294&quot;&gt;#5294&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix noisy &#x27;no key for server&#x27; logs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5300&quot;&gt;#5300&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where a notary server would sometimes forget old keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5307&quot;&gt;#5307&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent users from setting huge displaynames and avatar URLs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5309&quot;&gt;#5309&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix handling of failures when processing incoming events where calling &lt;code&gt;&#x2F;event_auth&lt;&#x2F;code&gt; on remote server fails. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5317&quot;&gt;#5317&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ensure that we have an up-to-date copy of the signing key when validating incoming federation requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5321&quot;&gt;#5321&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix various problems which made the signing-key notary server time out for some requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5333&quot;&gt;#5333&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug which would make certain operations (such as room joins) block for 20 minutes while attemoting to fetch verification keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5334&quot;&gt;#5334&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where we could rapidly mark a server as unreachable even though it was only down for a few minutes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5335&quot;&gt;#5335&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5340&quot;&gt;#5340&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where account validity renewal emails could only be sent when email notifs were enabled. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5341&quot;&gt;#5341&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix failure when fetching batches of events during backfill, etc. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5342&quot;&gt;#5342&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a new room version where the timestamps on events are checked against the validity periods on signing keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5348&quot;&gt;#5348&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5354&quot;&gt;#5354&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix room stats and presence background updates to correctly handle missing events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5352&quot;&gt;#5352&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Include left members in room summaries&#x27; heroes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5355&quot;&gt;#5355&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;federation_custom_ca_list&lt;&#x2F;code&gt; configuration option. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5362&quot;&gt;#5362&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix missing logcontext warnings on shutdown. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5369&quot;&gt;#5369&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation-1&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix docs on resetting the user directory. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5282&quot;&gt;#5282&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix notes about ACME in the MSC1711 faq. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5357&quot;&gt;#5357&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes-1&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Synapse will now serve the experimental &amp;quot;room complexity&amp;quot; API endpoint. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5216&quot;&gt;#5216&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;The base classes for the v1 and v2_alpha REST APIs have been unified. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5226&quot;&gt;#5226&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5328&quot;&gt;#5328&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Simplifications and comments in do_auth. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5227&quot;&gt;#5227&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove urllib3 pin as requests 2.22.0 has been released supporting urllib3 1.25.2. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5230&quot;&gt;#5230&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Preparatory work for key-validity features. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5232&quot;&gt;#5232&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5234&quot;&gt;#5234&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5235&quot;&gt;#5235&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5236&quot;&gt;#5236&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5237&quot;&gt;#5237&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5244&quot;&gt;#5244&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5250&quot;&gt;#5250&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5296&quot;&gt;#5296&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5299&quot;&gt;#5299&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5343&quot;&gt;#5343&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5347&quot;&gt;#5347&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5356&quot;&gt;#5356&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Specify the type of reCAPTCHA key to use. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5283&quot;&gt;#5283&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve sample config for monthly active user blocking. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5284&quot;&gt;#5284&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove spurious debug from MatrixFederationHttpClient.get_json. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5287&quot;&gt;#5287&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve logging for logcontext leaks. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5288&quot;&gt;#5288&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that the admin change password API logs the user out. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5303&quot;&gt;#5303&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;New installs will now use the v54 full schema, rather than the full schema v14 and applying incremental updates to v54. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5320&quot;&gt;#5320&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve docstrings on MatrixFederationClient. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5332&quot;&gt;#5332&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up FederationClient.get_events for clarity. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5344&quot;&gt;#5344&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Various improvements to debug logging. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5353&quot;&gt;#5353&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t run CI build checks until sample config check has passed. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5370&quot;&gt;#5370&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Automatically retry buildkite builds (max twice) when an agent is lost. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5380&quot;&gt;#5380&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.99.5.2 released</title>
		<published>2019-05-30T00:00:00+00:00</published>
		<updated>2019-05-30T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/05/30/synapse-0-99-5-2-released/" type="text/html"/>
		<id>matrix.org/blog/2019/05/30/synapse-0-99-5-2-released/</id>
		<content type="html">&lt;p&gt;0.99.5.2 contains a critical performance fix following a regression that was introduced in 0.99.5. Affected servers will have experienced increased CPU and RAM usage with a knock on effect of generally sluggish performance.&lt;&#x2F;p&gt;
&lt;p&gt;Separately, we are also looking into reports relating to further performance degradations that may have been introduced as part of 0.99.5, though consider the 0.99.5.2 fix to be a significant improvement on previous 0.99.5.x releases.&lt;&#x2F;p&gt;
&lt;p&gt;Please upgrade asap.&lt;&#x2F;p&gt;
&lt;p&gt;You can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.99.5.2&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-v0-99-5-2-changelog&quot;&gt;Synapse v0.99.5.2 Changelog&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix bug where we leaked extremities when we soft failed events, leading to performance degradation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5274&quot;&gt;#5274&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5278&quot;&gt;#5278&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5291&quot;&gt;#5291&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.99.5.1 released!</title>
		<published>2019-05-21T00:00:00+00:00</published>
		<updated>2019-05-21T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/05/21/synapse-0-99-5-1-released/" type="text/html"/>
		<id>matrix.org/blog/2019/05/21/synapse-0-99-5-1-released/</id>
		<content type="html">&lt;p&gt;Okay folks, this is an important one. v0.99.5.1 will be the last release before we ship Synapse v1.0. &lt;strong&gt;It is really important that you upgrade to v0.99.5.1 because it implements rooms &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;blob&#x2F;matthew&#x2F;room_v4&#x2F;proposals&#x2F;2002-rooms-v4.md&quot;&gt;version 4&lt;&#x2F;a&gt; - which is the room version that Synapse 1.0 will default to.&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;This means that Synapse 1.0 servers will create new rooms as version 4 by default and servers that have not upgraded to at least v0.99.5.1 will not be able to join those rooms.&lt;&#x2F;p&gt;
&lt;p&gt;Over the coming days we will announce a release day for Synapse v1.0, the idea is to give admins 2 weeks notice so that anyone yet to configure their federation SSL certificate has time to do so. &lt;strong&gt;This is important, failure to configure your certs will mean not being able to federate with v1.0 servers.&lt;&#x2F;strong&gt; If you are not sure if you certs are valid, you can test &lt;a href=&quot;https:&#x2F;&#x2F;federationtester.matrix.org&#x2F;&quot;&gt;here&lt;&#x2F;a&gt; and read &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;MSC1711_certificates_FAQ.md&quot;&gt;here&lt;&#x2F;a&gt; for more info on what to do.&lt;&#x2F;p&gt;
&lt;p&gt;Aside from room v4, this release also includes the ability to blacklist specific IPs from federating as well as experimental support for edits and reactions. We are not quite ready to mark the feature &#x27;done done&#x27;, but it is very close. Watch out for news as the feature lands properly.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;re really close to v1.0 now, give us a few more days and we&#x27;ll announce an official release date.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.99.5.1&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-v0-99-5-1-changelog-since-v0-99-4&quot;&gt;Synapse v0.99.5.1 Changelog (since v0.99.4)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add ability to blacklist IP ranges for the federation client. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5043&quot;&gt;#5043&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ratelimiting configuration for clients sending messages and the federation server has been altered to match login ratelimiting. The old configuration names will continue working. Check the sample config for details of the new names. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5181&quot;&gt;#5181&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Drop support for the undocumented &#x2F;_matrix&#x2F;client&#x2F;v2_alpha API prefix. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5190&quot;&gt;#5190&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an option to disable per-room profiles. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5196&quot;&gt;#5196&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Stick an expiration date to any registered user missing one at startup if account validity is enabled. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5204&quot;&gt;#5204&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add experimental support for relations (aka reactions and edits). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5209&quot;&gt;#5209&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5211&quot;&gt;#5211&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5203&quot;&gt;#5203&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5212&quot;&gt;#5212&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a room version 4 which uses a new event ID format, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2002&quot;&gt;MSC2002&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5210&quot;&gt;#5210&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5217&quot;&gt;#5217&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix image orientation when generating thumbnails (needs pillow&amp;gt;=4.3.0). Contributed by Pau Rodriguez-Estivill. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5039&quot;&gt;#5039&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Exclude soft-failed events from forward-extremity candidates: fixes &amp;quot;No forward extremities left!&amp;quot; error. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5146&quot;&gt;#5146&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Re-order stages in registration flows such that msisdn and email verification are done last. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5174&quot;&gt;#5174&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix 3pid guest invites. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5177&quot;&gt;#5177&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where the register endpoint would fail with M_THREEPID_IN_USE instead of returning an account previously registered in the same session. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5187&quot;&gt;#5187&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent registration for user ids that are too long to fit into a state key. Contributed by Reid Anderson. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5198&quot;&gt;#5198&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix incompatibility between ACME support and Python 3.5.2. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5218&quot;&gt;#5218&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix error handling for rooms whose versions are unknown. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5219&quot;&gt;#5219&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Make &#x2F;sync attempt to return device updates for both joined and invited users. Note that this doesn&#x27;t currently work correctly due to other bugs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3484&quot;&gt;#3484&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update tests to consistently be configured via the same code that is used when loading from configuration files. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5171&quot;&gt;#5171&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5185&quot;&gt;#5185&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow client event serialization to be async. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5183&quot;&gt;#5183&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Expose DataStore._get_events as get_events_as_list. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5184&quot;&gt;#5184&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make generating SQL bounds for pagination generic. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5191&quot;&gt;#5191&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Stop telling people to install the optional dependencies by default. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5197&quot;&gt;#5197&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.99.4 released!</title>
		<published>2019-05-15T00:00:00+00:00</published>
		<updated>2019-05-15T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/05/15/synapse-0-99-4-released/" type="text/html"/>
		<id>matrix.org/blog/2019/05/15/synapse-0-99-4-released/</id>
		<content type="html">&lt;p&gt;Hey ho Synapse release day.&lt;&#x2F;p&gt;
&lt;p&gt;0.99.4 is a maintenance release collecting together all of the bug fixes and performance improvements over the past few weeks, additionally there is further support for the upcoming 1.0 release (more info coming soon). One thing worth calling out is how many community contributions have made their way into 0.99.4, take a look at the change log for details, but many thanks to everyone submitting PRs, keep them coming!&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.99.4&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-0-99-4-changelog&quot;&gt;Synapse 0.99.4 Changelog&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add systemd-python to the optional dependencies to enable logging to the systemd journal. Install with &lt;code&gt;pip install matrix-synapse[systemd]&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4339&quot;&gt;#4339&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a default .m.rule.tombstone push rule. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4867&quot;&gt;#4867&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add ability for password provider modules to bind email addresses to users upon registration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4947&quot;&gt;#4947&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Implementation of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;1711&quot;&gt;MSC1711&lt;&#x2F;a&gt; including config options for requiring valid TLS certificates for federation traffic, the ability to disable TLS validation for specific domains, and the ability to specify your own list of CA certificates. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4967&quot;&gt;#4967&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove presence list support as per MSC 1819. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4989&quot;&gt;#4989&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce CPU usage starting pushers during start up. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4991&quot;&gt;#4991&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a delete group admin API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5002&quot;&gt;#5002&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add config option to block users from looking up 3PIDs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5010&quot;&gt;#5010&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add context to phonehome stats. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5020&quot;&gt;#5020&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Configure the example systemd units to have a log identifier of &lt;code&gt;matrix-synapse&lt;&#x2F;code&gt;
instead of the executable name, &lt;code&gt;python&lt;&#x2F;code&gt;.
Contributed by Christoph Müller. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5023&quot;&gt;#5023&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add time-based account expiration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5027&quot;&gt;#5027&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5047&quot;&gt;#5047&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5073&quot;&gt;#5073&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5116&quot;&gt;#5116&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for handling &#x2F;versions, &#x2F;voip and &#x2F;push_rules client endpoints to client_reader worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5063&quot;&gt;#5063&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5065&quot;&gt;#5065&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5070&quot;&gt;#5070&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an configuration option to require authentication on &#x2F;publicRooms and &#x2F;profile endpoints. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5083&quot;&gt;#5083&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move admin APIs to &lt;code&gt;&#x2F;_synapse&#x2F;admin&#x2F;v1&lt;&#x2F;code&gt;. (The old paths are retained for backwards-compatibility, for now). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5119&quot;&gt;#5119&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Implement an admin API for sending server notices. Many thanks to @krombel who provided a foundation for this work. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5121&quot;&gt;#5121&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5142&quot;&gt;#5142&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Avoid redundant URL encoding of redirect URL for SSO login in the fallback login page. Fixes a regression introduced in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4220&quot;&gt;#4220&lt;&#x2F;a&gt;. Contributed by Marcel Fabian Krüger (&amp;quot;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;zauguin&quot;&gt;zaugin&lt;&#x2F;a&gt;&amp;quot;). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4555&quot;&gt;#4555&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where presence updates were sent to all servers in a room when a new server joined, rather than to just the new server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4942&quot;&gt;#4942&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5103&quot;&gt;#5103&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix sync bug which made accepting invites unreliable in worker-mode synapses. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4955&quot;&gt;#4955&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4956&quot;&gt;#4956&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;start.sh: Fix the --no-rate-limit option for messages and make it bypass rate limit on registration and login too. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4981&quot;&gt;#4981&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Transfer related groups on room upgrade. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4990&quot;&gt;#4990&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent the ability to kick users from a room they aren&#x27;t in. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4999&quot;&gt;#4999&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix issue #4596 so synapse_port_db script works with --curses option on Python 3. Contributed by Anders Jensen-Waud &lt;a href=&quot;mailto:anders@jensenwaud.com&quot;&gt;anders@jensenwaud.com&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5003&quot;&gt;#5003&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clients timing out&#x2F;disappearing while downloading from the media repository will now no longer log a spurious &amp;quot;Producer was not unregistered&amp;quot; message. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5009&quot;&gt;#5009&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &amp;quot;cannot import name execute_batch&amp;quot; error with postgres. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5032&quot;&gt;#5032&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix disappearing exceptions in manhole. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5035&quot;&gt;#5035&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Workaround bug in twisted where attempting too many concurrent DNS requests could cause it to hang due to running out of file descriptors. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5037&quot;&gt;#5037&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make sure we&#x27;re not registering the same 3pid twice on registration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5071&quot;&gt;#5071&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t crash on lack of expiry templates. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5077&quot;&gt;#5077&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the ratelimting on third party invites. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5104&quot;&gt;#5104&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some missing limitations to room alias creation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5124&quot;&gt;#5124&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5128&quot;&gt;#5128&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Limit the number of EDUs in transactions to 100 as expected by synapse. Thanks to @superboum for this work! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5138&quot;&gt;#5138&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bogus imports in unit tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5154&quot;&gt;#5154&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add test to verify threepid auth check added in #4435. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4474&quot;&gt;#4474&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix&#x2F;improve some docstrings in the replication code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4949&quot;&gt;#4949&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Split synapse.replication.tcp.streams into smaller files. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4953&quot;&gt;#4953&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor replication row generation&#x2F;parsing. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4954&quot;&gt;#4954&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Run &lt;code&gt;black&lt;&#x2F;code&gt; to clean up formatting on &lt;code&gt;synapse&#x2F;storage&#x2F;roommember.py&lt;&#x2F;code&gt; and &lt;code&gt;synapse&#x2F;storage&#x2F;events.py&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4959&quot;&gt;#4959&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove log line for password via the admin API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4965&quot;&gt;#4965&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix typo in TLS filenames in docker&#x2F;README.md. Also add the &#x27;-p&#x27; commandline option to the &#x27;docker run&#x27; example. Contributed by Jurrie Overgoor. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4968&quot;&gt;#4968&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor room version definitions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4969&quot;&gt;#4969&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce log level of .well-known&#x2F;matrix&#x2F;client responses. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4972&quot;&gt;#4972&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;config.signing_key_path&lt;&#x2F;code&gt; that can be read by &lt;code&gt;synapse.config&lt;&#x2F;code&gt; utility. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4974&quot;&gt;#4974&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Track which identity server is used when binding a threepid and use that for unbinding, as per MSC1915. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4982&quot;&gt;#4982&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Rewrite KeyringTestCase as a HomeserverTestCase. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4985&quot;&gt;#4985&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;README updates: Corrected the default POSTGRES_USER. Added port forwarding hint in TLS section. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4987&quot;&gt;#4987&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove a number of unused tables from the database schema. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4992&quot;&gt;#4992&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5028&quot;&gt;#5028&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5033&quot;&gt;#5033&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Run &lt;code&gt;black&lt;&#x2F;code&gt; on the remainder of &lt;code&gt;synapse&#x2F;storage&#x2F;&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4996&quot;&gt;#4996&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix grammar in get_current_users_in_room and give it a docstring. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4998&quot;&gt;#4998&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up some code in the server-key Keyring. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5001&quot;&gt;#5001&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert SYNAPSE_NO_TLS Docker variable to boolean for user friendliness. Contributed by Gabriel Eckerson. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5005&quot;&gt;#5005&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor synapse.storage._base._simple_select_list_paginate. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5007&quot;&gt;#5007&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Store the notary server name correctly in server_keys_json. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5024&quot;&gt;#5024&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Rewrite Datastore.get_server_verify_keys to reduce the number of database transactions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5030&quot;&gt;#5030&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove extraneous period from copyright headers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5046&quot;&gt;#5046&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update documentation for where to get Synapse packages. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5067&quot;&gt;#5067&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add workarounds for pep-517 install errors. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5098&quot;&gt;#5098&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve logging when event-signature checks fail. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5100&quot;&gt;#5100&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Factor out an &amp;quot;assert_requester_is_admin&amp;quot; function. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5120&quot;&gt;#5120&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove the requirement to authenticate for &#x2F;admin&#x2F;server_version. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5122&quot;&gt;#5122&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent an exception from being raised in a IResolutionReceiver and use a more generic error message for blacklisted URL previews. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5155&quot;&gt;#5155&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Run &lt;code&gt;black&lt;&#x2F;code&gt; on the tests directory. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5170&quot;&gt;#5170&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix CI after new release of isort. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5179&quot;&gt;#5179&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.99.3 released!</title>
		<published>2019-04-01T00:00:00+00:00</published>
		<updated>2019-04-01T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/04/01/synapse-0-99-3-released/" type="text/html"/>
		<id>matrix.org/blog/2019/04/01/synapse-0-99-3-released/</id>
		<content type="html">&lt;p&gt;Hey hey, a Synapse release for you today.&lt;&#x2F;p&gt;
&lt;p&gt;The big news in 0.99.3 is that the user directory has been completely re-written and should now be much more performant - this will benefit all installations, but especially those housing larger servers.&lt;&#x2F;p&gt;
&lt;p&gt;Aside from that we continue our 1.0 preparations and relatedly we&#x27;ve improved our docs, in particular to explain how .well-known works. On the perf side we&#x27;ve added rate limiting to login and register endpoints as well as now batching up read receipts to send over federation.&lt;&#x2F;p&gt;
&lt;p&gt;I&#x27;ve said it before, and I&#x27;ll say it again:-&lt;&#x2F;p&gt;
&lt;blockquote&gt;
&lt;p&gt;The most important thing that admins should know is that prior to 1.0 landing later this month, &lt;strong&gt;it is essential that the federation API has a valid TLS certificate - self signed certificates will no longer be accepted.&lt;&#x2F;strong&gt; For more details see our &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;MSC1711_certificates_FAQ.md&quot;&gt;handy guide&lt;&#x2F;a&gt;. Failure to do this will result in being unable to federate with other 1.0 servers.&lt;&#x2F;p&gt;
&lt;&#x2F;blockquote&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.99.3&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our new &lt;a href=&quot;&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page.&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;synapse-0-99-3-changelog&quot;&gt;Synapse 0.99.3 changelog&lt;&#x2F;h2&gt;
&lt;h4 id=&quot;features&quot;&gt;Features&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;The user directory has been rewritten to make it faster, with less chance of falling behind on a large server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4537&quot;&gt;#4537&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4846&quot;&gt;#4846&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4864&quot;&gt;#4864&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4887&quot;&gt;#4887&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4900&quot;&gt;#4900&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4944&quot;&gt;#4944&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add configurable rate limiting to the &#x2F;register endpoint. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4735&quot;&gt;#4735&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4804&quot;&gt;#4804&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Move server key queries to federation reader. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4757&quot;&gt;#4757&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add support for &#x2F;account&#x2F;3pid REST endpoint to client_reader worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4759&quot;&gt;#4759&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add an endpoint to the admin API for querying the server version. Contributed by Joseph Weston. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4772&quot;&gt;#4772&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Include a default configuration file in the &#x27;docs&#x27; directory. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4791&quot;&gt;#4791&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4801&quot;&gt;#4801&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse is now permissive about trailing slashes on some of its federation endpoints, allowing zero or more to be present. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4793&quot;&gt;#4793&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add support for &#x2F;keys&#x2F;query and &#x2F;keys&#x2F;changes REST endpoints to client_reader worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4796&quot;&gt;#4796&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add checks to incoming events over federation for events evading auth (aka &quot;soft fail&quot;). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4814&quot;&gt;#4814&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add configurable rate limiting to the &#x2F;login endpoint. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4821&quot;&gt;#4821&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4865&quot;&gt;#4865&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove trailing slashes from certain outbound federation requests. Retry if receiving a 404. Context: #3622. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4840&quot;&gt;#4840&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Allow passing --daemonize flags to workers in the same way as with master. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4853&quot;&gt;#4853&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Batch up outgoing read-receipts to reduce federation traffic. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4890&quot;&gt;#4890&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4927&quot;&gt;#4927&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add option to disable searching the user directory. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4895&quot;&gt;#4895&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add option to disable searching of local and remote public room lists. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4896&quot;&gt;#4896&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add ability for password providers to login&#x2F;register a user via 3PID (email, phone). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4931&quot;&gt;#4931&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix a bug where media with spaces in the name would get a corrupted name. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2090&quot;&gt;#2090&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix attempting to paginate in rooms where server cannot see any events, to avoid unnecessarily pulling in lots of redacted events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4699&quot;&gt;#4699&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;&#x27;event_id&#x27; is now a required parameter in federated state requests, as per the matrix spec. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4740&quot;&gt;#4740&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix tightloop over connecting to replication server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4749&quot;&gt;#4749&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix parsing of Content-Disposition headers on remote media requests and URL previews. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4763&quot;&gt;#4763&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix incorrect log about not persisting duplicate state event. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4776&quot;&gt;#4776&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix v4v6 option in HAProxy example config. Contributed by Flakebi. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4790&quot;&gt;#4790&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Handle batch updates in worker replication protocol. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4792&quot;&gt;#4792&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug where we didn&#x27;t correctly throttle sending of USER_IP commands over replication. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4818&quot;&gt;#4818&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix potential race in handling missing updates in device list updates. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4829&quot;&gt;#4829&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug where synapse expected an un-specced &lt;code&gt;prev_state&lt;&#x2F;code&gt; field on state events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4837&quot;&gt;#4837&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Transfer a user&#x27;s notification settings (push rules) on room upgrade. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4838&quot;&gt;#4838&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;fix test_auto_create_auto_join_where_no_consent. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4886&quot;&gt;#4886&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix a bug where hs_disabled_message was sometimes not correctly enforced. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4888&quot;&gt;#4888&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug in shutdown room admin API where it would fail if a user in the room hadn&#x27;t consented to the privacy policy. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4904&quot;&gt;#4904&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug where blocked world-readable rooms were still peekable. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4908&quot;&gt;#4908&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Add a systemd setup that supports synapse workers. Contributed by Luca Corbatto. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4662&quot;&gt;#4662&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Change from TravisCI to Buildkite for CI. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4752&quot;&gt;#4752&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;When presence is disabled don&#x27;t send over replication. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4757&quot;&gt;#4757&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Minor docstring fixes for MatrixFederationAgent. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4765&quot;&gt;#4765&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Optimise EDU transmission for the federation_sender worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4770&quot;&gt;#4770&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update test_typing to use HomeserverTestCase. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4771&quot;&gt;#4771&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update URLs for riot.im icons and logos in the default notification templates. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4779&quot;&gt;#4779&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Removed unnecessary $ from some federation endpoint path regexes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4794&quot;&gt;#4794&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove link to deleted title in README. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4795&quot;&gt;#4795&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clean up read-receipt handling. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4797&quot;&gt;#4797&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add some debug about processing read receipts. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4798&quot;&gt;#4798&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clean up some replication code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4799&quot;&gt;#4799&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add some docstrings. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4815&quot;&gt;#4815&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add debug logger to try and track down #4422. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4816&quot;&gt;#4816&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make shutdown API send explanation message to room after users have been forced joined. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4817&quot;&gt;#4817&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update example_log_config.yaml. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4820&quot;&gt;#4820&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Document the &lt;code&gt;generate&lt;&#x2F;code&gt; option for the docker image. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4824&quot;&gt;#4824&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix check-newsfragment for debian-only changes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4825&quot;&gt;#4825&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add some debug logging for device list updates to help with #4828. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4828&quot;&gt;#4828&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve federation documentation, specifically .well-known support. Many thanks to @vaab. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4832&quot;&gt;#4832&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Disable captcha registration by default in unit tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4839&quot;&gt;#4839&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add stuff back to the .gitignore. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4843&quot;&gt;#4843&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clarify what registration_shared_secret allows for. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4844&quot;&gt;#4844&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Correctly log expected errors when fetching server keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4847&quot;&gt;#4847&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update install docs to explicitly state a full-chain (not just the top-level) TLS certificate must be provided to Synapse. This caused some people&#x27;s Synapse ports to appear correct in a browser but still (rightfully so) upset the federation tester. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4849&quot;&gt;#4849&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Move client read-receipt processing to federation sender worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4852&quot;&gt;#4852&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor federation TransactionQueue. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4855&quot;&gt;#4855&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Comment out most options in the generated config. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4863&quot;&gt;#4863&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix yaml library warnings by using safe_load. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4869&quot;&gt;#4869&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update Apache setup to remove location syntax. Thanks to @cwmke! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4870&quot;&gt;#4870&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reinstate test case that runs unit tests against oldest supported dependencies. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4879&quot;&gt;#4879&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update link to federation docs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4881&quot;&gt;#4881&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;fix test_auto_create_auto_join_where_no_consent. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4886&quot;&gt;#4886&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use a regular HomeServerConfig object for unit tests rater than a Mock. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4889&quot;&gt;#4889&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add some notes about tuning postgres for larger deployments. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4895&quot;&gt;#4895&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a config option for torture-testing worker replication. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4902&quot;&gt;#4902&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Log requests which are simulated by the unit tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4905&quot;&gt;#4905&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Allow newsfragments to end with exclamation marks. Exciting! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4912&quot;&gt;#4912&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor some more tests to use HomeserverTestCase. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4913&quot;&gt;#4913&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor out the state deltas portion of the user directory store and handler. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4917&quot;&gt;#4917&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix nginx example in ACME doc. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4923&quot;&gt;#4923&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use an explicit dbname for postgres connections in the tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4928&quot;&gt;#4928&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix &lt;code&gt;ClientReplicationStreamProtocol.__str__()&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4929&quot;&gt;#4929&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.99.2 released!</title>
		<published>2019-03-04T00:00:00+00:00</published>
		<updated>2019-03-04T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/03/04/synapse-0-99-2-released/" type="text/html"/>
		<id>matrix.org/blog/2019/03/04/synapse-0-99-2-released/</id>
		<content type="html">&lt;p&gt;Well now, what have we here? Synapse 0.99.2 is the latest in the 0.99.x series as we step ever closer to 1.0.&lt;&#x2F;p&gt;
&lt;p&gt;0.99.2 is an incremental release including a bunch of performance improvements, enhancements to room upgrades and generally a plethora of bug fixes.&lt;&#x2F;p&gt;
&lt;p&gt;The most important thing that admins should know is that prior to 1.0 landing later this month, &lt;strong&gt;it is essential that the federation API has a valid TLS certificate - self signed certificates will no longer be accepted.&lt;&#x2F;strong&gt; For more details see our &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;MSC1711_certificates_FAQ.md&quot;&gt;handy guide&lt;&#x2F;a&gt;. Failure to do this will result in being unable to federate with other 1.0 servers.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.99.2&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our new &lt;a href=&quot;&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page.&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;synapse-0-99-2-changelog&quot;&gt;Synapse 0.99.2 changelog&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;features&quot;&gt;Features&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Added an HAProxy example in the reverse proxy documentation. Contributed by Benoît S. (“Benpro”). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4541&quot; data-hovercard-type=&quot;issue&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4541&#x2F;hovercard&quot;&gt;#4541&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add basic optional sentry integration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4632&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4632&#x2F;hovercard&quot;&gt;#4632&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4694&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4694&#x2F;hovercard&quot;&gt;#4694&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Transfer bans on room upgrade. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4642&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4642&#x2F;hovercard&quot;&gt;#4642&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add configurable room list publishing rules. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4647&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4647&#x2F;hovercard&quot;&gt;#4647&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Support .well-known delegation when issuing certificates through ACME. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4652&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4652&#x2F;hovercard&quot;&gt;#4652&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Allow registration and login to be handled by a worker instance. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4666&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4666&#x2F;hovercard&quot;&gt;#4666&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4670&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4670&#x2F;hovercard&quot;&gt;#4670&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4682&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4682&#x2F;hovercard&quot;&gt;#4682&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reduce the overhead of creating outbound federation connections over TLS by caching the TLS client options. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4674&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4674&#x2F;hovercard&quot;&gt;#4674&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add prometheus metrics for number of outgoing EDUs, by type. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4695&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4695&#x2F;hovercard&quot;&gt;#4695&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Return correct error code when inviting a remote user to a room whose homeserver does not support the room version. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4721&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4721&#x2F;hovercard&quot;&gt;#4721&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Prevent showing rooms to other servers that were set to not federate. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4746&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4746&#x2F;hovercard&quot;&gt;#4746&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix possible exception when paginating. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4263&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4263&#x2F;hovercard&quot;&gt;#4263&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The dependency checker now correctly reports a version mismatch for optional
dependencies, instead of reporting the dependency missing. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4450&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4450&#x2F;hovercard&quot;&gt;#4450&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Set CORS headers on .well-known requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4651&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4651&#x2F;hovercard&quot;&gt;#4651&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix kicking guest users on guest access revocation in worker mode. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4667&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4667&#x2F;hovercard&quot;&gt;#4667&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix an issue in the database migration script where the
&lt;code&gt;e2e_room_keys.is_verified&lt;&#x2F;code&gt; column wasn&#x27;t considered as
a boolean. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4680&quot; data-hovercard-type=&quot;issue&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4680&#x2F;hovercard&quot;&gt;#4680&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix TaskStopped exceptions in logs when outbound requests time out. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4690&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4690&#x2F;hovercard&quot;&gt;#4690&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix ACME config for python 2. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4717&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4717&#x2F;hovercard&quot;&gt;#4717&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix paginating over federation persisting incorrect state. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4718&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4718&#x2F;hovercard&quot;&gt;#4718&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Run &lt;code&gt;black&lt;&#x2F;code&gt; to reformat user directory code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4635&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4635&#x2F;hovercard&quot;&gt;#4635&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reduce number of exceptions we log. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4643&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4643&#x2F;hovercard&quot;&gt;#4643&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4668&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4668&#x2F;hovercard&quot;&gt;#4668&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Introduce upsert batching functionality in the database layer. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4644&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4644&#x2F;hovercard&quot;&gt;#4644&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix various spelling mistakes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4657&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4657&#x2F;hovercard&quot;&gt;#4657&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Cleanup request exception logging. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4669&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4669&#x2F;hovercard&quot;&gt;#4669&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4737&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4737&#x2F;hovercard&quot;&gt;#4737&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4738&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4738&#x2F;hovercard&quot;&gt;#4738&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve replication performance by reducing cache invalidation traffic. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4671&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4671&#x2F;hovercard&quot;&gt;#4671&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4715&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4715&#x2F;hovercard&quot;&gt;#4715&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4748&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4748&#x2F;hovercard&quot;&gt;#4748&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Test against Postgres 9.5 as well as 9.4. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4676&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4676&#x2F;hovercard&quot;&gt;#4676&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Run unit tests against python 3.7. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4677&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4677&#x2F;hovercard&quot;&gt;#4677&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Attempt to clarify installation instructions&#x2F;config. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4681&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4681&#x2F;hovercard&quot;&gt;#4681&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clean up gitignores. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4688&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4688&#x2F;hovercard&quot;&gt;#4688&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Minor tweaks to acme docs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4689&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4689&#x2F;hovercard&quot;&gt;#4689&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve the logging in the pusher process. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4691&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4691&#x2F;hovercard&quot;&gt;#4691&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Better checks on newsfragments. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4698&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4698&#x2F;hovercard&quot;&gt;#4698&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4750&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4750&#x2F;hovercard&quot;&gt;#4750&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Avoid some redundant work when processing read receipts. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4706&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4706&#x2F;hovercard&quot;&gt;#4706&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Run &lt;code&gt;push_receipts_to_remotes&lt;&#x2F;code&gt; as background job. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4707&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4707&#x2F;hovercard&quot;&gt;#4707&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add prometheus metrics for number of badge update pushes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4709&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4709&#x2F;hovercard&quot;&gt;#4709&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reduce pusher logging on startup (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4716&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4716&#x2F;hovercard&quot;&gt;#4716&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Don&#x27;t log exceptions when failing to fetch remote server keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4722&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4722&#x2F;hovercard&quot;&gt;#4722&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Correctly proxy exception in frontend_proxy worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4723&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4723&#x2F;hovercard&quot;&gt;#4723&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add database version to phonehome stats. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4753&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4753&#x2F;hovercard&quot;&gt;#4753&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.99.1.1 Released!</title>
		<published>2019-02-14T00:00:00+00:00</published>
		<updated>2019-02-14T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/02/14/synapse-0-99-1-1-released/" type="text/html"/>
		<id>matrix.org/blog/2019/02/14/synapse-0-99-1-1-released/</id>
		<content type="html">&lt;p&gt;Hey, everyone, today is the day we release Synapse 0.99.1.1&lt;&#x2F;p&gt;
&lt;p&gt;This release contains improved ACME support to make it even easier to get going with TLS certs on your federation end points, plus some tweaks to make the room version upgrade path easier.&lt;&#x2F;p&gt;
&lt;p&gt;Just as a reminder that the 0.99.x series is precursor for our 1.0 release (which will land in early March, exact date to be confirmed) - it is really important that all server admins are aware that self signed certificates on the Server to Server API will no longer be accepted by &amp;gt;= Synapse 1.0. If you have not already done so, now is the time to configure your certificate. For more info see our &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;MSC1711_certificates_FAQ.md&quot;&gt;FAQ&lt;&#x2F;a&gt; and if you get stuck come and join us in &lt;a href=&quot;https:&#x2F;&#x2F;matrix.to&#x2F;#&#x2F;#synapse:matrix.org&quot;&gt;#Synapse.&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.99.1.1&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our new &lt;a href=&quot;&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page.&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;synapse-0-99-1-1-changelog&quot;&gt;Synapse 0.99.1.1 Changelog&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix &quot;TypeError: &#x27;&amp;gt;&#x27; not supported&quot; when starting without an existing certificate.
Fix a bug where an existing certificate would be reprovisoned every day. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4648&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4648&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4648&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;synapse-0-99-1-changelog&quot;&gt;Synapse 0.99.1 Changelog&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;features&quot;&gt;Features&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Include m.room.encryption on invites by default (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3902&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3902&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3902&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Federation OpenID listener resource can now be activated even if federation is disabled (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4420&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4420&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4420&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse&#x27;s ACME support will now correctly reprovision a certificate that approaches its expiry while Synapse is running. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4522&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4522&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4522&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add ability to update backup versions (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4580&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4580&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4580&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Allow the &quot;unavailable&quot; presence status for &#x2F;sync.
This change makes Synapse compliant with r0.4.0 of the Client-Server specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4592&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4592&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4592&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;There is no longer any need to specify &lt;code&gt;no_tls&lt;&#x2F;code&gt;: it is inferred from the absence of TLS listeners (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4613&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4613&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4613&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4615&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4615&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4615&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4617&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4617&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4617&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4636&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4636&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4636&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The default configuration no longer requires TLS certificates. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4614&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4614&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4614&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Copy over room federation ability on room upgrade. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4530&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4530&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4530&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix noisy &quot;twisted.internet.task.TaskStopped&quot; errors in logs (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4546&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4546&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4546&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse is now tolerant of the &lt;code&gt;tls_fingerprints&lt;&#x2F;code&gt; option being None or not specified. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4589&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4589&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4589&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix &#x27;no unique or exclusion constraint&#x27; error (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4591&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4591&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4591&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Transfer Server ACLs on room upgrade. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4608&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4608&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4608&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix failure to start when not TLS certificate was given even if TLS was disabled. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4618&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4618&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4618&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix self-signed cert notice from generate-config. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4625&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4625&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4625&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix performance of &lt;code&gt;user_ips&lt;&#x2F;code&gt; table deduplication background update (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4626&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4626&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4626&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4627&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4627&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4627&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Change the user directory state query to use a filtered call to the db instead of a generic one. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4462&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4462&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4462&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reject federation transactions if they include more than 50 PDUs or 100 EDUs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4513&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4513&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4513&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reduce duplication of &lt;code&gt;synapse.app&lt;&#x2F;code&gt; code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4567&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4567&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4567&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix docker upload job to push -py2 images. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4576&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4576&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4576&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add port configuration information to ACME instructions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4578&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4578&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4578&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update MSC1711 FAQ to clarify .well-known usage (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4584&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4584&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4584&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clean up default listener configuration (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4586&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4586&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4586&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clarifications for reverse proxy docs (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4607&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4607&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4607&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Move ClientTLSOptionsFactory init out of &lt;code&gt;refresh_certificates&lt;&#x2F;code&gt; (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4611&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4611&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4611&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fail cleanly if listener config lacks a &#x27;port&#x27; (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4616&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4616&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4616&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove redundant entries from docker config (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4619&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4619&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4619&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;README updates (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4621&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4621&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4621&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.99.0</title>
		<published>2019-02-05T00:00:00+00:00</published>
		<updated>2019-02-05T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/02/05/synapse-0-99-0/" type="text/html"/>
		<id>matrix.org/blog/2019/02/05/synapse-0-99-0/</id>
		<content type="html">&lt;p&gt;Hey hey, Synapse 0.99.0 is here!&lt;&#x2F;p&gt;
&lt;p&gt;You may have heard that we recently published the first stable release of the &lt;a href=&quot;&#x2F;docs&#x2F;spec&#x2F;server_server&#x2F;r0.1.0.html&quot;&gt;Server to Server Spec (r0.1)&lt;&#x2F;a&gt;. The spec makes some changes which are not compatible with the protocol of the past - particularly, &lt;strong&gt;self-signed certificates are no longer valid for homeservers. &lt;&#x2F;strong&gt;Synapse 1.0.0 will be compliant with r0.1 and the goal of Synapse 0.99.0 is to act as a stepping stone to Synapse 1.0. Synapse 0.99.0 supports the r0.1 release of the server to server specification, but is compatible with both the legacy Matrix federation behaviour (pre-r0.1) as well as post-r0.1 behaviour, in order to allow for a smooth upgrade across the federation.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;It is critical that all admins upgrade to 0.99.0 and configure a valid TLS certificate. &lt;&#x2F;strong&gt;Admins will have 1 month to do so, after which 1.0.0 will be released and those servers without a valid certificate will no longer be able to federate with &amp;gt;= 1.0.0 servers.&lt;&#x2F;p&gt;
&lt;p&gt;First of all, please don&#x27;t panic :) We have taken steps to make this process as simple as possible - specifically implementing ACME support to allow servers to automatically generate free Let&#x27;s Encrypt certificates if you choose to. What&#x27;s more, it is not necessary to add the certificate right away, you have at least a month to get set up.&lt;&#x2F;p&gt;
&lt;p&gt;For more details on exactly what you need to do (and also why this change is essential), we have provided an &lt;strong&gt;extensive &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;MSC1711_certificates_FAQ.md&quot;&gt;FAQ&lt;&#x2F;a&gt;&lt;&#x2F;strong&gt; as well as the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v0.99.0&#x2F;UPGRADE.rst&quot;&gt;Upgrade notes for Synapse&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.99.0&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our new &lt;a href=&quot;&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page.&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;This was a huge effort! Congratulations to all involved, especially those of you in the community who contributed to spec MSCs and tested our release candidates. Thank you for bearing with us as we move the whole public Matrix Federation onto r0.1 compliant servers.&lt;&#x2F;p&gt;
&lt;p&gt;Onwards!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;changelog&quot;&gt;Changelog&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse v0.99.x is a precursor to the upcoming Synapse v1.0 release. It contains foundational changes to room architecture and the federation security model necessary to support the upcoming r0 release of the Server to Server API.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
 	&lt;li&gt;Synapse&#x27;s cipher string has been updated to require ECDH key exchange. Configuring and generating dh_params is no longer required, and they will be ignored. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4229&quot;&gt;#4229&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse can now automatically provision TLS certificates via ACME (the protocol used by CAs like Let&#x27;s Encrypt). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4384&quot;&gt;#4384&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4492&quot;&gt;#4492&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4525&quot;&gt;#4525&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4572&quot;&gt;#4572&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4564&quot;&gt;#4564&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4566&quot;&gt;#4566&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4547&quot;&gt;#4547&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4557&quot;&gt;#4557&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Implement MSC1708 (.well-known routing for server-server federation) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4408&quot;&gt;#4408&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4409&quot;&gt;#4409&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4426&quot;&gt;#4426&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4427&quot;&gt;#4427&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4428&quot;&gt;#4428&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4464&quot;&gt;#4464&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4468&quot;&gt;#4468&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4487&quot;&gt;#4487&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4488&quot;&gt;#4488&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4489&quot;&gt;#4489&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4497&quot;&gt;#4497&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4511&quot;&gt;#4511&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4516&quot;&gt;#4516&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4520&quot;&gt;#4520&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4521&quot;&gt;#4521&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4539&quot;&gt;#4539&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4542&quot;&gt;#4542&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4544&quot;&gt;#4544&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Search now includes results from predecessor rooms after a room upgrade. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4415&quot;&gt;#4415&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Config option to disable requesting MSISDN on registration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4423&quot;&gt;#4423&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a metric for tracking event stream position of the user directory. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4445&quot;&gt;#4445&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Support exposing server capabilities in CS API (MSC1753, MSC1804) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4472&quot;&gt;#4472&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;commit&#x2F;81b7e7eed323f55d6550e7a270a9dc2c4c7b0fe0&quot;&gt;81b7e7eed&lt;&#x2F;a&gt;))&lt;&#x2F;li&gt;
 	&lt;li&gt;Add support for room version 3 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4483&quot;&gt;#4483&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4499&quot;&gt;#4499&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4515&quot;&gt;#4515&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4523&quot;&gt;#4523&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4535&quot;&gt;#4535&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse will now reload TLS certificates from disk upon SIGHUP. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4495&quot;&gt;#4495&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4524&quot;&gt;#4524&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The matrixdotorg&#x2F;synapse Docker images now use Python 3 by default. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4558&quot;&gt;#4558&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
 	&lt;li&gt;Prevent users with access tokens predating the introduction of device IDs from creating spurious entries in the user_ips table. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4369&quot;&gt;#4369&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix typo in ALL_USER_TYPES definition to ensure type is a tuple (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4392&quot;&gt;#4392&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix high CPU usage due to remote devicelist updates (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4397&quot;&gt;#4397&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix potential bug where creating or joining a room could fail (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4404&quot;&gt;#4404&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug when rejecting remote invites (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4405&quot;&gt;#4405&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4527&quot;&gt;#4527&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix incorrect logcontexts after a Deferred was cancelled (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4407&quot;&gt;#4407&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Ensure encrypted room state is persisted across room upgrades. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4411&quot;&gt;#4411&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Copy over whether a room is a direct message and any associated room tags on room upgrade. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4412&quot;&gt;#4412&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix None guard in calling config.server.is_threepid_reserved (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4435&quot;&gt;#4435&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Don&#x27;t send IP addresses as SNI (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4452&quot;&gt;#4452&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix UnboundLocalError in post_urlencoded_get_json (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4460&quot;&gt;#4460&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a timeout to filtered room directory queries. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4461&quot;&gt;#4461&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Workaround for login error when using both LDAP and internal authentication. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4486&quot;&gt;#4486&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix a bug where setting a relative consent directory path would cause a crash. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4512&quot;&gt;#4512&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h2&gt;
&lt;ul&gt;
 	&lt;li&gt;Synapse no longer generates self-signed TLS certificates when generating a configuration file. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4509&quot;&gt;#4509&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
 	&lt;li&gt;Update debian installation instructions (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4526&quot;&gt;#4526&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
 	&lt;li&gt;Synapse will now take advantage of native UPSERT functionality in PostgreSQL 9.5+ and SQLite 3.24+. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4306&quot;&gt;#4306&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4459&quot;&gt;#4459&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4466&quot;&gt;#4466&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4471&quot;&gt;#4471&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4477&quot;&gt;#4477&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4505&quot;&gt;#4505&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update README to use the new virtualenv everywhere (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4342&quot;&gt;#4342&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add better logging for unexpected errors while sending transactions (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4368&quot;&gt;#4368&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Apply a unique index to the user_ips table, preventing duplicates. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4370&quot;&gt;#4370&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4432&quot;&gt;#4432&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4434&quot;&gt;#4434&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Silence travis-ci build warnings by removing non-functional python3.6 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4377&quot;&gt;#4377&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix a comment in the generated config file (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4387&quot;&gt;#4387&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add ground work for implementing future federation API versions (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4390&quot;&gt;#4390&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update dependencies on msgpack and pymacaroons to use the up-to-date packages. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4399&quot;&gt;#4399&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Tweak codecov settings to make them less loud. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4400&quot;&gt;#4400&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Implement server support for MSC1794 - Federation v2 Invite API (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4402&quot;&gt;#4402&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;debian package: symlink to explicit python version (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4433&quot;&gt;#4433&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add infrastructure to support different event formats (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4437&quot;&gt;#4437&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4447&quot;&gt;#4447&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4448&quot;&gt;#4448&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4470&quot;&gt;#4470&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4481&quot;&gt;#4481&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4482&quot;&gt;#4482&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4493&quot;&gt;#4493&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4494&quot;&gt;#4494&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4496&quot;&gt;#4496&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4510&quot;&gt;#4510&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4514&quot;&gt;#4514&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Generate the debian config during build (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4444&quot;&gt;#4444&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clarify documentation for the &lt;code&gt;public_baseurl&lt;&#x2F;code&gt; config param (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4458&quot;&gt;#4458&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4498&quot;&gt;#4498&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix quoting for allowed_local_3pids example config (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4476&quot;&gt;#4476&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove deprecated --process-dependency-links option from UPGRADE.rst (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4485&quot;&gt;#4485&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make it possible to set the log level for tests via an environment variable (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4506&quot;&gt;#4506&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reduce the log level of linearizer lock acquirement to DEBUG. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4507&quot;&gt;#4507&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix code to comply with linting in PyFlakes 3.7.1. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4519&quot;&gt;#4519&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add some debug for membership syncing issues (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4538&quot;&gt;#4538&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Docker: only copy what we need to the build image (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4562&quot;&gt;#4562&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Critical Security Update: Synapse 0.34.0.1&#x2F;Synapse 0.34.1.1</title>
		<published>2019-01-10T00:00:00+00:00</published>
		<updated>2019-01-10T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2019/01/10/critical-security-update-synapse-0-34-0-1-synapse-0-34-1-1/" type="text/html"/>
		<id>matrix.org/blog/2019/01/10/critical-security-update-synapse-0-34-0-1-synapse-0-34-1-1/</id>
		<content type="html">&lt;p&gt;After releasing Synapse v0.34.1, we have become aware of a security vulnerability affecting all previous versions (&lt;a href=&quot;http:&#x2F;&#x2F;cve.mitre.org&#x2F;cgi-bin&#x2F;cvename.cgi?name=CVE-2019-5885&quot;&gt;CVE-2019-5885&lt;&#x2F;a&gt;). v0.34.1 closed the vulnerability but, in some cases, caused users to be logged out of their clients, so we do not recommend v0.34.1 for production use.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;b&gt;Today we release two mitigating versions v0.34.0.1 and v0.34.1.1&lt;&#x2F;b&gt;. Both versions close the vulnerability and will not cause users to be logged out. &lt;b&gt;All installations should be upgraded to one or other immediately.&lt;&#x2F;b&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li style=&quot;font-weight: 400;&quot;&gt;Admins who would otherwise upgrade to v0.34.1 (or those that have already done so) should upgrade to v0.34.1.1. 
&lt;&#x2F;li&gt;
 	&lt;li style=&quot;font-weight: 400;&quot;&gt;Admins on v0.34.0, who do not wish to bring in new non-security related behaviour, should upgrade to v0.34.0.1.
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;You can get the new updates for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.34.0.1&quot;&gt;v0.34.0.1&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.34.1.1&quot;&gt;v0.34.1.1&lt;&#x2F;a&gt; here or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. See also our &lt;a href=&quot;&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page.&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;We will publish more details of the vulnerability once admins have had a chance to upgrade. To our knowledge the vulnerability has not been exploited in the wild.&lt;&#x2F;p&gt;
&lt;p&gt;Many thanks for your patience, we are moving ever closer to Synapse reaching v1.0, and fixes like this one edge us ever closer.&lt;&#x2F;p&gt;
&lt;p&gt;Thanks also to the package maintainers who have coordinated with us to ensure distro packages are available for a speedy upgrade!&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.34.0.1&quot;&gt;Synapse v0.34.0.1 Changelog&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
 	&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.34.1.1&quot;&gt;Synapse v0.34.1.1 Changelog&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.34.0 released!</title>
		<published>2018-12-20T00:00:00+00:00</published>
		<updated>2018-12-20T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2018/12/20/synapse-0-34-0-released/" type="text/html"/>
		<id>matrix.org/blog/2018/12/20/synapse-0-34-0-released/</id>
		<content type="html">&lt;p&gt;Folks this is a big day for us at Matrix Towers, because today we release 0.34.0.&lt;&#x2F;p&gt;
&lt;p&gt;The big news for 0.34.0 is that we now &lt;strong&gt;recommend Python 3 for production use&lt;&#x2F;strong&gt; and have been running matrix.org under Python 3 for the past month.&lt;&#x2F;p&gt;
&lt;p&gt;Performance improvements have been marked, in some contexts we have seen 50% reductions in RAM and CPU usage. Here are some illustrative graphs to get you going but look out for a dedicated post delving into much more detail on the port. You can also see a Matrix Live interview with the project lead Amber (hawkowl) &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=Ad3oqEo5leM&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;&#x2F;blog&#x2F;wp-content&#x2F;uploads&#x2F;2018&#x2F;12&#x2F;image2.png&quot;&gt;&lt;img class=&quot;alignnone wp-image-3822 size-large&quot; src=&quot;&#x2F;blog&#x2F;wp-content&#x2F;uploads&#x2F;2018&#x2F;12&#x2F;image2-1024x296.png&quot; alt=&quot;&quot; width=&quot;1024&quot; height=&quot;296&quot; &#x2F;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Matrix.org federation reader workers, the big drops signify roll over to python 3&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;&#x2F;blog&#x2F;wp-content&#x2F;uploads&#x2F;2018&#x2F;12&#x2F;image1.png&quot;&gt;&lt;img class=&quot;alignnone size-large wp-image-3824&quot; src=&quot;&#x2F;blog&#x2F;wp-content&#x2F;uploads&#x2F;2018&#x2F;12&#x2F;image1-1024x237.png&quot; alt=&quot;&quot; width=&quot;1024&quot; height=&quot;237&quot; &#x2F;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Synapse master on matrix.org, again the drop in RAM signifies the roll over to python 3&lt;&#x2F;p&gt;
&lt;p&gt;Many thanks to Amber for leading the effort, Rich and Erik for providing support as well as Notafile and Krombel from the community for pushing this effort right from the early days of the project.&lt;&#x2F;p&gt;
&lt;p&gt;If that wasn&#x27;t enough, 0.34.0 also all the usual bug fixes and perf improvements. In particular the media repository now no longer fails to decode UTF-8 filenames when downloading remote media and auto joining rooms now work on servers with consent requirements enabled.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.34.0&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our new &lt;a href=&quot;&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page.&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;In particular, if you want to run Synapse 0.34.0 on Python 3 take a look at the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v0.34.0&#x2F;UPGRADE.rst#upgrading-to-v0340&quot;&gt;upgrade notes&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;synapse-0-34-0-changelog&quot;&gt;Synapse 0.34.0 changelog&lt;&#x2F;h3&gt;
&lt;p&gt;Synapse 0.34.0 is the first release to fully support Python 3. Synapse will now run on Python versions 3.5 or 3.6 (as well as 2.7). Support for Python 3.7 remains experimental.&lt;&#x2F;p&gt;
&lt;p&gt;We recommend upgrading to Python 3, but make sure to read the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v0.34.0&#x2F;UPGRADE.rst#upgrading-to-v0340&quot;&gt;upgrade notes&lt;&#x2F;a&gt; when doing so.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;features&quot;&gt;Features&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Add &#x27;sandbox&#x27; to CSP for media reprository (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4284&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4284&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4284&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make the new landing page prettier. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4294&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4294&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4294&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix deleting E2E room keys when using old SQLite versions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4295&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4295&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4295&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a welcome page for the client API port. Credit to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;krombel&quot; data-hovercard-type=&quot;user&quot; data-hovercard-url=&quot;&#x2F;hovercards?user_id=11167142&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@krombel&lt;&#x2F;a&gt;! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4289&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4289&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4289&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove Matrix console from the default distribution (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4290&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4290&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4290&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add option to track MAU stats (but not limit people) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3830&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3830&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3830&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add an option to enable recording IPs for appservice users (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3831&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3831&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3831&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Rename login type &lt;code&gt;m.login.cas&lt;&#x2F;code&gt; to &lt;code&gt;m.login.sso&lt;&#x2F;code&gt; (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4220&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4220&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4220&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add an option to disable search for homeservers that may not be interested in it. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4230&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4230&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4230&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Pushrules can now again be made with non-ASCII rule IDs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4165&quot; data-hovercard-type=&quot;issue&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4165&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4165&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The media repository now no longer fails to decode UTF-8 filenames when downloading remote media. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4176&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4176&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4176&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;URL previews now correctly decode non-UTF-8 text if the header contains a &lt;code&gt;&amp;lt;meta http-equiv=&quot;Content-Type&quot;&lt;&#x2F;code&gt; header. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4183&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4183&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4183&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix an issue where public consent URLs had two slashes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4192&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4192&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4192&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fallback auth now accepts the session parameter on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4197&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4197&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4197&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove riot.im from the list of trusted Identity Servers in the default configuration (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4207&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4207&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4207&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;fix start up failure when mau_limit_reserved_threepids set and db is postgres (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4211&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4211&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4211&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix auto join failures for servers that require user consent (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4223&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4223&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4223&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix exception caused by non-ascii event IDs (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4241&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4241&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4241&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Pushers can now be unsubscribed from on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4250&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4250&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4250&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix UnicodeDecodeError when postgres is configured to give non-English errors (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4253&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4253&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4253&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Debian packages utilising a virtualenv with bundled dependencies can now be built. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4212&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4212&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4212&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Disable pager when running git-show in CI (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4291&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4291&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4291&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;A coveragerc file has been added. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4180&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4180&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4180&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a GitHub pull request template and add multiple issue templates (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4182&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4182&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4182&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update README to reflect the fact that &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;1491&quot; data-hovercard-type=&quot;issue&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;1491&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#1491&lt;&#x2F;a&gt; is fixed (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4188&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4188&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4188&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Run the AS senders as background processes to fix warnings (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4189&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4189&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4189&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add some diagnostics to the tests to detect logcontext problems (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4190&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4190&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4190&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add missing &lt;code&gt;jpeg&lt;&#x2F;code&gt; package prerequisite for OpenBSD in README. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4193&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4193&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4193&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a note saying you need to manually reclaim disk space after using the Purge History API (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4200&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4200&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4200&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;More logcontext checking in unittests (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4205&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4205&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4205&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Ignore &lt;code&gt;__pycache__&lt;&#x2F;code&gt; directories in the database schema folder (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4214&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4214&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4214&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add note to UPGRADE.rst about removing riot.im from list of trusted identity servers (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4224&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4224&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4224&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Added automated coverage reporting to CI. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4225&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4225&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4225&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Garbage-collect after each unit test to fix logcontext leaks (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4227&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4227&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4227&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;add more detail to logging regarding &quot;More than one row matched&quot; error (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4234&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4234&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4234&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Drop sent_transactions table (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4244&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4244&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4244&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a basic .editorconfig (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4257&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4257&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4257&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update README.rst and UPGRADE.rst for Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4260&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4260&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4260&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove obsolete &lt;code&gt;verbose&lt;&#x2F;code&gt; and &lt;code&gt;log_file&lt;&#x2F;code&gt; settings from &lt;code&gt;homeserver.yaml&lt;&#x2F;code&gt; for Docker image. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4261&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4261&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4261&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.33.9 is here!</title>
		<published>2018-11-20T00:00:00+00:00</published>
		<updated>2018-11-20T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2018/11/20/synapse-0-33-9-is-here/" type="text/html"/>
		<id>matrix.org/blog/2018/11/20/synapse-0-33-9-is-here/</id>
		<content type="html">&lt;p&gt;Well here you are then, the 9th episode in the Synapse 0.33.x series.&lt;&#x2F;p&gt;
&lt;p&gt;Features wise, 0.33.9 contains a change to the way that GDPR consent works under the hood. It is now plumbed in to the login flow (rather than following immediately afterwards) such that it does not inadvertently break on-boarding. This is part of a broader set of changes that span Synapse and Riot to improve initial first impressions of using matrix.&lt;&#x2F;p&gt;
&lt;p&gt;Separately we now have support for room version upgrades which is pre-requisite for rolling out the new state resolution algorithm, come and join us in #teststateresv2:jki.re if you would like to help us test.&lt;&#x2F;p&gt;
&lt;p&gt;Finally we&#x27;ve spent a bunch of time further improving perf especially in and around reducing device ids federation traffic.&lt;&#x2F;p&gt;
&lt;p&gt;I know I say it every time, but full python 3 support is really really close now, matrix.org is now running entirely on py3 and seeing some amazing perf improvements - the remaining blocker is getting py3 deb packages ready and then we&#x27;ll ship an official python 3 release. There will also be a blog post to explain what we&#x27;ve been up to and what to expect perf wise.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.9&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our new &lt;a href=&quot;&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page.&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h3 id=&quot;synapse-0-33-9-changelog&quot;&gt;Synapse 0.33.9 changelog&lt;&#x2F;h3&gt;
&lt;h4 id=&quot;features&quot;&gt;Features&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Include flags to optionally add &lt;code&gt;m.login.terms&lt;&#x2F;code&gt; to the registration flow when consent tracking is enabled. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4004&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4004&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4004&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4133&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4133&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4133&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4142&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4142&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4142&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4184&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4184&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4184&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Support for replacing rooms with new ones (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4091&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4091&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4091&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4099&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4099&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4099&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4100&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4100&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4100&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4101&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4101&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4101&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix exceptions when using the email mailer on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4095&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4095&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4095&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix e2e key backup with more than 9 backup versions (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4113&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4113&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4113&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Searches that request profile info now no longer fail with a 500. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4122&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4122&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4122&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;fix return code of empty key backups (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4123&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4123&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4123&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;If the typing stream ID goes backwards (as on a worker when the master restarts), the worker&#x27;s typing handler will no longer erroneously report rooms containing new typing events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4127&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4127&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4127&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix table lock of device_lists_remote_cache which could freeze the application (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4132&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4132&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4132&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix exception when using state res v2 algorithm (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4135&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4135&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4135&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Generating the user consent URI no longer fails on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4140&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4140&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4140&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4163&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4163&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4163&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Loading URL previews from the DB cache on Postgres will no longer cause Unicode type errors when responding to the request, and URL previews will no longer fail if the remote server returns a Content-Type header with the chartype in quotes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4157&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4157&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4157&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The hash_password script now works on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4161&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4161&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4161&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix noop checks when updating device keys, reducing spurious device list update notifications. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4164&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4164&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4164&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;The disused and un-specced identicon generator has been removed. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4106&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4106&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4106&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The obsolete and non-functional &#x2F;pull federation endpoint has been removed. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4118&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4118&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4118&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The deprecated v1 key exchange endpoints have been removed. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4119&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4119&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4119&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse will no longer fetch keys using the fallback deprecated v1 key exchange method and will now always use v2. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4120&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4120&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4120&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix build of Docker image with docker-compose (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3778&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3778&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3778&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Delete unreferenced state groups during history purge (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4006&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4006&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4006&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The &quot;Received rdata&quot; log messages on workers is now logged at DEBUG, not INFO. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4108&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4108&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4108&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reduce replication traffic for device lists (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4109&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4109&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4109&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix &lt;code&gt;synapse_replication_tcp_protocol_*_commands&lt;&#x2F;code&gt; metric label to be full command name, rather than just the first character (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4110&quot; data-hovercard-type=&quot;issue&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4110&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4110&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Log some bits about room creation (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4121&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4121&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4121&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix &lt;code&gt;tox&lt;&#x2F;code&gt; failure on old systems (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4124&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4124&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4124&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add STATE_V2_TEST room version (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4128&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4128&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4128&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clean up event accesses and tests (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4137&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4137&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4137&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The default logging config will now set an explicit log file encoding of UTF-8. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4138&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4138&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4138&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add helpers functions for getting prev and auth events of an event (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4139&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4139&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4139&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add some tests for the HTTP pusher. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4149&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4149&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4149&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;add purge_history.sh and purge_remote_media.sh scripts to contrib&#x2F; (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4155&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4155&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4155&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;HTTP tests have been refactored to contain less boilerplate. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4156&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4156&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4156&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Drop incoming events from federation for unknown rooms (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4165&quot; data-hovercard-type=&quot;issue&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4165&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4165&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse v0.33.8 is here!</title>
		<published>2018-11-01T00:00:00+00:00</published>
		<updated>2018-11-01T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2018/11/01/synapse-v0-33-8-is-here/" type="text/html"/>
		<id>matrix.org/blog/2018/11/01/synapse-v0-33-8-is-here/</id>
		<content type="html">&lt;p&gt;Wowzers - our 8th dot release for v0.33!&lt;&#x2F;p&gt;
&lt;p&gt;This time we have a bunch of bug fixes and db performance improvements as well as better support for auto-join rooms and the ability for admins to limit who can create rooms aliases.&lt;&#x2F;p&gt;
&lt;p&gt;v0.33.8 also contains more python 3 fixes: we are running most of matrix.org on python 3 as of right now and seeing some pretty impressive performance improvements. Look out for Hawkowl&#x27;s write up coming soon.&lt;&#x2F;p&gt;
&lt;p&gt;For those interested in what we are working on right now, take a look at our &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;orgs&#x2F;matrix-org&#x2F;projects&#x2F;2&quot;&gt;task board&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.8&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;synapse-0-33-8-changelog&quot;&gt;Synapse 0.33.8 changelog&lt;&#x2F;h3&gt;
&lt;h4 id=&quot;features&quot;&gt;Features&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Servers with auto-join rooms will now automatically create those rooms when the first user registers (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3975&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3975&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3975&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add config option to control alias creation (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4051&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4051&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4051&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The register_new_matrix_user script is now ported to Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4085&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4085&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4085&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Configure Docker image to listen on both ipv4 and ipv6. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4089&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4089&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4089&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix HTTP error response codes for federated group requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3969&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3969&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3969&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix issue where Python 3 users couldn&#x27;t paginate &#x2F;publicRooms (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4046&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4046&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4046&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix URL previewing to work in Python 3.7 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4050&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4050&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4050&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;synctl will use the right python executable to run worker processes (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4057&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4057&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4057&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Manhole now works again on Python 3, instead of failing with a &quot;couldn&#x27;t match all kex parts&quot; when connecting. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4060&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4060&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4060&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4067&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4067&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4067&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix some metrics being racy and causing exceptions when polled by Prometheus. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4061&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4061&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4061&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug which prevented email notifications from being sent unless an absolute path was given for &lt;code&gt;email_templates&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4068&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4068&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4068&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Correctly account for cpu usage by background threads (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4074&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4074&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4074&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix race condition where config defined reserved users were not being added to
the monthly active user list prior to the homeserver reactor firing up (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4081&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4081&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4081&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug which prevented backslashes being used in event field filters (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4083&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4083&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4083&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Add information about the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;spantaleev&#x2F;matrix-docker-ansible-deploy&quot;&gt;matrix-docker-ansible-deploy&lt;&#x2F;a&gt; playbook (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3698&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3698&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3698&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add initial implementation of new state resolution algorithm (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3786&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3786&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3786&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reduce database load when fetching state groups (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4011&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4011&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4011&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Various cleanups in the federation client code (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4031&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4031&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4031&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Run the CircleCI builds in docker containers (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4041&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4041&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4041&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Only colourise synctl output when attached to tty (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4049&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4049&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4049&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor room alias creation code (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4063&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4063&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4063&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make the Python scripts in the top-level scripts folders meet pep8 and pass flake8. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4068&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4068&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4068&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The README now contains example for the Caddy web server. Contributed by steamp0rt. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4072&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4072&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4072&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add psutil as an explicit dependency (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4073&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4073&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4073&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clean up threading and logcontexts in pushers (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4075&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4075&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4075&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Correctly manage logcontexts during startup to fix some &quot;Unexpected logging context&quot; warnings (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4076&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4076&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4076&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Give some more things logcontexts (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4077&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4077&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4077&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clean up some bits of code which were flagged by the linter (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4082&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4082&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4082&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.33.7 released!</title>
		<published>2018-10-18T00:00:00+00:00</published>
		<updated>2018-10-18T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2018/10/18/synapse-0-33-7-released/" type="text/html"/>
		<id>matrix.org/blog/2018/10/18/synapse-0-33-7-released/</id>
		<content type="html">&lt;p&gt;Hey ho, let&#x27;s go. Synapse 0.33.7 has arrived.&lt;&#x2F;p&gt;
&lt;p&gt;Regular readers will know how close we are to a full python 3 release. We are not quite there yet but 0.33.7 has support for Synapse under worker mode and we&#x27;ve running it on matrix.org this week. We need more time to conclusively gauge performance improvements but the Synchrotron workers are running with 33% less RAM. Thanks to everyone who has been running their servers under py3, if you do spot anything unusual just let us know. Once we&#x27;ve been running it a bit longer on matrix.org, we&#x27;ll cut a 0.34.0 release with a recommendation that one and all upgrade to python 3.&lt;&#x2F;p&gt;
&lt;p&gt;Aside from that this release contains support for server side end to end key backups, paving the way for client side support in Riot and Rich continues his long running federation bug squash-a-thon which should help with a whole host of federation snafus.&lt;&#x2F;p&gt;
&lt;p&gt;Up next on the horizon is returning in earnest to getting the server to server r0 spec out starting with shipping our brand new super shiny state resolution algorithm.&lt;&#x2F;p&gt;
&lt;p&gt;As a final point, for those of you that deploy from git checkout or a snapshot url and have email notifications enabled please take a look warning in the change log.&lt;&#x2F;p&gt;
&lt;p&gt;As a final final point #synapse:matrix.org is now an officially supported room, aimed at Synapse admins. If you&#x27;ve not done so already please do drop by and say Hi.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.7&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Onwards!&lt;&#x2F;p&gt;
&lt;h3 id=&quot;synapse-0-33-7-change-log&quot;&gt;Synapse 0.33.7 Change Log&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Warning&lt;&#x2F;strong&gt;: This release removes the example email notification templates from &lt;code&gt;res&#x2F;templates&lt;&#x2F;code&gt; (they are now internal to the python package). This should only affect you if you (a) deploy your Synapse instance from a git checkout or a github snapshot URL, and (b) have email notifications enabled.&lt;&#x2F;p&gt;
&lt;p&gt;If you have email notifications enabled, you should ensure that &lt;code&gt;email.template_dir&lt;&#x2F;code&gt; is either configured to point at a directory where you have installed customised templates, or leave it unset to use the default templates.&lt;&#x2F;p&gt;
&lt;p&gt;The configuration parser will try to detect the situation where &lt;code&gt;email.template_dir&lt;&#x2F;code&gt; is incorrectly set to &lt;code&gt;res&#x2F;templates&lt;&#x2F;code&gt; and do the right thing, but will warn about this.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;features&quot;&gt;Features&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Ship the example email templates as part of the package (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4052&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4052&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4052&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add support for end-to-end key backup (MSC1687) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4019&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4019&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4019&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix bug which made get_missing_events return too few events (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4045&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4045&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4045&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug in event persistence logic which caused &#x27;NoneType is not iterable&#x27; (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3995&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3995&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3995&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix exception in background metrics collection (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3996&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3996&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3996&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix exception handling in fetching remote profiles (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3997&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3997&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3997&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix handling of rejected threepid invites (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3999&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3999&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3999&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Workers now start on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4027&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4027&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4027&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse now starts on Python 3.7. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4033&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4033&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4033&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Log exceptions in looping calls (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4008&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4008&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4008&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Optimisation for serving federation requests (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4017&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4017&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4017&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add metric to count number of non-empty sync responses (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4022&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4022&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4022&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.33.6 released!</title>
		<published>2018-10-04T00:00:00+00:00</published>
		<updated>2018-10-04T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2018/10/04/synapse-0-33-6-released/" type="text/html"/>
		<id>matrix.org/blog/2018/10/04/synapse-0-33-6-released/</id>
		<content type="html">&lt;p&gt;Right folks, time for Synapse 0.33.6.&lt;&#x2F;p&gt;
&lt;p&gt;These past few weeks we&#x27;ve been focusing on fixing a whole host of federation bugs to improve reliability and latency. Additionally we&#x27;ve squashed some py3 bugs, improved lazy loading and been working hard in the background to improve our CI infrastructure. Finally, we cleaned up the Docker file, the image is now half the size of 0.33.5.1&#x27;s standing at 58 MB.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.6&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;synapse-0-33-6&quot;&gt;Synapse 0.33.6&lt;&#x2F;h3&gt;
&lt;h4 id=&quot;features&quot;&gt;Features&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Adding the ability to change MAX_UPLOAD_SIZE for the docker container variables. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3883&quot;&gt;#3883&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Report &quot;python_version&quot; in the phone home stats (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3894&quot;&gt;#3894&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Always LL ourselves if we&#x27;re in a room (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3916&quot;&gt;#3916&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Include eventid in log lines when processing incoming federation transactions (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3959&quot;&gt;#3959&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove spurious check which made &#x27;localhost&#x27; servers not work (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3964&quot;&gt;#3964&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix problem when playing media from Chrome using direct URL (thanks &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;remjey&quot; data-hovercard-type=&quot;user&quot; data-hovercard-url=&quot;&#x2F;hovercards?user_id=13684203&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@remjey&lt;&#x2F;a&gt;!) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3578&quot;&gt;#3578&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;support registering regular users non-interactively with register_new_matrix_user script (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3836&quot;&gt;#3836&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix broken invite email links for self hosted riots (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3868&quot;&gt;#3868&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Don&#x27;t ratelimit autojoins (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3879&quot;&gt;#3879&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix 500 error when deleting unknown room alias (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3889&quot;&gt;#3889&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix some b&#x27;abcd&#x27; noise in logs and metrics (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3892&quot;&gt;#3892&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3895&quot;&gt;#3895&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;When we join a room, always try the server we used for the alias lookup first, to avoid unresponsive and out-of-date servers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3899&quot;&gt;#3899&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix incorrect server-name indication for outgoing federation requests (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3907&quot;&gt;#3907&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix adding client IPs to the database failing on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3908&quot;&gt;#3908&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug where things occasionally were not being timed out correctly. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3910&quot;&gt;#3910&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug where outbound federation would stop talking to some servers when using workers (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3914&quot;&gt;#3914&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix some instances of ExpiringCache not expiring cache items (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3932&quot;&gt;#3932&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3980&quot;&gt;#3980&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix out-of-bounds error when LLing yourself (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3936&quot;&gt;#3936&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Sending server notices regarding user consent now works on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3938&quot;&gt;#3938&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix exceptions from metrics handler (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3956&quot;&gt;#3956&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix error message for events with m.room.create missing from auth_events (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3960&quot;&gt;#3960&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix errors due to concurrent monthly_active_user upserts (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3961&quot;&gt;#3961&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix exceptions when processing incoming events over federation (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3968&quot;&gt;#3968&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Replaced all occurrences of e.message with str(e). Contributed by Schnuffle (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3970&quot;&gt;#3970&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix lazy loaded sync in the presence of rejected state events (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3986&quot;&gt;#3986&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix error when logging incomplete HTTP requests (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3990&quot;&gt;#3990&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Unit tests can now be run under PostgreSQL in Docker using &lt;code&gt;test_postgresql.sh&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3699&quot;&gt;#3699&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Speed up calculation of typing updates for replication (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3794&quot;&gt;#3794&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove documentation regarding installation on Cygwin, the use of WSL is recommended instead. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3873&quot;&gt;#3873&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix typo in README, synaspse -&amp;gt; synapse (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3897&quot;&gt;#3897&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Increase the timeout when filling missing events in federation requests (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3903&quot;&gt;#3903&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve the logging when handling a federation transaction (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3904&quot;&gt;#3904&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3966&quot;&gt;#3966&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve logging of outbound federation requests (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3906&quot;&gt;#3906&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3909&quot;&gt;#3909&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix the docker image building on python 3 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3911&quot;&gt;#3911&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a regression test for logging failed HTTP requests on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3912&quot;&gt;#3912&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Comments and interface cleanup for on_receive_pdu (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3924&quot;&gt;#3924&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix spurious exceptions when remote http client closes connection (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3925&quot;&gt;#3925&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Log exceptions thrown by background tasks (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3927&quot;&gt;#3927&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a cache to get_destination_retry_timings (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3933&quot;&gt;#3933&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3991&quot;&gt;#3991&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Automate pushes to docker hub (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3946&quot;&gt;#3946&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Require attrs 16.0.0 or later (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3947&quot;&gt;#3947&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix incompatibility with python3 on alpine (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3948&quot;&gt;#3948&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Run the test suite on the oldest supported versions of our dependencies in CI. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3952&quot;&gt;#3952&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;CircleCI now only runs merged jobs on PRs, and commit jobs on develop, master, and release branches. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3957&quot;&gt;#3957&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix docstrings and add tests for state store methods (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3958&quot;&gt;#3958&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;fix docstring for FederationClient.get_state_for_room (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3963&quot;&gt;#3963&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Run notify_app_services as a bg process (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3965&quot;&gt;#3965&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clarifications in FederationHandler (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3967&quot;&gt;#3967&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Further reduce the docker image size (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3972&quot;&gt;#3972&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Build py3 docker images for docker hub too (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3976&quot;&gt;#3976&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Updated the installation instructions to point to the matrix-synapse package on PyPI. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3985&quot;&gt;#3985&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Disable USE_FROZEN_DICTS for unittests by default. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3987&quot;&gt;#3987&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove unused Jenkins and development related files from the repo. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3988&quot;&gt;#3988&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve stacktraces in certain exceptions in the logs (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3989&quot;&gt;#3989&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Pin to prometheus_client&amp;lt;0.4 to avoid renaming all of our metrics (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4002&quot;&gt;#4002&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.33.5.1 released!</title>
		<published>2018-09-24T00:00:00+00:00</published>
		<updated>2018-09-24T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2018/09/24/synapse-0-33-5-released/" type="text/html"/>
		<id>matrix.org/blog/2018/09/24/synapse-0-33-5-released/</id>
		<content type="html">&lt;p&gt;Folks, Synapse 0.33.5.1 is here.&lt;&#x2F;p&gt;
&lt;p&gt;0.33.5.1 is an interesting release. On the one hand it contains the usual bug fixes and performance improvements of a point release, but it also our first versioned release where monolith installs can be run under Python 3.5 and 3.6! Python 3 support is very much in beta, so please be cautious but if you would like to try running under a py3 environment we&#x27;d love to get your feedback.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ve been running it ourselves for the past few weeks, and feel pretty good about it, not least the 2-3x improvement in RAM usage.&lt;&#x2F;p&gt;
&lt;p&gt;Currently the only way to run under python 3 is to download via github, there is no deb support as yet, though this will come as soon as we are confident to recommend python 3 as the default version.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ll be blogging about our porting project in more detail in the future, so watch this space - exciting times!&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.5.1&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, for the first time, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;synapse-0-33-5-1&quot;&gt;Synapse 0.33.5.1&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix incompatibility with older Twisted version in tests. Thanks &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;OlegGirko&quot; data-hovercard-user-id=&quot;6013515&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@OlegGirko&lt;&#x2F;a&gt;! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3940&quot;&gt;#3940&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;synapse-0-33-5&quot;&gt;Synapse 0.33.5&lt;&#x2F;h2&gt;
&lt;h3 id=&quot;features&quot;&gt;Features&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Python 3.5 and 3.6 support is now in beta. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3576&quot;&gt;#3576&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Implement &lt;code&gt;event_format&lt;&#x2F;code&gt; filter param in &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3790&quot;&gt;#3790&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add synapse_admin_mau:registered_reserved_users metric to expose number of real reaserved users (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3846&quot;&gt;#3846&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Remove connection ID for replication prometheus metrics, as it creates a large number of new series. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3788&quot;&gt;#3788&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;guest users should not be part of mau total (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3800&quot;&gt;#3800&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Bump dependency on pyopenssl 16.x, to avoid incompatibility with recent Twisted. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3804&quot;&gt;#3804&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix existing room tags not coming down sync when joining a room (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3810&quot;&gt;#3810&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix jwt import check (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3824&quot;&gt;#3824&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;fix VOIP crashes under Python 3 (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3821&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;358016305&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3821&quot;&gt;#3821&lt;&#x2F;a&gt;) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3835&quot;&gt;#3835&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix manhole so that it works with latest openssh clients (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3841&quot;&gt;#3841&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix outbound requests occasionally wedging, which can result in federation breaking between servers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3845&quot;&gt;#3845&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Show heroes if room name&#x2F;canonical alias has been deleted (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3851&quot;&gt;#3851&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix handling of redacted events from federation (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3859&quot;&gt;#3859&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3874&quot;&gt;#3874&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Mitigate outbound federation randomly becoming wedged (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3875&quot;&gt;#3875&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;internal-changes-1&quot;&gt;Internal Changes&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;CircleCI tests now run on the potential merge of a PR. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3704&quot;&gt;#3704&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;http&#x2F; is now ported to Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3771&quot;&gt;#3771&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve human readable error messages for threepid registration&#x2F;account update (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3789&quot;&gt;#3789&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make &#x2F;sync slightly faster by avoiding needless copies (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3795&quot;&gt;#3795&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;handlers&#x2F; is now ported to Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3803&quot;&gt;#3803&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Limit the number of PDUs&#x2F;EDUs per federation transaction (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3805&quot;&gt;#3805&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Only start postgres instance for postgres tests on Travis CI (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3806&quot;&gt;#3806&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;tests&#x2F; is now ported to Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3808&quot;&gt;#3808&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;crypto&#x2F; is now ported to Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3822&quot;&gt;#3822&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;rest&#x2F; is now ported to Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3823&quot;&gt;#3823&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;add some logging for the keyring queue (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3826&quot;&gt;#3826&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;speed up lazy loading by 2-3x (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3827&quot;&gt;#3827&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improved Dockerfile to remove build requirements after building reducing the image size. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3834&quot;&gt;#3834&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Disable lazy loading for incremental syncs for now (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3840&quot;&gt;#3840&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;federation&#x2F; is now ported to Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3847&quot;&gt;#3847&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Log when we retry outbound requests (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3853&quot;&gt;#3853&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Removed some excess logging messages. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3855&quot;&gt;#3855&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Speed up purge history for rooms that have been previously purged (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3856&quot;&gt;#3856&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor some HTTP timeout code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3857&quot;&gt;#3857&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix running merged builds on CircleCI (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3858&quot;&gt;#3858&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix typo in replication stream exception. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3860&quot;&gt;#3860&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add in flight real time metrics for Measure blocks (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3871&quot;&gt;#3871&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Disable buffering and automatic retrying in treq requests to prevent timeouts. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3872&quot;&gt;#3872&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;mention jemalloc in the README (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3877&quot;&gt;#3877&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove unmaintained &quot;nuke-room-from-db.sh&quot; script (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3888&quot;&gt;#3888&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.33.4 released!</title>
		<published>2018-09-11T00:00:00+00:00</published>
		<updated>2018-09-11T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2018/09/11/synapse-0-33-4-released/" type="text/html"/>
		<id>matrix.org/blog/2018/09/11/synapse-0-33-4-released/</id>
		<content type="html">&lt;p&gt;Roll up, roll up, get it while it&#x27;s hot, Synapse 0.33.4 is here.&lt;&#x2F;p&gt;
&lt;p&gt;This release brings together a whole host of bug fixes, some enhancements to resource usage management and a bunch of internal changes in readiness for room member state lazy loading and our ongoing port to Python 3 (we are hoping to ship a py3 test candidate rsn!).&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.4&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.4&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;features&quot;&gt;Features&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Support profile API endpoints on workers (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3659&quot;&gt;#3659&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Server notices for resource limit blocking (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3680&quot;&gt;#3680&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Allow guests to use &#x2F;rooms&#x2F;:roomId&#x2F;event&#x2F;:eventId (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3724&quot;&gt;#3724&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add mau_trial_days config param, so that users only get counted as MAU after N days. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3749&quot;&gt;#3749&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Require twisted 17.1 or later (fixes &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3741&quot;&gt;#3741&lt;&#x2F;a&gt;). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3751&quot;&gt;#3751&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix error collecting prometheus metrics when run on dedicated thread due to threading concurrency issues (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3722&quot;&gt;#3722&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug where we resent &quot;limit exceeded&quot; server notices repeatedly (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3747&quot;&gt;#3747&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug where we broke sync when using limit_usage_by_mau but hadn&#x27;t configured server notices (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3753&quot;&gt;#3753&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix &#x27;federation_domain_whitelist&#x27; such that an empty list correctly blocks all outbound federation traffic (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3754&quot;&gt;#3754&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix tagging of server notice rooms (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3755&quot;&gt;#3755&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3756&quot;&gt;#3756&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix &#x27;admin_uri&#x27; config variable and error parameter to be &#x27;admin_contact&#x27; to match the spec. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3758&quot;&gt;#3758&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Don&#x27;t return non-LL-member state in incremental sync state blocks (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3760&quot;&gt;#3760&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug in sending presence over federation (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3768&quot;&gt;#3768&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug where preserved threepid user comes to sign up and server is mau blocked (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3777&quot;&gt;#3777&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Removed the link to the unmaintained matrix-synapse-auto-deploy project from the readme. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3378&quot;&gt;#3378&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor state module to support multiple room versions (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3673&quot;&gt;#3673&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The synapse.storage module has been ported to Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3725&quot;&gt;#3725&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Split the state_group_cache into member and non-member state events (and so speed up LL &#x2F;sync) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3726&quot;&gt;#3726&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Log failure to authenticate remote servers as warnings (without stack traces) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3727&quot;&gt;#3727&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The CONTRIBUTING guidelines have been updated to mention our use of Markdown and that .misc files have content. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3730&quot;&gt;#3730&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reference the need for an HTTP replication port when using the federation_reader worker (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3734&quot;&gt;#3734&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix minor spelling error in federation client documentation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3735&quot;&gt;#3735&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove redundant state resolution function (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3737&quot;&gt;#3737&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The test suite now passes on PostgreSQL. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3740&quot;&gt;#3740&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix MAU cache invalidation due to missing yield (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3746&quot;&gt;#3746&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make sure that we close db connections opened during init (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3764&quot;&gt;#3764&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Unignore synctl in .dockerignore to fix docker builds (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3802&quot;&gt;#3802&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Critical Security Update: Synapse 0.33.3.1</title>
		<published>2018-09-06T00:00:00+00:00</published>
		<updated>2018-09-06T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2018/09/06/critical-security-update-synapse-0-33-3-1/" type="text/html"/>
		<id>matrix.org/blog/2018/09/06/critical-security-update-synapse-0-33-3-1/</id>
		<content type="html">&lt;p&gt;Hi All,&lt;&#x2F;p&gt;
&lt;p&gt;As referenced in yesterday&#x27;s &lt;a href=&quot;&#x2F;blog&#x2F;2018&#x2F;09&#x2F;05&#x2F;pre-disclosure-upcoming-critical-security-fix-for-synapse&#x2F;&quot;&gt;pre-disclosure&lt;&#x2F;a&gt;, today we are releasing Synapse 0.33.3.1 as a critical security update.&lt;&#x2F;p&gt;
&lt;p&gt;We have patched two security vulnerabilities we identified whilst working on the upcoming r0 spec release for the Server-Server API (see details below). We do not believe either have been exploited in the wild, but strongly recommend everybody running a federated Synapse upgrades immediately. &lt;&#x2F;p&gt;
&lt;p&gt;As always you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.3.1&quot;&gt;here&lt;&#x2F;a&gt; or from any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Many thanks for your patience and understanding; with fixes like this we are moving ever closer to Synapse reaching a 1.0 Thanks also to the package maintainers who have coordinated with us to ensure distro packages are available for a speedy upgrade!&lt;&#x2F;p&gt;
&lt;p&gt;Note, for anyone running Debian Jessie, we have prepared a 0.33.2.1 deb (as 0.33.3 dropped support for Jessie).&lt;&#x2F;p&gt;
&lt;h3 id=&quot;synapse-0-33-3-1-2018-09-06&quot;&gt;Synapse 0.33.3.1 (2018-09-06)&lt;&#x2F;h3&gt;
&lt;h4 id=&quot;security-fixes&quot;&gt;SECURITY FIXES&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix an issue where event signatures were not always correctly validated (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3796&quot;&gt;#3796&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix an issue where server_acls could be circumvented for incoming events (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3796&quot;&gt;#3796&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Unignore synctl in .dockerignore to fix docker builds (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3802&quot;&gt;#3802&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.33.3 Released</title>
		<published>2018-08-22T00:00:00+00:00</published>
		<updated>2018-08-22T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2018/08/22/synapse-0-33-3-released/" type="text/html"/>
		<id>matrix.org/blog/2018/08/22/synapse-0-33-3-released/</id>
		<content type="html">&lt;p&gt;All the threes, Synapse 0.33.3!&lt;&#x2F;p&gt;
&lt;p&gt;This release brings together a lot of bugfixes, and also some preparation for support for Lazy Loading and Room Versioning.&lt;&#x2F;p&gt;
&lt;p&gt;We also have, as a great contribution from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;vojeroen&quot;&gt;@vojeroen&lt;&#x2F;a&gt;, SNI extension support! With v0.33.3, Synapse now supports sending SNI over federation for vhosted servers, which resolves &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;1491&quot;&gt;this long-standing request&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;As always, you can get the new update from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.3&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.3&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;features&quot;&gt;Features&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Add support for the SNI extension to federation TLS connections. Thanks to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;vojeroen&quot;&gt;@vojeroen&lt;&#x2F;a&gt;! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3439&quot;&gt;#3439&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add &#x2F;_media&#x2F;r0&#x2F;config (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3184&quot;&gt;#3184&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;speed up &#x2F;members API and add &lt;code&gt;at&lt;&#x2F;code&gt; and &lt;code&gt;membership&lt;&#x2F;code&gt; params as per MSC1227 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3568&quot;&gt;#3568&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;implement &lt;code&gt;summary&lt;&#x2F;code&gt; block in &#x2F;sync response as per MSC688 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3574&quot;&gt;#3574&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add lazy-loading support to &#x2F;messages as per MSC1227 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3589&quot;&gt;#3589&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add ability to limit number of monthly active users on the server (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3633&quot;&gt;#3633&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Support more federation endpoints on workers (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3653&quot;&gt;#3653&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Basic support for room versioning (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3654&quot;&gt;#3654&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Ability to disable client&#x2F;server Synapse via conf toggle (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3655&quot;&gt;#3655&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Ability to whitelist specific threepids against monthly active user limiting (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3662&quot;&gt;#3662&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add some metrics for the appservice and federation event sending loops (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3664&quot;&gt;#3664&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Where server is disabled, block ability for locked out users to read new messages (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3670&quot;&gt;#3670&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;set admin uri via config, to be used in error messages where the user should contact the administrator (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3687&quot;&gt;#3687&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse&#x27;s presence functionality can now be disabled with the &quot;use_presence&quot; configuration option. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3694&quot;&gt;#3694&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;For resource limit blocked users, prevent writing into rooms (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3708&quot;&gt;#3708&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix occasional glitches in the synapse_event_persisted_position metric (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3658&quot;&gt;#3658&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug on deleting 3pid when using identity servers that don&#x27;t support unbind API (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3661&quot;&gt;#3661&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make the tests pass on Twisted &amp;lt; 18.7.0 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3676&quot;&gt;#3676&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Don&#x27;t ship recaptcha_ajax.js, use it directly from Google (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3677&quot;&gt;#3677&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fixes test_reap_monthly_active_users so it passes under postgres (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3681&quot;&gt;#3681&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix mau blocking calculation bug on login (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3689&quot;&gt;#3689&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix missing yield in synapse.storage.monthly_active_users.initialise_reserved_users (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3692&quot;&gt;#3692&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve HTTP request logging to include all requests (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3700&quot;&gt;#3700&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3723&quot;&gt;#3723&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Avoid timing out requests while we are streaming back the response (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3701&quot;&gt;#3701&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Support more federation endpoints on workers (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3705&quot;&gt;#3705&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3713&quot;&gt;#3713&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix &quot;Starting db txn &#x27;get_all_updated_receipts&#x27; from sentinel context&quot; warning (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3710&quot;&gt;#3710&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug where &lt;code&gt;state_cache&lt;&#x2F;code&gt; cache factor ignored environment variables (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3719&quot;&gt;#3719&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;The Shared-Secret registration method of the legacy v1&#x2F;register REST endpoint has been removed. For a replacement, please see &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;admin_api&#x2F;register_api.rst&quot;&gt;the admin&#x2F;register API documentation&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3703&quot;&gt;#3703&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;The test suite now can run under PostgreSQL. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3423&quot;&gt;#3423&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor HTTP replication endpoints to reduce code duplication (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3632&quot;&gt;#3632&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Tests now correctly execute on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3647&quot;&gt;#3647&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Sytests can now be run inside a Docker container. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3660&quot;&gt;#3660&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Port over enough to Python 3 to allow the sytests to start. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3668&quot;&gt;#3668&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3732&quot;&gt;#3732&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update docker base image from alpine 3.7 to 3.8. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3669&quot;&gt;#3669&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Rename synapse.util.async to synapse.util.async_helpers to mitigate async becoming a keyword on Python 3.7. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3678&quot;&gt;#3678&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse&#x27;s tests are now formatted with the black autoformatter. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3679&quot;&gt;#3679&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Implemented a new testing base class to reduce test boilerplate. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3684&quot;&gt;#3684&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Rename MAU prometheus metrics (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3690&quot;&gt;#3690&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;add new error type ResourceLimit (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3707&quot;&gt;#3707&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Logcontexts for replication command handlers (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3709&quot;&gt;#3709&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update admin register API documentation to reference a real user ID. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3712&quot;&gt;#3712&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.33.2 is here!</title>
		<published>2018-08-09T00:00:00+00:00</published>
		<updated>2018-08-09T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2018/08/09/synapse-0-33-2-is-here/" type="text/html"/>
		<id>matrix.org/blog/2018/08/09/synapse-0-33-2-is-here/</id>
		<content type="html">&lt;p&gt;Folks, it&#x27;s release time, Synapse 0.33.2 has landed.&lt;&#x2F;p&gt;
&lt;p&gt;The release focuses on performance, notable highlights include reducing CPU consumption through speeding up state delta calculations (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3592&quot;&gt;#3592&lt;&#x2F;a&gt;) and reducing I&#x2F;O through lazily loading state on the master process (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3579&quot;&gt;#3579&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3581&quot;&gt;#3581&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3582&quot;&gt;#3582&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3584&quot;&gt;#3584&lt;&#x2F;a&gt;)&lt;&#x2F;p&gt;
&lt;p&gt;Separately work continues on our python 3 port and we hope to have something concrete to trial very soon - we&#x27;re really excited about this and expect step change improvements in CPU and memory use.&lt;&#x2F;p&gt;
&lt;p&gt;Finally we have some ground work for upcoming room membership lazy loading, there is nothing to see here as yet, but rest assured we will make a lot of noise as soon as it is ready. Stay tuned.&lt;&#x2F;p&gt;
&lt;p&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;synapse-0-33-2-2018-08-09&quot;&gt;Synapse 0.33.2 (2018-08-09)&lt;&#x2F;h3&gt;
&lt;p&gt;No significant changes.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;synapse-0-33-2rc1-2018-08-07&quot;&gt;Synapse 0.33.2rc1 (2018-08-07)&lt;&#x2F;h3&gt;
&lt;h4 id=&quot;features&quot;&gt;Features&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;add support for the lazy_loaded_members filter as per MSC1227 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2970&quot;&gt;#2970&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;add support for the include_redundant_members filter param as per MSC1227 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3331&quot;&gt;#3331&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add metrics to track resource usage by background processes (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3553&quot;&gt;#3553&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3556&quot;&gt;#3556&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3604&quot;&gt;#3604&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3610&quot;&gt;#3610&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add &lt;code&gt;code&lt;&#x2F;code&gt; label to &lt;code&gt;synapse_http_server_response_time_seconds&lt;&#x2F;code&gt; prometheus metric (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3554&quot;&gt;#3554&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add support for client_reader to handle more APIs (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3555&quot;&gt;#3555&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3597&quot;&gt;#3597&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;make the &#x2F;context API filter &amp; lazy-load aware as per MSC1227 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3567&quot;&gt;#3567&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add ability to limit number of monthly active users on the server (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3630&quot;&gt;#3630&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;When we fail to join a room over federation, pass the error code back to the client. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3639&quot;&gt;#3639&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a new &#x2F;admin&#x2F;register API for non-interactively creating users. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3415&quot;&gt;#3415&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Make &#x2F;directory&#x2F;list API return 404 for room not found instead of 400 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2952&quot;&gt;#2952&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Default inviter_display_name to mxid for email invites (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3391&quot;&gt;#3391&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Don&#x27;t generate TURN credentials if no TURN config options are set (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3514&quot;&gt;#3514&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Correctly announce deleted devices over federation (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3520&quot;&gt;#3520&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Catch failures saving metrics captured by Measure, and instead log the faulty metrics information for further analysis. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3548&quot;&gt;#3548&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Unicode passwords are now normalised before hashing, preventing the instance where two different devices or browsers might send a different UTF-8 sequence for the password. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3569&quot;&gt;#3569&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix potential stack overflow and deadlock under heavy load (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3570&quot;&gt;#3570&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Respond with M_NOT_FOUND when profiles are not found locally or over federation. Fixes #3585 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3585&quot;&gt;#3585&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix failure to persist events over federation under load (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3601&quot;&gt;#3601&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix updating of cached remote profiles (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3605&quot;&gt;#3605&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix &#x27;tuple index out of range&#x27; error (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3607&quot;&gt;#3607&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Only import secrets when available (fix for py &amp;lt; 3.6) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3626&quot;&gt;#3626&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Remove redundant checks on who_forgot_in_room (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3350&quot;&gt;#3350&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove unnecessary event re-signing hacks (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3367&quot;&gt;#3367&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Rewrite cache list decorator (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3384&quot;&gt;#3384&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Move v1-only REST APIs into their own module. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3460&quot;&gt;#3460&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Replace more instances of Python 2-only iteritems and itervalues uses. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3562&quot;&gt;#3562&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor EventContext to accept state during init (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3577&quot;&gt;#3577&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve Dockerfile and docker-compose instructions (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3543&quot;&gt;#3543&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Release notes are now in the Markdown format. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3552&quot;&gt;#3552&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;add config for pep8 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3559&quot;&gt;#3559&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Merge Linearizer and Limiter (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3571&quot;&gt;#3571&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3572&quot;&gt;#3572&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Lazily load state on master process when using workers to reduce DB consumption (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3579&quot;&gt;#3579&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3581&quot;&gt;#3581&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3582&quot;&gt;#3582&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3584&quot;&gt;#3584&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fixes and optimisations for resolve_state_groups (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3586&quot;&gt;#3586&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve logging for exceptions when handling PDUs (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3587&quot;&gt;#3587&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add some measure blocks to persist_events (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3590&quot;&gt;#3590&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix some random logcontext leaks. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3591&quot;&gt;#3591&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3606&quot;&gt;#3606&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Speed up calculating state deltas in persist_event loop (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3592&quot;&gt;#3592&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Attempt to reduce amount of state pulled out of DB during persist_events (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3595&quot;&gt;#3595&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix a documentation typo in on_make_leave_request (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3609&quot;&gt;#3609&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make EventStore inherit from EventFederationStore (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3612&quot;&gt;#3612&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove some redundant joins on event_edges.room_id (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3613&quot;&gt;#3613&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Stop populating events.content (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3614&quot;&gt;#3614&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update the &#x2F;send_leave path registration to use event_id rather than a transaction ID. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3616&quot;&gt;#3616&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor FederationHandler to move DB writes into separate functions (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3621&quot;&gt;#3621&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove unused field &quot;pdu_failures&quot; from transactions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3628&quot;&gt;#3628&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;rename replication_layer to federation_client (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3634&quot;&gt;#3634&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Factor out exception handling in federation_client (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3638&quot;&gt;#3638&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor location of docker build script. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3644&quot;&gt;#3644&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update CONTRIBUTING to mention newsfragments. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3645&quot;&gt;#3645&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Security update: Synapse 0.33.1</title>
		<published>2018-08-02T00:00:00+00:00</published>
		<updated>2018-08-02T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2018/08/02/security-update-synapse-0-33-1/" type="text/html"/>
		<id>matrix.org/blog/2018/08/02/security-update-synapse-0-33-1/</id>
		<content type="html">&lt;p&gt;Hi All,&lt;&#x2F;p&gt;
&lt;p&gt;We have patched two securities vulnerabilities (details follow), we do not believe either have been exploited in the wild, but recommend upgrading asap.&lt;&#x2F;p&gt;
&lt;p&gt;As always you can get the new update from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.1&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.1&lt;&#x2F;a&gt; or from any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Thanks&lt;&#x2F;p&gt;
&lt;h3 id=&quot;changes-in-synapse-v0-33-1-2018-08-2&quot;&gt;Changes in Synapse v0.33.1 (2018-08-2)&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix a potential issue where servers could request events for rooms they have not joined. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3641&quot;&gt;#3641&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix a potential issue where users could see events in private rooms before they joined. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3642&quot;&gt;#3642&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Security update: Synapse 0.32.0</title>
		<published>2018-07-06T00:00:00+00:00</published>
		<updated>2018-07-06T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2018/07/06/security-update-synapse-0-32-0/" type="text/html"/>
		<id>matrix.org/blog/2018/07/06/security-update-synapse-0-32-0/</id>
		<content type="html">&lt;p&gt;Folks, Synapse 0.32.0 is an important security update: please upgrade as soon as you can.&lt;&#x2F;p&gt;
&lt;p&gt;The release focuses on security; fixing several federation bugs and adding new features for countering abuse. Notably it includes the ability to blacklist &amp;amp; whitelist servers allowed to send events to a room on a per-room basis via the new 
m.room.server_acl
state event: see &lt;a href=&quot;https:&#x2F;&#x2F;docs.google.com&#x2F;document&#x2F;d&#x2F;1aiuROf1__7ZFkJvDdAZQfBNxyzjYd-ijiRAcHJYqJCM&#x2F;edit&quot;&gt;MSC1383&lt;&#x2F;a&gt; for details.  This also closes out &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;709&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;709&lt;&#x2F;a&gt; - one of our oldest feature requests from users who wish to be able to limit the servers allowed to participate in a given room.&lt;&#x2F;p&gt;
&lt;p&gt;It&#x27;s important to understand that server ACLs only work if all the servers participating in the room honour them.  In future this will be handled better (as part of ongoing work in making it easier to incrementally version and upgrade the federation protocol).  This means that for the ACLs to work, any servers which don&#x27;t yet implement ACLs (e.g. older Synapses) have to be ACL&#x27;d from the room for the access control to work.  
&lt;b&gt;Therefore please upgrade as soon as possible to avoid this problem.&lt;&#x2F;b&gt;&lt;&#x2F;p&gt;
&lt;p&gt;This ongoing flurry of security work is in general all part of moving towards the long-awaited stable release of the Server-Server API. In parallel we&#x27;ve been working on the other main outstanding point: State Resets (i.e. scenarios where you get unexpected results when resolving conflicts between different servers&#x27; copies of a room).  There will be a few more major changes and upgrades on the horizon as we fix these, but then we&#x27;ll finally be able to cut an r0 release of the Server-Server API and Matrix will be one massive step closer to being out of beta!&lt;&#x2F;p&gt;
&lt;p&gt;As always, you can get the new update from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.32.1&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.32.1&lt;&#x2F;a&gt;
 or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;changes-in-synapse-v0-32-0-2018-07-06&quot;&gt;Changes in synapse v0.32.0 (2018-07-06)&lt;&#x2F;h2&gt;
&lt;p&gt;No changes since 0.32.0rc1&lt;&#x2F;p&gt;
&lt;h2 id=&quot;synapse-0-32-0rc1-2018-07-05&quot;&gt;Synapse 0.32.0rc1 (2018-07-05)&lt;&#x2F;h2&gt;
&lt;h4 id=&quot;features&quot;&gt;Features&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Add blacklist &amp; whitelist of servers allowed to send events to a
room via &lt;code&gt;m.room.server_acl&lt;&#x2F;code&gt; event. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;commit&#x2F;feef8461d19c51f3766471e17e2a2f8a2b36c785&quot;&gt;merge&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Cache factor override system for specific caches (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3334&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;329021103&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3334&quot;&gt;#3334&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add metrics to track appservice transactions (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3344&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;329432100&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3344&quot;&gt;#3344&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Try to log more helpful info when a sig verification fails
(&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3372&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;330617906&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3372&quot;&gt;#3372&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse now uses the best performing JSON encoder&#x2F;decoder according
to your runtime (simplejson on CPython, stdlib json on PyPy).
(&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3462&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;336619861&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3462&quot;&gt;#3462&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add optional ip_range_whitelist param to AS registration files to
lock AS IP access (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3465&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;336751400&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3465&quot;&gt;#3465&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reject invalid server names in federation requests (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3480&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;337874054&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3480&quot;&gt;#3480&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reject invalid server names in homeserver.yaml (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3483&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;338348899&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3483&quot;&gt;#3483&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Strip access_token from outgoing requests (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3327&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;328782473&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3327&quot;&gt;#3327&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Redact AS tokens in logs (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3349&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;329791545&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3349&quot;&gt;#3349&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix federation backfill from SQLite servers (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3355&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;329865615&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3355&quot;&gt;#3355&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix event-purge-by-ts admin API (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3363&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;330065602&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3363&quot;&gt;#3363&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix event filtering in get_missing_events handler (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3371&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;330608172&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3371&quot;&gt;#3371&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse is now stricter regarding accepting events which it cannot
retrieve the prev_events for. (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3456&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;336184658&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3456&quot;&gt;#3456&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug where synapse would explode when receiving unicode in HTTP
User-Agent header (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3470&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;337261723&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3470&quot;&gt;#3470&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Invalidate cache on correct thread to avoid race (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3473&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;337463703&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3473&quot;&gt;#3473&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;&lt;code&gt;doc&#x2F;postgres.rst&lt;&#x2F;code&gt;: fix display of the last command block. Thanks to
&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ArchangeGabriel&quot; data-hovercard-user-id=&quot;490531&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@ArchangeGabriel&lt;&#x2F;a&gt;! (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3340&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;329241972&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3340&quot;&gt;#3340&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Remove was_forgotten_at (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3324&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;328600145&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3324&quot;&gt;#3324&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;misc&quot;&gt;Misc&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3332&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;328922729&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3332&quot;&gt;#3332&lt;&#x2F;a&gt; &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3341&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;329315777&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3341&quot;&gt;#3341&lt;&#x2F;a&gt; &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3347&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;329626817&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3347&quot;&gt;#3347&lt;&#x2F;a&gt; &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3348&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;329660142&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3348&quot;&gt;#3348&lt;&#x2F;a&gt; &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3356&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;329938222&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3356&quot;&gt;#3356&lt;&#x2F;a&gt; &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3385&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;331533857&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3385&quot;&gt;#3385&lt;&#x2F;a&gt; &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3446&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;335720791&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3446&quot;&gt;#3446&lt;&#x2F;a&gt; &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3447&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;335727844&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3447&quot;&gt;#3447&lt;&#x2F;a&gt; &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3467&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;336993276&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3467&quot;&gt;#3467&lt;&#x2F;a&gt; &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3474&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;337465451&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3474&quot;&gt;#3474&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.31.1 Released!</title>
		<published>2018-06-08T00:00:00+00:00</published>
		<updated>2018-06-08T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2018/06/08/synapse-0-31-1-released/" type="text/html"/>
		<id>matrix.org/blog/2018/06/08/synapse-0-31-1-released/</id>
		<content type="html">&lt;p&gt;Folks,&lt;&#x2F;p&gt;
&lt;p&gt;v0.31.1 fixes a security bug in the &lt;code&gt;get_missing_events&lt;&#x2F;code&gt; federation API where event visibility rules were not applied correctly.&lt;&#x2F;p&gt;
&lt;p&gt;We are not aware of it being actively exploited but please upgrade asap.&lt;&#x2F;p&gt;
&lt;p&gt;Sorry for the inconvenience, Synapse and the Matrix spec are still in beta and we still ironing out gaps such as this one.&lt;&#x2F;p&gt;
&lt;p&gt;You can get the release &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.31.1&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h4 id=&quot;changes-in-synapse-v0-31-1-2018-06-08&quot;&gt;Changes in synapse v0.31.1 (2018-06-08)&lt;&#x2F;h4&gt;
&lt;p&gt;v0.31.1 fixes a security bug in the &lt;code&gt;get_missing_events&lt;&#x2F;code&gt; federation API
where event visibility rules were not applied correctly.&lt;&#x2F;p&gt;
&lt;p&gt;We are not aware of it being actively exploited but please upgrade asap.&lt;&#x2F;p&gt;
&lt;p&gt;Bug Fixes:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix event filtering in get_missing_events handler (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3371&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;330608172&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3371&quot;&gt;#3371&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse v0.31.0 released!</title>
		<published>2018-06-06T00:00:00+00:00</published>
		<updated>2018-06-06T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2018/06/06/synapse-v0-31-0-released/" type="text/html"/>
		<id>matrix.org/blog/2018/06/06/synapse-v0-31-0-released/</id>
		<content type="html">&lt;p&gt;Good people, it&#x27;s release time.&lt;&#x2F;p&gt;
&lt;p&gt;With the core team focusing on upcoming performance work and GDPR management tooling, v0.31.0 is most notable for improvements to system stats. Additionally, work continues on our py3 port and a host of small bug fixes and perf improvements.&lt;&#x2F;p&gt;
&lt;p&gt;Get it now from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.31.0&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.31.0&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h4 id=&quot;changes-in-synapse-v0-31-0-2018-06-06&quot;&gt;Changes in synapse v0.31.0 (2018-06-06)&lt;&#x2F;h4&gt;
&lt;p&gt;Most notable change from v0.30.0 is to switch to python prometheus library to improve system stats reporting. WARNING this changes a number of prometheus metrics in a backwards-incompatible manner. For more details, see&lt;code&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;metrics-howto.rst&quot;&gt;docs&#x2F;metrics-howto.rst&lt;&#x2F;a&gt;&lt;&#x2F;code&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Bug Fixes:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix metric documentation tables (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3341&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;329315777&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3341&quot;&gt;#3341&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix LaterGauge error handling (&lt;a class=&quot;commit-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;commit&#x2F;694968fa81aab4eac81309b1e16f6063103dd57f&quot;&gt;&lt;tt&gt;694968f&lt;&#x2F;tt&gt;&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix replication metrics (&lt;a class=&quot;commit-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;commit&#x2F;b7e7fd2d0edd4d46aaf9d6afc8df14cf3de911f9&quot;&gt;&lt;tt&gt;b7e7fd2&lt;&#x2F;tt&gt;&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;changes-in-synapse-v0-31-0-rc1-2018-06-04&quot;&gt;Changes in synapse v0.31.0-rc1 (2018-06-04)&lt;&#x2F;h4&gt;
&lt;p&gt;Features:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Switch to the Python Prometheus library (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3256&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325104990&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3256&quot;&gt;#3256&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3274&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325830300&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3274&quot;&gt;#3274&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Let users leave the server notice room after joining (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3287&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;326461744&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3287&quot;&gt;#3287&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Changes:
&lt;ul&gt;
 	&lt;li&gt;daily user type phone home stats (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3264&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325386403&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3264&quot;&gt;#3264&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use iter* methods for _filter_events_for_server (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3267&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325614605&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3267&quot;&gt;#3267&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Docs on consent bits (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3268&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325692950&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3268&quot;&gt;#3268&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove users from user directory on deactivate (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3277&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;326163134&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3277&quot;&gt;#3277&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Avoid sending consent notice to guest users (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3288&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;326470814&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3288&quot;&gt;#3288&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;disable CPUMetrics if no &#x2F;proc&#x2F;self&#x2F;stat (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3299&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;327143395&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3299&quot;&gt;#3299&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add local and loopback IPv6 addresses to url_preview_ip_range_blacklist (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3312&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;327707583&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3312&quot;&gt;#3312&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;thegcat&quot; data-hovercard-user-id=&quot;22835&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@thegcat&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Consistently use six&#x27;s iteritems and wrap lazy keys&#x2F;values in list() if they&#x27;re not meant to be lazy (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3307&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;327587988&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3307&quot;&gt;#3307&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add private IPv6 addresses to example config for url preview blacklist (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3317&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;328463163&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3317&quot;&gt;#3317&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;thegcat&quot; data-hovercard-user-id=&quot;22835&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@thegcat&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Reduce stuck read-receipts: ignore depth when updating (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3318&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;328480595&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3318&quot;&gt;#3318&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Put python&#x27;s logs into Trial when running unit tests (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3319&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;328483239&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3319&quot;&gt;#3319&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Changes, python 3 migration:
&lt;ul&gt;
 	&lt;li&gt;Replace some more comparisons with six (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3243&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324637327&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3243&quot;&gt;#3243&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;replace some iteritems with six (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3244&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324637417&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3244&quot;&gt;#3244&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Add batch_iter to utils (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3245&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324637631&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3245&quot;&gt;#3245&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;use repr, not str (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3246&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324637830&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3246&quot;&gt;#3246&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Misc Python3 fixes (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3247&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324638685&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3247&quot;&gt;#3247&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Py3 storage&#x2F;_base.py (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3278&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;326199044&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3278&quot;&gt;#3278&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;more six iteritems (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3279&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;326236209&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3279&quot;&gt;#3279&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;More Misc. py3 fixes (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3280&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;326237427&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3280&quot;&gt;#3280&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;remaining isintance fixes (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3281&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;326248255&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3281&quot;&gt;#3281&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;py3-ize state.py (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3283&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;326249587&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3283&quot;&gt;#3283&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;extend tox testing for py3 to avoid regressions (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3302&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;327341929&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3302&quot;&gt;#3302&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;krombel&quot; data-hovercard-user-id=&quot;11167142&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@krombel&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;use memoryview in py3 (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3303&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;327370655&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3303&quot;&gt;#3303&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Bugs:
&lt;ul&gt;
 	&lt;li&gt;Fix federation backfill bugs (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3261&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325289139&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3261&quot;&gt;#3261&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;federation: fix LaterGauge usage (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3328&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;328820215&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3328&quot;&gt;#3328&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;intelfx&quot; data-hovercard-user-id=&quot;1158172&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@intelfx&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse v0.30.0 released today!</title>
		<published>2018-05-24T00:00:00+00:00</published>
		<updated>2018-05-24T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2018/05/24/synapse-0-30-0-released-today/" type="text/html"/>
		<id>matrix.org/blog/2018/05/24/synapse-0-30-0-released-today/</id>
		<content type="html">&lt;p&gt;It&#x27;s release o&#x27;clock - GDPR time!!!!&lt;&#x2F;p&gt;
&lt;p&gt;v0.30.0 sees the introduction of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;server_notices.md&quot;&gt;Server Notices&lt;&#x2F;a&gt;, which provides a channel whereby server administrators can send messages to users on the server, as well as &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;consent_tracking.md&quot;&gt;Consent Management&lt;&#x2F;a&gt; for tracking whether users have agreed to the terms and conditions set by the administrator of a server - and blocking access to the server until they have.&lt;&#x2F;p&gt;
&lt;p&gt;In conjunction these features support GDPR compliance in the form of providing a client agnostic means to contact users and ask for consent&#x2F;agreement to a Privacy Notice.&lt;&#x2F;p&gt;
&lt;p&gt;For more information about our approach to GDPR compliance take a look &lt;a href=&quot;&#x2F;blog&#x2F;2018&#x2F;05&#x2F;08&#x2F;gdpr-compliance-in-matrix&#x2F;&quot;&gt;here&lt;&#x2F;a&gt; (although be aware that our position has evolved a bit; see the upcoming new privacy policy for the Matrix.org homeserver for details).&lt;&#x2F;p&gt;
&lt;p&gt;Additionally there are a host of bug fixes and refactors as well as an enhancement to our Dockerfile.&lt;&#x2F;p&gt;
&lt;p&gt;Get it now from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.30.0&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.30.0&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2 id=&quot;changes-in-synapse-v0-30-0-2018-05-24&quot;&gt;Changes in synapse v0.30.0 (2018-05-24)&lt;&#x2F;h2&gt;
&lt;p&gt;&#x27;Server Notices&#x27; are a new feature introduced in Synapse 0.30. They provide a
channel whereby server administrators can send messages to users on the server.&lt;&#x2F;p&gt;
&lt;p&gt;They are used as part of communication of the server policies (see &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;consent_tracking.md&quot;&gt;Consent Tracking&lt;&#x2F;a&gt;),
however the intention is that they may also find a use for features such
as &amp;quot;Message of the day&amp;quot;.&lt;&#x2F;p&gt;
&lt;p&gt;This feature is specific to Synapse, but uses standard Matrix communication mechanisms,
so should work with any Matrix client. For more details see &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;server_notices.md&quot;&gt;here&lt;&#x2F;a&gt;. &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;server_notices.md&quot;&gt;&lt;code&gt;&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Further Server Notices&#x2F;Consent Tracking Support:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Allow overriding the server_notices user&#x27;s avatar (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3273&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325788990&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3273&quot;&gt;#3273&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use the localpart in the consent uri (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3272&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325732749&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3272&quot;&gt;#3272&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Support for putting %(consent_uri)s in messages (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3271&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325731335&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3271&quot;&gt;#3271&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Block attempts to send server notices to remote users (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3270&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325706652&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3270&quot;&gt;#3270&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Docs on consent bits (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3268&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325692950&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3268&quot;&gt;#3268&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;changes-in-synapse-v0-30-0-rc1-2018-05-23&quot;&gt;Changes in synapse v0.30.0-rc1 (2018-05-23)&lt;&#x2F;h3&gt;
&lt;p&gt;GDPR Support:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;ConsentResource to gather policy consent from users (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3213&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;322329950&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3213&quot;&gt;#3213&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Move RoomCreationHandler out of synapse.handlers.Handlers (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3225&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;323966891&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3225&quot;&gt;#3225&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Infrastructure for a server notices room (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3232&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324110323&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3232&quot;&gt;#3232&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Send users a server notice about consent (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3236&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324363121&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3236&quot;&gt;#3236&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reject attempts to send event before privacy consent is given (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3257&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325182001&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3257&quot;&gt;#3257&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a &#x27;has_consented&#x27; template var to consent forms (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3262&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325308498&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3262&quot;&gt;#3262&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix dependency on jinja2 (PR &lt;a class=&quot;issue-link js-issue-link tooltipped tooltipped-ne&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3263&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325308826&quot; data-permission-text=&quot;Issue title is private&quot; aria-label=&quot;#3263, Fix dependency on jinja2&quot;&gt;#3263&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Features:
&lt;ul&gt;
 	&lt;li&gt;Cohort analytics (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3163&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319174463&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3163&quot;&gt;#3163&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3241&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324442563&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3241&quot;&gt;#3241&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3251&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324872139&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3251&quot;&gt;#3251&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add lxml to docker image for web previews (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3239&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324408394&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3239&quot;&gt;#3239&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ptman&quot; data-hovercard-user-id=&quot;24669&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@ptman&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Add in flight request metrics (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3252&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324955805&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3252&quot;&gt;#3252&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Changes:
&lt;ul&gt;
 	&lt;li&gt;Remove unused &lt;code&gt;update_external_syncs&lt;&#x2F;code&gt; (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3233&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324114741&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3233&quot;&gt;#3233&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use stream rather depth ordering for push actions (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3212&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;322319018&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3212&quot;&gt;#3212&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make purge_history operate on tokens (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3221&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;323268684&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3221&quot;&gt;#3221&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Don&#x27;t support limitless pagination (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3265&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325389253&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3265&quot;&gt;#3265&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Bug Fixes:
&lt;ul&gt;
 	&lt;li&gt;Fix logcontext resource usage tracking (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3258&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325229997&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3258&quot;&gt;#3258&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix error in handling receipts (PR &lt;a class=&quot;issue-link js-issue-link tooltipped tooltipped-ne&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3235&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324313546&quot; data-permission-text=&quot;Issue title is private&quot; aria-label=&quot;#3235, Fix error in handling receipts&quot;&gt;#3235&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Stop the transaction cache caching failures (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3255&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324972872&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3255&quot;&gt;#3255&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.29.1 Released!</title>
		<published>2018-05-18T00:00:00+00:00</published>
		<updated>2018-05-18T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2018/05/18/synapse-0-29-1/" type="text/html"/>
		<id>matrix.org/blog/2018/05/18/synapse-0-29-1/</id>
		<content type="html">&lt;p&gt;It&#x27;s release time people, not to be outdone by our friends on the &lt;a href=&quot;https:&#x2F;&#x2F;medium.com&#x2F;@RiotChat&#x2F;stickers-are-here-introducing-riot-im-0-15-for-web-desktop-284c32b93acc&quot;&gt;Riot web team&lt;&#x2F;a&gt;, Synapse v0.29.1 lands today.&lt;&#x2F;p&gt;
&lt;p&gt;v0.29.1 contains an officially supported docker image (many thanks to the contribution from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kaiyou&quot;&gt;@kaiyou&lt;&#x2F;a&gt;), continued progress towards Python 3 (thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;) - as well as a heap of refactorings and bug fixes.&lt;&#x2F;p&gt;
&lt;p&gt;Something worth noting is a potentially breaking change in the error code that &#x2F;login returns in the Client Server API. Details follow, but the change closes a gap between Synapse behaviour and the spec.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;d like to give huge thanks to Silvio Fricke and Andreas Peters for writing and maintaining &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;AVENTER-UG&#x2F;docker-matrix&quot;&gt;Synapse&#x27;s first Dockerfile&lt;&#x2F;a&gt;, as well as &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;allmende&#x2F;docker-synapse&quot;&gt;allmende&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jcgruenhage&#x2F;docker-synapse&quot;&gt;jcgruenhage&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ptman&#x2F;synapse-docker&quot;&gt;ptman&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ilianaw&#x2F;dockerfiles&#x2F;tree&#x2F;master&#x2F;synapse&quot;&gt;ilianaw&lt;&#x2F;a&gt; for theirs!  The new Dockerfile from kaiyou has ended up being merged into the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;tree&#x2F;master&#x2F;contrib&#x2F;docker&quot;&gt;main synapse tree&lt;&#x2F;a&gt; and we&#x27;re going to try to maintain it going forwards, but folks should use whichever one they prefer.&lt;&#x2F;p&gt;
&lt;p&gt;You can pick it up from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.29.1&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.29.1&lt;&#x2F;a&gt; and thanks to everyone who tested the release candidate.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;changes-in-synapse-v0-29-1-2018-05-17&quot;&gt;Changes in synapse v0.29.1 (2018-05-17)&lt;&#x2F;h2&gt;
&lt;p&gt;Changes:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Update docker documentation (PR &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3222&quot;&gt;#3222&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;changes-in-synapse-v0-29-0-2018-05-16&quot;&gt;Changes in synapse v0.29.0 (2018-05-16)&lt;&#x2F;h3&gt;
&lt;p&gt;No changes since v0.29.0-rc1&lt;&#x2F;p&gt;
&lt;h3 id=&quot;changes-in-synapse-v0-29-0-rc1-2018-05-14&quot;&gt;Changes in synapse v0.29.0-rc1 (2018-05-14)&lt;&#x2F;h3&gt;
&lt;p&gt;Potentially breaking change:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Make Client-Server API return 401 for invalid token (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3161&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319022836&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3161&quot;&gt;#3161&lt;&#x2F;a&gt;).This changes the Client-server spec to return a 401 error code instead of 403 when the access token is unrecognised. This is the behaviour required by the specification, but some clients may be relying on the old, incorrect behaviour.Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt; for fixing this.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Features:
&lt;ul&gt;
 	&lt;li&gt;Add a Dockerfile for synapse (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2846&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;294138160&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2846&quot;&gt;#2846&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kaiyou&quot; data-hovercard-user-id=&quot;847861&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@kaiyou&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Changes - General:
&lt;ul&gt;
 	&lt;li&gt;nuke-room-from-db.sh: added postgresql option and help (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2337&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;240936932&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2337&quot;&gt;#2337&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rubo77&quot; data-hovercard-user-id=&quot;1591563&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@rubo77&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Part user from rooms on account deactivate (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3201&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;321584384&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3201&quot;&gt;#3201&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make &#x27;unexpected logging context&#x27; into warnings (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3007&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;305674363&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3007&quot;&gt;#3007&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Set Server header in SynapseRequest (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3208&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;322021667&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3208&quot;&gt;#3208&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;remove duplicates from groups tables (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3129&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;317640994&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3129&quot;&gt;#3129&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve exception handling for background processes (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3138&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318353806&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3138&quot;&gt;#3138&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add missing consumeErrors to improve exception handling (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3139&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318354891&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3139&quot;&gt;#3139&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;reraise exceptions more carefully (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3142&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318362067&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3142&quot;&gt;#3142&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove redundant call to preserve_fn (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3143&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318369685&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3143&quot;&gt;#3143&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Trap exceptions thrown within run_in_background (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3144&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318372621&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3144&quot;&gt;#3144&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Changes - Refactors:
&lt;ul&gt;
 	&lt;li&gt;Refactor &#x2F;context to reuse pagination storage functions (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3193&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;321240389&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3193&quot;&gt;#3193&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor recent events func to use pagination func (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3195&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;321511701&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3195&quot;&gt;#3195&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor pagination DB API to return concrete type (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3196&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;321514152&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3196&quot;&gt;#3196&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor get_recent_events_for_room return type (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3198&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;321524525&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3198&quot;&gt;#3198&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor sync APIs to reuse pagination API (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3199&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;321556855&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3199&quot;&gt;#3199&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove unused code path from member change DB func (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3200&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;321572270&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3200&quot;&gt;#3200&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor request handling wrappers (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3203&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;321896316&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3203&quot;&gt;#3203&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;transaction_id, destination defined twice (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3209&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;322050253&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3209&quot;&gt;#3209&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;damir-manapov&quot; data-hovercard-user-id=&quot;84543&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@damir-manapov&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor event storage to prepare for changes in state calculations (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3141&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318360848&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3141&quot;&gt;#3141&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Set Server header in SynapseRequest (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3208&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;322021667&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3208&quot;&gt;#3208&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use deferred.addTimeout instead of time_bound_deferred (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3127&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;316624675&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3127&quot;&gt;#3127&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3178&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319723346&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3178&quot;&gt;#3178&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use run_in_background in preference to preserve_fn (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3140&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318358846&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3140&quot;&gt;#3140&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Changes - Python 3 migration:
&lt;ul&gt;
 	&lt;li&gt;Construct HMAC as bytes on py3 (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3156&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318672814&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3156&quot;&gt;#3156&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;run config tests on py3 (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3159&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318819505&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3159&quot;&gt;#3159&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Open certificate files as bytes (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3084&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312978895&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3084&quot;&gt;#3084&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Open config file in non-bytes mode (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3085&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312979176&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3085&quot;&gt;#3085&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Make event properties raise AttributeError instead (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3102&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314438601&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3102&quot;&gt;#3102&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Use six.moves.urlparse (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3108&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314444112&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3108&quot;&gt;#3108&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Add py3 tests to tox with folders that work (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3145&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318431714&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3145&quot;&gt;#3145&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Don&#x27;t yield in list comprehensions (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3150&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318628803&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3150&quot;&gt;#3150&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Move more xrange to six (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3151&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318628945&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3151&quot;&gt;#3151&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;make imports local (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3152&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318629082&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3152&quot;&gt;#3152&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;move httplib import to six (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3153&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318629172&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3153&quot;&gt;#3153&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Replace stringIO imports with six (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3154&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318629362&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3154&quot;&gt;#3154&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3168&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319453092&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3168&quot;&gt;#3168&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;more bytes strings (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3155&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318672504&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3155&quot;&gt;#3155&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Bug Fixes:
&lt;ul&gt;
 	&lt;li&gt;synapse fails to start under Twisted &amp;gt;= 18.4 (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3157&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318721696&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3157&quot;&gt;#3157&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Half-Shot&quot; data-hovercard-user-id=&quot;2072976&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@Half-Shot&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix a class of logcontext leaks (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3170&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319506071&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3170&quot;&gt;#3170&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix a couple of logcontext leaks in unit tests (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3172&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319584239&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3172&quot;&gt;#3172&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix logcontext leak in media repo (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3174&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319596214&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3174&quot;&gt;#3174&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Escape label values in prometheus metrics (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3175&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319611493&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3175&quot;&gt;#3175&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3186&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319955083&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3186&quot;&gt;#3186&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix &#x27;Unhandled Error&#x27; logs with Twisted 18.4 (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3182&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319867481&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3182&quot;&gt;#3182&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Half-Shot&quot; data-hovercard-user-id=&quot;2072976&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@Half-Shot&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix logcontext leaks in rate limiter (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3183&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319883299&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3183&quot;&gt;#3183&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;notifications: Convert next_token to string according to the spec (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3190&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;320496620&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3190&quot;&gt;#3190&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mujx&quot; data-hovercard-user-id=&quot;6430350&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@mujx&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;nuke-room-from-db.sh: fix deletion from search table (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3194&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;321366575&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3194&quot;&gt;#3194&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rubo77&quot; data-hovercard-user-id=&quot;1591563&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@rubo77&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;add guard for None on purge_history api (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3160&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318873877&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3160&quot;&gt;#3160&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;krombel&quot; data-hovercard-user-id=&quot;11167142&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@krombel&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.28.0 Released!</title>
		<published>2018-04-27T00:00:00+00:00</published>
		<updated>2018-04-27T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2018/04/27/synapse-0-28-0-released/" type="text/html"/>
		<id>matrix.org/blog/2018/04/27/synapse-0-28-0-released/</id>
		<content type="html">&lt;p&gt;Well now, today sees the release of Synapse 0.28.0!&lt;&#x2F;p&gt;
&lt;p&gt;This release is particularly exciting as it&#x27;s a major bump mainly thanks to lots and lots of contributions from the wider community - including support for running Synapse on PyPy (thanks Valodim) and lots of progress towards official Python3 support (thanks notafile)!! However, almost all the changes are under the hood (and some are quite major), so this is more a performance, bugfix and synapse internals release rather than adding many new APIs or features&lt;&#x2F;p&gt;
&lt;p&gt;As always, you can get it from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.28.0&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.28.0&lt;&#x2F;a&gt; and thanks to everyone who tested the release candidates.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;changes-in-synapse-v0-28-0-2018-04-26&quot;&gt;Changes in synapse v0.28.0 (2018-04-26)&lt;&#x2F;h3&gt;
&lt;p&gt;Bug Fixes:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix quarantine media admin API and search reindex (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3130&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;317646661&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3130&quot;&gt;#3130&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix media admin APIs (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3134&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;317969752&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3134&quot;&gt;#3134&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;changes-in-synapse-v0-28-0-rc1-2018-04-24&quot;&gt;Changes in synapse v0.28.0-rc1 (2018-04-24)&lt;&#x2F;h3&gt;
&lt;p&gt;Minor performance improvement to federation sending and bug fixes.&lt;&#x2F;p&gt;
&lt;p&gt;(Note: This release does not include state resolutions discussed in matrix live)&lt;&#x2F;p&gt;
&lt;p&gt;Features:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Add metrics for event processing lag (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3090&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;313326931&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3090&quot;&gt;#3090&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add metrics for ResponseCache (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3092&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;313664599&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3092&quot;&gt;#3092&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Changes:
&lt;ul&gt;
 	&lt;li&gt;Synapse on PyPy (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2760&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;286622617&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2760&quot;&gt;#2760&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Valodim&quot; data-hovercard-user-id=&quot;27813&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot;&gt;@Valodim&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;move handling of auto_join_rooms to RegisterHandler (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2996&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;305218362&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2996&quot;&gt;#2996&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;krombel&quot; data-hovercard-user-id=&quot;11167142&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot;&gt;@krombel&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve handling of SRV records for federation connections (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3016&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;306884886&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3016&quot;&gt;#3016&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;silkeh&quot; data-hovercard-user-id=&quot;5798032&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot;&gt;@silkeh&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Document the behaviour of ResponseCache (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3059&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;311125652&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3059&quot;&gt;#3059&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Preparation for py3 (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3061&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;311182479&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3061&quot;&gt;#3061&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3073&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312120046&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3073&quot;&gt;#3073&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3074&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312126869&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3074&quot;&gt;#3074&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3075&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312144464&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3075&quot;&gt;#3075&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3103&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314439691&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3103&quot;&gt;#3103&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3104&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314439972&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3104&quot;&gt;#3104&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3106&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314440233&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3106&quot;&gt;#3106&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3107&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314440492&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3107&quot;&gt;#3107&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3109&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314459327&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3109&quot;&gt;#3109&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3110&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314459750&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3110&quot;&gt;#3110&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;update prometheus dashboard to use new metric names (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3069&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;311770477&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3069&quot;&gt;#3069&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;krombel&quot; data-hovercard-user-id=&quot;11167142&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot;&gt;@krombel&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;use python3-compatible prints (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3074&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312126869&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3074&quot;&gt;#3074&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Send federation events concurrently (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3078&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312485229&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3078&quot;&gt;#3078&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Limit concurrent event sends for a room (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3079&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312488812&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3079&quot;&gt;#3079&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve R30 stat definition (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3086&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;313004914&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3086&quot;&gt;#3086&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Send events to ASes concurrently (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3088&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;313232647&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3088&quot;&gt;#3088&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor ResponseCache usage (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3093&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;313696664&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3093&quot;&gt;#3093&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clarify that SRV may not point to a CNAME (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3100&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314327149&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3100&quot;&gt;#3100&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;silkeh&quot; data-hovercard-user-id=&quot;5798032&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot;&gt;@silkeh&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Use str(e) instead of e.message (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3103&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314439691&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3103&quot;&gt;#3103&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Use six.itervalues in some places (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3106&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314440233&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3106&quot;&gt;#3106&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor store.have_events (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3117&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;315159849&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3117&quot;&gt;#3117&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Bug Fixes:
&lt;ul&gt;
 	&lt;li&gt;Return 401 for invalid access_token on logout (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2938&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;301972886&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2938&quot;&gt;#2938&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklug&quot; data-hovercard-user-id=&quot;8633205&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot;&gt;@dklug&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Return a 404 rather than a 500 on rejoining empty rooms (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3080&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312501677&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3080&quot;&gt;#3080&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;fix federation_domain_whitelist (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3099&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314137025&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3099&quot;&gt;#3099&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Avoid creating events with huge numbers of prev_events (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3113&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314753743&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3113&quot;&gt;#3113&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reject events which have lots of prev_events (PR &lt;a class=&quot;issue-link js-issue-link tooltipped tooltipped-ne&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3118&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;315273891&quot; data-permission-text=&quot;Issue title is private&quot;&gt;#3118&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.27.3 released!</title>
		<published>2018-04-11T00:00:00+00:00</published>
		<updated>2018-04-11T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2018/04/11/synapse-0-27-3-released/" type="text/html"/>
		<id>matrix.org/blog/2018/04/11/synapse-0-27-3-released/</id>
		<content type="html">&lt;p&gt;Today we release Synapse 0.27.3!&lt;&#x2F;p&gt;
&lt;p&gt;Hot on the heels of 0.27.2, notable changes include API support for joining groups&#x2F;communities as well as a major bug fix (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3082&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312859684&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3082&quot;&gt;#3082&lt;&#x2F;a&gt;), that is particularly important for those upgrading for the first time in a while. Also new metrics and phone home stats. Phone home stats include better visibility of system usage so we can have a better idea of how synapse&#x27;s RAM and CPU is behaving in the wild. Also, recording the number of users on the server who have been using it for at least 30 days.&lt;&#x2F;p&gt;
&lt;p&gt;Phone home stats are entirely optional and can be enabled&#x2F;disabled by setting &amp;quot;&lt;span class=&quot;s1&quot;&gt;report_&lt;&#x2F;span&gt;
&lt;span class=&quot;s2&quot;&gt;stat&lt;&#x2F;span&gt;
&lt;span class=&quot;s1&quot;&gt;s&amp;quot; in homeserver.yaml. &lt;&#x2F;span&gt;
Please consider enabling phone home stats if you currently have not done so - this data is really important to us in improving Matrix as a whole (and justifying future funding for &lt;a class=&quot;linkified&quot; href=&quot;http:&#x2F;&#x2F;matrix.org&#x2F;&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Matrix.org&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;As always, you can get it from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.27.3&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.27.3&lt;&#x2F;a&gt; and thanks to everyone who tested the release candidates.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;changes-in-synapse-v0-27-3-2018-04-11&quot;&gt;Changes in synapse v0.27.3 (2018-04-11)&lt;&#x2F;h3&gt;
&lt;p&gt;Bug fixes:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;URL quote path segments over federation (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3082&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312859684&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3082&quot;&gt;#3082&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;changes-in-synapse-v0-27-3-rc2-2018-04-09&quot;&gt;Changes in synapse v0.27.3-rc2 (2018-04-09)&lt;&#x2F;h3&gt;
&lt;p&gt;v0.27.3-rc1 used a stale version of the develop branch so the changelog overstates
the functionality. v0.27.3-rc2 is up to date, rc1 should be ignored.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;changes-in-synapse-v0-27-3-rc1-2018-04-09&quot;&gt;Changes in synapse v0.27.3-rc1 (2018-04-09)&lt;&#x2F;h3&gt;
&lt;p&gt;Notable changes include API support for joinability of groups. Also new metrics
and phone home stats. Phone home stats include better visibility of system usage
so we can tweak synpase to work better for all users rather than our own experience
with matrix.org. Also, recording &#x27;r30&#x27; stat which is the measure we use to track
overall growth of the Matrix ecosystem. It is defined as:-&lt;&#x2F;p&gt;
&lt;p&gt;Counts the number of native 30 day retained users, defined as:-&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Users who have created their accounts more than 30 days&lt;&#x2F;li&gt;
&lt;li&gt;Where last seen at most 30 days ago&lt;&#x2F;li&gt;
&lt;li&gt;Where account creation and last_seen are &amp;gt; 30 days&amp;quot;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Features:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Add joinability for groups (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3045&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;309358488&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3045&quot;&gt;#3045&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Implement group join API (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3046&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;309437433&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3046&quot;&gt;#3046&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add counter metrics for calculating state delta (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3033&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;308901076&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3033&quot;&gt;#3033&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;R30 stats (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3041&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;309293623&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3041&quot;&gt;#3041&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Measure time it takes to calculate state group ID (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3043&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;309312509&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3043&quot;&gt;#3043&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add basic performance statistics to phone home (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3044&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;309323226&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3044&quot;&gt;#3044&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add response size metrics (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3071&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;311954815&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3071&quot;&gt;#3071&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;phone home cache size configurations (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3063&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;311248683&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3063&quot;&gt;#3063&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Changes:
&lt;ul&gt;
 	&lt;li&gt;Add a blurb explaining the main synapse worker (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2886&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;298059141&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2886&quot;&gt;#2886&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;turt2live&quot; data-hovercard-user-id=&quot;1190097&quot;&gt;@turt2live&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Replace old style error catching with &#x27;as&#x27; keyword (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3000&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;305290730&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3000&quot;&gt;#3000&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Use .iter* to avoid copies in StateHandler (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3006&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;305656885&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3006&quot;&gt;#3006&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Linearize calls to _generate_user_id (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3029&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;308526745&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3029&quot;&gt;#3029&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove last usage of ujson (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3030&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;308552644&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3030&quot;&gt;#3030&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use simplejson throughout (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3048&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;309920407&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3048&quot;&gt;#3048&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use static JSONEncoders (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3049&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;309920728&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3049&quot;&gt;#3049&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove uses of events.content (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3060&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;311128650&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3060&quot;&gt;#3060&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve database cache performance (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3068&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;311658915&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3068&quot;&gt;#3068&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Bug fixes:
&lt;ul&gt;
 	&lt;li&gt;Add room_id to the response of &lt;code&gt;rooms&#x2F;{&#x27;{&#x27;}roomId{&#x27;}&#x27;}&#x2F;join&lt;&#x2F;code&gt; (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2986&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;304772714&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2986&quot;&gt;#2986&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jplatte&quot; data-hovercard-user-id=&quot;951129&quot;&gt;@jplatte&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix replication after switch to simplejson (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3015&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;306553712&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3015&quot;&gt;#3015&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix replication after switch to simplejson (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3015&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;306553712&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3015&quot;&gt;#3015&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;404 correctly on missing paths via NoResource (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3022&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;307976332&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3022&quot;&gt;#3022&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix error when claiming e2e keys from offline servers (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3034&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;309039857&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3034&quot;&gt;#3034&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;fix tests&#x2F;storage&#x2F;test_user_directory.py (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3042&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;309299280&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3042&quot;&gt;#3042&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;use PUT instead of POST for federating groups&#x2F;m.join_policy (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3070&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;311932835&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3070&quot;&gt;#3070&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;krombel&quot; data-hovercard-user-id=&quot;11167142&quot;&gt;@krombel&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;postgres port script: fix state_groups_pkey error (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3072&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;311965025&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3072&quot;&gt;#3072&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.27 released!</title>
		<published>2018-03-26T00:00:00+00:00</published>
		<updated>2018-03-26T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2018/03/26/synapse-0-27-2-released/" type="text/html"/>
		<id>matrix.org/blog/2018/03/26/synapse-0-27-2-released/</id>
		<content type="html">&lt;p class=&quot;release-title text-normal&quot;&gt;We released Synapse v0.27.2 today (the first stable release in the 0.27.x series) - it contains loads of work since Synapse v0.26 back in January.  The main highlights are:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li class=&quot;release-title text-normal&quot;&gt;All the perf improvements which we&#x27;ve been landing as we race to keep the matrix.org homeserver in the face of ever-expanding traffic levels over the last few months&lt;&#x2F;li&gt;
 	&lt;li class=&quot;release-title text-normal&quot;&gt;Support for custom storage providers for media repository.&lt;&#x2F;li&gt;
 	&lt;li class=&quot;release-title text-normal&quot;&gt;Ability to limit the email addresses allowed to register on your HS, and ability to limit the homeservers your homeserver is allowed to federate with&lt;&#x2F;li&gt;
 	&lt;li class=&quot;release-title text-normal&quot;&gt;All new purge API - letting you purge history by date as well as by event (and having a nice new async way of doing it)&lt;&#x2F;li&gt;
 	&lt;li class=&quot;release-title text-normal&quot;&gt;Make search work again!!! (by switching from GIST to GIN indexes)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
And a few release notes worth calling out:
&lt;ul&gt;
 	&lt;li&gt;The common case for running Synapse is not to run separate workers, but for those that do, be aware that synctl no longer starts the main synapse when using &lt;code&gt;-a&lt;&#x2F;code&gt; option with workers. A new worker file should be added with &lt;code&gt;worker_app: synapse.app.homeserver&lt;&#x2F;code&gt;.&lt;&#x2F;li&gt;
 	&lt;li&gt;This release also begins the process of renaming a number of the metrics reported to prometheus. See &lt;code&gt;docs&#x2F;metrics-howto.rst &lt;&#x2F;code&gt;
Note that the v0.28.0 release will remove the deprecated metric names.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;As always, you can get it from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.27.2&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.27.2&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;thanks for flying Matrix!&lt;&#x2F;p&gt;
&lt;h3 id=&quot;changes-in-synapse-v0-27-2-2018-03-26&quot;&gt;Changes in synapse v0.27.2 (2018-03-26)&lt;&#x2F;h3&gt;
&lt;p&gt;Bug fixes:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix bug which broke TCP replication between workers (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3015&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;306553712&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3015&quot;&gt;#3015&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;changes-in-synapse-v0-27-1-2018-03-26&quot;&gt;Changes in synapse v0.27.1 (2018-03-26)&lt;&#x2F;h3&gt;
&lt;p&gt;Meta release as v0.27.0 temporarily pointed to the wrong commit&lt;&#x2F;p&gt;
&lt;h3 id=&quot;changes-in-synapse-v0-27-0-2018-03-26&quot;&gt;Changes in synapse v0.27.0 (2018-03-26)&lt;&#x2F;h3&gt;
&lt;p&gt;No changes since v0.27.0-rc2&lt;&#x2F;p&gt;
&lt;h3 id=&quot;changes-in-synapse-v0-27-0-rc2-2018-03-19&quot;&gt;Changes in synapse v0.27.0-rc2 (2018-03-19)&lt;&#x2F;h3&gt;
&lt;p&gt;Pulls in v0.26.1&lt;&#x2F;p&gt;
&lt;p&gt;Bug fixes:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix bug introduced in v0.27.0-rc1 that causes much increased memory usage in state cache (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3005&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;305611773&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3005&quot;&gt;#3005&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;changes-in-synapse-v0-27-0-rc1-2018-03-14&quot;&gt;Changes in synapse v0.27.0-rc1 (2018-03-14)&lt;&#x2F;h3&gt;
&lt;p&gt;The common case for running Synapse is not to run separate workers, but for those that do, be aware that synctl no longer starts the main synapse when using &lt;code&gt;-a&lt;&#x2F;code&gt; option with workers. A new worker file should be added with &lt;code&gt;worker_app: synapse.app.homeserver&lt;&#x2F;code&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;This release also begins the process of renaming a number of the metrics
reported to prometheus. See &lt;code&gt;docs&#x2F;metrics-howto.rst &amp;lt;docs&#x2F;metrics-howto.rst#block-and-response-metrics-renamed-for-0-27-0&amp;gt;&lt;&#x2F;code&gt;_.
Note that the v0.28.0 release will remove the deprecated metric names.&lt;&#x2F;p&gt;
&lt;p&gt;Features:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Add ability for ASes to override message send time (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2754&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;286084501&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2754&quot;&gt;#2754&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add support for custom storage providers for media repository (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2867&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;297143892&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2867&quot;&gt;#2867&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2777&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288157999&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2777&quot;&gt;#2777&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2783&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288569577&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2783&quot;&gt;#2783&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2789&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288869854&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2789&quot;&gt;#2789&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2791&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288934607&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2791&quot;&gt;#2791&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2804&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;289336063&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2804&quot;&gt;#2804&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2812&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;289647722&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2812&quot;&gt;#2812&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2814&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;290067094&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2814&quot;&gt;#2814&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2857&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;295139747&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2857&quot;&gt;#2857&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2868&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;297189465&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2868&quot;&gt;#2868&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2767&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;287142685&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2767&quot;&gt;#2767&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add purge API features, see &lt;code&gt;docs&#x2F;admin_api&#x2F;purge_history_api.rst &amp;lt;docs&#x2F;admin_api&#x2F;purge_history_api.rst&amp;gt;&lt;&#x2F;code&gt;_ for full details (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2858&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;295623787&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2858&quot;&gt;#2858&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2867&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;297143892&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2867&quot;&gt;#2867&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2882&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;297795332&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2882&quot;&gt;#2882&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2946&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;302323973&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2946&quot;&gt;#2946&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2962&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;303453845&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2962&quot;&gt;#2962&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2943&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;302274834&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2943&quot;&gt;#2943&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add support for whitelisting 3PIDs that users can register. (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2813&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;289822303&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2813&quot;&gt;#2813&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add &lt;code&gt;&#x2F;room&#x2F;{&#x27;{&#x27;}id{&#x27;}&#x27;}&#x2F;event&#x2F;{&#x27;{&#x27;}id{&#x27;}&#x27;}&lt;&#x2F;code&gt; API (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2766&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;287111856&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2766&quot;&gt;#2766&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add an admin API to get all the media in a room (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2818&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;290248966&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2818&quot;&gt;#2818&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;turt2live&quot; data-hovercard-user-id=&quot;1190097&quot;&gt;@turt2live&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Add &lt;code&gt;federation_domain_whitelist&lt;&#x2F;code&gt; option (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2820&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;290431422&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2820&quot;&gt;#2820&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2821&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;290535583&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2821&quot;&gt;#2821&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Changes:
&lt;ul&gt;
 	&lt;li&gt;Continue to factor out processing from main process and into worker processes. See updated &lt;code&gt;docs&#x2F;workers.rst &amp;lt;docs&#x2F;metrics-howto.rst&amp;gt;&lt;&#x2F;code&gt;_ (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2892&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;298561185&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2892&quot;&gt;#2892&lt;&#x2F;a&gt; - &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2904&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;299011997&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2904&quot;&gt;#2904&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2913&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;300641311&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2913&quot;&gt;#2913&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2920&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;301369053&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2920&quot;&gt;#2920&lt;&#x2F;a&gt; - &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2926&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;301430108&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2926&quot;&gt;#2926&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2947&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;302345912&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2947&quot;&gt;#2947&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2847&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;294445742&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2847&quot;&gt;#2847&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2854&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;294788458&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2854&quot;&gt;#2854&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2872&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;297406819&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2872&quot;&gt;#2872&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2873&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;297453720&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2873&quot;&gt;#2873&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2874&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;297495962&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2874&quot;&gt;#2874&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2928&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;301499498&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2928&quot;&gt;#2928&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2929&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;301509586&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2929&quot;&gt;#2929&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2934&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;301790132&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2934&quot;&gt;#2934&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2856&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;295084944&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2856&quot;&gt;#2856&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2976&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;304706297&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2976&quot;&gt;#2976&lt;&#x2F;a&gt; - &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2984&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;304740825&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2984&quot;&gt;#2984&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2987&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;304821270&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2987&quot;&gt;#2987&lt;&#x2F;a&gt; - &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2989&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;304866716&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2989&quot;&gt;#2989&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2991&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;304872444&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2991&quot;&gt;#2991&lt;&#x2F;a&gt; - &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2993&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;304884837&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2993&quot;&gt;#2993&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2995&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;305183031&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2995&quot;&gt;#2995&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2784&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288646985&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2784&quot;&gt;#2784&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Ensure state cache is used when persisting events (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2864&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;296733137&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2864&quot;&gt;#2864&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2871&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;297402993&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2871&quot;&gt;#2871&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2802&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;289312790&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2802&quot;&gt;#2802&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2835&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;292486340&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2835&quot;&gt;#2835&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2836&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;292488546&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2836&quot;&gt;#2836&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2841&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;293319852&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2841&quot;&gt;#2841&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2842&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;293516371&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2842&quot;&gt;#2842&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2849&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;294454677&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2849&quot;&gt;#2849&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Change the default config to bind on both IPv4 and IPv6 on all platforms (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2435&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;254819246&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2435&quot;&gt;#2435&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;silkeh&quot; data-hovercard-user-id=&quot;5798032&quot;&gt;@silkeh&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;No longer require a specific version of saml2 (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2695&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;275301530&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2695&quot;&gt;#2695&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;okurz&quot; data-hovercard-user-id=&quot;1693432&quot;&gt;@okurz&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove &lt;code&gt;verbosity&lt;&#x2F;code&gt;&#x2F;&lt;code&gt;log_file&lt;&#x2F;code&gt; from generated config (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2755&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;286276436&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2755&quot;&gt;#2755&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add and improve metrics and logging (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2770&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;287188683&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2770&quot;&gt;#2770&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2778&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288278959&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2778&quot;&gt;#2778&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2785&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288661455&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2785&quot;&gt;#2785&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2786&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288673610&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2786&quot;&gt;#2786&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2787&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288680996&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2787&quot;&gt;#2787&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2793&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288990634&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2793&quot;&gt;#2793&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2794&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288990935&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2794&quot;&gt;#2794&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2795&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288991781&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2795&quot;&gt;#2795&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2809&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;289596655&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2809&quot;&gt;#2809&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2810&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;289611347&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2810&quot;&gt;#2810&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2833&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;292478167&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2833&quot;&gt;#2833&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2834&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;292485874&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2834&quot;&gt;#2834&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2844&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;293722386&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2844&quot;&gt;#2844&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2965&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;303899583&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2965&quot;&gt;#2965&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2927&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;301458883&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2927&quot;&gt;#2927&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2975&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;304696133&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2975&quot;&gt;#2975&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2790&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288882318&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2790&quot;&gt;#2790&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2796&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;289002187&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2796&quot;&gt;#2796&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2838&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;292878012&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2838&quot;&gt;#2838&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;When using synctl with workers, don&#x27;t start the main synapse automatically (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2774&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;287752976&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2774&quot;&gt;#2774&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Minor performance improvements (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2773&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;287525837&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2773&quot;&gt;#2773&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2792&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288956339&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2792&quot;&gt;#2792&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use a connection pool for non-federation outbound connections (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2817&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;290150012&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2817&quot;&gt;#2817&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make it possible to run unit tests against postgres (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2829&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;291766061&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2829&quot;&gt;#2829&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update pynacl dependency to 1.2.1 or higher (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2888&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;298077542&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2888&quot;&gt;#2888&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;bachp&quot; data-hovercard-user-id=&quot;333807&quot;&gt;@bachp&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove ability for AS users to call &#x2F;events and &#x2F;sync (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2948&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;302351006&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2948&quot;&gt;#2948&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use bcrypt.checkpw (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2949&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;302378538&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2949&quot;&gt;#2949&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;krombel&quot; data-hovercard-user-id=&quot;11167142&quot;&gt;@krombel&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Bug fixes:
&lt;ul&gt;
 	&lt;li&gt;Fix broken &lt;code&gt;ldap_config&lt;&#x2F;code&gt; config option (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2683&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;274548585&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2683&quot;&gt;#2683&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;seckrv&quot; data-hovercard-user-id=&quot;33725786&quot;&gt;@seckrv&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix error message when user is not allowed to unban (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2761&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;286627895&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2761&quot;&gt;#2761&lt;&#x2F;a&gt;) Thanks to &lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;turt2live&quot; data-hovercard-user-id=&quot;1190097&quot;&gt;@turt2live&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix publicised groups GET API (singular) over federation (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2772&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;287465272&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2772&quot;&gt;#2772&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix user directory when using &lt;code&gt;user_directory_search_all_users&lt;&#x2F;code&gt; config option (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2803&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;289317809&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2803&quot;&gt;#2803&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2831&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;291766486&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2831&quot;&gt;#2831&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix error on &lt;code&gt;&#x2F;publicRooms&lt;&#x2F;code&gt; when no rooms exist (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2827&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;291754519&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2827&quot;&gt;#2827&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug in quarantine_media (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2837&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;292821166&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2837&quot;&gt;#2837&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix url_previews when no Content-Type is returned from URL (PR &lt;a class=&quot;issue-link js-issue-link tooltipped tooltipped-ne&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2845&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;293737258&quot; data-permission-text=&quot;Issue title is private&quot;&gt;#2845&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix rare race in sync API when joining room (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2944&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;302277324&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2944&quot;&gt;#2944&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix slow event search, switch back from GIST to GIN indexes (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2769&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;287153610&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2769&quot;&gt;#2769&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2848&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;294449553&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2848&quot;&gt;#2848&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.24 is here!</title>
		<published>2017-10-24T00:00:00+00:00</published>
		<updated>2017-10-24T00:00:00+00:00</updated>
		<link rel="alternate" href="matrix.org/blog/2017/10/24/synapse-0-24-is-here/" type="text/html"/>
		<id>matrix.org/blog/2017/10/24/synapse-0-24-is-here/</id>
		<content type="html">&lt;p&gt;Hi folks,&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 0.24 is out (currently at 0.24.1)! This is a pretty big release as it includes initial support for Groups, also known as Communities (UI for which is landing currently on Riot&#x2F;Web and later Riot&#x2F;Mobile). Groups let you associate together a set of users and rooms, letting you define a community - e.g. &lt;a href=&quot;https:&#x2F;&#x2F;riot.im&#x2F;develop&#x2F;#&#x2F;group&#x2F;+matrix:matrix.org&quot;&gt;+matrix:matrix.org&lt;&#x2F;a&gt; is the community of the core Matrix project itself (whose users are the core Matrix.org team, and whose public rooms are the rooms we officially manage&#x2F;moderate as Matrix.org).  We&#x27;ll yell more about Groups once the UI is ready for action in the near future, but the good news is that Synapse should be ready to go (although the API is still fairly experimental and very much evolving).&lt;&#x2F;p&gt;
&lt;p&gt;Other stuff worth calling out in this release includes: massive performance improvements on receiving federation traffic (we now process federation traffic for different rooms in parallel); fixing a major cause of performance issues (caused when processing spurious events for rooms you&#x27;ve actually left); modularising and improving the the spamchecker; @room notification support; backup media repository support; and finally the ability to autojoin new users to a set of rooms on the server!&lt;&#x2F;p&gt;
&lt;p&gt;You can get the latest release from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&quot;&gt;Github&lt;&#x2F;a&gt; as usual; have fun - and thanks for flying Matrix :)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;changes-in-synapse-v0-24-1-2017-10-24&quot;&gt;Changes in synapse v0.24.1 (2017-10-24)&lt;&#x2F;h2&gt;
&lt;p&gt;Bug fixes:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix updating group profiles over federation (PR &lt;a class=&quot;issue-link js-issue-link tooltipped tooltipped-ne&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2567&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;267687632&quot; data-permission-text=&quot;Issue title is private&quot;&gt;#2567&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;changes-in-synapse-v0-24-0-2017-10-23&quot;&gt;Changes in synapse v0.24.0 (2017-10-23)&lt;&#x2F;h2&gt;
&lt;p&gt;No changes since v0.24.0-rc1&lt;&#x2F;p&gt;
&lt;h2 id=&quot;changes-in-synapse-v0-24-0-rc1-2017-10-19&quot;&gt;Changes in synapse v0.24.0-rc1 (2017-10-19)&lt;&#x2F;h2&gt;
&lt;p&gt;Features:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Add Group Server (PR &lt;a class=&quot;issue-link js-issue-link tooltipped tooltipped-ne&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2352&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;241719376&quot; data-permission-text=&quot;Issue title is private&quot;&gt;#2352&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2363&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;242334015&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2363&quot;&gt;#2363&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2374&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;243375644&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2374&quot;&gt;#2374&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2377&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;244340948&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2377&quot;&gt;#2377&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2378&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;244341100&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2378&quot;&gt;#2378&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2382&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;245071091&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2382&quot;&gt;#2382&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2410&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;249656746&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2410&quot;&gt;#2410&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2426&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;251663325&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2426&quot;&gt;#2426&lt;&#x2F;a&gt;,
&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2430&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;252935837&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2430&quot;&gt;#2430&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2454&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;258756630&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2454&quot;&gt;#2454&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2471&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;260566156&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2471&quot;&gt;#2471&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2472&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;260655379&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2472&quot;&gt;#2472&lt;&#x2F;a&gt;, &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2544&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;265791503&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2544&quot;&gt;#2544&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add support for channel notifications (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2501&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;263095049&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2501&quot;&gt;#2501&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add basic implementation of backup media store (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2538&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;264965734&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2538&quot;&gt;#2538&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add config option to auto-join new users to rooms (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2545&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;265842040&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2545&quot;&gt;#2545&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Changes:
&lt;ul&gt;
 	&lt;li&gt;Make the spam checker a module (PR &lt;a class=&quot;issue-link js-issue-link tooltipped tooltipped-ne&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2474&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;260721359&quot; data-permission-text=&quot;Issue title is private&quot;&gt;#2474&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Delete expired url cache data (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2478&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;261282574&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2478&quot;&gt;#2478&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Ignore incoming events for rooms that we have left (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2490&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;262374962&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2490&quot;&gt;#2490&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Allow spam checker to reject invites too (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2492&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;262416897&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2492&quot;&gt;#2492&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add room creation checks to spam checker (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2495&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;262727329&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2495&quot;&gt;#2495&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Spam checking: add the invitee to user_may_invite (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2502&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;263117407&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2502&quot;&gt;#2502&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Process events from federation for different rooms in parallel (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2520&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;263967902&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2520&quot;&gt;#2520&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Allow error strings from spam checker (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2531&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;264590599&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2531&quot;&gt;#2531&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve error handling for missing files in config (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2551&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;266095819&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2551&quot;&gt;#2551&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Bug fixes:
&lt;ul&gt;
 	&lt;li&gt;Fix handling SERVFAILs when doing AAAA lookups for federation (PR &lt;a class=&quot;issue-link js-issue-link tooltipped tooltipped-ne&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2477&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;261269109&quot; data-permission-text=&quot;Issue title is private&quot;&gt;#2477&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix incompatibility with newer versions of ujson (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2483&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;261851143&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2483&quot;&gt;#2483&lt;&#x2F;a&gt;) Thanks to
&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jeremycline&quot;&gt;@jeremycline&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix notification keywords that start&#x2F;end with non-word chars (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2500&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;263077422&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2500&quot;&gt;#2500&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix stack overflow and logcontexts from linearizer (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2532&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;264600894&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2532&quot;&gt;#2532&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix 500 error when fields missing from power_levels event (PR &lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2552&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;266187530&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2552&quot;&gt;#2552&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix 500 error when we get an error handling a PDU (PR &lt;a class=&quot;issue-link js-issue-link tooltipped tooltipped-ne&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2553&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;266256222&quot; data-permission-text=&quot;Issue title is private&quot;&gt;#2553&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
</feed>
