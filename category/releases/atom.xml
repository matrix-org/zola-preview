<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en">
	<title> - Releases</title>
	<link href="/category/releases/atom.xml" rel="self" type="application/atom+xml"/>
  <link href="/"/>
	<generator uri="https://www.getzola.org/">Zola</generator>
	<updated>2022-09-29T13:30:32+00:00</updated>
	<id>/category/releases/atom.xml</id>
	<entry xml:lang="en">
		<title>Matrix v1.4 release</title>
		<published>2022-09-29T13:30:32+00:00</published>
		<updated>2022-09-29T13:30:32+00:00</updated>
		<link rel="alternate" href="/blog/2022/09/29/matrix-v-1-4-release/" type="text/html"/>
		<id>/blog/2022/09/29/matrix-v-1-4-release/</id>
		<content type="html">&lt;p&gt;Hey all,&lt;&#x2F;p&gt;
&lt;p&gt;It‚Äôs finally here: &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.4&#x2F;client-server-api&#x2F;#threading&quot;&gt;threads&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.4&#x2F;client-server-api&#x2F;#event-replacements&quot;&gt;edits&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.4&#x2F;client-server-api&#x2F;#private-read-receipts&quot;&gt;private read receipts&lt;&#x2F;a&gt;. v1.4 has been a little later than usual in the quarter because we wanted to make sure we nailed down all the core MSCs for threads before publishing the spec itself, but we‚Äôve done that now and we‚Äôre excited about it.&lt;&#x2F;p&gt;
&lt;span id=&quot;continue-reading&quot;&gt;&lt;&#x2F;span&gt;
&lt;p&gt;Matrix 1.3 was &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;06&#x2F;16&#x2F;matrix-v-1-3-release&quot;&gt;just over 3 months ago&lt;&#x2F;a&gt;, though with the relatively large features there and the colossal implementation effort of v1.4 we‚Äôre not expecting everyone to have implementations on day 1. Instead, as with all spec releases, we encourage implementations to gradually update over the next few months. We‚Äôre additionally planning to make v1.5 (Q4 2022) more of a maintenance update to help make the backlog a bit easier on everyone, though we might prioritize a couple cool features in there too :)&lt;&#x2F;p&gt;
&lt;p&gt;Matrix 1.4 sees 14 MSCs get merged, but we can‚Äôt possibly go into detail on them all here. We‚Äôve instead focused on the 3 major features we‚Äôre excited about - check out the changelog at the end for the full picture.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;threads&quot;&gt;üßµ Threads&lt;&#x2F;h2&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.4&#x2F;client-server-api&#x2F;#threading&quot;&gt;Threads&lt;&#x2F;a&gt;, a critical feature in terms of parity with other chat systems, have landed thanks to a whopping 6 MSCs: &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3440&quot;&gt;MSC3440&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3816&quot;&gt;MSC3816&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3856&quot;&gt;MSC3856&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3715&quot;&gt;MSC3715&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3771&quot;&gt;MSC3771&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3773&quot;&gt;MSC3773&lt;&#x2F;a&gt;. It‚Äôs been a lot of iteration on the reference implementations to get threads this far, and we‚Äôre excited to see how the client implementations evolve to provide more structured and less noisy communication for everyone - keep us updated with &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;category&#x2F;this-week-in-matrix&quot;&gt;TWIM&lt;&#x2F;a&gt; posts, please!&lt;&#x2F;p&gt;
&lt;p&gt;Threads have involved changes to event relationships (which were &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;06&#x2F;16&#x2F;matrix-v-1-3-release#aggregations-and-the-relationships-made-along-the-way&quot;&gt;fixed in v1.3&lt;&#x2F;a&gt;), read receipts, and notification counts, resulting in several different models and ways of solving the problem. We think we‚Äôve reached a point that works for conversational threads, though there‚Äôs work on the horizon for threads-only rooms, Twitter-style free-form threads, etc to cover more needs of users.&lt;&#x2F;p&gt;
&lt;p&gt;Currently, the demonstration implementation of threads in Synapse and Element is working its way out of the proof-of-concept and beta stages (which were sufficient to validate the MSCs) and are on their way to exiting beta. Keep an eye on the respective blogs for news about production-ready threads!&lt;&#x2F;p&gt;
&lt;h2 id=&quot;memo-edits&quot;&gt;üìù Edits&lt;&#x2F;h2&gt;
&lt;p&gt;Similar to reactions, err, &lt;em&gt;&lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;06&#x2F;16&#x2F;matrix-v-1-3-release#aggregations-and-the-relationships-made-along-the-way&quot;&gt;aggregations&lt;&#x2F;a&gt;&lt;&#x2F;em&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2676&quot;&gt;MSC2676&lt;&#x2F;a&gt; and its predecessors have been around for a long while. Edits have existed in the Element clients seemingly forever, and other clients have had troubles trying to implement the same feature: with it now in the spec, it should be a lot easier to bring edits into clients.&lt;&#x2F;p&gt;
&lt;p&gt;For edits, we‚Äôve taken the route of making the MSC match reality, for better or worse. MSCs which improve or add functionality to the system are very much welcome - &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;proposals&#x2F;&quot;&gt;writing an MSC&lt;&#x2F;a&gt; is relatively easy and helps the whole community.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;busts-in-silhouette-private-read-receipts&quot;&gt;üë• Private read receipts&lt;&#x2F;h2&gt;
&lt;p&gt;Not everyone wants to broadcast that they‚Äôve read a message, but also with read receipts tied into notifications those same people also probably don‚Äôt want stuck notifications. To address the problem, we‚Äôve added a new &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.4&#x2F;client-server-api&#x2F;#private-read-receipts&quot;&gt;m.read.private receipt type&lt;&#x2F;a&gt; which behaves exactly like m.read, but is only visible to you.&lt;&#x2F;p&gt;
&lt;p&gt;We still have a rework of the notifications system in our long-term plan, but this should hopefully cover the privacy concerns for the time being :)&lt;&#x2F;p&gt;
&lt;h2 id=&quot;the-full-changelog&quot;&gt;The full changelog&lt;&#x2F;h2&gt;
&lt;p&gt;MSCs are how the spec changes in the way it does - adding, fixing, and maintaining features for the whole ecosystem to use. The blog post can‚Äôt cover them all, but that doesn‚Äôt make them any less important! Check out the full changelog below, and the &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;proposals&#x2F;&quot;&gt;Spec Change Proposals&lt;&#x2F;a&gt; page for more information on how these MSCs got merged (hint: they submitted a proposal, which anyone can do - take a look at the &lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=SFkZz60RRfc&quot;&gt;Matrix Live episode&lt;&#x2F;a&gt; where Matthew covers the proposal process).&lt;&#x2F;p&gt;
&lt;h3 id=&quot;client-server-api&quot;&gt;Client-Server API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Removed Endpoints&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Remove unused policy room sharing mechanism, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3844&quot;&gt;MSC3844&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1196&quot;&gt;#1196&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add a &lt;code&gt;.m.rule.room.server_acl&lt;&#x2F;code&gt; push rule to match &lt;code&gt;m.room.server_acl&lt;&#x2F;code&gt; events, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3786&quot;&gt;MSC3786&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1190&quot;&gt;#1190&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1201&quot;&gt;#1201&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;Cross-Origin-Resource-Policy&lt;&#x2F;code&gt; (CORP) headers to media repository, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3828&quot;&gt;MSC3828&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1197&quot;&gt;#1197&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Copy a room&#x27;s &lt;code&gt;type&lt;&#x2F;code&gt; when upgrading it, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3818&quot;&gt;MSC3818&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1198&quot;&gt;#1198&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;room_types&lt;&#x2F;code&gt; filter and &lt;code&gt;room_type&lt;&#x2F;code&gt; response to &lt;code&gt;&#x2F;publicRooms&lt;&#x2F;code&gt;, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3827&quot;&gt;MSC3827&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1199&quot;&gt;#1199&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;m.replace&lt;&#x2F;code&gt; relations (event edits), as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2676&quot;&gt;MSC2676&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1211&quot;&gt;#1211&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;m.read.private&lt;&#x2F;code&gt; receipts, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2285&quot;&gt;MSC2285&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1216&quot;&gt;#1216&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make &lt;code&gt;m.fully_read&lt;&#x2F;code&gt; optional on &lt;code&gt;&#x2F;read_markers&lt;&#x2F;code&gt;, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2285&quot;&gt;MSC2285&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1216&quot;&gt;#1216&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow &lt;code&gt;m.fully_read&lt;&#x2F;code&gt; markers to be set from &lt;code&gt;&#x2F;receipts&lt;&#x2F;code&gt;, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2285&quot;&gt;MSC2285&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1216&quot;&gt;#1216&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add threading via &lt;code&gt;m.thread&lt;&#x2F;code&gt; relations, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3440&quot;&gt;MSC3440&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3816&quot;&gt;MSC3816&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3856&quot;&gt;MSC3856&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3715&quot;&gt;MSC3715&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1254&quot;&gt;#1254&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add per-thread notifications and read receipts, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3771&quot;&gt;MSC3771&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3773&quot;&gt;MSC3773&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1255&quot;&gt;#1255&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Mention that the &lt;code&gt;&#x2F;rooms&#x2F;{roomId}&#x2F;invite&lt;&#x2F;code&gt; endpoint will return a 200 response if the user is already invited to the room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1084&quot;&gt;#1084&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix various typos throughout the specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1135&quot;&gt;#1135&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1161&quot;&gt;#1161&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1164&quot;&gt;#1164&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1170&quot;&gt;#1170&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1180&quot;&gt;#1180&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1215&quot;&gt;#1215&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1238&quot;&gt;#1238&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1243&quot;&gt;#1243&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Describe return codes for account data endpoints, and clarify that per-room data does not inherit from the global data. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1155&quot;&gt;#1155&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that policy rule globs work like ACL globs. Contributed by Nico. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1165&quot;&gt;#1165&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the format of some structures in the End-to-end encryption module. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1166&quot;&gt;#1166&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add HTML anchors for object definitions in the formatted specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1174&quot;&gt;#1174&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Tweak the styling of &lt;code&gt;&amp;lt;code&amp;gt;&lt;&#x2F;code&gt; snippets in tables rendered from OpenAPI definitions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1179&quot;&gt;#1179&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update &amp;quot;API Standards&amp;quot; section to clarify how JSON is used. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1185&quot;&gt;#1185&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that the &amp;quot;device_id&amp;quot;, &amp;quot;user_id&amp;quot; and &amp;quot;access_token&amp;quot; fields are required in the response body of &lt;code&gt;POST &#x2F;_matrix&#x2F;client&#x2F;v3&#x2F;login&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1210&quot;&gt;#1210&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reinforce the relationship of refreshed access tokens to transaction IDs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1236&quot;&gt;#1236&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify enum values by separating possible values with commas. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1240&quot;&gt;#1240&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;server-server-api&quot;&gt;Server-Server API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add per-thread notifications and read receipts, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3771&quot;&gt;MSC3771&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;3773&quot;&gt;MSC3773&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1255&quot;&gt;#1255&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add HTML anchors for object definitions in the formatted specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1174&quot;&gt;#1174&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Tweak the styling of &lt;code&gt;&amp;lt;code&amp;gt;&lt;&#x2F;code&gt; snippets in tables rendered from OpenAPI definitions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1179&quot;&gt;#1179&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update &amp;quot;API Standards&amp;quot; section to clarify how JSON is used. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1185&quot;&gt;#1185&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;application-service-api&quot;&gt;Application Service API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Breaking Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Replace homeserver authorization approach with an &lt;code&gt;Authorization&lt;&#x2F;code&gt; header instead of &lt;code&gt;access_token&lt;&#x2F;code&gt; when talking to the application service, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec-proposals&#x2F;pull&#x2F;2832&quot;&gt;MSC2832&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1200&quot;&gt;#1200&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add HTML anchors for object definitions in the formatted specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1174&quot;&gt;#1174&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;identity-service-api&quot;&gt;Identity Service API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add HTML anchors for object definitions in the formatted specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1174&quot;&gt;#1174&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update &amp;quot;API Standards&amp;quot; section to clarify how JSON is used. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1185&quot;&gt;#1185&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;push-gateway-api&quot;&gt;Push Gateway API&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add HTML anchors for object definitions in the formatted specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1174&quot;&gt;#1174&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;room-versions&quot;&gt;Room Versions&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;For room versions 1 through 10, clarify that events with rejected &lt;code&gt;auth_events&lt;&#x2F;code&gt; must be rejected. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1137&quot;&gt;#1137&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;For room versions 2‚Äì10: correct a mistaken clarification to the state resolution algorithm. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1158&quot;&gt;#1158&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;For room versions 7 through 10: Clarify that &lt;code&gt;invite-&amp;gt;knock&lt;&#x2F;code&gt; is actually a legal transition. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1175&quot;&gt;#1175&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3 id=&quot;appendices&quot;&gt;Appendices&lt;&#x2F;h3&gt;
&lt;p&gt;No significant changes.&lt;&#x2F;p&gt;
&lt;h3 id=&quot;internal-changes-tooling&quot;&gt;Internal Changes&#x2F;Tooling&lt;&#x2F;h3&gt;
&lt;p&gt;&lt;strong&gt;Backwards Compatible Changes&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add internal changes changelog section. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1194&quot;&gt;#1194&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;&lt;strong&gt;Spec Clarifications&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Render HTML anchors for object definition tables. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1191&quot;&gt;#1191&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Give rendered-data sections a background and some padding. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1195&quot;&gt;#1195&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix rendering of shortcodes within the client-server API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1205&quot;&gt;#1205&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the spacing of mapping types generated from the OpenAPI spec. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-spec&#x2F;issues&#x2F;1230&quot;&gt;#1230&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Announcing Third Room Tech Preview 1</title>
		<published>2022-09-27T14:34:55+00:00</published>
		<updated>2022-09-27T14:34:55+00:00</updated>
		<link rel="alternate" href="/blog/2022/09/27/announcing-third-room-tech-preview-1/" type="text/html"/>
		<id>/blog/2022/09/27/announcing-third-room-tech-preview-1/</id>
		<content type="html">&lt;p&gt;We&#x27;re excited to announce the first tech preview of &lt;a href=&quot;https:&#x2F;&#x2F;thirdroom.io&#x2F;&quot;&gt;Third Room&lt;&#x2F;a&gt;, an open, standards-based, decentralised vision of the metaverse for the open Web, built entirely on Matrix‚Ä¶ without cryptocurrencies, NFTs or walled gardens.&lt;&#x2F;p&gt;
&lt;p&gt;To see what it&#x27;s all about, head over to &lt;a href=&quot;https:&#x2F;&#x2F;thirdroom.io&#x2F;preview&quot;&gt;https:&#x2F;&#x2F;thirdroom.io&#x2F;preview&lt;&#x2F;a&gt; - or come chat in &lt;a href=&quot;https:&#x2F;&#x2F;matrix.to&#x2F;#&#x2F;#thirdroom-dev:matrix.org&quot;&gt;#thirdroom-dev:matrix.org&lt;&#x2F;a&gt; to learn more!&lt;&#x2F;p&gt;
&lt;iframe src=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;embed&#x2F;skC5TYRAgKE&quot; loading=&quot;lazy&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen&gt;&lt;&#x2F;iframe&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.68 released</title>
		<published>2022-09-27T14:34:55+00:00</published>
		<updated>2022-09-27T14:34:55+00:00</updated>
		<link rel="alternate" href="/blog/2022/09/27/synapse-1-68-released/" type="text/html"/>
		<id>/blog/2022/09/27/synapse-1-68-released/</id>
		<content type="html">&lt;p&gt;Hey everyone, it&#x27;s time for a new Synapse release! &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.68.0&quot;&gt;Synapse
1.68&lt;&#x2F;a&gt; just dropped,
let&#x27;s have a look at what&#x27;s inside.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;dependency-changes&quot;&gt;Dependency changes&lt;&#x2F;h2&gt;
&lt;p&gt;As announced in the &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;09&#x2F;14&#x2F;synapse-1-67-released&quot;&gt;Synapse 1.67 release
announcement&lt;&#x2F;a&gt;, Synapse
1.68 raises the minimum supported version of SQLite to version v3.27.0. This
means that, if your installation of Synapse is using SQLite to manage its
database, and the SQLite version used is lower than 3.27, you will need to
upgrade to a more recent version before updating to Synapse 1.68. This change does not impact deployments using the &lt;code&gt;matrixdotorg&#x2F;synapse&lt;&#x2F;code&gt; Docker image. &lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.68 also introduces the requirement of a Rust compiler for source
checkouts. The minimum required version of Rust is 1.58.1. Installations that
use &lt;code&gt;pip install matrix-synapse&lt;&#x2F;code&gt;, Debian packages from &lt;code&gt;packages.matrix.org&lt;&#x2F;code&gt; or
the &lt;code&gt;matrixdotorg&#x2F;synapse&lt;&#x2F;code&gt; Docker image to manage and run Synapse, are not
impacted by this change.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.68&#x2F;upgrade#upgrading-to-v1680&quot;&gt;upgrade
notes&lt;&#x2F;a&gt; for more information.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;admin-api-improvements&quot;&gt;Admin API improvements&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse 1.68 introduces a new admin API which allows server administrators to
query events in a given room that have been sent within a specific time window.
This API mirrors &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.3&#x2F;client-server-api&#x2F;#get_matrixclientv3roomsroomidmessages&quot;&gt;the specification&#x27;s &lt;code&gt;&#x2F;messages&lt;&#x2F;code&gt;
endpoint&lt;&#x2F;a&gt;,
and allows, among other things, paginating through a room&#x27;s history. See &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.68&#x2F;admin_api&#x2F;rooms.html#room-messages-api&quot;&gt;the
documentation&lt;&#x2F;a&gt; for more information.&lt;&#x2F;p&gt;
&lt;p&gt;This version of Synapse also introduces a new admin API to help administrator of
homeservers using an external authentication provider. This endpoint allows
looking up a specific identifier on the authentication provider and resolving it
into the identifier of the local user it&#x27;s associated with, if any. See &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.68&#x2F;admin_api&#x2F;user_admin_api.html#find-a-user-based-on-their-id-in-an-auth-provider&quot;&gt;the
documentation&lt;&#x2F;a&gt; for more information.&lt;&#x2F;p&gt;
&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.68&#x2F;admin_api&#x2F;user_admin_api.html#user-admin-api&quot;&gt;user admin
API&lt;&#x2F;a&gt;
has also been updated to allow administrator of homeservers &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;latest&#x2F;consent_tracking.html&quot;&gt;requiring agreement
to the server&#x27;s terms and
conditions&lt;&#x2F;a&gt;
to view and edit the timestamp at which each user has provided their agreement.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse 1.68 greatly improves the validation of user input on most of the
account management API endpoints.&lt;&#x2F;p&gt;
&lt;p&gt;This version of Synapse also adds a new &lt;code&gt;request_id_header&lt;&#x2F;code&gt; option to the
configuration of HTTP listeners, which allows tracking the identifier Synapse
generates for each request in that request&#x27;s response. This can be helpful for
correlating Synapse logs with reverse proxy logs. See &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.68&#x2F;usage&#x2F;configuration&#x2F;config_documentation.html#listeners&quot;&gt;the
documentation&lt;&#x2F;a&gt; for more information.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.68.0&quot;&gt;full
changelog&lt;&#x2F;a&gt; for a
complete list of changes in this release. Also please have a look at the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.68&#x2F;upgrade#upgrading-to-v1680&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for this version.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to this release, including (in no particular
order) &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dakariakin&quot;&gt;Denis Kariakin&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk
Klimpel&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;www.beeper.com&#x2F;&quot;&gt;Beeper&lt;&#x2F;a&gt;, as
well as anyone helping us make Synapse better by sharing their feedback and
reporting issues.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.67 released</title>
		<published>2022-09-14T11:03:21+00:00</published>
		<updated>2022-09-14T11:03:21+00:00</updated>
		<link rel="alternate" href="/blog/2022/09/14/synapse-1-67-released/" type="text/html"/>
		<id>/blog/2022/09/14/synapse-1-67-released/</id>
		<content type="html">&lt;p&gt;It&#x27;s that time again - Synapse release time! &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.67.0&quot;&gt;Synapse
1.67&lt;&#x2F;a&gt; is fresh out
of the oven, let&#x27;s have a look at what&#x27;s inside.&lt;&#x2F;p&gt;
&lt;span id=&quot;continue-reading&quot;&gt;&lt;&#x2F;span&gt;&lt;h2 id=&quot;removal-of-tcp-replication&quot;&gt;Removal of TCP replication&lt;&#x2F;h2&gt;
&lt;p&gt;As announced in the &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;09&#x2F;02&#x2F;synapse-1-66-released&quot;&gt;Synapse 1.66 release
announcement&lt;&#x2F;a&gt;, Synapse 1.67 removes support for the legacy TCP replication protocol.&lt;&#x2F;p&gt;
&lt;p&gt;As a reminder, Synapse can be configured to use workers to spread its load over
multiple processes, or even multiple machines. These workers communicate between
each other (and with the main Synapse process) using something we call
&amp;quot;replication&amp;quot;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.18.0&quot;&gt;Synapse 1.18&lt;&#x2F;a&gt;
deprecated its TCP-based replication protocol, and replaced it with a brand new
one using &lt;a href=&quot;https:&#x2F;&#x2F;redis.io&#x2F;&quot;&gt;Redis&lt;&#x2F;a&gt;. As of Synapse 1.67, this Redis-based
protocol is now the only protocol that can be used.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.67&#x2F;upgrade.html#direct-tcp-replication-is-no-longer-supported-migrate-to-redis&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;changes-for-installations-using-a-source-checkout&quot;&gt;Changes for installations using a source checkout&lt;&#x2F;h2&gt;
&lt;p&gt;Server admins who installed Synapse using a source checkout might already be
familiar with &lt;a href=&quot;https:&#x2F;&#x2F;python-poetry.org&#x2F;&quot;&gt;Poetry&lt;&#x2F;a&gt;. This is a tool we use
to better manage dependencies within Synapse. As of this version, we have
updated Synapse&#x27;s dependency on Poetry to require Poetry 1.2, which was recently
released.&lt;&#x2F;p&gt;
&lt;p&gt;It is also worth noting that Synapse 1.68, which is due to release on the 27th
of September, will require a Rust compiler when installed from a source
checkout. This is because we are in the process of introducing Rust in Synapse&#x27;s
code base, in order to make some hot code paths more efficient. See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.67&#x2F;upgrade.html#rust-requirement-in-the-next-release&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;p&gt;These two changes should not impact installations that use &lt;code&gt;pip install matrix-synapse&lt;&#x2F;code&gt;, Debian packages from &lt;code&gt;packages.matrix.org&lt;&#x2F;code&gt; or the
&lt;code&gt;matrixdotorg&#x2F;synapse&lt;&#x2F;code&gt; Docker image to manage and run Synapse.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse 1.68 (due on the 27th of September) will also require SQLite v3.27.0 or
higher when run with SQLite. Synapse 1.67 is the last version of Synapse to
support SQLite versions 3.22 to 3.26. See the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.67&#x2F;upgrade.html#sqlite-version-requirement-in-the-next-release&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.67.0&quot;&gt;full
changelog&lt;&#x2F;a&gt; for a
complete list of changes in this release. Also please have a look at the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.67&#x2F;upgrade#upgrading-to-v1670&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for this version.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend our
thanks to everyone who contributed to this release, including (in no particular
order) &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk Klimpel&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;www.beeper.com&#x2F;&quot;&gt;Beeper&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Vetchu&quot;&gt;Jacek
Ku≈õnierz&lt;&#x2F;a&gt;, as well as anyone helping us make Synapse
better by sharing their feedback and reporting issues.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Security release of matrix-appservice-irc 0.35.0 (High severity)</title>
		<published>2022-09-13T14:56:43+00:00</published>
		<updated>2022-09-13T14:56:43+00:00</updated>
		<link rel="alternate" href="/blog/2022/09/13/security-release-of-matrix-appservice-irc-0-35-0-high-severity/" type="text/html"/>
		<id>/blog/2022/09/13/security-release-of-matrix-appservice-irc-0-35-0-high-severity/</id>
		<content type="html">&lt;p&gt;We&#x27;ve released a new version of matrix.org&#x27;s node-irc 1.3.0 and
matrix-appservice-irc 0.35.0, to patch several security issues:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;IRC mode operator confusion (Low, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-appservice-irc&#x2F;security&#x2F;advisories&#x2F;GHSA-cq7q-5c67-w39w&quot;&gt;GHSA-cq7q-5c67-w39w&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Parsing issue leading to room takeovers (High, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-appservice-irc&#x2F;security&#x2F;advisories&#x2F;GHSA-xvqg-mv25-rwvw&quot;&gt;GHSA-xvqg-mv25-rwvw&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Undisclosed issue (Moderate, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-appservice-irc&#x2F;security&#x2F;advisories&#x2F;GHSA-r3p6-cg2c-c4qw&quot;&gt;GHSA-r3p6-cg2c-c4qw&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;The details of the final vulnerability will be released at a later date,
pending an audit of the codebase to ensure it&#x27;s not affected by other similar
vulnerabilities.&lt;&#x2F;p&gt;
&lt;p&gt;The vulnerabilities have been patched in node-irc version 1.3.0 and
matrix-appservice-irc 0.35.0. You can get the release on
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-appservice-irc&#x2F;releases&quot;&gt;Github&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The bridges running on the Libera Chat, OFTC and other networks bridged by the
Matrix.org Foundation have been patched.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;Please upgrade your IRC bridge as soon as possible.&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The above vulnerabilities were reported by &lt;a href=&quot;https:&#x2F;&#x2F;valentin-lorentz.fr&#x2F;&quot;&gt;Val
Lorentz&lt;&#x2F;a&gt;. Thank you!&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.66 released</title>
		<published>2022-09-05T09:23:27+00:00</published>
		<updated>2022-09-08T07:08:36+00:00</updated>
		<link rel="alternate" href="/blog/2022/09/02/synapse-1-66-released/" type="text/html"/>
		<id>/blog/2022/09/02/synapse-1-66-released/</id>
		<content type="html">&lt;p&gt;Hey all, we&#x27;ve just released &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.66.0&quot;&gt;Synapse 1.66&lt;&#x2F;a&gt;! Let&#x27;s have a
look at what&#x27;s inside this release.&lt;&#x2F;p&gt;
&lt;span id=&quot;continue-reading&quot;&gt;&lt;&#x2F;span&gt;&lt;h2 id=&quot;removal-of-email-verification-delegation&quot;&gt;Removal of email verification delegation&lt;&#x2F;h2&gt;
&lt;p&gt;Before Synapse 1.66, homeserver administrators had the possibility to
configure Synapse to delegate verifying email addresses to an identity
server (using the &lt;code&gt;account_threepid_delegates.email&lt;&#x2F;code&gt; configuration setting).
This feature relied on old APIs from the Matrix specification that have since
been &lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;v1.3&#x2F;changelog&#x2F;#identity-service-api-1-1&quot;&gt;removed&lt;&#x2F;a&gt; from it.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;08&#x2F;03&#x2F;synapse-1-64-released&quot;&gt;Synapse 1.64&lt;&#x2F;a&gt; announced the
deprecation of this feature, and the addition of a warning at startup when
the configuration setting is in use.&lt;&#x2F;p&gt;
&lt;p&gt;As of Synapse 1.66, support for this feature has been fully removed, and
Synapse will refuse to start if the configuration setting for it is in use.&lt;&#x2F;p&gt;
&lt;p&gt;If this has not already been done, administrators of servers that were
previously using this feature are encouraged to configure an SMTP server that
Synapse can use to verify email addresses on its own. See the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.66&#x2F;usage&#x2F;configuration&#x2F;config_documentation.html#email&quot;&gt;configuration guide&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;p&gt;Also see the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.66&#x2F;upgrade.html#delegation-of-email-validation-no-longer-supported&quot;&gt;upgrade notes&lt;&#x2F;a&gt;
for more information.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;planned-removal-of-support-for-tcp-replication&quot;&gt;Planned removal of support for TCP replication&lt;&#x2F;h2&gt;
&lt;p&gt;Most server administrators already know that Synapse can be made to scale
horizontally by deploying &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;latest&#x2F;workers.html&quot;&gt;workers&lt;&#x2F;a&gt;. Workers are
processes running alongside Synapse&#x27;s main process to allow offloading some
of the work it would otherwise be doing, load balancing some of the traffic,
etc.&lt;&#x2F;p&gt;
&lt;p&gt;In a deployment of Synapse that uses workers, these processes use replication
to share information between themselves. One of the earliest protocols
Synapse used for replication was built on top of TCP.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.18.0&quot;&gt;Synapse 1.18&lt;&#x2F;a&gt; introduced a new
Redis-based replication protocol for workers to use and deprecated the
TCP-based protocol, without specifying a removal date.&lt;&#x2F;p&gt;
&lt;p&gt;This week we&#x27;re announcing that support for TCP replication will be removed
from Synapse in version 1.67, which is expected to come out around Sep 13th.
See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.66.0&quot;&gt;release notes&lt;&#x2F;a&gt; for more
details.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;everything-else&quot;&gt;Everything else&lt;&#x2F;h2&gt;
&lt;p&gt;Synapse 1.66 also includes some improvements to validation on endpoints using
&lt;a href=&quot;https:&#x2F;&#x2F;spec.matrix.org&#x2F;latest&#x2F;client-server-api&#x2F;#user-interactive-authentication-api&quot;&gt;User-Interactive Authentication&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;This version of Synapse also adds compression support for federation traffic.
See &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.66&#x2F;usage&#x2F;configuration&#x2F;config_documentation.html#listeners&quot;&gt;the configuration guide&lt;&#x2F;a&gt;
for more information on how to compress HTTP traffic.&lt;&#x2F;p&gt;
&lt;p&gt;Furthermore, Synapse 1.66 improves the &lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.66&#x2F;admin_api&#x2F;rooms.html#room-details-api&quot;&gt;Room Details amin API&lt;&#x2F;a&gt;
and allows administrators to see if all local users have marked a given room
as &amp;quot;forgotten&amp;quot;.&lt;&#x2F;p&gt;
&lt;p&gt;See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.66.0&quot;&gt;full
changelog&lt;&#x2F;a&gt; for a
complete list of changes in this release. Also please have a look at the
&lt;a href=&quot;https:&#x2F;&#x2F;matrix-org.github.io&#x2F;synapse&#x2F;v1.66&#x2F;upgrade#upgrading-to-v1660&quot;&gt;upgrade
notes&lt;&#x2F;a&gt;
for this version.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse is a Free and Open Source Software project, and we&#x27;d like to extend
our thanks to everyone who contributed to this release, including (in no
particular order) &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklimpel&quot;&gt;Dirk Klimpel&lt;&#x2F;a&gt; and
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;AntoninLoubiere&quot;&gt;Antonin Loubiere&lt;&#x2F;a&gt;, as well as anyone
helping us make Synapse better by sharing their feedback and reporting
issues.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.7.3 released</title>
		<published>2019-12-31T00:00:00+00:00</published>
		<updated>2019-12-31T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/12/31/synapse-1-7-3-released/" type="text/html"/>
		<id>/blog/2019/12/31/synapse-1-7-3-released/</id>
		<content type="html">&lt;p&gt;Hi all,&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ve just released Synapse 1.7.3 - an important bug fix to address a class of failures due to malformed events.  We&#x27;ve seen this in the wild over the last few days, so we&#x27;d recommend updating as soon as possible, especially if you are having problems federating.&lt;&#x2F;p&gt;
&lt;p&gt;Get the new release from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.7.3&quot;&gt;github&lt;&#x2F;a&gt; or any of the sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md.&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.7.2 is:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-7-3-2019-12-31&quot;&gt;Synapse 1.7.3 (2019-12-31)&lt;&#x2F;h1&gt;
&lt;p&gt;This release fixes a long-standing bug in the state resolution algorithm.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix exceptions caused by state resolution choking on malformed events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6608&quot;&gt;#6608&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.7.2 released</title>
		<published>2019-12-20T00:00:00+00:00</published>
		<updated>2019-12-20T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/12/20/synapse-1-7-2-released/" type="text/html"/>
		<id>/blog/2019/12/20/synapse-1-7-2-released/</id>
		<content type="html">&lt;p&gt;Hi all,&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ve just released Synapse 1.7.2 - a minor point release to address two regressions which snuck into 1.7.0 and 1.7.1.  Sorry for the upgrade faff; hopefully we will be back to a saner release cadence shortly.  Reminder that if you are on 1.7.0 or earlier you should upgrade asap as 1.7.1 contained security fixes.&lt;&#x2F;p&gt;
&lt;p&gt;Get the new release from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.7.2&quot;&gt;github&lt;&#x2F;a&gt; or any of the sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md.&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.7.1 is:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-7-2-2019-12-20&quot;&gt;Synapse 1.7.2 (2019-12-20)&lt;&#x2F;h1&gt;
&lt;p&gt;This release fixes some regressions introduced in Synapse 1.7.0 and 1.7.1.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a regression introduced in Synapse 1.7.1 which caused errors when attempting to backfill rooms over federation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6576&quot;&gt;#6576&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug introduced in Synapse 1.7.0 which caused an error on startup when upgrading from versions before 1.3.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6578&quot;&gt;#6578&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.7.1 released</title>
		<published>2019-12-18T00:00:00+00:00</published>
		<updated>2019-12-18T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/12/18/synapse-1-7-1-released/" type="text/html"/>
		<id>/blog/2019/12/18/synapse-1-7-1-released/</id>
		<content type="html">&lt;p&gt;Hi folks; today we are releasing Synapse 1.7.1.&lt;&#x2F;p&gt;
&lt;p&gt;This is a security release which fixes some problems which affected all previous versions of Synapse. We advise all admins whose servers are open to public federation to upgrade as soon as possible.&lt;&#x2F;p&gt;
&lt;p&gt;Full details follow, but the most important change improves event authorization, thereby preventing the ability to add certain events to a given room erroneously.&lt;&#x2F;p&gt;
&lt;p&gt;You can get the new release from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.7.1&quot;&gt;github&lt;&#x2F;a&gt; or any of the sources mentioned at https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;INSTALL.md.&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.7.0 follows:&lt;&#x2F;p&gt;
&lt;h2 id=&quot;security-updates&quot;&gt;Security updates&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a bug which could cause room events to be incorrectly authorized using events from a different room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6501&quot;&gt;#6501&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6503&quot;&gt;#6503&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6521&quot;&gt;#6521&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6524&quot;&gt;#6524&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6530&quot;&gt;#6530&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6531&quot;&gt;#6531&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug causing responses to the &lt;code&gt;&#x2F;context&lt;&#x2F;code&gt; client endpoint to not use the pruned version of the event. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6553&quot;&gt;#6553&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a cause of state resets in room versions 2 onwards. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6556&quot;&gt;#6556&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6560&quot;&gt;#6560&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a bug which could cause the federation server to incorrectly return errors when handling certain obscure event graphs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6526&quot;&gt;#6526&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6527&quot;&gt;#6527&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.7.0 released</title>
		<published>2019-12-13T00:00:00+00:00</published>
		<updated>2019-12-13T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/12/13/synapse-1-7-0-released/" type="text/html"/>
		<id>/blog/2019/12/13/synapse-1-7-0-released/</id>
		<content type="html">&lt;p&gt;Hello people, it‚Äôs Synapse 1.7.0 time.&lt;&#x2F;p&gt;
&lt;p&gt;This release includes some long requested features, most notably the ability to automatically delete message data after a predefined period. For more details take a look at the config &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.7.0&#x2F;docs&#x2F;sample_config.yaml#L332-L393&quot;&gt;here&lt;&#x2F;a&gt; ‚îÄ it should be pretty self explanatory.&lt;&#x2F;p&gt;
&lt;p&gt;Another significant change this release is to explicitly set room directories to be private by default. Previously it was possible to inadvertently configure the directory to be visible to arbitrary Matrix servers and the internet in general.&lt;&#x2F;p&gt;
&lt;p&gt;This means that for those admins who want their room directories to be publicly searchable (matrix.org for instance) they need to explicitly say so in the config. For more details see the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.7.0&#x2F;UPGRADE.rst#upgrading-to-v170&quot;&gt;upgrade notes&lt;&#x2F;a&gt; and our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2019&#x2F;11&#x2F;09&#x2F;avoiding-unwelcome-visitors-on-private-matrix-servers&#x2F;&quot;&gt;blog post&lt;&#x2F;a&gt; explaining the situation in greater detail.&lt;&#x2F;p&gt;
&lt;p&gt;We also have early support for ephemeral messages, as well as the ability to specify a reason when rejecting an invite (amongst other actions).&lt;&#x2F;p&gt;
&lt;p&gt;Aside from all of that, we want to let you know about some changes on the horizon. Currently Synapse runs Sqlite by default. This is great in that it gets new admins going quickly without needing to install and configure Postgres. The downside of using Sqlite is that it offers very poor performance, especially once a server tries to join the federation. In truth Sqlite is only really there to demonstrate the service, but for anything other than the most trivial cases it is essential to migrate to Postgres.&lt;&#x2F;p&gt;
&lt;p&gt;Over the past few months we‚Äôve been working to improve the migration path to Postgres such that finally we feel confident to actively encourage admins to migrate. What‚Äôs more, in a future release we will forcibly prevent SQLite-backed servers federating unless the admin explicitly sets a config flag to show that they understand the trade-off they are making.&lt;&#x2F;p&gt;
&lt;p&gt;Overall we see these changes as something that will improve everyone‚Äôs experience of the matrix federation. We‚Äôll talk more about this closer to the time, but please expect a change in the coming months and if you are running SQLite, consider this a nudge to get yourself migrated.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.7.0&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.6.1 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-7-0-2019-12-13&quot;&gt;Synapse 1.7.0 (2019-12-13)&lt;&#x2F;h1&gt;
&lt;p&gt;This release changes the default settings so that only local authenticated users can query the server&#x27;s room directory. See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.7.0&#x2F;UPGRADE.rst#upgrading-to-v170&quot;&gt;upgrade notes&lt;&#x2F;a&gt; for details.&lt;&#x2F;p&gt;
&lt;p&gt;Support for SQLite versions before 3.11 is now deprecated. A future release will refuse to start if used with an SQLite version before 3.11.&lt;&#x2F;p&gt;
&lt;p&gt;Administrators are reminded that SQLite should not be used for production instances. Instructions for migrating to Postgres are available &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;v1.7.0&#x2F;docs&#x2F;postgres.md&quot;&gt;here&lt;&#x2F;a&gt;. A future release of synapse will, by default, disable federation for servers using SQLite.&lt;&#x2F;p&gt;
&lt;p&gt;No significant changes since 1.7.0rc2.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-7-0rc2-2019-12-11&quot;&gt;Synapse 1.7.0rc2 (2019-12-11)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix incorrect error message for invalid requests when setting user&#x27;s avatar URL. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6497&quot;&gt;#6497&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix support for SQLite 3.7. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6499&quot;&gt;#6499&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix regression where sending email push would not work when using a pusher worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6507&quot;&gt;#6507&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6509&quot;&gt;#6509&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-7-0rc1-2019-12-09&quot;&gt;Synapse 1.7.0rc1 (2019-12-09)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Implement per-room message retention policies. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5815&quot;&gt;#5815&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6436&quot;&gt;#6436&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add etag and count fields to key backup endpoints to help clients guess if there are new keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5858&quot;&gt;#5858&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;&#x2F;admin&#x2F;v2&#x2F;users&lt;&#x2F;code&gt; endpoint with pagination. Contributed by Awesome Technologies Innovationslabor GmbH. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5925&quot;&gt;#5925&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Require User-Interactive Authentication for &lt;code&gt;&#x2F;account&#x2F;3pid&#x2F;add&lt;&#x2F;code&gt;, meaning the user&#x27;s password will be required to add a third-party ID to their account. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6119&quot;&gt;#6119&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Implement the &lt;code&gt;&#x2F;_matrix&#x2F;federation&#x2F;unstable&#x2F;net.atleastfornow&#x2F;state&#x2F;&amp;lt;context&amp;gt;&lt;&#x2F;code&gt; API as drafted in MSC2314. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6176&quot;&gt;#6176&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Configure privacy-preserving settings by default for the room directory. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6355&quot;&gt;#6355&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add ephemeral messages support by partially implementing &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2228&quot;&gt;MSC2228&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6409&quot;&gt;#6409&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2367&quot;&gt;MSC 2367&lt;&#x2F;a&gt;, which allows specifying a reason on all membership events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6434&quot;&gt;#6434&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Transfer non-standard power levels on room upgrade. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6237&quot;&gt;#6237&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix error from the Pillow library when uploading RGBA images. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6241&quot;&gt;#6241&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Correctly apply the event filter to the &lt;code&gt;state&lt;&#x2F;code&gt;, &lt;code&gt;events_before&lt;&#x2F;code&gt; and &lt;code&gt;events_after&lt;&#x2F;code&gt; fields in the response to &lt;code&gt;&#x2F;context&lt;&#x2F;code&gt; requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6329&quot;&gt;#6329&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix caching devices for remote users when using workers, so that we don&#x27;t attempt to refetch (and potentially fail) each time a user requests devices. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6332&quot;&gt;#6332&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent account data syncs getting lost across TCP replication. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6333&quot;&gt;#6333&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug: TypeError in &lt;code&gt;register_user()&lt;&#x2F;code&gt; while using LDAP auth module. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6406&quot;&gt;#6406&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix an intermittent exception when handling read-receipts. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6408&quot;&gt;#6408&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix broken guest registration when there are existing blocks of numeric user IDs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6420&quot;&gt;#6420&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix startup error when http proxy is defined. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6421&quot;&gt;#6421&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix error when using synapse_port_db on a vanilla synapse db. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6449&quot;&gt;#6449&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix uploading multiple cross signing signatures for the same user. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6451&quot;&gt;#6451&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug which lead to exceptions being thrown in a loop when a cross-signed device is deleted. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6462&quot;&gt;#6462&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;synapse_port_db&lt;&#x2F;code&gt; not exiting with a 0 code if something went wrong during the port process. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6470&quot;&gt;#6470&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve sanity-checking when receiving events over federation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6472&quot;&gt;#6472&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix inaccurate per-block Prometheus metrics. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6491&quot;&gt;#6491&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix small performance regression for sending invites. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6493&quot;&gt;#6493&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Back out cross-signing code added in Synapse 1.5.0, which caused a performance regression. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6494&quot;&gt;#6494&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Update documentation and variables in user contributed systemd reference file. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6369&quot;&gt;#6369&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6490&quot;&gt;#6490&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix link in the user directory documentation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6388&quot;&gt;#6388&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add build instructions to the docker readme. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6390&quot;&gt;#6390&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Switch Ubuntu package install recommendation to use python3 packages in INSTALL.md. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6443&quot;&gt;#6443&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Write some docs for the quarantine_media api. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6458&quot;&gt;#6458&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert CONTRIBUTING.rst to markdown (among other small fixes). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6461&quot;&gt;#6461&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Remove admin&#x2F;v1&#x2F;users_paginate endpoint. Contributed by Awesome Technologies Innovationslabor GmbH. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5925&quot;&gt;#5925&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove fallback for federation with old servers which lack the &#x2F;federation&#x2F;v1&#x2F;state_ids API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6488&quot;&gt;#6488&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add benchmarks for structured logging and improve output performance. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6266&quot;&gt;#6266&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve the performance of outputting structured logging. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6322&quot;&gt;#6322&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor some code in the event authentication path for clarity. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6343&quot;&gt;#6343&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6468&quot;&gt;#6468&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6480&quot;&gt;#6480&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up some unnecessary quotation marks around the codebase. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6362&quot;&gt;#6362&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Complain on startup instead of 500&#x27;ing during runtime when &lt;code&gt;public_baseurl&lt;&#x2F;code&gt; isn&#x27;t set when necessary. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6379&quot;&gt;#6379&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a test scenario to make sure room history purges don&#x27;t break &lt;code&gt;&#x2F;messages&lt;&#x2F;code&gt; in the future. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6392&quot;&gt;#6392&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarifications for the email configuration settings. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6423&quot;&gt;#6423&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add more tests to the blacklist when running in worker mode. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6429&quot;&gt;#6429&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor data store layer to support multiple databases in the future. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6454&quot;&gt;#6454&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6464&quot;&gt;#6464&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6469&quot;&gt;#6469&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6487&quot;&gt;#6487&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Port synapse.rest.client.v1 to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6482&quot;&gt;#6482&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Port synapse.rest.client.v2_alpha to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6483&quot;&gt;#6483&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Port SyncHandler to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6484&quot;&gt;#6484&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.6.0 released</title>
		<published>2019-11-26T00:00:00+00:00</published>
		<updated>2019-11-26T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/11/26/synapse-1-6-0-released/" type="text/html"/>
		<id>/blog/2019/11/26/synapse-1-6-0-released/</id>
		<content type="html">&lt;p&gt;Synapse 1.6.0 has landed and is here to brighten your day!&lt;&#x2F;p&gt;
&lt;p&gt;1.6.0&#x27;s most notable feature is that of label based filtering. It allows for messages to be tagged with a given label so that clients can filter on the label, this means that clients can subscribe to specific topics in a room, such as #lunch.&lt;&#x2F;p&gt;
&lt;p&gt;Completely separately, from here on in new rooms will be version 5 by default, all this means in practice is that servers will respect server signing key validity periods. This won&#x27;t make a lot of difference in day to day operation, but it is an important security consideration and we now have sufficient penetration across the federation to make version 5 the default.&lt;&#x2F;p&gt;
&lt;p&gt;Aside from that there are a bunch of bug fixes and improvements, including fixing a bug that in some cases prevented messages being decrypted shortly after a restart (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6363&quot;&gt;#6363&lt;&#x2F;a&gt;) and generally improving the room upgrade experience (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6232&quot;&gt;#6232&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6235&quot;&gt;#6235&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.6.0&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.5.1 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-6-0-2019-11-26&quot;&gt;Synapse 1.6.0 (2019-11-26)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix phone home stats reporting. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6418&quot;&gt;#6418&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-6-0rc2-2019-11-25&quot;&gt;Synapse 1.6.0rc2 (2019-11-25)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a bug which could cause the background database update handler for event labels to get stuck in a loop raising exceptions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6407&quot;&gt;#6407&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-6-0rc1-2019-11-20&quot;&gt;Synapse 1.6.0rc1 (2019-11-20)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add federation support for cross-signing. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5727&quot;&gt;#5727&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Increase default room version from 4 to 5, thereby enforcing server key validity period checks. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6220&quot;&gt;#6220&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for outbound http proxying via http_proxy&#x2F;HTTPS_PROXY env vars. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6238&quot;&gt;#6238&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Implement label-based filtering on &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; and &lt;code&gt;&#x2F;messages&lt;&#x2F;code&gt; (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2326&quot;&gt;MSC2326&lt;&#x2F;a&gt;). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6301&quot;&gt;#6301&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6310&quot;&gt;#6310&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6340&quot;&gt;#6340&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-2&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix LruCache callback deduplication for Python 3.8. Contributed by @V02460. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6213&quot;&gt;#6213&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove a room from a server&#x27;s public rooms list on room upgrade. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6232&quot;&gt;#6232&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6235&quot;&gt;#6235&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Delete keys from key backup when deleting backup versions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6253&quot;&gt;#6253&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make notification of cross-signing signatures work with workers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6254&quot;&gt;#6254&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix exception when remote servers attempt to join a room that they&#x27;re not allowed to join. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6278&quot;&gt;#6278&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent errors from appearing on Synapse startup if &lt;code&gt;git&lt;&#x2F;code&gt; is not installed. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6284&quot;&gt;#6284&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Appservice requests will no longer contain a double slash prefix when the appservice url provided ends in a slash. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6306&quot;&gt;#6306&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;&#x2F;purge_room&lt;&#x2F;code&gt; admin API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6307&quot;&gt;#6307&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the &lt;code&gt;hidden&lt;&#x2F;code&gt; field in the &lt;code&gt;devices&lt;&#x2F;code&gt; table for SQLite versions prior to 3.23.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6313&quot;&gt;#6313&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug which caused rejected events to be persisted with the wrong room state. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6320&quot;&gt;#6320&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where &lt;code&gt;rc_login&lt;&#x2F;code&gt; ratelimiting would prematurely kick in. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6335&quot;&gt;#6335&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent the server taking a long time to start up when guest registration is enabled. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6338&quot;&gt;#6338&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where upgrading a guest account to a full user would fail when account validity is enabled. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6359&quot;&gt;#6359&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;to_device&lt;&#x2F;code&gt; stream ID getting reset every time Synapse restarts, which had the potential to cause unable to decrypt errors. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6363&quot;&gt;#6363&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix permission denied error when trying to generate a config file with the docker image. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6389&quot;&gt;#6389&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Contributor documentation now mentions script to run linters. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6164&quot;&gt;#6164&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Modify CAPTCHA_SETUP.md to update the terms &lt;code&gt;private key&lt;&#x2F;code&gt; and &lt;code&gt;public key&lt;&#x2F;code&gt; to &lt;code&gt;secret key&lt;&#x2F;code&gt; and &lt;code&gt;site key&lt;&#x2F;code&gt; respectively. Contributed by Yash Jipkate. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6257&quot;&gt;#6257&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update &lt;code&gt;INSTALL.md&lt;&#x2F;code&gt; Email section to talk about &lt;code&gt;account_threepid_delegates&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6272&quot;&gt;#6272&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a small typo in &lt;code&gt;account_threepid_delegates&lt;&#x2F;code&gt; configuration option. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6273&quot;&gt;#6273&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add a CI job to test the &lt;code&gt;synapse_port_db&lt;&#x2F;code&gt; script. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6140&quot;&gt;#6140&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6276&quot;&gt;#6276&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert EventContext to an attrs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6218&quot;&gt;#6218&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move &lt;code&gt;persist_events&lt;&#x2F;code&gt; out from main data store. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6240&quot;&gt;#6240&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6300&quot;&gt;#6300&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce verbosity of user&#x2F;room stats. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6250&quot;&gt;#6250&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce impact of debug logging. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6251&quot;&gt;#6251&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Expose some homeserver functionality to spam checkers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6259&quot;&gt;#6259&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Change cache descriptors to always return deferreds. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6263&quot;&gt;#6263&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6291&quot;&gt;#6291&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix incorrect comment regarding the functionality of an &lt;code&gt;if&lt;&#x2F;code&gt; statement. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6269&quot;&gt;#6269&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update CI to run &lt;code&gt;isort&lt;&#x2F;code&gt; over the &lt;code&gt;scripts&lt;&#x2F;code&gt; and &lt;code&gt;scripts-dev&lt;&#x2F;code&gt; directories. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6270&quot;&gt;#6270&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Replace every instance of &lt;code&gt;logger.warn&lt;&#x2F;code&gt; method with &lt;code&gt;logger.warning&lt;&#x2F;code&gt; as the former is deprecated. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6271&quot;&gt;#6271&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6314&quot;&gt;#6314&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Port replication http server endpoints to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6274&quot;&gt;#6274&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Port room rest handlers to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6275&quot;&gt;#6275&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove redundant CLI parameters on CI&#x27;s &lt;code&gt;flake8&lt;&#x2F;code&gt; step. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6277&quot;&gt;#6277&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Port &lt;code&gt;federation_server.py&lt;&#x2F;code&gt; to async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6279&quot;&gt;#6279&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Port receipt and read markers to async&#x2F;wait. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6280&quot;&gt;#6280&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Split out state storage into separate data store. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6294&quot;&gt;#6294&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6295&quot;&gt;#6295&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor EventContext for clarity. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6298&quot;&gt;#6298&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update the version of black used to 19.10b0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6304&quot;&gt;#6304&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some documentation about worker replication. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6305&quot;&gt;#6305&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move admin endpoints into separate files. Contributed by Awesome Technologies Innovationslabor GmbH. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6308&quot;&gt;#6308&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Document the use of &lt;code&gt;lint.sh&lt;&#x2F;code&gt; for code style enforcement &amp;amp; extend it to run on specified paths only. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6312&quot;&gt;#6312&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add optional python dependencies and dependant binary libraries to snapcraft packaging. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6317&quot;&gt;#6317&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove the dependency on psutil and replace functionality with the stdlib &lt;code&gt;resource&lt;&#x2F;code&gt; module. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6318&quot;&gt;#6318&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6336&quot;&gt;#6336&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve documentation for EventContext fields. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6319&quot;&gt;#6319&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some checks that we aren&#x27;t using state from rejected events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6330&quot;&gt;#6330&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add continuous integration for python 3.8. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6341&quot;&gt;#6341&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Correct spacing&#x2F;case of various instances of the word &amp;quot;homeserver&amp;quot;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6357&quot;&gt;#6357&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Temporarily blacklist the failing unit test PurgeRoomTestCase.test_purge_room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6361&quot;&gt;#6361&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Client-server r0.6.0 and Identity Service r0.3.0 releases</title>
		<published>2019-11-08T00:00:00+00:00</published>
		<updated>2019-11-08T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/11/08/client-server-r0-6-0-and-identity-service-r0-3-0-releases/" type="text/html"/>
		<id>/blog/2019/11/08/client-server-r0-6-0-and-identity-service-r0-3-0-releases/</id>
		<content type="html">&lt;p&gt;Hey all,&lt;&#x2F;p&gt;
&lt;p&gt;For the last several months the team has been working on &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2019&#x2F;06&#x2F;30&#x2F;tightening-up-privacy-in-matrix&quot;&gt;tightening up privacy in Matrix&lt;&#x2F;a&gt;, and with the &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2019&#x2F;09&#x2F;27&#x2F;privacy-improvements-in-synapse-1-4-and-riot-1-4&quot;&gt;1.4 release of Synapse and Riot&lt;&#x2F;a&gt; quite a lot has been done in the area. One of the remaining pieces was to release all the specification changes to help other client&#x2F;server implementations achieve the same goals, and now we&#x27;ve done that.&lt;&#x2F;p&gt;
&lt;p&gt;The &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;spec&#x2F;client_server&#x2F;r0.6.0&quot;&gt;Client-Server r0.6.0&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;spec&#x2F;identity_service&#x2F;r0.3.0&quot;&gt;Identity Service r0.3.0&lt;&#x2F;a&gt; spec releases both cover the privacy improvements added through a number of MSCs in the last few months. Of particular note is that identity servers are now expected to support terms of service endpoints, which requires authentication that clients might need to worry about - check the spec changelogs for details.&lt;&#x2F;p&gt;
&lt;p&gt;The full changelog for the Client-Server r0.6.0 release is:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Breaking Changes&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add &lt;code&gt;id_access_token&lt;&#x2F;code&gt; as a required request parameter to a few
endpoints which require an &lt;code&gt;id_server&lt;&#x2F;code&gt; parameter as part of
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2140&quot;&gt;MSC2140&lt;&#x2F;a&gt;.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2255&quot;&gt;#2255&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;New Endpoints&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add &lt;code&gt;POST &#x2F;account&#x2F;3pid&#x2F;unbind&lt;&#x2F;code&gt; for removing a 3PID from an identity
server.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2282&quot;&gt;#2282&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Backwards Compatible Changes&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add &lt;code&gt;M_USER_DEACTIVATED&lt;&#x2F;code&gt; error code.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2234&quot;&gt;#2234&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove &lt;code&gt;bind_msisdn&lt;&#x2F;code&gt; and &lt;code&gt;bind_email&lt;&#x2F;code&gt; from &lt;code&gt;&#x2F;register&lt;&#x2F;code&gt; now that the
identity server&#x27;s bind endpoint requires authentication.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2279&quot;&gt;#2279&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;m.identity_server&lt;&#x2F;code&gt; account data for tracking the user&#x27;s
preferred identity server.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2281&quot;&gt;#2281&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Deprecate &lt;code&gt;id_server&lt;&#x2F;code&gt; and make it optional in several places.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2310&quot;&gt;#2310&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Spec Clarifications&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add missing format fields to &lt;code&gt;m.room.message$m.notice&lt;&#x2F;code&gt; schema.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2125&quot;&gt;#2125&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove &amp;quot;required&amp;quot; designation from the &lt;code&gt;url&lt;&#x2F;code&gt; field of certain
&lt;code&gt;m.room.message&lt;&#x2F;code&gt; msgtypes.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2129&quot;&gt;#2129&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix various typos throughout the specification.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2131&quot;&gt;#2131&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2136&quot;&gt;#2136&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2148&quot;&gt;#2148&lt;&#x2F;a&gt;,
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2215&quot;&gt;#2215&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the distinction between &lt;code&gt;m.key.verification.start&lt;&#x2F;code&gt; and its
&lt;code&gt;m.sas.v1&lt;&#x2F;code&gt; variant.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2132&quot;&gt;#2132&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix link to Olm signing specification.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2133&quot;&gt;#2133&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the conditions for the &lt;code&gt;.m.rule.room_one_to_one&lt;&#x2F;code&gt; push rule.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2152&quot;&gt;#2152&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the encryption algorithms supported by the device of the
device keys example.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2157&quot;&gt;#2157&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that &lt;code&gt;&#x2F;rooms&#x2F;:roomId&#x2F;event&#x2F;:eventId&lt;&#x2F;code&gt; returns a Matrix error.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2204&quot;&gt;#2204&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a missing &lt;code&gt;state_key&lt;&#x2F;code&gt; check on &lt;code&gt;.m.rule.tombstone&lt;&#x2F;code&gt;.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2223&quot;&gt;#2223&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the &lt;code&gt;m.room_key_request&lt;&#x2F;code&gt; &lt;code&gt;action&lt;&#x2F;code&gt; value, setting it from
&lt;code&gt;cancel_request&lt;&#x2F;code&gt; to &lt;code&gt;request_cancellation&lt;&#x2F;code&gt;.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2247&quot;&gt;#2247&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that the &lt;code&gt;submit_url&lt;&#x2F;code&gt; field is without authentication.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2341&quot;&gt;#2341&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify the expected phone number format.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2342&quot;&gt;#2342&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that clients should consider not requesting URL previews in
encrypted rooms.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2343&quot;&gt;#2343&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add missing information on how filters are meant to work with
&lt;code&gt;&#x2F;context&lt;&#x2F;code&gt;.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2344&quot;&gt;#2344&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify what the keys are for rooms in &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt;.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2345&quot;&gt;#2345&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;The full changelog for the Identity Service r0.3.0 release is:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;New Endpoints&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Add &lt;code&gt;&#x2F;account&lt;&#x2F;code&gt;, &lt;code&gt;&#x2F;account&#x2F;register&lt;&#x2F;code&gt;, and &lt;code&gt;&#x2F;account&#x2F;logout&lt;&#x2F;code&gt; to
authenticate with the identity server.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2255&quot;&gt;#2255&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add endpoints for accepting and handling terms of service.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2258&quot;&gt;#2258&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;&#x2F;hash_details&lt;&#x2F;code&gt; and a new &lt;code&gt;&#x2F;lookup&lt;&#x2F;code&gt; endpoint for performing
hashed association lookups.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2287&quot;&gt;#2287&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;
&lt;p&gt;Backwards Compatible Changes&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Deprecate the v1 API in favour of an authenticated v2 API.
(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;2254&quot;&gt;#2254&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.5.0 released</title>
		<published>2019-10-29T00:00:00+00:00</published>
		<updated>2019-10-29T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/10/29/synapse-1-5-0-released/" type="text/html"/>
		<id>/blog/2019/10/29/synapse-1-5-0-released/</id>
		<content type="html">&lt;p&gt;That&#x27;s right folks Synapse 1.5.0 is here and ready to make your life just a little bit better.&lt;&#x2F;p&gt;
&lt;p&gt;First things first, this release includes a security fix (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6262&quot;&gt;#6262&lt;&#x2F;a&gt;, below). Administrators are encouraged to upgrade as soon as possible.&lt;&#x2F;p&gt;
&lt;p&gt;Aside from that, the main thing you&#x27;ll notice in 1.5.0 is a massive performance improvement to the room directory, which means that servers with large directories to scan will return much more quickly. This is especially true for matrix.org but all servers will benefit.&lt;&#x2F;p&gt;
&lt;p&gt;Another key win is finally fixing some bugs in the sqlite -&amp;gt; postgres migrator script. Sqlite mode is there strictly for testing purposes and should never be used in a production setting let alone a federating homeserver. So if you are currently using Sqlite now is the time to migrate. What&#x27;s more the script is now in CI so it can&#x27;t easily break in the future (with apologies to anyone bitten by the old script...).&lt;&#x2F;p&gt;
&lt;p&gt;A final final point, we have some preparatory work for e2ee cross signing, the overall feature is not ready for release just yet but we are getting really close. Watch this space.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.5.0&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.4.1 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-5-0-2019-10-29&quot;&gt;Synapse 1.5.0 (2019-10-29)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;security-updates&quot;&gt;Security updates&lt;&#x2F;h2&gt;
&lt;p&gt;This release includes a security fix (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6262&quot;&gt;#6262&lt;&#x2F;a&gt;, below). Administrators are encouraged to upgrade as soon as possible.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix bug where room directory search was case sensitive. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6268&quot;&gt;#6268&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-5-0rc2-2019-10-28&quot;&gt;Synapse 1.5.0rc2 (2019-10-28)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Update list of boolean columns in &lt;code&gt;synapse_port_db&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6247&quot;&gt;#6247&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &#x2F;keys&#x2F;query API on workers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6256&quot;&gt;#6256&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve signature checking on some federation APIs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6262&quot;&gt;#6262&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Move schema delta files to the correct data store. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6248&quot;&gt;#6248&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Small performance improvement by removing repeated config lookups in room stats calculation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6255&quot;&gt;#6255&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-5-0rc1-2019-10-24&quot;&gt;Synapse 1.5.0rc1 (2019-10-24)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Improve quality of thumbnails for 1-bit&#x2F;8-bit color palette images. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2142&quot;&gt;#2142&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add ability to upload cross-signing signatures. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5726&quot;&gt;#5726&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow uploading of cross-signing keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5769&quot;&gt;#5769&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;CAS login now provides a default display name for users if a &lt;code&gt;displayname_attribute&lt;&#x2F;code&gt; is set in the configuration file. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6114&quot;&gt;#6114&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reject all pending invites for a user during deactivation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6125&quot;&gt;#6125&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add config option to suppress client side resource limit alerting. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6173&quot;&gt;#6173&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-2&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Return an HTTP 404 instead of 400 when requesting a filter by ID that is unknown to the server. Thanks to @krombel for contributing this! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2380&quot;&gt;#2380&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where users could be invited twice to the same group. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3436&quot;&gt;#3436&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;&#x2F;createRoom&lt;&#x2F;code&gt; failing with badly-formatted MXIDs in the invitee list. Thanks to @wener291! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4088&quot;&gt;#4088&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make the &lt;code&gt;synapse_port_db&lt;&#x2F;code&gt; script create the right indexes on a new PostgreSQL database. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6102&quot;&gt;#6102&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6178&quot;&gt;#6178&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6243&quot;&gt;#6243&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug when uploading a large file: Synapse responds with &lt;code&gt;M_UNKNOWN&lt;&#x2F;code&gt; while it should be &lt;code&gt;M_TOO_LARGE&lt;&#x2F;code&gt; according to spec. Contributed by Anshul Angaria. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6109&quot;&gt;#6109&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix user push rules being deleted from a room when it is upgraded. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6144&quot;&gt;#6144&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t 500 when trying to exchange a revoked 3PID invite. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6147&quot;&gt;#6147&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix transferring notifications and tags when joining an upgraded room that is new to your server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6155&quot;&gt;#6155&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where guest account registration can wedge after restart. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6161&quot;&gt;#6161&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix monthly active user reaping when reserved users are specified. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6168&quot;&gt;#6168&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;&#x2F;federation&#x2F;v1&#x2F;state&lt;&#x2F;code&gt; endpoint not supporting newer room versions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6170&quot;&gt;#6170&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where we were updating censored events as bytes rather than text, occasionally causing invalid JSON being inserted breaking APIs that attempted to fetch such events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6186&quot;&gt;#6186&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix occasional missed updates in the room and user directories. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6187&quot;&gt;#6187&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix tracing of non-JSON APIs, &lt;code&gt;&#x2F;media&lt;&#x2F;code&gt;, &lt;code&gt;&#x2F;key&lt;&#x2F;code&gt; etc. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6195&quot;&gt;#6195&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where presence would not get timed out correctly if a synchrotron worker is used and restarted. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6212&quot;&gt;#6212&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;synapse_port_db: Add 2 additional BOOLEAN_COLUMNS to be able to convert from database schema v56. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6216&quot;&gt;#6216&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where the Synapse demo script blacklisted &lt;code&gt;::1&lt;&#x2F;code&gt; (ipv6 localhost) from receiving federation traffic. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6229&quot;&gt;#6229&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;updates-to-the-docker-image&quot;&gt;Updates to the Docker image&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix logging getting lost for the docker image. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6197&quot;&gt;#6197&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes-1&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Update &lt;code&gt;user_filters&lt;&#x2F;code&gt; table to have a unique index, and non-null columns. Thanks to @pik for contributing this. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;1172&quot;&gt;#1172&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6175&quot;&gt;#6175&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6184&quot;&gt;#6184&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow devices to be marked as hidden, for use by features such as cross-signing.
This adds a new field with a default value to the devices field in the database,
and so the database upgrade may take a long time depending on how many devices
are in the database. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5759&quot;&gt;#5759&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move lookup-related functions from RoomMemberHandler to IdentityHandler. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5978&quot;&gt;#5978&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve performance of the public room list directory. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6019&quot;&gt;#6019&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6152&quot;&gt;#6152&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6153&quot;&gt;#6153&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6154&quot;&gt;#6154&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Edit header dicts docstrings in &lt;code&gt;SimpleHttpClient&lt;&#x2F;code&gt; to note that &lt;code&gt;str&lt;&#x2F;code&gt; or &lt;code&gt;bytes&lt;&#x2F;code&gt; can be passed as header keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6077&quot;&gt;#6077&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add snapcraft packaging information. Contributed by @devec0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6084&quot;&gt;#6084&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6191&quot;&gt;#6191&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Kill off half-implemented password-reset via sms. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6101&quot;&gt;#6101&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove &lt;code&gt;get_user_by_req&lt;&#x2F;code&gt; opentracing span and add some tags. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6108&quot;&gt;#6108&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Drop some unused database tables. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6115&quot;&gt;#6115&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add env var to turn on tracking of log context changes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6127&quot;&gt;#6127&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor configuration loading to allow better typechecking. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6137&quot;&gt;#6137&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Log responder when responding to media request. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6139&quot;&gt;#6139&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve performance of &lt;code&gt;find_next_generated_user_id&lt;&#x2F;code&gt; DB query. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6148&quot;&gt;#6148&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Expand type-checking on modules imported by &lt;code&gt;synapse.config&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6150&quot;&gt;#6150&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Use Postgres ANY for selecting many values. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6156&quot;&gt;#6156&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add more caching to &lt;code&gt;_get_joined_users_from_context&lt;&#x2F;code&gt; DB query. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6159&quot;&gt;#6159&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some metrics on the federation sender. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6160&quot;&gt;#6160&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some logging to the rooms stats updates, to try to track down a flaky test. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6167&quot;&gt;#6167&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unused &lt;code&gt;timeout&lt;&#x2F;code&gt; parameter from &lt;code&gt;_get_public_room_list&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6179&quot;&gt;#6179&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reject (accidental) attempts to insert bytes into postgres tables. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6186&quot;&gt;#6186&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make &lt;code&gt;version&lt;&#x2F;code&gt; optional in body of &lt;code&gt;PUT &#x2F;room_keys&#x2F;version&#x2F;{version}&lt;&#x2F;code&gt;, since it&#x27;s redundant. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6189&quot;&gt;#6189&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make storage layer responsible for adding device names to key, rather than the handler. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6193&quot;&gt;#6193&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Port &lt;code&gt;synapse.rest.admin&lt;&#x2F;code&gt; module to use async&#x2F;await. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6196&quot;&gt;#6196&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Enforce that all boolean configuration values are lowercase in CI. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6203&quot;&gt;#6203&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove some unused event-auth code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6214&quot;&gt;#6214&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove &lt;code&gt;Auth.check&lt;&#x2F;code&gt; method. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6217&quot;&gt;#6217&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove &lt;code&gt;format_tap.py&lt;&#x2F;code&gt; script in favour of a perl reimplementation in Sytest&#x27;s repo. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6219&quot;&gt;#6219&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor storage layer in preparation to support having multiple databases. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6231&quot;&gt;#6231&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove some extra quotation marks across the codebase. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6236&quot;&gt;#6236&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.4.1 released</title>
		<published>2019-10-18T00:00:00+00:00</published>
		<updated>2019-10-18T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/10/18/synapse-1-4-1-released/" type="text/html"/>
		<id>/blog/2019/10/18/synapse-1-4-1-released/</id>
		<content type="html">&lt;p&gt;Hi all,&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ve released Synapse 1.4.1 as a small but important bugfix to 1.4.0.&lt;&#x2F;p&gt;
&lt;p&gt;This fixes a regression which crept in with our newly implemented &amp;quot;erase redacted data after N days&amp;quot; feature where some APIs
would fail when hitting erased redactions - anyone on Synapse 1.4.0 will want to upgrade asap.&lt;&#x2F;p&gt;
&lt;p&gt;As always, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.4.1&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.4.0 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-4-1-2019-10-18&quot;&gt;Synapse 1.4.1 (2019-10-18)&lt;&#x2F;h1&gt;
&lt;p&gt;No changes since 1.4.1rc1.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-4-1rc1-2019-10-17&quot;&gt;Synapse 1.4.1rc1 (2019-10-17)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix bug where redacted events were sometimes incorrectly censored in the database, breaking APIs that attempted to fetch such events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6185&quot;&gt;#6185&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;commit&#x2F;5b0e9948eaae801643e594b5abc8ee4b10bd194e&quot;&gt;5b0e9948&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>matrix-appservice-slack bridge 1.0 is here!</title>
		<published>2019-10-03T00:00:00+00:00</published>
		<updated>2019-10-03T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/10/03/matrix-appservice-slack-bridge-1-0-is-here/" type="text/html"/>
		<id>/blog/2019/10/03/matrix-appservice-slack-bridge-1-0-is-here/</id>
		<content type="html">&lt;p&gt;Hello Matrix enthusiasts! Yesterday we released &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-appservice-slack&#x2F;releases&#x2F;tag&#x2F;1.0.0&quot;&gt;matrix-appservice-slack 1.0&lt;&#x2F;a&gt;. This marks a major milestone
in bridge development for the Matrix.org team, being our first bridge to ever reach 1.0. The decision to
release this version came after we decided that the bridge had gained enough features and reached a point
of stability where it could be deployed in the wild with minimal risk.&lt;&#x2F;p&gt;
&lt;p&gt;For those not in the know, the Slack bridge is Node.JS based, and bridges slack channels &amp;amp; users into Matrix
seamlessly. And for those wondering, yes it works with Mattermost too (since their API is compatible with Slack)!
In previous versions only a limited subset of features were supported, making heavy usage of Slack‚Äôs
webhook API. As of 1.0, the bridge now makes use of the newer Slack Events&#x2F;RTM API which gives us all we need for
a richer bridging experience. Everything from edits and reactions to typing notifications is supported in the 1.0 release.&lt;&#x2F;p&gt;
&lt;p&gt;Finally for those who are self hosting, we are pleased to offer the ability to &amp;quot;puppet&amp;quot; your Slack account using the
bridge. Puppeting is the process in which the bridge will send messages as if you were sending them from the Slack client
directly, when you talk using your Matrix account. This opens the door to seamless bridging and direct messaging support.&lt;&#x2F;p&gt;
&lt;p&gt;For those wishing to bridge their whole workspace across, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;SolarDrew&#x2F;skill-picard&quot;&gt;picard&lt;&#x2F;a&gt; exists
as a tool to manage large scale Slack bridge deployments. This tool is provided by &lt;a href=&quot;https:&#x2F;&#x2F;matrix.to&#x2F;#&#x2F;@Cadair:matrix.org&quot;&gt;Cadair&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;matrix.to&#x2F;#&#x2F;@SolarDrew:matrix.org&quot;&gt;SolarDrew&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2019-10-03-slack1.0-threading.png&quot; alt=&quot;Slack Screenshot&quot; &#x2F;&gt;
Threading &amp;amp; Reactions!&lt;&#x2F;p&gt;
&lt;p&gt;The bridge has undergone some pretty serious code surgery as well. The whole codebase has been rewritten in
TypeScript to take advantage of type checking and generic types. The bridge is currently based upon the
&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-appservice-bridge&#x2F;&quot;&gt;matrix-appservice-bridge&lt;&#x2F;a&gt; library. The datastore interface now supports PostgreSQL, which allows for administrators to inspect and edit the database while the bridge is running, as well as offering  helpful performance boost over the NeDB datastore format that was used previously. Finally, the codebase has proper Unit and Integration Tests to ensure new changes will not cause any regressions in behaviour. In short, &lt;strong&gt;now is an excellent time to get involved and hack on the bridge&lt;&#x2F;strong&gt;. There is already a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-appservice-slack&#x2F;issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22&quot;&gt;crafted list of easy issues&lt;&#x2F;a&gt; for new and experienced bridge devs.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2019-10-03-slack1.0-perfmem.png&quot; alt=&quot;Grafana memory usage graph&quot; &#x2F;&gt;
Memory usage of the bridge comparison&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2019-10-03-slack1.0-perfcpu.png&quot; alt=&quot;Grafana CPU usage graph&quot; &#x2F;&gt;
CPU usage of the bridge comparison&lt;&#x2F;p&gt;
&lt;p&gt;In terms of how many users matrix.org is currently serving at the moment, we present to you some figures:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;2562 bridged rooms&lt;&#x2F;li&gt;
&lt;li&gt;764 teams connected to the bridge&lt;&#x2F;li&gt;
&lt;li&gt;103711 events have passed through the bridge since the launch of 0.3.2&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Of course, our work doesn‚Äôt stop at 1.0. The plan for the immediate future of the bridge
is to continue adding support for other event types coming from Matrix and Slack to create
an ever richer experience. Obvious features are things like topic changes, and syncing membership
across the bridge. In the long term future we would also like to add community support to the bridge,
so whole Slack workspaces can be bridged across with a single click.&lt;&#x2F;p&gt;
&lt;p&gt;That‚Äôs all from me, and I would like to say a massive thank you to &lt;a href=&quot;https:&#x2F;&#x2F;matrix.to&#x2F;#&#x2F;@Cadair:matrix.org&quot;&gt;Cadair&lt;&#x2F;a&gt;
and &lt;a href=&quot;https:&#x2F;&#x2F;matrix.to&#x2F;#&#x2F;@benpa:matrix.org&quot;&gt;Ben&lt;&#x2F;a&gt; for both their code and review work on the project and as always,
thank you to the community for using the bridge and reporting issues. üôÇ&lt;&#x2F;p&gt;
&lt;p&gt;Useful links:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;matrix.to&#x2F;#&#x2F;#matrix_appservice_slack:matrix.org&quot;&gt;Matrix Room&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-appservice-slack&quot;&gt;Project Home&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;matrix-appservice-slack.readthedocs.io&#x2F;en&#x2F;stable&#x2F;&quot;&gt;Docs&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.4.0 released</title>
		<published>2019-10-03T00:00:00+00:00</published>
		<updated>2019-10-03T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/10/03/synapse-1-4-0-released/" type="text/html"/>
		<id>/blog/2019/10/03/synapse-1-4-0-released/</id>
		<content type="html">&lt;p&gt;Wheyhey as I live and breathe 1.4.0 is here!&lt;&#x2F;p&gt;
&lt;p&gt;1.4.0 should be considered ‚ÄòThe Privacy Release‚Äô and is the cumulation of a huge body of work spanning multiple projects to improve data privacy in the matrix ecosystem. You can read more about the &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2019&#x2F;09&#x2F;27&#x2F;privacy-improvements-in-synapse-1-4-and-riot-1-4&quot;&gt;full project here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;While we consider 1.4.0 to be a huge leap forward in terms of data privacy, it is really important to note that it contains breaking changes.&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;If you currently rely on email or SMS delivery via an identity server you must modify your Synapse configuration.&lt;&#x2F;li&gt;
&lt;li&gt;If you have configured custom templates, then eight new templates must be added to your templates directory.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;If either apply to you failure to act will break your installation. Full details can be found in the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;UPGRADE.rst#upgrading-to-v140&quot;&gt;upgrade notes&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;so-what-has-changed&quot;&gt;So what has changed?&lt;&#x2F;h2&gt;
&lt;p&gt;It is possible for a user to associate an email address or phone number with their account, for a number of reasons:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;For use when logging in, as an alternative to the user id.&lt;&#x2F;li&gt;
&lt;li&gt;In the case of email, as an alternative contact to help with account recovery.&lt;&#x2F;li&gt;
&lt;li&gt;In the case of email, to receive notifications of missed messages.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Before an email address or phone number can be added to a user&#x27;s account, or before such an address is used to carry out a password-reset, Synapse must confirm the operation with the owner of the email address or phone number. It does this by sending an email or text giving the user a link or token to confirm receipt. This process is known as &#x27;3pid verification&#x27;. (&#x27;3pid&#x27;, or &#x27;threepid&#x27;, stands for third-party identifier, and we use it to refer to external identifiers such as email addresses and phone numbers.)&lt;&#x2F;p&gt;
&lt;p&gt;Previous versions of Synapse delegated the task of 3pid verification to an identity server by default. In most cases this server is vector.im or matrix.org.&lt;&#x2F;p&gt;
&lt;p&gt;In Synapse 1.4.0, for security and privacy reasons, the homeserver will no longer delegate this task to an identity server by default. Instead, the server administrator will need to explicitly decide how they would like the verification messages to be sent.&lt;&#x2F;p&gt;
&lt;p&gt;In the medium term, the vector.im and matrix.org identity servers will disable support for delegated 3pid verification entirely. However, in order to ease the transition, they will retain the capability for a limited period. Delegated email verification will be disabled on Monday 2nd December 2019 (giving roughly 2 months notice). Disabling delegated SMS verification will follow some time after that once SMS verification support lands in Synapse.&lt;&#x2F;p&gt;
&lt;p&gt;Once delegated 3pid verification support has been disabled in the vector.im and matrix.org identity servers, all Synapse versions that depend on those instances will be unable to verify email and phone numbers through them. There are no imminent plans to remove delegated 3pid verification from Sydent generally. (Sydent is the identity server project that backs the vector.im and matrix.org instances).&lt;&#x2F;p&gt;
&lt;h2 id=&quot;why-is-this-necessary&quot;&gt;Why is this necessary?&lt;&#x2F;h2&gt;
&lt;p&gt;Prior to 1.4.0, the identity server was providing two related-but-separate functions:&lt;&#x2F;p&gt;
&lt;p&gt;a directory for users to publish their contact details and to look up their contacts by their email addresses and phone numbers.
a &amp;quot;trusted third party communications network delegate&amp;quot;, providing SMS- and email-sending functionality to all homeservers for registration and password reset.&lt;&#x2F;p&gt;
&lt;p&gt;The intention behind the identity server&#x27;s providing 2. was one of convenience: to save homeserver admins the burden of configuring their homeservers to send email, as well as sparing us the effort of writing generic SMS-gateway integration that would allow any homeserver admin to configure their homeserver to send SMS via their chosen SMS aggregator.&lt;&#x2F;p&gt;
&lt;p&gt;By exposing this &#x27;trusted email&#x2F;sms delegate&#x27; functionality, however, and by including references to the New Vector identity servers in the default configuration for both Synapse and Riot, we created a situation in which users on non-New Vector run homeservers (who had never seen our privacy notice) could easily end up sharing their email addresses and phone numbers with a New Vector identity server.&lt;&#x2F;p&gt;
&lt;p&gt;Using identity servers for registration and password reset introduced yet further complexity - since password reset is a sensitive operation, it was important that the homeserver only use &#x27;trusted&#x27; identity servers for this purpose (with the trust being configured by the homeserver admin in the homeserver config). But this created ambiguity over who was ultimately responsible for the choice of identity server and when they could make that choice - the client could present a default identity server at login&#x2F;registration&#x2F;password reset time, which the user could choose to override before logging in, but unless the identity server ultimately selected were on the homeserver admin&#x27;s &#x27;trusted identity servers&#x27; list, any identity server operations that were proxied via the homeserver would have been blocked by the homeserver. However, not all identity server operations initiated by the client were proxied via the homeserver - some were sent directly from the client to the identity server, and would not have been filtered.&lt;&#x2F;p&gt;
&lt;p&gt;The best way to solve this problem is to have individual homeservers take ownership for their own email and SMS needs. In the case of email this means configuring details of an appropriate SMTP server or continuing to delegate through an identity server that will allow it to do so. If a homeserver admin makes the active choice to use New Vector&#x27;s identity servers for delegation (up until 1st December), they should make their own users aware through their privacy notice.&lt;&#x2F;p&gt;
&lt;p&gt;This delegation is entirely separate from the user&#x27;s choice of identity server for user directory services. As of right now the user is free to choose and trust whichever identity server they wish, or to choose not to use an identity server at all.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;are-there-any-other-data-privacy-features&quot;&gt;Are there any other data privacy features?&lt;&#x2F;h2&gt;
&lt;p&gt;Yes, 1.4.0 now &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;1287&quot;&gt;automatically garbage collects redacted messages&lt;&#x2F;a&gt; (defaults to 7 days) and removes &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;6098&#x2F;files&quot;&gt;unused IP and user agent information&lt;&#x2F;a&gt; stored in the user_ips table (defaults to 30 days). Finally, Synapse now &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;6090&#x2F;files&quot;&gt;warns in its logs&lt;&#x2F;a&gt; if you are using matrix.org as a trusted key server, in case you wish to use a different server to help discover other servers‚Äô keys.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;anything-else&quot;&gt;Anything else?&lt;&#x2F;h2&gt;
&lt;p&gt;Aside from privacy, we‚Äôve expanded our OpenTracing support and fixed a host of bugs. However the thing that is most exciting is switching on our solution for &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5319&quot;&gt;mitigating forward extremities build up&lt;&#x2F;a&gt;‚Äô by default.&lt;&#x2F;p&gt;
&lt;p&gt;In some cases rooms can accumulate ‚Äòforward extremities‚Äô, which are simply an artefact of attempting to resolve the room state over multiple servers. Forward extremities are necessary to ensure that each server can independently arrive at the same view of the room eventually, however processing these extremities can be &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;1760&quot;&gt;computationally expensive and degrade server performance overall&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Originally it was an experimental config option but we now feel confident to turn it on by default for all instances - it should make a big difference for the CPU of servers in fragmented rooms.&lt;&#x2F;p&gt;
&lt;p&gt;So that‚Äôs it folks, thanks for making it this far. As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.4.0&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.3.1 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-4-0-2019-10-03&quot;&gt;Synapse 1.4.0 (2019-10-03)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Redact &lt;code&gt;client_secret&lt;&#x2F;code&gt; in server logs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6158&quot;&gt;#6158&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-4-0rc2-2019-10-02&quot;&gt;Synapse 1.4.0rc2 (2019-10-02)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix bug in background update that adds last seen information to the &lt;code&gt;devices&lt;&#x2F;code&gt; table, and improve its performance on Postgres. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6135&quot;&gt;#6135&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bad performance of censoring redactions background task. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6141&quot;&gt;#6141&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix fetching censored redactions from DB, which caused APIs like initial sync to fail if it tried to include the censored redaction. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6145&quot;&gt;#6145&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix exceptions when storing large retry intervals for down remote servers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6146&quot;&gt;#6146&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix up sample config entry for &lt;code&gt;redaction_retention_period&lt;&#x2F;code&gt; option. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6117&quot;&gt;#6117&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-4-0rc1-2019-09-26&quot;&gt;Synapse 1.4.0rc1 (2019-09-26)&lt;&#x2F;h1&gt;
&lt;p&gt;Note that this release includes significant changes around 3pid verification. Administrators are reminded to review the &lt;a href=&quot;UPGRADE.rst#upgrading-to-v140&quot;&gt;upgrade notes&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Changes to 3pid verification:
&lt;ul&gt;
&lt;li&gt;Add the ability to send registration emails from the homeserver rather than delegating to an identity server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5835&quot;&gt;#5835&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5940&quot;&gt;#5940&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5993&quot;&gt;#5993&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5994&quot;&gt;#5994&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5868&quot;&gt;#5868&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Replace &lt;code&gt;trust_identity_server_for_password_resets&lt;&#x2F;code&gt; config option with &lt;code&gt;account_threepid_delegates&lt;&#x2F;code&gt;, and make the &lt;code&gt;id_server&lt;&#x2F;code&gt; parameteter optional on &lt;code&gt;*&#x2F;requestToken&lt;&#x2F;code&gt; endpoints, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2263&quot;&gt;MSC2263&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5876&quot;&gt;#5876&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5969&quot;&gt;#5969&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6028&quot;&gt;#6028&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Switch to using the v2 Identity Service &lt;code&gt;&#x2F;lookup&lt;&#x2F;code&gt; API where available, with fallback to v1. (Implements &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2134&quot;&gt;MSC2134&lt;&#x2F;a&gt; plus &lt;code&gt;id_access_token authentication&lt;&#x2F;code&gt; for v2 Identity Service APIs from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2140&quot;&gt;MSC2140&lt;&#x2F;a&gt;). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5897&quot;&gt;#5897&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove &lt;code&gt;bind_email&lt;&#x2F;code&gt; and &lt;code&gt;bind_msisdn&lt;&#x2F;code&gt; parameters from &lt;code&gt;&#x2F;register&lt;&#x2F;code&gt; ala &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2140&quot;&gt;MSC2140&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5964&quot;&gt;#5964&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;m.id_access_token&lt;&#x2F;code&gt; to &lt;code&gt;unstable_features&lt;&#x2F;code&gt; in &lt;code&gt;&#x2F;versions&lt;&#x2F;code&gt; as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2264&quot;&gt;MSC2264&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5974&quot;&gt;#5974&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Use the v2 Identity Service API for 3PID invites. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5979&quot;&gt;#5979&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;POST &#x2F;_matrix&#x2F;client&#x2F;unstable&#x2F;account&#x2F;3pid&#x2F;unbind&lt;&#x2F;code&gt; endpoint from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2140&quot;&gt;MSC2140&lt;&#x2F;a&gt; for unbinding a 3PID from an identity server without removing it from the homeserver user account. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5980&quot;&gt;#5980&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6062&quot;&gt;#6062&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Use &lt;code&gt;account_threepid_delegate.email&lt;&#x2F;code&gt; and &lt;code&gt;account_threepid_delegate.msisdn&lt;&#x2F;code&gt; for validating threepid sessions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6011&quot;&gt;#6011&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow homeserver to handle or delegate email validation when adding an email to a user&#x27;s account. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6042&quot;&gt;#6042&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Implement new Client Server API endpoints &lt;code&gt;&#x2F;account&#x2F;3pid&#x2F;add&lt;&#x2F;code&gt; and &lt;code&gt;&#x2F;account&#x2F;3pid&#x2F;bind&lt;&#x2F;code&gt; as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2290&quot;&gt;MSC2290&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6043&quot;&gt;#6043&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an unstable feature flag for separate add&#x2F;bind 3pid APIs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6044&quot;&gt;#6044&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove &lt;code&gt;bind&lt;&#x2F;code&gt; parameter from Client Server POST &lt;code&gt;&#x2F;account&lt;&#x2F;code&gt; endpoint as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2290&#x2F;&quot;&gt;MSC2290&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6067&quot;&gt;#6067&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;POST &#x2F;add_threepid&#x2F;msisdn&#x2F;submit_token&lt;&#x2F;code&gt; endpoint for proxying submitToken on an &lt;code&gt;account_threepid_handler&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6078&quot;&gt;#6078&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;submit_url&lt;&#x2F;code&gt; response parameter to &lt;code&gt;*&#x2F;msisdn&#x2F;requestToken&lt;&#x2F;code&gt; endpoints. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6079&quot;&gt;#6079&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;m.require_identity_server&lt;&#x2F;code&gt; flag to &#x2F;version&#x27;s unstable_features. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5972&quot;&gt;#5972&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Enhancements to OpenTracing support:
&lt;ul&gt;
&lt;li&gt;Make OpenTracing work in worker mode. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5771&quot;&gt;#5771&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Pass OpenTracing contexts between servers when transmitting EDUs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5852&quot;&gt;#5852&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;OpenTracing for device list updates. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5853&quot;&gt;#5853&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a tag recording a request&#x27;s authenticated entity and corresponding servlet in OpenTracing. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5856&quot;&gt;#5856&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add minimum OpenTracing for client servlets. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5983&quot;&gt;#5983&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Check at setup that OpenTracing is installed if it&#x27;s enabled in the config. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5985&quot;&gt;#5985&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Trace replication send times. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5986&quot;&gt;#5986&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Include missing OpenTracing contexts in outbout replication requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5982&quot;&gt;#5982&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix sending of EDUs when OpenTracing is enabled with an empty whitelist. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5984&quot;&gt;#5984&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix invalid references to None while OpenTracing if the log context slips. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5988&quot;&gt;#5988&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5991&quot;&gt;#5991&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;OpenTracing for room and e2e keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5855&quot;&gt;#5855&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add OpenTracing span over HTTP push processing. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6003&quot;&gt;#6003&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Add an admin API to purge old rooms from the database. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5845&quot;&gt;#5845&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Retry well-known lookups if we have recently seen a valid well-known record for the server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5850&quot;&gt;#5850&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for filtered room-directory search requests over federation (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2197&quot;&gt;MSC2197&lt;&#x2F;a&gt;, in order to allow upcoming room directory query performance improvements. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5859&quot;&gt;#5859&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Correctly retry all hosts returned from SRV when we fail to connect. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5864&quot;&gt;#5864&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add admin API endpoint for setting whether or not a user is a server administrator. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5878&quot;&gt;#5878&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Enable cleaning up extremities with dummy events by default to prevent undue build up of forward extremities. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5884&quot;&gt;#5884&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add config option to sign remote key query responses with a separate key. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5895&quot;&gt;#5895&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for config templating. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5900&quot;&gt;#5900&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Users with the type of &amp;quot;support&amp;quot; or &amp;quot;bot&amp;quot; are no longer required to consent. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5902&quot;&gt;#5902&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Let synctl accept a directory of config files. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5904&quot;&gt;#5904&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Increase max display name size to 256. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5906&quot;&gt;#5906&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add admin API endpoint for getting whether or not a user is a server administrator. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5914&quot;&gt;#5914&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Redact events in the database that have been redacted for a week. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5934&quot;&gt;#5934&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;New prometheus metrics:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;synapse_federation_known_servers&lt;&#x2F;code&gt;: represents the total number of servers your server knows about (i.e. is in rooms with), including itself. Enable by setting &lt;code&gt;metrics_flags.known_servers&lt;&#x2F;code&gt; to True in the configuration.(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5981&quot;&gt;#5981&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;synapse_build_info&lt;&#x2F;code&gt;: exposes the Python version, OS version, and Synapse version of the running server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6005&quot;&gt;#6005&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;li&gt;
&lt;li&gt;Give appropriate exit codes when synctl fails. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5992&quot;&gt;#5992&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Apply the federation blacklist to requests to identity servers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6000&quot;&gt;#6000&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;report_stats_endpoint&lt;&#x2F;code&gt; option to configure where stats are reported to, if enabled. Contributed by @Sorunome. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6012&quot;&gt;#6012&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add config option to increase ratelimits for room admins redacting messages. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6015&quot;&gt;#6015&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Stop sending federation transactions to servers which have been down for a long time. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6026&quot;&gt;#6026&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make the process for mapping SAML2 users to matrix IDs more flexible. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6037&quot;&gt;#6037&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Return a clearer error message when a timeout occurs when attempting to contact an identity server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6073&quot;&gt;#6073&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent password reset&#x27;s submit_token endpoint from accepting trailing slashes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6074&quot;&gt;#6074&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Return 403 on &lt;code&gt;&#x2F;register&#x2F;available&lt;&#x2F;code&gt; if registration has been disabled. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6082&quot;&gt;#6082&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Explicitly log when a homeserver does not have the &lt;code&gt;trusted_key_servers&lt;&#x2F;code&gt; config field configured. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6090&quot;&gt;#6090&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for pruning old rows in &lt;code&gt;user_ips&lt;&#x2F;code&gt; table. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6098&quot;&gt;#6098&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-2&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Don&#x27;t create broken room when &lt;code&gt;power_level_content_override.users&lt;&#x2F;code&gt; does not contain &lt;code&gt;creator_id&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5633&quot;&gt;#5633&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix database index so that different backup versions can have the same sessions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5857&quot;&gt;#5857&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix Synapse looking for config options &lt;code&gt;password_reset_failure_template&lt;&#x2F;code&gt; and &lt;code&gt;password_reset_success_template&lt;&#x2F;code&gt;, when they are actually &lt;code&gt;password_reset_template_failure_html&lt;&#x2F;code&gt;, &lt;code&gt;password_reset_template_success_html&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5863&quot;&gt;#5863&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix stack overflow when recovering an appservice which had an outage. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5885&quot;&gt;#5885&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix error message which referred to &lt;code&gt;public_base_url&lt;&#x2F;code&gt; instead of &lt;code&gt;public_baseurl&lt;&#x2F;code&gt;. Thanks to @aaronraimist for the fix! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5909&quot;&gt;#5909&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix 404 for thumbnail download when &lt;code&gt;dynamic_thumbnails&lt;&#x2F;code&gt; is &lt;code&gt;false&lt;&#x2F;code&gt; and the thumbnail was dynamically generated. Fix reported by rkfg. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5915&quot;&gt;#5915&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a cache-invalidation bug for worker-based deployments. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5920&quot;&gt;#5920&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix admin API for listing media in a room not being available with an external media repo. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5966&quot;&gt;#5966&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix list media admin API always returning an error. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5967&quot;&gt;#5967&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix room and user stats tracking. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5971&quot;&gt;#5971&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5998&quot;&gt;#5998&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6029&quot;&gt;#6029&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Return a &lt;code&gt;M_MISSING_PARAM&lt;&#x2F;code&gt; if &lt;code&gt;sid&lt;&#x2F;code&gt; is not provided to &lt;code&gt;&#x2F;account&#x2F;3pid&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5995&quot;&gt;#5995&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;&lt;code&gt;federation_certificate_verification_whitelist&lt;&#x2F;code&gt; now will not cause &lt;code&gt;TypeErrors&lt;&#x2F;code&gt; to be raised (a regression in 1.3). Additionally, it now supports internationalised domain names in their non-canonical representation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5996&quot;&gt;#5996&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Only count real users when checking for auto-creation of auto-join room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6004&quot;&gt;#6004&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ensure support users can be registered even if MAU limit is reached. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6020&quot;&gt;#6020&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where login error was shown incorrectly on SSO fallback login. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6024&quot;&gt;#6024&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug in calculating the federation retry backoff period. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6025&quot;&gt;#6025&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent exceptions being logged when extremity-cleanup events fail due to lack of user consent to the terms of service. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6053&quot;&gt;#6053&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove POST method from password-reset &lt;code&gt;submit_token&lt;&#x2F;code&gt; endpoint until we implement &lt;code&gt;submit_url&lt;&#x2F;code&gt; functionality. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6056&quot;&gt;#6056&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix logcontext spam on non-Linux platforms. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6059&quot;&gt;#6059&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ensure query parameters in email validation links are URL-encoded. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6063&quot;&gt;#6063&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug which caused SAML attribute maps to be overridden by defaults. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6069&quot;&gt;#6069&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the logged number of updated items for the &lt;code&gt;users_set_deactivated_flag&lt;&#x2F;code&gt; background update. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6092&quot;&gt;#6092&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;sid&lt;&#x2F;code&gt; to &lt;code&gt;next_link&lt;&#x2F;code&gt; for email validation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6097&quot;&gt;#6097&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Threepid validity checks on msisdns should not be dependent on &lt;code&gt;threepid_behaviour_email&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6104&quot;&gt;#6104&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ensure that servers which are not configured to support email address verification do not offer it in the registration flows. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6107&quot;&gt;#6107&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;updates-to-the-docker-image&quot;&gt;Updates to the Docker image&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Avoid changing &lt;code&gt;UID&#x2F;GID&lt;&#x2F;code&gt; if they are already correct. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5970&quot;&gt;#5970&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Provide &lt;code&gt;SYNAPSE_WORKER&lt;&#x2F;code&gt; envvar to specify python module. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6058&quot;&gt;#6058&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Convert documentation to markdown (from rst) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5849&quot;&gt;#5849&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update &lt;code&gt;INSTALL.md&lt;&#x2F;code&gt; to say that Python 2 is no longer supported. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5953&quot;&gt;#5953&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add developer documentation for using SAML2. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6032&quot;&gt;#6032&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some notes on rolling back to v1.3.1. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6049&quot;&gt;#6049&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update the upgrade notes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6050&quot;&gt;#6050&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Remove shared-secret registration from &lt;code&gt;&#x2F;_matrix&#x2F;client&#x2F;r0&#x2F;register&lt;&#x2F;code&gt; endpoint. Contributed by Awesome Technologies Innovationslabor GmbH. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5877&quot;&gt;#5877&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Deprecate the &lt;code&gt;trusted_third_party_id_servers&lt;&#x2F;code&gt; option. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5875&quot;&gt;#5875&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes-1&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Lay the groundwork for structured logging output. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5680&quot;&gt;#5680&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Retry well-known lookup before the cache expires, giving a grace period where the remote well-known can be down but we still use the old result. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5844&quot;&gt;#5844&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove log line for debugging issue #5407. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5860&quot;&gt;#5860&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor the Appservice scheduler code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5886&quot;&gt;#5886&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Compatibility with v2 Identity Service APIs other than &#x2F;lookup. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5892&quot;&gt;#5892&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6013&quot;&gt;#6013&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Stop populating some unused tables. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5893&quot;&gt;#5893&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6047&quot;&gt;#6047&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add missing index on &lt;code&gt;users_in_public_rooms&lt;&#x2F;code&gt; to improve the performance of directory queries. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5894&quot;&gt;#5894&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve the logging when we have an error when fetching signing keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5896&quot;&gt;#5896&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for database engine-specific schema deltas, based on file extension. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5911&quot;&gt;#5911&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update Buildkite pipeline to use plugins instead of buildkite-agent commands. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5922&quot;&gt;#5922&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add link in sample config to the logging config schema. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5926&quot;&gt;#5926&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unnecessary parentheses in return statements. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5931&quot;&gt;#5931&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unused &lt;code&gt;jenkins&#x2F;prepare_sytest.sh&lt;&#x2F;code&gt; file. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5938&quot;&gt;#5938&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move Buildkite pipeline config to the pipelines repo. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5943&quot;&gt;#5943&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unnecessary return statements in the codebase which were the result of a regex run. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5962&quot;&gt;#5962&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove left-over methods from v1 registration API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5963&quot;&gt;#5963&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Cleanup event auth type initialisation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5975&quot;&gt;#5975&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up dependency checking at setup. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5989&quot;&gt;#5989&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update OpenTracing docs to use the unified &lt;code&gt;trace&lt;&#x2F;code&gt; method. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5776&quot;&gt;#5776&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Small refactor of function arguments and docstrings in&lt;code&gt; RoomMemberHandler&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6009&quot;&gt;#6009&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unused &lt;code&gt;origin&lt;&#x2F;code&gt; argument on &lt;code&gt;FederationHandler.add_display_name_to_third_party_invite&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6010&quot;&gt;#6010&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a &lt;code&gt;failure_ts&lt;&#x2F;code&gt; column to the &lt;code&gt;destinations&lt;&#x2F;code&gt; database table. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6016&quot;&gt;#6016&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6072&quot;&gt;#6072&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up some code in the retry logic. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6017&quot;&gt;#6017&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the structured logging tests stomping on the global log configuration for subsequent tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6023&quot;&gt;#6023&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up the sample config for SAML authentication. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6064&quot;&gt;#6064&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Change mailer logging to reflect Synapse doesn&#x27;t just do chat notifications by email now. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6075&quot;&gt;#6075&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move last-seen info into devices table. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6089&quot;&gt;#6089&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unused parameter to &lt;code&gt;get_user_id_by_threepid&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6099&quot;&gt;#6099&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor the user-interactive auth handling. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6105&quot;&gt;#6105&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor code for calculating registration flows. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;6106&quot;&gt;#6106&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.3.1 released</title>
		<published>2019-08-17T00:00:00+00:00</published>
		<updated>2019-08-17T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/08/17/synapse-1-3-1-released/" type="text/html"/>
		<id>/blog/2019/08/17/synapse-1-3-1-released/</id>
		<content type="html">&lt;p&gt;Some of you will have been bitten by a bug that &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5866&quot;&gt;prevented Synapse 1.3.0 from starting up correctly&lt;&#x2F;a&gt;. If this is you, please upgrade.&lt;&#x2F;p&gt;
&lt;p&gt;Additionally we have taken the opportunity to fix a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5865&quot;&gt;dependency bug&lt;&#x2F;a&gt; for our intrepid packagers.&lt;&#x2F;p&gt;
&lt;p&gt;Apologies for the inconvenience.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.3.1&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.3.0 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-3-1-2019-08-17&quot;&gt;Synapse 1.3.1 (2019-08-17)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Drop hard dependency on &lt;code&gt;sdnotify&lt;&#x2F;code&gt; python package. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5871&quot;&gt;#5871&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix startup issue (hang on ACME provisioning) due to ordering of Twisted reactor startup. Thanks to @chrismoos for supplying the fix. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5867&quot;&gt;#5867&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.3.0 released</title>
		<published>2019-08-15T00:00:00+00:00</published>
		<updated>2019-08-15T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/08/15/synapse-1-3-0-released/" type="text/html"/>
		<id>/blog/2019/08/15/synapse-1-3-0-released/</id>
		<content type="html">&lt;p&gt;Well now, Synapse 1.3.0 is here.&lt;&#x2F;p&gt;
&lt;p&gt;The main thing to know about 1.3.0 is that is contains performance improvements to reduce disk I&#x2F;O and reduce RAM usage. We‚Äôve been running it on matrix.org for a week or so and are really pleased with the results.&lt;&#x2F;p&gt;
&lt;p&gt;Check out our message send heat map.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;img src=&quot;&#x2F;blog&#x2F;img&#x2F;2019-08-15-message-send.png&quot; alt=&quot;Message Send&quot; &#x2F;&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Other than that there are a bunch of bug fixes and tweaks to generally make things run more smoothly.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.3.0&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.2.1 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-3-0-2019-08-15&quot;&gt;Synapse 1.3.0 (2019-08-15)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix 500 Internal Server Error on &lt;code&gt;publicRooms&lt;&#x2F;code&gt; when the public room list was
cached. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5851&quot;&gt;#5851&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-3-0rc1-2019-08-13&quot;&gt;Synapse 1.3.0rc1 (2019-08-13)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Use &lt;code&gt;M_USER_DEACTIVATED&lt;&#x2F;code&gt; instead of &lt;code&gt;M_UNKNOWN&lt;&#x2F;code&gt; for errcode when a deactivated user attempts to login. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5686&quot;&gt;#5686&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add sd_notify hooks to ease systemd integration and allows usage of Type=Notify. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5732&quot;&gt;#5732&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Synapse will no longer serve any media repo admin endpoints when &lt;code&gt;enable_media_repo&lt;&#x2F;code&gt; is set to False in the configuration. If a media repo worker is used, the admin APIs relating to the media repo will be served from it instead. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5754&quot;&gt;#5754&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5848&quot;&gt;#5848&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Synapse can now be configured to not join remote rooms of a given &amp;quot;complexity&amp;quot; (currently, state events) over federation. This option can be used to prevent adverse performance on resource-constrained homeservers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5783&quot;&gt;#5783&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow defining HTML templates to serve the user on account renewal attempt when using the account validity feature. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5807&quot;&gt;#5807&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix UISIs during homeserver outage. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5693&quot;&gt;#5693&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5789&quot;&gt;#5789&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix stack overflow in server key lookup code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5724&quot;&gt;#5724&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;start.sh no longer uses deprecated cli option. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5725&quot;&gt;#5725&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Log when we receive an event receipt from an unexpected origin. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5743&quot;&gt;#5743&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix debian packaging scripts to correctly build sid packages. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5775&quot;&gt;#5775&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Correctly handle redactions of redactions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5788&quot;&gt;#5788&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Return 404 instead of 403 when accessing &#x2F;rooms&#x2F;{roomId}&#x2F;event&#x2F;{eventId} for an event without the appropriate permissions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5798&quot;&gt;#5798&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix check that tombstone is a state event in push rules. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5804&quot;&gt;#5804&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix error when trying to login as a deactivated user when using a worker to handle login. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5806&quot;&gt;#5806&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where user &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; stream could get wedged in rare circumstances. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5825&quot;&gt;#5825&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;The purge_remote_media.sh script was fixed. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5839&quot;&gt;#5839&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Synapse now no longer accepts the &lt;code&gt;-v&lt;&#x2F;code&gt;&#x2F;&lt;code&gt;--verbose&lt;&#x2F;code&gt;, &lt;code&gt;-f&lt;&#x2F;code&gt;&#x2F;&lt;code&gt;--log-file&lt;&#x2F;code&gt;, or &lt;code&gt;--log-config&lt;&#x2F;code&gt; command line flags, and removes the deprecated &lt;code&gt;verbose&lt;&#x2F;code&gt; and &lt;code&gt;log_file&lt;&#x2F;code&gt; configuration file options. Users of these options should migrate their options into the dedicated log configuration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5678&quot;&gt;#5678&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5729&quot;&gt;#5729&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove non-functional &#x27;expire_access_token&#x27; setting. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5782&quot;&gt;#5782&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Make Jaeger fully configurable. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5694&quot;&gt;#5694&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add precautionary measures to prevent future abuse of &lt;code&gt;window.opener&lt;&#x2F;code&gt; in default welcome page. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5695&quot;&gt;#5695&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce database IO usage by optimising queries for current membership. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5706&quot;&gt;#5706&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5738&quot;&gt;#5738&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5746&quot;&gt;#5746&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5752&quot;&gt;#5752&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5770&quot;&gt;#5770&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5774&quot;&gt;#5774&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5792&quot;&gt;#5792&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5793&quot;&gt;#5793&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve caching when fetching &lt;code&gt;get_filtered_current_state_ids&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5713&quot;&gt;#5713&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t accept opentracing data from clients. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5715&quot;&gt;#5715&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Speed up PostgreSQL unit tests in CI. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5717&quot;&gt;#5717&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update the coding style document. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5719&quot;&gt;#5719&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve database query performance when recording retry intervals for remote hosts. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5720&quot;&gt;#5720&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a set of opentracing utils. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5722&quot;&gt;#5722&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Cache result of get_version_string to reduce overhead of &lt;code&gt;&#x2F;version&lt;&#x2F;code&gt; federation requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5730&quot;&gt;#5730&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Return &#x27;user_type&#x27; in admin API user endpoints results. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5731&quot;&gt;#5731&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t package the sytest test blacklist file. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5733&quot;&gt;#5733&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Replace uses of returnValue with plain return, as returnValue is not needed on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5736&quot;&gt;#5736&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Blacklist some flakey tests in worker mode. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5740&quot;&gt;#5740&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix some error cases in the caching layer. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5749&quot;&gt;#5749&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a prometheus metric for pending cache lookups. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5750&quot;&gt;#5750&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Stop trying to fetch events with event_id=None. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5753&quot;&gt;#5753&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert RedactionTestCase to modern test style. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5768&quot;&gt;#5768&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow looping calls to be given arguments. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5780&quot;&gt;#5780&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Set the logs emitted when checking typing and presence timeouts to DEBUG level, not INFO. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5785&quot;&gt;#5785&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove DelayedCall debugging from the test suite, as it is no longer required in the vast majority of Synapse&#x27;s tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5787&quot;&gt;#5787&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove some spurious exceptions from the logs where we failed to talk to a remote server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5790&quot;&gt;#5790&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve performance when making &lt;code&gt;.well-known&lt;&#x2F;code&gt; requests by sharing the SSL options between requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5794&quot;&gt;#5794&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Disable codecov GitHub comments on PRs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5796&quot;&gt;#5796&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t allow clients to send tombstone events that reference the room it&#x27;s sent in. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5801&quot;&gt;#5801&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Deny redactions of events sent in a different room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5802&quot;&gt;#5802&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Deny sending well known state types as non-state events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5805&quot;&gt;#5805&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Handle incorrectly encoded query params correctly by returning a 400. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5808&quot;&gt;#5808&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Handle pusher being deleted during processing rather than logging an exception. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5809&quot;&gt;#5809&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Return 502 not 500 when failing to reach any remote server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5810&quot;&gt;#5810&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce global pauses in the events stream caused by expensive state resolution during persistence. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5826&quot;&gt;#5826&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a lower bound to well-known lookup cache time to avoid repeated lookups. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5836&quot;&gt;#5836&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Whitelist history visbility sytests in worker mode tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5843&quot;&gt;#5843&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Critical Security Update - Synapse 1.2.1 released</title>
		<published>2019-07-26T00:00:00+00:00</published>
		<updated>2019-07-26T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/07/26/critical-security-update-synapse-1-2-1-released/" type="text/html"/>
		<id>/blog/2019/07/26/critical-security-update-synapse-1-2-1-released/</id>
		<content type="html">&lt;p&gt;Today we release Synapse 1.2.1 as a critical security update. It contains patches relating to redactions and event federation. The patches address long standing bugs, and are not regressions specific to the previous version (1.2).  &lt;strong&gt;All admins, regardless of current version, should upgrade asap&lt;&#x2F;strong&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;This release includes &lt;em&gt;four&lt;&#x2F;em&gt; security fixes:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Prevent an attack where a federated server could send redactions for arbitrary events in v1 and v2 rooms. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5767&quot;&gt;#5767&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent a denial-of-service attack where cycles of redaction events would make Synapse spin infinitely. Thanks to &lt;code&gt;@lrizika:matrix.org&lt;&#x2F;code&gt; for identifying and responsibly disclosing this issue. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;commit&#x2F;0f2ecb961&quot;&gt;0f2ecb961&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent an attack where users could be joined or parted from public rooms without their consent. Thanks to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dylangerdaly&quot;&gt;Dylanger&lt;&#x2F;a&gt; for identifying and responsibly disclosing this issue. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5744&quot;&gt;#5744&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a vulnerability where a federated server could spoof read-receipts from
users on other servers. Thanks to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dylangerdaly&quot;&gt;Dylanger&lt;&#x2F;a&gt; for identifying this issue too. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5743&quot;&gt;#5743&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Additionally, the following fix was in Synapse &lt;strong&gt;1.2.0&lt;&#x2F;strong&gt;, but was not correctly
identified during the original release:&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;It was possible for a room moderator to send a redaction for an &lt;code&gt;m.room.create&lt;&#x2F;code&gt; event, which would downgrade the room to version 1. Thanks to &lt;code&gt;@&#x2F;dev&#x2F;ponies:ponies.im&lt;&#x2F;code&gt; for identifying and responsibly disclosing this issue! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5701&quot;&gt;#5701&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;You can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.2.1&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Alternatively check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Thanks for bearing with us.&lt;&#x2F;p&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.2.0 released</title>
		<published>2019-07-25T00:00:00+00:00</published>
		<updated>2019-07-25T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/07/25/synapse-1-2-0-released/" type="text/html"/>
		<id>/blog/2019/07/25/synapse-1-2-0-released/</id>
		<content type="html">&lt;p&gt;Hey hey, Synapse 1.2.0 is here. It contains aggregations support, better error handling for  deactivated accounts and some important bug fixes for redacting messages. Special thanks to community members &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;skalarproduktraum&quot;&gt;skalarproduktraum&lt;&#x2F;a&gt; and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Lrizika&quot;&gt;Lrizika&lt;&#x2F;a&gt; for submissions to improve our documentation.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.2.0&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.1.0 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-2-0-2019-07-25&quot;&gt;Synapse 1.2.0 (2019-07-25)&lt;&#x2F;h1&gt;
&lt;p&gt;No significant changes.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-2-0rc2-2019-07-24&quot;&gt;Synapse 1.2.0rc2 (2019-07-24)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix a regression introduced in v1.2.0rc1 which led to incorrect labels on some prometheus metrics. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5734&quot;&gt;#5734&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-2-0rc1-2019-07-22&quot;&gt;Synapse 1.2.0rc1 (2019-07-22)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add support for opentracing. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5544&quot;&gt;#5544&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5712&quot;&gt;#5712&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add ability to pull all locally stored events out of synapse that a particular user can see. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5589&quot;&gt;#5589&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a basic admin command app to allow server operators to run Synapse admin commands separately from the main production instance. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5597&quot;&gt;#5597&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;sender&lt;&#x2F;code&gt; and &lt;code&gt;origin_server_ts&lt;&#x2F;code&gt; fields to &lt;code&gt;m.replace&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5613&quot;&gt;#5613&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add default push rule to ignore reactions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5623&quot;&gt;#5623&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Include the original event when asking for its relations. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5626&quot;&gt;#5626&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Implement &lt;code&gt;session_lifetime&lt;&#x2F;code&gt; configuration option, after which access tokens will expire. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5660&quot;&gt;#5660&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Return &amp;quot;This account has been deactivated&amp;quot; when a deactivated user tries to login. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5674&quot;&gt;#5674&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Enable aggregations support by default (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5714&quot;&gt;#5714&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix &#x27;utime went backwards&#x27; errors on daemonization. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5609&quot;&gt;#5609&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Various minor fixes to the federation request rate limiter. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5621&quot;&gt;#5621&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Forbid viewing relations on an event once it has been redacted. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5629&quot;&gt;#5629&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix requests to the &lt;code&gt;&#x2F;store_invite&lt;&#x2F;code&gt; endpoint of identity servers being sent in the wrong format. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5638&quot;&gt;#5638&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix newly-registered users not being able to lookup their own profile without joining a room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5644&quot;&gt;#5644&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug in #5626 that prevented the original_event field from actually having the contents of the original event in a call to &lt;code&gt;&#x2F;relations&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5654&quot;&gt;#5654&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix 3PID bind requests being sent to identity servers as &lt;code&gt;application&#x2F;x-form-www-urlencoded&lt;&#x2F;code&gt; data, which is deprecated. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5658&quot;&gt;#5658&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix some problems with authenticating redactions in recent room versions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5699&quot;&gt;#5699&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5700&quot;&gt;#5700&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5707&quot;&gt;#5707&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ignore redactions of m.room.create events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5701&quot;&gt;#5701&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;updates-to-the-docker-image&quot;&gt;Updates to the Docker image&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Base Docker image on a newer Alpine Linux version (3.8 -&amp;gt; 3.10). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5619&quot;&gt;#5619&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add missing space in default logging file format generated by the Docker image. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5620&quot;&gt;#5620&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add information about nginx normalisation to reverse_proxy.rst. Contributed by @skalarproduktraum - thanks! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5397&quot;&gt;#5397&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;--no-pep517 should be --no-use-pep517 in the documentation to setup the development environment. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5651&quot;&gt;#5651&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improvements to Postgres setup instructions. Contributed by @Lrizika - thanks! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5661&quot;&gt;#5661&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Minor tweaks to postgres documentation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5675&quot;&gt;#5675&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Remove support for the &lt;code&gt;invite_3pid_guest&lt;&#x2F;code&gt; configuration setting. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5625&quot;&gt;#5625&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Move logging code out of &lt;code&gt;synapse.util&lt;&#x2F;code&gt; and into &lt;code&gt;synapse.logging&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5606&quot;&gt;#5606&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5617&quot;&gt;#5617&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a blacklist file to the repo to blacklist certain sytests from failing CI. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5611&quot;&gt;#5611&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make runtime errors surrounding password reset emails much clearer. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5616&quot;&gt;#5616&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove dead code for persiting outgoing federation transactions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5622&quot;&gt;#5622&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;lint.sh&lt;&#x2F;code&gt; to the scripts-dev folder which will run all linting steps required by CI. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5627&quot;&gt;#5627&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move RegistrationHandler.get_or_create_user to test code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5628&quot;&gt;#5628&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some more common python virtual-environment paths to the black exclusion list. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5630&quot;&gt;#5630&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Some counter metrics exposed over Prometheus have been renamed, with the old names preserved for backwards compatibility and deprecated. See &lt;code&gt;docs&#x2F;metrics-howto.rst&lt;&#x2F;code&gt; for details. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5636&quot;&gt;#5636&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Unblacklist some user_directory sytests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5637&quot;&gt;#5637&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Factor out some redundant code in the login implementation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5639&quot;&gt;#5639&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update ModuleApi to avoid register(generate_token=True). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5640&quot;&gt;#5640&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove access-token support from &lt;code&gt;RegistrationHandler.register&lt;&#x2F;code&gt;, and rename it. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5641&quot;&gt;#5641&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove access-token support from &lt;code&gt;RegistrationStore.register&lt;&#x2F;code&gt;, and rename it. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5642&quot;&gt;#5642&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve logging for auto-join when a new user is created. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5643&quot;&gt;#5643&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove unused and unnecessary check for FederationDeniedError in _exception_to_failure. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5645&quot;&gt;#5645&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a small typo in a code comment. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5655&quot;&gt;#5655&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up exception handling around client access tokens. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5656&quot;&gt;#5656&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a mechanism for per-test homeserver configuration in the unit tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5657&quot;&gt;#5657&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Inline issue_access_token. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5659&quot;&gt;#5659&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update the sytest BuildKite configuration to checkout Synapse in &lt;code&gt;&#x2F;src&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5664&quot;&gt;#5664&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a &lt;code&gt;docker&lt;&#x2F;code&gt; type to the towncrier configuration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5673&quot;&gt;#5673&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert &lt;code&gt;synapse.federation.transport.server&lt;&#x2F;code&gt; to &lt;code&gt;async&lt;&#x2F;code&gt;. Might improve some stack traces. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5689&quot;&gt;#5689&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Documentation for opentracing. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5703&quot;&gt;#5703&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.1.0 released</title>
		<published>2019-07-04T00:00:00+00:00</published>
		<updated>2019-07-04T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/07/04/synapse-1-1-0-released/" type="text/html"/>
		<id>/blog/2019/07/04/synapse-1-1-0-released/</id>
		<content type="html">&lt;p&gt;Right folks, this is our first post 1.0 release, which means that we have now
officially &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2019&#x2F;04&#x2F;08&#x2F;synapse-deprecating-postgres-9-4-and-python-2-x&quot;&gt;dropped support for Python 2 and Postgres
9.4&lt;&#x2F;a&gt;.
This means that we can start making use of Python 3 specific features and you
should expect lots of associated performance wins over the coming months. See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;UPGRADE.rst#upgrading-to-v110&quot;&gt;upgrade notes&lt;&#x2F;a&gt; for more.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.1.0 also contains a reworked approach to the Docker image, as well lots
of performance improvements with special focus on DB IO - expect more to come
in this area.&lt;&#x2F;p&gt;
&lt;p&gt;Special thanks to community member &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;galexrt&quot;&gt;Alexander
Trost&lt;&#x2F;a&gt; for rounding out  our SAML support and also
to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dhoffend&quot;&gt;Daniel Hoffend&lt;&#x2F;a&gt; for contributing the ability
to disable local password authentication.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.1.0&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 1.0.0 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-1-0-2019-07-04&quot;&gt;Synapse 1.1.0 (2019-07-04)&lt;&#x2F;h1&gt;
&lt;p&gt;As of v1.1.0, Synapse no longer supports Python 2, nor Postgres version 9.4.
See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;UPGRADE.rst#upgrading-to-v110&quot;&gt;upgrade notes&lt;&#x2F;a&gt; for more details.&lt;&#x2F;p&gt;
&lt;p&gt;This release also deprecates the use of environment variables to configure the
docker image. See the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v1.1.0&#x2F;docker&#x2F;README.md#legacy-dynamic-configuration-file-support&quot;&gt;docker README&lt;&#x2F;a&gt;
for more details.&lt;&#x2F;p&gt;
&lt;p&gt;No changes since 1.1.0rc2.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-1-0rc2-2019-07-03&quot;&gt;Synapse 1.1.0rc2 (2019-07-03)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix regression in 1.1rc1 where OPTIONS requests to the media repo would fail. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5593&quot;&gt;#5593&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Removed the &lt;code&gt;SYNAPSE_SMTP_*&lt;&#x2F;code&gt; docker container environment variables. Using these environment variables prevented the docker container from starting in Synapse v1.0, even though they didn&#x27;t actually allow any functionality anyway. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5596&quot;&gt;#5596&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a number of &amp;quot;Starting txn from sentinel context&amp;quot; warnings. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5605&quot;&gt;#5605&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Update github templates. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5552&quot;&gt;#5552&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-1-0rc1-2019-07-02&quot;&gt;Synapse 1.1.0rc1 (2019-07-02)&lt;&#x2F;h1&gt;
&lt;p&gt;As of v1.1.0, Synapse no longer supports Python 2, nor Postgres version 9.4.
See the &lt;a href=&quot;UPGRADE.rst#upgrading-to-v110&quot;&gt;upgrade notes&lt;&#x2F;a&gt; for more details.&lt;&#x2F;p&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Added possibility to disable local password authentication. Contributed by Daniel Hoffend. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5092&quot;&gt;#5092&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add monthly active users to phonehome stats. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5252&quot;&gt;#5252&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow expired user to trigger renewal email sending manually. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5363&quot;&gt;#5363&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Statistics on forward extremities per room are now exposed via Prometheus. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5384&quot;&gt;#5384&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5458&quot;&gt;#5458&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5461&quot;&gt;#5461&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add --no-daemonize option to run synapse in the foreground, per issue #4130. Contributed by Soham Gumaste. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5412&quot;&gt;#5412&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5587&quot;&gt;#5587&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fully support SAML2 authentication. Contributed by &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;galexrt&quot;&gt;Alexander Trost&lt;&#x2F;a&gt; - thank you! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5422&quot;&gt;#5422&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow server admins to define implementations of extra rules for allowing or denying incoming events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5440&quot;&gt;#5440&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5474&quot;&gt;#5474&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5477&quot;&gt;#5477&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for handling pagination APIs on client reader worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5505&quot;&gt;#5505&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5513&quot;&gt;#5513&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5531&quot;&gt;#5531&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve help and cmdline option names for --generate-config options. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5512&quot;&gt;#5512&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow configuration of the path used for ACME account keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5516&quot;&gt;#5516&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5521&quot;&gt;#5521&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5522&quot;&gt;#5522&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add --data-dir and --open-private-ports options. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5524&quot;&gt;#5524&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Split public rooms directory auth config in two settings, in order to manage client auth independently from the federation part of it. Obsoletes the &amp;quot;restrict_public_rooms_to_local_users&amp;quot; configuration setting. If &amp;quot;restrict_public_rooms_to_local_users&amp;quot; is set in the config, Synapse will act as if both new options are enabled, i.e. require authentication through the client API and deny federation requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5534&quot;&gt;#5534&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;The minimum TLS version used for outgoing federation requests can now be set with &lt;code&gt;federation_client_minimum_tls_version&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5550&quot;&gt;#5550&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Optimise devices changed query to not pull unnecessary rows from the database, reducing database load. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5559&quot;&gt;#5559&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add new metrics for number of forward extremities being persisted and number of state groups involved in resolution. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5476&quot;&gt;#5476&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix bug processing incoming events over federation if call to &lt;code&gt;&#x2F;get_missing_events&lt;&#x2F;code&gt; fails. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5042&quot;&gt;#5042&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent more than one room upgrade happening simultaneously on the same room. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5051&quot;&gt;#5051&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where running synapse_port_db would cause the account validity feature to fail because it didn&#x27;t set the type of the email_sent column to boolean. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5325&quot;&gt;#5325&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Warn about disabling email-based password resets when a reset occurs, and remove warning when someone attempts a phone-based reset. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5387&quot;&gt;#5387&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix email notifications for unnamed rooms with multiple people. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5388&quot;&gt;#5388&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix exceptions in federation reader worker caused by attempting to renew attestations, which should only happen on master worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5389&quot;&gt;#5389&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix handling of failures fetching remote content to not log failures as exceptions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5390&quot;&gt;#5390&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where deactivated users could receive renewal emails if the account validity feature is on. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5394&quot;&gt;#5394&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix missing invite state after exchanging 3PID invites over federaton. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5464&quot;&gt;#5464&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix intermittent exceptions on Apple hardware. Also fix bug that caused database activity times to be under-reported in log lines. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5498&quot;&gt;#5498&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix logging error when a tampered event is detected. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5500&quot;&gt;#5500&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where clients could tight loop calling &lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt; for a period. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5507&quot;&gt;#5507&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug with &lt;code&gt;jinja2&lt;&#x2F;code&gt; preventing Synapse from starting. Users who had this problem should now simply need to run &lt;code&gt;pip install matrix-synapse&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5514&quot;&gt;#5514&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a regression where homeservers on private IP addresses were incorrectly blacklisted. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5523&quot;&gt;#5523&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fixed m.login.jwt using unregistered user_id and added pyjwt&amp;gt;=1.6.4 as jwt conditional dependencies. Contributed by Pau Rodriguez-Estivill. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5555&quot;&gt;#5555&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5586&quot;&gt;#5586&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug that would cause invited users to receive several emails for a single 3PID invite in case the inviter is rate limited. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5576&quot;&gt;#5576&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;updates-to-the-docker-image&quot;&gt;Updates to the Docker image&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add ability to change Docker containers &lt;a href=&quot;https:&#x2F;&#x2F;en.wikipedia.org&#x2F;wiki&#x2F;List_of_tz_database_time_zones&quot;&gt;timezone&lt;&#x2F;a&gt; with the &lt;code&gt;TZ&lt;&#x2F;code&gt; variable. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5383&quot;&gt;#5383&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update docker image to use Python 3.7. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5546&quot;&gt;#5546&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Deprecate the use of environment variables for configuration, and make the use of a static configuration the default. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5561&quot;&gt;#5561&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5562&quot;&gt;#5562&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5566&quot;&gt;#5566&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5567&quot;&gt;#5567&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Increase default log level for docker image to INFO. It can still be changed by editing the generated log.config file. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5547&quot;&gt;#5547&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Send synapse logs to the docker logging system, by default. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5565&quot;&gt;#5565&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Open the non-TLS port by default. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5568&quot;&gt;#5568&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix failure to start under docker with SAML support enabled. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5490&quot;&gt;#5490&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Use a sensible location for data files when generating a config file. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5563&quot;&gt;#5563&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;deprecations-and-removals&quot;&gt;Deprecations and Removals&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Python 2.7 is no longer a supported platform. Synapse now requires Python 3.5+ to run. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5425&quot;&gt;#5425&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;PostgreSQL 9.4 is no longer supported. Synapse requires Postgres 9.5+ or above for Postgres support. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5448&quot;&gt;#5448&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove support for cpu_affinity setting. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5525&quot;&gt;#5525&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Improve README section on performance troubleshooting. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4276&quot;&gt;#4276&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add information about how to install and run &lt;code&gt;black&lt;&#x2F;code&gt; on the codebase to code_style.rst. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5537&quot;&gt;#5537&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve install docs on choosing server_name. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5558&quot;&gt;#5558&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes-1&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add logging to 3pid invite signature verification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5015&quot;&gt;#5015&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update example haproxy config to a more compatible setup. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5313&quot;&gt;#5313&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Track deactivated accounts in the database. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5378&quot;&gt;#5378&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5465&quot;&gt;#5465&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5493&quot;&gt;#5493&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up code for sending federation EDUs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5381&quot;&gt;#5381&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a sponsor button to the repo. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5382&quot;&gt;#5382&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5386&quot;&gt;#5386&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t log non-200 responses from federation queries as exceptions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5383&quot;&gt;#5383&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update Python syntax in contrib&#x2F; to Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5446&quot;&gt;#5446&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update federation_client dev script to support &lt;code&gt;.well-known&lt;&#x2F;code&gt; and work with python3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5447&quot;&gt;#5447&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;SyTest has been moved to Buildkite. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5459&quot;&gt;#5459&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Demo script now uses python3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5460&quot;&gt;#5460&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Synapse can now handle RestServlets that return coroutines. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5475&quot;&gt;#5475&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5585&quot;&gt;#5585&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;The demo servers talk to each other again. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5478&quot;&gt;#5478&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an EXPERIMENTAL config option to try and periodically clean up extremities by sending dummy events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5480&quot;&gt;#5480&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Synapse&#x27;s codebase is now formatted by &lt;code&gt;black&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5482&quot;&gt;#5482&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Some cleanups and sanity-checking in the CPU and database metrics. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5499&quot;&gt;#5499&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve email notification logging. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5502&quot;&gt;#5502&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &amp;quot;Unexpected entry in &#x27;full_schemas&#x27;&amp;quot; log warning. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5509&quot;&gt;#5509&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve logging when generating config files. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5510&quot;&gt;#5510&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor and clean up Config parser for maintainability. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5511&quot;&gt;#5511&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make the config clearer in that email.template_dir is relative to the Synapse&#x27;s root directory, not the &lt;code&gt;synapse&#x2F;&lt;&#x2F;code&gt; folder within it. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5543&quot;&gt;#5543&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update v1.0.0 release changelog to include more information about changes to password resets. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5545&quot;&gt;#5545&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove non-functioning check_event_hash.py dev script. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5548&quot;&gt;#5548&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Synapse will now only allow TLS v1.2 connections when serving federation, if it terminates TLS. As Synapse&#x27;s allowed ciphers were only able to be used in TLSv1.2 before, this does not change behaviour. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5550&quot;&gt;#5550&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Logging when running GC collection on generation 0 is now at the DEBUG level, not INFO. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5557&quot;&gt;#5557&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce the amount of stuff we send in the docker context. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5564&quot;&gt;#5564&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Point the reverse links in the Purge History contrib scripts at the intended location. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5570&quot;&gt;#5570&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 1.0.0 released</title>
		<published>2019-06-11T00:00:00+00:00</published>
		<updated>2019-06-11T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/06/11/synapse-1-0-0-released/" type="text/html"/>
		<id>/blog/2019/06/11/synapse-1-0-0-released/</id>
		<content type="html">&lt;p&gt;Well here it is: Synapse 1.0.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.0 is the reference implementation of the &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;spec&quot;&gt;Matrix 1.0 spec&lt;&#x2F;a&gt;. The goal of the release overall has been to focus on security and stability, such that we can officially declare Synapse (and Matrix) out of beta and recommended for production use. This means changing the default room protocol version used for new rooms to be &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;blob&#x2F;37871106c6fc6013c17b5711fb93853fff140267&#x2F;proposals&#x2F;2002-rooms-v4.md&quot;&gt;v4&lt;&#x2F;a&gt;, which includes the new &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;blob&#x2F;f714aaadd011ac736d779f8460202a8d95799123&#x2F;proposals&#x2F;1442-state-resolution.md&quot;&gt;state resolution algorithm&lt;&#x2F;a&gt;, as well as &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;blob&#x2F;erikj&#x2F;event_id_hashes&#x2F;proposals&#x2F;1659-event-id-as-hashes.md&quot;&gt;collision-resistant event IDs&lt;&#x2F;a&gt;, which are now formatted to be &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;blob&#x2F;rav&#x2F;proposal&#x2F;no_slash_in_event_id&#x2F;proposals&#x2F;1884-replace-slashes-in-event_ids.md&quot;&gt;URL safe&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.0 also ships with support for the upcoming &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;spec&#x2F;rooms&#x2F;v5.html&quot;&gt;v5 room protocol&lt;&#x2F;a&gt; (which enforces honouring server key validity periods), but this will not be used as the default for new rooms until a sufficient number of servers support it.&lt;&#x2F;p&gt;
&lt;p&gt;Please note that Synapse 1.0 does &lt;strong&gt;not&lt;&#x2F;strong&gt; include significant performance work or new features - our focus has been almost exclusively on providing a reference implementation of the Matrix 1.0 protocol. But having cleared our backlog on security&#x2F;stability issues we will finally be now unblocked to pursue work around reducing RAM footprint, eliminating forward-extremity build up, and shipping new features like Edits, Reactions &amp;amp; E2E cross-signing support.&lt;&#x2F;p&gt;
&lt;p&gt;As part of the security work, Synapse 1.0 contains a &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;MSC1711_certificates_FAQ.md#it-used-to-work-just-fine-why-are-you-breaking-everything&quot;&gt;breaking change&lt;&#x2F;a&gt; that requires a valid TLS certificate on the federation API endpoint. &lt;strong&gt;Servers that do not configure their certificate will no longer be able to federate post 1.0.&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;It is also worth noting that Synapse 1.0.0 is the last release that will support Python 2.x and Postgres 9.4. For more information see &lt;a href=&quot;&#x2F;blog&#x2F;2019&#x2F;04&#x2F;08&#x2F;synapse-deprecating-postgres-9-4-and-python-2-x&quot;&gt;here&lt;&#x2F;a&gt; but the TL;DR is that you should upgrade asap.&lt;&#x2F;p&gt;
&lt;p&gt;This release has been a long time coming. Many thanks indeed to everyone who helped test the release candidates and provided feedback along the way.&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 1.0 is just one component of a larger Matrix 1.0 release, which you can &lt;a href=&quot;&#x2F;blog&#x2F;2019&#x2F;06&#x2F;11&#x2F;introducing-matrix-1-0-and-the-matrix-org-foundation&quot;&gt;read all about here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v1.0.0&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;The changelog since 0.99.5 follows:&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-0-0-2019-06-11&quot;&gt;Synapse 1.0.0 (2019-06-11)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix bug where attempting to send transactions with large number of EDUs can fail. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5418&quot;&gt;#5418&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Expand the federation guide to include relevant content from the MSC1711 FAQ (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5419&quot;&gt;#5419&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Move password reset links to &#x2F;_matrix&#x2F;client&#x2F;unstable namespace. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5424&quot;&gt;#5424&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-0-0rc3-2019-06-10&quot;&gt;Synapse 1.0.0rc3 (2019-06-10)&lt;&#x2F;h1&gt;
&lt;p&gt;Security: Fix authentication bug introduced in 1.0.0rc1. Please upgrade to rc3 immediately&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-1-0-0rc2-2019-06-10&quot;&gt;Synapse 1.0.0rc2 (2019-06-10)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes-1&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Remove redundant warning about key server response validation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5392&quot;&gt;#5392&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where old keys stored in the database with a null valid until timestamp caused all verification requests for that key to fail. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5415&quot;&gt;#5415&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix excessive memory using with default &lt;code&gt;federation_verify_certificates: true&lt;&#x2F;code&gt; configuration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5417&quot;&gt;#5417&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1 id=&quot;synapse-1-0-0rc1-2019-06-07&quot;&gt;Synapse 1.0.0rc1 (2019-06-07)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Synapse now more efficiently collates room statistics. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4338&quot;&gt;#4338&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5260&quot;&gt;#5260&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5324&quot;&gt;#5324&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add experimental support for relations (aka reactions and edits). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5220&quot;&gt;#5220&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ability to configure default room version. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5223&quot;&gt;#5223&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5249&quot;&gt;#5249&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow configuring a range for the account validity startup job. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5276&quot;&gt;#5276&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;CAS login will now hit the r0 API, not the deprecated v1 one. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5286&quot;&gt;#5286&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Validate federation server TLS certificates by default (implements &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;blob&#x2F;master&#x2F;proposals&#x2F;1711-x509-for-federation.md&quot;&gt;MSC1711&lt;&#x2F;a&gt;). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5359&quot;&gt;#5359&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update &#x2F;_matrix&#x2F;client&#x2F;versions to reference support for r0.5.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5360&quot;&gt;#5360&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a script to generate new signing-key files. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5361&quot;&gt;#5361&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update upgrade and installation guides ahead of 1.0. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5371&quot;&gt;#5371&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Replace the &lt;code&gt;perspectives&lt;&#x2F;code&gt; configuration section with &lt;code&gt;trusted_key_servers&lt;&#x2F;code&gt;, and make validating the signatures on responses optional (since TLS will do this job for us). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5374&quot;&gt;#5374&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add ability to perform password reset via email without trusting the identity server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5377&quot;&gt;#5377&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Set default room version to v4. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5379&quot;&gt;#5379&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes-2&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fixes client-server API not sending &amp;quot;m.heroes&amp;quot; to lazy-load &#x2F;sync requests when a rooms name or its canonical alias are empty. Thanks to @dnaf for this work! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5089&quot;&gt;#5089&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent federation device list updates breaking when processing multiple updates at once. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5156&quot;&gt;#5156&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix worker registration bug caused by ClientReaderSlavedStore being unable to see get_profileinfo. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5200&quot;&gt;#5200&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix race when backfilling in rooms with worker mode. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5221&quot;&gt;#5221&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix appservice timestamp massaging. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5233&quot;&gt;#5233&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ensure that server_keys fetched via a notary server are correctly signed. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5251&quot;&gt;#5251&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Show the correct error when logging out and access token is missing. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5256&quot;&gt;#5256&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix error code when there is an invalid parameter on &#x2F;_matrix&#x2F;client&#x2F;r0&#x2F;publicRooms (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5257&quot;&gt;#5257&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix error when downloading thumbnail with missing width&#x2F;height parameter. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5258&quot;&gt;#5258&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix schema update for account validity. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5268&quot;&gt;#5268&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where we leaked extremities when we soft failed events, leading to performance degradation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5274&quot;&gt;#5274&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5278&quot;&gt;#5278&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5291&quot;&gt;#5291&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &amp;quot;db txn &#x27;update_presence&#x27; from sentinel context&amp;quot; log messages. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5275&quot;&gt;#5275&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix dropped logcontexts during high outbound traffic. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5277&quot;&gt;#5277&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where it is not possible to get events in the federation format with the request &lt;code&gt;GET &#x2F;_matrix&#x2F;client&#x2F;r0&#x2F;rooms&#x2F;{roomId}&#x2F;messages&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5293&quot;&gt;#5293&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix performance problems with the rooms stats background update. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5294&quot;&gt;#5294&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix noisy &#x27;no key for server&#x27; logs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5300&quot;&gt;#5300&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where a notary server would sometimes forget old keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5307&quot;&gt;#5307&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent users from setting huge displaynames and avatar URLs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5309&quot;&gt;#5309&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix handling of failures when processing incoming events where calling &lt;code&gt;&#x2F;event_auth&lt;&#x2F;code&gt; on remote server fails. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5317&quot;&gt;#5317&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ensure that we have an up-to-date copy of the signing key when validating incoming federation requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5321&quot;&gt;#5321&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix various problems which made the signing-key notary server time out for some requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5333&quot;&gt;#5333&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug which would make certain operations (such as room joins) block for 20 minutes while attemoting to fetch verification keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5334&quot;&gt;#5334&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where we could rapidly mark a server as unreachable even though it was only down for a few minutes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5335&quot;&gt;#5335&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5340&quot;&gt;#5340&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where account validity renewal emails could only be sent when email notifs were enabled. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5341&quot;&gt;#5341&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix failure when fetching batches of events during backfill, etc. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5342&quot;&gt;#5342&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a new room version where the timestamps on events are checked against the validity periods on signing keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5348&quot;&gt;#5348&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5354&quot;&gt;#5354&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix room stats and presence background updates to correctly handle missing events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5352&quot;&gt;#5352&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Include left members in room summaries&#x27; heroes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5355&quot;&gt;#5355&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &lt;code&gt;federation_custom_ca_list&lt;&#x2F;code&gt; configuration option. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5362&quot;&gt;#5362&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix missing logcontext warnings on shutdown. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5369&quot;&gt;#5369&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;improved-documentation-1&quot;&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix docs on resetting the user directory. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5282&quot;&gt;#5282&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix notes about ACME in the MSC1711 faq. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5357&quot;&gt;#5357&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes-1&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Synapse will now serve the experimental &amp;quot;room complexity&amp;quot; API endpoint. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5216&quot;&gt;#5216&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;The base classes for the v1 and v2_alpha REST APIs have been unified. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5226&quot;&gt;#5226&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5328&quot;&gt;#5328&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Simplifications and comments in do_auth. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5227&quot;&gt;#5227&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove urllib3 pin as requests 2.22.0 has been released supporting urllib3 1.25.2. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5230&quot;&gt;#5230&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Preparatory work for key-validity features. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5232&quot;&gt;#5232&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5234&quot;&gt;#5234&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5235&quot;&gt;#5235&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5236&quot;&gt;#5236&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5237&quot;&gt;#5237&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5244&quot;&gt;#5244&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5250&quot;&gt;#5250&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5296&quot;&gt;#5296&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5299&quot;&gt;#5299&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5343&quot;&gt;#5343&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5347&quot;&gt;#5347&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5356&quot;&gt;#5356&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Specify the type of reCAPTCHA key to use. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5283&quot;&gt;#5283&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve sample config for monthly active user blocking. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5284&quot;&gt;#5284&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove spurious debug from MatrixFederationHttpClient.get_json. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5287&quot;&gt;#5287&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve logging for logcontext leaks. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5288&quot;&gt;#5288&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clarify that the admin change password API logs the user out. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5303&quot;&gt;#5303&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;New installs will now use the v54 full schema, rather than the full schema v14 and applying incremental updates to v54. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5320&quot;&gt;#5320&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve docstrings on MatrixFederationClient. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5332&quot;&gt;#5332&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up FederationClient.get_events for clarity. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5344&quot;&gt;#5344&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Various improvements to debug logging. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5353&quot;&gt;#5353&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t run CI build checks until sample config check has passed. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5370&quot;&gt;#5370&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Automatically retry buildkite builds (max twice) when an agent is lost. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5380&quot;&gt;#5380&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.99.5.2 released</title>
		<published>2019-05-30T00:00:00+00:00</published>
		<updated>2019-05-30T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/05/30/synapse-0-99-5-2-released/" type="text/html"/>
		<id>/blog/2019/05/30/synapse-0-99-5-2-released/</id>
		<content type="html">&lt;p&gt;0.99.5.2 contains a critical performance fix following a regression that was introduced in 0.99.5. Affected servers will have experienced increased CPU and RAM usage with a knock on effect of generally sluggish performance.&lt;&#x2F;p&gt;
&lt;p&gt;Separately, we are also looking into reports relating to further performance degradations that may have been introduced as part of 0.99.5, though consider the 0.99.5.2 fix to be a significant improvement on previous 0.99.5.x releases.&lt;&#x2F;p&gt;
&lt;p&gt;Please upgrade asap.&lt;&#x2F;p&gt;
&lt;p&gt;You can get the new update¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.99.5.2&quot;&gt;here&lt;&#x2F;a&gt;¬†or any of the sources mentioned at¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up¬†&lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-v0-99-5-2-changelog&quot;&gt;Synapse v0.99.5.2 Changelog&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix bug where we leaked extremities when we soft failed events, leading to performance degradation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5274&quot;&gt;#5274&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5278&quot;&gt;#5278&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5291&quot;&gt;#5291&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.99.5.1 released!</title>
		<published>2019-05-21T00:00:00+00:00</published>
		<updated>2019-05-21T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/05/21/synapse-0-99-5-1-released/" type="text/html"/>
		<id>/blog/2019/05/21/synapse-0-99-5-1-released/</id>
		<content type="html">&lt;p&gt;Okay folks, this is an important one. v0.99.5.1 will be the last release before we ship Synapse v1.0. &lt;strong&gt;It is really important that you upgrade to v0.99.5.1 because it implements rooms &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;blob&#x2F;matthew&#x2F;room_v4&#x2F;proposals&#x2F;2002-rooms-v4.md&quot;&gt;version 4&lt;&#x2F;a&gt; - which is the room version that Synapse 1.0 will default to.&lt;&#x2F;strong&gt;&lt;&#x2F;p&gt;
&lt;p&gt;This means that Synapse 1.0 servers will create new rooms as version 4 by default and servers that have not upgraded to at least v0.99.5.1 will not be able to join those rooms.&lt;&#x2F;p&gt;
&lt;p&gt;Over the coming days we will announce a release day for Synapse v1.0, the idea is to give admins 2 weeks notice so that anyone yet to configure their federation SSL certificate has time to do so. &lt;strong&gt;This is important, failure to configure your certs will mean not being able to federate with v1.0 servers.&lt;&#x2F;strong&gt; If you are not sure if you certs are valid, you can test &lt;a href=&quot;https:&#x2F;&#x2F;federationtester.matrix.org&#x2F;&quot;&gt;here&lt;&#x2F;a&gt; and read &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;MSC1711_certificates_FAQ.md&quot;&gt;here&lt;&#x2F;a&gt; for more info on what to do.&lt;&#x2F;p&gt;
&lt;p&gt;Aside from room v4, this release also includes the ability to blacklist specific IPs from federating as well as experimental support for edits and reactions. We are not quite ready to mark the feature &#x27;done done&#x27;, but it is very close. Watch out for news as the feature lands properly.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;re really close to v1.0 now, give us a few more days and we&#x27;ll announce an official release date.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.99.5.1&quot;&gt;here&lt;&#x2F;a&gt;¬†or any of the sources mentioned at¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up¬†&lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-v0-99-5-1-changelog-since-v0-99-4&quot;&gt;Synapse v0.99.5.1 Changelog (since v0.99.4)&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add ability to blacklist IP ranges for the federation client. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5043&quot;&gt;#5043&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Ratelimiting configuration for clients sending messages and the federation server has been altered to match login ratelimiting. The old configuration names will continue working. Check the sample config for details of the new names. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5181&quot;&gt;#5181&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Drop support for the undocumented &#x2F;_matrix&#x2F;client&#x2F;v2_alpha API prefix. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5190&quot;&gt;#5190&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an option to disable per-room profiles. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5196&quot;&gt;#5196&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Stick an expiration date to any registered user missing one at startup if account validity is enabled. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5204&quot;&gt;#5204&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add experimental support for relations (aka reactions and edits). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5209&quot;&gt;#5209&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5211&quot;&gt;#5211&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5203&quot;&gt;#5203&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5212&quot;&gt;#5212&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a room version 4 which uses a new event ID format, as per &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;2002&quot;&gt;MSC2002&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5210&quot;&gt;#5210&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5217&quot;&gt;#5217&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Fix image orientation when generating thumbnails (needs pillow&amp;gt;=4.3.0). Contributed by Pau Rodriguez-Estivill. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5039&quot;&gt;#5039&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Exclude soft-failed events from forward-extremity candidates: fixes &amp;quot;No forward extremities left!&amp;quot; error. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5146&quot;&gt;#5146&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Re-order stages in registration flows such that msisdn and email verification are done last. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5174&quot;&gt;#5174&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix 3pid guest invites. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5177&quot;&gt;#5177&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix a bug where the register endpoint would fail with M_THREEPID_IN_USE instead of returning an account previously registered in the same session. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5187&quot;&gt;#5187&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent registration for user ids that are too long to fit into a state key. Contributed by Reid Anderson. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5198&quot;&gt;#5198&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix incompatibility between ACME support and Python 3.5.2. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5218&quot;&gt;#5218&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix error handling for rooms whose versions are unknown. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5219&quot;&gt;#5219&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Make &#x2F;sync attempt to return device updates for both joined and invited users. Note that this doesn&#x27;t currently work correctly due to other bugs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3484&quot;&gt;#3484&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update tests to consistently be configured via the same code that is used when loading from configuration files. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5171&quot;&gt;#5171&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5185&quot;&gt;#5185&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Allow client event serialization to be async. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5183&quot;&gt;#5183&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Expose DataStore._get_events as get_events_as_list. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5184&quot;&gt;#5184&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make generating SQL bounds for pagination generic. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5191&quot;&gt;#5191&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Stop telling people to install the optional dependencies by default. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5197&quot;&gt;#5197&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.99.4 released!</title>
		<published>2019-05-15T00:00:00+00:00</published>
		<updated>2019-05-15T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/05/15/synapse-0-99-4-released/" type="text/html"/>
		<id>/blog/2019/05/15/synapse-0-99-4-released/</id>
		<content type="html">&lt;p&gt;Hey ho Synapse release day.&lt;&#x2F;p&gt;
&lt;p&gt;0.99.4 is a maintenance release collecting together all of the bug fixes and performance improvements over the past few weeks, additionally there is further support for the upcoming 1.0 release (more info coming soon). One thing worth calling out is how many community contributions have made their way into 0.99.4, take a look at the change log for details, but many thanks to everyone submitting PRs, keep them coming!&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.99.4&quot;&gt;here&lt;&#x2F;a&gt;¬†or any of the sources mentioned at¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up¬†&lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our &lt;a href=&quot;https:&#x2F;&#x2F;matrix.org&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h1 id=&quot;synapse-0-99-4-changelog&quot;&gt;Synapse 0.99.4 Changelog&lt;&#x2F;h1&gt;
&lt;h2 id=&quot;features&quot;&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add systemd-python to the optional dependencies to enable logging to the systemd journal. Install with &lt;code&gt;pip install matrix-synapse[systemd]&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4339&quot;&gt;#4339&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a default .m.rule.tombstone push rule. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4867&quot;&gt;#4867&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add ability for password provider modules to bind email addresses to users upon registration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4947&quot;&gt;#4947&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Implementation of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;pull&#x2F;1711&quot;&gt;MSC1711&lt;&#x2F;a&gt; including config options for requiring valid TLS certificates for federation traffic, the ability to disable TLS validation for specific domains, and the ability to specify your own list of CA certificates. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4967&quot;&gt;#4967&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove presence list support as per MSC 1819. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4989&quot;&gt;#4989&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce CPU usage starting pushers during start up. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4991&quot;&gt;#4991&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add a delete group admin API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5002&quot;&gt;#5002&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add config option to block users from looking up 3PIDs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5010&quot;&gt;#5010&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add context to phonehome stats. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5020&quot;&gt;#5020&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Configure the example systemd units to have a log identifier of &lt;code&gt;matrix-synapse&lt;&#x2F;code&gt;
instead of the executable name, &lt;code&gt;python&lt;&#x2F;code&gt;.
Contributed by Christoph M√ºller. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5023&quot;&gt;#5023&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add time-based account expiration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5027&quot;&gt;#5027&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5047&quot;&gt;#5047&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5073&quot;&gt;#5073&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5116&quot;&gt;#5116&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add support for handling &#x2F;versions, &#x2F;voip and &#x2F;push_rules client endpoints to client_reader worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5063&quot;&gt;#5063&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5065&quot;&gt;#5065&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5070&quot;&gt;#5070&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add an configuration option to require authentication on &#x2F;publicRooms and &#x2F;profile endpoints. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5083&quot;&gt;#5083&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Move admin APIs to &lt;code&gt;&#x2F;_synapse&#x2F;admin&#x2F;v1&lt;&#x2F;code&gt;. (The old paths are retained for backwards-compatibility, for now). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5119&quot;&gt;#5119&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Implement an admin API for sending server notices. Many thanks to @krombel who provided a foundation for this work. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5121&quot;&gt;#5121&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5142&quot;&gt;#5142&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Avoid redundant URL encoding of redirect URL for SSO login in the fallback login page. Fixes a regression introduced in &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4220&quot;&gt;#4220&lt;&#x2F;a&gt;. Contributed by Marcel Fabian Kr√ºger (&amp;quot;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;zauguin&quot;&gt;zaugin&lt;&#x2F;a&gt;&amp;quot;). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4555&quot;&gt;#4555&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bug where presence updates were sent to all servers in a room when a new server joined, rather than to just the new server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4942&quot;&gt;#4942&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5103&quot;&gt;#5103&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix sync bug which made accepting invites unreliable in worker-mode synapses. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4955&quot;&gt;#4955&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4956&quot;&gt;#4956&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;start.sh: Fix the --no-rate-limit option for messages and make it bypass rate limit on registration and login too. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4981&quot;&gt;#4981&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Transfer related groups on room upgrade. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4990&quot;&gt;#4990&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent the ability to kick users from a room they aren&#x27;t in. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4999&quot;&gt;#4999&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix issue #4596 so synapse_port_db script works with --curses option on Python 3. Contributed by Anders Jensen-Waud &lt;a href=&quot;mailto:anders@jensenwaud.com&quot;&gt;anders@jensenwaud.com&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5003&quot;&gt;#5003&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clients timing out&#x2F;disappearing while downloading from the media repository will now no longer log a spurious &amp;quot;Producer was not unregistered&amp;quot; message. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5009&quot;&gt;#5009&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix &amp;quot;cannot import name execute_batch&amp;quot; error with postgres. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5032&quot;&gt;#5032&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix disappearing exceptions in manhole. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5035&quot;&gt;#5035&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Workaround bug in twisted where attempting too many concurrent DNS requests could cause it to hang due to running out of file descriptors. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5037&quot;&gt;#5037&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Make sure we&#x27;re not registering the same 3pid twice on registration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5071&quot;&gt;#5071&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Don&#x27;t crash on lack of expiry templates. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5077&quot;&gt;#5077&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix the ratelimting on third party invites. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5104&quot;&gt;#5104&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add some missing limitations to room alias creation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5124&quot;&gt;#5124&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5128&quot;&gt;#5128&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Limit the number of EDUs in transactions to 100 as expected by synapse. Thanks to @superboum for this work! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5138&quot;&gt;#5138&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix bogus imports in unit tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5154&quot;&gt;#5154&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2 id=&quot;internal-changes&quot;&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
&lt;li&gt;Add test to verify threepid auth check added in #4435. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4474&quot;&gt;#4474&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix&#x2F;improve some docstrings in the replication code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4949&quot;&gt;#4949&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Split synapse.replication.tcp.streams into smaller files. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4953&quot;&gt;#4953&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor replication row generation&#x2F;parsing. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4954&quot;&gt;#4954&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Run &lt;code&gt;black&lt;&#x2F;code&gt; to clean up formatting on &lt;code&gt;synapse&#x2F;storage&#x2F;roommember.py&lt;&#x2F;code&gt; and &lt;code&gt;synapse&#x2F;storage&#x2F;events.py&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4959&quot;&gt;#4959&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove log line for password via the admin API. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4965&quot;&gt;#4965&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix typo in TLS filenames in docker&#x2F;README.md. Also add the &#x27;-p&#x27; commandline option to the &#x27;docker run&#x27; example. Contributed by Jurrie Overgoor. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4968&quot;&gt;#4968&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor room version definitions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4969&quot;&gt;#4969&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Reduce log level of .well-known&#x2F;matrix&#x2F;client responses. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4972&quot;&gt;#4972&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add &lt;code&gt;config.signing_key_path&lt;&#x2F;code&gt; that can be read by &lt;code&gt;synapse.config&lt;&#x2F;code&gt; utility. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4974&quot;&gt;#4974&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Track which identity server is used when binding a threepid and use that for unbinding, as per MSC1915. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4982&quot;&gt;#4982&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Rewrite KeyringTestCase as a HomeserverTestCase. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4985&quot;&gt;#4985&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;README updates: Corrected the default POSTGRES_USER. Added port forwarding hint in TLS section. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4987&quot;&gt;#4987&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove a number of unused tables from the database schema. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4992&quot;&gt;#4992&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5028&quot;&gt;#5028&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5033&quot;&gt;#5033&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Run &lt;code&gt;black&lt;&#x2F;code&gt; on the remainder of &lt;code&gt;synapse&#x2F;storage&#x2F;&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4996&quot;&gt;#4996&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix grammar in get_current_users_in_room and give it a docstring. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4998&quot;&gt;#4998&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Clean up some code in the server-key Keyring. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5001&quot;&gt;#5001&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Convert SYNAPSE_NO_TLS Docker variable to boolean for user friendliness. Contributed by Gabriel Eckerson. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5005&quot;&gt;#5005&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Refactor synapse.storage._base._simple_select_list_paginate. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5007&quot;&gt;#5007&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Store the notary server name correctly in server_keys_json. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5024&quot;&gt;#5024&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Rewrite Datastore.get_server_verify_keys to reduce the number of database transactions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5030&quot;&gt;#5030&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove extraneous period from copyright headers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5046&quot;&gt;#5046&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Update documentation for where to get Synapse packages. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5067&quot;&gt;#5067&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Add workarounds for pep-517 install errors. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5098&quot;&gt;#5098&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Improve logging when event-signature checks fail. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5100&quot;&gt;#5100&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Factor out an &amp;quot;assert_requester_is_admin&amp;quot; function. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5120&quot;&gt;#5120&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Remove the requirement to authenticate for &#x2F;admin&#x2F;server_version. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5122&quot;&gt;#5122&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Prevent an exception from being raised in a IResolutionReceiver and use a more generic error message for blacklisted URL previews. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5155&quot;&gt;#5155&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Run &lt;code&gt;black&lt;&#x2F;code&gt; on the tests directory. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5170&quot;&gt;#5170&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;li&gt;Fix CI after new release of isort. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;5179&quot;&gt;#5179&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.99.3 released!</title>
		<published>2019-04-01T00:00:00+00:00</published>
		<updated>2019-04-01T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/04/01/synapse-0-99-3-released/" type="text/html"/>
		<id>/blog/2019/04/01/synapse-0-99-3-released/</id>
		<content type="html">&lt;p&gt;Hey hey, a Synapse release for you today.&lt;&#x2F;p&gt;
&lt;p&gt;The big news in 0.99.3 is that the user directory has been completely re-written and should now be much more performant - this will benefit all installations, but especially those housing larger servers.&lt;&#x2F;p&gt;
&lt;p&gt;Aside from that we continue our 1.0 preparations and relatedly we&#x27;ve improved our docs, in particular to explain how .well-known works. On the perf side we&#x27;ve added rate limiting to login and register endpoints as well as now batching up read receipts to send over federation.&lt;&#x2F;p&gt;
&lt;p&gt;I&#x27;ve said it before, and I&#x27;ll say it again:-&lt;&#x2F;p&gt;
&lt;blockquote&gt;The most important thing that admins should know is that prior to 1.0 landing later this month, &lt;strong&gt;it is essential that the federation API has a valid TLS certificate - self signed certificates will no longer be accepted.&lt;&#x2F;strong&gt; For more details see our &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;MSC1711_certificates_FAQ.md&quot;&gt;handy guide&lt;&#x2F;a&gt;. Failure to do this will result in being unable to federate with other 1.0 servers.&lt;&#x2F;blockquote&gt;
As ever, you can get the new update¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.99.3&quot;&gt;here&lt;&#x2F;a&gt;¬†or any of the sources mentioned at¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up¬†&lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our new¬†&lt;a href=&quot;&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page.&lt;&#x2F;a&gt;
&lt;h2&gt;Synapse 0.99.3 changelog&lt;&#x2F;h2&gt;
&lt;h4&gt;&lt;a id=&quot;user-content-features&quot; class=&quot;anchor&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;CHANGES.md#features&quot; aria-hidden=&quot;true&quot;&gt;&lt;&#x2F;a&gt;Features&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;The user directory has been rewritten to make it faster, with less chance of falling behind on a large server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4537&quot;&gt;#4537&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4846&quot;&gt;#4846&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4864&quot;&gt;#4864&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4887&quot;&gt;#4887&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4900&quot;&gt;#4900&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4944&quot;&gt;#4944&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add configurable rate limiting to the &#x2F;register endpoint. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4735&quot;&gt;#4735&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4804&quot;&gt;#4804&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Move server key queries to federation reader. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4757&quot;&gt;#4757&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add support for &#x2F;account&#x2F;3pid REST endpoint to client_reader worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4759&quot;&gt;#4759&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add an endpoint to the admin API for querying the server version. Contributed by Joseph Weston. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4772&quot;&gt;#4772&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Include a default configuration file in the &#x27;docs&#x27; directory. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4791&quot;&gt;#4791&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4801&quot;&gt;#4801&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse is now permissive about trailing slashes on some of its federation endpoints, allowing zero or more to be present. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4793&quot;&gt;#4793&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add support for &#x2F;keys&#x2F;query and &#x2F;keys&#x2F;changes REST endpoints to client_reader worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4796&quot;&gt;#4796&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add checks to incoming events over federation for events evading auth (aka &quot;soft fail&quot;). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4814&quot;&gt;#4814&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add configurable rate limiting to the &#x2F;login endpoint. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4821&quot;&gt;#4821&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4865&quot;&gt;#4865&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove trailing slashes from certain outbound federation requests. Retry if receiving a 404. Context: #3622. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4840&quot;&gt;#4840&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Allow passing --daemonize flags to workers in the same way as with master. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4853&quot;&gt;#4853&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Batch up outgoing read-receipts to reduce federation traffic. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4890&quot;&gt;#4890&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4927&quot;&gt;#4927&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add option to disable searching the user directory. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4895&quot;&gt;#4895&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add option to disable searching of local and remote public room lists. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4896&quot;&gt;#4896&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add ability for password providers to login&#x2F;register a user via 3PID (email, phone). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4931&quot;&gt;#4931&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;&lt;a id=&quot;user-content-bugfixes&quot; class=&quot;anchor&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;CHANGES.md#bugfixes&quot; aria-hidden=&quot;true&quot;&gt;&lt;&#x2F;a&gt;Bugfixes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix a bug where media with spaces in the name would get a corrupted name. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2090&quot;&gt;#2090&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix attempting to paginate in rooms where server cannot see any events, to avoid unnecessarily pulling in lots of redacted events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4699&quot;&gt;#4699&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;&#x27;event_id&#x27; is now a required parameter in federated state requests, as per the matrix spec. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4740&quot;&gt;#4740&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix tightloop over connecting to replication server. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4749&quot;&gt;#4749&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix parsing of Content-Disposition headers on remote media requests and URL previews. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4763&quot;&gt;#4763&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix incorrect log about not persisting duplicate state event. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4776&quot;&gt;#4776&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix v4v6 option in HAProxy example config. Contributed by Flakebi. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4790&quot;&gt;#4790&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Handle batch updates in worker replication protocol. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4792&quot;&gt;#4792&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug where we didn&#x27;t correctly throttle sending of USER_IP commands over replication. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4818&quot;&gt;#4818&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix potential race in handling missing updates in device list updates. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4829&quot;&gt;#4829&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug where synapse expected an un-specced¬†&lt;code&gt;prev_state&lt;&#x2F;code&gt;¬†field on state events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4837&quot;&gt;#4837&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Transfer a user&#x27;s notification settings (push rules) on room upgrade. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4838&quot;&gt;#4838&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;fix test_auto_create_auto_join_where_no_consent. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4886&quot;&gt;#4886&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix a bug where hs_disabled_message was sometimes not correctly enforced. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4888&quot;&gt;#4888&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug in shutdown room admin API where it would fail if a user in the room hadn&#x27;t consented to the privacy policy. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4904&quot;&gt;#4904&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug where blocked world-readable rooms were still peekable. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4908&quot;&gt;#4908&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;&lt;a id=&quot;user-content-internal-changes&quot; class=&quot;anchor&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;CHANGES.md#internal-changes&quot; aria-hidden=&quot;true&quot;&gt;&lt;&#x2F;a&gt;Internal Changes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Add a systemd setup that supports synapse workers. Contributed by Luca Corbatto. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4662&quot;&gt;#4662&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Change from TravisCI to Buildkite for CI. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4752&quot;&gt;#4752&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;When presence is disabled don&#x27;t send over replication. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4757&quot;&gt;#4757&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Minor docstring fixes for MatrixFederationAgent. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4765&quot;&gt;#4765&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Optimise EDU transmission for the federation_sender worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4770&quot;&gt;#4770&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update test_typing to use HomeserverTestCase. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4771&quot;&gt;#4771&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update URLs for riot.im icons and logos in the default notification templates. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4779&quot;&gt;#4779&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Removed unnecessary $ from some federation endpoint path regexes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4794&quot;&gt;#4794&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove link to deleted title in README. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4795&quot;&gt;#4795&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clean up read-receipt handling. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4797&quot;&gt;#4797&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add some debug about processing read receipts. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4798&quot;&gt;#4798&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clean up some replication code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4799&quot;&gt;#4799&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add some docstrings. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4815&quot;&gt;#4815&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add debug logger to try and track down #4422. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4816&quot;&gt;#4816&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make shutdown API send explanation message to room after users have been forced joined. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4817&quot;&gt;#4817&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update example_log_config.yaml. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4820&quot;&gt;#4820&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Document the¬†&lt;code&gt;generate&lt;&#x2F;code&gt;¬†option for the docker image. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4824&quot;&gt;#4824&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix check-newsfragment for debian-only changes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4825&quot;&gt;#4825&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add some debug logging for device list updates to help with #4828. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4828&quot;&gt;#4828&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve federation documentation, specifically .well-known support. Many thanks to @vaab. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4832&quot;&gt;#4832&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Disable captcha registration by default in unit tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4839&quot;&gt;#4839&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add stuff back to the .gitignore. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4843&quot;&gt;#4843&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clarify what registration_shared_secret allows for. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4844&quot;&gt;#4844&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Correctly log expected errors when fetching server keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4847&quot;&gt;#4847&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update install docs to explicitly state a full-chain (not just the top-level) TLS certificate must be provided to Synapse. This caused some people&#x27;s Synapse ports to appear correct in a browser but still (rightfully so) upset the federation tester. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4849&quot;&gt;#4849&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Move client read-receipt processing to federation sender worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4852&quot;&gt;#4852&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor federation TransactionQueue. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4855&quot;&gt;#4855&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Comment out most options in the generated config. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4863&quot;&gt;#4863&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix yaml library warnings by using safe_load. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4869&quot;&gt;#4869&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update Apache setup to remove location syntax. Thanks to @cwmke! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4870&quot;&gt;#4870&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reinstate test case that runs unit tests against oldest supported dependencies. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4879&quot;&gt;#4879&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update link to federation docs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4881&quot;&gt;#4881&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;fix test_auto_create_auto_join_where_no_consent. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4886&quot;&gt;#4886&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use a regular HomeServerConfig object for unit tests rater than a Mock. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4889&quot;&gt;#4889&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add some notes about tuning postgres for larger deployments. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4895&quot;&gt;#4895&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a config option for torture-testing worker replication. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4902&quot;&gt;#4902&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Log requests which are simulated by the unit tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4905&quot;&gt;#4905&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Allow newsfragments to end with exclamation marks. Exciting! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4912&quot;&gt;#4912&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor some more tests to use HomeserverTestCase. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4913&quot;&gt;#4913&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor out the state deltas portion of the user directory store and handler. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4917&quot;&gt;#4917&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix nginx example in ACME doc. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4923&quot;&gt;#4923&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use an explicit dbname for postgres connections in the tests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4928&quot;&gt;#4928&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix¬†&lt;code&gt;ClientReplicationStreamProtocol.__str__()&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4929&quot;&gt;#4929&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.99.2 released!</title>
		<published>2019-03-04T00:00:00+00:00</published>
		<updated>2019-03-04T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/03/04/synapse-0-99-2-released/" type="text/html"/>
		<id>/blog/2019/03/04/synapse-0-99-2-released/</id>
		<content type="html">&lt;p&gt;Well now, what have we here? Synapse 0.99.2 is the latest in the 0.99.x series as we step ever closer to 1.0.&lt;&#x2F;p&gt;
&lt;p&gt;0.99.2 is an incremental release including a bunch of performance improvements, enhancements to room upgrades and generally a plethora of bug fixes.&lt;&#x2F;p&gt;
&lt;p&gt;The most important thing that admins should know is that prior to 1.0 landing later this month, &lt;strong&gt;it is essential that the federation API has a valid TLS certificate - self signed certificates will no longer be accepted.&lt;&#x2F;strong&gt; For more details see our &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;MSC1711_certificates_FAQ.md&quot;&gt;handy guide&lt;&#x2F;a&gt;. Failure to do this will result in being unable to federate with other 1.0 servers.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.99.2&quot;&gt;here&lt;&#x2F;a&gt;¬†or any of the sources mentioned at¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up¬†&lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our new¬†&lt;a href=&quot;&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page.&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;¬†&lt;&#x2F;p&gt;
&lt;h2&gt;Synapse 0.99.2 changelog&lt;&#x2F;h2&gt;
&lt;h3&gt;Features&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Added an HAProxy example in the reverse proxy documentation. Contributed by Beno√Æt S. (‚ÄúBenpro‚Äù). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4541&quot; data-hovercard-type=&quot;issue&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4541&#x2F;hovercard&quot;&gt;#4541&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add basic optional sentry integration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4632&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4632&#x2F;hovercard&quot;&gt;#4632&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4694&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4694&#x2F;hovercard&quot;&gt;#4694&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Transfer bans on room upgrade. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4642&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4642&#x2F;hovercard&quot;&gt;#4642&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add configurable room list publishing rules. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4647&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4647&#x2F;hovercard&quot;&gt;#4647&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Support .well-known delegation when issuing certificates through ACME. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4652&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4652&#x2F;hovercard&quot;&gt;#4652&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Allow registration and login to be handled by a worker instance. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4666&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4666&#x2F;hovercard&quot;&gt;#4666&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4670&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4670&#x2F;hovercard&quot;&gt;#4670&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4682&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4682&#x2F;hovercard&quot;&gt;#4682&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reduce the overhead of creating outbound federation connections over TLS by caching the TLS client options. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4674&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4674&#x2F;hovercard&quot;&gt;#4674&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add prometheus metrics for number of outgoing EDUs, by type. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4695&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4695&#x2F;hovercard&quot;&gt;#4695&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Return correct error code when inviting a remote user to a room whose homeserver does not support the room version. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4721&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4721&#x2F;hovercard&quot;&gt;#4721&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Prevent showing rooms to other servers that were set to not federate. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4746&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4746&#x2F;hovercard&quot;&gt;#4746&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3&gt;Bugfixes&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix possible exception when paginating. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4263&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4263&#x2F;hovercard&quot;&gt;#4263&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The dependency checker now correctly reports a version mismatch for optional
dependencies, instead of reporting the dependency missing. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4450&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4450&#x2F;hovercard&quot;&gt;#4450&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Set CORS headers on .well-known requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4651&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4651&#x2F;hovercard&quot;&gt;#4651&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix kicking guest users on guest access revocation in worker mode. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4667&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4667&#x2F;hovercard&quot;&gt;#4667&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix an issue in the database migration script where the
&lt;code&gt;e2e_room_keys.is_verified&lt;&#x2F;code&gt;¬†column wasn&#x27;t considered as
a boolean. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4680&quot; data-hovercard-type=&quot;issue&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4680&#x2F;hovercard&quot;&gt;#4680&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix TaskStopped exceptions in logs when outbound requests time out. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4690&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4690&#x2F;hovercard&quot;&gt;#4690&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix ACME config for python 2. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4717&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4717&#x2F;hovercard&quot;&gt;#4717&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix paginating over federation persisting incorrect state. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4718&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4718&#x2F;hovercard&quot;&gt;#4718&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3&gt;Internal Changes&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Run¬†&lt;code&gt;black&lt;&#x2F;code&gt;¬†to reformat user directory code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4635&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4635&#x2F;hovercard&quot;&gt;#4635&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reduce number of exceptions we log. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4643&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4643&#x2F;hovercard&quot;&gt;#4643&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4668&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4668&#x2F;hovercard&quot;&gt;#4668&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Introduce upsert batching functionality in the database layer. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4644&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4644&#x2F;hovercard&quot;&gt;#4644&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix various spelling mistakes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4657&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4657&#x2F;hovercard&quot;&gt;#4657&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Cleanup request exception logging. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4669&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4669&#x2F;hovercard&quot;&gt;#4669&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4737&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4737&#x2F;hovercard&quot;&gt;#4737&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4738&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4738&#x2F;hovercard&quot;&gt;#4738&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve replication performance by reducing cache invalidation traffic. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4671&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4671&#x2F;hovercard&quot;&gt;#4671&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4715&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4715&#x2F;hovercard&quot;&gt;#4715&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4748&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4748&#x2F;hovercard&quot;&gt;#4748&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Test against Postgres 9.5 as well as 9.4. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4676&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4676&#x2F;hovercard&quot;&gt;#4676&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Run unit tests against python 3.7. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4677&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4677&#x2F;hovercard&quot;&gt;#4677&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Attempt to clarify installation instructions&#x2F;config. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4681&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4681&#x2F;hovercard&quot;&gt;#4681&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clean up gitignores. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4688&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4688&#x2F;hovercard&quot;&gt;#4688&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Minor tweaks to acme docs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4689&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4689&#x2F;hovercard&quot;&gt;#4689&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve the logging in the pusher process. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4691&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4691&#x2F;hovercard&quot;&gt;#4691&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Better checks on newsfragments. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4698&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4698&#x2F;hovercard&quot;&gt;#4698&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4750&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4750&#x2F;hovercard&quot;&gt;#4750&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Avoid some redundant work when processing read receipts. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4706&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4706&#x2F;hovercard&quot;&gt;#4706&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Run¬†&lt;code&gt;push_receipts_to_remotes&lt;&#x2F;code&gt;¬†as background job. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4707&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4707&#x2F;hovercard&quot;&gt;#4707&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add prometheus metrics for number of badge update pushes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4709&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4709&#x2F;hovercard&quot;&gt;#4709&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reduce pusher logging on startup (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4716&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4716&#x2F;hovercard&quot;&gt;#4716&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Don&#x27;t log exceptions when failing to fetch remote server keys. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4722&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4722&#x2F;hovercard&quot;&gt;#4722&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Correctly proxy exception in frontend_proxy worker. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4723&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4723&#x2F;hovercard&quot;&gt;#4723&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add database version to phonehome stats. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4753&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4753&#x2F;hovercard&quot;&gt;#4753&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.99.1.1 Released!</title>
		<published>2019-02-14T00:00:00+00:00</published>
		<updated>2019-02-14T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/02/14/synapse-0-99-1-1-released/" type="text/html"/>
		<id>/blog/2019/02/14/synapse-0-99-1-1-released/</id>
		<content type="html">&lt;p&gt;Hey, everyone, today is the day we release Synapse 0.99.1.1&lt;&#x2F;p&gt;
&lt;p&gt;This release contains improved ACME support to make it even easier to get going with TLS certs on your federation end points, plus some tweaks to make the room version upgrade path easier.&lt;&#x2F;p&gt;
&lt;p&gt;Just as a reminder that the 0.99.x series is precursor for our 1.0 release (which will land in early March, exact date to be confirmed) - it is really important that all server admins are aware that self signed certificates on the Server to Server API will no longer be accepted by &amp;gt;= Synapse 1.0. If you have not already done so, now is the time to configure your certificate. For more info see our &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;MSC1711_certificates_FAQ.md&quot;&gt;FAQ&lt;&#x2F;a&gt;¬†and if you get stuck come and join us in &lt;a href=&quot;https:&#x2F;&#x2F;matrix.to&#x2F;#&#x2F;#synapse:matrix.org&quot;&gt;#Synapse.&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.99.1.1&quot;&gt;here&lt;&#x2F;a&gt;¬†or any of the sources mentioned at¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up¬†&lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our new¬†&lt;a href=&quot;&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page.&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h2&gt;Synapse 0.99.1.1 Changelog&lt;&#x2F;h2&gt;
&lt;div class=&quot;release-header&quot;&gt;
&lt;div class=&quot;d-flex flex-items-start&quot;&gt;&lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;markdown-body&quot;&gt;
&lt;h3&gt;Bugfixes&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix &quot;TypeError: &#x27;&amp;gt;&#x27; not supported&quot; when starting without an existing certificate.
Fix a bug where an existing certificate would be reprovisoned every day. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4648&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4648&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4648&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;div&gt;
&lt;h2&gt;Synapse 0.99.1 Changelog&lt;&#x2F;h2&gt;
&lt;h3&gt;Features&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Include m.room.encryption on invites by default (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3902&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3902&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3902&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Federation OpenID listener resource can now be activated even if federation is disabled (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4420&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4420&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4420&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse&#x27;s ACME support will now correctly reprovision a certificate that approaches its expiry while Synapse is running. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4522&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4522&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4522&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add ability to update backup versions (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4580&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4580&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4580&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Allow the &quot;unavailable&quot; presence status for &#x2F;sync.
This change makes Synapse compliant with r0.4.0 of the Client-Server specification. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4592&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4592&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4592&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;There is no longer any need to specify¬†&lt;code&gt;no_tls&lt;&#x2F;code&gt;: it is inferred from the absence of TLS listeners (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4613&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4613&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4613&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4615&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4615&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4615&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4617&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4617&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4617&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4636&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4636&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4636&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The default configuration no longer requires TLS certificates. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4614&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4614&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4614&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3&gt;Bugfixes&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Copy over room federation ability on room upgrade. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4530&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4530&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4530&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix noisy &quot;twisted.internet.task.TaskStopped&quot; errors in logs (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4546&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4546&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4546&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse is now tolerant of the¬†&lt;code&gt;tls_fingerprints&lt;&#x2F;code&gt;¬†option being None or not specified. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4589&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4589&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4589&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix &#x27;no unique or exclusion constraint&#x27; error (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4591&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4591&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4591&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Transfer Server ACLs on room upgrade. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4608&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4608&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4608&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix failure to start when not TLS certificate was given even if TLS was disabled. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4618&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4618&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4618&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix self-signed cert notice from generate-config. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4625&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4625&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4625&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix performance of¬†&lt;code&gt;user_ips&lt;&#x2F;code&gt;¬†table deduplication background update (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4626&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4626&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4626&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4627&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4627&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4627&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3&gt;Internal Changes&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Change the user directory state query to use a filtered call to the db instead of a generic one. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4462&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4462&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4462&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reject federation transactions if they include more than 50 PDUs or 100 EDUs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4513&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4513&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4513&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reduce duplication of¬†&lt;code&gt;synapse.app&lt;&#x2F;code&gt;¬†code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4567&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4567&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4567&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix docker upload job to push -py2 images. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4576&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4576&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4576&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add port configuration information to ACME instructions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4578&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4578&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4578&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update MSC1711 FAQ to clarify .well-known usage (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4584&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4584&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4584&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clean up default listener configuration (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4586&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4586&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4586&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clarifications for reverse proxy docs (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4607&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4607&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4607&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Move ClientTLSOptionsFactory init out of¬†&lt;code&gt;refresh_certificates&lt;&#x2F;code&gt;¬†(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4611&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4611&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4611&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fail cleanly if listener config lacks a &#x27;port&#x27; (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4616&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4616&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4616&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove redundant entries from docker config (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4619&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4619&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4619&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;README updates (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4621&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4621&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4621&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.99.0</title>
		<published>2019-02-05T00:00:00+00:00</published>
		<updated>2019-02-05T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/02/05/synapse-0-99-0/" type="text/html"/>
		<id>/blog/2019/02/05/synapse-0-99-0/</id>
		<content type="html">&lt;p&gt;Hey hey, Synapse 0.99.0 is here!&lt;&#x2F;p&gt;
&lt;p&gt;You may have heard that we recently published the first stable release of the &lt;a href=&quot;&#x2F;docs&#x2F;spec&#x2F;server_server&#x2F;r0.1.0.html&quot;&gt;Server to Server Spec (r0.1)&lt;&#x2F;a&gt;. The spec makes some changes which are not compatible with the protocol of the past - particularly,¬†&lt;strong&gt;self-signed certificates are no longer valid for homeservers.¬†&lt;&#x2F;strong&gt;Synapse 1.0.0 will be compliant with r0.1 and the goal of Synapse 0.99.0 is to act as a stepping stone to Synapse 1.0. Synapse 0.99.0 supports the r0.1 release of the server to server specification, but is compatible with both the legacy Matrix federation behaviour (pre-r0.1) as well as post-r0.1 behaviour, in order to allow for a smooth upgrade across the federation.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;strong&gt;It is critical that all admins upgrade to 0.99.0 and configure a valid TLS certificate. &lt;&#x2F;strong&gt;Admins will have 1 month to do so, after which 1.0.0 will be released and those servers without a valid certificate will no longer be able to federate with &amp;gt;= 1.0.0 servers.&lt;&#x2F;p&gt;
&lt;p&gt;First of all, please don&#x27;t panic :) We have taken steps to make this process as simple as possible - specifically implementing ACME support to allow servers to automatically generate free Let&#x27;s Encrypt certificates if you choose to. What&#x27;s more, it is not necessary to add the certificate right away, you have at least a month to get set up.&lt;&#x2F;p&gt;
&lt;p&gt;For more details on exactly what you need to do (and also why this change is essential), we have provided an &lt;strong&gt;extensive &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;MSC1711_certificates_FAQ.md&quot;&gt;FAQ&lt;&#x2F;a&gt;&lt;&#x2F;strong&gt;¬†as well as the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v0.99.0&#x2F;UPGRADE.rst&quot;&gt;Upgrade notes for Synapse&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.99.0&quot;&gt;here&lt;&#x2F;a&gt;¬†or any of the sources mentioned at¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up¬†&lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our new¬†&lt;a href=&quot;&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page.&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;This was a huge effort! Congratulations to all involved, especially those of you in the community who contributed to spec MSCs and tested our release candidates. Thank you for bearing with us as we move the whole public Matrix Federation onto r0.1 compliant servers.&lt;&#x2F;p&gt;
&lt;p&gt;Onwards!&lt;&#x2F;p&gt;
&lt;h2&gt;Changelog&lt;&#x2F;h2&gt;
Synapse v0.99.x is a precursor to the upcoming Synapse v1.0 release. It contains foundational changes to room architecture and the federation security model necessary to support the upcoming r0 release of the Server to Server API.
&lt;h2&gt;&lt;a id=&quot;user-content-features&quot; class=&quot;anchor&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v0.99.0&#x2F;CHANGES.md#features&quot; aria-hidden=&quot;true&quot;&gt;&lt;&#x2F;a&gt;Features&lt;&#x2F;h2&gt;
&lt;ul&gt;
 	&lt;li&gt;Synapse&#x27;s cipher string has been updated to require ECDH key exchange. Configuring and generating dh_params is no longer required, and they will be ignored. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4229&quot;&gt;#4229&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse can now automatically provision TLS certificates via ACME (the protocol used by CAs like Let&#x27;s Encrypt). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4384&quot;&gt;#4384&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4492&quot;&gt;#4492&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4525&quot;&gt;#4525&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4572&quot;&gt;#4572&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4564&quot;&gt;#4564&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4566&quot;&gt;#4566&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4547&quot;&gt;#4547&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4557&quot;&gt;#4557&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Implement MSC1708 (.well-known routing for server-server federation) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4408&quot;&gt;#4408&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4409&quot;&gt;#4409&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4426&quot;&gt;#4426&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4427&quot;&gt;#4427&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4428&quot;&gt;#4428&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4464&quot;&gt;#4464&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4468&quot;&gt;#4468&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4487&quot;&gt;#4487&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4488&quot;&gt;#4488&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4489&quot;&gt;#4489&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4497&quot;&gt;#4497&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4511&quot;&gt;#4511&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4516&quot;&gt;#4516&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4520&quot;&gt;#4520&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4521&quot;&gt;#4521&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4539&quot;&gt;#4539&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4542&quot;&gt;#4542&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4544&quot;&gt;#4544&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Search now includes results from predecessor rooms after a room upgrade. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4415&quot;&gt;#4415&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Config option to disable requesting MSISDN on registration. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4423&quot;&gt;#4423&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a metric for tracking event stream position of the user directory. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4445&quot;&gt;#4445&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Support exposing server capabilities in CS API (MSC1753, MSC1804) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4472&quot;&gt;#4472&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;commit&#x2F;81b7e7eed323f55d6550e7a270a9dc2c4c7b0fe0&quot;&gt;81b7e7eed&lt;&#x2F;a&gt;))&lt;&#x2F;li&gt;
 	&lt;li&gt;Add support for room version 3 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4483&quot;&gt;#4483&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4499&quot;&gt;#4499&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4515&quot;&gt;#4515&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4523&quot;&gt;#4523&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4535&quot;&gt;#4535&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse will now reload TLS certificates from disk upon SIGHUP. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4495&quot;&gt;#4495&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4524&quot;&gt;#4524&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The matrixdotorg&#x2F;synapse Docker images now use Python 3 by default. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4558&quot;&gt;#4558&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2&gt;&lt;a id=&quot;user-content-bugfixes&quot; class=&quot;anchor&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v0.99.0&#x2F;CHANGES.md#bugfixes&quot; aria-hidden=&quot;true&quot;&gt;&lt;&#x2F;a&gt;Bugfixes&lt;&#x2F;h2&gt;
&lt;ul&gt;
 	&lt;li&gt;Prevent users with access tokens predating the introduction of device IDs from creating spurious entries in the user_ips table. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4369&quot;&gt;#4369&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix typo in ALL_USER_TYPES definition to ensure type is a tuple (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4392&quot;&gt;#4392&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix high CPU usage due to remote devicelist updates (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4397&quot;&gt;#4397&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix potential bug where creating or joining a room could fail (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4404&quot;&gt;#4404&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug when rejecting remote invites (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4405&quot;&gt;#4405&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4527&quot;&gt;#4527&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix incorrect logcontexts after a Deferred was cancelled (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4407&quot;&gt;#4407&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Ensure encrypted room state is persisted across room upgrades. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4411&quot;&gt;#4411&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Copy over whether a room is a direct message and any associated room tags on room upgrade. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4412&quot;&gt;#4412&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix None guard in calling config.server.is_threepid_reserved (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4435&quot;&gt;#4435&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Don&#x27;t send IP addresses as SNI (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4452&quot;&gt;#4452&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix UnboundLocalError in post_urlencoded_get_json (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4460&quot;&gt;#4460&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a timeout to filtered room directory queries. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4461&quot;&gt;#4461&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Workaround for login error when using both LDAP and internal authentication. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4486&quot;&gt;#4486&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix a bug where setting a relative consent directory path would cause a crash. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4512&quot;&gt;#4512&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2&gt;&lt;a id=&quot;user-content-deprecations-and-removals&quot; class=&quot;anchor&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v0.99.0&#x2F;CHANGES.md#deprecations-and-removals&quot; aria-hidden=&quot;true&quot;&gt;&lt;&#x2F;a&gt;Deprecations and Removals&lt;&#x2F;h2&gt;
&lt;ul&gt;
 	&lt;li&gt;Synapse no longer generates self-signed TLS certificates when generating a configuration file. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4509&quot;&gt;#4509&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2&gt;&lt;a id=&quot;user-content-improved-documentation&quot; class=&quot;anchor&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v0.99.0&#x2F;CHANGES.md#improved-documentation&quot; aria-hidden=&quot;true&quot;&gt;&lt;&#x2F;a&gt;Improved Documentation&lt;&#x2F;h2&gt;
&lt;ul&gt;
 	&lt;li&gt;Update debian installation instructions (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4526&quot;&gt;#4526&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2&gt;&lt;a id=&quot;user-content-internal-changes&quot; class=&quot;anchor&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v0.99.0&#x2F;CHANGES.md#internal-changes&quot; aria-hidden=&quot;true&quot;&gt;&lt;&#x2F;a&gt;Internal Changes&lt;&#x2F;h2&gt;
&lt;ul&gt;
 	&lt;li&gt;Synapse will now take advantage of native UPSERT functionality in PostgreSQL 9.5+ and SQLite 3.24+. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4306&quot;&gt;#4306&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4459&quot;&gt;#4459&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4466&quot;&gt;#4466&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4471&quot;&gt;#4471&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4477&quot;&gt;#4477&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4505&quot;&gt;#4505&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update README to use the new virtualenv everywhere (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4342&quot;&gt;#4342&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add better logging for unexpected errors while sending transactions (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4368&quot;&gt;#4368&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Apply a unique index to the user_ips table, preventing duplicates. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4370&quot;&gt;#4370&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4432&quot;&gt;#4432&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4434&quot;&gt;#4434&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Silence travis-ci build warnings by removing non-functional python3.6 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4377&quot;&gt;#4377&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix a comment in the generated config file (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4387&quot;&gt;#4387&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add ground work for implementing future federation API versions (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4390&quot;&gt;#4390&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update dependencies on msgpack and pymacaroons to use the up-to-date packages. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4399&quot;&gt;#4399&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Tweak codecov settings to make them less loud. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4400&quot;&gt;#4400&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Implement server support for MSC1794 - Federation v2 Invite API (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4402&quot;&gt;#4402&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;debian package: symlink to explicit python version (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4433&quot;&gt;#4433&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add infrastructure to support different event formats (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4437&quot;&gt;#4437&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4447&quot;&gt;#4447&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4448&quot;&gt;#4448&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4470&quot;&gt;#4470&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4481&quot;&gt;#4481&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4482&quot;&gt;#4482&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4493&quot;&gt;#4493&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4494&quot;&gt;#4494&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4496&quot;&gt;#4496&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4510&quot;&gt;#4510&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4514&quot;&gt;#4514&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Generate the debian config during build (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4444&quot;&gt;#4444&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clarify documentation for the¬†&lt;code&gt;public_baseurl&lt;&#x2F;code&gt;¬†config param (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4458&quot;&gt;#4458&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4498&quot;&gt;#4498&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix quoting for allowed_local_3pids example config (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4476&quot;&gt;#4476&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove deprecated --process-dependency-links option from UPGRADE.rst (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4485&quot;&gt;#4485&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make it possible to set the log level for tests via an environment variable (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4506&quot;&gt;#4506&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reduce the log level of linearizer lock acquirement to DEBUG. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4507&quot;&gt;#4507&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix code to comply with linting in PyFlakes 3.7.1. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4519&quot;&gt;#4519&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add some debug for membership syncing issues (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4538&quot;&gt;#4538&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Docker: only copy what we need to the build image (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4562&quot;&gt;#4562&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1&gt;&lt;&#x2F;h1&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Critical Security Update: Synapse 0.34.0.1&#x2F;Synapse 0.34.1.1</title>
		<published>2019-01-10T00:00:00+00:00</published>
		<updated>2019-01-10T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2019/01/10/critical-security-update-synapse-0-34-0-1-synapse-0-34-1-1/" type="text/html"/>
		<id>/blog/2019/01/10/critical-security-update-synapse-0-34-0-1-synapse-0-34-1-1/</id>
		<content type="html">&lt;p&gt;After releasing Synapse v0.34.1, we have become aware of a security vulnerability affecting all previous versions (&lt;a href=&quot;http:&#x2F;&#x2F;cve.mitre.org&#x2F;cgi-bin&#x2F;cvename.cgi?name=CVE-2019-5885&quot;&gt;CVE-2019-5885&lt;&#x2F;a&gt;). v0.34.1 closed the vulnerability but, in some cases, caused users to be logged out of their clients, so we do not recommend v0.34.1 for production use.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;b&gt;Today we release two mitigating versions v0.34.0.1 and v0.34.1.1&lt;&#x2F;b&gt;. Both versions close the vulnerability and will not cause users to be logged out. &lt;b&gt;All installations should be upgraded to one or other immediately.&lt;&#x2F;b&gt;&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li style=&quot;font-weight: 400;&quot;&gt;Admins who would otherwise upgrade to v0.34.1 (or those that have already done so) should upgrade to v0.34.1.1. 
&lt;&#x2F;li&gt;
 	&lt;li style=&quot;font-weight: 400;&quot;&gt;Admins on v0.34.0, who do not wish to bring in new non-security related behaviour, should upgrade to v0.34.0.1.
&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;You can get the new updates for¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.34.0.1&quot;&gt;v0.34.0.1&lt;&#x2F;a&gt;¬†and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.34.1.1&quot;&gt;v0.34.1.1&lt;&#x2F;a&gt; here or any of the sources mentioned at¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up¬†&lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. See also our¬†&lt;a href=&quot;&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page.&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;We will publish more details of the vulnerability once admins have had a chance to upgrade. To our knowledge the vulnerability has not been exploited in the wild.&lt;&#x2F;p&gt;
&lt;p&gt;Many thanks for your patience, we are moving ever closer to Synapse reaching v1.0, and fixes like this one edge us ever closer.&lt;&#x2F;p&gt;
&lt;p&gt;Thanks also to the package maintainers who have coordinated with us to ensure distro packages are available for a speedy upgrade!&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.34.0.1&quot;&gt;Synapse v0.34.0.1 Changelog&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
 	&lt;li&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.34.1.1&quot;&gt;Synapse v0.34.1.1 Changelog&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.34.0 released!</title>
		<published>2018-12-20T00:00:00+00:00</published>
		<updated>2018-12-20T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2018/12/20/synapse-0-34-0-released/" type="text/html"/>
		<id>/blog/2018/12/20/synapse-0-34-0-released/</id>
		<content type="html">&lt;p&gt;Folks this is a big day for us at Matrix Towers, because today we release 0.34.0.&lt;&#x2F;p&gt;
&lt;p&gt;The big news for 0.34.0 is that we now &lt;strong&gt;recommend Python 3 for production use&lt;&#x2F;strong&gt; and have been running matrix.org under Python 3 for the past month.&lt;&#x2F;p&gt;
&lt;p&gt;Performance improvements have been marked, in some contexts we have seen 50% reductions in RAM and CPU usage. Here are some illustrative graphs to get you going but look out for a dedicated post delving into much more detail on the port. You can also see a Matrix Live interview with the project lead Amber (hawkowl)¬†&lt;a href=&quot;https:&#x2F;&#x2F;www.youtube.com&#x2F;watch?v=Ad3oqEo5leM&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;&#x2F;blog&#x2F;wp-content&#x2F;uploads&#x2F;2018&#x2F;12&#x2F;image2.png&quot;&gt;&lt;img class=&quot;alignnone wp-image-3822 size-large&quot; src=&quot;&#x2F;blog&#x2F;wp-content&#x2F;uploads&#x2F;2018&#x2F;12&#x2F;image2-1024x296.png&quot; alt=&quot;&quot; width=&quot;1024&quot; height=&quot;296&quot; &#x2F;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Matrix.org federation reader workers, the big drops signify roll over to python 3&lt;&#x2F;p&gt;
&lt;p&gt;&lt;a href=&quot;&#x2F;blog&#x2F;wp-content&#x2F;uploads&#x2F;2018&#x2F;12&#x2F;image1.png&quot;&gt;&lt;img class=&quot;alignnone size-large wp-image-3824&quot; src=&quot;&#x2F;blog&#x2F;wp-content&#x2F;uploads&#x2F;2018&#x2F;12&#x2F;image1-1024x237.png&quot; alt=&quot;&quot; width=&quot;1024&quot; height=&quot;237&quot; &#x2F;&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Synapse master on matrix.org, again the drop in RAM signifies the roll over to python 3&lt;&#x2F;p&gt;
&lt;p&gt;Many thanks to Amber for leading the effort, Rich and Erik for providing support as well as Notafile and Krombel from the community for pushing this effort right from the early days of the project.&lt;&#x2F;p&gt;
&lt;p&gt;If that wasn&#x27;t enough, 0.34.0 also all the usual bug fixes and perf improvements. In particular the media repository now no longer fails to decode UTF-8 filenames when downloading remote media and auto joining rooms now work on servers with consent requirements enabled.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.34.0&quot;&gt;here&lt;&#x2F;a&gt;¬†or any of the sources mentioned at¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up¬†&lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our new &lt;a href=&quot;&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page.&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;In particular, if you want to run Synapse 0.34.0 on Python 3 take a look at the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v0.34.0&#x2F;UPGRADE.rst#upgrading-to-v0340&quot;&gt;upgrade notes&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;¬†&lt;&#x2F;p&gt;
&lt;h3&gt;Synapse 0.34.0 changelog&lt;&#x2F;h3&gt;
Synapse 0.34.0 is the first release to fully support Python 3. Synapse will now run on Python versions 3.5 or 3.6 (as well as 2.7). Support for Python 3.7 remains experimental.
&lt;p&gt;We recommend upgrading to Python 3, but make sure to read the¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v0.34.0&#x2F;UPGRADE.rst#upgrading-to-v0340&quot;&gt;upgrade notes&lt;&#x2F;a&gt;¬†when doing so.&lt;&#x2F;p&gt;
&lt;h4&gt;Features&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Add &#x27;sandbox&#x27; to CSP for media reprository (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4284&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4284&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4284&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make the new landing page prettier. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4294&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4294&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4294&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix deleting E2E room keys when using old SQLite versions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4295&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4295&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4295&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a welcome page for the client API port. Credit to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;krombel&quot; data-hovercard-type=&quot;user&quot; data-hovercard-url=&quot;&#x2F;hovercards?user_id=11167142&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@krombel&lt;&#x2F;a&gt;! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4289&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4289&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4289&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove Matrix console from the default distribution (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4290&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4290&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4290&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add option to track MAU stats (but not limit people) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3830&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3830&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3830&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add an option to enable recording IPs for appservice users (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3831&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3831&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3831&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Rename login type¬†&lt;code&gt;m.login.cas&lt;&#x2F;code&gt;¬†to¬†&lt;code&gt;m.login.sso&lt;&#x2F;code&gt;¬†(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4220&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4220&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4220&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add an option to disable search for homeservers that may not be interested in it. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4230&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4230&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4230&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;Bugfixes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Pushrules can now again be made with non-ASCII rule IDs. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4165&quot; data-hovercard-type=&quot;issue&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4165&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4165&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The media repository now no longer fails to decode UTF-8 filenames when downloading remote media. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4176&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4176&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4176&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;URL previews now correctly decode non-UTF-8 text if the header contains a¬†&lt;code&gt;&amp;lt;meta http-equiv=&quot;Content-Type&quot;&lt;&#x2F;code&gt;¬†header. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4183&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4183&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4183&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix an issue where public consent URLs had two slashes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4192&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4192&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4192&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fallback auth now accepts the session parameter on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4197&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4197&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4197&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove riot.im from the list of trusted Identity Servers in the default configuration (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4207&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4207&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4207&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;fix start up failure when mau_limit_reserved_threepids set and db is postgres (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4211&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4211&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4211&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix auto join failures for servers that require user consent (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4223&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4223&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4223&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix exception caused by non-ascii event IDs (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4241&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4241&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4241&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Pushers can now be unsubscribed from on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4250&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4250&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4250&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix UnicodeDecodeError when postgres is configured to give non-English errors (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4253&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4253&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4253&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;Internal Changes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Debian packages utilising a virtualenv with bundled dependencies can now be built. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4212&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4212&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4212&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Disable pager when running git-show in CI (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4291&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4291&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4291&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;A coveragerc file has been added. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4180&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4180&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4180&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a GitHub pull request template and add multiple issue templates (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4182&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4182&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4182&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update README to reflect the fact that¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;1491&quot; data-hovercard-type=&quot;issue&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;1491&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#1491&lt;&#x2F;a&gt;¬†is fixed (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4188&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4188&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4188&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Run the AS senders as background processes to fix warnings (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4189&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4189&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4189&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add some diagnostics to the tests to detect logcontext problems (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4190&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4190&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4190&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add missing¬†&lt;code&gt;jpeg&lt;&#x2F;code&gt;¬†package prerequisite for OpenBSD in README. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4193&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4193&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4193&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a note saying you need to manually reclaim disk space after using the Purge History API (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4200&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4200&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4200&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;More logcontext checking in unittests (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4205&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4205&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4205&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Ignore¬†&lt;code&gt;__pycache__&lt;&#x2F;code&gt;¬†directories in the database schema folder (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4214&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4214&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4214&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add note to UPGRADE.rst about removing riot.im from list of trusted identity servers (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4224&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4224&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4224&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Added automated coverage reporting to CI. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4225&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4225&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4225&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Garbage-collect after each unit test to fix logcontext leaks (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4227&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4227&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4227&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;add more detail to logging regarding &quot;More than one row matched&quot; error (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4234&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4234&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4234&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Drop sent_transactions table (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4244&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4244&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4244&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a basic .editorconfig (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4257&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4257&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4257&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update README.rst and UPGRADE.rst for Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4260&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4260&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4260&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove obsolete¬†&lt;code&gt;verbose&lt;&#x2F;code&gt;¬†and¬†&lt;code&gt;log_file&lt;&#x2F;code&gt;¬†settings from¬†&lt;code&gt;homeserver.yaml&lt;&#x2F;code&gt;¬†for Docker image. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4261&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4261&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4261&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.33.9 is here!</title>
		<published>2018-11-20T00:00:00+00:00</published>
		<updated>2018-11-20T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2018/11/20/synapse-0-33-9-is-here/" type="text/html"/>
		<id>/blog/2018/11/20/synapse-0-33-9-is-here/</id>
		<content type="html">&lt;p&gt;Well here you are then, the 9th episode in the Synapse 0.33.x series.&lt;&#x2F;p&gt;
&lt;p&gt;Features wise, 0.33.9 contains a change to the way that GDPR consent works under the hood. It is now plumbed in to the login flow (rather than following immediately afterwards) such that it does not inadvertently break on-boarding. This is part of a broader set of changes that span Synapse and Riot to improve initial first impressions of using matrix.&lt;&#x2F;p&gt;
&lt;p&gt;Separately¬†we now have support for room version upgrades which is pre-requisite for rolling out the new state resolution algorithm, come and join us in¬†#teststateresv2:jki.re if you would like to help us test.&lt;&#x2F;p&gt;
&lt;p&gt;Finally we&#x27;ve spent a bunch of time further improving perf especially in and around reducing device ids federation traffic.&lt;&#x2F;p&gt;
&lt;p&gt;I know I say it every time, but full python 3 support is really really close now, matrix.org is now running entirely on py3 and seeing some amazing perf improvements - the remaining blocker is getting py3 deb packages ready and then we&#x27;ll ship an official python 3 release. There will also be a blog post to explain what we&#x27;ve been up to and what to expect perf wise.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.9&quot;&gt;here&lt;&#x2F;a&gt;¬†or any of the sources mentioned at¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up¬†&lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;. Also, check out our new &lt;a href=&quot;&#x2F;docs&#x2F;guides&#x2F;installing-synapse&quot;&gt;Synapse installation guide page.&lt;&#x2F;a&gt;
¬†&lt;&#x2F;p&gt;
&lt;h3&gt;Synapse 0.33.9 changelog&lt;&#x2F;h3&gt;
&lt;h4&gt;Features&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Include flags to optionally add¬†&lt;code&gt;m.login.terms&lt;&#x2F;code&gt;¬†to the registration flow when consent tracking is enabled. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4004&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4004&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4004&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4133&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4133&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4133&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4142&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4142&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4142&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4184&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4184&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4184&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Support for replacing rooms with new ones (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4091&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4091&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4091&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4099&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4099&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4099&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4100&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4100&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4100&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4101&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4101&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4101&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;Bugfixes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix exceptions when using the email mailer on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4095&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4095&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4095&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix e2e key backup with more than 9 backup versions (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4113&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4113&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4113&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Searches that request profile info now no longer fail with a 500. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4122&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4122&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4122&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;fix return code of empty key backups (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4123&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4123&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4123&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;If the typing stream ID goes backwards (as on a worker when the master restarts), the worker&#x27;s typing handler will no longer erroneously report rooms containing new typing events. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4127&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4127&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4127&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix table lock of device_lists_remote_cache which could freeze the application (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4132&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4132&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4132&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix exception when using state res v2 algorithm (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4135&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4135&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4135&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Generating the user consent URI no longer fails on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4140&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4140&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4140&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4163&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4163&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4163&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Loading URL previews from the DB cache on Postgres will no longer cause Unicode type errors when responding to the request, and URL previews will no longer fail if the remote server returns a Content-Type header with the chartype in quotes. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4157&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4157&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4157&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The hash_password script now works on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4161&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4161&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4161&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix noop checks when updating device keys, reducing spurious device list update notifications. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4164&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4164&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4164&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;Deprecations and Removals&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;The disused and un-specced identicon generator has been removed. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4106&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4106&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4106&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The obsolete and non-functional &#x2F;pull federation endpoint has been removed. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4118&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4118&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4118&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The deprecated v1 key exchange endpoints have been removed. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4119&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4119&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4119&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse will no longer fetch keys using the fallback deprecated v1 key exchange method and will now always use v2. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4120&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4120&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4120&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;Internal Changes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix build of Docker image with docker-compose (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3778&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3778&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3778&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Delete unreferenced state groups during history purge (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4006&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4006&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4006&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The &quot;Received rdata&quot; log messages on workers is now logged at DEBUG, not INFO. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4108&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4108&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4108&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reduce replication traffic for device lists (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4109&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4109&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4109&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix¬†&lt;code&gt;synapse_replication_tcp_protocol_*_commands&lt;&#x2F;code&gt;¬†metric label to be full command name, rather than just the first character (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4110&quot; data-hovercard-type=&quot;issue&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4110&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4110&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Log some bits about room creation (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4121&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4121&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4121&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix¬†&lt;code&gt;tox&lt;&#x2F;code&gt;¬†failure on old systems (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4124&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4124&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4124&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add STATE_V2_TEST room version (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4128&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4128&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4128&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clean up event accesses and tests (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4137&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4137&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4137&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The default logging config will now set an explicit log file encoding of UTF-8. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4138&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4138&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4138&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add helpers functions for getting prev and auth events of an event (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4139&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4139&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4139&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add some tests for the HTTP pusher. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4149&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4149&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4149&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;add purge_history.sh and purge_remote_media.sh scripts to contrib&#x2F; (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4155&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4155&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4155&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;HTTP tests have been refactored to contain less boilerplate. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4156&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4156&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4156&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Drop incoming events from federation for unknown rooms (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4165&quot; data-hovercard-type=&quot;issue&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4165&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4165&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse v0.33.8 is here!</title>
		<published>2018-11-01T00:00:00+00:00</published>
		<updated>2018-11-01T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2018/11/01/synapse-v0-33-8-is-here/" type="text/html"/>
		<id>/blog/2018/11/01/synapse-v0-33-8-is-here/</id>
		<content type="html">&lt;p&gt;Wowzers - our 8th dot release for v0.33!&lt;&#x2F;p&gt;
&lt;p&gt;This time we have a bunch of bug fixes and db performance improvements as well as better support for auto-join rooms and the ability for admins to limit who can create rooms aliases.&lt;&#x2F;p&gt;
&lt;p&gt;v0.33.8 also contains more python 3 fixes: we are running most of matrix.org on python 3 as of right now and seeing some pretty impressive performance improvements. Look out for Hawkowl&#x27;s write up coming soon.&lt;&#x2F;p&gt;
&lt;p&gt;For those interested in what we are working on right now, take a look at our &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;orgs&#x2F;matrix-org&#x2F;projects&#x2F;2&quot;&gt;task board&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.8&quot;&gt;here&lt;&#x2F;a&gt;¬†or any of the sources mentioned at¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up¬†&lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;¬†&lt;&#x2F;p&gt;
&lt;h3&gt;Synapse 0.33.8 changelog&lt;&#x2F;h3&gt;
&lt;h4&gt;Features&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Servers with auto-join rooms will now automatically create those rooms when the first user registers (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3975&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3975&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3975&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add config option to control alias creation (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4051&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4051&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4051&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The register_new_matrix_user script is now ported to Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4085&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4085&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4085&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Configure Docker image to listen on both ipv4 and ipv6. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4089&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4089&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4089&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;Bugfixes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix HTTP error response codes for federated group requests. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3969&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3969&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3969&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix issue where Python 3 users couldn&#x27;t paginate &#x2F;publicRooms (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4046&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4046&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4046&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix URL previewing to work in Python 3.7 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4050&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4050&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4050&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;synctl will use the right python executable to run worker processes (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4057&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4057&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4057&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Manhole now works again on Python 3, instead of failing with a &quot;couldn&#x27;t match all kex parts&quot; when connecting. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4060&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4060&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4060&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4067&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4067&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4067&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix some metrics being racy and causing exceptions when polled by Prometheus. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4061&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4061&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4061&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug which prevented email notifications from being sent unless an absolute path was given for¬†&lt;code&gt;email_templates&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4068&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4068&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4068&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Correctly account for cpu usage by background threads (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4074&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4074&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4074&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix race condition where config defined reserved users were not being added to
the monthly active user list prior to the homeserver reactor firing up (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4081&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4081&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4081&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug which prevented backslashes being used in event field filters (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4083&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4083&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4083&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;Internal Changes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Add information about the¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;spantaleev&#x2F;matrix-docker-ansible-deploy&quot;&gt;matrix-docker-ansible-deploy&lt;&#x2F;a&gt;¬†playbook (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3698&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3698&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3698&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add initial implementation of new state resolution algorithm (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3786&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3786&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3786&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reduce database load when fetching state groups (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4011&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4011&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4011&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Various cleanups in the federation client code (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4031&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4031&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4031&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Run the CircleCI builds in docker containers (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4041&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4041&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4041&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Only colourise synctl output when attached to tty (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4049&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4049&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4049&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor room alias creation code (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4063&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4063&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4063&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make the Python scripts in the top-level scripts folders meet pep8 and pass flake8. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4068&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4068&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4068&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The README now contains example for the Caddy web server. Contributed by steamp0rt. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4072&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4072&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4072&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add psutil as an explicit dependency (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4073&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4073&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4073&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clean up threading and logcontexts in pushers (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4075&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4075&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4075&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Correctly manage logcontexts during startup to fix some &quot;Unexpected logging context&quot; warnings (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4076&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4076&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4076&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Give some more things logcontexts (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4077&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4077&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4077&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clean up some bits of code which were flagged by the linter (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4082&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4082&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4082&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.33.7 released!</title>
		<published>2018-10-18T00:00:00+00:00</published>
		<updated>2018-10-18T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2018/10/18/synapse-0-33-7-released/" type="text/html"/>
		<id>/blog/2018/10/18/synapse-0-33-7-released/</id>
		<content type="html">&lt;p&gt;Hey ho, let&#x27;s go. Synapse 0.33.7 has arrived.&lt;&#x2F;p&gt;
&lt;p&gt;Regular readers will know how close we are to a full python 3 release. We are not quite there yet but 0.33.7 has support for Synapse under worker mode and we&#x27;ve running it on matrix.org this week. We need more time to conclusively gauge performance improvements but the Synchrotron workers are running with 33% less RAM. Thanks to everyone who has been running their servers under py3, if you do spot anything unusual just let us know. Once we&#x27;ve been running it a bit longer on matrix.org, we&#x27;ll cut a 0.34.0 release with a recommendation that one and all upgrade to python 3.&lt;&#x2F;p&gt;
&lt;p&gt;Aside from that this release contains support for server side end to end key backups, paving the way for client side support in Riot and Rich continues his long running federation bug squash-a-thon which should help with a whole host of federation snafus.&lt;&#x2F;p&gt;
&lt;p&gt;Up next on the horizon is returning in earnest to getting the server to server r0 spec out starting with shipping our brand new super shiny state resolution algorithm.&lt;&#x2F;p&gt;
&lt;p&gt;As a final point, for those of you that deploy from git checkout or a snapshot url and have email notifications enabled please take a look warning in the change log.&lt;&#x2F;p&gt;
&lt;p&gt;As a final final point #synapse:matrix.org is now an officially supported room, aimed at Synapse admins. If you&#x27;ve not done so already please do drop by and say Hi.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.7&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up¬†&lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;Onwards!&lt;&#x2F;p&gt;
&lt;h3&gt;Synapse 0.33.7 Change Log&lt;&#x2F;h3&gt;
&lt;strong&gt;Warning&lt;&#x2F;strong&gt;: This release removes the example email notification templates from¬†&lt;code&gt;res&#x2F;templates&lt;&#x2F;code&gt;¬†(they are now internal to the python package). This should only affect you if you (a) deploy your Synapse instance from a git checkout or a github snapshot URL, and (b) have email notifications enabled.
&lt;p&gt;If you have email notifications enabled, you should ensure that¬†&lt;code&gt;email.template_dir&lt;&#x2F;code&gt;¬†is either configured to point at a directory where you have installed customised templates, or leave it unset to use the default templates.&lt;&#x2F;p&gt;
&lt;p&gt;The configuration parser will try to detect the situation where¬†&lt;code&gt;email.template_dir&lt;&#x2F;code&gt;¬†is incorrectly set to¬†&lt;code&gt;res&#x2F;templates&lt;&#x2F;code&gt;¬†and do the right thing, but will warn about this.&lt;&#x2F;p&gt;
&lt;h4&gt;Features&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Ship the example email templates as part of the package (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4052&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4052&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4052&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add support for end-to-end key backup (MSC1687) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4019&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4019&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4019&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;Bugfixes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix bug which made get_missing_events return too few events (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4045&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4045&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4045&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug in event persistence logic which caused &#x27;NoneType is not iterable&#x27; (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3995&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3995&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3995&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix exception in background metrics collection (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3996&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3996&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3996&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix exception handling in fetching remote profiles (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3997&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3997&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3997&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix handling of rejected threepid invites (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3999&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3999&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#3999&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Workers now start on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4027&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4027&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4027&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse now starts on Python 3.7. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4033&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4033&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4033&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3&gt;Internal Changes&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Log exceptions in looping calls (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4008&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4008&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4008&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Optimisation for serving federation requests (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4017&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4017&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4017&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add metric to count number of non-empty sync responses (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4022&quot; data-hovercard-type=&quot;pull_request&quot; data-hovercard-url=&quot;&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;4022&#x2F;hovercard&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;#4022&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.33.6 released!</title>
		<published>2018-10-04T00:00:00+00:00</published>
		<updated>2018-10-04T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2018/10/04/synapse-0-33-6-released/" type="text/html"/>
		<id>/blog/2018/10/04/synapse-0-33-6-released/</id>
		<content type="html">&lt;p&gt;Right folks, time for Synapse 0.33.6.&lt;&#x2F;p&gt;
&lt;p&gt;These past few weeks we&#x27;ve been focusing on fixing a whole host of federation bugs to improve reliability and latency. Additionally we&#x27;ve squashed some py3 bugs, improved lazy loading and been working hard in the background to improve our CI infrastructure. Finally, we cleaned up the Docker file, the image is now half the size of 0.33.5.1&#x27;s standing at 58 MB.&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.6&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, Synapse is now available from PyPI, pick it up¬†&lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;¬†&lt;&#x2F;p&gt;
&lt;h3&gt;Synapse 0.33.6&lt;&#x2F;h3&gt;
&lt;h4&gt;Features&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Adding the ability to change MAX_UPLOAD_SIZE for the docker container variables. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3883&quot;&gt;#3883&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Report &quot;python_version&quot; in the phone home stats (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3894&quot;&gt;#3894&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Always LL ourselves if we&#x27;re in a room (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3916&quot;&gt;#3916&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Include eventid in log lines when processing incoming federation transactions (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3959&quot;&gt;#3959&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove spurious check which made &#x27;localhost&#x27; servers not work (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3964&quot;&gt;#3964&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;Bugfixes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix problem when playing media from Chrome using direct URL (thanks¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;remjey&quot; data-hovercard-type=&quot;user&quot; data-hovercard-url=&quot;&#x2F;hovercards?user_id=13684203&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@remjey&lt;&#x2F;a&gt;!) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3578&quot;&gt;#3578&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;support registering regular users non-interactively with register_new_matrix_user script (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3836&quot;&gt;#3836&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix broken invite email links for self hosted riots (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3868&quot;&gt;#3868&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Don&#x27;t ratelimit autojoins (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3879&quot;&gt;#3879&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix 500 error when deleting unknown room alias (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3889&quot;&gt;#3889&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix some b&#x27;abcd&#x27; noise in logs and metrics (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3892&quot;&gt;#3892&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3895&quot;&gt;#3895&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;When we join a room, always try the server we used for the alias lookup first, to avoid unresponsive and out-of-date servers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3899&quot;&gt;#3899&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix incorrect server-name indication for outgoing federation requests (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3907&quot;&gt;#3907&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix adding client IPs to the database failing on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3908&quot;&gt;#3908&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug where things occasionally were not being timed out correctly. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3910&quot;&gt;#3910&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug where outbound federation would stop talking to some servers when using workers (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3914&quot;&gt;#3914&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix some instances of ExpiringCache not expiring cache items (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3932&quot;&gt;#3932&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3980&quot;&gt;#3980&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix out-of-bounds error when LLing yourself (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3936&quot;&gt;#3936&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Sending server notices regarding user consent now works on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3938&quot;&gt;#3938&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix exceptions from metrics handler (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3956&quot;&gt;#3956&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix error message for events with m.room.create missing from auth_events (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3960&quot;&gt;#3960&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix errors due to concurrent monthly_active_user upserts (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3961&quot;&gt;#3961&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix exceptions when processing incoming events over federation (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3968&quot;&gt;#3968&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Replaced all occurrences of e.message with str(e). Contributed by Schnuffle (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3970&quot;&gt;#3970&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix lazy loaded sync in the presence of rejected state events (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3986&quot;&gt;#3986&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix error when logging incomplete HTTP requests (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3990&quot;&gt;#3990&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;Internal Changes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Unit tests can now be run under PostgreSQL in Docker using¬†&lt;code&gt;test_postgresql.sh&lt;&#x2F;code&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3699&quot;&gt;#3699&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Speed up calculation of typing updates for replication (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3794&quot;&gt;#3794&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove documentation regarding installation on Cygwin, the use of WSL is recommended instead. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3873&quot;&gt;#3873&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix typo in README, synaspse -&amp;gt; synapse (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3897&quot;&gt;#3897&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Increase the timeout when filling missing events in federation requests (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3903&quot;&gt;#3903&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve the logging when handling a federation transaction (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3904&quot;&gt;#3904&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3966&quot;&gt;#3966&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve logging of outbound federation requests (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3906&quot;&gt;#3906&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3909&quot;&gt;#3909&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix the docker image building on python 3 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3911&quot;&gt;#3911&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a regression test for logging failed HTTP requests on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3912&quot;&gt;#3912&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Comments and interface cleanup for on_receive_pdu (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3924&quot;&gt;#3924&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix spurious exceptions when remote http client closes connection (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3925&quot;&gt;#3925&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Log exceptions thrown by background tasks (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3927&quot;&gt;#3927&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a cache to get_destination_retry_timings (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3933&quot;&gt;#3933&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3991&quot;&gt;#3991&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Automate pushes to docker hub (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3946&quot;&gt;#3946&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Require attrs 16.0.0 or later (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3947&quot;&gt;#3947&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix incompatibility with python3 on alpine (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3948&quot;&gt;#3948&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Run the test suite on the oldest supported versions of our dependencies in CI. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3952&quot;&gt;#3952&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;CircleCI now only runs merged jobs on PRs, and commit jobs on develop, master, and release branches. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3957&quot;&gt;#3957&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix docstrings and add tests for state store methods (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3958&quot;&gt;#3958&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;fix docstring for FederationClient.get_state_for_room (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3963&quot;&gt;#3963&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Run notify_app_services as a bg process (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3965&quot;&gt;#3965&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clarifications in FederationHandler (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3967&quot;&gt;#3967&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Further reduce the docker image size (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3972&quot;&gt;#3972&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Build py3 docker images for docker hub too (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3976&quot;&gt;#3976&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Updated the installation instructions to point to the matrix-synapse package on PyPI. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3985&quot;&gt;#3985&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Disable USE_FROZEN_DICTS for unittests by default. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3987&quot;&gt;#3987&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove unused Jenkins and development related files from the repo. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3988&quot;&gt;#3988&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve stacktraces in certain exceptions in the logs (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3989&quot;&gt;#3989&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Pin to prometheus_client&amp;lt;0.4 to avoid renaming all of our metrics (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;4002&quot;&gt;#4002&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.33.5.1 released!</title>
		<published>2018-09-24T00:00:00+00:00</published>
		<updated>2018-09-24T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2018/09/24/synapse-0-33-5-released/" type="text/html"/>
		<id>/blog/2018/09/24/synapse-0-33-5-released/</id>
		<content type="html">&lt;p&gt;Folks, Synapse 0.33.5.1 is here.&lt;&#x2F;p&gt;
&lt;p&gt;0.33.5.1 is an interesting release. On the one hand it contains the usual bug fixes and performance improvements of a point release, but it also our first versioned release where monolith installs can be run under Python 3.5 and 3.6! Python 3 support is very much in beta, so please be cautious but if you would like to try running under a py3 environment we&#x27;d love to get your feedback.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ve been running it ourselves for the past few weeks, and feel pretty good about it, not least the 2-3x improvement in RAM usage.&lt;&#x2F;p&gt;
&lt;p&gt;Currently the only way to run under python 3 is to download via github, there is no deb support as yet, though this will come as soon as we are confident to recommend python 3 as the default version.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;ll be blogging about our porting project in more detail in the future, so watch this space - exciting times!&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.5.1&quot;&gt;here&lt;&#x2F;a&gt; or any of the sources mentioned at¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;. Note, for the first time, Synapse is now available from PyPI, pick it up &lt;a href=&quot;https:&#x2F;&#x2F;pypi.org&#x2F;project&#x2F;matrix-synapse&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h3&gt;&lt;&#x2F;h3&gt;
&lt;h2&gt;Synapse 0.33.5.1&lt;&#x2F;h2&gt;
&amp;nbsp;
&lt;h3&gt;Internal Changes&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix incompatibility with older Twisted version in tests. Thanks¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;OlegGirko&quot; data-hovercard-user-id=&quot;6013515&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@OlegGirko&lt;&#x2F;a&gt;! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3940&quot;&gt;#3940&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h2&gt;Synapse 0.33.5&lt;&#x2F;h2&gt;
&amp;nbsp;
&lt;h3&gt;Features&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Python 3.5 and 3.6 support is now in beta. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3576&quot;&gt;#3576&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Implement¬†&lt;code&gt;event_format&lt;&#x2F;code&gt;¬†filter param in¬†&lt;code&gt;&#x2F;sync&lt;&#x2F;code&gt;¬†(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3790&quot;&gt;#3790&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add synapse_admin_mau:registered_reserved_users metric to expose number of real reaserved users (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3846&quot;&gt;#3846&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3&gt;Bugfixes&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Remove connection ID for replication prometheus metrics, as it creates a large number of new series. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3788&quot;&gt;#3788&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;guest users should not be part of mau total (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3800&quot;&gt;#3800&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Bump dependency on pyopenssl 16.x, to avoid incompatibility with recent Twisted. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3804&quot;&gt;#3804&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix existing room tags not coming down sync when joining a room (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3810&quot;&gt;#3810&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix jwt import check (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3824&quot;&gt;#3824&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;fix VOIP crashes under Python 3 (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3821&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;358016305&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3821&quot;&gt;#3821&lt;&#x2F;a&gt;) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3835&quot;&gt;#3835&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix manhole so that it works with latest openssh clients (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3841&quot;&gt;#3841&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix outbound requests occasionally wedging, which can result in federation breaking between servers. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3845&quot;&gt;#3845&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Show heroes if room name&#x2F;canonical alias has been deleted (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3851&quot;&gt;#3851&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix handling of redacted events from federation (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3859&quot;&gt;#3859&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3874&quot;&gt;#3874&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Mitigate outbound federation randomly becoming wedged (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3875&quot;&gt;#3875&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3&gt;Internal Changes&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;CircleCI tests now run on the potential merge of a PR. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3704&quot;&gt;#3704&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;http&#x2F; is now ported to Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3771&quot;&gt;#3771&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve human readable error messages for threepid registration&#x2F;account update (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3789&quot;&gt;#3789&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make &#x2F;sync slightly faster by avoiding needless copies (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3795&quot;&gt;#3795&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;handlers&#x2F; is now ported to Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3803&quot;&gt;#3803&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Limit the number of PDUs&#x2F;EDUs per federation transaction (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3805&quot;&gt;#3805&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Only start postgres instance for postgres tests on Travis CI (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3806&quot;&gt;#3806&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;tests&#x2F; is now ported to Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3808&quot;&gt;#3808&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;crypto&#x2F; is now ported to Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3822&quot;&gt;#3822&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;rest&#x2F; is now ported to Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3823&quot;&gt;#3823&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;add some logging for the keyring queue (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3826&quot;&gt;#3826&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;speed up lazy loading by 2-3x (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3827&quot;&gt;#3827&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improved Dockerfile to remove build requirements after building reducing the image size. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3834&quot;&gt;#3834&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Disable lazy loading for incremental syncs for now (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3840&quot;&gt;#3840&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;federation&#x2F; is now ported to Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3847&quot;&gt;#3847&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Log when we retry outbound requests (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3853&quot;&gt;#3853&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Removed some excess logging messages. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3855&quot;&gt;#3855&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Speed up purge history for rooms that have been previously purged (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3856&quot;&gt;#3856&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor some HTTP timeout code. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3857&quot;&gt;#3857&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix running merged builds on CircleCI (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3858&quot;&gt;#3858&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix typo in replication stream exception. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3860&quot;&gt;#3860&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add in flight real time metrics for Measure blocks (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3871&quot;&gt;#3871&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Disable buffering and automatic retrying in treq requests to prevent timeouts. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3872&quot;&gt;#3872&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;mention jemalloc in the README (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3877&quot;&gt;#3877&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove unmaintained &quot;nuke-room-from-db.sh&quot; script (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3888&quot;&gt;#3888&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.33.4 released!</title>
		<published>2018-09-11T00:00:00+00:00</published>
		<updated>2018-09-11T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2018/09/11/synapse-0-33-4-released/" type="text/html"/>
		<id>/blog/2018/09/11/synapse-0-33-4-released/</id>
		<content type="html">&lt;p&gt;Roll up, roll up, get it while it&#x27;s hot, Synapse 0.33.4 is here.&lt;&#x2F;p&gt;
&lt;p&gt;This release brings together a whole host of bug fixes, some enhancements to resource usage management and a bunch of internal changes in readiness for room member state lazy loading and our ongoing port to Python 3 (we are hoping to ship a py3 test candidate rsn!).&lt;&#x2F;p&gt;
&lt;p&gt;As ever, you can get the new update from¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.4&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.4&lt;&#x2F;a&gt;¬†or any of the sources mentioned at¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h4&gt;Features&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Support profile API endpoints on workers (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3659&quot;&gt;#3659&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Server notices for resource limit blocking (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3680&quot;&gt;#3680&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Allow guests to use &#x2F;rooms&#x2F;:roomId&#x2F;event&#x2F;:eventId (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3724&quot;&gt;#3724&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add mau_trial_days config param, so that users only get counted as MAU after N days. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3749&quot;&gt;#3749&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Require twisted 17.1 or later (fixes¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3741&quot;&gt;#3741&lt;&#x2F;a&gt;). (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3751&quot;&gt;#3751&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;Bugfixes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix error collecting prometheus metrics when run on dedicated thread due to threading concurrency issues (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3722&quot;&gt;#3722&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug where we resent &quot;limit exceeded&quot; server notices repeatedly (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3747&quot;&gt;#3747&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug where we broke sync when using limit_usage_by_mau but hadn&#x27;t configured server notices (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3753&quot;&gt;#3753&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix &#x27;federation_domain_whitelist&#x27; such that an empty list correctly blocks all outbound federation traffic (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3754&quot;&gt;#3754&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix tagging of server notice rooms (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3755&quot;&gt;#3755&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3756&quot;&gt;#3756&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix &#x27;admin_uri&#x27; config variable and error parameter to be &#x27;admin_contact&#x27; to match the spec. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3758&quot;&gt;#3758&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Don&#x27;t return non-LL-member state in incremental sync state blocks (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3760&quot;&gt;#3760&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug in sending presence over federation (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3768&quot;&gt;#3768&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug where preserved threepid user comes to sign up and server is mau blocked (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3777&quot;&gt;#3777&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;Internal Changes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Removed the link to the unmaintained matrix-synapse-auto-deploy project from the readme. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3378&quot;&gt;#3378&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor state module to support multiple room versions (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3673&quot;&gt;#3673&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The synapse.storage module has been ported to Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3725&quot;&gt;#3725&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Split the state_group_cache into member and non-member state events (and so speed up LL &#x2F;sync) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3726&quot;&gt;#3726&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Log failure to authenticate remote servers as warnings (without stack traces) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3727&quot;&gt;#3727&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The CONTRIBUTING guidelines have been updated to mention our use of Markdown and that .misc files have content. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3730&quot;&gt;#3730&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reference the need for an HTTP replication port when using the federation_reader worker (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3734&quot;&gt;#3734&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix minor spelling error in federation client documentation. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3735&quot;&gt;#3735&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove redundant state resolution function (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3737&quot;&gt;#3737&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;The test suite now passes on PostgreSQL. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3740&quot;&gt;#3740&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix MAU cache invalidation due to missing yield (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3746&quot;&gt;#3746&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make sure that we close db connections opened during init (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3764&quot;&gt;#3764&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Unignore synctl in .dockerignore to fix docker builds (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3802&quot;&gt;#3802&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&amp;nbsp;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Critical Security Update: Synapse 0.33.3.1</title>
		<published>2018-09-06T00:00:00+00:00</published>
		<updated>2018-09-06T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2018/09/06/critical-security-update-synapse-0-33-3-1/" type="text/html"/>
		<id>/blog/2018/09/06/critical-security-update-synapse-0-33-3-1/</id>
		<content type="html">&lt;p&gt;Hi All,&lt;&#x2F;p&gt;
&lt;p&gt;As referenced in yesterday&#x27;s &lt;a href=&quot;&#x2F;blog&#x2F;2018&#x2F;09&#x2F;05&#x2F;pre-disclosure-upcoming-critical-security-fix-for-synapse&#x2F;&quot;&gt;pre-disclosure&lt;&#x2F;a&gt;, today we are releasing Synapse 0.33.3.1 as a critical security update.&lt;&#x2F;p&gt;
&lt;p&gt;We have patched two security vulnerabilities we identified whilst working on the upcoming r0 spec release for the Server-Server API (see details below). We do not believe either have been exploited in the wild, but strongly recommend everybody running a federated Synapse upgrades immediately. &lt;&#x2F;p&gt;
&lt;p&gt;As always you can get the new update &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.3.1&quot;&gt;here&lt;&#x2F;a&gt; or from any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Many thanks for your patience and understanding; with fixes like this we are moving ever closer to Synapse reaching a 1.0 Thanks also to the package maintainers who have coordinated with us to ensure distro packages are available for a speedy upgrade!&lt;&#x2F;p&gt;
&lt;p&gt;Note, for anyone running Debian Jessie, we have prepared a 0.33.2.1 deb (as 0.33.3 dropped support for Jessie).&lt;&#x2F;p&gt;
&lt;p&gt;¬†&lt;&#x2F;p&gt;
&lt;h3&gt;Synapse 0.33.3.1 (2018-09-06)&lt;&#x2F;h3&gt;
&lt;h4&gt;SECURITY FIXES&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix an issue where event signatures were not always correctly validated (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3796&quot;&gt;#3796&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix an issue where server_acls could be circumvented for incoming events (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3796&quot;&gt;#3796&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;Internal Changes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Unignore synctl in .dockerignore to fix docker builds (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3802&quot;&gt;#3802&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.33.3 Released</title>
		<published>2018-08-22T00:00:00+00:00</published>
		<updated>2018-08-22T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2018/08/22/synapse-0-33-3-released/" type="text/html"/>
		<id>/blog/2018/08/22/synapse-0-33-3-released/</id>
		<content type="html">&lt;p&gt;All the threes, Synapse 0.33.3!&lt;&#x2F;p&gt;
&lt;p&gt;This release brings together a lot of bugfixes, and also some preparation for support for Lazy Loading and Room Versioning.&lt;&#x2F;p&gt;
&lt;p&gt;We also have, as a great contribution from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;vojeroen&quot;&gt;@vojeroen&lt;&#x2F;a&gt;, SNI extension support!¬†With v0.33.3, Synapse now supports sending SNI over federation for vhosted servers, which resolves &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;1491&quot;&gt;this long-standing request&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;As always, you can get the new update from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.3&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.3&lt;&#x2F;a&gt;¬†or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;¬†&lt;&#x2F;p&gt;
&lt;h4 id=&quot;features&quot;&gt;Features&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Add support for the SNI extension to federation TLS connections. Thanks to &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;vojeroen&quot;&gt;@vojeroen&lt;&#x2F;a&gt;! (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3439&quot;&gt;#3439&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add &#x2F;_media&#x2F;r0&#x2F;config (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3184&quot;&gt;#3184&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;speed up &#x2F;members API and add &lt;code&gt;at&lt;&#x2F;code&gt; and &lt;code&gt;membership&lt;&#x2F;code&gt; params as per MSC1227 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3568&quot;&gt;#3568&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;implement &lt;code&gt;summary&lt;&#x2F;code&gt; block in &#x2F;sync response as per MSC688 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3574&quot;&gt;#3574&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add lazy-loading support to &#x2F;messages as per MSC1227 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3589&quot;&gt;#3589&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add ability to limit number of monthly active users on the server (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3633&quot;&gt;#3633&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Support more federation endpoints on workers (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3653&quot;&gt;#3653&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Basic support for room versioning (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3654&quot;&gt;#3654&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Ability to disable client&#x2F;server Synapse via conf toggle (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3655&quot;&gt;#3655&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Ability to whitelist specific threepids against monthly active user limiting (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3662&quot;&gt;#3662&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add some metrics for the appservice and federation event sending loops (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3664&quot;&gt;#3664&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Where server is disabled, block ability for locked out users to read new messages (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3670&quot;&gt;#3670&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;set admin uri via config, to be used in error messages where the user should contact the administrator (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3687&quot;&gt;#3687&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse&#x27;s presence functionality can now be disabled with the &quot;use_presence&quot; configuration option. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3694&quot;&gt;#3694&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;For resource limit blocked users, prevent writing into rooms (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3708&quot;&gt;#3708&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;bugfixes&quot;&gt;Bugfixes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix occasional glitches in the synapse_event_persisted_position metric (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3658&quot;&gt;#3658&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug on deleting 3pid when using identity servers that don&#x27;t support unbind API (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3661&quot;&gt;#3661&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make the tests pass on Twisted &amp;lt; 18.7.0 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3676&quot;&gt;#3676&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Don&#x27;t ship recaptcha_ajax.js, use it directly from Google (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3677&quot;&gt;#3677&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fixes test_reap_monthly_active_users so it passes under postgres (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3681&quot;&gt;#3681&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix mau blocking calculation bug on login (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3689&quot;&gt;#3689&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix missing yield in synapse.storage.monthly_active_users.initialise_reserved_users (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3692&quot;&gt;#3692&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve HTTP request logging to include all requests (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3700&quot;&gt;#3700&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3723&quot;&gt;#3723&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Avoid timing out requests while we are streaming back the response (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3701&quot;&gt;#3701&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Support more federation endpoints on workers (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3705&quot;&gt;#3705&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3713&quot;&gt;#3713&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix &quot;Starting db txn &#x27;get_all_updated_receipts&#x27; from sentinel context&quot; warning (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3710&quot;&gt;#3710&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug where &lt;code&gt;state_cache&lt;&#x2F;code&gt; cache factor ignored environment variables (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3719&quot;&gt;#3719&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;deprecationsandremovals&quot;&gt;Deprecations and Removals&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;The Shared-Secret registration method of the legacy v1&#x2F;register REST endpoint has been removed. For a replacement, please see &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;admin_api&#x2F;register_api.rst&quot;&gt;the admin&#x2F;register API documentation&lt;&#x2F;a&gt;. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3703&quot;&gt;#3703&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4 id=&quot;internalchanges&quot;&gt;Internal Changes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;The test suite now can run under PostgreSQL. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3423&quot;&gt;#3423&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor HTTP replication endpoints to reduce code duplication (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3632&quot;&gt;#3632&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Tests now correctly execute on Python 3. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3647&quot;&gt;#3647&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Sytests can now be run inside a Docker container. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3660&quot;&gt;#3660&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Port over enough to Python 3 to allow the sytests to start. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3668&quot;&gt;#3668&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3732&quot;&gt;#3732&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update docker base image from alpine 3.7 to 3.8. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3669&quot;&gt;#3669&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Rename synapse.util.async to synapse.util.async_helpers to mitigate async becoming a keyword on Python 3.7. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3678&quot;&gt;#3678&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse&#x27;s tests are now formatted with the black autoformatter. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3679&quot;&gt;#3679&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Implemented a new testing base class to reduce test boilerplate. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3684&quot;&gt;#3684&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Rename MAU prometheus metrics (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3690&quot;&gt;#3690&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;add new error type ResourceLimit (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3707&quot;&gt;#3707&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Logcontexts for replication command handlers (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3709&quot;&gt;#3709&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update admin register API documentation to reference a real user ID. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3712&quot;&gt;#3712&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.33.2 is here!</title>
		<published>2018-08-09T00:00:00+00:00</published>
		<updated>2018-08-09T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2018/08/09/synapse-0-33-2-is-here/" type="text/html"/>
		<id>/blog/2018/08/09/synapse-0-33-2-is-here/</id>
		<content type="html">&lt;p&gt;Folks, it&#x27;s release time, Synapse 0.33.2 has landed.&lt;&#x2F;p&gt;
&lt;p&gt;The release focuses on performance, notable highlights include reducing CPU consumption through speeding up state delta calculations¬†(&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3592&quot;&gt;#3592&lt;&#x2F;a&gt;) and reducing I&#x2F;O through lazily loading state on the master process (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3579&quot;&gt;#3579&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3581&quot;&gt;#3581&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3582&quot;&gt;#3582&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3584&quot;&gt;#3584&lt;&#x2F;a&gt;)&lt;&#x2F;p&gt;
&lt;p&gt;Separately work continues on our python 3 port and we hope to have something concrete to trial very soon - we&#x27;re really excited about this and expect step change improvements in CPU and memory use.&lt;&#x2F;p&gt;
&lt;p&gt;Finally we have some ground work for upcoming room membership lazy loading, there is nothing to see here as yet, but rest assured we will make a lot of noise as soon as it is ready. Stay tuned.&lt;&#x2F;p&gt;
&lt;p&gt;¬†or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;p&gt;¬†&lt;&#x2F;p&gt;
&lt;h3&gt;Synapse 0.33.2 (2018-08-09)&lt;&#x2F;h3&gt;
No significant changes.
&lt;h3&gt;&lt;a id=&quot;user-content-synapse-0332rc1-2018-08-07&quot; class=&quot;anchor&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v0.33.2&#x2F;CHANGES.md#synapse-0332rc1-2018-08-07&quot; aria-hidden=&quot;true&quot;&gt;&lt;&#x2F;a&gt;Synapse 0.33.2rc1 (2018-08-07)&lt;&#x2F;h3&gt;
&lt;h4&gt;&lt;a id=&quot;user-content-features&quot; class=&quot;anchor&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v0.33.2&#x2F;CHANGES.md#features&quot; aria-hidden=&quot;true&quot;&gt;&lt;&#x2F;a&gt;Features&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;add support for the lazy_loaded_members filter as per MSC1227 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2970&quot;&gt;#2970&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;add support for the include_redundant_members filter param as per MSC1227 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3331&quot;&gt;#3331&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add metrics to track resource usage by background processes (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3553&quot;&gt;#3553&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3556&quot;&gt;#3556&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3604&quot;&gt;#3604&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3610&quot;&gt;#3610&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add¬†&lt;code&gt;code&lt;&#x2F;code&gt;¬†label to¬†&lt;code&gt;synapse_http_server_response_time_seconds&lt;&#x2F;code&gt;¬†prometheus metric (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3554&quot;&gt;#3554&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add support for client_reader to handle more APIs (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3555&quot;&gt;#3555&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3597&quot;&gt;#3597&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;make the &#x2F;context API filter &amp;amp; lazy-load aware as per MSC1227 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3567&quot;&gt;#3567&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add ability to limit number of monthly active users on the server (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3630&quot;&gt;#3630&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;When we fail to join a room over federation, pass the error code back to the client. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3639&quot;&gt;#3639&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a new &#x2F;admin&#x2F;register API for non-interactively creating users. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3415&quot;&gt;#3415&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;&lt;a id=&quot;user-content-bugfixes&quot; class=&quot;anchor&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v0.33.2&#x2F;CHANGES.md#bugfixes&quot; aria-hidden=&quot;true&quot;&gt;&lt;&#x2F;a&gt;Bugfixes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Make &#x2F;directory&#x2F;list API return 404 for room not found instead of 400 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2952&quot;&gt;#2952&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Default inviter_display_name to mxid for email invites (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3391&quot;&gt;#3391&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Don&#x27;t generate TURN credentials if no TURN config options are set (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3514&quot;&gt;#3514&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Correctly announce deleted devices over federation (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3520&quot;&gt;#3520&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Catch failures saving metrics captured by Measure, and instead log the faulty metrics information for further analysis. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3548&quot;&gt;#3548&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Unicode passwords are now normalised before hashing, preventing the instance where two different devices or browsers might send a different UTF-8 sequence for the password. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3569&quot;&gt;#3569&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix potential stack overflow and deadlock under heavy load (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3570&quot;&gt;#3570&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Respond with M_NOT_FOUND when profiles are not found locally or over federation. Fixes #3585 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3585&quot;&gt;#3585&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix failure to persist events over federation under load (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3601&quot;&gt;#3601&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix updating of cached remote profiles (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3605&quot;&gt;#3605&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix &#x27;tuple index out of range&#x27; error (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3607&quot;&gt;#3607&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Only import secrets when available (fix for py &amp;lt; 3.6) (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3626&quot;&gt;#3626&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;&lt;a id=&quot;user-content-internal-changes&quot; class=&quot;anchor&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;release-v0.33.2&#x2F;CHANGES.md#internal-changes&quot; aria-hidden=&quot;true&quot;&gt;&lt;&#x2F;a&gt;Internal Changes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Remove redundant checks on who_forgot_in_room (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3350&quot;&gt;#3350&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove unnecessary event re-signing hacks (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3367&quot;&gt;#3367&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Rewrite cache list decorator (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3384&quot;&gt;#3384&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Move v1-only REST APIs into their own module. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3460&quot;&gt;#3460&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Replace more instances of Python 2-only iteritems and itervalues uses. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3562&quot;&gt;#3562&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor EventContext to accept state during init (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3577&quot;&gt;#3577&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve Dockerfile and docker-compose instructions (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3543&quot;&gt;#3543&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Release notes are now in the Markdown format. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3552&quot;&gt;#3552&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;add config for pep8 (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3559&quot;&gt;#3559&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Merge Linearizer and Limiter (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3571&quot;&gt;#3571&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3572&quot;&gt;#3572&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Lazily load state on master process when using workers to reduce DB consumption (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3579&quot;&gt;#3579&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3581&quot;&gt;#3581&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3582&quot;&gt;#3582&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3584&quot;&gt;#3584&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fixes and optimisations for resolve_state_groups (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3586&quot;&gt;#3586&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve logging for exceptions when handling PDUs (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3587&quot;&gt;#3587&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add some measure blocks to persist_events (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3590&quot;&gt;#3590&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix some random logcontext leaks. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3591&quot;&gt;#3591&lt;&#x2F;a&gt;,¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3606&quot;&gt;#3606&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Speed up calculating state deltas in persist_event loop (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3592&quot;&gt;#3592&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Attempt to reduce amount of state pulled out of DB during persist_events (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3595&quot;&gt;#3595&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix a documentation typo in on_make_leave_request (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3609&quot;&gt;#3609&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make EventStore inherit from EventFederationStore (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3612&quot;&gt;#3612&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove some redundant joins on event_edges.room_id (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3613&quot;&gt;#3613&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Stop populating events.content (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3614&quot;&gt;#3614&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update the &#x2F;send_leave path registration to use event_id rather than a transaction ID. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3616&quot;&gt;#3616&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor FederationHandler to move DB writes into separate functions (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3621&quot;&gt;#3621&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove unused field &quot;pdu_failures&quot; from transactions. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3628&quot;&gt;#3628&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;rename replication_layer to federation_client (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3634&quot;&gt;#3634&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Factor out exception handling in federation_client (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3638&quot;&gt;#3638&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor location of docker build script. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3644&quot;&gt;#3644&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update CONTRIBUTING to mention newsfragments. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3645&quot;&gt;#3645&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&amp;nbsp;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Security update: Synapse 0.33.1</title>
		<published>2018-08-02T00:00:00+00:00</published>
		<updated>2018-08-02T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2018/08/02/security-update-synapse-0-33-1/" type="text/html"/>
		<id>/blog/2018/08/02/security-update-synapse-0-33-1/</id>
		<content type="html">&lt;p&gt;Hi All,&lt;&#x2F;p&gt;
&lt;p&gt;We have patched two securities vulnerabilities (details follow), we do not believe either have been exploited in the wild, but recommend upgrading asap.&lt;&#x2F;p&gt;
&lt;p&gt;As always you can get the new update from¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.1&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.33.1&lt;&#x2F;a&gt; or from any of the sources mentioned at¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Thanks&lt;&#x2F;p&gt;
&lt;p&gt;¬†&lt;&#x2F;p&gt;
&lt;h3&gt;Changes in Synapse v0.33.1 (2018-08-2)&lt;&#x2F;h3&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix a potential issue where servers could request events for rooms they have not joined. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3641&quot;&gt;#3641&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix a potential issue where users could see events in private rooms before they joined. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3642&quot;&gt;#3642&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Security update: Synapse 0.32.0</title>
		<published>2018-07-06T00:00:00+00:00</published>
		<updated>2018-07-06T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2018/07/06/security-update-synapse-0-32-0/" type="text/html"/>
		<id>/blog/2018/07/06/security-update-synapse-0-32-0/</id>
		<content type="html">&lt;p&gt;Folks, Synapse 0.32.0 is an important security update: please upgrade as soon as you can.&lt;&#x2F;p&gt;
&lt;p&gt;The release focuses on security; fixing several federation bugs and adding new features for countering abuse. Notably it includes the ability to blacklist &amp;amp; whitelist servers allowed to send events to a room on a per-room basis via the new 
m.room.server_acl
state event: see &lt;a href=&quot;https:&#x2F;&#x2F;docs.google.com&#x2F;document&#x2F;d&#x2F;1aiuROf1__7ZFkJvDdAZQfBNxyzjYd-ijiRAcHJYqJCM&#x2F;edit&quot;&gt;MSC1383&lt;&#x2F;a&gt; for details. ¬†This also closes out &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;709&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix-doc&#x2F;issues&#x2F;709&lt;&#x2F;a&gt; - one of our oldest feature requests from users who wish to be able to limit the servers allowed to participate in a given room.&lt;&#x2F;p&gt;
&lt;p&gt;It&#x27;s important to understand that server ACLs only work if all the servers participating in the room honour them. ¬†In future this will be handled better (as part of ongoing work in making it easier to incrementally version and upgrade the federation protocol). ¬†This means that for the ACLs to work, any servers which don&#x27;t yet implement ACLs (e.g. older Synapses) have to be ACL&#x27;d from the room for the access control to work. ¬†
&lt;b&gt;Therefore please upgrade as soon as possible to avoid this problem.&lt;&#x2F;b&gt;&lt;&#x2F;p&gt;
&lt;p&gt;This ongoing flurry of security work is in general all part of moving towards the long-awaited stable release of the Server-Server API. In parallel we&#x27;ve been working on the other main outstanding point: State Resets (i.e. scenarios where you get unexpected results when resolving conflicts between different servers&#x27; copies of a room). ¬†There will be a few more major changes and upgrades on the horizon as we fix these, but then we&#x27;ll finally be able to cut an r0 release of the Server-Server API and Matrix will be one massive step closer to being out of beta!&lt;&#x2F;p&gt;
&lt;p&gt;As always, you can get the new update from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.32.1&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.32.1&lt;&#x2F;a&gt;
¬†or any of the sources mentioned at &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h2&gt;Changes in synapse v0.32.0 (2018-07-06)&lt;&#x2F;h2&gt;
No changes since 0.32.0rc1
&lt;h2&gt;Synapse 0.32.0rc1 (2018-07-05)&lt;&#x2F;h2&gt;
&amp;nbsp;
&lt;h4&gt;Features&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Add blacklist &amp;amp; whitelist of servers allowed to send events to a
room via¬†&lt;code&gt;m.room.server_acl&lt;&#x2F;code&gt;¬†event. (&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;commit&#x2F;feef8461d19c51f3766471e17e2a2f8a2b36c785&quot;&gt;merge&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Cache factor override system for specific caches (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3334&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;329021103&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3334&quot;&gt;#3334&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add metrics to track appservice transactions (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3344&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;329432100&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3344&quot;&gt;#3344&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Try to log more helpful info when a sig verification fails
(&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3372&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;330617906&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3372&quot;&gt;#3372&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse now uses the best performing JSON encoder&#x2F;decoder according
to your runtime (simplejson on CPython, stdlib json on PyPy).
(&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3462&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;336619861&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3462&quot;&gt;#3462&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add optional ip_range_whitelist param to AS registration files to
lock AS IP access (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3465&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;336751400&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3465&quot;&gt;#3465&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reject invalid server names in federation requests (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3480&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;337874054&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3480&quot;&gt;#3480&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reject invalid server names in homeserver.yaml (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3483&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;338348899&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3483&quot;&gt;#3483&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;Bugfixes&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Strip access_token from outgoing requests (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3327&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;328782473&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3327&quot;&gt;#3327&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Redact AS tokens in logs (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3349&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;329791545&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3349&quot;&gt;#3349&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix federation backfill from SQLite servers (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3355&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;329865615&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3355&quot;&gt;#3355&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix event-purge-by-ts admin API (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3363&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;330065602&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3363&quot;&gt;#3363&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix event filtering in get_missing_events handler (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3371&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;330608172&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3371&quot;&gt;#3371&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Synapse is now stricter regarding accepting events which it cannot
retrieve the prev_events for. (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3456&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;336184658&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3456&quot;&gt;#3456&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug where synapse would explode when receiving unicode in HTTP
User-Agent header (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3470&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;337261723&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3470&quot;&gt;#3470&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Invalidate cache on correct thread to avoid race (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3473&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;337463703&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3473&quot;&gt;#3473&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;Improved Documentation&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;&lt;code&gt;doc&#x2F;postgres.rst&lt;&#x2F;code&gt;: fix display of the last command block. Thanks to
&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ArchangeGabriel&quot; data-hovercard-user-id=&quot;490531&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@ArchangeGabriel&lt;&#x2F;a&gt;! (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3340&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;329241972&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3340&quot;&gt;#3340&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;Deprecations and Removals&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;Remove was_forgotten_at (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3324&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;328600145&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3324&quot;&gt;#3324&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;Misc&lt;&#x2F;h4&gt;
&lt;ul&gt;
 	&lt;li&gt;&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3332&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;328922729&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3332&quot;&gt;#3332&lt;&#x2F;a&gt;¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3341&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;329315777&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3341&quot;&gt;#3341&lt;&#x2F;a&gt;¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3347&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;329626817&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3347&quot;&gt;#3347&lt;&#x2F;a&gt;¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3348&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;329660142&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3348&quot;&gt;#3348&lt;&#x2F;a&gt;¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3356&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;329938222&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3356&quot;&gt;#3356&lt;&#x2F;a&gt;¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3385&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;331533857&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3385&quot;&gt;#3385&lt;&#x2F;a&gt;¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3446&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;335720791&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3446&quot;&gt;#3446&lt;&#x2F;a&gt;¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3447&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;335727844&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3447&quot;&gt;#3447&lt;&#x2F;a&gt;¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3467&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;336993276&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3467&quot;&gt;#3467&lt;&#x2F;a&gt;¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3474&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;337465451&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3474&quot;&gt;#3474&lt;&#x2F;a&gt;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.31.1 Released!</title>
		<published>2018-06-08T00:00:00+00:00</published>
		<updated>2018-06-08T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2018/06/08/synapse-0-31-1-released/" type="text/html"/>
		<id>/blog/2018/06/08/synapse-0-31-1-released/</id>
		<content type="html">&lt;p&gt;Folks,&lt;&#x2F;p&gt;
&lt;p&gt;v0.31.1 fixes a security bug in the &lt;code&gt;get_missing_events&lt;&#x2F;code&gt; federation API where event visibility rules were not applied correctly.&lt;&#x2F;p&gt;
&lt;p&gt;We are not aware of it being actively exploited but please upgrade asap.&lt;&#x2F;p&gt;
&lt;p&gt;Sorry for the inconvenience, Synapse and the Matrix spec are still in beta and we still ironing out gaps such as this one.&lt;&#x2F;p&gt;
&lt;p&gt;You can get the release &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.31.1&quot;&gt;here&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;
&lt;h4&gt;&lt;&#x2F;h4&gt;
&lt;h4&gt;Changes in synapse v0.31.1 (2018-06-08)&lt;&#x2F;h4&gt;
v0.31.1 fixes a security bug in the¬†&lt;code&gt;get_missing_events&lt;&#x2F;code&gt;¬†federation API
where event visibility rules were not applied correctly.
&lt;p&gt;We are not aware of it being actively exploited but please upgrade asap.&lt;&#x2F;p&gt;
&lt;p&gt;Bug Fixes:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix event filtering in get_missing_events handler (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3371&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;330608172&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3371&quot;&gt;#3371&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse v0.31.0 released!</title>
		<published>2018-06-06T00:00:00+00:00</published>
		<updated>2018-06-06T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2018/06/06/synapse-v0-31-0-released/" type="text/html"/>
		<id>/blog/2018/06/06/synapse-v0-31-0-released/</id>
		<content type="html">&lt;p&gt;Good people, it&#x27;s release time.&lt;&#x2F;p&gt;
&lt;p&gt;With the core team focusing on upcoming performance work and GDPR management tooling, v0.31.0 is most notable for improvements to system stats. Additionally, work continues on our py3 port and a host of small bug fixes and perf improvements.&lt;&#x2F;p&gt;
&lt;p&gt;Get it now from¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.31.0&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.31.0&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;h4&gt;Changes in synapse v0.31.0 (2018-06-06)&lt;&#x2F;h4&gt;
Most notable change from v0.30.0 is to switch to python prometheus library to improve system stats reporting. WARNING this changes a number of prometheus metrics in a backwards-incompatible manner. For more details, see&lt;code&gt;&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;metrics-howto.rst&quot;&gt;docs&#x2F;metrics-howto.rst&lt;&#x2F;a&gt;&lt;&#x2F;code&gt;
&lt;p&gt;Bug Fixes:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix metric documentation tables (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3341&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;329315777&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3341&quot;&gt;#3341&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix LaterGuage error handling (&lt;a class=&quot;commit-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;commit&#x2F;694968fa81aab4eac81309b1e16f6063103dd57f&quot;&gt;&lt;tt&gt;694968f&lt;&#x2F;tt&gt;&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix replication metrics (&lt;a class=&quot;commit-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;commit&#x2F;b7e7fd2d0edd4d46aaf9d6afc8df14cf3de911f9&quot;&gt;&lt;tt&gt;b7e7fd2&lt;&#x2F;tt&gt;&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h4&gt;Changes in synapse v0.31.0-rc1 (2018-06-04)&lt;&#x2F;h4&gt;
Features:
&lt;ul&gt;
 	&lt;li&gt;Switch to the Python Prometheus library (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3256&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325104990&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3256&quot;&gt;#3256&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3274&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325830300&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3274&quot;&gt;#3274&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Let users leave the server notice room after joining (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3287&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;326461744&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3287&quot;&gt;#3287&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Changes:
&lt;ul&gt;
 	&lt;li&gt;daily user type phone home stats (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3264&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325386403&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3264&quot;&gt;#3264&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use iter* methods for _filter_events_for_server (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3267&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325614605&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3267&quot;&gt;#3267&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Docs on consent bits (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3268&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325692950&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3268&quot;&gt;#3268&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove users from user directory on deactivate (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3277&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;326163134&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3277&quot;&gt;#3277&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Avoid sending consent notice to guest users (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3288&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;326470814&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3288&quot;&gt;#3288&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;disable CPUMetrics if no &#x2F;proc&#x2F;self&#x2F;stat (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3299&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;327143395&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3299&quot;&gt;#3299&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add local and loopback IPv6 addresses to url_preview_ip_range_blacklist (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3312&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;327707583&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3312&quot;&gt;#3312&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;thegcat&quot; data-hovercard-user-id=&quot;22835&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@thegcat&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Consistently use six&#x27;s iteritems and wrap lazy keys&#x2F;values in list() if they&#x27;re not meant to be lazy (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3307&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;327587988&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3307&quot;&gt;#3307&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add private IPv6 addresses to example config for url preview blacklist (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3317&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;328463163&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3317&quot;&gt;#3317&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;thegcat&quot; data-hovercard-user-id=&quot;22835&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@thegcat&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Reduce stuck read-receipts: ignore depth when updating (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3318&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;328480595&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3318&quot;&gt;#3318&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Put python&#x27;s logs into Trial when running unit tests (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3319&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;328483239&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3319&quot;&gt;#3319&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Changes, python 3 migration:
&lt;ul&gt;
 	&lt;li&gt;Replace some more comparisons with six (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3243&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324637327&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3243&quot;&gt;#3243&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;replace some iteritems with six (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3244&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324637417&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3244&quot;&gt;#3244&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Add batch_iter to utils (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3245&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324637631&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3245&quot;&gt;#3245&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;use repr, not str (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3246&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324637830&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3246&quot;&gt;#3246&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Misc Python3 fixes (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3247&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324638685&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3247&quot;&gt;#3247&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Py3 storage&#x2F;_base.py (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3278&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;326199044&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3278&quot;&gt;#3278&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;more six iteritems (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3279&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;326236209&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3279&quot;&gt;#3279&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;More Misc. py3 fixes (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3280&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;326237427&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3280&quot;&gt;#3280&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;remaining isintance fixes (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3281&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;326248255&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3281&quot;&gt;#3281&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;py3-ize state.py (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3283&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;326249587&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3283&quot;&gt;#3283&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;extend tox testing for py3 to avoid regressions (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3302&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;327341929&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3302&quot;&gt;#3302&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;krombel&quot; data-hovercard-user-id=&quot;11167142&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@krombel&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;use memoryview in py3 (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3303&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;327370655&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3303&quot;&gt;#3303&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Bugs:
&lt;ul&gt;
 	&lt;li&gt;Fix federation backfill bugs (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3261&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325289139&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3261&quot;&gt;#3261&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;federation: fix LaterGauge usage (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3328&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;328820215&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3328&quot;&gt;#3328&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;intelfx&quot; data-hovercard-user-id=&quot;1158172&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@intelfx&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse v0.30.0 released today!</title>
		<published>2018-05-24T00:00:00+00:00</published>
		<updated>2018-05-24T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2018/05/24/synapse-0-30-0-released-today/" type="text/html"/>
		<id>/blog/2018/05/24/synapse-0-30-0-released-today/</id>
		<content type="html">&lt;p&gt;It&#x27;s release o&#x27;clock - GDPR time!!!!&lt;&#x2F;p&gt;
&lt;p&gt;v0.30.0 sees the introduction of &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;server_notices.md&quot;&gt;Server Notices&lt;&#x2F;a&gt;, which provides a channel whereby server administrators can send messages to users on the server, as well as &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;consent_tracking.md&quot;&gt;Consent Management&lt;&#x2F;a&gt;¬†for tracking whether users have agreed to the terms and conditions set by the administrator of a server - and blocking access to the server until they have.&lt;&#x2F;p&gt;
&lt;p&gt;In conjunction these features support GDPR compliance in the form of providing a client agnostic means to contact users and ask for consent&#x2F;agreement to a Privacy Notice.&lt;&#x2F;p&gt;
&lt;p&gt;For more information about our approach to GDPR compliance take a look &lt;a href=&quot;&#x2F;blog&#x2F;2018&#x2F;05&#x2F;08&#x2F;gdpr-compliance-in-matrix&#x2F;&quot;&gt;here&lt;&#x2F;a&gt;¬†(although be aware that our position has evolved a bit; see the upcoming new privacy policy for the Matrix.org homeserver for details).&lt;&#x2F;p&gt;
&lt;p&gt;Additionally there are a host of bug fixes and refactors as well as an enhancement to our Dockerfile.&lt;&#x2F;p&gt;
&lt;p&gt;Get it now from¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.30.0&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.30.0&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;div class=&quot;release clearfix label-latest&quot;&gt;
&lt;div class=&quot;release-body commit open float-left&quot;&gt;
&lt;div class=&quot;markdown-body&quot;&gt;
&lt;h2&gt;Changes in synapse v0.30.0 (2018-05-24)&lt;&#x2F;h2&gt;
&#x27;Server Notices&#x27; are a new feature introduced in Synapse 0.30. They provide a
channel whereby server administrators can send messages to users on the server.
&lt;p&gt;They are used as part of communication of the server policies (see &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;consent_tracking.md&quot;&gt;Consent Tracking&lt;&#x2F;a&gt;),
however the intention is that they may also find a use for features such
as &amp;quot;Message of the day&amp;quot;.&lt;&#x2F;p&gt;
&lt;p&gt;This feature is specific to Synapse, but uses standard Matrix communication mechanisms,
so should work with any Matrix client. For more details see &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;server_notices.md&quot;&gt;here&lt;&#x2F;a&gt;.¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;blob&#x2F;master&#x2F;docs&#x2F;server_notices.md&quot;&gt;&lt;code&gt;&lt;&#x2F;code&gt;&lt;&#x2F;a&gt;&lt;&#x2F;p&gt;
&lt;p&gt;Further Server Notices&#x2F;Consent Tracking Support:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Allow overriding the server_notices user&#x27;s avatar (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3273&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325788990&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3273&quot;&gt;#3273&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use the localpart in the consent uri (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3272&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325732749&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3272&quot;&gt;#3272&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Support for putting %(consent_uri)s in messages (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3271&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325731335&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3271&quot;&gt;#3271&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Block attempts to send server notices to remote users (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3270&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325706652&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3270&quot;&gt;#3270&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Docs on consent bits (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3268&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325692950&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3268&quot;&gt;#3268&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;release clearfix label-prerelease&quot;&gt;
&lt;div class=&quot;release-body commit open float-left&quot;&gt;
&lt;div class=&quot;markdown-body&quot;&gt;
&lt;h3&gt;Changes in synapse v0.30.0-rc1 (2018-05-23)&lt;&#x2F;h3&gt;
GDPR Support:
&lt;ul&gt;
 	&lt;li&gt;ConsentResource to gather policy consent from users (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3213&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;322329950&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3213&quot;&gt;#3213&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Move RoomCreationHandler out of synapse.handlers.Handlers (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3225&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;323966891&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3225&quot;&gt;#3225&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Infrastructure for a server notices room (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3232&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324110323&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3232&quot;&gt;#3232&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Send users a server notice about consent (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3236&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324363121&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3236&quot;&gt;#3236&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reject attempts to send event before privacy consent is given (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3257&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325182001&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3257&quot;&gt;#3257&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add a &#x27;has_consented&#x27; template var to consent forms (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3262&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325308498&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3262&quot;&gt;#3262&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix dependency on jinja2 (PR¬†&lt;a class=&quot;issue-link js-issue-link tooltipped tooltipped-ne&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3263&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325308826&quot; data-permission-text=&quot;Issue title is private&quot; aria-label=&quot;#3263, Fix dependency on jinja2&quot;&gt;#3263&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Features:
&lt;ul&gt;
 	&lt;li&gt;Cohort analytics (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3163&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319174463&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3163&quot;&gt;#3163&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3241&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324442563&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3241&quot;&gt;#3241&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3251&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324872139&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3251&quot;&gt;#3251&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add lxml to docker image for web previews (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3239&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324408394&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3239&quot;&gt;#3239&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ptman&quot; data-hovercard-user-id=&quot;24669&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@ptman&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Add in flight request metrics (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3252&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324955805&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3252&quot;&gt;#3252&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Changes:
&lt;ul&gt;
 	&lt;li&gt;Remove unused¬†&lt;code&gt;update_external_syncs&lt;&#x2F;code&gt;¬†(PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3233&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324114741&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3233&quot;&gt;#3233&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use stream rather depth ordering for push actions (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3212&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;322319018&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3212&quot;&gt;#3212&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make purge_history operate on tokens (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3221&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;323268684&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3221&quot;&gt;#3221&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Don&#x27;t support limitless pagination (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3265&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325389253&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3265&quot;&gt;#3265&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Bug Fixes:
&lt;ul&gt;
 	&lt;li&gt;Fix logcontext resource usage tracking (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3258&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;325229997&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3258&quot;&gt;#3258&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix error in handling receipts (PR¬†&lt;a class=&quot;issue-link js-issue-link tooltipped tooltipped-ne&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3235&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324313546&quot; data-permission-text=&quot;Issue title is private&quot; aria-label=&quot;#3235, Fix error in handling receipts&quot;&gt;#3235&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Stop the transaction cache caching failures (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3255&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;324972872&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3255&quot;&gt;#3255&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.29.1 Released!</title>
		<published>2018-05-18T00:00:00+00:00</published>
		<updated>2018-05-18T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2018/05/18/synapse-0-29-1/" type="text/html"/>
		<id>/blog/2018/05/18/synapse-0-29-1/</id>
		<content type="html">&lt;p&gt;It&#x27;s release time people, not to be outdone by our friends on the &lt;a href=&quot;https:&#x2F;&#x2F;medium.com&#x2F;@RiotChat&#x2F;stickers-are-here-introducing-riot-im-0-15-for-web-desktop-284c32b93acc&quot;&gt;Riot web team&lt;&#x2F;a&gt;, Synapse v0.29.1 lands today.&lt;&#x2F;p&gt;
&lt;p&gt;v0.29.1 contains an officially supported docker image¬†(many thanks to the contribution from¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kaiyou&quot;&gt;@kaiyou&lt;&#x2F;a&gt;), continued progress towards Python 3 (thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;) - as well as a heap of refactorings and bug fixes.&lt;&#x2F;p&gt;
&lt;p&gt;Something worth noting is a potentially breaking change in the error code that &#x2F;login returns in the Client Server API. Details follow, but the change closes a gap between Synapse behaviour and the spec.&lt;&#x2F;p&gt;
&lt;p&gt;We&#x27;d like to give huge thanks to Silvio Fricke and Andreas Peters for writing and maintaining &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;AVENTER-UG&#x2F;docker-matrix&quot;&gt;Synapse&#x27;s first Dockerfile&lt;&#x2F;a&gt;, as well as¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;allmende&#x2F;docker-synapse&quot;&gt;allmende&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jcgruenhage&#x2F;docker-synapse&quot;&gt;jcgruenhage&lt;&#x2F;a&gt;, &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ptman&#x2F;synapse-docker&quot;&gt;ptman&lt;&#x2F;a&gt;, and &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;ilianaw&#x2F;dockerfiles&#x2F;tree&#x2F;master&#x2F;synapse&quot;&gt;ilianaw&lt;&#x2F;a&gt; for theirs!¬† The new Dockerfile from kaiyou has ended up being merged into the &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;tree&#x2F;master&#x2F;contrib&#x2F;docker&quot;&gt;main synapse tree&lt;&#x2F;a&gt; and we&#x27;re going to try to maintain it going forwards, but folks should use whichever one they prefer.&lt;&#x2F;p&gt;
&lt;p&gt;You can pick it up from¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.29.1&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.29.1&lt;&#x2F;a&gt; and thanks to everyone who tested the release candidate.&lt;&#x2F;p&gt;
&lt;h2&gt;Changes in synapse v0.29.1 (2018-05-17)&lt;&#x2F;h2&gt;
Changes:
&lt;ul&gt;
 	&lt;li&gt;Update docker documentation (PR &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3222&quot;&gt;#3222&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3&gt;Changes in synapse v0.29.0 (2018-05-16)&lt;&#x2F;h3&gt;
No changes since v0.29.0-rc1
&lt;h3&gt;Changes in synapse v0.29.0-rc1 (2018-05-14)&lt;&#x2F;h3&gt;
Potentially breaking change:
&lt;ul&gt;
 	&lt;li&gt;Make Client-Server API return 401 for invalid token (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3161&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319022836&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3161&quot;&gt;#3161&lt;&#x2F;a&gt;).This changes the Client-server spec to return a 401 error code instead of 403 when the access token is unrecognised. This is the behaviour required by the specification, but some clients may be relying on the old, incorrect behaviour.Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;¬†for fixing this.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Features:
&lt;ul&gt;
 	&lt;li&gt;Add a Dockerfile for synapse (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2846&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;294138160&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2846&quot;&gt;#2846&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;kaiyou&quot; data-hovercard-user-id=&quot;847861&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@kaiyou&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Changes - General:
&lt;ul&gt;
 	&lt;li&gt;nuke-room-from-db.sh: added postgresql option and help (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2337&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;240936932&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2337&quot;&gt;#2337&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rubo77&quot; data-hovercard-user-id=&quot;1591563&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@rubo77&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Part user from rooms on account deactivate (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3201&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;321584384&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3201&quot;&gt;#3201&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make &#x27;unexpected logging context&#x27; into warnings (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3007&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;305674363&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3007&quot;&gt;#3007&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Set Server header in SynapseRequest (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3208&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;322021667&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3208&quot;&gt;#3208&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;remove duplicates from groups tables (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3129&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;317640994&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3129&quot;&gt;#3129&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve exception handling for background processes (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3138&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318353806&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3138&quot;&gt;#3138&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add missing consumeErrors to improve exception handling (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3139&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318354891&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3139&quot;&gt;#3139&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;reraise exceptions more carefully (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3142&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318362067&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3142&quot;&gt;#3142&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove redundant call to preserve_fn (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3143&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318369685&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3143&quot;&gt;#3143&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Trap exceptions thrown within run_in_background (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3144&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318372621&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3144&quot;&gt;#3144&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Changes - Refactors:
&lt;ul&gt;
 	&lt;li&gt;Refactor &#x2F;context to reuse pagination storage functions (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3193&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;321240389&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3193&quot;&gt;#3193&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor recent events func to use pagination func (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3195&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;321511701&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3195&quot;&gt;#3195&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor pagination DB API to return concrete type (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3196&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;321514152&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3196&quot;&gt;#3196&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor get_recent_events_for_room return type (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3198&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;321524525&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3198&quot;&gt;#3198&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor sync APIs to reuse pagination API (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3199&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;321556855&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3199&quot;&gt;#3199&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove unused code path from member change DB func (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3200&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;321572270&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3200&quot;&gt;#3200&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor request handling wrappers (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3203&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;321896316&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3203&quot;&gt;#3203&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;transaction_id, destination defined twice (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3209&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;322050253&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3209&quot;&gt;#3209&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;damir-manapov&quot; data-hovercard-user-id=&quot;84543&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@damir-manapov&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor event storage to prepare for changes in state calculations (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3141&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318360848&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3141&quot;&gt;#3141&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Set Server header in SynapseRequest (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3208&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;322021667&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3208&quot;&gt;#3208&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use deferred.addTimeout instead of time_bound_deferred (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3127&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;316624675&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3127&quot;&gt;#3127&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3178&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319723346&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3178&quot;&gt;#3178&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use run_in_background in preference to preserve_fn (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3140&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318358846&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3140&quot;&gt;#3140&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Changes - Python 3 migration:
&lt;ul&gt;
 	&lt;li&gt;Construct HMAC as bytes on py3 (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3156&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318672814&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3156&quot;&gt;#3156&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;run config tests on py3 (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3159&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318819505&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3159&quot;&gt;#3159&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Open certificate files as bytes (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3084&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312978895&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3084&quot;&gt;#3084&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Open config file in non-bytes mode (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3085&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312979176&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3085&quot;&gt;#3085&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Make event properties raise AttributeError instead (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3102&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314438601&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3102&quot;&gt;#3102&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Use six.moves.urlparse (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3108&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314444112&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3108&quot;&gt;#3108&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Add py3 tests to tox with folders that work (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3145&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318431714&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3145&quot;&gt;#3145&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Don&#x27;t yield in list comprehensions (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3150&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318628803&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3150&quot;&gt;#3150&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Move more xrange to six (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3151&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318628945&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3151&quot;&gt;#3151&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;make imports local (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3152&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318629082&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3152&quot;&gt;#3152&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;move httplib import to six (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3153&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318629172&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3153&quot;&gt;#3153&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Replace stringIO imports with six (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3154&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318629362&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3154&quot;&gt;#3154&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3168&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319453092&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3168&quot;&gt;#3168&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;more bytes strings (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3155&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318672504&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3155&quot;&gt;#3155&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Bug Fixes:
&lt;ul&gt;
 	&lt;li&gt;synapse fails to start under Twisted &amp;gt;= 18.4 (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3157&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318721696&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3157&quot;&gt;#3157&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Half-Shot&quot; data-hovercard-user-id=&quot;2072976&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@Half-Shot&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix a class of logcontext leaks (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3170&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319506071&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3170&quot;&gt;#3170&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix a couple of logcontext leaks in unit tests (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3172&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319584239&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3172&quot;&gt;#3172&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix logcontext leak in media repo (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3174&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319596214&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3174&quot;&gt;#3174&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Escape label values in prometheus metrics (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3175&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319611493&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3175&quot;&gt;#3175&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3186&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319955083&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3186&quot;&gt;#3186&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix &#x27;Unhandled Error&#x27; logs with Twisted 18.4 (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3182&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319867481&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3182&quot;&gt;#3182&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Half-Shot&quot; data-hovercard-user-id=&quot;2072976&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@Half-Shot&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix logcontext leaks in rate limiter (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3183&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;319883299&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3183&quot;&gt;#3183&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;notifications: Convert next_token to string according to the spec (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3190&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;320496620&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3190&quot;&gt;#3190&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;mujx&quot; data-hovercard-user-id=&quot;6430350&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@mujx&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;nuke-room-from-db.sh: fix deletion from search table (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3194&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;321366575&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3194&quot;&gt;#3194&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;rubo77&quot; data-hovercard-user-id=&quot;1591563&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@rubo77&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;add guard for None on purge_history api (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3160&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;318873877&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3160&quot;&gt;#3160&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;krombel&quot; data-hovercard-user-id=&quot;11167142&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot; aria-describedby=&quot;hovercard-aria-description&quot;&gt;@krombel&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.28.0 Released!</title>
		<published>2018-04-27T00:00:00+00:00</published>
		<updated>2018-04-27T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2018/04/27/synapse-0-28-0-released/" type="text/html"/>
		<id>/blog/2018/04/27/synapse-0-28-0-released/</id>
		<content type="html">&lt;p&gt;Well now, today sees the release of Synapse 0.28.0!&lt;&#x2F;p&gt;
&lt;p&gt;This release is particularly exciting as it&#x27;s a major bump mainly thanks to lots and lots of contributions from the wider community - including support for running Synapse on PyPy (thanks Valodim) and lots of progress towards official Python3 support (thanks notafile)!! However, almost all the changes are under the hood (and some are quite major), so this is more a performance, bugfix and synapse internals release rather than adding many new APIs or features&lt;&#x2F;p&gt;
&lt;p&gt;As always, you can get it from¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.28.0&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.28.0&lt;&#x2F;a&gt;¬†and thanks to everyone who tested the release candidates.&lt;&#x2F;p&gt;
&lt;h3&gt;Changes in synapse v0.28.0 (2018-04-26)&lt;&#x2F;h3&gt;
Bug Fixes:
&lt;ul&gt;
 	&lt;li&gt;Fix quarantine media admin API and search reindex (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3130&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;317646661&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3130&quot;&gt;#3130&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix media admin APIs (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3134&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;317969752&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3134&quot;&gt;#3134&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3&gt;Changes in synapse v0.28.0-rc1 (2018-04-24)&lt;&#x2F;h3&gt;
Minor performance improvement to federation sending and bug fixes.
&lt;p&gt;(Note: This release does not include state resolutions discussed in matrix live)&lt;&#x2F;p&gt;
&lt;p&gt;Features:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Add metrics for event processing lag (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3090&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;313326931&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3090&quot;&gt;#3090&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add metrics for ResponseCache (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3092&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;313664599&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3092&quot;&gt;#3092&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Changes:
&lt;ul&gt;
 	&lt;li&gt;Synapse on PyPy (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2760&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;286622617&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2760&quot;&gt;#2760&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;Valodim&quot; data-hovercard-user-id=&quot;27813&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot;&gt;@Valodim&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;move handling of auto_join_rooms to RegisterHandler (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2996&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;305218362&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2996&quot;&gt;#2996&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;krombel&quot; data-hovercard-user-id=&quot;11167142&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot;&gt;@krombel&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve handling of SRV records for federation connections (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3016&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;306884886&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3016&quot;&gt;#3016&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;silkeh&quot; data-hovercard-user-id=&quot;5798032&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot;&gt;@silkeh&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Document the behaviour of ResponseCache (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3059&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;311125652&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3059&quot;&gt;#3059&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Preparation for py3 (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3061&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;311182479&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3061&quot;&gt;#3061&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3073&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312120046&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3073&quot;&gt;#3073&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3074&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312126869&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3074&quot;&gt;#3074&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3075&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312144464&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3075&quot;&gt;#3075&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3103&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314439691&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3103&quot;&gt;#3103&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3104&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314439972&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3104&quot;&gt;#3104&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3106&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314440233&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3106&quot;&gt;#3106&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3107&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314440492&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3107&quot;&gt;#3107&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3109&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314459327&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3109&quot;&gt;#3109&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3110&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314459750&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3110&quot;&gt;#3110&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;update prometheus dashboard to use new metric names (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3069&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;311770477&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3069&quot;&gt;#3069&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;krombel&quot; data-hovercard-user-id=&quot;11167142&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot;&gt;@krombel&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;use python3-compatible prints (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3074&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312126869&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3074&quot;&gt;#3074&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Send federation events concurrently (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3078&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312485229&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3078&quot;&gt;#3078&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Limit concurrent event sends for a room (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3079&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312488812&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3079&quot;&gt;#3079&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve R30 stat definition (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3086&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;313004914&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3086&quot;&gt;#3086&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Send events to ASes concurrently (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3088&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;313232647&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3088&quot;&gt;#3088&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor ResponseCache usage (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3093&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;313696664&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3093&quot;&gt;#3093&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Clarify that SRV may not point to a CNAME (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3100&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314327149&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3100&quot;&gt;#3100&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;silkeh&quot; data-hovercard-user-id=&quot;5798032&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot;&gt;@silkeh&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Use str(e) instead of e.message (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3103&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314439691&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3103&quot;&gt;#3103&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Use six.itervalues in some places (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3106&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314440233&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3106&quot;&gt;#3106&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Refactor store.have_events (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3117&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;315159849&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3117&quot;&gt;#3117&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Bug Fixes:
&lt;ul&gt;
 	&lt;li&gt;Return 401 for invalid access_token on logout (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2938&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;301972886&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2938&quot;&gt;#2938&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;dklug&quot; data-hovercard-user-id=&quot;8633205&quot; data-octo-click=&quot;hovercard-link-click&quot; data-octo-dimensions=&quot;link_type:self&quot;&gt;@dklug&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Return a 404 rather than a 500 on rejoining empty rooms (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3080&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312501677&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3080&quot;&gt;#3080&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;fix federation_domain_whitelist (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3099&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314137025&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3099&quot;&gt;#3099&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Avoid creating events with huge numbers of prev_events (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3113&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;314753743&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3113&quot;&gt;#3113&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Reject events which have lots of prev_events (PR¬†&lt;a class=&quot;issue-link js-issue-link tooltipped tooltipped-ne&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3118&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;315273891&quot; data-permission-text=&quot;Issue title is private&quot;&gt;#3118&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&amp;nbsp;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.27.3 released!</title>
		<published>2018-04-11T00:00:00+00:00</published>
		<updated>2018-04-11T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2018/04/11/synapse-0-27-3-released/" type="text/html"/>
		<id>/blog/2018/04/11/synapse-0-27-3-released/</id>
		<content type="html">&lt;p&gt;Today we release Synapse 0.27.3!&lt;&#x2F;p&gt;
&lt;p&gt;Hot on the heels of 0.27.2, notable changes include API support for joining groups&#x2F;communities as well as a major bug fix (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3082&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312859684&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3082&quot;&gt;#3082&lt;&#x2F;a&gt;), that is particularly important for those upgrading for the first time in a while. Also new metrics and phone home stats. Phone home stats include better visibility of system usage so we can have a better idea of how synapse&#x27;s RAM and CPU is behaving in the wild. Also, recording the number of users on the server who have been using it for at least 30 days.&lt;&#x2F;p&gt;
&lt;p&gt;Phone home stats are entirely optional and can be enabled&#x2F;disabled by setting &amp;quot;&lt;span class=&quot;s1&quot;&gt;report_&lt;&#x2F;span&gt;
&lt;span class=&quot;s2&quot;&gt;stat&lt;&#x2F;span&gt;
&lt;span class=&quot;s1&quot;&gt;s&amp;quot; in homeserver.yaml.¬†&lt;&#x2F;span&gt;
Please consider enabling phone home stats if you currently have not done so - this data is really important to us in improving Matrix as a whole (and justifying future funding for¬†&lt;a class=&quot;linkified&quot; href=&quot;http:&#x2F;&#x2F;matrix.org&#x2F;&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Matrix.org&lt;&#x2F;a&gt;).&lt;&#x2F;p&gt;
&lt;p&gt;As always, you can get it from¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.27.3&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.27.3&lt;&#x2F;a&gt; and thanks to everyone who tested the release candidates.&lt;&#x2F;p&gt;
&lt;h3&gt;Changes in synapse v0.27.3 (2018-04-11)&lt;&#x2F;h3&gt;
Bug fixes:
&lt;ul&gt;
 	&lt;li&gt;URL quote path segments over federation (&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3082&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;312859684&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3082&quot;&gt;#3082&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3&gt;Changes in synapse v0.27.3-rc2 (2018-04-09)&lt;&#x2F;h3&gt;
v0.27.3-rc1 used a stale version of the develop branch so the changelog overstates
the functionality. v0.27.3-rc2 is up to date, rc1 should be ignored.
&lt;h3&gt;Changes in synapse v0.27.3-rc1 (2018-04-09)&lt;&#x2F;h3&gt;
Notable changes include API support for joinability of groups. Also new metrics
and phone home stats. Phone home stats include better visibility of system usage
so we can tweak synpase to work better for all users rather than our own experience
with matrix.org. Also, recording &#x27;r30&#x27; stat which is the measure we use to track
overall growth of the Matrix ecosystem. It is defined as:-
&lt;p&gt;Counts the number of native 30 day retained users, defined as:-&lt;&#x2F;p&gt;
&lt;ul&gt;
&lt;li&gt;Users who have created their accounts more than 30 days&lt;&#x2F;li&gt;
&lt;li&gt;Where last seen at most 30 days ago&lt;&#x2F;li&gt;
&lt;li&gt;Where account creation and last_seen are &amp;gt; 30 days&amp;quot;&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;p&gt;Features:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Add joinability for groups (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3045&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;309358488&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3045&quot;&gt;#3045&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Implement group join API (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3046&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;309437433&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3046&quot;&gt;#3046&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add counter metrics for calculating state delta (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3033&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;308901076&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3033&quot;&gt;#3033&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;R30 stats (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3041&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;309293623&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3041&quot;&gt;#3041&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Measure time it takes to calculate state group ID (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3043&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;309312509&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3043&quot;&gt;#3043&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add basic performance statistics to phone home (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3044&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;309323226&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3044&quot;&gt;#3044&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add response size metrics (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3071&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;311954815&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3071&quot;&gt;#3071&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;phone home cache size configurations (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3063&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;311248683&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3063&quot;&gt;#3063&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Changes:
&lt;ul&gt;
 	&lt;li&gt;Add a blurb explaining the main synapse worker (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2886&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;298059141&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2886&quot;&gt;#2886&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;turt2live&quot; data-hovercard-user-id=&quot;1190097&quot;&gt;@turt2live&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Replace old style error catching with &#x27;as&#x27; keyword (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3000&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;305290730&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3000&quot;&gt;#3000&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;NotAFile&quot; data-hovercard-user-id=&quot;5447747&quot;&gt;@NotAFile&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Use .iter* to avoid copies in StateHandler (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3006&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;305656885&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3006&quot;&gt;#3006&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Linearize calls to _generate_user_id (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3029&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;308526745&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3029&quot;&gt;#3029&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove last usage of ujson (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3030&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;308552644&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3030&quot;&gt;#3030&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use simplejson throughout (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3048&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;309920407&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3048&quot;&gt;#3048&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use static JSONEncoders (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3049&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;309920728&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3049&quot;&gt;#3049&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove uses of events.content (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3060&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;311128650&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3060&quot;&gt;#3060&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve database cache performance (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3068&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;311658915&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3068&quot;&gt;#3068&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Bug fixes:
&lt;ul&gt;
 	&lt;li&gt;Add room_id to the response of¬†&lt;code&gt;rooms&#x2F;{&#x27;{&#x27;}roomId{&#x27;}&#x27;}&#x2F;join&lt;&#x2F;code&gt;¬†(PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2986&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;304772714&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2986&quot;&gt;#2986&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jplatte&quot; data-hovercard-user-id=&quot;951129&quot;&gt;@jplatte&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix replication after switch to simplejson (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3015&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;306553712&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3015&quot;&gt;#3015&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix replication after switch to simplejson (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3015&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;306553712&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3015&quot;&gt;#3015&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;404 correctly on missing paths via NoResource (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3022&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;307976332&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3022&quot;&gt;#3022&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix error when claiming e2e keys from offline servers (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3034&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;309039857&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3034&quot;&gt;#3034&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;fix tests&#x2F;storage&#x2F;test_user_directory.py (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3042&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;309299280&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3042&quot;&gt;#3042&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;use PUT instead of POST for federating groups&#x2F;m.join_policy (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3070&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;311932835&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3070&quot;&gt;#3070&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;krombel&quot; data-hovercard-user-id=&quot;11167142&quot;&gt;@krombel&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;postgres port script: fix state_groups_pkey error (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3072&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;311965025&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3072&quot;&gt;#3072&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.27 released!</title>
		<published>2018-03-26T00:00:00+00:00</published>
		<updated>2018-03-26T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2018/03/26/synapse-0-27-2-released/" type="text/html"/>
		<id>/blog/2018/03/26/synapse-0-27-2-released/</id>
		<content type="html">&lt;div class=&quot;release clearfix label-latest&quot;&gt;
&lt;div class=&quot;release-body commit open float-left&quot;&gt;
&lt;div class=&quot;release-header&quot;&gt;
&lt;div class=&quot;release clearfix label-latest&quot;&gt;
&lt;div class=&quot;release-body commit open float-left&quot;&gt;
&lt;div class=&quot;release-header&quot;&gt;
&lt;p class=&quot;release-title text-normal&quot;&gt;We released Synapse v0.27.2 today (the first stable release in the 0.27.x series) - it contains loads of work since Synapse v0.26 back in January.¬† The main highlights are:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li class=&quot;release-title text-normal&quot;&gt;All the perf improvements which we&#x27;ve been landing as we race to keep the matrix.org homeserver in the face of ever-expanding traffic levels over the last few months&lt;&#x2F;li&gt;
 	&lt;li class=&quot;release-title text-normal&quot;&gt;Support for custom storage providers for media repository.&lt;&#x2F;li&gt;
 	&lt;li class=&quot;release-title text-normal&quot;&gt;Ability to limit the email addresses allowed to register on your HS, and ability to limit the homeservers your homeserver is allowed to federate with&lt;&#x2F;li&gt;
 	&lt;li class=&quot;release-title text-normal&quot;&gt;All new purge API - letting you purge history by date as well as by event (and having a nice new async way of doing it)&lt;&#x2F;li&gt;
 	&lt;li class=&quot;release-title text-normal&quot;&gt;Make search work again!!! (by switching from GIST to GIN indexes)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
And a few release notes worth calling out:
&lt;ul&gt;
 	&lt;li&gt;The common case for running Synapse is not to run separate workers, but for those that do, be aware that synctl no longer starts the main synapse when using¬†&lt;code&gt;-a&lt;&#x2F;code&gt;¬†option with workers. A new worker file should be added with¬†&lt;code&gt;worker_app: synapse.app.homeserver&lt;&#x2F;code&gt;.&lt;&#x2F;li&gt;
 	&lt;li&gt;This release also begins the process of renaming a number of the metrics reported to prometheus. See¬†&lt;code&gt;docs&#x2F;metrics-howto.rst¬†&lt;&#x2F;code&gt;
Note that the v0.28.0 release will remove the deprecated metric names.&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;div&gt;
As always, you can get it from¬†&lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.27.2&quot;&gt;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&#x2F;tag&#x2F;v0.27.2&lt;&#x2F;a&gt;
&lt;&#x2F;div&gt;
&amp;nbsp;
&lt;p&gt;thanks for flying Matrix!&lt;&#x2F;p&gt;
&lt;div class=&quot;release-body commit open float-left&quot;&gt;
&lt;div class=&quot;release-header&quot;&gt;
&lt;h3 class=&quot;f5 text-gray mt-1 mb-4&quot;&gt;&lt;&#x2F;h3&gt;
&lt;h3 class=&quot;f5 text-gray mt-1 mb-4&quot;&gt;Changes in synapse v0.27.2 (2018-03-26)&lt;&#x2F;h3&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;markdown-body&quot;&gt;
&lt;p&gt;Bug fixes:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix bug which broke TCP replication between workers (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3015&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;306553712&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3015&quot;&gt;#3015&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;release clearfix label-&quot;&gt;
&lt;div class=&quot;release-body commit open float-left&quot;&gt;
&lt;div class=&quot;markdown-body&quot;&gt;
&lt;h3&gt;&lt;&#x2F;h3&gt;
&lt;h3&gt;Changes in synapse v0.27.1 (2018-03-26)&lt;&#x2F;h3&gt;
Meta release as v0.27.0 temporarily pointed to the wrong commit
&lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;
&lt;div class=&quot;release clearfix label-&quot;&gt;
&lt;div class=&quot;release-body commit open float-left&quot;&gt;
&lt;div class=&quot;markdown-body&quot;&gt;
&lt;h3&gt;&lt;&#x2F;h3&gt;
&lt;h3&gt;Changes in synapse v0.27.0 (2018-03-26)&lt;&#x2F;h3&gt;
No changes since v0.27.0-rc2
&lt;h3&gt;&lt;&#x2F;h3&gt;
&lt;h3&gt;Changes in synapse v0.27.0-rc2 (2018-03-19)&lt;&#x2F;h3&gt;
Pulls in v0.26.1
&lt;p&gt;Bug fixes:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Fix bug introduced in v0.27.0-rc1 that causes much increased memory usage in state cache (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;3005&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;305611773&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;3005&quot;&gt;#3005&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h3&gt;&lt;&#x2F;h3&gt;
&lt;h3&gt;Changes in synapse v0.27.0-rc1 (2018-03-14)&lt;&#x2F;h3&gt;
The common case for running Synapse is not to run separate workers, but for those that do, be aware that synctl no longer starts the main synapse when using¬†&lt;code&gt;-a&lt;&#x2F;code&gt;¬†option with workers. A new worker file should be added with¬†&lt;code&gt;worker_app: synapse.app.homeserver&lt;&#x2F;code&gt;.
&lt;p&gt;This release also begins the process of renaming a number of the metrics
reported to prometheus. See¬†&lt;code&gt;docs&#x2F;metrics-howto.rst &amp;lt;docs&#x2F;metrics-howto.rst#block-and-response-metrics-renamed-for-0-27-0&amp;gt;&lt;&#x2F;code&gt;_.
Note that the v0.28.0 release will remove the deprecated metric names.&lt;&#x2F;p&gt;
&lt;p&gt;Features:&lt;&#x2F;p&gt;
&lt;ul&gt;
 	&lt;li&gt;Add ability for ASes to override message send time (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2754&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;286084501&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2754&quot;&gt;#2754&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add support for custom storage providers for media repository (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2867&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;297143892&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2867&quot;&gt;#2867&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2777&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288157999&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2777&quot;&gt;#2777&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2783&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288569577&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2783&quot;&gt;#2783&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2789&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288869854&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2789&quot;&gt;#2789&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2791&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288934607&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2791&quot;&gt;#2791&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2804&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;289336063&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2804&quot;&gt;#2804&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2812&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;289647722&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2812&quot;&gt;#2812&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2814&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;290067094&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2814&quot;&gt;#2814&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2857&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;295139747&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2857&quot;&gt;#2857&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2868&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;297189465&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2868&quot;&gt;#2868&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2767&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;287142685&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2767&quot;&gt;#2767&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add purge API features, see¬†&lt;code&gt;docs&#x2F;admin_api&#x2F;purge_history_api.rst &amp;lt;docs&#x2F;admin_api&#x2F;purge_history_api.rst&amp;gt;&lt;&#x2F;code&gt;_ for full details (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2858&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;295623787&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2858&quot;&gt;#2858&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2867&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;297143892&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2867&quot;&gt;#2867&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2882&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;297795332&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2882&quot;&gt;#2882&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2946&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;302323973&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2946&quot;&gt;#2946&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2962&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;303453845&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2962&quot;&gt;#2962&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2943&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;302274834&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2943&quot;&gt;#2943&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add support for whitelisting 3PIDs that users can register. (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2813&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;289822303&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2813&quot;&gt;#2813&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add¬†&lt;code&gt;&#x2F;room&#x2F;{&#x27;{&#x27;}id{&#x27;}&#x27;}&#x2F;event&#x2F;{&#x27;{&#x27;}id{&#x27;}&#x27;}&lt;&#x2F;code&gt;¬†API (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2766&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;287111856&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2766&quot;&gt;#2766&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add an admin API to get all the media in a room (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2818&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;290248966&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2818&quot;&gt;#2818&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;turt2live&quot; data-hovercard-user-id=&quot;1190097&quot;&gt;@turt2live&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Add¬†&lt;code&gt;federation_domain_whitelist&lt;&#x2F;code&gt;¬†option (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2820&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;290431422&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2820&quot;&gt;#2820&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2821&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;290535583&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2821&quot;&gt;#2821&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Changes:
&lt;ul&gt;
 	&lt;li&gt;Continue to factor out processing from main process and into worker processes. See updated¬†&lt;code&gt;docs&#x2F;workers.rst &amp;lt;docs&#x2F;metrics-howto.rst&amp;gt;&lt;&#x2F;code&gt;_ (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2892&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;298561185&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2892&quot;&gt;#2892&lt;&#x2F;a&gt;¬†-¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2904&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;299011997&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2904&quot;&gt;#2904&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2913&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;300641311&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2913&quot;&gt;#2913&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2920&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;301369053&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2920&quot;&gt;#2920&lt;&#x2F;a&gt;¬†-¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2926&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;301430108&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2926&quot;&gt;#2926&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2947&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;302345912&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2947&quot;&gt;#2947&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2847&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;294445742&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2847&quot;&gt;#2847&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2854&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;294788458&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2854&quot;&gt;#2854&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2872&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;297406819&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2872&quot;&gt;#2872&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2873&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;297453720&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2873&quot;&gt;#2873&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2874&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;297495962&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2874&quot;&gt;#2874&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2928&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;301499498&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2928&quot;&gt;#2928&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2929&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;301509586&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2929&quot;&gt;#2929&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2934&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;301790132&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2934&quot;&gt;#2934&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2856&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;295084944&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2856&quot;&gt;#2856&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2976&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;304706297&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2976&quot;&gt;#2976&lt;&#x2F;a&gt;¬†-¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2984&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;304740825&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2984&quot;&gt;#2984&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2987&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;304821270&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2987&quot;&gt;#2987&lt;&#x2F;a&gt;¬†-¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2989&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;304866716&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2989&quot;&gt;#2989&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2991&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;304872444&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2991&quot;&gt;#2991&lt;&#x2F;a&gt;¬†-¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2993&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;304884837&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2993&quot;&gt;#2993&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2995&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;305183031&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2995&quot;&gt;#2995&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2784&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288646985&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2784&quot;&gt;#2784&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Ensure state cache is used when persisting events (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2864&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;296733137&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2864&quot;&gt;#2864&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2871&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;297402993&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2871&quot;&gt;#2871&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2802&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;289312790&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2802&quot;&gt;#2802&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2835&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;292486340&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2835&quot;&gt;#2835&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2836&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;292488546&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2836&quot;&gt;#2836&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2841&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;293319852&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2841&quot;&gt;#2841&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2842&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;293516371&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2842&quot;&gt;#2842&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2849&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;294454677&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2849&quot;&gt;#2849&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Change the default config to bind on both IPv4 and IPv6 on all platforms (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2435&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;254819246&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2435&quot;&gt;#2435&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;silkeh&quot; data-hovercard-user-id=&quot;5798032&quot;&gt;@silkeh&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;No longer require a specific version of saml2 (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2695&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;275301530&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2695&quot;&gt;#2695&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;okurz&quot; data-hovercard-user-id=&quot;1693432&quot;&gt;@okurz&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove¬†&lt;code&gt;verbosity&lt;&#x2F;code&gt;&#x2F;&lt;code&gt;log_file&lt;&#x2F;code&gt;¬†from generated config (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2755&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;286276436&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2755&quot;&gt;#2755&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add and improve metrics and logging (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2770&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;287188683&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2770&quot;&gt;#2770&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2778&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288278959&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2778&quot;&gt;#2778&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2785&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288661455&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2785&quot;&gt;#2785&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2786&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288673610&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2786&quot;&gt;#2786&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2787&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288680996&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2787&quot;&gt;#2787&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2793&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288990634&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2793&quot;&gt;#2793&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2794&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288990935&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2794&quot;&gt;#2794&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2795&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288991781&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2795&quot;&gt;#2795&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2809&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;289596655&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2809&quot;&gt;#2809&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2810&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;289611347&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2810&quot;&gt;#2810&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2833&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;292478167&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2833&quot;&gt;#2833&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2834&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;292485874&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2834&quot;&gt;#2834&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2844&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;293722386&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2844&quot;&gt;#2844&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2965&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;303899583&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2965&quot;&gt;#2965&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2927&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;301458883&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2927&quot;&gt;#2927&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2975&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;304696133&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2975&quot;&gt;#2975&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2790&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288882318&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2790&quot;&gt;#2790&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2796&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;289002187&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2796&quot;&gt;#2796&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2838&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;292878012&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2838&quot;&gt;#2838&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;When using synctl with workers, don&#x27;t start the main synapse automatically (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2774&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;287752976&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2774&quot;&gt;#2774&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Minor performance improvements (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2773&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;287525837&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2773&quot;&gt;#2773&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2792&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;288956339&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2792&quot;&gt;#2792&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use a connection pool for non-federation outbound connections (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2817&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;290150012&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2817&quot;&gt;#2817&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Make it possible to run unit tests against postgres (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2829&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;291766061&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2829&quot;&gt;#2829&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Update pynacl dependency to 1.2.1 or higher (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2888&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;298077542&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2888&quot;&gt;#2888&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;bachp&quot; data-hovercard-user-id=&quot;333807&quot;&gt;@bachp&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Remove ability for AS users to call &#x2F;events and &#x2F;sync (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2948&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;302351006&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2948&quot;&gt;#2948&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Use bcrypt.checkpw (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2949&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;302378538&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2949&quot;&gt;#2949&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;krombel&quot; data-hovercard-user-id=&quot;11167142&quot;&gt;@krombel&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Bug fixes:
&lt;ul&gt;
 	&lt;li&gt;Fix broken¬†&lt;code&gt;ldap_config&lt;&#x2F;code&gt;¬†config option (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2683&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;274548585&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2683&quot;&gt;#2683&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;seckrv&quot; data-hovercard-user-id=&quot;33725786&quot;&gt;@seckrv&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix error message when user is not allowed to unban (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2761&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;286627895&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2761&quot;&gt;#2761&lt;&#x2F;a&gt;) Thanks to¬†&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;turt2live&quot; data-hovercard-user-id=&quot;1190097&quot;&gt;@turt2live&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix publicised groups GET API (singular) over federation (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2772&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;287465272&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2772&quot;&gt;#2772&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix user directory when using¬†&lt;code&gt;user_directory_search_all_users&lt;&#x2F;code&gt;¬†config option (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2803&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;289317809&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2803&quot;&gt;#2803&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2831&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;291766486&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2831&quot;&gt;#2831&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix error on¬†&lt;code&gt;&#x2F;publicRooms&lt;&#x2F;code&gt;¬†when no rooms exist (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2827&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;291754519&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2827&quot;&gt;#2827&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix bug in quarantine_media (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2837&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;292821166&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2837&quot;&gt;#2837&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix url_previews when no Content-Type is returned from URL (PR¬†&lt;a class=&quot;issue-link js-issue-link tooltipped tooltipped-ne&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2845&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;293737258&quot; data-permission-text=&quot;Issue title is private&quot;&gt;#2845&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix rare race in sync API when joining room (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2944&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;302277324&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2944&quot;&gt;#2944&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix slow event search, switch back from GIST to GIN indexes (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2769&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;287153610&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2769&quot;&gt;#2769&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2848&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;294449553&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2848&quot;&gt;#2848&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;
&lt;&#x2F;div&gt;
</content>
	</entry>
	<entry xml:lang="en">
		<title>Synapse 0.24 is here!</title>
		<published>2017-10-24T00:00:00+00:00</published>
		<updated>2017-10-24T00:00:00+00:00</updated>
		<link rel="alternate" href="/blog/2017/10/24/synapse-0-24-is-here/" type="text/html"/>
		<id>/blog/2017/10/24/synapse-0-24-is-here/</id>
		<content type="html">&lt;p&gt;Hi folks,&lt;&#x2F;p&gt;
&lt;p&gt;Synapse 0.24 is out (currently at 0.24.1)! This is a pretty big release as it includes initial support for Groups, also known as Communities (UI for which is landing currently on Riot&#x2F;Web and later Riot&#x2F;Mobile). Groups let you associate together a set of users and rooms, letting you define a community - e.g. &lt;a href=&quot;https:&#x2F;&#x2F;riot.im&#x2F;develop&#x2F;#&#x2F;group&#x2F;+matrix:matrix.org&quot;&gt;+matrix:matrix.org&lt;&#x2F;a&gt; is the community of the core Matrix project itself (whose users are the core Matrix.org team, and whose public rooms are the rooms we officially manage&#x2F;moderate as Matrix.org).¬† We&#x27;ll yell more about Groups once the UI is ready for action in the near future, but the good news is that Synapse should be ready to go (although the API is still fairly experimental and very much evolving).&lt;&#x2F;p&gt;
&lt;p&gt;Other stuff worth calling out in this release includes: massive performance improvements on receiving federation traffic (we now process federation traffic for different rooms in parallel); fixing a major cause of performance issues (caused when processing spurious events for rooms you&#x27;ve actually left); modularising and improving the the spamchecker; @room notification support; backup media repository support; and finally the ability to autojoin new users to a set of rooms on the server!&lt;&#x2F;p&gt;
&lt;p&gt;You can get the latest release from &lt;a href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;releases&quot;&gt;Github&lt;&#x2F;a&gt; as usual; have fun - and thanks for flying Matrix :)&lt;&#x2F;p&gt;
&lt;h1&gt;Changes in synapse v0.24.1 (2017-10-24)&lt;&#x2F;h1&gt;
Bug fixes:
&lt;ul&gt;
 	&lt;li&gt;Fix updating group profiles over federation (PR¬†&lt;a class=&quot;issue-link js-issue-link tooltipped tooltipped-ne&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2567&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;267687632&quot; data-permission-text=&quot;Issue title is private&quot;&gt;#2567&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
&lt;h1&gt;Changes in synapse v0.24.0 (2017-10-23)&lt;&#x2F;h1&gt;
No changes since v0.24.0-rc1
&lt;h1&gt;Changes in synapse v0.24.0-rc1 (2017-10-19)&lt;&#x2F;h1&gt;
Features:
&lt;ul&gt;
 	&lt;li&gt;Add Group Server (PR¬†&lt;a class=&quot;issue-link js-issue-link tooltipped tooltipped-ne&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2352&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;241719376&quot; data-permission-text=&quot;Issue title is private&quot;&gt;#2352&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2363&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;242334015&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2363&quot;&gt;#2363&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2374&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;243375644&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2374&quot;&gt;#2374&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2377&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;244340948&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2377&quot;&gt;#2377&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2378&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;244341100&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2378&quot;&gt;#2378&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2382&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;245071091&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2382&quot;&gt;#2382&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2410&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;249656746&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2410&quot;&gt;#2410&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2426&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;251663325&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2426&quot;&gt;#2426&lt;&#x2F;a&gt;,
&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2430&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;252935837&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2430&quot;&gt;#2430&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2454&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;258756630&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2454&quot;&gt;#2454&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2471&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;260566156&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2471&quot;&gt;#2471&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2472&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;260655379&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2472&quot;&gt;#2472&lt;&#x2F;a&gt;,¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2544&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;265791503&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2544&quot;&gt;#2544&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add support for channel notifications (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2501&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;263095049&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2501&quot;&gt;#2501&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add basic implementation of backup media store (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2538&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;264965734&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2538&quot;&gt;#2538&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add config option to auto-join new users to rooms (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2545&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;265842040&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2545&quot;&gt;#2545&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Changes:
&lt;ul&gt;
 	&lt;li&gt;Make the spam checker a module (PR¬†&lt;a class=&quot;issue-link js-issue-link tooltipped tooltipped-ne&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2474&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;260721359&quot; data-permission-text=&quot;Issue title is private&quot;&gt;#2474&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Delete expired url cache data (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2478&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;261282574&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2478&quot;&gt;#2478&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Ignore incoming events for rooms that we have left (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2490&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;262374962&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2490&quot;&gt;#2490&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Allow spam checker to reject invites too (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2492&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;262416897&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2492&quot;&gt;#2492&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Add room creation checks to spam checker (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2495&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;262727329&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2495&quot;&gt;#2495&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Spam checking: add the invitee to user_may_invite (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2502&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;263117407&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2502&quot;&gt;#2502&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Process events from federation for different rooms in parallel (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2520&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;263967902&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2520&quot;&gt;#2520&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Allow error strings from spam checker (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2531&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;264590599&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2531&quot;&gt;#2531&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Improve error handling for missing files in config (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2551&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;266095819&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2551&quot;&gt;#2551&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
Bug fixes:
&lt;ul&gt;
 	&lt;li&gt;Fix handling SERVFAILs when doing AAAA lookups for federation (PR¬†&lt;a class=&quot;issue-link js-issue-link tooltipped tooltipped-ne&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2477&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;261269109&quot; data-permission-text=&quot;Issue title is private&quot;&gt;#2477&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix incompatibility with newer versions of ujson (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2483&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;261851143&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2483&quot;&gt;#2483&lt;&#x2F;a&gt;) Thanks to
&lt;a class=&quot;user-mention&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;jeremycline&quot;&gt;@jeremycline&lt;&#x2F;a&gt;!&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix notification keywords that start&#x2F;end with non-word chars (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2500&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;263077422&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2500&quot;&gt;#2500&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix stack overflow and logcontexts from linearizer (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2532&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;264600894&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2532&quot;&gt;#2532&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix 500 error when fields missing from power_levels event (PR¬†&lt;a class=&quot;issue-link js-issue-link&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2552&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;266187530&quot; data-permission-text=&quot;Issue title is private&quot; data-url=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;issues&#x2F;2552&quot;&gt;#2552&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
 	&lt;li&gt;Fix 500 error when we get an error handling a PDU (PR¬†&lt;a class=&quot;issue-link js-issue-link tooltipped tooltipped-ne&quot; href=&quot;https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;synapse&#x2F;pull&#x2F;2553&quot; data-error-text=&quot;Failed to load issue title&quot; data-id=&quot;266256222&quot; data-permission-text=&quot;Issue title is private&quot;&gt;#2553&lt;&#x2F;a&gt;)&lt;&#x2F;li&gt;
&lt;&#x2F;ul&gt;
</content>
	</entry>
</feed>
