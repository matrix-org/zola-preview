<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - Releases</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/png" href="/assets/favicon.png" />
    <link rel="stylesheet" href="/style.css" />

    
<link rel="alternate" type="application/rss+xml" title="RSS" href="/category/releases/atom.xml">
</head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            ">
            Blog
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <a href="&#x2F;docs&#x2F;" class="section ">
                Documentation
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                </div>
            </div>
        </div>
        
        
        
        
        
        <div class="section-wrap">
            <a href="&#x2F;ecosystem&#x2F;" class="section ">
                Ecosystem
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bots&#x2F;">Bots</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        
<div id="taxonomy-single">
    <div class="content">
        <header>
            <h1>Releases</h1>
            132 posts tagged with "Releases" <a href="/category">(See all Category)</a>
            
            <h2>
                <small><a href="/category/releases/atom.xml">Atom Feed</a></small>
            </h2>
            
        </header>

        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2022&#x2F;03&#x2F;22&#x2F;synapse-1-55-released&#x2F;" title="Synapse 1.55 released">Synapse 1.55 released</a></h2>
                <span>
                    22.03.2022 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/brendan-abolivier">
                        Brendan Abolivier
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all, <a href="https://github.com/matrix-org/synapse/releases/tag/v1.55.0">Synapse
1.55</a> is out! Let's
see the main talking points of this new release.</p>
<blockquote>
<p>Update: After the initial release of Synapse 1.55, the developers of a
third-party tool (Jinja, which is the tool Synapse uses to render email and
web templates) released a new version of their project which proved
incompatible with Synapse. To address this issue, we have released <a href="https://github.com/matrix-org/synapse/releases/tag/v1.55.2">Synapse
1.55.2</a>.</p>
<p>Deployments of Synapse using the <code>matrixdotorg/synapse</code> Docker image or Debian
packages from <code>packages.matrix.org</code> are not affected as they are already using
a compatible version of the tool.</p>
<p>It's worth noting that the work we are doing to integrate
<a href="https://python-poetry.org/">Poetry</a> into Synapse (more on that a bit further
in this post) will, once completed, prevent this kind of issues from
happening.</p>
</blockquote>
<h2 id="removing-support-for-mjolnir-1-3-1-and-older">Removing support for Mjolnir 1.3.1 and older</h2>
<p>Administrators of large homeservers and communities will already be familiar
with <a href="https://github.com/matrix-org/mjolnir">Mjolnir</a>, which is a tool designed
to help them moderate a large number of rooms in an efficient way. It includes a
bot as well as a Synapse module to better interface with the homeserver.</p>
<p>Due to a change in how we manage some of Synapse's internal utilities, this
release of Synapse breaks compatibility with Mjolnir versions 1.3.1 and older.
Homeserver administrators using Mjolnir and upgrading to Synapse 1.55 should
make sure they're running Mjolnir version 1.3.2 or later.</p>
<p>See the <a href="https://matrix-org.github.io/synapse/v1.55/upgrade#compatibility-dropped-for-mjolnir-131-and-earlier">upgrade
notes</a>
for more information.</p>
<h2 id="moving-synctl">Moving <code>synctl</code></h2>
<p><code>synctl</code> is a tool provided as part of Synapse to run and manage your instance
and its workers (if any).</p>
<p>As part of our work to integrate <a href="https://python-poetry.org/">Poetry</a> in Synapse
(which in turn will enable a lot of cool things, such as reproducible builds),
we have recently moved the way we package this tool. As of this release,
homeserver administrators should stop invoking it using its direct path (e.g.
<code>/path/to/synctl start</code>), but should instead call it directly, e.g. <code>synctl start</code>.</p>
<p>This means homeserver administrators using <code>synctl</code> must make sure that the tool
is in their <code>PATH</code>. This is automatically done when installing and upgrading
Synapse using the <code>matrixdotorg/synapse</code> Docker image or Debian packages from
<code>packages.matrix.org</code>. When installing from a wheel, sdist, or PyPI, an
executable is created in your Python installation's <code>bin</code> directory.</p>
<p>See the <a href="https://matrix-org.github.io/synapse/v1.55/upgrade#synctl-script-has-been-moved">upgrade
notes</a>
for more information.</p>
<h2 id="everything-else">Everything else</h2>
<p>This release also introduces new module callbacks, allowing homeserver
administrators to more efficiently review which users are able to deactivate
users and shutdown rooms. More information on that in <a href="https://matrix-org.github.io/synapse/v1.55/modules/third_party_rules_callbacks.html#check_can_shutdown_room">Synapse's
documentation</a>.</p>
<p>We have also started experimenting with using the native Python asyncio event
loop in Synapse which, if successful, would make it easier to use building
blocks from the Python ecosystem when adding new features to Synapse.</p>
<p>See the <a href="https://github.com/matrix-org/synapse/releases/tag/v1.55.0">full
changelog</a> for a
complete list of changes in this release. Also please have a look at the
<a href="https://matrix-org.github.io/synapse/v1.55/upgrade#upgrading-to-v1550">upgrade
notes</a>
for this version.</p>
<p>Synapse is a Free and Open Source Software project, and we'd like to extend our
thanks to everyone who contributed to this release, including (in no particular
order) <a href="https://github.com/dklimpel">Dirk Klimpel</a>,
<a href="https://www.beeper.com/">Beeper</a>, and
<a href="https://github.com/cremesk">~creme</a>.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2022&#x2F;03&#x2F;08&#x2F;synapse-1-54-released&#x2F;" title="Synapse 1.54 released">Synapse 1.54 released</a></h2>
                <span>
                    08.03.2022 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/brendan-abolivier">
                        Brendan Abolivier
                    </a>
                </span>
                
            </header>
            <div>
                
                <p><a href="https://github.com/matrix-org/synapse/releases/tag/v1.54.0">Synapse 1.54</a> is
out! Let's see what goodness is coming your way with this new release.</p>
<h2 id="improving-url-previews">Improving URL previews</h2>
<p>As part of the Matrix specification, Matrix clients have the option to rely on
the homeserver to generate URL previews. This means the homeserver (in this case
Synapse) needs to have a look at the content at that URL and extract data to
send back to the client.</p>
<p>In the past, Synapse has had issues with generating complete URL previews, and
some metadata (e.g. image, description) would be missing from the data that
Synapse sends to clients. Synapse 1.54 includes improvements to the generation
of URL previews, and while testing it we've been able to observe improvements to
previews generated for Twitter and Reddit.</p>
<h2 id="new-module-callbacks">New module callbacks</h2>
<p>Synapse modules allow third-party developers to write extra features for
Synapse, that wouldn't necessarily be generic enough to fit within the Matrix
specification. This includes custom behaviours such as smarter event filters,
bespoke media storage providers, or spam checkers. Since we rewrote Synapse's
module system in <a href="https://matrix.org/blog/2021/06/30/security-update-synapse-1-37-1-released#synapse-137-release-announcement">Synapse
1.37</a>,
we have been improving it by adding new callback functions that module can
implement, allowing them to interface better with Synapse.</p>
<p>Synapse 1.54 includes three new module callbacks. One of them,
<a href="https://matrix-org.github.io/synapse/v1.54/modules/password_auth_provider_callbacks.html#get_displayname_for_registration"><code>get_displayname_for_registration</code></a>,
allows modules to define the display name for newly registered users. Together
with the existing
<a href="https://matrix-org.github.io/synapse/v1.54/modules/password_auth_provider_callbacks.html#get_username_for_registration"><code>get_username_for_registration</code></a>
introduced in <a href="https://matrix.org/blog/2022/02/08/synapse-1-52-released/">Synapse
1.52</a>, they allow
modules a better control over the user registration process.</p>
<p>The two other module callbacks introduced in Synapse 1.54,
<a href="https://matrix-org.github.io/synapse/v1.54/modules/third_party_rules_callbacks.html#on_profile_update"><code>on_profile_update</code></a>
and
<a href="https://matrix-org.github.io/synapse/v1.54/modules/third_party_rules_callbacks.html#on_user_deactivation_status_changed"><code>on_user_deactivation_status_changed</code></a>,
allow modules to react to profile changes, as well as the deactivation (or
reactivation) of users.</p>
<h2 id="everything-else">Everything else</h2>
<p>This release of Synapse also includes more work to make joining large Matrix
rooms faster (I was telling you about that in the <a href="https://matrix.org/blog/2022/02/22/synapse-1-53-released">Synapse 1.53 release
announcement</a>). While
it's still very experimental and not yet ready for show time, it's still very
exciting to see this work happening!</p>
<p>Synapse 1.54 also includes a change to the <a href="https://spec.matrix.org/latest/client-server-api/#get_matrixclientversions">client-side versions
endpoint</a>
to advertise Matrix 1.1 and 1.2. See the <a href="https://matrix.org/blog/2022/02/02/matrix-v-1-2-release">Matrix
1.2</a> release
announcement to read all about the changes this latest version of the
specification brings to the ecosystem.</p>
<p>See the <a href="https://github.com/matrix-org/synapse/releases/tag/v1.54.0">full
changelog</a> for a
complete list of changes in this release. Also please have a look at the
<a href="https://matrix-org.github.io/synapse/v1.54/upgrade#upgrading-to-v1540">upgrade
notes</a>
for this version.</p>
<p>Synapse is a Free and Open Source Software project, and we'd like to extend our
thanks to everyone who contributed to this release, including (in no particular
order) <a href="https://github.com/dklimpel">Dirk Klimpel</a>, <a href="https://github.com/AndrewRyanChama">Andrew
Ryan</a>, and
<a href="https://github.com/lukasdenk">lukasdenk</a>.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2022&#x2F;02&#x2F;22&#x2F;synapse-1-53-released&#x2F;" title="Synapse 1.53 released">Synapse 1.53 released</a></h2>
                <span>
                    22.02.2022 14:53
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/brendan-abolivier">
                        Brendan Abolivier
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Rejoice everyone, <a href="https://github.com/matrix-org/synapse/releases/tag/v1.53.0">Synapse 1.53</a> is out! Let's have a look at what's new with this release.</p>
<h2 id="stabilisation-of-registration-tokens">Stabilisation of registration tokens</h2>
<p>Registration tokens is a feature introduced in <a href="https://github.com/matrix-org/synapse/releases/tag/v1.42.0">Synapse 1.42.0</a>, which allows homeserver administrators to force their users to use specific tokens when registering. This is similar to Synapse's <a href="https://github.com/matrix-org/synapse/blob/6f440fd859c411af8c32478b4353f7550619c3bd/docs/sample_config.yaml#L1291-L1294">registration shared secret</a> support, but with added features, such as the possibility to limit how users can be registered with the same token, or to make a token expire. See <a href="https://matrix-org.github.io/synapse/v1.53/usage/administration/admin_api/registration_tokens.html">the admin API documentation</a> for more information on how to manage registration tokens on your homeserver.</p>
<p>Registration tokens were initially proposed to the Matrix specification in <a href="https://github.com/matrix-org/matrix-doc/pull/3231">MSC3231</a> by <a href="https://github.com/govynnus">Callum Brown</a> during their Google Summer of Code internship last summer. The MSC has since been accepted, and released in the stable Matrix specification as of <a href="https://matrix.org/blog/2022/02/02/matrix-v-1-2-release">Matrix v1.2</a>. As a result, its Synapse implementation has been updated to remove support for unstable identifiers. Administrators of homeservers on which the reverse proxy rules explicitly allow the unstable route for this feature need to update their configuration. Same goes for developers of Matrix clients that support this feature. See the <a href="https://matrix-org.github.io/synapse/v1.53/upgrade#stablisation-of-msc3231">upgrade notes</a> for more information.</p>
<h2 id="time-based-cache-expiry-now-enabled-by-default">Time-based cache expiry now enabled by default</h2>
<p>To avoid being overly intensive on resources by making too many queries to the database, Synapse maintains several in-memory caches to store data it needs to use frequently. However, this comes with the inconvenience that, if Synapse needs to store too much data, these caches can become fairly big and occupy too much space in the host's memory.</p>
<p>Historically, Synapse has dealt with this issue by having set sizes for each cache, either hardcoded or set in the configuration, and evicting the oldest items when exceeding this size. <a href="https://github.com/matrix-org/synapse/releases/tag/v1.38.0">Synapse 1.38</a> introduced the possibility for homeserver administrators to configure Synapse to evict cache entries based on the time they were last accessed on. This mechanism acts on top of the aforementioned eviction policy, and allows automatically evicting entries that haven't been accessed for some time, leaving more room in the caches to store data that needs to be accessed more often.</p>
<p>Synapse 1.53 enables this behaviour by default. Without specific configuration, Synapse will automatically evict cache entries that haven't been accessed for more than 30 minutes. Server administrators that were already using this feature might need to update their configuration, as this change deprecates the <code>expiry_time</code> configuration setting, which will be removed in a future version of Synapse. See the <a href="https://matrix-org.github.io/synapse/v1.53/upgrade#time-based-cache-expiry-is-now-enabled-by-default">upgrade notes</a> for more information.</p>
<h2 id="everything-else">Everything else</h2>
<p>You might have heard that we're working on improving the time it takes to join big Matrix rooms with Synapse. If not, then you definitely want to have a look at <a href="https://youtu.be/yxV73TQAodE?t=1095">the demos Matrix live</a> that was published earlier this month and includes more details and a demo of the work we've been doing in this area.</p>
<p>This release of Synapse includes an implementation of <a href="https://github.com/matrix-org/matrix-doc/pull/3706">MSC3706</a>, which is part of this work. It's still very experimental and definitely not production-ready, but it's a huge stepping stone towards making room joins snappier than ever.</p>
<p>We've also been continuing our work towards enabling end-to-end encryption for application services (see the <a href="https://matrix.org/blog/2022/01/18/synapse-1-50-released">Synapse 1.50 release blogpost</a> for more context on that). Synapse 1.53 includes support for sending to-device messages to application services. This is also still very experimental, watch this space for future updates.</p>
<p>See the <a href="https://github.com/matrix-org/synapse/releases/tag/v1.53.0">full changelog</a> for a complete list of changes in this release. Also please have a look at the <a href="https://matrix-org.github.io/synapse/v1.53/upgrade#upgrading-to-v1530">upgrade notes</a> for this version.</p>
<p>Synapse is a Free and Open Source Software project, and we'd like to extend our thanks to everyone who contributed to this release, including (in no particular order) <a href="https://github.com/dklimpel">Dirk Klimpel</a>, <a href="https://github.com/bradjones1">Brad Jones</a>, and <a href="https://github.com/a-mnich">Alexander Mnich</a>.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2022&#x2F;02&#x2F;08&#x2F;synapse-1-52-released&#x2F;" title="Synapse 1.52 released">Synapse 1.52 released</a></h2>
                <span>
                    08.02.2022 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/brendan-abolivier">
                        Brendan Abolivier
                    </a>
                </span>
                
            </header>
            <div>
                
                <p><a href="https://github.com/matrix-org/synapse/releases/tag/v1.52.0">Synapse 1.52</a> is out! Here's what's new with this week's release.</p>
<h2 id="twisted-security-release">Twisted security release</h2>
<p>The team behind <a href="https://twistedmatrix.com/">Twisted</a>, which is the main framework Synapse uses under the hood, recently released <a href="https://github.com/twisted/twisted/releases/tag/twisted-22.1.0">Twisted 22.1</a>. This version fixes a <a href="https://github.com/twisted/twisted/security/advisories/GHSA-92x2-jw7w-xvvx">security vulnerability</a> within the Twisted library.</p>
<p>While preparing the release of Synapse 1.52, we have investigated the impact of this vulnerability on Synapse. We came to the conclusion that it does not affect Synapse. We however advise server administrators to ensure they use an up-to-date version of the library as a matter of good practice.</p>
<p>For instances installed with <code>pip</code>, the library can be updated with <code>pip install --upgrade Twisted treq</code>. For instances installed with the <code>matrixdotorg/synapse</code> Docker image or Debian packages from <code>packages.matrix.org</code>, updating to Synapse 1.52.0 is sufficient, as these images and packages include up-to-date versions of all dependencies.</p>
<p>It is also worth noting that a release candidate for <a href="https://github.com/twisted/twisted/releases/tag/twisted-22.2.0rc1">Twisted 22.2</a> has been published, with a fix for a potential denial of service vulnerability with SSH. Administrators of Synapse homeservers that have the <a href="https://matrix-org.github.io/synapse/v1.52/manhole.html">manhole</a> feature enabled (which is the only feature of Synapse using SSH) are encouraged to ensure access to the manhole is correctly restricted (e.g. by preventing access from external locations).</p>
<h2 id="federation-admin-apis">Federation admin APIs</h2>
<p>This release of Synapse introduces a few admin APIs to help server administrators monitor and handle how their Synapse homeserver interacts with other federated homeservers. <a href="https://matrix-org.github.io/synapse/v1.52/usage/administration/admin_api/federation.html#destination-rooms">One of these APIs</a> offers server administrators a way to visualise which rooms are shared between the local homeserver and a given remote one.</p>
<p>Another API allows server administrators to <a href="https://matrix-org.github.io/synapse/v1.52/usage/administration/admin_api/federation.html#reset-connection-timeout">reset federation timeouts</a>. If Synapse fails to connect to a remote homeserver, it will make note of the failure and will not retry the connection after a certain amount of time. This can happen if the remote homeserver goes offline or experiences connectivity issues. Synapse has a few ways of figuring out whether a remote homeserver has come back online, but this new admin API adds a way for administrators to manually tell Synapse a destination should be available.</p>
<h2 id="everything-else">Everything else</h2>
<p>This release also improves Synapse's deactivation behaviour by deleting account data when deactivating a user. &quot;Account data&quot; refers to private arbitrary data that is specific to an account. It is used among other things for secure server-side storage (SSSS) which allows securely backing up end-to-end encryption keys.</p>
<p>Please see the Synapse <a href="https://github.com/matrix-org/synapse/blob/v1.52.0/CHANGES.md">release notes</a> for a complete list of changes in this release.</p>
<p>Synapse is a Free and Open Source Software project, and we'd like to extend our thanks to everyone who contributed to this release, including (in no particular order) <a href="https://github.com/dklimpel">Dirk Klimpel</a>, <a href="https://github.com/totallynotvaishnav">Vaishnav Nair</a>, <a href="https://github.com/sequentialread">SequentialRead Software</a> and <a href="https://github.com/Fizzadar">Nick Barrett from Beeper</a>.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2022&#x2F;02&#x2F;02&#x2F;matrix-v1-2-release&#x2F;" title="Matrix v1.2 release">Matrix v1.2 release</a></h2>
                <span>
                    02.02.2022 18:57
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/travis-ralston">
                        Travis Ralston
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hey all,</p>
<p>Welcome to the second installment of our quarterly spec releases. If it feels like it hasn’t been long since our last release, you’re not alone! Our <a href="https://matrix.org/blog/2021/11/09/matrix-v-1-1-release">last release</a> was just 3 months ago, introducing the new platform and world we build within.</p>
<p>This improvement in speed might seem <em>too</em> fast, but fret not: implementations are not expected to update as soon as the new spec is published. Rather, it is more realistic to expect that the ecosystem gradually update over the course of the following few months/year. Particularly after the massive release that was v1.1.</p>
<p>So, what’s new in v1.2? With 18 MSCs merged there’s a lot to cover - we’ve picked some notable highlights and recommend the full changelog at the bottom for a complete idea of what’s been going on.</p>
<h2 id="rearchitecting-with-spaces">Rearchitecting with Spaces</h2>
<p>Spaces launched into beta <a href="https://matrix.org/blog/2021/05/17/the-matrix-space-beta">last May</a>, redefining how we can use rooms on Matrix to represent different data structures. Described mostly as <a href="https://github.com/matrix-org/matrix-doc/pull/1772">MSC1772</a>, Spaces are simply rooms with a specific <a href="https://spec.matrix.org/v1.2/client-server-api/#rooms-1">type in their m.room.create event</a>. With state events being used to define which other rooms (meaning Spaces too) are part of that Space, the possibilities for tree-like structured data become endless.</p>
<p>There’s still quite a lot of work to do in the Spaces space (hah), though we’re excited to see it all land. For instance, <a href="https://github.com/matrix-org/matrix-doc/pull/3216">MSC3216</a> and <a href="https://github.com/matrix-org/matrix-doc/pull/2962">MSC2962</a> target power level syncing, <a href="https://github.com/matrix-org/matrix-doc/pull/3219">MSC3219</a> aims for flair, and <a href="https://github.com/matrix-org/matrix-doc/pull/3089">MSC3089</a> looks at file structures using Spaces. We might even be able to replace the public room directory with a server-wide space, making writing clients a little bit easier.</p>
<h2 id="public-but-not-too-public-join-rules">Public, but not <em>too</em> public, join rules</h2>
<p><a href="https://spec.matrix.org/v1.2/client-server-api/#restricted-rooms">Restricted rooms</a> are new in this release from <a href="https://github.com/matrix-org/matrix-doc/pull/3083">MSC3083</a>. In these rooms (<em>and therefore Spaces too!</em>), the join rules can be configured such that a member of another room can join without needing an invite. In a typical setup, this means that a Space could be set as invite-only, but all the rooms and Spaces underneath that Space could allow joins for members of the parent Space. When someone wishes to explore the universe you’ve laid out in your Space they can simply join the interesting rooms without having to ask for invites <em>constantly</em>.</p>
<p>This feature changes how membership events are authorized, so is only available in room versions 8 and 9 (both introduced in this release). Room version 9 fixes a relatively rare bug from version 8, so we’d recommend using v9 if you’re planning an upgrade for this functionality.</p>
<p>Further work in this area involves figuring out how to keep membership lists perfectly in sync between the rooms, which is currently done by external tooling. For example, evicting someone from the parent Space could (optionally) evict the user from all the subsequent rooms and Spaces too.</p>
<p>We also need to figure out how to support both knocking and restricted rooms at the same time (oops). <a href="https://github.com/matrix-org/matrix-doc/pull/3613">MSC3613</a> and <a href="https://github.com/matrix-org/matrix-doc/pull/3386">MSC3386</a> both tackle this problem in different ways and timescales.</p>
<h2 id="matrix-a-uri">Matrix: A URI</h2>
<p>A massive shoutout goes to kitsune and the whole community for working on <a href="https://github.com/matrix-org/matrix-doc/pull/2312">MSC2312</a>, giving us a URI we can pass around outside of Matrix to bring us back in. The early work on this <a href="https://github.com/matrix-org/matrix-doc/issues/455">dates all the way back to 2014</a>, the very beginning of Matrix’s development, and has since been <a href="https://www.iana.org/assignments/uri-schemes/prov/matrix">marked Provisional</a> by the IANA.</p>
<p>The full spec is available <a href="https://spec.matrix.org/v1.2/appendices/#uris">here</a> - feel free to discuss it at <a href="matrix:r/matrix-spec:matrix.org">matrix:r/matrix-spec:matrix.org</a> ;)</p>
<h2 id="the-full-changelog">The full changelog</h2>
<p>MSCs are how the spec changes in the way it does - adding, fixing, and maintaining features for the whole ecosystem to use. The blog post can’t cover them all, but that doesn’t make them any less important! Check out the full changelog below, and the <a href="https://spec.matrix.org/unstable/proposals/">Spec Change Proposals</a> page for more information on how these MSCs got merged (hint: they submitted a proposal, which anyone can do - take a look at the <a href="https://www.youtube.com/watch?v=SFkZz60RRfc">Matrix Live episode</a> where Matthew covers the proposal process).</p>
<!-- Intentionally blank line to ensure headers work in the concatenated changelog -->
<h3 id="client-server-api">Client-Server API</h3>
<p><strong>Breaking Changes</strong></p>
<ul>
<li>The <code>prev_content</code> field is now returned inside the <code>unsigned</code> property of events, rather than at the top level, as per <a href="https://github.com/matrix-org/matrix-doc/pull/3442">MSC3442</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3524">#3524</a>)</li>
<li>The <code>aliases</code> property from the chunks returned by <code>/publicRooms</code>, as per <a href="https://github.com/matrix-org/matrix-doc/pull/2432">MSC2432</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3624">#3624</a>)</li>
</ul>
<p><strong>New Endpoints</strong></p>
<ul>
<li>Add the Space Hierarchy API (<code>GET /_matrix/client/v1/rooms/{roomId}/hierarchy</code>) as per <a href="https://github.com/matrix-org/matrix-doc/pull/2946">MSC2946</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3610">#3610</a>)</li>
<li>Add <code>/_matrix/client/v1/register/m.login.registration_token/validity</code> as per <a href="https://github.com/matrix-org/matrix-doc/pull/3231">MSC3231</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3616">#3616</a>)</li>
</ul>
<p><strong>Backwards Compatible Changes</strong></p>
<ul>
<li>Extend <code>/_matrix/client/r0/login</code> to accept a <code>m.login.appservice</code>, as per <a href="https://github.com/matrix-org/matrix-doc/pull/2778">MSC2778</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3324">#3324</a>)</li>
<li>Add support for <code>restricted</code> rooms as per <a href="https://github.com/matrix-org/matrix-doc/pull/3083">MSC3083</a>, <a href="https://github.com/matrix-org/matrix-doc/pull/3289">MSC3289</a>, and <a href="https://github.com/matrix-org/matrix-doc/pull/3375">MSC3375</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3387">#3387</a>)</li>
<li>Add <code>is_guest</code> to <code>/account/whoami</code> as per <a href="https://github.com/matrix-org/matrix-doc/pull/3069">MSC3069</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3605">#3605</a>)</li>
<li>Expand guest access to sending any room event and state event as per <a href="https://github.com/matrix-org/matrix-doc/pull/3419">MSC3419</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3605">#3605</a>)</li>
<li>Add Spaces and room types as per <a href="https://github.com/matrix-org/matrix-doc/pull/1772">MSC1772</a> and <a href="https://github.com/matrix-org/matrix-doc/pull/2946">MSC2946</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3610">#3610</a>)</li>
<li>Add new <code>m.set_displayname</code>, <code>m.set_avatar_url</code>, and <code>m.3pid_changes</code> capabilities as per <a href="https://github.com/matrix-org/matrix-doc/pull/3283">MSC3283</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3614">#3614</a>)</li>
<li>Add support for fallback keys (optional keys used once one-time keys run out), as per <a href="https://github.com/matrix-org/matrix-doc/pull/2732">MSC2732</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3615">#3615</a>)</li>
<li>Add token-authenticated registration support as per <a href="https://github.com/matrix-org/matrix-doc/pull/3231">MSC3231</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3616">#3616</a>)</li>
</ul>
<p><strong>Spec Clarifications</strong></p>
<ul>
<li>Make <code>AesHmacSha2KeyDescription</code> consistent with <code>KeyDescription</code> in marking <code>name</code> as optional. (<a href="https://github.com/matrix-org/matrix-doc/issues/3481">#3481</a>)</li>
<li>Fix various typos throughout the specification. (<a href="https://github.com/matrix-org/matrix-doc/issues/3482">#3482</a>, <a href="https://github.com/matrix-org/matrix-doc/issues/3495">#3495</a>, <a href="https://github.com/matrix-org/matrix-doc/issues/3509">#3509</a>, <a href="https://github.com/matrix-org/matrix-doc/issues/3535">#3535</a>, <a href="https://github.com/matrix-org/matrix-doc/issues/3591">#3591</a>, <a href="https://github.com/matrix-org/matrix-doc/issues/3601">#3601</a>, <a href="https://github.com/matrix-org/matrix-doc/issues/3611">#3611</a>, <a href="https://github.com/matrix-org/matrix-doc/issues/3671">#3671</a>, <a href="https://github.com/matrix-org/matrix-doc/issues/3680">#3680</a>)</li>
<li>Explicitly mention RFC5870 in the definition of <code>m.location</code> events (<a href="https://github.com/matrix-org/matrix-doc/issues/3492">#3492</a>)</li>
<li>Add <code>403 M_FORBIDDEN</code> error code to <code>/profile/{userId}</code> as per <a href="https://github.com/matrix-org/matrix-doc/pull/3550">MSC3550</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3530">#3530</a>)</li>
<li>Clarify the description of the <code>/sync</code> API, including a fix to an ASCII art diagram. (<a href="https://github.com/matrix-org/matrix-doc/issues/3543">#3543</a>)</li>
<li>Clarify that <code>base_url</code> in client <code>well_known</code> may or may not include trailing slash. (<a href="https://github.com/matrix-org/matrix-doc/issues/3562">#3562</a>)</li>
<li>Clarify which signature to check when decrypting <code>m.olm.v1.curve25519-aes-sha2</code> messages. (<a href="https://github.com/matrix-org/matrix-doc/issues/3573">#3573</a>)</li>
<li>Clarify what &quot;Stripped State&quot; is and what purpose it serves, as per <a href="https://github.com/matrix-org/matrix-doc/pull/3173">MSC3173</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3606">#3606</a>)</li>
<li>Clarify how to interpret missing one-time key counts. (<a href="https://github.com/matrix-org/matrix-doc/issues/3636">#3636</a>)</li>
<li>Correct the schema for the responses  for various API endpoints. (<a href="https://github.com/matrix-org/matrix-doc/issues/3650">#3650</a>)</li>
<li>Clarify that group mentions are no longer in the specification. (<a href="https://github.com/matrix-org/matrix-doc/issues/3652">#3652</a>)</li>
<li>Distinguish between &quot;federation&quot; event format as exchanged by the Federation API, and the &quot;client&quot; event formats as used in the client-server and AS APIs. (<a href="https://github.com/matrix-org/matrix-doc/issues/3658">#3658</a>)</li>
<li>Fix the rendering of the responses for various API endpoints. (<a href="https://github.com/matrix-org/matrix-doc/issues/3674">#3674</a>)</li>
</ul>
<h3 id="server-server-api">Server-Server API</h3>
<p><strong>New Endpoints</strong></p>
<ul>
<li>Add the Space Hierarchy API (<code>GET /_matrix/federation/v1/hierarchy/{roomId}</code>) as per <a href="https://github.com/matrix-org/matrix-doc/pull/2946">MSC2946</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3610">#3610</a>, <a href="https://github.com/matrix-org/matrix-doc/issues/3660">#3660</a>)</li>
</ul>
<p><strong>Backwards Compatible Changes</strong></p>
<ul>
<li>Add support for <code>restricted</code> rooms as per <a href="https://github.com/matrix-org/matrix-doc/pull/3083">MSC3083</a>, <a href="https://github.com/matrix-org/matrix-doc/pull/3289">MSC3289</a>, and <a href="https://github.com/matrix-org/matrix-doc/pull/3375">MSC3375</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3387">#3387</a>)</li>
</ul>
<p><strong>Spec Clarifications</strong></p>
<ul>
<li>Fix various typos throughout the specification. (<a href="https://github.com/matrix-org/matrix-doc/issues/3527">#3527</a>)</li>
<li>Clarify that <code>GET /_matrix/federation/v1/event_auth/{roomId}/{eventId}</code> does <em>not</em> return the auth chain for the full state of the room. (<a href="https://github.com/matrix-org/matrix-doc/issues/3583">#3583</a>)</li>
<li>Fix the rendering of the responses for various API endpoints. (<a href="https://github.com/matrix-org/matrix-doc/issues/3674">#3674</a>)</li>
</ul>
<h3 id="application-service-api">Application Service API</h3>
<p><strong>Spec Clarifications</strong></p>
<ul>
<li>Distinguish between &quot;federation&quot; event format as exchanged by the Federation API, and the &quot;client&quot; event formats as used in the client-server and AS APIs. (<a href="https://github.com/matrix-org/matrix-doc/issues/3658">#3658</a>)</li>
<li>Fix the rendering of the responses for various API endpoints. (<a href="https://github.com/matrix-org/matrix-doc/issues/3674">#3674</a>)</li>
<li>Correct the documentation for the response value for <code>GET /_matrix/app/v1/thirdparty/protocol/{protocol}</code>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3675">#3675</a>)</li>
</ul>
<h3 id="identity-service-api">Identity Service API</h3>
<p><strong>Backwards Compatible Changes</strong></p>
<ul>
<li>Add the <code>room_type</code> to stored invites as per <a href="https://github.com/matrix-org/matrix-doc/pull/3288">MSC3288</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3610">#3610</a>)</li>
</ul>
<p><strong>Spec Clarifications</strong></p>
<ul>
<li>Fix the rendering of the responses for various API endpoints. (<a href="https://github.com/matrix-org/matrix-doc/issues/3674">#3674</a>)</li>
</ul>
<h3 id="push-gateway-api">Push Gateway API</h3>
<p><strong>Spec Clarifications</strong></p>
<ul>
<li>Fix the rendering of the responses for various API endpoints. (<a href="https://github.com/matrix-org/matrix-doc/issues/3674">#3674</a>)</li>
</ul>
<h3 id="room-versions">Room Versions</h3>
<p><strong>Backwards Compatible Changes</strong></p>
<ul>
<li>Add Room Version 8 as per <a href="https://github.com/matrix-org/matrix-doc/pull/3289">MSC3289</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3387">#3387</a>)</li>
<li>Add Room Version 9 as per <a href="https://github.com/matrix-org/matrix-doc/pull/3375">MSC3375</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3387">#3387</a>)</li>
</ul>
<p><strong>Spec Clarifications</strong></p>
<ul>
<li>Fully specify room versions to indicate what exactly is carried over from parent versions. (<a href="https://github.com/matrix-org/matrix-doc/issues/3432">#3432</a>, <a href="https://github.com/matrix-org/matrix-doc/issues/3661">#3661</a>)</li>
<li>Clarifications to sections on event IDs and event formats. (<a href="https://github.com/matrix-org/matrix-doc/issues/3501">#3501</a>)</li>
<li>Remove a number of fields which were incorrectly shown to form part of the <code>unsigned</code> data of a Federation PDU. (<a href="https://github.com/matrix-org/matrix-doc/issues/3522">#3522</a>)</li>
<li>Fix heading order of room version specifications to be consistent. (<a href="https://github.com/matrix-org/matrix-doc/issues/3683">#3683</a>)</li>
<li>Add missing &quot;Signing key validity period&quot; section to room version 6. (<a href="https://github.com/matrix-org/matrix-doc/issues/3683">#3683</a>)</li>
<li>Fix auth rules to allow membership of <code>knock</code> -&gt; <code>leave</code> in v7, v8, and v9. (<a href="https://github.com/matrix-org/matrix-doc/issues/3694">#3694</a>)</li>
</ul>
<h3 id="appendices">Appendices</h3>
<p><strong>Backwards Compatible Changes</strong></p>
<ul>
<li>Describe &quot;Common Namespaced Identifier Grammar&quot; as per <a href="https://github.com/matrix-org/matrix-doc/pull/2758">MSC2758</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3171">#3171</a>)</li>
<li>Describe the <code>matrix:</code> URI scheme as per <a href="https://github.com/matrix-org/matrix-doc/pull/2312">MSC2312</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/3608">#3608</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2022&#x2F;01&#x2F;25&#x2F;synapse-1-51-released&#x2F;" title="Synapse 1.51 released">Synapse 1.51 released</a></h2>
                <span>
                    25.01.2022 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/brendan-abolivier">
                        Brendan Abolivier
                    </a>
                </span>
                
            </header>
            <div>
                
                <p><a href="https://github.com/matrix-org/synapse/releases/tag/v1.51.0">Synapse 1.51</a> is out! Here's what's new with this week's release.</p>
<h2 id="deprecation-of-the-webclient-listener">Deprecation of the <code>webclient</code> listener</h2>
<p>A long time ago, Synapse used to serve a very basic web Matrix client (named &quot;console&quot;) that could be used to connect to the homeserver. Server administrators could chose to make it available to their users by configuring a <code>webclient</code> listener.</p>
<p>This web client was removed in <a href="https://github.com/matrix-org/synapse/releases/tag/v0.34.0">Synapse 0.34</a> back in 2018, but the <code>webclient</code> listener stayed, instead allowing server admins to serve the web client of their choice (or redirect to it) through the <code>web_client_location</code> configuration file.</p>
<p>Synapse 1.53 will remove the <code>webclient</code> listener, as well as the ability to set <code>web_client_location</code> to a static directory (instead of a HTTP(S) URL). See the <a href="https://matrix-org.github.io/synapse/develop/upgrade#upgrading-to-v1510">upgrade notes</a> for more information.</p>
<h2 id="aggregations-and-sync">Aggregations and sync</h2>
<p>The concept of server-side aggregation in Matrix is defined in <a href="https://github.com/matrix-org/matrix-doc/pull/2675">MSC2675</a> and is the ability for homeservers to extend the information included in an event using other events that relate to it. This allows, for example, clients to quickly retrieve the reactions associated with a given message, or its latest edit.</p>
<p>This release includes a number of notable performance improvements to calculating aggregations when responding to <code>/sync</code> requests. We continue to measure and investigate potential performance improvements in this area, which should end up greatly benefiting <code>/sync</code> response times.</p>
<h2 id="fosdem">FOSDEM</h2>
<p><a href="https://fosdem.org">FOSDEM</a>, one of the biggest gatherings around free and open-source software in the world, is happening next week! Just like last year, the conference will happen online and will be hosted on Matrix. And just like last year, it will be packed with super interesting Matrix-related (but not only) talks.</p>
<p>One new addition this year is the presence of a whole devroom dedicated to Matrix. It will be hosted on February 6th, and you can already find its whole schedule of talks <a href="https://fosdem.org/2022/schedule/track/matrixorg_foundation_and_community/">right here</a>.</p>
<p>The Synapse team will be giving a couple of talks during the day: <a href="https://fosdem.org/2022/schedule/event/matrix_events_uninitiatied/">Events for the Uninitiated</a> by Shay at 11:10, and <a href="https://fosdem.org/2022/schedule/event/matrix_extend_synapse/">Beyond the Matrix: Extend the capabilities of your Synapse homeserver</a> by yours truly at 16:40 (all times CET). Come say hi! 🙂</p>
<h2 id="everything-else">Everything else</h2>
<p>This release includes a couple of spaces-related bug fixes, specifically related to the <code>/_matrix/client/v1/room/{roomId}/hierarchy</code> API. One of them in particular targets a bug in spaces that include more than 50 rooms, and should make it much easier to look for a specific room inside a space.</p>
<p>The <code>synapse_review_recent_signups</code> script, which allows homeserver administrators to review recent signups (e.g. in the event of a spam attack), was also improved with an option to exclude virtual users belonging to an application service from the results. See <code>synapse_review_recent_signups --help</code> for more information.</p>
<p>Please see the Synapse <a href="https://github.com/matrix-org/synapse/blob/v1.51.0/CHANGES.md">release notes</a> for a complete list of changes in this release.</p>
<p>Synapse is a Free and Open Source Software project, and we'd like to extend our thanks to everyone who contributed to this release, including (in no particular order) <a href="https://github.com/dklimpel">Dirk Klimpel</a>, <a href="https://github.com/br4nnigan">br4nnigan</a>, <a href="https://github.com/blastrock">Philippe Daouadi</a>, <a href="https://github.com/dsonck92">Daniël Sonck</a> and <a href="https://github.com/AndrewFerr">AndrewFerr</a>.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2022&#x2F;01&#x2F;18&#x2F;synapse-1-50-released&#x2F;" title="Synapse 1.50 released">Synapse 1.50 released</a></h2>
                <span>
                    18.01.2022 18:34
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/brendan-abolivier">
                        Brendan Abolivier
                    </a>
                </span>
                <br>
                <small>Last update: 18.01.2022 17:58</small>
            </header>
            <div>
                
                <p>Welcome all for the first Synapse release of 2022: <a href="https://github.com/matrix-org/synapse/releases/tag/v1.50.0">Synapse 1.50</a>!</p>
<blockquote>
<p>Note that, as per our <a href="https://matrix-org.github.io/synapse/v1.50/deprecation_policy.html">platform dependency deprecation policy</a>, Synapse no longer supports Python 3.6 and PostgreSQL 9.6 as of this version. As a result, we have also stopped shipping Debian packages for Ubuntu 18.04 LTS (Bionic Beaver), as it ships with Python 3.6.</p>
<p>As a reminder, please note that Ubuntu 21.04 (Hirsute Hippo) reaches its own end of life <a href="https://lists.ubuntu.com/archives/ubuntu-announce/2021-December/000275.html">on January 20, 2022</a>. Past this date we will stop producing new packages for Ubuntu 21.04.</p>
</blockquote>
<h2 id="encrypted-application-services">Encrypted application services</h2>
<p>Application services (sometimes called &quot;appservices&quot;), are privileged processes that can interact with a Matrix homeserver in a way a normal user cannot. This is especially useful for bridges, as it allows them to register and puppet multiple users on the homeserver to replicate activity from other platforms.</p>
<p>One of the main shortcomings of application services currently is that they do not support end-to-end encryption. This means that messages sent through a bridge are never encrypted and always visible by the homeserver.</p>
<p>We've recently started work to tackle this issue in the form of <a href="https://github.com/matrix-org/matrix-doc/pull/3202">MSC3202</a>. A first part of implementing this MSC (allowing application services to masquerade as specific devices) has landed in this release of Synapse; work is still ongoing towards a full implementation, so watch this space!</p>
<h2 id="improved-reliability-on-device-list-updates">Improved reliability on device list updates</h2>
<p>While working on this release, we identified a long-standing bug that could prevent Synapse from sending device lists update over federation if the server had a high number of active users and/or users with a lot of devices connected to their account.</p>
<p>This bug was introduced back in <a href="https://github.com/matrix-org/synapse/releases/tag/v1.0.0">Synapse 1.0.0</a>, and meant that the homeserver would miss some device list updates when communicating with other homeservers if the amount of updates to send was too high. In practice, this means users on remote homeservers could see outdated device information for other users (including outdated device verification statuses).</p>
<p>Synapse 1.50 includes a fix to this bug. This should contribute towards making the propagation of device list updates more reliable.</p>
<h2 id="everything-else">Everything else</h2>
<p>This release introduces support for <a href="https://github.com/matrix-org/matrix-doc/pull/3419">MSC3419</a>, which allows guest users to send arbitrary state events into a room. This will be especially useful to the ongoing work on <a href="https://github.com/matrix-org/matrix-doc/pull/3401">group VoIP calls</a>, which involves having users send new state events into the room to signal their participation in a call.</p>
<p>We've also stabilised identifiers for cross-signing and fallback keys now that <a href="https://github.com/matrix-org/matrix-doc/pull/1756">MSC1756</a> and <a href="https://github.com/matrix-org/matrix-doc/pull/2732">MSC2732</a> have been merged into the Matrix spec.</p>
<p>On the documentation side of things, the <a href="https://matrix-org.github.io/synapse/v1.50/turn-howto.html">page</a> on setting up and configuring a TURN server has been updated to feature instructions on how to deal with NATs. This is a much welcome addition as configuring TURN is something a lot of Synapse admins struggle with!</p>
<p>Please see the Synapse <a href="https://github.com/matrix-org/synapse/blob/v1.50.0/CHANGES.md">release notes</a> for a complete list of changes in this release.</p>
<p>Synapse is a Free and Open Source Software project, and we'd like to extend our thanks to everyone who contributed to this release, including <a href="https://github.com/dklimpel">Dirk Klimpel</a>, <a href="https://github.com/itchychips">Donny Johnson</a> and <a href="https://github.com/AndrewFerr">AndrewFerr</a>.</p>
<blockquote>
<p>Note: An issue preventing client logins (<a href="https://github.com/matrix-org/synapse/issues/11763">#11763</a>) was identified immediately following the release of Synapse 1.50.0. We released <a href="https://github.com/matrix-org/synapse/releases/tag/v1.50.1">Synapse 1.50.1</a> the same day with a fix for this issue.</p>
</blockquote>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2021&#x2F;12&#x2F;14&#x2F;synapse-1-49-0-released&#x2F;" title="Synapse 1.49.0 released">Synapse 1.49.0 released</a></h2>
                <span>
                    14.12.2021 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/brendan-abolivier">
                        Brendan Abolivier
                    </a>
                </span>
                
            </header>
            <div>
                
                <p><a href="https://github.com/matrix-org/synapse/releases/tag/v1.49.0">Synapse 1.49.0</a> is out now!</p>
<h2 id="platform-deprecations">Platform deprecations</h2>
<p>Synapse 1.49.0 is the last version of Synapse to officially support Python 3.6 and PostgreSQL 9.6. This follows our <a href="https://matrix-org.github.io/synapse/v1.49/deprecation_policy.html">platform dependency deprecation policy</a>.</p>
<p>As a consequence of this, Synapse 1.49.0 is the last version of Synapse to support Ubuntu 18.04 LTS (Bionic Beaver), as it ships with Python 3.6.</p>
<p>On the topic of supported Ubuntu releases, please note that Ubuntu 21.04 (Hirsute Hippo) reaches its own end of life <a href="https://lists.ubuntu.com/archives/ubuntu-announce/2021-December/000275.html">on January 20, 2022</a>. Past this date we will stop producing new packages for Ubuntu 21.04.</p>
<h2 id="improved-documentation">Improved documentation</h2>
<p>Up until now, a lot of very useful information was stored on the <a href="https://github.com/matrix-org/synapse/wiki">Synapse repo's wiki</a>, which wasn't well advertised nor well reviewed.</p>
<p>With this release, we have migrated most of this information to Synapse's <a href="https://matrix-org.github.io/synapse/latest">documentation website</a>, so all the information you need to set up, maintain and troubleshoot a Synapse instance lives at the same place. Included in these new pages are the <a href="https://matrix-org.github.io/synapse/v1.49/usage/administration/admin_faq.html">server admin FAQ</a> and a <a href="https://matrix-org.github.io/synapse/v1.49/usage/administration/understanding_synapse_through_grafana_graphs.html">guide to Synapse's Grafana dashboard</a>.</p>
<p>The <a href="https://matrix-org.github.io/synapse/v1.49/media_repository.html">media repository</a> documentation has also been updated with a lot of details about how Synapse stores media files.</p>
<h2 id="refresh-tokens">Refresh tokens</h2>
<p>When a Matrix client needs to authenticate a request to a homeserver, it uses what is called an access token. Sometimes server administrators might not want a user's access token to live forever (e.g. for security reasons). To address this concern, <a href="https://github.com/matrix-org/matrix-doc/pull/2918">MSC2918</a> introduces the concept of refresh tokens to Matrix.</p>
<p>Initial support for refresh tokens in Synapse was introduced in <a href="https://github.com/matrix-org/synapse/releases/tag/v1.38.0">version 1.38.0</a>. Synapse 1.49.0 finalises and stabilises this implementation, allowing any client that supports this feature to use it as it is currently described in the related MSC.</p>
<h2 id="everything-else">Everything else</h2>
<p>This release introduces the last changes needed to Synapse for basic threading support. It also introduces support for <a href="https://github.com/matrix-org/matrix-doc/pull/3030">MSC3030</a>, which allows clients to jump to a specific date in a room's history (expect a sneak peek of this in the next episode of Matrix Live!).</p>
<p>Another interesting point is the addition of a couple of <a href="https://matrix-org.github.io/synapse/v1.49/usage/administration/admin_api/federation.html">admin APIs for federation</a>. More specifically, they allow you to visualise all of the other homeservers your Synapse instance has been interacting with, as well as how successful the last attempts at communicating with them have been.</p>
<p>Please see the Synapse <a href="https://github.com/matrix-org/synapse/blob/v1.49.0/CHANGES.md">release notes</a> for a complete list of changes in this release.</p>
<p>Synapse is a Free and Open Source Software project, and we'd like to extend our thanks to everyone who contributed to this release, including <a href="https://github.com/dklimpel">Dirk Klimpel</a>, <a href="https://github.com/Ma27">Maximilian Bosch</a> and <a href="https://github.com/tulir">Tulir Asokan</a>.</p>
<h2 id="till-next-year">Till next year</h2>
<p>This is the last release of Synapse of 2021! The Synapse team will take a break for the holidays, pushing the next release of Synapse (1.50.0) to January 11, 2022.</p>
<p>We'd like to thank everyone who has been using Synapse, contributing to it, and/or supporting us for the past year, and we hope to see you again in 2022! 🎆</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2021&#x2F;11&#x2F;30&#x2F;synapse-1-48-0-released&#x2F;" title="Synapse 1.48.0 released">Synapse 1.48.0 released</a></h2>
                <span>
                    30.11.2021 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/brendan-abolivier">
                        Brendan Abolivier
                    </a>
                </span>
                
            </header>
            <div>
                
                <p><a href="https://github.com/matrix-org/synapse/releases/tag/v1.48.0">Synapse 1.48.0</a> is out now!</p>
<blockquote>
<p><strong>NOTE:</strong> Synapse 1.49, due out on December 14th, will be the <strong>last release of Synapse to support Python 3.6 or PostgreSQL 9.6</strong> per our <a href="https://matrix-org.github.io/synapse/v1.48/deprecation_policy.html">platform dependency deprecation policy</a>. Accordingly, we will remove support for Ubuntu 18.04 LTS (Bionic) at the same date, as it ships with Python 3.6.</p>
</blockquote>
<h2 id="password-resets-and-identity-servers">Password resets and identity servers</h2>
<p>This release removes the long-deprecated <code>trust_identity_server_for_password_resets</code> configuration option. This option was initially deprecated in <a href="https://github.com/matrix-org/synapse/releases/tag/v1.4.0">Synapse 1.4.0</a> back in October 2019.</p>
<p>Admins of servers still using this configuration option will need to update their Synapse configuration to send password resets through an SMTP server directly rather than relying on identity servers to send them on their behalf.</p>
<h2 id="new-admin-apis-and-improved-alignment-with-matrix-1-1">New <a href="https://matrix-org.github.io/synapse/latest/usage/administration/admin_api/index.html">admin APIs</a> and improved alignment with Matrix 1.1</h2>
<p>This release also introduces a handful of new admin APIs, allowing administrators to <a href="https://matrix-org.github.io/synapse/latest/admin_api/user_admin_api.html#controlling-whether-a-user-is-shadow-banned">un-shadow-ban users</a>, <a href="https://matrix-org.github.io/synapse/latest/admin_api/rooms.html#block-room-api">block a room</a>, and <a href="https://matrix-org.github.io/synapse/latest/usage/administration/admin_api/background_updates.html#run">run specific background updates</a> (but we'll talk about this last one a bit later on). The <a href="https://matrix-org.github.io/synapse/latest/admin_api/rooms.html#delete-room-api">delete room API</a> has also been updated to be able to run in the background or to block a room pre-emptively, even if the server doesn't know about it yet.</p>
<p>This release also brings Synapse into greater alignment with version 1.1 of <a href="https://matrix.org/blog/2021/11/09/matrix-v-1-1-release">the Matrix specification</a> by adding support for API paths beginning <code>/_matrix/client/v3</code> and <code>/_matrix/media/v3</code>.</p>
<h2 id="background-updates">Background updates</h2>
<p>When Synapse updates from one version to another, it might need to run large scale updates on its database. In order to avoid blocking startup for too long while waiting for these updates to run, Synapse runs them in the background after starting.</p>
<p>Lately the Synapse team has been doing some work to improve the performance of these background updates. More specifically, this release includes a <a href="https://github.com/matrix-org/synapse/pull/11421">performance fix</a> for a background update introduced in Synapse 1.47.0, as well as a <a href="https://matrix-org.github.io/synapse/latest/usage/administration/admin_api/background_updates.html#run">new admin API</a> to let admins rerun specific updates.</p>
<p>Future Synapse updates will also include <a href="https://github.com/matrix-org/synapse/pull/11306">module capabilities</a> and <a href="https://github.com/matrix-org/synapse/issues/11260">more configuration options</a> for controlling background updates.</p>
<h2 id="everything-else">Everything else</h2>
<p>This release also includes some improved support of <a href="https://github.com/matrix-org/matrix-doc/pull/3440">MSC3440</a> to help threading. It also adds support for the stable identifiers from <a href="https://github.com/matrix-org/matrix-doc/pull/2778">MSC2778</a>, bringing Synapse closer to supporting end-to-end (or end-to-bridge) encryption support for application services.</p>
<p>We also now publish a Docker image, <code>matrixdotorg/synapse:develop</code>, which tracks the development head of Synapse.</p>
<p>Please see the Synapse <a href="https://github.com/matrix-org/synapse/blob/v1.48.0/CHANGES.md">Release Notes</a> for a complete list of changes in this release.</p>
<p>Synapse is a Free and Open Source Software project, and we'd like to extend our thanks to everyone who contributed to this release, including <a href="https://github.com/dklimpel">Dirk Klimpel</a>, <a href="https://github.com/binarymaster">Stanislav Motylkov</a>, <a href="https://github.com/tulir">Tulir Asokan</a> and <a href="https://github.com/Neeeflix">Neeeflix</a>.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2021&#x2F;11&#x2F;23&#x2F;synapse-1-47-1-released&#x2F;" title="Synapse 1.47.1 released">Synapse 1.47.1 released</a></h2>
                <span>
                    23.11.2021 12:46
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/david-robertson">
                        David Robertson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Today we are releasing Synapse 1.47.1, a security update based on last week's release of <a href="https://matrix.org/blog/2021/11/17/synapse-1-47-0-released">Synapse 1.47.0</a>. This <a href="https://github.com/matrix-org/synapse/releases/tag/v1.47.1">release</a> patches one high severity issue affecting Synapse installations 1.47.0 and earlier using the media repository. An attacker could cause these Synapses to download a remote file and store it in a directory outside the media repository. </p>
<p>Note that:</p>
<ul>
<li>This only affects homeservers using Synapse's built-in media repository, as opposed to <a href="https://github.com/matrix-org/synapse-s3-storage-provider">synapse-s3-storage-provider</a> or <a href="https://github.com/turt2live/matrix-media-repo">matrix-media-repo</a>.</li>
<li>Attackers cannot control the exact name or destination of the stored file.</li>
</ul>
<p>To quote from the advisory:</p>
<blockquote>
<h3 id="ghsa-3hfw-x7gx-437c-cve-2021-41281-path-traversal-when-downloading-remote-media"><a href="https://github.com/matrix-org/synapse/security/advisories/GHSA-3hfw-x7gx-437c">GHSA-3hfw-x7gx-437c</a> / CVE-2021-41281: Path traversal when downloading remote media.</h3>
<h4 id="impact">Impact</h4>
<p>Synapse instances with the media repository enabled can be tricked into downloading a file from a remote server into an arbitrary directory, potentially outside the media store directory.</p>
<p>The last two directories and file name of the path are chosen randomly by Synapse and cannot be controlled by an attacker, which limits the impact.</p>
<p>Homeservers with the media repository disabled are unaffected. Homeservers configured with a federation whitelist are also unaffected.</p>
</blockquote>
<p>The <a href="https://github.com/matrix-org/synapse/security/advisories/GHSA-3hfw-x7gx-437c">advisory</a> has full details, including workarounds.</p>
<p>This issue was discovered and fixed by our internal security team.</p>
<p>Please update at your earliest convenience.</p>

                
            </div>
        </article>
        
        <nav class="pagination">
    <div class="prev">
        
        <a href="&#x2F;category&#x2F;releases&#x2F;page&#x2F;2&#x2F;">‹ Previous</a>
        
    </div>
    <span class="page-number">3 / 14</span>
    <div class="prev">
        
        <a href="&#x2F;category&#x2F;releases&#x2F;page&#x2F;4&#x2F;">Next ›</a>
        
    </div>
</nav>

    </div>
</div>

    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="&#x2F;code"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p>© 2022 The Matrix.org Foundation C.I.C.</p>
</footer>

</body>

</html>
