<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - Releases</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/png" href="/assets/favicon.png" />
    <link rel="stylesheet" href="/style.css" />

    
<link rel="alternate" type="application/rss+xml" title="RSS" href="/category/releases/atom.xml">
</head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            ">
            Blog
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <a href="&#x2F;docs&#x2F;" class="section ">
                Documentation
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                </div>
            </div>
        </div>
        
        
        
        
        
        <div class="section-wrap">
            <a href="&#x2F;ecosystem&#x2F;" class="section ">
                Ecosystem
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bots&#x2F;">Bots</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        
<div id="taxonomy-single">
    <div class="content">
        <header>
            <h1>Releases</h1>
            132 posts tagged with "Releases" <a href="/category">(See all Category)</a>
            
            <h2>
                <small><a href="/category/releases/atom.xml">Atom Feed</a></small>
            </h2>
            
        </header>

        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;07&#x2F;26&#x2F;critical-security-update-synapse-1-2-1-released&#x2F;" title="Critical Security Update - Synapse 1.2.1 released">Critical Security Update - Synapse 1.2.1 released</a></h2>
                <span>
                    26.07.2019 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Today we release Synapse 1.2.1 as a critical security update. It contains patches relating to redactions and event federation. The patches address long standing bugs, and are not regressions specific to the previous version (1.2).  <strong>All admins, regardless of current version, should upgrade asap</strong>.</p>
<p>This release includes <em>four</em> security fixes:</p>
<ul>
<li>Prevent an attack where a federated server could send redactions for arbitrary events in v1 and v2 rooms. (<a href="https://github.com/matrix-org/synapse/issues/5767">#5767</a>)</li>
<li>Prevent a denial-of-service attack where cycles of redaction events would make Synapse spin infinitely. Thanks to <code>@lrizika:matrix.org</code> for identifying and responsibly disclosing this issue. (<a href="https://github.com/matrix-org/synapse/commit/0f2ecb961">0f2ecb961</a>)</li>
<li>Prevent an attack where users could be joined or parted from public rooms without their consent. Thanks to <a href="https://github.com/dylangerdaly">Dylanger</a> for identifying and responsibly disclosing this issue. (<a href="https://github.com/matrix-org/synapse/issues/5744">#5744</a>)</li>
<li>Fix a vulnerability where a federated server could spoof read-receipts from
users on other servers. Thanks to <a href="https://github.com/dylangerdaly">Dylanger</a> for identifying this issue too. (<a href="https://github.com/matrix-org/synapse/issues/5743">#5743</a>)</li>
</ul>
<p>Additionally, the following fix was in Synapse <strong>1.2.0</strong>, but was not correctly
identified during the original release:</p>
<ul>
<li>It was possible for a room moderator to send a redaction for an <code>m.room.create</code> event, which would downgrade the room to version 1. Thanks to <code>@/dev/ponies:ponies.im</code> for identifying and responsibly disclosing this issue! (<a href="https://github.com/matrix-org/synapse/issues/5701">#5701</a>)</li>
</ul>
<p>You can get the new update <a href="https://github.com/matrix-org/synapse/releases/tag/v1.2.1">here</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Alternatively check out our <a href="https://matrix.org/docs/guides/installing-synapse">Synapse installation guide page</a></p>
<p>Thanks for bearing with us.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;07&#x2F;25&#x2F;synapse-1-2-0-released&#x2F;" title="Synapse 1.2.0 released">Synapse 1.2.0 released</a></h2>
                <span>
                    25.07.2019 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hey hey, Synapse 1.2.0 is here. It contains aggregations support, better error handling for  deactivated accounts and some important bug fixes for redacting messages. Special thanks to community members <a href="https://github.com/skalarproduktraum">skalarproduktraum</a> and <a href="https://github.com/Lrizika">Lrizika</a> for submissions to improve our documentation.</p>
<p>As ever, you can get the new update <a href="https://github.com/matrix-org/synapse/releases/tag/v1.2.0">here</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Note, Synapse is now available from PyPI, pick it up <a href="https://pypi.org/project/matrix-synapse/">here</a>. Also, check out our <a href="https://matrix.org/docs/guides/installing-synapse">Synapse installation guide page</a></p>
<p>The changelog since 1.1.0 follows:</p>
<h1 id="synapse-1-2-0-2019-07-25">Synapse 1.2.0 (2019-07-25)</h1>
<p>No significant changes.</p>
<h1 id="synapse-1-2-0rc2-2019-07-24">Synapse 1.2.0rc2 (2019-07-24)</h1>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix a regression introduced in v1.2.0rc1 which led to incorrect labels on some prometheus metrics. (<a href="https://github.com/matrix-org/synapse/issues/5734">#5734</a>)</li>
</ul>
<h1 id="synapse-1-2-0rc1-2019-07-22">Synapse 1.2.0rc1 (2019-07-22)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Add support for opentracing. (<a href="https://github.com/matrix-org/synapse/issues/5544">#5544</a>, <a href="https://github.com/matrix-org/synapse/issues/5712">#5712</a>)</li>
<li>Add ability to pull all locally stored events out of synapse that a particular user can see. (<a href="https://github.com/matrix-org/synapse/issues/5589">#5589</a>)</li>
<li>Add a basic admin command app to allow server operators to run Synapse admin commands separately from the main production instance. (<a href="https://github.com/matrix-org/synapse/issues/5597">#5597</a>)</li>
<li>Add <code>sender</code> and <code>origin_server_ts</code> fields to <code>m.replace</code>. (<a href="https://github.com/matrix-org/synapse/issues/5613">#5613</a>)</li>
<li>Add default push rule to ignore reactions. (<a href="https://github.com/matrix-org/synapse/issues/5623">#5623</a>)</li>
<li>Include the original event when asking for its relations. (<a href="https://github.com/matrix-org/synapse/issues/5626">#5626</a>)</li>
<li>Implement <code>session_lifetime</code> configuration option, after which access tokens will expire. (<a href="https://github.com/matrix-org/synapse/issues/5660">#5660</a>)</li>
<li>Return &quot;This account has been deactivated&quot; when a deactivated user tries to login. (<a href="https://github.com/matrix-org/synapse/issues/5674">#5674</a>)</li>
<li>Enable aggregations support by default (<a href="https://github.com/matrix-org/synapse/issues/5714">#5714</a>)</li>
</ul>
<h2 id="bugfixes-1">Bugfixes</h2>
<ul>
<li>Fix 'utime went backwards' errors on daemonization. (<a href="https://github.com/matrix-org/synapse/issues/5609">#5609</a>)</li>
<li>Various minor fixes to the federation request rate limiter. (<a href="https://github.com/matrix-org/synapse/issues/5621">#5621</a>)</li>
<li>Forbid viewing relations on an event once it has been redacted. (<a href="https://github.com/matrix-org/synapse/issues/5629">#5629</a>)</li>
<li>Fix requests to the <code>/store_invite</code> endpoint of identity servers being sent in the wrong format. (<a href="https://github.com/matrix-org/synapse/issues/5638">#5638</a>)</li>
<li>Fix newly-registered users not being able to lookup their own profile without joining a room. (<a href="https://github.com/matrix-org/synapse/issues/5644">#5644</a>)</li>
<li>Fix bug in #5626 that prevented the original_event field from actually having the contents of the original event in a call to <code>/relations</code>. (<a href="https://github.com/matrix-org/synapse/issues/5654">#5654</a>)</li>
<li>Fix 3PID bind requests being sent to identity servers as <code>application/x-form-www-urlencoded</code> data, which is deprecated. (<a href="https://github.com/matrix-org/synapse/issues/5658">#5658</a>)</li>
<li>Fix some problems with authenticating redactions in recent room versions. (<a href="https://github.com/matrix-org/synapse/issues/5699">#5699</a>, <a href="https://github.com/matrix-org/synapse/issues/5700">#5700</a>, <a href="https://github.com/matrix-org/synapse/issues/5707">#5707</a>)</li>
<li>Ignore redactions of m.room.create events. (<a href="https://github.com/matrix-org/synapse/issues/5701">#5701</a>)</li>
</ul>
<h2 id="updates-to-the-docker-image">Updates to the Docker image</h2>
<ul>
<li>Base Docker image on a newer Alpine Linux version (3.8 -&gt; 3.10). (<a href="https://github.com/matrix-org/synapse/issues/5619">#5619</a>)</li>
<li>Add missing space in default logging file format generated by the Docker image. (<a href="https://github.com/matrix-org/synapse/issues/5620">#5620</a>)</li>
</ul>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Add information about nginx normalisation to reverse_proxy.rst. Contributed by @skalarproduktraum - thanks! (<a href="https://github.com/matrix-org/synapse/issues/5397">#5397</a>)</li>
<li>--no-pep517 should be --no-use-pep517 in the documentation to setup the development environment. (<a href="https://github.com/matrix-org/synapse/issues/5651">#5651</a>)</li>
<li>Improvements to Postgres setup instructions. Contributed by @Lrizika - thanks! (<a href="https://github.com/matrix-org/synapse/issues/5661">#5661</a>)</li>
<li>Minor tweaks to postgres documentation. (<a href="https://github.com/matrix-org/synapse/issues/5675">#5675</a>)</li>
</ul>
<h2 id="deprecations-and-removals">Deprecations and Removals</h2>
<ul>
<li>Remove support for the <code>invite_3pid_guest</code> configuration setting. (<a href="https://github.com/matrix-org/synapse/issues/5625">#5625</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Move logging code out of <code>synapse.util</code> and into <code>synapse.logging</code>. (<a href="https://github.com/matrix-org/synapse/issues/5606">#5606</a>, <a href="https://github.com/matrix-org/synapse/issues/5617">#5617</a>)</li>
<li>Add a blacklist file to the repo to blacklist certain sytests from failing CI. (<a href="https://github.com/matrix-org/synapse/issues/5611">#5611</a>)</li>
<li>Make runtime errors surrounding password reset emails much clearer. (<a href="https://github.com/matrix-org/synapse/issues/5616">#5616</a>)</li>
<li>Remove dead code for persiting outgoing federation transactions. (<a href="https://github.com/matrix-org/synapse/issues/5622">#5622</a>)</li>
<li>Add <code>lint.sh</code> to the scripts-dev folder which will run all linting steps required by CI. (<a href="https://github.com/matrix-org/synapse/issues/5627">#5627</a>)</li>
<li>Move RegistrationHandler.get_or_create_user to test code. (<a href="https://github.com/matrix-org/synapse/issues/5628">#5628</a>)</li>
<li>Add some more common python virtual-environment paths to the black exclusion list. (<a href="https://github.com/matrix-org/synapse/issues/5630">#5630</a>)</li>
<li>Some counter metrics exposed over Prometheus have been renamed, with the old names preserved for backwards compatibility and deprecated. See <code>docs/metrics-howto.rst</code> for details. (<a href="https://github.com/matrix-org/synapse/issues/5636">#5636</a>)</li>
<li>Unblacklist some user_directory sytests. (<a href="https://github.com/matrix-org/synapse/issues/5637">#5637</a>)</li>
<li>Factor out some redundant code in the login implementation. (<a href="https://github.com/matrix-org/synapse/issues/5639">#5639</a>)</li>
<li>Update ModuleApi to avoid register(generate_token=True). (<a href="https://github.com/matrix-org/synapse/issues/5640">#5640</a>)</li>
<li>Remove access-token support from <code>RegistrationHandler.register</code>, and rename it. (<a href="https://github.com/matrix-org/synapse/issues/5641">#5641</a>)</li>
<li>Remove access-token support from <code>RegistrationStore.register</code>, and rename it. (<a href="https://github.com/matrix-org/synapse/issues/5642">#5642</a>)</li>
<li>Improve logging for auto-join when a new user is created. (<a href="https://github.com/matrix-org/synapse/issues/5643">#5643</a>)</li>
<li>Remove unused and unnecessary check for FederationDeniedError in _exception_to_failure. (<a href="https://github.com/matrix-org/synapse/issues/5645">#5645</a>)</li>
<li>Fix a small typo in a code comment. (<a href="https://github.com/matrix-org/synapse/issues/5655">#5655</a>)</li>
<li>Clean up exception handling around client access tokens. (<a href="https://github.com/matrix-org/synapse/issues/5656">#5656</a>)</li>
<li>Add a mechanism for per-test homeserver configuration in the unit tests. (<a href="https://github.com/matrix-org/synapse/issues/5657">#5657</a>)</li>
<li>Inline issue_access_token. (<a href="https://github.com/matrix-org/synapse/issues/5659">#5659</a>)</li>
<li>Update the sytest BuildKite configuration to checkout Synapse in <code>/src</code>. (<a href="https://github.com/matrix-org/synapse/issues/5664">#5664</a>)</li>
<li>Add a <code>docker</code> type to the towncrier configuration. (<a href="https://github.com/matrix-org/synapse/issues/5673">#5673</a>)</li>
<li>Convert <code>synapse.federation.transport.server</code> to <code>async</code>. Might improve some stack traces. (<a href="https://github.com/matrix-org/synapse/issues/5689">#5689</a>)</li>
<li>Documentation for opentracing. (<a href="https://github.com/matrix-org/synapse/issues/5703">#5703</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;07&#x2F;04&#x2F;synapse-1-1-0-released&#x2F;" title="Synapse 1.1.0 released">Synapse 1.1.0 released</a></h2>
                <span>
                    04.07.2019 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Right folks, this is our first post 1.0 release, which means that we have now
officially <a href="https://matrix.org/blog/2019/04/08/synapse-deprecating-postgres-9-4-and-python-2-x">dropped support for Python 2 and Postgres
9.4</a>.
This means that we can start making use of Python 3 specific features and you
should expect lots of associated performance wins over the coming months. See the <a href="https://github.com/matrix-org/synapse/blob/master/UPGRADE.rst#upgrading-to-v110">upgrade notes</a> for more.</p>
<p>Synapse 1.1.0 also contains a reworked approach to the Docker image, as well lots
of performance improvements with special focus on DB IO - expect more to come
in this area.</p>
<p>Special thanks to community member <a href="https://github.com/galexrt">Alexander
Trost</a> for rounding out  our SAML support and also
to <a href="https://github.com/dhoffend">Daniel Hoffend</a> for contributing the ability
to disable local password authentication.</p>
<p>As ever, you can get the new update <a href="https://github.com/matrix-org/synapse/releases/tag/v1.1.0">here</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Note, Synapse is now available from PyPI, pick it up <a href="https://pypi.org/project/matrix-synapse/">here</a>. Also, check out our <a href="https://matrix.org/docs/guides/installing-synapse">Synapse installation guide page</a></p>
<p>The changelog since 1.0.0 follows:</p>
<h1 id="synapse-1-1-0-2019-07-04">Synapse 1.1.0 (2019-07-04)</h1>
<p>As of v1.1.0, Synapse no longer supports Python 2, nor Postgres version 9.4.
See the <a href="https://github.com/matrix-org/synapse/blob/master/UPGRADE.rst#upgrading-to-v110">upgrade notes</a> for more details.</p>
<p>This release also deprecates the use of environment variables to configure the
docker image. See the <a href="https://github.com/matrix-org/synapse/blob/release-v1.1.0/docker/README.md#legacy-dynamic-configuration-file-support">docker README</a>
for more details.</p>
<p>No changes since 1.1.0rc2.</p>
<h1 id="synapse-1-1-0rc2-2019-07-03">Synapse 1.1.0rc2 (2019-07-03)</h1>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix regression in 1.1rc1 where OPTIONS requests to the media repo would fail. (<a href="https://github.com/matrix-org/synapse/issues/5593">#5593</a>)</li>
<li>Removed the <code>SYNAPSE_SMTP_*</code> docker container environment variables. Using these environment variables prevented the docker container from starting in Synapse v1.0, even though they didn't actually allow any functionality anyway. (<a href="https://github.com/matrix-org/synapse/issues/5596">#5596</a>)</li>
<li>Fix a number of &quot;Starting txn from sentinel context&quot; warnings. (<a href="https://github.com/matrix-org/synapse/issues/5605">#5605</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Update github templates. (<a href="https://github.com/matrix-org/synapse/issues/5552">#5552</a>)</li>
</ul>
<h1 id="synapse-1-1-0rc1-2019-07-02">Synapse 1.1.0rc1 (2019-07-02)</h1>
<p>As of v1.1.0, Synapse no longer supports Python 2, nor Postgres version 9.4.
See the <a href="UPGRADE.rst#upgrading-to-v110">upgrade notes</a> for more details.</p>
<h2 id="features">Features</h2>
<ul>
<li>Added possibility to disable local password authentication. Contributed by Daniel Hoffend. (<a href="https://github.com/matrix-org/synapse/issues/5092">#5092</a>)</li>
<li>Add monthly active users to phonehome stats. (<a href="https://github.com/matrix-org/synapse/issues/5252">#5252</a>)</li>
<li>Allow expired user to trigger renewal email sending manually. (<a href="https://github.com/matrix-org/synapse/issues/5363">#5363</a>)</li>
<li>Statistics on forward extremities per room are now exposed via Prometheus. (<a href="https://github.com/matrix-org/synapse/issues/5384">#5384</a>, <a href="https://github.com/matrix-org/synapse/issues/5458">#5458</a>, <a href="https://github.com/matrix-org/synapse/issues/5461">#5461</a>)</li>
<li>Add --no-daemonize option to run synapse in the foreground, per issue #4130. Contributed by Soham Gumaste. (<a href="https://github.com/matrix-org/synapse/issues/5412">#5412</a>, <a href="https://github.com/matrix-org/synapse/issues/5587">#5587</a>)</li>
<li>Fully support SAML2 authentication. Contributed by <a href="https://github.com/galexrt">Alexander Trost</a> - thank you! (<a href="https://github.com/matrix-org/synapse/issues/5422">#5422</a>)</li>
<li>Allow server admins to define implementations of extra rules for allowing or denying incoming events. (<a href="https://github.com/matrix-org/synapse/issues/5440">#5440</a>, <a href="https://github.com/matrix-org/synapse/issues/5474">#5474</a>, <a href="https://github.com/matrix-org/synapse/issues/5477">#5477</a>)</li>
<li>Add support for handling pagination APIs on client reader worker. (<a href="https://github.com/matrix-org/synapse/issues/5505">#5505</a>, <a href="https://github.com/matrix-org/synapse/issues/5513">#5513</a>, <a href="https://github.com/matrix-org/synapse/issues/5531">#5531</a>)</li>
<li>Improve help and cmdline option names for --generate-config options. (<a href="https://github.com/matrix-org/synapse/issues/5512">#5512</a>)</li>
<li>Allow configuration of the path used for ACME account keys. (<a href="https://github.com/matrix-org/synapse/issues/5516">#5516</a>, <a href="https://github.com/matrix-org/synapse/issues/5521">#5521</a>, <a href="https://github.com/matrix-org/synapse/issues/5522">#5522</a>)</li>
<li>Add --data-dir and --open-private-ports options. (<a href="https://github.com/matrix-org/synapse/issues/5524">#5524</a>)</li>
<li>Split public rooms directory auth config in two settings, in order to manage client auth independently from the federation part of it. Obsoletes the &quot;restrict_public_rooms_to_local_users&quot; configuration setting. If &quot;restrict_public_rooms_to_local_users&quot; is set in the config, Synapse will act as if both new options are enabled, i.e. require authentication through the client API and deny federation requests. (<a href="https://github.com/matrix-org/synapse/issues/5534">#5534</a>)</li>
<li>The minimum TLS version used for outgoing federation requests can now be set with <code>federation_client_minimum_tls_version</code>. (<a href="https://github.com/matrix-org/synapse/issues/5550">#5550</a>)</li>
<li>Optimise devices changed query to not pull unnecessary rows from the database, reducing database load. (<a href="https://github.com/matrix-org/synapse/issues/5559">#5559</a>)</li>
<li>Add new metrics for number of forward extremities being persisted and number of state groups involved in resolution. (<a href="https://github.com/matrix-org/synapse/issues/5476">#5476</a>)</li>
</ul>
<h2 id="bugfixes-1">Bugfixes</h2>
<ul>
<li>Fix bug processing incoming events over federation if call to <code>/get_missing_events</code> fails. (<a href="https://github.com/matrix-org/synapse/issues/5042">#5042</a>)</li>
<li>Prevent more than one room upgrade happening simultaneously on the same room. (<a href="https://github.com/matrix-org/synapse/issues/5051">#5051</a>)</li>
<li>Fix a bug where running synapse_port_db would cause the account validity feature to fail because it didn't set the type of the email_sent column to boolean. (<a href="https://github.com/matrix-org/synapse/issues/5325">#5325</a>)</li>
<li>Warn about disabling email-based password resets when a reset occurs, and remove warning when someone attempts a phone-based reset. (<a href="https://github.com/matrix-org/synapse/issues/5387">#5387</a>)</li>
<li>Fix email notifications for unnamed rooms with multiple people. (<a href="https://github.com/matrix-org/synapse/issues/5388">#5388</a>)</li>
<li>Fix exceptions in federation reader worker caused by attempting to renew attestations, which should only happen on master worker. (<a href="https://github.com/matrix-org/synapse/issues/5389">#5389</a>)</li>
<li>Fix handling of failures fetching remote content to not log failures as exceptions. (<a href="https://github.com/matrix-org/synapse/issues/5390">#5390</a>)</li>
<li>Fix a bug where deactivated users could receive renewal emails if the account validity feature is on. (<a href="https://github.com/matrix-org/synapse/issues/5394">#5394</a>)</li>
<li>Fix missing invite state after exchanging 3PID invites over federaton. (<a href="https://github.com/matrix-org/synapse/issues/5464">#5464</a>)</li>
<li>Fix intermittent exceptions on Apple hardware. Also fix bug that caused database activity times to be under-reported in log lines. (<a href="https://github.com/matrix-org/synapse/issues/5498">#5498</a>)</li>
<li>Fix logging error when a tampered event is detected. (<a href="https://github.com/matrix-org/synapse/issues/5500">#5500</a>)</li>
<li>Fix bug where clients could tight loop calling <code>/sync</code> for a period. (<a href="https://github.com/matrix-org/synapse/issues/5507">#5507</a>)</li>
<li>Fix bug with <code>jinja2</code> preventing Synapse from starting. Users who had this problem should now simply need to run <code>pip install matrix-synapse</code>. (<a href="https://github.com/matrix-org/synapse/issues/5514">#5514</a>)</li>
<li>Fix a regression where homeservers on private IP addresses were incorrectly blacklisted. (<a href="https://github.com/matrix-org/synapse/issues/5523">#5523</a>)</li>
<li>Fixed m.login.jwt using unregistered user_id and added pyjwt&gt;=1.6.4 as jwt conditional dependencies. Contributed by Pau Rodriguez-Estivill. (<a href="https://github.com/matrix-org/synapse/issues/5555">#5555</a>, <a href="https://github.com/matrix-org/synapse/issues/5586">#5586</a>)</li>
<li>Fix a bug that would cause invited users to receive several emails for a single 3PID invite in case the inviter is rate limited. (<a href="https://github.com/matrix-org/synapse/issues/5576">#5576</a>)</li>
</ul>
<h2 id="updates-to-the-docker-image">Updates to the Docker image</h2>
<ul>
<li>Add ability to change Docker containers <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">timezone</a> with the <code>TZ</code> variable. (<a href="https://github.com/matrix-org/synapse/issues/5383">#5383</a>)</li>
<li>Update docker image to use Python 3.7. (<a href="https://github.com/matrix-org/synapse/issues/5546">#5546</a>)</li>
<li>Deprecate the use of environment variables for configuration, and make the use of a static configuration the default. (<a href="https://github.com/matrix-org/synapse/issues/5561">#5561</a>, <a href="https://github.com/matrix-org/synapse/issues/5562">#5562</a>, <a href="https://github.com/matrix-org/synapse/issues/5566">#5566</a>, <a href="https://github.com/matrix-org/synapse/issues/5567">#5567</a>)</li>
<li>Increase default log level for docker image to INFO. It can still be changed by editing the generated log.config file. (<a href="https://github.com/matrix-org/synapse/issues/5547">#5547</a>)</li>
<li>Send synapse logs to the docker logging system, by default. (<a href="https://github.com/matrix-org/synapse/issues/5565">#5565</a>)</li>
<li>Open the non-TLS port by default. (<a href="https://github.com/matrix-org/synapse/issues/5568">#5568</a>)</li>
<li>Fix failure to start under docker with SAML support enabled. (<a href="https://github.com/matrix-org/synapse/issues/5490">#5490</a>)</li>
<li>Use a sensible location for data files when generating a config file. (<a href="https://github.com/matrix-org/synapse/issues/5563">#5563</a>)</li>
</ul>
<h2 id="deprecations-and-removals">Deprecations and Removals</h2>
<ul>
<li>Python 2.7 is no longer a supported platform. Synapse now requires Python 3.5+ to run. (<a href="https://github.com/matrix-org/synapse/issues/5425">#5425</a>)</li>
<li>PostgreSQL 9.4 is no longer supported. Synapse requires Postgres 9.5+ or above for Postgres support. (<a href="https://github.com/matrix-org/synapse/issues/5448">#5448</a>)</li>
<li>Remove support for cpu_affinity setting. (<a href="https://github.com/matrix-org/synapse/issues/5525">#5525</a>)</li>
</ul>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Improve README section on performance troubleshooting. (<a href="https://github.com/matrix-org/synapse/issues/4276">#4276</a>)</li>
<li>Add information about how to install and run <code>black</code> on the codebase to code_style.rst. (<a href="https://github.com/matrix-org/synapse/issues/5537">#5537</a>)</li>
<li>Improve install docs on choosing server_name. (<a href="https://github.com/matrix-org/synapse/issues/5558">#5558</a>)</li>
</ul>
<h2 id="internal-changes-1">Internal Changes</h2>
<ul>
<li>Add logging to 3pid invite signature verification. (<a href="https://github.com/matrix-org/synapse/issues/5015">#5015</a>)</li>
<li>Update example haproxy config to a more compatible setup. (<a href="https://github.com/matrix-org/synapse/issues/5313">#5313</a>)</li>
<li>Track deactivated accounts in the database. (<a href="https://github.com/matrix-org/synapse/issues/5378">#5378</a>, <a href="https://github.com/matrix-org/synapse/issues/5465">#5465</a>, <a href="https://github.com/matrix-org/synapse/issues/5493">#5493</a>)</li>
<li>Clean up code for sending federation EDUs. (<a href="https://github.com/matrix-org/synapse/issues/5381">#5381</a>)</li>
<li>Add a sponsor button to the repo. (<a href="https://github.com/matrix-org/synapse/issues/5382">#5382</a>, <a href="https://github.com/matrix-org/synapse/issues/5386">#5386</a>)</li>
<li>Don't log non-200 responses from federation queries as exceptions. (<a href="https://github.com/matrix-org/synapse/issues/5383">#5383</a>)</li>
<li>Update Python syntax in contrib/ to Python 3. (<a href="https://github.com/matrix-org/synapse/issues/5446">#5446</a>)</li>
<li>Update federation_client dev script to support <code>.well-known</code> and work with python3. (<a href="https://github.com/matrix-org/synapse/issues/5447">#5447</a>)</li>
<li>SyTest has been moved to Buildkite. (<a href="https://github.com/matrix-org/synapse/issues/5459">#5459</a>)</li>
<li>Demo script now uses python3. (<a href="https://github.com/matrix-org/synapse/issues/5460">#5460</a>)</li>
<li>Synapse can now handle RestServlets that return coroutines. (<a href="https://github.com/matrix-org/synapse/issues/5475">#5475</a>, <a href="https://github.com/matrix-org/synapse/issues/5585">#5585</a>)</li>
<li>The demo servers talk to each other again. (<a href="https://github.com/matrix-org/synapse/issues/5478">#5478</a>)</li>
<li>Add an EXPERIMENTAL config option to try and periodically clean up extremities by sending dummy events. (<a href="https://github.com/matrix-org/synapse/issues/5480">#5480</a>)</li>
<li>Synapse's codebase is now formatted by <code>black</code>. (<a href="https://github.com/matrix-org/synapse/issues/5482">#5482</a>)</li>
<li>Some cleanups and sanity-checking in the CPU and database metrics. (<a href="https://github.com/matrix-org/synapse/issues/5499">#5499</a>)</li>
<li>Improve email notification logging. (<a href="https://github.com/matrix-org/synapse/issues/5502">#5502</a>)</li>
<li>Fix &quot;Unexpected entry in 'full_schemas'&quot; log warning. (<a href="https://github.com/matrix-org/synapse/issues/5509">#5509</a>)</li>
<li>Improve logging when generating config files. (<a href="https://github.com/matrix-org/synapse/issues/5510">#5510</a>)</li>
<li>Refactor and clean up Config parser for maintainability. (<a href="https://github.com/matrix-org/synapse/issues/5511">#5511</a>)</li>
<li>Make the config clearer in that email.template_dir is relative to the Synapse's root directory, not the <code>synapse/</code> folder within it. (<a href="https://github.com/matrix-org/synapse/issues/5543">#5543</a>)</li>
<li>Update v1.0.0 release changelog to include more information about changes to password resets. (<a href="https://github.com/matrix-org/synapse/issues/5545">#5545</a>)</li>
<li>Remove non-functioning check_event_hash.py dev script. (<a href="https://github.com/matrix-org/synapse/issues/5548">#5548</a>)</li>
<li>Synapse will now only allow TLS v1.2 connections when serving federation, if it terminates TLS. As Synapse's allowed ciphers were only able to be used in TLSv1.2 before, this does not change behaviour. (<a href="https://github.com/matrix-org/synapse/issues/5550">#5550</a>)</li>
<li>Logging when running GC collection on generation 0 is now at the DEBUG level, not INFO. (<a href="https://github.com/matrix-org/synapse/issues/5557">#5557</a>)</li>
<li>Reduce the amount of stuff we send in the docker context. (<a href="https://github.com/matrix-org/synapse/issues/5564">#5564</a>)</li>
<li>Point the reverse links in the Purge History contrib scripts at the intended location. (<a href="https://github.com/matrix-org/synapse/issues/5570">#5570</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;06&#x2F;11&#x2F;synapse-1-0-0-released&#x2F;" title="Synapse 1.0.0 released">Synapse 1.0.0 released</a></h2>
                <span>
                    11.06.2019 00:00
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Well here it is: Synapse 1.0.</p>
<p>Synapse 1.0 is the reference implementation of the <a href="https://matrix.org/docs/spec">Matrix 1.0 spec</a>. The goal of the release overall has been to focus on security and stability, such that we can officially declare Synapse (and Matrix) out of beta and recommended for production use. This means changing the default room protocol version used for new rooms to be <a href="https://github.com/matrix-org/matrix-doc/blob/37871106c6fc6013c17b5711fb93853fff140267/proposals/2002-rooms-v4.md">v4</a>, which includes the new <a href="https://github.com/matrix-org/matrix-doc/blob/f714aaadd011ac736d779f8460202a8d95799123/proposals/1442-state-resolution.md">state resolution algorithm</a>, as well as <a href="https://github.com/matrix-org/matrix-doc/blob/erikj/event_id_hashes/proposals/1659-event-id-as-hashes.md">collision-resistant event IDs</a>, which are now formatted to be <a href="https://github.com/matrix-org/matrix-doc/blob/rav/proposal/no_slash_in_event_id/proposals/1884-replace-slashes-in-event_ids.md">URL safe</a>.</p>
<p>Synapse 1.0 also ships with support for the upcoming <a href="https://matrix.org/docs/spec/rooms/v5.html">v5 room protocol</a> (which enforces honouring server key validity periods), but this will not be used as the default for new rooms until a sufficient number of servers support it.</p>
<p>Please note that Synapse 1.0 does <strong>not</strong> include significant performance work or new features - our focus has been almost exclusively on providing a reference implementation of the Matrix 1.0 protocol. But having cleared our backlog on security/stability issues we will finally be now unblocked to pursue work around reducing RAM footprint, eliminating forward-extremity build up, and shipping new features like Edits, Reactions &amp; E2E cross-signing support.</p>
<p>As part of the security work, Synapse 1.0 contains a <a href="https://github.com/matrix-org/synapse/blob/master/docs/MSC1711_certificates_FAQ.md#it-used-to-work-just-fine-why-are-you-breaking-everything">breaking change</a> that requires a valid TLS certificate on the federation API endpoint. <strong>Servers that do not configure their certificate will no longer be able to federate post 1.0.</strong></p>
<p>It is also worth noting that Synapse 1.0.0 is the last release that will support Python 2.x and Postgres 9.4. For more information see <a href="/blog/2019/04/08/synapse-deprecating-postgres-9-4-and-python-2-x">here</a> but the TL;DR is that you should upgrade asap.</p>
<p>This release has been a long time coming. Many thanks indeed to everyone who helped test the release candidates and provided feedback along the way.</p>
<p>Synapse 1.0 is just one component of a larger Matrix 1.0 release, which you can <a href="/blog/2019/06/11/introducing-matrix-1-0-and-the-matrix-org-foundation">read all about here</a>.</p>
<p>As ever, you can get the new update <a href="https://github.com/matrix-org/synapse/releases/tag/v1.0.0">here</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Note, Synapse is now available from PyPI, pick it up <a href="https://pypi.org/project/matrix-synapse/">here</a>. Also, check out our <a href="https://matrix.org/docs/guides/installing-synapse">Synapse installation guide page</a></p>
<p>The changelog since 0.99.5 follows:</p>
<h1 id="synapse-1-0-0-2019-06-11">Synapse 1.0.0 (2019-06-11)</h1>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix bug where attempting to send transactions with large number of EDUs can fail. (<a href="https://github.com/matrix-org/synapse/issues/5418">#5418</a>)</li>
</ul>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Expand the federation guide to include relevant content from the MSC1711 FAQ (<a href="https://github.com/matrix-org/synapse/issues/5419">#5419</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Move password reset links to /_matrix/client/unstable namespace. (<a href="https://github.com/matrix-org/synapse/issues/5424">#5424</a>)</li>
</ul>
<h1 id="synapse-1-0-0rc3-2019-06-10">Synapse 1.0.0rc3 (2019-06-10)</h1>
<p>Security: Fix authentication bug introduced in 1.0.0rc1. Please upgrade to rc3 immediately</p>
<h1 id="synapse-1-0-0rc2-2019-06-10">Synapse 1.0.0rc2 (2019-06-10)</h1>
<h2 id="bugfixes-1">Bugfixes</h2>
<ul>
<li>Remove redundant warning about key server response validation. (<a href="https://github.com/matrix-org/synapse/issues/5392">#5392</a>)</li>
<li>Fix bug where old keys stored in the database with a null valid until timestamp caused all verification requests for that key to fail. (<a href="https://github.com/matrix-org/synapse/issues/5415">#5415</a>)</li>
<li>Fix excessive memory using with default <code>federation_verify_certificates: true</code> configuration. (<a href="https://github.com/matrix-org/synapse/issues/5417">#5417</a>)</li>
</ul>
<h1 id="synapse-1-0-0rc1-2019-06-07">Synapse 1.0.0rc1 (2019-06-07)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Synapse now more efficiently collates room statistics. (<a href="https://github.com/matrix-org/synapse/issues/4338">#4338</a>, <a href="https://github.com/matrix-org/synapse/issues/5260">#5260</a>, <a href="https://github.com/matrix-org/synapse/issues/5324">#5324</a>)</li>
<li>Add experimental support for relations (aka reactions and edits). (<a href="https://github.com/matrix-org/synapse/issues/5220">#5220</a>)</li>
<li>Ability to configure default room version. (<a href="https://github.com/matrix-org/synapse/issues/5223">#5223</a>, <a href="https://github.com/matrix-org/synapse/issues/5249">#5249</a>)</li>
<li>Allow configuring a range for the account validity startup job. (<a href="https://github.com/matrix-org/synapse/issues/5276">#5276</a>)</li>
<li>CAS login will now hit the r0 API, not the deprecated v1 one. (<a href="https://github.com/matrix-org/synapse/issues/5286">#5286</a>)</li>
<li>Validate federation server TLS certificates by default (implements <a href="https://github.com/matrix-org/matrix-doc/blob/master/proposals/1711-x509-for-federation.md">MSC1711</a>). (<a href="https://github.com/matrix-org/synapse/issues/5359">#5359</a>)</li>
<li>Update /_matrix/client/versions to reference support for r0.5.0. (<a href="https://github.com/matrix-org/synapse/issues/5360">#5360</a>)</li>
<li>Add a script to generate new signing-key files. (<a href="https://github.com/matrix-org/synapse/issues/5361">#5361</a>)</li>
<li>Update upgrade and installation guides ahead of 1.0. (<a href="https://github.com/matrix-org/synapse/issues/5371">#5371</a>)</li>
<li>Replace the <code>perspectives</code> configuration section with <code>trusted_key_servers</code>, and make validating the signatures on responses optional (since TLS will do this job for us). (<a href="https://github.com/matrix-org/synapse/issues/5374">#5374</a>)</li>
<li>Add ability to perform password reset via email without trusting the identity server. (<a href="https://github.com/matrix-org/synapse/issues/5377">#5377</a>)</li>
<li>Set default room version to v4. (<a href="https://github.com/matrix-org/synapse/issues/5379">#5379</a>)</li>
</ul>
<h2 id="bugfixes-2">Bugfixes</h2>
<ul>
<li>Fixes client-server API not sending &quot;m.heroes&quot; to lazy-load /sync requests when a rooms name or its canonical alias are empty. Thanks to @dnaf for this work! (<a href="https://github.com/matrix-org/synapse/issues/5089">#5089</a>)</li>
<li>Prevent federation device list updates breaking when processing multiple updates at once. (<a href="https://github.com/matrix-org/synapse/issues/5156">#5156</a>)</li>
<li>Fix worker registration bug caused by ClientReaderSlavedStore being unable to see get_profileinfo. (<a href="https://github.com/matrix-org/synapse/issues/5200">#5200</a>)</li>
<li>Fix race when backfilling in rooms with worker mode. (<a href="https://github.com/matrix-org/synapse/issues/5221">#5221</a>)</li>
<li>Fix appservice timestamp massaging. (<a href="https://github.com/matrix-org/synapse/issues/5233">#5233</a>)</li>
<li>Ensure that server_keys fetched via a notary server are correctly signed. (<a href="https://github.com/matrix-org/synapse/issues/5251">#5251</a>)</li>
<li>Show the correct error when logging out and access token is missing. (<a href="https://github.com/matrix-org/synapse/issues/5256">#5256</a>)</li>
<li>Fix error code when there is an invalid parameter on /_matrix/client/r0/publicRooms (<a href="https://github.com/matrix-org/synapse/issues/5257">#5257</a>)</li>
<li>Fix error when downloading thumbnail with missing width/height parameter. (<a href="https://github.com/matrix-org/synapse/issues/5258">#5258</a>)</li>
<li>Fix schema update for account validity. (<a href="https://github.com/matrix-org/synapse/issues/5268">#5268</a>)</li>
<li>Fix bug where we leaked extremities when we soft failed events, leading to performance degradation. (<a href="https://github.com/matrix-org/synapse/issues/5274">#5274</a>, <a href="https://github.com/matrix-org/synapse/issues/5278">#5278</a>, <a href="https://github.com/matrix-org/synapse/issues/5291">#5291</a>)</li>
<li>Fix &quot;db txn 'update_presence' from sentinel context&quot; log messages. (<a href="https://github.com/matrix-org/synapse/issues/5275">#5275</a>)</li>
<li>Fix dropped logcontexts during high outbound traffic. (<a href="https://github.com/matrix-org/synapse/issues/5277">#5277</a>)</li>
<li>Fix a bug where it is not possible to get events in the federation format with the request <code>GET /_matrix/client/r0/rooms/{roomId}/messages</code>. (<a href="https://github.com/matrix-org/synapse/issues/5293">#5293</a>)</li>
<li>Fix performance problems with the rooms stats background update. (<a href="https://github.com/matrix-org/synapse/issues/5294">#5294</a>)</li>
<li>Fix noisy 'no key for server' logs. (<a href="https://github.com/matrix-org/synapse/issues/5300">#5300</a>)</li>
<li>Fix bug where a notary server would sometimes forget old keys. (<a href="https://github.com/matrix-org/synapse/issues/5307">#5307</a>)</li>
<li>Prevent users from setting huge displaynames and avatar URLs. (<a href="https://github.com/matrix-org/synapse/issues/5309">#5309</a>)</li>
<li>Fix handling of failures when processing incoming events where calling <code>/event_auth</code> on remote server fails. (<a href="https://github.com/matrix-org/synapse/issues/5317">#5317</a>)</li>
<li>Ensure that we have an up-to-date copy of the signing key when validating incoming federation requests. (<a href="https://github.com/matrix-org/synapse/issues/5321">#5321</a>)</li>
<li>Fix various problems which made the signing-key notary server time out for some requests. (<a href="https://github.com/matrix-org/synapse/issues/5333">#5333</a>)</li>
<li>Fix bug which would make certain operations (such as room joins) block for 20 minutes while attemoting to fetch verification keys. (<a href="https://github.com/matrix-org/synapse/issues/5334">#5334</a>)</li>
<li>Fix a bug where we could rapidly mark a server as unreachable even though it was only down for a few minutes. (<a href="https://github.com/matrix-org/synapse/issues/5335">#5335</a>, <a href="https://github.com/matrix-org/synapse/issues/5340">#5340</a>)</li>
<li>Fix a bug where account validity renewal emails could only be sent when email notifs were enabled. (<a href="https://github.com/matrix-org/synapse/issues/5341">#5341</a>)</li>
<li>Fix failure when fetching batches of events during backfill, etc. (<a href="https://github.com/matrix-org/synapse/issues/5342">#5342</a>)</li>
<li>Add a new room version where the timestamps on events are checked against the validity periods on signing keys. (<a href="https://github.com/matrix-org/synapse/issues/5348">#5348</a>, <a href="https://github.com/matrix-org/synapse/issues/5354">#5354</a>)</li>
<li>Fix room stats and presence background updates to correctly handle missing events. (<a href="https://github.com/matrix-org/synapse/issues/5352">#5352</a>)</li>
<li>Include left members in room summaries' heroes. (<a href="https://github.com/matrix-org/synapse/issues/5355">#5355</a>)</li>
<li>Fix <code>federation_custom_ca_list</code> configuration option. (<a href="https://github.com/matrix-org/synapse/issues/5362">#5362</a>)</li>
<li>Fix missing logcontext warnings on shutdown. (<a href="https://github.com/matrix-org/synapse/issues/5369">#5369</a>)</li>
</ul>
<h2 id="improved-documentation-1">Improved Documentation</h2>
<ul>
<li>Fix docs on resetting the user directory. (<a href="https://github.com/matrix-org/synapse/issues/5282">#5282</a>)</li>
<li>Fix notes about ACME in the MSC1711 faq. (<a href="https://github.com/matrix-org/synapse/issues/5357">#5357</a>)</li>
</ul>
<h2 id="internal-changes-1">Internal Changes</h2>
<ul>
<li>Synapse will now serve the experimental &quot;room complexity&quot; API endpoint. (<a href="https://github.com/matrix-org/synapse/issues/5216">#5216</a>)</li>
<li>The base classes for the v1 and v2_alpha REST APIs have been unified. (<a href="https://github.com/matrix-org/synapse/issues/5226">#5226</a>, <a href="https://github.com/matrix-org/synapse/issues/5328">#5328</a>)</li>
<li>Simplifications and comments in do_auth. (<a href="https://github.com/matrix-org/synapse/issues/5227">#5227</a>)</li>
<li>Remove urllib3 pin as requests 2.22.0 has been released supporting urllib3 1.25.2. (<a href="https://github.com/matrix-org/synapse/issues/5230">#5230</a>)</li>
<li>Preparatory work for key-validity features. (<a href="https://github.com/matrix-org/synapse/issues/5232">#5232</a>, <a href="https://github.com/matrix-org/synapse/issues/5234">#5234</a>, <a href="https://github.com/matrix-org/synapse/issues/5235">#5235</a>, <a href="https://github.com/matrix-org/synapse/issues/5236">#5236</a>, <a href="https://github.com/matrix-org/synapse/issues/5237">#5237</a>, <a href="https://github.com/matrix-org/synapse/issues/5244">#5244</a>, <a href="https://github.com/matrix-org/synapse/issues/5250">#5250</a>, <a href="https://github.com/matrix-org/synapse/issues/5296">#5296</a>, <a href="https://github.com/matrix-org/synapse/issues/5299">#5299</a>, <a href="https://github.com/matrix-org/synapse/issues/5343">#5343</a>, <a href="https://github.com/matrix-org/synapse/issues/5347">#5347</a>, <a href="https://github.com/matrix-org/synapse/issues/5356">#5356</a>)</li>
<li>Specify the type of reCAPTCHA key to use. (<a href="https://github.com/matrix-org/synapse/issues/5283">#5283</a>)</li>
<li>Improve sample config for monthly active user blocking. (<a href="https://github.com/matrix-org/synapse/issues/5284">#5284</a>)</li>
<li>Remove spurious debug from MatrixFederationHttpClient.get_json. (<a href="https://github.com/matrix-org/synapse/issues/5287">#5287</a>)</li>
<li>Improve logging for logcontext leaks. (<a href="https://github.com/matrix-org/synapse/issues/5288">#5288</a>)</li>
<li>Clarify that the admin change password API logs the user out. (<a href="https://github.com/matrix-org/synapse/issues/5303">#5303</a>)</li>
<li>New installs will now use the v54 full schema, rather than the full schema v14 and applying incremental updates to v54. (<a href="https://github.com/matrix-org/synapse/issues/5320">#5320</a>)</li>
<li>Improve docstrings on MatrixFederationClient. (<a href="https://github.com/matrix-org/synapse/issues/5332">#5332</a>)</li>
<li>Clean up FederationClient.get_events for clarity. (<a href="https://github.com/matrix-org/synapse/issues/5344">#5344</a>)</li>
<li>Various improvements to debug logging. (<a href="https://github.com/matrix-org/synapse/issues/5353">#5353</a>)</li>
<li>Don't run CI build checks until sample config check has passed. (<a href="https://github.com/matrix-org/synapse/issues/5370">#5370</a>)</li>
<li>Automatically retry buildkite builds (max twice) when an agent is lost. (<a href="https://github.com/matrix-org/synapse/issues/5380">#5380</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;05&#x2F;30&#x2F;synapse-0-99-5-2-released&#x2F;" title="Synapse 0.99.5.2 released">Synapse 0.99.5.2 released</a></h2>
                <span>
                    30.05.2019 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>0.99.5.2 contains a critical performance fix following a regression that was introduced in 0.99.5. Affected servers will have experienced increased CPU and RAM usage with a knock on effect of generally sluggish performance.</p>
<p>Separately, we are also looking into reports relating to further performance degradations that may have been introduced as part of 0.99.5, though consider the 0.99.5.2 fix to be a significant improvement on previous 0.99.5.x releases.</p>
<p>Please upgrade asap.</p>
<p>You can get the new update <a href="https://github.com/matrix-org/synapse/releases/tag/v0.99.5.2">here</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Note, Synapse is now available from PyPI, pick it up <a href="https://pypi.org/project/matrix-synapse/">here</a>. Also, check out our <a href="https://matrix.org/docs/guides/installing-synapse">Synapse installation guide page</a>.</p>
<h1 id="synapse-v0-99-5-2-changelog">Synapse v0.99.5.2 Changelog</h1>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix bug where we leaked extremities when we soft failed events, leading to performance degradation. (<a href="https://github.com/matrix-org/synapse/issues/5274">#5274</a>, <a href="https://github.com/matrix-org/synapse/issues/5278">#5278</a>, <a href="https://github.com/matrix-org/synapse/issues/5291">#5291</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;05&#x2F;21&#x2F;synapse-0-99-5-1-released&#x2F;" title="Synapse 0.99.5.1 released!">Synapse 0.99.5.1 released!</a></h2>
                <span>
                    21.05.2019 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Okay folks, this is an important one. v0.99.5.1 will be the last release before we ship Synapse v1.0. <strong>It is really important that you upgrade to v0.99.5.1 because it implements rooms <a href="https://github.com/matrix-org/matrix-doc/blob/matthew/room_v4/proposals/2002-rooms-v4.md">version 4</a> - which is the room version that Synapse 1.0 will default to.</strong></p>
<p>This means that Synapse 1.0 servers will create new rooms as version 4 by default and servers that have not upgraded to at least v0.99.5.1 will not be able to join those rooms.</p>
<p>Over the coming days we will announce a release day for Synapse v1.0, the idea is to give admins 2 weeks notice so that anyone yet to configure their federation SSL certificate has time to do so. <strong>This is important, failure to configure your certs will mean not being able to federate with v1.0 servers.</strong> If you are not sure if you certs are valid, you can test <a href="https://federationtester.matrix.org/">here</a> and read <a href="https://github.com/matrix-org/synapse/blob/master/docs/MSC1711_certificates_FAQ.md">here</a> for more info on what to do.</p>
<p>Aside from room v4, this release also includes the ability to blacklist specific IPs from federating as well as experimental support for edits and reactions. We are not quite ready to mark the feature 'done done', but it is very close. Watch out for news as the feature lands properly.</p>
<p>We're really close to v1.0 now, give us a few more days and we'll announce an official release date.</p>
<p>As ever, you can get the new update <a href="https://github.com/matrix-org/synapse/releases/tag/v0.99.5.1">here</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Note, Synapse is now available from PyPI, pick it up <a href="https://pypi.org/project/matrix-synapse/">here</a>. Also, check out our <a href="https://matrix.org/docs/guides/installing-synapse">Synapse installation guide page</a></p>
<h1 id="synapse-v0-99-5-1-changelog-since-v0-99-4">Synapse v0.99.5.1 Changelog (since v0.99.4)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Add ability to blacklist IP ranges for the federation client. (<a href="https://github.com/matrix-org/synapse/issues/5043">#5043</a>)</li>
<li>Ratelimiting configuration for clients sending messages and the federation server has been altered to match login ratelimiting. The old configuration names will continue working. Check the sample config for details of the new names. (<a href="https://github.com/matrix-org/synapse/issues/5181">#5181</a>)</li>
<li>Drop support for the undocumented /_matrix/client/v2_alpha API prefix. (<a href="https://github.com/matrix-org/synapse/issues/5190">#5190</a>)</li>
<li>Add an option to disable per-room profiles. (<a href="https://github.com/matrix-org/synapse/issues/5196">#5196</a>)</li>
<li>Stick an expiration date to any registered user missing one at startup if account validity is enabled. (<a href="https://github.com/matrix-org/synapse/issues/5204">#5204</a>)</li>
<li>Add experimental support for relations (aka reactions and edits). (<a href="https://github.com/matrix-org/synapse/issues/5209">#5209</a>, <a href="https://github.com/matrix-org/synapse/issues/5211">#5211</a>, <a href="https://github.com/matrix-org/synapse/issues/5203">#5203</a>, <a href="https://github.com/matrix-org/synapse/issues/5212">#5212</a>)</li>
<li>Add a room version 4 which uses a new event ID format, as per <a href="https://github.com/matrix-org/matrix-doc/pull/2002">MSC2002</a>. (<a href="https://github.com/matrix-org/synapse/issues/5210">#5210</a>, <a href="https://github.com/matrix-org/synapse/issues/5217">#5217</a>)</li>
</ul>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix image orientation when generating thumbnails (needs pillow&gt;=4.3.0). Contributed by Pau Rodriguez-Estivill. (<a href="https://github.com/matrix-org/synapse/issues/5039">#5039</a>)</li>
<li>Exclude soft-failed events from forward-extremity candidates: fixes &quot;No forward extremities left!&quot; error. (<a href="https://github.com/matrix-org/synapse/issues/5146">#5146</a>)</li>
<li>Re-order stages in registration flows such that msisdn and email verification are done last. (<a href="https://github.com/matrix-org/synapse/issues/5174">#5174</a>)</li>
<li>Fix 3pid guest invites. (<a href="https://github.com/matrix-org/synapse/issues/5177">#5177</a>)</li>
<li>Fix a bug where the register endpoint would fail with M_THREEPID_IN_USE instead of returning an account previously registered in the same session. (<a href="https://github.com/matrix-org/synapse/issues/5187">#5187</a>)</li>
<li>Prevent registration for user ids that are too long to fit into a state key. Contributed by Reid Anderson. (<a href="https://github.com/matrix-org/synapse/issues/5198">#5198</a>)</li>
<li>Fix incompatibility between ACME support and Python 3.5.2. (<a href="https://github.com/matrix-org/synapse/issues/5218">#5218</a>)</li>
<li>Fix error handling for rooms whose versions are unknown. (<a href="https://github.com/matrix-org/synapse/issues/5219">#5219</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Make /sync attempt to return device updates for both joined and invited users. Note that this doesn't currently work correctly due to other bugs. (<a href="https://github.com/matrix-org/synapse/issues/3484">#3484</a>)</li>
<li>Update tests to consistently be configured via the same code that is used when loading from configuration files. (<a href="https://github.com/matrix-org/synapse/issues/5171">#5171</a>, <a href="https://github.com/matrix-org/synapse/issues/5185">#5185</a>)</li>
<li>Allow client event serialization to be async. (<a href="https://github.com/matrix-org/synapse/issues/5183">#5183</a>)</li>
<li>Expose DataStore._get_events as get_events_as_list. (<a href="https://github.com/matrix-org/synapse/issues/5184">#5184</a>)</li>
<li>Make generating SQL bounds for pagination generic. (<a href="https://github.com/matrix-org/synapse/issues/5191">#5191</a>)</li>
<li>Stop telling people to install the optional dependencies by default. (<a href="https://github.com/matrix-org/synapse/issues/5197">#5197</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;05&#x2F;15&#x2F;synapse-0-99-4-released&#x2F;" title="Synapse 0.99.4 released!">Synapse 0.99.4 released!</a></h2>
                <span>
                    15.05.2019 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hey ho Synapse release day.</p>
<p>0.99.4 is a maintenance release collecting together all of the bug fixes and performance improvements over the past few weeks, additionally there is further support for the upcoming 1.0 release (more info coming soon). One thing worth calling out is how many community contributions have made their way into 0.99.4, take a look at the change log for details, but many thanks to everyone submitting PRs, keep them coming!</p>
<p>As ever, you can get the new update <a href="https://github.com/matrix-org/synapse/releases/tag/v0.99.4">here</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Note, Synapse is now available from PyPI, pick it up <a href="https://pypi.org/project/matrix-synapse/">here</a>. Also, check out our <a href="https://matrix.org/docs/guides/installing-synapse">Synapse installation guide page</a></p>
<h1 id="synapse-0-99-4-changelog">Synapse 0.99.4 Changelog</h1>
<h2 id="features">Features</h2>
<ul>
<li>Add systemd-python to the optional dependencies to enable logging to the systemd journal. Install with <code>pip install matrix-synapse[systemd]</code>. (<a href="https://github.com/matrix-org/synapse/issues/4339">#4339</a>)</li>
<li>Add a default .m.rule.tombstone push rule. (<a href="https://github.com/matrix-org/synapse/issues/4867">#4867</a>)</li>
<li>Add ability for password provider modules to bind email addresses to users upon registration. (<a href="https://github.com/matrix-org/synapse/issues/4947">#4947</a>)</li>
<li>Implementation of <a href="https://github.com/matrix-org/matrix-doc/pull/1711">MSC1711</a> including config options for requiring valid TLS certificates for federation traffic, the ability to disable TLS validation for specific domains, and the ability to specify your own list of CA certificates. (<a href="https://github.com/matrix-org/synapse/issues/4967">#4967</a>)</li>
<li>Remove presence list support as per MSC 1819. (<a href="https://github.com/matrix-org/synapse/issues/4989">#4989</a>)</li>
<li>Reduce CPU usage starting pushers during start up. (<a href="https://github.com/matrix-org/synapse/issues/4991">#4991</a>)</li>
<li>Add a delete group admin API. (<a href="https://github.com/matrix-org/synapse/issues/5002">#5002</a>)</li>
<li>Add config option to block users from looking up 3PIDs. (<a href="https://github.com/matrix-org/synapse/issues/5010">#5010</a>)</li>
<li>Add context to phonehome stats. (<a href="https://github.com/matrix-org/synapse/issues/5020">#5020</a>)</li>
<li>Configure the example systemd units to have a log identifier of <code>matrix-synapse</code>
instead of the executable name, <code>python</code>.
Contributed by Christoph Müller. (<a href="https://github.com/matrix-org/synapse/issues/5023">#5023</a>)</li>
<li>Add time-based account expiration. (<a href="https://github.com/matrix-org/synapse/issues/5027">#5027</a>, <a href="https://github.com/matrix-org/synapse/issues/5047">#5047</a>, <a href="https://github.com/matrix-org/synapse/issues/5073">#5073</a>, <a href="https://github.com/matrix-org/synapse/issues/5116">#5116</a>)</li>
<li>Add support for handling /versions, /voip and /push_rules client endpoints to client_reader worker. (<a href="https://github.com/matrix-org/synapse/issues/5063">#5063</a>, <a href="https://github.com/matrix-org/synapse/issues/5065">#5065</a>, <a href="https://github.com/matrix-org/synapse/issues/5070">#5070</a>)</li>
<li>Add an configuration option to require authentication on /publicRooms and /profile endpoints. (<a href="https://github.com/matrix-org/synapse/issues/5083">#5083</a>)</li>
<li>Move admin APIs to <code>/_synapse/admin/v1</code>. (The old paths are retained for backwards-compatibility, for now). (<a href="https://github.com/matrix-org/synapse/issues/5119">#5119</a>)</li>
<li>Implement an admin API for sending server notices. Many thanks to @krombel who provided a foundation for this work. (<a href="https://github.com/matrix-org/synapse/issues/5121">#5121</a>, <a href="https://github.com/matrix-org/synapse/issues/5142">#5142</a>)</li>
</ul>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Avoid redundant URL encoding of redirect URL for SSO login in the fallback login page. Fixes a regression introduced in <a href="https://github.com/matrix-org/synapse/pull/4220">#4220</a>. Contributed by Marcel Fabian Krüger (&quot;<a href="https://github.com/zauguin">zaugin</a>&quot;). (<a href="https://github.com/matrix-org/synapse/issues/4555">#4555</a>)</li>
<li>Fix bug where presence updates were sent to all servers in a room when a new server joined, rather than to just the new server. (<a href="https://github.com/matrix-org/synapse/issues/4942">#4942</a>, <a href="https://github.com/matrix-org/synapse/issues/5103">#5103</a>)</li>
<li>Fix sync bug which made accepting invites unreliable in worker-mode synapses. (<a href="https://github.com/matrix-org/synapse/issues/4955">#4955</a>, <a href="https://github.com/matrix-org/synapse/issues/4956">#4956</a>)</li>
<li>start.sh: Fix the --no-rate-limit option for messages and make it bypass rate limit on registration and login too. (<a href="https://github.com/matrix-org/synapse/issues/4981">#4981</a>)</li>
<li>Transfer related groups on room upgrade. (<a href="https://github.com/matrix-org/synapse/issues/4990">#4990</a>)</li>
<li>Prevent the ability to kick users from a room they aren't in. (<a href="https://github.com/matrix-org/synapse/issues/4999">#4999</a>)</li>
<li>Fix issue #4596 so synapse_port_db script works with --curses option on Python 3. Contributed by Anders Jensen-Waud <a href="mailto:anders@jensenwaud.com">anders@jensenwaud.com</a>. (<a href="https://github.com/matrix-org/synapse/issues/5003">#5003</a>)</li>
<li>Clients timing out/disappearing while downloading from the media repository will now no longer log a spurious &quot;Producer was not unregistered&quot; message. (<a href="https://github.com/matrix-org/synapse/issues/5009">#5009</a>)</li>
<li>Fix &quot;cannot import name execute_batch&quot; error with postgres. (<a href="https://github.com/matrix-org/synapse/issues/5032">#5032</a>)</li>
<li>Fix disappearing exceptions in manhole. (<a href="https://github.com/matrix-org/synapse/issues/5035">#5035</a>)</li>
<li>Workaround bug in twisted where attempting too many concurrent DNS requests could cause it to hang due to running out of file descriptors. (<a href="https://github.com/matrix-org/synapse/issues/5037">#5037</a>)</li>
<li>Make sure we're not registering the same 3pid twice on registration. (<a href="https://github.com/matrix-org/synapse/issues/5071">#5071</a>)</li>
<li>Don't crash on lack of expiry templates. (<a href="https://github.com/matrix-org/synapse/issues/5077">#5077</a>)</li>
<li>Fix the ratelimting on third party invites. (<a href="https://github.com/matrix-org/synapse/issues/5104">#5104</a>)</li>
<li>Add some missing limitations to room alias creation. (<a href="https://github.com/matrix-org/synapse/issues/5124">#5124</a>, <a href="https://github.com/matrix-org/synapse/issues/5128">#5128</a>)</li>
<li>Limit the number of EDUs in transactions to 100 as expected by synapse. Thanks to @superboum for this work! (<a href="https://github.com/matrix-org/synapse/issues/5138">#5138</a>)</li>
<li>Fix bogus imports in unit tests. (<a href="https://github.com/matrix-org/synapse/issues/5154">#5154</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Add test to verify threepid auth check added in #4435. (<a href="https://github.com/matrix-org/synapse/issues/4474">#4474</a>)</li>
<li>Fix/improve some docstrings in the replication code. (<a href="https://github.com/matrix-org/synapse/issues/4949">#4949</a>)</li>
<li>Split synapse.replication.tcp.streams into smaller files. (<a href="https://github.com/matrix-org/synapse/issues/4953">#4953</a>)</li>
<li>Refactor replication row generation/parsing. (<a href="https://github.com/matrix-org/synapse/issues/4954">#4954</a>)</li>
<li>Run <code>black</code> to clean up formatting on <code>synapse/storage/roommember.py</code> and <code>synapse/storage/events.py</code>. (<a href="https://github.com/matrix-org/synapse/issues/4959">#4959</a>)</li>
<li>Remove log line for password via the admin API. (<a href="https://github.com/matrix-org/synapse/issues/4965">#4965</a>)</li>
<li>Fix typo in TLS filenames in docker/README.md. Also add the '-p' commandline option to the 'docker run' example. Contributed by Jurrie Overgoor. (<a href="https://github.com/matrix-org/synapse/issues/4968">#4968</a>)</li>
<li>Refactor room version definitions. (<a href="https://github.com/matrix-org/synapse/issues/4969">#4969</a>)</li>
<li>Reduce log level of .well-known/matrix/client responses. (<a href="https://github.com/matrix-org/synapse/issues/4972">#4972</a>)</li>
<li>Add <code>config.signing_key_path</code> that can be read by <code>synapse.config</code> utility. (<a href="https://github.com/matrix-org/synapse/issues/4974">#4974</a>)</li>
<li>Track which identity server is used when binding a threepid and use that for unbinding, as per MSC1915. (<a href="https://github.com/matrix-org/synapse/issues/4982">#4982</a>)</li>
<li>Rewrite KeyringTestCase as a HomeserverTestCase. (<a href="https://github.com/matrix-org/synapse/issues/4985">#4985</a>)</li>
<li>README updates: Corrected the default POSTGRES_USER. Added port forwarding hint in TLS section. (<a href="https://github.com/matrix-org/synapse/issues/4987">#4987</a>)</li>
<li>Remove a number of unused tables from the database schema. (<a href="https://github.com/matrix-org/synapse/issues/4992">#4992</a>, <a href="https://github.com/matrix-org/synapse/issues/5028">#5028</a>, <a href="https://github.com/matrix-org/synapse/issues/5033">#5033</a>)</li>
<li>Run <code>black</code> on the remainder of <code>synapse/storage/</code>. (<a href="https://github.com/matrix-org/synapse/issues/4996">#4996</a>)</li>
<li>Fix grammar in get_current_users_in_room and give it a docstring. (<a href="https://github.com/matrix-org/synapse/issues/4998">#4998</a>)</li>
<li>Clean up some code in the server-key Keyring. (<a href="https://github.com/matrix-org/synapse/issues/5001">#5001</a>)</li>
<li>Convert SYNAPSE_NO_TLS Docker variable to boolean for user friendliness. Contributed by Gabriel Eckerson. (<a href="https://github.com/matrix-org/synapse/issues/5005">#5005</a>)</li>
<li>Refactor synapse.storage._base._simple_select_list_paginate. (<a href="https://github.com/matrix-org/synapse/issues/5007">#5007</a>)</li>
<li>Store the notary server name correctly in server_keys_json. (<a href="https://github.com/matrix-org/synapse/issues/5024">#5024</a>)</li>
<li>Rewrite Datastore.get_server_verify_keys to reduce the number of database transactions. (<a href="https://github.com/matrix-org/synapse/issues/5030">#5030</a>)</li>
<li>Remove extraneous period from copyright headers. (<a href="https://github.com/matrix-org/synapse/issues/5046">#5046</a>)</li>
<li>Update documentation for where to get Synapse packages. (<a href="https://github.com/matrix-org/synapse/issues/5067">#5067</a>)</li>
<li>Add workarounds for pep-517 install errors. (<a href="https://github.com/matrix-org/synapse/issues/5098">#5098</a>)</li>
<li>Improve logging when event-signature checks fail. (<a href="https://github.com/matrix-org/synapse/issues/5100">#5100</a>)</li>
<li>Factor out an &quot;assert_requester_is_admin&quot; function. (<a href="https://github.com/matrix-org/synapse/issues/5120">#5120</a>)</li>
<li>Remove the requirement to authenticate for /admin/server_version. (<a href="https://github.com/matrix-org/synapse/issues/5122">#5122</a>)</li>
<li>Prevent an exception from being raised in a IResolutionReceiver and use a more generic error message for blacklisted URL previews. (<a href="https://github.com/matrix-org/synapse/issues/5155">#5155</a>)</li>
<li>Run <code>black</code> on the tests directory. (<a href="https://github.com/matrix-org/synapse/issues/5170">#5170</a>)</li>
<li>Fix CI after new release of isort. (<a href="https://github.com/matrix-org/synapse/issues/5179">#5179</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;04&#x2F;01&#x2F;synapse-0-99-3-released&#x2F;" title="Synapse 0.99.3 released!">Synapse 0.99.3 released!</a></h2>
                <span>
                    01.04.2019 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hey hey, a Synapse release for you today.</p>
<p>The big news in 0.99.3 is that the user directory has been completely re-written and should now be much more performant - this will benefit all installations, but especially those housing larger servers.</p>
<p>Aside from that we continue our 1.0 preparations and relatedly we've improved our docs, in particular to explain how .well-known works. On the perf side we've added rate limiting to login and register endpoints as well as now batching up read receipts to send over federation.</p>
<p>I've said it before, and I'll say it again:-</p>
<blockquote>The most important thing that admins should know is that prior to 1.0 landing later this month, <strong>it is essential that the federation API has a valid TLS certificate - self signed certificates will no longer be accepted.</strong> For more details see our <a href="https://github.com/matrix-org/synapse/blob/master/docs/MSC1711_certificates_FAQ.md">handy guide</a>. Failure to do this will result in being unable to federate with other 1.0 servers.</blockquote>
As ever, you can get the new update <a href="https://github.com/matrix-org/synapse/releases/tag/v0.99.3">here</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Note, Synapse is now available from PyPI, pick it up <a href="https://pypi.org/project/matrix-synapse/">here</a>. Also, check out our new <a href="/docs/guides/installing-synapse">Synapse installation guide page.</a>
<h2>Synapse 0.99.3 changelog</h2>
<h4><a id="user-content-features" class="anchor" href="https://github.com/matrix-org/synapse/blob/master/CHANGES.md#features" aria-hidden="true"></a>Features</h4>
<ul>
 	<li>The user directory has been rewritten to make it faster, with less chance of falling behind on a large server. (<a href="https://github.com/matrix-org/synapse/issues/4537">#4537</a>, <a href="https://github.com/matrix-org/synapse/issues/4846">#4846</a>, <a href="https://github.com/matrix-org/synapse/issues/4864">#4864</a>, <a href="https://github.com/matrix-org/synapse/issues/4887">#4887</a>, <a href="https://github.com/matrix-org/synapse/issues/4900">#4900</a>, <a href="https://github.com/matrix-org/synapse/issues/4944">#4944</a>)</li>
 	<li>Add configurable rate limiting to the /register endpoint. (<a href="https://github.com/matrix-org/synapse/issues/4735">#4735</a>, <a href="https://github.com/matrix-org/synapse/issues/4804">#4804</a>)</li>
 	<li>Move server key queries to federation reader. (<a href="https://github.com/matrix-org/synapse/issues/4757">#4757</a>)</li>
 	<li>Add support for /account/3pid REST endpoint to client_reader worker. (<a href="https://github.com/matrix-org/synapse/issues/4759">#4759</a>)</li>
 	<li>Add an endpoint to the admin API for querying the server version. Contributed by Joseph Weston. (<a href="https://github.com/matrix-org/synapse/issues/4772">#4772</a>)</li>
 	<li>Include a default configuration file in the 'docs' directory. (<a href="https://github.com/matrix-org/synapse/issues/4791">#4791</a>, <a href="https://github.com/matrix-org/synapse/issues/4801">#4801</a>)</li>
 	<li>Synapse is now permissive about trailing slashes on some of its federation endpoints, allowing zero or more to be present. (<a href="https://github.com/matrix-org/synapse/issues/4793">#4793</a>)</li>
 	<li>Add support for /keys/query and /keys/changes REST endpoints to client_reader worker. (<a href="https://github.com/matrix-org/synapse/issues/4796">#4796</a>)</li>
 	<li>Add checks to incoming events over federation for events evading auth (aka "soft fail"). (<a href="https://github.com/matrix-org/synapse/issues/4814">#4814</a>)</li>
 	<li>Add configurable rate limiting to the /login endpoint. (<a href="https://github.com/matrix-org/synapse/issues/4821">#4821</a>, <a href="https://github.com/matrix-org/synapse/issues/4865">#4865</a>)</li>
 	<li>Remove trailing slashes from certain outbound federation requests. Retry if receiving a 404. Context: #3622. (<a href="https://github.com/matrix-org/synapse/issues/4840">#4840</a>)</li>
 	<li>Allow passing --daemonize flags to workers in the same way as with master. (<a href="https://github.com/matrix-org/synapse/issues/4853">#4853</a>)</li>
 	<li>Batch up outgoing read-receipts to reduce federation traffic. (<a href="https://github.com/matrix-org/synapse/issues/4890">#4890</a>, <a href="https://github.com/matrix-org/synapse/issues/4927">#4927</a>)</li>
 	<li>Add option to disable searching the user directory. (<a href="https://github.com/matrix-org/synapse/issues/4895">#4895</a>)</li>
 	<li>Add option to disable searching of local and remote public room lists. (<a href="https://github.com/matrix-org/synapse/issues/4896">#4896</a>)</li>
 	<li>Add ability for password providers to login/register a user via 3PID (email, phone). (<a href="https://github.com/matrix-org/synapse/issues/4931">#4931</a>)</li>
</ul>
<h4><a id="user-content-bugfixes" class="anchor" href="https://github.com/matrix-org/synapse/blob/master/CHANGES.md#bugfixes" aria-hidden="true"></a>Bugfixes</h4>
<ul>
 	<li>Fix a bug where media with spaces in the name would get a corrupted name. (<a href="https://github.com/matrix-org/synapse/issues/2090">#2090</a>)</li>
 	<li>Fix attempting to paginate in rooms where server cannot see any events, to avoid unnecessarily pulling in lots of redacted events. (<a href="https://github.com/matrix-org/synapse/issues/4699">#4699</a>)</li>
 	<li>'event_id' is now a required parameter in federated state requests, as per the matrix spec. (<a href="https://github.com/matrix-org/synapse/issues/4740">#4740</a>)</li>
 	<li>Fix tightloop over connecting to replication server. (<a href="https://github.com/matrix-org/synapse/issues/4749">#4749</a>)</li>
 	<li>Fix parsing of Content-Disposition headers on remote media requests and URL previews. (<a href="https://github.com/matrix-org/synapse/issues/4763">#4763</a>)</li>
 	<li>Fix incorrect log about not persisting duplicate state event. (<a href="https://github.com/matrix-org/synapse/issues/4776">#4776</a>)</li>
 	<li>Fix v4v6 option in HAProxy example config. Contributed by Flakebi. (<a href="https://github.com/matrix-org/synapse/issues/4790">#4790</a>)</li>
 	<li>Handle batch updates in worker replication protocol. (<a href="https://github.com/matrix-org/synapse/issues/4792">#4792</a>)</li>
 	<li>Fix bug where we didn't correctly throttle sending of USER_IP commands over replication. (<a href="https://github.com/matrix-org/synapse/issues/4818">#4818</a>)</li>
 	<li>Fix potential race in handling missing updates in device list updates. (<a href="https://github.com/matrix-org/synapse/issues/4829">#4829</a>)</li>
 	<li>Fix bug where synapse expected an un-specced <code>prev_state</code> field on state events. (<a href="https://github.com/matrix-org/synapse/issues/4837">#4837</a>)</li>
 	<li>Transfer a user's notification settings (push rules) on room upgrade. (<a href="https://github.com/matrix-org/synapse/issues/4838">#4838</a>)</li>
 	<li>fix test_auto_create_auto_join_where_no_consent. (<a href="https://github.com/matrix-org/synapse/issues/4886">#4886</a>)</li>
 	<li>Fix a bug where hs_disabled_message was sometimes not correctly enforced. (<a href="https://github.com/matrix-org/synapse/issues/4888">#4888</a>)</li>
 	<li>Fix bug in shutdown room admin API where it would fail if a user in the room hadn't consented to the privacy policy. (<a href="https://github.com/matrix-org/synapse/issues/4904">#4904</a>)</li>
 	<li>Fix bug where blocked world-readable rooms were still peekable. (<a href="https://github.com/matrix-org/synapse/issues/4908">#4908</a>)</li>
</ul>
<h4><a id="user-content-internal-changes" class="anchor" href="https://github.com/matrix-org/synapse/blob/master/CHANGES.md#internal-changes" aria-hidden="true"></a>Internal Changes</h4>
<ul>
 	<li>Add a systemd setup that supports synapse workers. Contributed by Luca Corbatto. (<a href="https://github.com/matrix-org/synapse/issues/4662">#4662</a>)</li>
 	<li>Change from TravisCI to Buildkite for CI. (<a href="https://github.com/matrix-org/synapse/issues/4752">#4752</a>)</li>
 	<li>When presence is disabled don't send over replication. (<a href="https://github.com/matrix-org/synapse/issues/4757">#4757</a>)</li>
 	<li>Minor docstring fixes for MatrixFederationAgent. (<a href="https://github.com/matrix-org/synapse/issues/4765">#4765</a>)</li>
 	<li>Optimise EDU transmission for the federation_sender worker. (<a href="https://github.com/matrix-org/synapse/issues/4770">#4770</a>)</li>
 	<li>Update test_typing to use HomeserverTestCase. (<a href="https://github.com/matrix-org/synapse/issues/4771">#4771</a>)</li>
 	<li>Update URLs for riot.im icons and logos in the default notification templates. (<a href="https://github.com/matrix-org/synapse/issues/4779">#4779</a>)</li>
 	<li>Removed unnecessary $ from some federation endpoint path regexes. (<a href="https://github.com/matrix-org/synapse/issues/4794">#4794</a>)</li>
 	<li>Remove link to deleted title in README. (<a href="https://github.com/matrix-org/synapse/issues/4795">#4795</a>)</li>
 	<li>Clean up read-receipt handling. (<a href="https://github.com/matrix-org/synapse/issues/4797">#4797</a>)</li>
 	<li>Add some debug about processing read receipts. (<a href="https://github.com/matrix-org/synapse/issues/4798">#4798</a>)</li>
 	<li>Clean up some replication code. (<a href="https://github.com/matrix-org/synapse/issues/4799">#4799</a>)</li>
 	<li>Add some docstrings. (<a href="https://github.com/matrix-org/synapse/issues/4815">#4815</a>)</li>
 	<li>Add debug logger to try and track down #4422. (<a href="https://github.com/matrix-org/synapse/issues/4816">#4816</a>)</li>
 	<li>Make shutdown API send explanation message to room after users have been forced joined. (<a href="https://github.com/matrix-org/synapse/issues/4817">#4817</a>)</li>
 	<li>Update example_log_config.yaml. (<a href="https://github.com/matrix-org/synapse/issues/4820">#4820</a>)</li>
 	<li>Document the <code>generate</code> option for the docker image. (<a href="https://github.com/matrix-org/synapse/issues/4824">#4824</a>)</li>
 	<li>Fix check-newsfragment for debian-only changes. (<a href="https://github.com/matrix-org/synapse/issues/4825">#4825</a>)</li>
 	<li>Add some debug logging for device list updates to help with #4828. (<a href="https://github.com/matrix-org/synapse/issues/4828">#4828</a>)</li>
 	<li>Improve federation documentation, specifically .well-known support. Many thanks to @vaab. (<a href="https://github.com/matrix-org/synapse/issues/4832">#4832</a>)</li>
 	<li>Disable captcha registration by default in unit tests. (<a href="https://github.com/matrix-org/synapse/issues/4839">#4839</a>)</li>
 	<li>Add stuff back to the .gitignore. (<a href="https://github.com/matrix-org/synapse/issues/4843">#4843</a>)</li>
 	<li>Clarify what registration_shared_secret allows for. (<a href="https://github.com/matrix-org/synapse/issues/4844">#4844</a>)</li>
 	<li>Correctly log expected errors when fetching server keys. (<a href="https://github.com/matrix-org/synapse/issues/4847">#4847</a>)</li>
 	<li>Update install docs to explicitly state a full-chain (not just the top-level) TLS certificate must be provided to Synapse. This caused some people's Synapse ports to appear correct in a browser but still (rightfully so) upset the federation tester. (<a href="https://github.com/matrix-org/synapse/issues/4849">#4849</a>)</li>
 	<li>Move client read-receipt processing to federation sender worker. (<a href="https://github.com/matrix-org/synapse/issues/4852">#4852</a>)</li>
 	<li>Refactor federation TransactionQueue. (<a href="https://github.com/matrix-org/synapse/issues/4855">#4855</a>)</li>
 	<li>Comment out most options in the generated config. (<a href="https://github.com/matrix-org/synapse/issues/4863">#4863</a>)</li>
 	<li>Fix yaml library warnings by using safe_load. (<a href="https://github.com/matrix-org/synapse/issues/4869">#4869</a>)</li>
 	<li>Update Apache setup to remove location syntax. Thanks to @cwmke! (<a href="https://github.com/matrix-org/synapse/issues/4870">#4870</a>)</li>
 	<li>Reinstate test case that runs unit tests against oldest supported dependencies. (<a href="https://github.com/matrix-org/synapse/issues/4879">#4879</a>)</li>
 	<li>Update link to federation docs. (<a href="https://github.com/matrix-org/synapse/issues/4881">#4881</a>)</li>
 	<li>fix test_auto_create_auto_join_where_no_consent. (<a href="https://github.com/matrix-org/synapse/issues/4886">#4886</a>)</li>
 	<li>Use a regular HomeServerConfig object for unit tests rater than a Mock. (<a href="https://github.com/matrix-org/synapse/issues/4889">#4889</a>)</li>
 	<li>Add some notes about tuning postgres for larger deployments. (<a href="https://github.com/matrix-org/synapse/issues/4895">#4895</a>)</li>
 	<li>Add a config option for torture-testing worker replication. (<a href="https://github.com/matrix-org/synapse/issues/4902">#4902</a>)</li>
 	<li>Log requests which are simulated by the unit tests. (<a href="https://github.com/matrix-org/synapse/issues/4905">#4905</a>)</li>
 	<li>Allow newsfragments to end with exclamation marks. Exciting! (<a href="https://github.com/matrix-org/synapse/issues/4912">#4912</a>)</li>
 	<li>Refactor some more tests to use HomeserverTestCase. (<a href="https://github.com/matrix-org/synapse/issues/4913">#4913</a>)</li>
 	<li>Refactor out the state deltas portion of the user directory store and handler. (<a href="https://github.com/matrix-org/synapse/issues/4917">#4917</a>)</li>
 	<li>Fix nginx example in ACME doc. (<a href="https://github.com/matrix-org/synapse/issues/4923">#4923</a>)</li>
 	<li>Use an explicit dbname for postgres connections in the tests. (<a href="https://github.com/matrix-org/synapse/issues/4928">#4928</a>)</li>
 	<li>Fix <code>ClientReplicationStreamProtocol.__str__()</code>. (<a href="https://github.com/matrix-org/synapse/issues/4929">#4929</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;03&#x2F;04&#x2F;synapse-0-99-2-released&#x2F;" title="Synapse 0.99.2 released!">Synapse 0.99.2 released!</a></h2>
                <span>
                    04.03.2019 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Well now, what have we here? Synapse 0.99.2 is the latest in the 0.99.x series as we step ever closer to 1.0.</p>
<p>0.99.2 is an incremental release including a bunch of performance improvements, enhancements to room upgrades and generally a plethora of bug fixes.</p>
<p>The most important thing that admins should know is that prior to 1.0 landing later this month, <strong>it is essential that the federation API has a valid TLS certificate - self signed certificates will no longer be accepted.</strong> For more details see our <a href="https://github.com/matrix-org/synapse/blob/master/docs/MSC1711_certificates_FAQ.md">handy guide</a>. Failure to do this will result in being unable to federate with other 1.0 servers.</p>
<p>As ever, you can get the new update <a href="https://github.com/matrix-org/synapse/releases/tag/v0.99.2">here</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Note, Synapse is now available from PyPI, pick it up <a href="https://pypi.org/project/matrix-synapse/">here</a>. Also, check out our new <a href="/docs/guides/installing-synapse">Synapse installation guide page.</a></p>
<p> </p>
<h2>Synapse 0.99.2 changelog</h2>
<h3>Features</h3>
<ul>
 	<li>Added an HAProxy example in the reverse proxy documentation. Contributed by Benoît S. (“Benpro”). (<a href="https://github.com/matrix-org/synapse/issues/4541" data-hovercard-type="issue" data-hovercard-url="/matrix-org/synapse/issues/4541/hovercard">#4541</a>)</li>
 	<li>Add basic optional sentry integration. (<a href="https://github.com/matrix-org/synapse/issues/4632" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4632/hovercard">#4632</a>, <a href="https://github.com/matrix-org/synapse/issues/4694" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4694/hovercard">#4694</a>)</li>
 	<li>Transfer bans on room upgrade. (<a href="https://github.com/matrix-org/synapse/issues/4642" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4642/hovercard">#4642</a>)</li>
 	<li>Add configurable room list publishing rules. (<a href="https://github.com/matrix-org/synapse/issues/4647" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4647/hovercard">#4647</a>)</li>
 	<li>Support .well-known delegation when issuing certificates through ACME. (<a href="https://github.com/matrix-org/synapse/issues/4652" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4652/hovercard">#4652</a>)</li>
 	<li>Allow registration and login to be handled by a worker instance. (<a href="https://github.com/matrix-org/synapse/issues/4666" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4666/hovercard">#4666</a>, <a href="https://github.com/matrix-org/synapse/issues/4670" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4670/hovercard">#4670</a>, <a href="https://github.com/matrix-org/synapse/issues/4682" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4682/hovercard">#4682</a>)</li>
 	<li>Reduce the overhead of creating outbound federation connections over TLS by caching the TLS client options. (<a href="https://github.com/matrix-org/synapse/issues/4674" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4674/hovercard">#4674</a>)</li>
 	<li>Add prometheus metrics for number of outgoing EDUs, by type. (<a href="https://github.com/matrix-org/synapse/issues/4695" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4695/hovercard">#4695</a>)</li>
 	<li>Return correct error code when inviting a remote user to a room whose homeserver does not support the room version. (<a href="https://github.com/matrix-org/synapse/issues/4721" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4721/hovercard">#4721</a>)</li>
 	<li>Prevent showing rooms to other servers that were set to not federate. (<a href="https://github.com/matrix-org/synapse/issues/4746" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4746/hovercard">#4746</a>)</li>
</ul>
<h3>Bugfixes</h3>
<ul>
 	<li>Fix possible exception when paginating. (<a href="https://github.com/matrix-org/synapse/issues/4263" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4263/hovercard">#4263</a>)</li>
 	<li>The dependency checker now correctly reports a version mismatch for optional
dependencies, instead of reporting the dependency missing. (<a href="https://github.com/matrix-org/synapse/issues/4450" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4450/hovercard">#4450</a>)</li>
 	<li>Set CORS headers on .well-known requests. (<a href="https://github.com/matrix-org/synapse/issues/4651" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4651/hovercard">#4651</a>)</li>
 	<li>Fix kicking guest users on guest access revocation in worker mode. (<a href="https://github.com/matrix-org/synapse/issues/4667" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4667/hovercard">#4667</a>)</li>
 	<li>Fix an issue in the database migration script where the
<code>e2e_room_keys.is_verified</code> column wasn't considered as
a boolean. (<a href="https://github.com/matrix-org/synapse/issues/4680" data-hovercard-type="issue" data-hovercard-url="/matrix-org/synapse/issues/4680/hovercard">#4680</a>)</li>
 	<li>Fix TaskStopped exceptions in logs when outbound requests time out. (<a href="https://github.com/matrix-org/synapse/issues/4690" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4690/hovercard">#4690</a>)</li>
 	<li>Fix ACME config for python 2. (<a href="https://github.com/matrix-org/synapse/issues/4717" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4717/hovercard">#4717</a>)</li>
 	<li>Fix paginating over federation persisting incorrect state. (<a href="https://github.com/matrix-org/synapse/issues/4718" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4718/hovercard">#4718</a>)</li>
</ul>
<h3>Internal Changes</h3>
<ul>
 	<li>Run <code>black</code> to reformat user directory code. (<a href="https://github.com/matrix-org/synapse/issues/4635" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4635/hovercard">#4635</a>)</li>
 	<li>Reduce number of exceptions we log. (<a href="https://github.com/matrix-org/synapse/issues/4643" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4643/hovercard">#4643</a>, <a href="https://github.com/matrix-org/synapse/issues/4668" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4668/hovercard">#4668</a>)</li>
 	<li>Introduce upsert batching functionality in the database layer. (<a href="https://github.com/matrix-org/synapse/issues/4644" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4644/hovercard">#4644</a>)</li>
 	<li>Fix various spelling mistakes. (<a href="https://github.com/matrix-org/synapse/issues/4657" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4657/hovercard">#4657</a>)</li>
 	<li>Cleanup request exception logging. (<a href="https://github.com/matrix-org/synapse/issues/4669" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4669/hovercard">#4669</a>, <a href="https://github.com/matrix-org/synapse/issues/4737" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4737/hovercard">#4737</a>, <a href="https://github.com/matrix-org/synapse/issues/4738" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4738/hovercard">#4738</a>)</li>
 	<li>Improve replication performance by reducing cache invalidation traffic. (<a href="https://github.com/matrix-org/synapse/issues/4671" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4671/hovercard">#4671</a>, <a href="https://github.com/matrix-org/synapse/issues/4715" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4715/hovercard">#4715</a>, <a href="https://github.com/matrix-org/synapse/issues/4748" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4748/hovercard">#4748</a>)</li>
 	<li>Test against Postgres 9.5 as well as 9.4. (<a href="https://github.com/matrix-org/synapse/issues/4676" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4676/hovercard">#4676</a>)</li>
 	<li>Run unit tests against python 3.7. (<a href="https://github.com/matrix-org/synapse/issues/4677" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4677/hovercard">#4677</a>)</li>
 	<li>Attempt to clarify installation instructions/config. (<a href="https://github.com/matrix-org/synapse/issues/4681" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4681/hovercard">#4681</a>)</li>
 	<li>Clean up gitignores. (<a href="https://github.com/matrix-org/synapse/issues/4688" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4688/hovercard">#4688</a>)</li>
 	<li>Minor tweaks to acme docs. (<a href="https://github.com/matrix-org/synapse/issues/4689" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4689/hovercard">#4689</a>)</li>
 	<li>Improve the logging in the pusher process. (<a href="https://github.com/matrix-org/synapse/issues/4691" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4691/hovercard">#4691</a>)</li>
 	<li>Better checks on newsfragments. (<a href="https://github.com/matrix-org/synapse/issues/4698" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4698/hovercard">#4698</a>, <a href="https://github.com/matrix-org/synapse/issues/4750" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4750/hovercard">#4750</a>)</li>
 	<li>Avoid some redundant work when processing read receipts. (<a href="https://github.com/matrix-org/synapse/issues/4706" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4706/hovercard">#4706</a>)</li>
 	<li>Run <code>push_receipts_to_remotes</code> as background job. (<a href="https://github.com/matrix-org/synapse/issues/4707" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4707/hovercard">#4707</a>)</li>
 	<li>Add prometheus metrics for number of badge update pushes. (<a href="https://github.com/matrix-org/synapse/issues/4709" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4709/hovercard">#4709</a>)</li>
 	<li>Reduce pusher logging on startup (<a href="https://github.com/matrix-org/synapse/issues/4716" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4716/hovercard">#4716</a>)</li>
 	<li>Don't log exceptions when failing to fetch remote server keys. (<a href="https://github.com/matrix-org/synapse/issues/4722" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4722/hovercard">#4722</a>)</li>
 	<li>Correctly proxy exception in frontend_proxy worker. (<a href="https://github.com/matrix-org/synapse/issues/4723" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4723/hovercard">#4723</a>)</li>
 	<li>Add database version to phonehome stats. (<a href="https://github.com/matrix-org/synapse/issues/4753" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4753/hovercard">#4753</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;02&#x2F;14&#x2F;synapse-0-99-1-1-released&#x2F;" title="Synapse 0.99.1.1 Released!">Synapse 0.99.1.1 Released!</a></h2>
                <span>
                    14.02.2019 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hey, everyone, today is the day we release Synapse 0.99.1.1</p>
<p>This release contains improved ACME support to make it even easier to get going with TLS certs on your federation end points, plus some tweaks to make the room version upgrade path easier.</p>
<p>Just as a reminder that the 0.99.x series is precursor for our 1.0 release (which will land in early March, exact date to be confirmed) - it is really important that all server admins are aware that self signed certificates on the Server to Server API will no longer be accepted by &gt;= Synapse 1.0. If you have not already done so, now is the time to configure your certificate. For more info see our <a href="https://github.com/matrix-org/synapse/blob/master/docs/MSC1711_certificates_FAQ.md">FAQ</a> and if you get stuck come and join us in <a href="https://matrix.to/#/#synapse:matrix.org">#Synapse.</a></p>
<p>As ever, you can get the new update <a href="https://github.com/matrix-org/synapse/releases/tag/v0.99.1.1">here</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Note, Synapse is now available from PyPI, pick it up <a href="https://pypi.org/project/matrix-synapse/">here</a>. Also, check out our new <a href="/docs/guides/installing-synapse">Synapse installation guide page.</a></p>
<h2>Synapse 0.99.1.1 Changelog</h2>
<div class="release-header">
<div class="d-flex flex-items-start"></div>
</div>
<div class="markdown-body">
<h3>Bugfixes</h3>
<ul>
 	<li>Fix "TypeError: '&gt;' not supported" when starting without an existing certificate.
Fix a bug where an existing certificate would be reprovisoned every day. (<a href="https://github.com/matrix-org/synapse/issues/4648" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4648/hovercard" aria-describedby="hovercard-aria-description">#4648</a>)</li>
</ul>
</div>
<h2>Synapse 0.99.1 Changelog</h2>
<h3>Features</h3>
<ul>
 	<li>Include m.room.encryption on invites by default (<a href="https://github.com/matrix-org/synapse/issues/3902" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/3902/hovercard" aria-describedby="hovercard-aria-description">#3902</a>)</li>
 	<li>Federation OpenID listener resource can now be activated even if federation is disabled (<a href="https://github.com/matrix-org/synapse/issues/4420" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4420/hovercard" aria-describedby="hovercard-aria-description">#4420</a>)</li>
 	<li>Synapse's ACME support will now correctly reprovision a certificate that approaches its expiry while Synapse is running. (<a href="https://github.com/matrix-org/synapse/issues/4522" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4522/hovercard" aria-describedby="hovercard-aria-description">#4522</a>)</li>
 	<li>Add ability to update backup versions (<a href="https://github.com/matrix-org/synapse/issues/4580" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4580/hovercard" aria-describedby="hovercard-aria-description">#4580</a>)</li>
 	<li>Allow the "unavailable" presence status for /sync.
This change makes Synapse compliant with r0.4.0 of the Client-Server specification. (<a href="https://github.com/matrix-org/synapse/issues/4592" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4592/hovercard" aria-describedby="hovercard-aria-description">#4592</a>)</li>
 	<li>There is no longer any need to specify <code>no_tls</code>: it is inferred from the absence of TLS listeners (<a href="https://github.com/matrix-org/synapse/issues/4613" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4613/hovercard" aria-describedby="hovercard-aria-description">#4613</a>, <a href="https://github.com/matrix-org/synapse/issues/4615" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4615/hovercard" aria-describedby="hovercard-aria-description">#4615</a>, <a href="https://github.com/matrix-org/synapse/issues/4617" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4617/hovercard" aria-describedby="hovercard-aria-description">#4617</a>, <a href="https://github.com/matrix-org/synapse/issues/4636" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4636/hovercard" aria-describedby="hovercard-aria-description">#4636</a>)</li>
 	<li>The default configuration no longer requires TLS certificates. (<a href="https://github.com/matrix-org/synapse/issues/4614" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4614/hovercard" aria-describedby="hovercard-aria-description">#4614</a>)</li>
</ul>
<h3>Bugfixes</h3>
<ul>
 	<li>Copy over room federation ability on room upgrade. (<a href="https://github.com/matrix-org/synapse/issues/4530" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4530/hovercard" aria-describedby="hovercard-aria-description">#4530</a>)</li>
 	<li>Fix noisy "twisted.internet.task.TaskStopped" errors in logs (<a href="https://github.com/matrix-org/synapse/issues/4546" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4546/hovercard" aria-describedby="hovercard-aria-description">#4546</a>)</li>
 	<li>Synapse is now tolerant of the <code>tls_fingerprints</code> option being None or not specified. (<a href="https://github.com/matrix-org/synapse/issues/4589" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4589/hovercard" aria-describedby="hovercard-aria-description">#4589</a>)</li>
 	<li>Fix 'no unique or exclusion constraint' error (<a href="https://github.com/matrix-org/synapse/issues/4591" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4591/hovercard" aria-describedby="hovercard-aria-description">#4591</a>)</li>
 	<li>Transfer Server ACLs on room upgrade. (<a href="https://github.com/matrix-org/synapse/issues/4608" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4608/hovercard" aria-describedby="hovercard-aria-description">#4608</a>)</li>
 	<li>Fix failure to start when not TLS certificate was given even if TLS was disabled. (<a href="https://github.com/matrix-org/synapse/issues/4618" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4618/hovercard" aria-describedby="hovercard-aria-description">#4618</a>)</li>
 	<li>Fix self-signed cert notice from generate-config. (<a href="https://github.com/matrix-org/synapse/issues/4625" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4625/hovercard" aria-describedby="hovercard-aria-description">#4625</a>)</li>
 	<li>Fix performance of <code>user_ips</code> table deduplication background update (<a href="https://github.com/matrix-org/synapse/issues/4626" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4626/hovercard" aria-describedby="hovercard-aria-description">#4626</a>, <a href="https://github.com/matrix-org/synapse/issues/4627" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4627/hovercard" aria-describedby="hovercard-aria-description">#4627</a>)</li>
</ul>
<h3>Internal Changes</h3>
<ul>
 	<li>Change the user directory state query to use a filtered call to the db instead of a generic one. (<a href="https://github.com/matrix-org/synapse/issues/4462" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4462/hovercard" aria-describedby="hovercard-aria-description">#4462</a>)</li>
 	<li>Reject federation transactions if they include more than 50 PDUs or 100 EDUs. (<a href="https://github.com/matrix-org/synapse/issues/4513" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4513/hovercard" aria-describedby="hovercard-aria-description">#4513</a>)</li>
 	<li>Reduce duplication of <code>synapse.app</code> code. (<a href="https://github.com/matrix-org/synapse/issues/4567" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4567/hovercard" aria-describedby="hovercard-aria-description">#4567</a>)</li>
 	<li>Fix docker upload job to push -py2 images. (<a href="https://github.com/matrix-org/synapse/issues/4576" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4576/hovercard" aria-describedby="hovercard-aria-description">#4576</a>)</li>
 	<li>Add port configuration information to ACME instructions. (<a href="https://github.com/matrix-org/synapse/issues/4578" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4578/hovercard" aria-describedby="hovercard-aria-description">#4578</a>)</li>
 	<li>Update MSC1711 FAQ to clarify .well-known usage (<a href="https://github.com/matrix-org/synapse/issues/4584" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4584/hovercard" aria-describedby="hovercard-aria-description">#4584</a>)</li>
 	<li>Clean up default listener configuration (<a href="https://github.com/matrix-org/synapse/issues/4586" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4586/hovercard" aria-describedby="hovercard-aria-description">#4586</a>)</li>
 	<li>Clarifications for reverse proxy docs (<a href="https://github.com/matrix-org/synapse/issues/4607" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4607/hovercard" aria-describedby="hovercard-aria-description">#4607</a>)</li>
 	<li>Move ClientTLSOptionsFactory init out of <code>refresh_certificates</code> (<a href="https://github.com/matrix-org/synapse/issues/4611" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4611/hovercard" aria-describedby="hovercard-aria-description">#4611</a>)</li>
 	<li>Fail cleanly if listener config lacks a 'port' (<a href="https://github.com/matrix-org/synapse/issues/4616" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4616/hovercard" aria-describedby="hovercard-aria-description">#4616</a>)</li>
 	<li>Remove redundant entries from docker config (<a href="https://github.com/matrix-org/synapse/issues/4619" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4619/hovercard" aria-describedby="hovercard-aria-description">#4619</a>)</li>
 	<li>README updates (<a href="https://github.com/matrix-org/synapse/issues/4621" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4621/hovercard" aria-describedby="hovercard-aria-description">#4621</a>)</li>
</ul>

                
            </div>
        </article>
        
        <nav class="pagination">
    <div class="prev">
        
        <a href="&#x2F;category&#x2F;releases&#x2F;page&#x2F;10&#x2F;">‹ Previous</a>
        
    </div>
    <span class="page-number">11 / 14</span>
    <div class="prev">
        
        <a href="&#x2F;category&#x2F;releases&#x2F;page&#x2F;12&#x2F;">Next ›</a>
        
    </div>
</nav>

    </div>
</div>

    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="&#x2F;code"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p>© 2022 The Matrix.org Foundation C.I.C.</p>
</footer>

</body>

</html>
