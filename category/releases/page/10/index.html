<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - Releases</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/png" href="/assets/favicon.png" />
    <link rel="stylesheet" href="/style.css" />

    
<link rel="alternate" type="application/rss+xml" title="RSS" href="/category/releases/atom.xml">
</head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo-white.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            ">
            Blog
        </a>
        
        
        
        <a href="&#x2F;docs&#x2F;" class="
            ">
            Documentation
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <input id="ecosystem-submenu-checkbox" type="checkbox" class="submenu-checkbox" aria-hidden="true"
                >
            <label for="ecosystem-submenu-checkbox" class="submenu-title">Ecosystem <div class="arrow">
                </div></label>

            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bots&#x2F;">Bots</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        
<div id="taxonomy-single">
    <div class="content">
        <header>
            <h1>Releases</h1>
            138 posts tagged with "Releases" <a href="/category">(See all Category)</a>
            
            <h2>
                <small><a href="/category/releases/atom.xml">Atom Feed</a></small>
            </h2>
            
        </header>

        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;03&#x2F;03&#x2F;synapse-1-11-1-released&#x2F;" title="Synapse 1.11.1 released">Synapse 1.11.1 released</a></h2>
                <span>
                    03.03.2020 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Synapse 1.11.1 is a security release which contains a fix impacting installations using Single Sign-On (i.e. SAML2 or CAS) for authentication. Administrators of such installations are encouraged to upgrade as soon as possible.</p>
<p>Admins not using Single Sign-On to authenticate users are not affected though may wish to upgrade anyway to pull in some unrelated bug fixes.</p>
<p>Thanks to <a href="https://twitter.com/rhysmdnz">Rhys Davies</a> for the responsible disclosure.</p>
<p>Get the new release from <a href="https://github.com/matrix-org/synapse/releases/tag/v1.11.1">github</a> or any of the sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md.</p>
<p>Changelog since Synapse 1.11.0</p>
<h1 id="synapse-1-11-1-2020-03-03">Synapse 1.11.1 (2020-03-03)</h1>
<p>This release includes a security fix impacting installations using Single Sign-On (i.e. SAML2 or CAS) for authentication. Administrators of such installations are encouraged to upgrade as soon as possible.</p>
<p>The release also includes fixes for a couple of other bugs.</p>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Add a confirmation step to the SSO login flow before redirecting users to the redirect URL. (<a href="https://github.com/matrix-org/synapse/commit/b2bd54a2e31d9a248f73fadb184ae9b4cbdb49f9">b2bd54a2</a>, <a href="https://github.com/matrix-org/synapse/commit/65c73cdfec1876a9fec2fd2c3a74923cd146fe0b">65c73cdf</a>, <a href="https://github.com/matrix-org/synapse/commit/a0178df10422a76fd403b82d2b2a4ed28a9a9d1e">a0178df1</a>)</li>
<li>Fixed set a user as an admin with the admin API <code>PUT /_synapse/admin/v2/users/&lt;user_id&gt;</code>. Contributed by @dklimpel. (<a href="https://github.com/matrix-org/synapse/issues/6910">#6910</a>)</li>
<li>Fix bug introduced in Synapse 1.11.0 which sometimes caused errors when joining rooms over federation, with <code>'coroutine' object has no attribute 'event_id'</code>. (<a href="https://github.com/matrix-org/synapse/issues/6996">#6996</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;01&#x2F;28&#x2F;synapse-1-9-1-released&#x2F;" title="Synapse 1.9.1 released">Synapse 1.9.1 released</a></h2>
                <span>
                    28.01.2020 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>A quick bug fix release that affects admins making use of monthly active user limits. You will know if you are affected because 1.9.0 will not start up. Apologies if you were bitten by this one!</p>
<p>Get the new release from <a href="https://github.com/matrix-org/synapse/releases/tag/v1.9.1">github</a> or any of the sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md.</p>
<p>Changelog since Synapse 1.9.1</p>
<h1 id="synapse-1-9-1-2020-01-28">Synapse 1.9.1 (2020-01-28)</h1>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix bug where setting <code>mau_limit_reserved_threepids</code> config would cause Synapse to refuse to start. (<a href="https://github.com/matrix-org/synapse/issues/6793">#6793</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;01&#x2F;23&#x2F;synapse-1-9-0-released&#x2F;" title="Synapse 1.9.0 released">Synapse 1.9.0 released</a></h2>
                <span>
                    23.01.2020 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Synapse 1.9.0 contains a bunch of new admin APIs as well as bug fixes to existing ones. In particular we have a new end point that allows admins to <a href="https://github.com/matrix-org/synapse/blob/master/docs/admin_api/rooms.md">query which rooms their server participates in</a>.</p>
<p>Aside from that it is worth noting that we have officially dropped support for SQLite versions &lt; 3.11. Though more generally we would recommend that all admins <a href="https://github.com/matrix-org/synapse/blob/release-v1.9.0/docs/postgres.md">migrate to Postgres</a> for anything other than test and evaluation purposes.</p>
<p>Get the new release from <a href="https://github.com/matrix-org/synapse/releases/tag/v1.9.0">github</a> or any of the sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md.</p>
<p>Changelog since Synapse 1.8.0</p>
<h1 id="synapse-1-9-0-2020-01-23">Synapse 1.9.0 (2020-01-23)</h1>
<p><strong>WARNING</strong>: As of this release, Synapse no longer supports versions of SQLite before 3.11, and will refuse to start when configured to use an older version. Administrators are recommended to migrate their database to Postgres (see instructions <a href="https://github.com/matrix-org/synapse/blob/release-v1.9.0/docs/postgres.md">here</a>).</p>
<p>If your Synapse deployment uses workers, note that the reverse-proxy configurations for the <code>synapse.app.media_repository</code>, <code>synapse.app.federation_reader</code> and <code>synapse.app.event_creator</code> workers have changed, with the addition of a few paths (see the updated configurations <a href="https://github.com/matrix-org/synapse/blob/release-v1.9.0/docs/workers.md#available-worker-applications">here</a>). Existing configurations will continue to work.</p>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Fix endpoint documentation for the List Rooms admin API. (<a href="https://github.com/matrix-org/synapse/issues/6770">#6770</a>)</li>
</ul>
<h1 id="synapse-1-9-0rc1-2020-01-22">Synapse 1.9.0rc1 (2020-01-22)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Allow admin to create or modify a user. Contributed by Awesome Technologies Innovationslabor GmbH. (<a href="https://github.com/matrix-org/synapse/issues/5742">#5742</a>)</li>
<li>Add new quarantine media admin APIs to quarantine by media ID or by user who uploaded the media. (<a href="https://github.com/matrix-org/synapse/issues/6681">#6681</a>, <a href="https://github.com/matrix-org/synapse/issues/6756">#6756</a>)</li>
<li>Add <code>org.matrix.e2e_cross_signing</code> to <code>unstable_features</code> in <code>/versions</code> as per <a href="https://github.com/matrix-org/matrix-doc/pull/1756">MSC1756</a>. (<a href="https://github.com/matrix-org/synapse/issues/6712">#6712</a>)</li>
<li>Add a new admin API to list and filter rooms on the server. (<a href="https://github.com/matrix-org/synapse/issues/6720">#6720</a>)</li>
</ul>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Correctly proxy HTTP errors due to API calls to remote group servers. (<a href="https://github.com/matrix-org/synapse/issues/6654">#6654</a>)</li>
<li>Fix media repo admin APIs when using a media worker. (<a href="https://github.com/matrix-org/synapse/issues/6664">#6664</a>)</li>
<li>Fix &quot;CRITICAL&quot; errors being logged when a request is received for a uri containing non-ascii characters. (<a href="https://github.com/matrix-org/synapse/issues/6682">#6682</a>)</li>
<li>Fix a bug where we would assign a numeric user ID if somebody tried registering with an empty username. (<a href="https://github.com/matrix-org/synapse/issues/6690">#6690</a>)</li>
<li>Fix <code>purge_room</code> admin API. (<a href="https://github.com/matrix-org/synapse/issues/6711">#6711</a>)</li>
<li>Fix a bug causing Synapse to not always purge quiet rooms with a low <code>max_lifetime</code> in their message retention policies when running the automated purge jobs. (<a href="https://github.com/matrix-org/synapse/issues/6714">#6714</a>)</li>
<li>Fix the <code>synapse_port_db</code> not correctly running background updates. Thanks @tadzik for reporting. (<a href="https://github.com/matrix-org/synapse/issues/6718">#6718</a>)</li>
<li>Fix changing password via user admin API. (<a href="https://github.com/matrix-org/synapse/issues/6730">#6730</a>)</li>
<li>Fix <code>/events/:event_id</code> deprecated API. (<a href="https://github.com/matrix-org/synapse/issues/6731">#6731</a>)</li>
<li>Fix monthly active user limiting support for worker mode, fixes <a href="https://github.com/matrix-org/synapse/issues/4639">#4639</a>. (<a href="https://github.com/matrix-org/synapse/issues/6742">#6742</a>)</li>
<li>Fix bug when setting <code>account_validity</code> to an empty block in the config. Thanks to @Sorunome for reporting. (<a href="https://github.com/matrix-org/synapse/issues/6747">#6747</a>)</li>
<li>Fix <code>AttributeError: 'NoneType' object has no attribute 'get'</code> in <code>hash_password</code> when configuration has an empty <code>password_config</code>. Contributed by @ivilata. (<a href="https://github.com/matrix-org/synapse/issues/6753">#6753</a>)</li>
<li>Fix the <code>docker-compose.yaml</code> overriding the entire <code>/etc</code> folder of the container. Contributed by Fabian Meyer. (<a href="https://github.com/matrix-org/synapse/issues/6656">#6656</a>)</li>
</ul>
<h2 id="improved-documentation-1">Improved Documentation</h2>
<ul>
<li>Fix a typo in the configuration example for purge jobs in the sample configuration file. (<a href="https://github.com/matrix-org/synapse/issues/6621">#6621</a>)</li>
<li>Add complete documentation of the message retention policies support. (<a href="https://github.com/matrix-org/synapse/issues/6624">#6624</a>, <a href="https://github.com/matrix-org/synapse/issues/6665">#6665</a>)</li>
<li>Add some helpful tips about changelog entries to the GitHub pull request template. (<a href="https://github.com/matrix-org/synapse/issues/6663">#6663</a>)</li>
<li>Clarify the <code>account_validity</code> and <code>email</code> sections of the sample configuration. (<a href="https://github.com/matrix-org/synapse/issues/6685">#6685</a>)</li>
<li>Add more endpoints to the documentation for Synapse workers. (<a href="https://github.com/matrix-org/synapse/issues/6698">#6698</a>)</li>
</ul>
<h2 id="deprecations-and-removals">Deprecations and Removals</h2>
<ul>
<li>Synapse no longer supports versions of SQLite before 3.11, and will refuse to start when configured to use an older version. Administrators are recommended to migrate their database to Postgres (see instructions <a href="docs/postgres.md">here</a>). (<a href="https://github.com/matrix-org/synapse/issues/6675">#6675</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Add <code>local_current_membership</code> table for tracking local user membership state in rooms. (<a href="https://github.com/matrix-org/synapse/issues/6655">#6655</a>, <a href="https://github.com/matrix-org/synapse/issues/6728">#6728</a>)</li>
<li>Port <code>synapse.replication.tcp</code> to async/await. (<a href="https://github.com/matrix-org/synapse/issues/6666">#6666</a>)</li>
<li>Fixup <code>synapse.replication</code> to pass mypy checks. (<a href="https://github.com/matrix-org/synapse/issues/6667">#6667</a>)</li>
<li>Allow <code>additional_resources</code> to implement <code>IResource</code> directly. (<a href="https://github.com/matrix-org/synapse/issues/6686">#6686</a>)</li>
<li>Allow REST endpoint implementations to raise a <code>RedirectException</code>, which will redirect the user's browser to a given location. (<a href="https://github.com/matrix-org/synapse/issues/6687">#6687</a>)</li>
<li>Updates and extensions to the module API. (<a href="https://github.com/matrix-org/synapse/issues/6688">#6688</a>)</li>
<li>Updates to the SAML mapping provider API. (<a href="https://github.com/matrix-org/synapse/issues/6689">#6689</a>, <a href="https://github.com/matrix-org/synapse/issues/6723">#6723</a>)</li>
<li>Remove redundant <code>RegistrationError</code> class. (<a href="https://github.com/matrix-org/synapse/issues/6691">#6691</a>)</li>
<li>Don't block processing of incoming EDUs behind processing PDUs in the same transaction. (<a href="https://github.com/matrix-org/synapse/issues/6697">#6697</a>)</li>
<li>Remove duplicate check for the <code>session</code> query parameter on the <code>/auth/xxx/fallback/web</code> Client-Server endpoint. (<a href="https://github.com/matrix-org/synapse/issues/6702">#6702</a>)</li>
<li>Attempt to retry sending a transaction when we detect a remote server has come back online, rather than waiting for a transaction to be triggered by new data. (<a href="https://github.com/matrix-org/synapse/issues/6706">#6706</a>)</li>
<li>Add <code>StateMap</code> type alias to simplify types. (<a href="https://github.com/matrix-org/synapse/issues/6715">#6715</a>)</li>
<li>Add a <code>DeltaState</code> to track changes to be made to current state during event persistence. (<a href="https://github.com/matrix-org/synapse/issues/6716">#6716</a>)</li>
<li>Add more logging around message retention policies support. (<a href="https://github.com/matrix-org/synapse/issues/6717">#6717</a>)</li>
<li>When processing a SAML response, log the assertions for easier configuration. (<a href="https://github.com/matrix-org/synapse/issues/6724">#6724</a>)</li>
<li>Fixup <code>synapse.rest</code> to pass mypy. (<a href="https://github.com/matrix-org/synapse/issues/6732">#6732</a>, <a href="https://github.com/matrix-org/synapse/issues/6764">#6764</a>)</li>
<li>Fixup <code>synapse.api</code> to pass mypy. (<a href="https://github.com/matrix-org/synapse/issues/6733">#6733</a>)</li>
<li>Allow streaming cache 'invalidate all' to workers. (<a href="https://github.com/matrix-org/synapse/issues/6749">#6749</a>)</li>
<li>Remove unused CI docker compose files. (<a href="https://github.com/matrix-org/synapse/issues/6754">#6754</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;01&#x2F;09&#x2F;synapse-1-8-0-released&#x2F;" title="Synapse 1.8.0 released">Synapse 1.8.0 released</a></h2>
                <span>
                    09.01.2020 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Synapse 1.8.0 has arrived, it contains a whole host of bug fixes and tweaks, most notably fixing some long standing problems with search.</p>
<p>More generally we are spending a lot of time  improving the e2ee experience ahead of switching on e2ee by default, so watch this space.</p>
<p>Get the new release from <a href="https://github.com/matrix-org/synapse/releases/tag/v1.8.0">github</a> or any of the sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md.</p>
<h1 id="synapse-1-8-0-2020-01-09">Synapse 1.8.0 (2020-01-09)</h1>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix <code>GET</code> request on <code>/_synapse/admin/v2/users</code> endpoint. Contributed by Awesome Technologies Innovationslabor GmbH. (<a href="https://github.com/matrix-org/synapse/issues/6563">#6563</a>)</li>
<li>Fix incorrect signing of responses from the key server implementation. (<a href="https://github.com/matrix-org/synapse/issues/6657">#6657</a>)</li>
</ul>
<h1 id="synapse-1-8-0rc1-2020-01-07">Synapse 1.8.0rc1 (2020-01-07)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Add v2 APIs for the <code>send_join</code> and <code>send_leave</code> federation endpoints (as described in <a href="https://github.com/matrix-org/matrix-doc/pull/1802">MSC1802</a>). (<a href="https://github.com/matrix-org/synapse/issues/6349">#6349</a>)</li>
<li>Add a develop script to generate full SQL schemas. (<a href="https://github.com/matrix-org/synapse/issues/6394">#6394</a>)</li>
<li>Add custom SAML username mapping functionality through an external provider plugin. (<a href="https://github.com/matrix-org/synapse/issues/6411">#6411</a>)</li>
<li>Automatically delete empty groups/communities. (<a href="https://github.com/matrix-org/synapse/issues/6453">#6453</a>)</li>
<li>Add option <code>limit_profile_requests_to_users_who_share_rooms</code> to prevent requirement of a local user sharing a room with another user to query their profile information. (<a href="https://github.com/matrix-org/synapse/issues/6523">#6523</a>)</li>
<li>Add an <code>export_signing_key</code> script to extract the public part of signing keys when rotating them. (<a href="https://github.com/matrix-org/synapse/issues/6546">#6546</a>)</li>
<li>Add experimental config option to specify multiple databases. (<a href="https://github.com/matrix-org/synapse/issues/6580">#6580</a>)</li>
<li>Raise an error if someone tries to use the <code>log_file</code> config option. (<a href="https://github.com/matrix-org/synapse/issues/6626">#6626</a>)</li>
</ul>
<h2 id="bugfixes-1">Bugfixes</h2>
<ul>
<li>Prevent redacted events from being returned during message search. (<a href="https://github.com/matrix-org/synapse/issues/6377">#6377</a>, <a href="https://github.com/matrix-org/synapse/issues/6522">#6522</a>)</li>
<li>Prevent error on trying to search a upgraded room when the server is not in the predecessor room. (<a href="https://github.com/matrix-org/synapse/issues/6385">#6385</a>)</li>
<li>Improve performance of looking up cross-signing keys. (<a href="https://github.com/matrix-org/synapse/issues/6486">#6486</a>)</li>
<li>Fix race which occasionally caused deleted devices to reappear. (<a href="https://github.com/matrix-org/synapse/issues/6514">#6514</a>)</li>
<li>Fix missing row in <code>device_max_stream_id</code> that could cause unable to decrypt errors after server restart. (<a href="https://github.com/matrix-org/synapse/issues/6555">#6555</a>)</li>
<li>Fix a bug which meant that we did not send systemd notifications on startup if acme was enabled. (<a href="https://github.com/matrix-org/synapse/issues/6571">#6571</a>)</li>
<li>Fix exception when fetching the <code>matrix.org:ed25519:auto</code> key. (<a href="https://github.com/matrix-org/synapse/issues/6625">#6625</a>)</li>
<li>Fix bug where a moderator upgraded a room and became an admin in the new room. (<a href="https://github.com/matrix-org/synapse/issues/6633">#6633</a>)</li>
<li>Fix an error which was thrown by the <code>PresenceHandler</code> <code>_on_shutdown</code> handler. (<a href="https://github.com/matrix-org/synapse/issues/6640">#6640</a>)</li>
<li>Fix exceptions in the synchrotron worker log when events are rejected. (<a href="https://github.com/matrix-org/synapse/issues/6645">#6645</a>)</li>
<li>Ensure that upgraded rooms are removed from the directory. (<a href="https://github.com/matrix-org/synapse/issues/6648">#6648</a>)</li>
<li>Fix a bug causing Synapse not to fetch missing events when it believes it has every event in the room. (<a href="https://github.com/matrix-org/synapse/issues/6652">#6652</a>)</li>
</ul>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Document the Room Shutdown Admin API. (<a href="https://github.com/matrix-org/synapse/issues/6541">#6541</a>)</li>
<li>Reword sections of <a href="docs/federate.md">docs/federate.md</a> that explained delegation at time of Synapse 1.0 transition. (<a href="https://github.com/matrix-org/synapse/issues/6601">#6601</a>)</li>
<li>Added the section 'Configuration' in <a href="docs/turn-howto.md">docs/turn-howto.md</a>. (<a href="https://github.com/matrix-org/synapse/issues/6614">#6614</a>)</li>
</ul>
<h2 id="deprecations-and-removals">Deprecations and Removals</h2>
<ul>
<li>Remove redundant code from event authorisation implementation. (<a href="https://github.com/matrix-org/synapse/issues/6502">#6502</a>)</li>
<li>Remove unused, undocumented <code>/_matrix/content</code> API. (<a href="https://github.com/matrix-org/synapse/issues/6628">#6628</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Add <em>experimental</em> support for multiple physical databases and split out state storage to separate data store. (<a href="https://github.com/matrix-org/synapse/issues/6245">#6245</a>, <a href="https://github.com/matrix-org/synapse/issues/6510">#6510</a>, <a href="https://github.com/matrix-org/synapse/issues/6511">#6511</a>, <a href="https://github.com/matrix-org/synapse/issues/6513">#6513</a>, <a href="https://github.com/matrix-org/synapse/issues/6564">#6564</a>, <a href="https://github.com/matrix-org/synapse/issues/6565">#6565</a>)</li>
<li>Port sections of code base to async/await. (<a href="https://github.com/matrix-org/synapse/issues/6496">#6496</a>, <a href="https://github.com/matrix-org/synapse/issues/6504">#6504</a>, <a href="https://github.com/matrix-org/synapse/issues/6505">#6505</a>, <a href="https://github.com/matrix-org/synapse/issues/6517">#6517</a>, <a href="https://github.com/matrix-org/synapse/issues/6559">#6559</a>, <a href="https://github.com/matrix-org/synapse/issues/6647">#6647</a>, <a href="https://github.com/matrix-org/synapse/issues/6653">#6653</a>)</li>
<li>Remove <code>SnapshotCache</code> in favour of <code>ResponseCache</code>. (<a href="https://github.com/matrix-org/synapse/issues/6506">#6506</a>)</li>
<li>Silence mypy errors for files outside those specified. (<a href="https://github.com/matrix-org/synapse/issues/6512">#6512</a>)</li>
<li>Clean up some logging when handling incoming events over federation. (<a href="https://github.com/matrix-org/synapse/issues/6515">#6515</a>)</li>
<li>Test more folders against mypy. (<a href="https://github.com/matrix-org/synapse/issues/6534">#6534</a>)</li>
<li>Update <code>mypy</code> to new version. (<a href="https://github.com/matrix-org/synapse/issues/6537">#6537</a>)</li>
<li>Adjust the sytest blacklist for worker mode. (<a href="https://github.com/matrix-org/synapse/issues/6538">#6538</a>)</li>
<li>Remove unused <code>get_pagination_rows</code> methods from <code>EventSource</code> classes. (<a href="https://github.com/matrix-org/synapse/issues/6557">#6557</a>)</li>
<li>Clean up logs from the push notifier at startup. (<a href="https://github.com/matrix-org/synapse/issues/6558">#6558</a>)</li>
<li>Improve diagnostics on database upgrade failure. (<a href="https://github.com/matrix-org/synapse/issues/6570">#6570</a>)</li>
<li>Reduce the reconnect time when worker replication fails, to make it easier to catch up. (<a href="https://github.com/matrix-org/synapse/issues/6617">#6617</a>)</li>
<li>Simplify http handling by removing redundant <code>SynapseRequestFactory</code>. (<a href="https://github.com/matrix-org/synapse/issues/6619">#6619</a>)</li>
<li>Add a workaround for synapse raising exceptions when fetching the notary's own key from the notary. (<a href="https://github.com/matrix-org/synapse/issues/6620">#6620</a>)</li>
<li>Automate generation of the sample log config. (<a href="https://github.com/matrix-org/synapse/issues/6627">#6627</a>)</li>
<li>Simplify event creation code by removing redundant queries on the <code>event_reference_hashes</code> table. (<a href="https://github.com/matrix-org/synapse/issues/6629">#6629</a>)</li>
<li>Fix errors when <code>frozen_dicts</code> are enabled. (<a href="https://github.com/matrix-org/synapse/issues/6642">#6642</a>)</li>
</ul>
<p>Get the new release from <a href="https://github.com/matrix-org/synapse/releases/tag/v1.8.0">github</a> or any of the sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;12&#x2F;31&#x2F;synapse-1-7-3-released&#x2F;" title="Synapse 1.7.3 released">Synapse 1.7.3 released</a></h2>
                <span>
                    31.12.2019 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>We've just released Synapse 1.7.3 - an important bug fix to address a class of failures due to malformed events.  We've seen this in the wild over the last few days, so we'd recommend updating as soon as possible, especially if you are having problems federating.</p>
<p>Get the new release from <a href="https://github.com/matrix-org/synapse/releases/tag/v1.7.3">github</a> or any of the sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md.</p>
<p>The changelog since 1.7.2 is:</p>
<h1 id="synapse-1-7-3-2019-12-31">Synapse 1.7.3 (2019-12-31)</h1>
<p>This release fixes a long-standing bug in the state resolution algorithm.</p>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix exceptions caused by state resolution choking on malformed events. (<a href="https://github.com/matrix-org/synapse/issues/6608">#6608</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;12&#x2F;20&#x2F;synapse-1-7-2-released&#x2F;" title="Synapse 1.7.2 released">Synapse 1.7.2 released</a></h2>
                <span>
                    20.12.2019 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>We've just released Synapse 1.7.2 - a minor point release to address two regressions which snuck into 1.7.0 and 1.7.1.  Sorry for the upgrade faff; hopefully we will be back to a saner release cadence shortly.  Reminder that if you are on 1.7.0 or earlier you should upgrade asap as 1.7.1 contained security fixes.</p>
<p>Get the new release from <a href="https://github.com/matrix-org/synapse/releases/tag/v1.7.2">github</a> or any of the sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md.</p>
<p>The changelog since 1.7.1 is:</p>
<h1 id="synapse-1-7-2-2019-12-20">Synapse 1.7.2 (2019-12-20)</h1>
<p>This release fixes some regressions introduced in Synapse 1.7.0 and 1.7.1.</p>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix a regression introduced in Synapse 1.7.1 which caused errors when attempting to backfill rooms over federation. (<a href="https://github.com/matrix-org/synapse/issues/6576">#6576</a>)</li>
<li>Fix a bug introduced in Synapse 1.7.0 which caused an error on startup when upgrading from versions before 1.3.0. (<a href="https://github.com/matrix-org/synapse/issues/6578">#6578</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;12&#x2F;18&#x2F;synapse-1-7-1-released&#x2F;" title="Synapse 1.7.1 released">Synapse 1.7.1 released</a></h2>
                <span>
                    18.12.2019 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/richard-van-der-hoff">
                        Richard van der Hoff
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi folks; today we are releasing Synapse 1.7.1.</p>
<p>This is a security release which fixes some problems which affected all previous versions of Synapse. We advise all admins whose servers are open to public federation to upgrade as soon as possible.</p>
<p>Full details follow, but the most important change improves event authorization, thereby preventing the ability to add certain events to a given room erroneously.</p>
<p>You can get the new release from <a href="https://github.com/matrix-org/synapse/releases/tag/v1.7.1">github</a> or any of the sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md.</p>
<p>The changelog since 1.7.0 follows:</p>
<h2 id="security-updates">Security updates</h2>
<ul>
<li>Fix a bug which could cause room events to be incorrectly authorized using events from a different room. (<a href="https://github.com/matrix-org/synapse/issues/6501">#6501</a>, <a href="https://github.com/matrix-org/synapse/issues/6503">#6503</a>, <a href="https://github.com/matrix-org/synapse/issues/6521">#6521</a>, <a href="https://github.com/matrix-org/synapse/issues/6524">#6524</a>, <a href="https://github.com/matrix-org/synapse/issues/6530">#6530</a>, <a href="https://github.com/matrix-org/synapse/issues/6531">#6531</a>)</li>
<li>Fix a bug causing responses to the <code>/context</code> client endpoint to not use the pruned version of the event. (<a href="https://github.com/matrix-org/synapse/issues/6553">#6553</a>)</li>
<li>Fix a cause of state resets in room versions 2 onwards. (<a href="https://github.com/matrix-org/synapse/issues/6556">#6556</a>, <a href="https://github.com/matrix-org/synapse/issues/6560">#6560</a>)</li>
</ul>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix a bug which could cause the federation server to incorrectly return errors when handling certain obscure event graphs. (<a href="https://github.com/matrix-org/synapse/issues/6526">#6526</a>, <a href="https://github.com/matrix-org/synapse/issues/6527">#6527</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;12&#x2F;13&#x2F;synapse-1-7-0-released&#x2F;" title="Synapse 1.7.0 released">Synapse 1.7.0 released</a></h2>
                <span>
                    13.12.2019 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hello people, it’s Synapse 1.7.0 time.</p>
<p>This release includes some long requested features, most notably the ability to automatically delete message data after a predefined period. For more details take a look at the config <a href="https://github.com/matrix-org/synapse/blob/v1.7.0/docs/sample_config.yaml#L332-L393">here</a> ─ it should be pretty self explanatory.</p>
<p>Another significant change this release is to explicitly set room directories to be private by default. Previously it was possible to inadvertently configure the directory to be visible to arbitrary Matrix servers and the internet in general.</p>
<p>This means that for those admins who want their room directories to be publicly searchable (matrix.org for instance) they need to explicitly say so in the config. For more details see the <a href="https://github.com/matrix-org/synapse/blob/v1.7.0/UPGRADE.rst#upgrading-to-v170">upgrade notes</a> and our <a href="https://matrix.org/blog/2019/11/09/avoiding-unwelcome-visitors-on-private-matrix-servers/">blog post</a> explaining the situation in greater detail.</p>
<p>We also have early support for ephemeral messages, as well as the ability to specify a reason when rejecting an invite (amongst other actions).</p>
<p>Aside from all of that, we want to let you know about some changes on the horizon. Currently Synapse runs Sqlite by default. This is great in that it gets new admins going quickly without needing to install and configure Postgres. The downside of using Sqlite is that it offers very poor performance, especially once a server tries to join the federation. In truth Sqlite is only really there to demonstrate the service, but for anything other than the most trivial cases it is essential to migrate to Postgres.</p>
<p>Over the past few months we’ve been working to improve the migration path to Postgres such that finally we feel confident to actively encourage admins to migrate. What’s more, in a future release we will forcibly prevent SQLite-backed servers federating unless the admin explicitly sets a config flag to show that they understand the trade-off they are making.</p>
<p>Overall we see these changes as something that will improve everyone’s experience of the matrix federation. We’ll talk more about this closer to the time, but please expect a change in the coming months and if you are running SQLite, consider this a nudge to get yourself migrated.</p>
<p>As ever, you can get the new update <a href="https://github.com/matrix-org/synapse/releases/tag/v1.7.0">here</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Also, check out our <a href="https://matrix.org/docs/guides/installing-synapse">Synapse installation guide page</a>.</p>
<p>The changelog since 1.6.1 follows:</p>
<h1 id="synapse-1-7-0-2019-12-13">Synapse 1.7.0 (2019-12-13)</h1>
<p>This release changes the default settings so that only local authenticated users can query the server's room directory. See the <a href="https://github.com/matrix-org/synapse/blob/v1.7.0/UPGRADE.rst#upgrading-to-v170">upgrade notes</a> for details.</p>
<p>Support for SQLite versions before 3.11 is now deprecated. A future release will refuse to start if used with an SQLite version before 3.11.</p>
<p>Administrators are reminded that SQLite should not be used for production instances. Instructions for migrating to Postgres are available <a href="https://github.com/matrix-org/synapse/blob/v1.7.0/docs/postgres.md">here</a>. A future release of synapse will, by default, disable federation for servers using SQLite.</p>
<p>No significant changes since 1.7.0rc2.</p>
<h1 id="synapse-1-7-0rc2-2019-12-11">Synapse 1.7.0rc2 (2019-12-11)</h1>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix incorrect error message for invalid requests when setting user's avatar URL. (<a href="https://github.com/matrix-org/synapse/issues/6497">#6497</a>)</li>
<li>Fix support for SQLite 3.7. (<a href="https://github.com/matrix-org/synapse/issues/6499">#6499</a>)</li>
<li>Fix regression where sending email push would not work when using a pusher worker. (<a href="https://github.com/matrix-org/synapse/issues/6507">#6507</a>, <a href="https://github.com/matrix-org/synapse/issues/6509">#6509</a>)</li>
</ul>
<h1 id="synapse-1-7-0rc1-2019-12-09">Synapse 1.7.0rc1 (2019-12-09)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Implement per-room message retention policies. (<a href="https://github.com/matrix-org/synapse/issues/5815">#5815</a>, <a href="https://github.com/matrix-org/synapse/issues/6436">#6436</a>)</li>
<li>Add etag and count fields to key backup endpoints to help clients guess if there are new keys. (<a href="https://github.com/matrix-org/synapse/issues/5858">#5858</a>)</li>
<li>Add <code>/admin/v2/users</code> endpoint with pagination. Contributed by Awesome Technologies Innovationslabor GmbH. (<a href="https://github.com/matrix-org/synapse/issues/5925">#5925</a>)</li>
<li>Require User-Interactive Authentication for <code>/account/3pid/add</code>, meaning the user's password will be required to add a third-party ID to their account. (<a href="https://github.com/matrix-org/synapse/issues/6119">#6119</a>)</li>
<li>Implement the <code>/_matrix/federation/unstable/net.atleastfornow/state/&lt;context&gt;</code> API as drafted in MSC2314. (<a href="https://github.com/matrix-org/synapse/issues/6176">#6176</a>)</li>
<li>Configure privacy-preserving settings by default for the room directory. (<a href="https://github.com/matrix-org/synapse/issues/6355">#6355</a>)</li>
<li>Add ephemeral messages support by partially implementing <a href="https://github.com/matrix-org/matrix-doc/pull/2228">MSC2228</a>. (<a href="https://github.com/matrix-org/synapse/issues/6409">#6409</a>)</li>
<li>Add support for <a href="https://github.com/matrix-org/matrix-doc/pull/2367">MSC 2367</a>, which allows specifying a reason on all membership events. (<a href="https://github.com/matrix-org/synapse/issues/6434">#6434</a>)</li>
</ul>
<h2 id="bugfixes-1">Bugfixes</h2>
<ul>
<li>Transfer non-standard power levels on room upgrade. (<a href="https://github.com/matrix-org/synapse/issues/6237">#6237</a>)</li>
<li>Fix error from the Pillow library when uploading RGBA images. (<a href="https://github.com/matrix-org/synapse/issues/6241">#6241</a>)</li>
<li>Correctly apply the event filter to the <code>state</code>, <code>events_before</code> and <code>events_after</code> fields in the response to <code>/context</code> requests. (<a href="https://github.com/matrix-org/synapse/issues/6329">#6329</a>)</li>
<li>Fix caching devices for remote users when using workers, so that we don't attempt to refetch (and potentially fail) each time a user requests devices. (<a href="https://github.com/matrix-org/synapse/issues/6332">#6332</a>)</li>
<li>Prevent account data syncs getting lost across TCP replication. (<a href="https://github.com/matrix-org/synapse/issues/6333">#6333</a>)</li>
<li>Fix bug: TypeError in <code>register_user()</code> while using LDAP auth module. (<a href="https://github.com/matrix-org/synapse/issues/6406">#6406</a>)</li>
<li>Fix an intermittent exception when handling read-receipts. (<a href="https://github.com/matrix-org/synapse/issues/6408">#6408</a>)</li>
<li>Fix broken guest registration when there are existing blocks of numeric user IDs. (<a href="https://github.com/matrix-org/synapse/issues/6420">#6420</a>)</li>
<li>Fix startup error when http proxy is defined. (<a href="https://github.com/matrix-org/synapse/issues/6421">#6421</a>)</li>
<li>Fix error when using synapse_port_db on a vanilla synapse db. (<a href="https://github.com/matrix-org/synapse/issues/6449">#6449</a>)</li>
<li>Fix uploading multiple cross signing signatures for the same user. (<a href="https://github.com/matrix-org/synapse/issues/6451">#6451</a>)</li>
<li>Fix bug which lead to exceptions being thrown in a loop when a cross-signed device is deleted. (<a href="https://github.com/matrix-org/synapse/issues/6462">#6462</a>)</li>
<li>Fix <code>synapse_port_db</code> not exiting with a 0 code if something went wrong during the port process. (<a href="https://github.com/matrix-org/synapse/issues/6470">#6470</a>)</li>
<li>Improve sanity-checking when receiving events over federation. (<a href="https://github.com/matrix-org/synapse/issues/6472">#6472</a>)</li>
<li>Fix inaccurate per-block Prometheus metrics. (<a href="https://github.com/matrix-org/synapse/issues/6491">#6491</a>)</li>
<li>Fix small performance regression for sending invites. (<a href="https://github.com/matrix-org/synapse/issues/6493">#6493</a>)</li>
<li>Back out cross-signing code added in Synapse 1.5.0, which caused a performance regression. (<a href="https://github.com/matrix-org/synapse/issues/6494">#6494</a>)</li>
</ul>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Update documentation and variables in user contributed systemd reference file. (<a href="https://github.com/matrix-org/synapse/issues/6369">#6369</a>, <a href="https://github.com/matrix-org/synapse/issues/6490">#6490</a>)</li>
<li>Fix link in the user directory documentation. (<a href="https://github.com/matrix-org/synapse/issues/6388">#6388</a>)</li>
<li>Add build instructions to the docker readme. (<a href="https://github.com/matrix-org/synapse/issues/6390">#6390</a>)</li>
<li>Switch Ubuntu package install recommendation to use python3 packages in INSTALL.md. (<a href="https://github.com/matrix-org/synapse/issues/6443">#6443</a>)</li>
<li>Write some docs for the quarantine_media api. (<a href="https://github.com/matrix-org/synapse/issues/6458">#6458</a>)</li>
<li>Convert CONTRIBUTING.rst to markdown (among other small fixes). (<a href="https://github.com/matrix-org/synapse/issues/6461">#6461</a>)</li>
</ul>
<h2 id="deprecations-and-removals">Deprecations and Removals</h2>
<ul>
<li>Remove admin/v1/users_paginate endpoint. Contributed by Awesome Technologies Innovationslabor GmbH. (<a href="https://github.com/matrix-org/synapse/issues/5925">#5925</a>)</li>
<li>Remove fallback for federation with old servers which lack the /federation/v1/state_ids API. (<a href="https://github.com/matrix-org/synapse/issues/6488">#6488</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Add benchmarks for structured logging and improve output performance. (<a href="https://github.com/matrix-org/synapse/issues/6266">#6266</a>)</li>
<li>Improve the performance of outputting structured logging. (<a href="https://github.com/matrix-org/synapse/issues/6322">#6322</a>)</li>
<li>Refactor some code in the event authentication path for clarity. (<a href="https://github.com/matrix-org/synapse/issues/6343">#6343</a>, <a href="https://github.com/matrix-org/synapse/issues/6468">#6468</a>, <a href="https://github.com/matrix-org/synapse/issues/6480">#6480</a>)</li>
<li>Clean up some unnecessary quotation marks around the codebase. (<a href="https://github.com/matrix-org/synapse/issues/6362">#6362</a>)</li>
<li>Complain on startup instead of 500'ing during runtime when <code>public_baseurl</code> isn't set when necessary. (<a href="https://github.com/matrix-org/synapse/issues/6379">#6379</a>)</li>
<li>Add a test scenario to make sure room history purges don't break <code>/messages</code> in the future. (<a href="https://github.com/matrix-org/synapse/issues/6392">#6392</a>)</li>
<li>Clarifications for the email configuration settings. (<a href="https://github.com/matrix-org/synapse/issues/6423">#6423</a>)</li>
<li>Add more tests to the blacklist when running in worker mode. (<a href="https://github.com/matrix-org/synapse/issues/6429">#6429</a>)</li>
<li>Refactor data store layer to support multiple databases in the future. (<a href="https://github.com/matrix-org/synapse/issues/6454">#6454</a>, <a href="https://github.com/matrix-org/synapse/issues/6464">#6464</a>, <a href="https://github.com/matrix-org/synapse/issues/6469">#6469</a>, <a href="https://github.com/matrix-org/synapse/issues/6487">#6487</a>)</li>
<li>Port synapse.rest.client.v1 to async/await. (<a href="https://github.com/matrix-org/synapse/issues/6482">#6482</a>)</li>
<li>Port synapse.rest.client.v2_alpha to async/await. (<a href="https://github.com/matrix-org/synapse/issues/6483">#6483</a>)</li>
<li>Port SyncHandler to async/await. (<a href="https://github.com/matrix-org/synapse/issues/6484">#6484</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;11&#x2F;26&#x2F;synapse-1-6-0-released&#x2F;" title="Synapse 1.6.0 released">Synapse 1.6.0 released</a></h2>
                <span>
                    26.11.2019 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Synapse 1.6.0 has landed and is here to brighten your day!</p>
<p>1.6.0's most notable feature is that of label based filtering. It allows for messages to be tagged with a given label so that clients can filter on the label, this means that clients can subscribe to specific topics in a room, such as #lunch.</p>
<p>Completely separately, from here on in new rooms will be version 5 by default, all this means in practice is that servers will respect server signing key validity periods. This won't make a lot of difference in day to day operation, but it is an important security consideration and we now have sufficient penetration across the federation to make version 5 the default.</p>
<p>Aside from that there are a bunch of bug fixes and improvements, including fixing a bug that in some cases prevented messages being decrypted shortly after a restart (<a href="https://github.com/matrix-org/synapse/issues/6363">#6363</a>) and generally improving the room upgrade experience (<a href="https://github.com/matrix-org/synapse/issues/6232">#6232</a>, <a href="https://github.com/matrix-org/synapse/issues/6235">#6235</a>).</p>
<p>As ever, you can get the new update <a href="https://github.com/matrix-org/synapse/releases/tag/v1.6.0">here</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Also, check out our <a href="https://matrix.org/docs/guides/installing-synapse">Synapse installation guide page</a></p>
<p>The changelog since 1.5.1 follows:</p>
<h1 id="synapse-1-6-0-2019-11-26">Synapse 1.6.0 (2019-11-26)</h1>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix phone home stats reporting. (<a href="https://github.com/matrix-org/synapse/issues/6418">#6418</a>)</li>
</ul>
<h1 id="synapse-1-6-0rc2-2019-11-25">Synapse 1.6.0rc2 (2019-11-25)</h1>
<h2 id="bugfixes-1">Bugfixes</h2>
<ul>
<li>Fix a bug which could cause the background database update handler for event labels to get stuck in a loop raising exceptions. (<a href="https://github.com/matrix-org/synapse/issues/6407">#6407</a>)</li>
</ul>
<h1 id="synapse-1-6-0rc1-2019-11-20">Synapse 1.6.0rc1 (2019-11-20)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Add federation support for cross-signing. (<a href="https://github.com/matrix-org/synapse/issues/5727">#5727</a>)</li>
<li>Increase default room version from 4 to 5, thereby enforcing server key validity period checks. (<a href="https://github.com/matrix-org/synapse/issues/6220">#6220</a>)</li>
<li>Add support for outbound http proxying via http_proxy/HTTPS_PROXY env vars. (<a href="https://github.com/matrix-org/synapse/issues/6238">#6238</a>)</li>
<li>Implement label-based filtering on <code>/sync</code> and <code>/messages</code> (<a href="https://github.com/matrix-org/matrix-doc/pull/2326">MSC2326</a>). (<a href="https://github.com/matrix-org/synapse/issues/6301">#6301</a>, <a href="https://github.com/matrix-org/synapse/issues/6310">#6310</a>, <a href="https://github.com/matrix-org/synapse/issues/6340">#6340</a>)</li>
</ul>
<h2 id="bugfixes-2">Bugfixes</h2>
<ul>
<li>Fix LruCache callback deduplication for Python 3.8. Contributed by @V02460. (<a href="https://github.com/matrix-org/synapse/issues/6213">#6213</a>)</li>
<li>Remove a room from a server's public rooms list on room upgrade. (<a href="https://github.com/matrix-org/synapse/issues/6232">#6232</a>, <a href="https://github.com/matrix-org/synapse/issues/6235">#6235</a>)</li>
<li>Delete keys from key backup when deleting backup versions. (<a href="https://github.com/matrix-org/synapse/issues/6253">#6253</a>)</li>
<li>Make notification of cross-signing signatures work with workers. (<a href="https://github.com/matrix-org/synapse/issues/6254">#6254</a>)</li>
<li>Fix exception when remote servers attempt to join a room that they're not allowed to join. (<a href="https://github.com/matrix-org/synapse/issues/6278">#6278</a>)</li>
<li>Prevent errors from appearing on Synapse startup if <code>git</code> is not installed. (<a href="https://github.com/matrix-org/synapse/issues/6284">#6284</a>)</li>
<li>Appservice requests will no longer contain a double slash prefix when the appservice url provided ends in a slash. (<a href="https://github.com/matrix-org/synapse/issues/6306">#6306</a>)</li>
<li>Fix <code>/purge_room</code> admin API. (<a href="https://github.com/matrix-org/synapse/issues/6307">#6307</a>)</li>
<li>Fix the <code>hidden</code> field in the <code>devices</code> table for SQLite versions prior to 3.23.0. (<a href="https://github.com/matrix-org/synapse/issues/6313">#6313</a>)</li>
<li>Fix bug which caused rejected events to be persisted with the wrong room state. (<a href="https://github.com/matrix-org/synapse/issues/6320">#6320</a>)</li>
<li>Fix bug where <code>rc_login</code> ratelimiting would prematurely kick in. (<a href="https://github.com/matrix-org/synapse/issues/6335">#6335</a>)</li>
<li>Prevent the server taking a long time to start up when guest registration is enabled. (<a href="https://github.com/matrix-org/synapse/issues/6338">#6338</a>)</li>
<li>Fix bug where upgrading a guest account to a full user would fail when account validity is enabled. (<a href="https://github.com/matrix-org/synapse/issues/6359">#6359</a>)</li>
<li>Fix <code>to_device</code> stream ID getting reset every time Synapse restarts, which had the potential to cause unable to decrypt errors. (<a href="https://github.com/matrix-org/synapse/issues/6363">#6363</a>)</li>
<li>Fix permission denied error when trying to generate a config file with the docker image. (<a href="https://github.com/matrix-org/synapse/issues/6389">#6389</a>)</li>
</ul>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Contributor documentation now mentions script to run linters. (<a href="https://github.com/matrix-org/synapse/issues/6164">#6164</a>)</li>
<li>Modify CAPTCHA_SETUP.md to update the terms <code>private key</code> and <code>public key</code> to <code>secret key</code> and <code>site key</code> respectively. Contributed by Yash Jipkate. (<a href="https://github.com/matrix-org/synapse/issues/6257">#6257</a>)</li>
<li>Update <code>INSTALL.md</code> Email section to talk about <code>account_threepid_delegates</code>. (<a href="https://github.com/matrix-org/synapse/issues/6272">#6272</a>)</li>
<li>Fix a small typo in <code>account_threepid_delegates</code> configuration option. (<a href="https://github.com/matrix-org/synapse/issues/6273">#6273</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Add a CI job to test the <code>synapse_port_db</code> script. (<a href="https://github.com/matrix-org/synapse/issues/6140">#6140</a>, <a href="https://github.com/matrix-org/synapse/issues/6276">#6276</a>)</li>
<li>Convert EventContext to an attrs. (<a href="https://github.com/matrix-org/synapse/issues/6218">#6218</a>)</li>
<li>Move <code>persist_events</code> out from main data store. (<a href="https://github.com/matrix-org/synapse/issues/6240">#6240</a>, <a href="https://github.com/matrix-org/synapse/issues/6300">#6300</a>)</li>
<li>Reduce verbosity of user/room stats. (<a href="https://github.com/matrix-org/synapse/issues/6250">#6250</a>)</li>
<li>Reduce impact of debug logging. (<a href="https://github.com/matrix-org/synapse/issues/6251">#6251</a>)</li>
<li>Expose some homeserver functionality to spam checkers. (<a href="https://github.com/matrix-org/synapse/issues/6259">#6259</a>)</li>
<li>Change cache descriptors to always return deferreds. (<a href="https://github.com/matrix-org/synapse/issues/6263">#6263</a>, <a href="https://github.com/matrix-org/synapse/issues/6291">#6291</a>)</li>
<li>Fix incorrect comment regarding the functionality of an <code>if</code> statement. (<a href="https://github.com/matrix-org/synapse/issues/6269">#6269</a>)</li>
<li>Update CI to run <code>isort</code> over the <code>scripts</code> and <code>scripts-dev</code> directories. (<a href="https://github.com/matrix-org/synapse/issues/6270">#6270</a>)</li>
<li>Replace every instance of <code>logger.warn</code> method with <code>logger.warning</code> as the former is deprecated. (<a href="https://github.com/matrix-org/synapse/issues/6271">#6271</a>, <a href="https://github.com/matrix-org/synapse/issues/6314">#6314</a>)</li>
<li>Port replication http server endpoints to async/await. (<a href="https://github.com/matrix-org/synapse/issues/6274">#6274</a>)</li>
<li>Port room rest handlers to async/await. (<a href="https://github.com/matrix-org/synapse/issues/6275">#6275</a>)</li>
<li>Remove redundant CLI parameters on CI's <code>flake8</code> step. (<a href="https://github.com/matrix-org/synapse/issues/6277">#6277</a>)</li>
<li>Port <code>federation_server.py</code> to async/await. (<a href="https://github.com/matrix-org/synapse/issues/6279">#6279</a>)</li>
<li>Port receipt and read markers to async/wait. (<a href="https://github.com/matrix-org/synapse/issues/6280">#6280</a>)</li>
<li>Split out state storage into separate data store. (<a href="https://github.com/matrix-org/synapse/issues/6294">#6294</a>, <a href="https://github.com/matrix-org/synapse/issues/6295">#6295</a>)</li>
<li>Refactor EventContext for clarity. (<a href="https://github.com/matrix-org/synapse/issues/6298">#6298</a>)</li>
<li>Update the version of black used to 19.10b0. (<a href="https://github.com/matrix-org/synapse/issues/6304">#6304</a>)</li>
<li>Add some documentation about worker replication. (<a href="https://github.com/matrix-org/synapse/issues/6305">#6305</a>)</li>
<li>Move admin endpoints into separate files. Contributed by Awesome Technologies Innovationslabor GmbH. (<a href="https://github.com/matrix-org/synapse/issues/6308">#6308</a>)</li>
<li>Document the use of <code>lint.sh</code> for code style enforcement &amp; extend it to run on specified paths only. (<a href="https://github.com/matrix-org/synapse/issues/6312">#6312</a>)</li>
<li>Add optional python dependencies and dependant binary libraries to snapcraft packaging. (<a href="https://github.com/matrix-org/synapse/issues/6317">#6317</a>)</li>
<li>Remove the dependency on psutil and replace functionality with the stdlib <code>resource</code> module. (<a href="https://github.com/matrix-org/synapse/issues/6318">#6318</a>, <a href="https://github.com/matrix-org/synapse/issues/6336">#6336</a>)</li>
<li>Improve documentation for EventContext fields. (<a href="https://github.com/matrix-org/synapse/issues/6319">#6319</a>)</li>
<li>Add some checks that we aren't using state from rejected events. (<a href="https://github.com/matrix-org/synapse/issues/6330">#6330</a>)</li>
<li>Add continuous integration for python 3.8. (<a href="https://github.com/matrix-org/synapse/issues/6341">#6341</a>)</li>
<li>Correct spacing/case of various instances of the word &quot;homeserver&quot;. (<a href="https://github.com/matrix-org/synapse/issues/6357">#6357</a>)</li>
<li>Temporarily blacklist the failing unit test PurgeRoomTestCase.test_purge_room. (<a href="https://github.com/matrix-org/synapse/issues/6361">#6361</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;11&#x2F;08&#x2F;client-server-r0-6-0-and-identity-service-r0-3-0-releases&#x2F;" title="Client-server r0.6.0 and Identity Service r0.3.0 releases">Client-server r0.6.0 and Identity Service r0.3.0 releases</a></h2>
                <span>
                    08.11.2019 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/travis-ralston">
                        Travis Ralston
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hey all,</p>
<p>For the last several months the team has been working on <a href="https://matrix.org/blog/2019/06/30/tightening-up-privacy-in-matrix">tightening up privacy in Matrix</a>, and with the <a href="https://matrix.org/blog/2019/09/27/privacy-improvements-in-synapse-1-4-and-riot-1-4">1.4 release of Synapse and Riot</a> quite a lot has been done in the area. One of the remaining pieces was to release all the specification changes to help other client/server implementations achieve the same goals, and now we've done that.</p>
<p>The <a href="https://matrix.org/docs/spec/client_server/r0.6.0">Client-Server r0.6.0</a> and <a href="https://matrix.org/docs/spec/identity_service/r0.3.0">Identity Service r0.3.0</a> spec releases both cover the privacy improvements added through a number of MSCs in the last few months. Of particular note is that identity servers are now expected to support terms of service endpoints, which requires authentication that clients might need to worry about - check the spec changelogs for details.</p>
<p>The full changelog for the Client-Server r0.6.0 release is:</p>
<ul>
<li>
<p>Breaking Changes</p>
<ul>
<li>Add <code>id_access_token</code> as a required request parameter to a few
endpoints which require an <code>id_server</code> parameter as part of
<a href="https://github.com/matrix-org/matrix-doc/pull/2140">MSC2140</a>.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2255">#2255</a>)</li>
</ul>
</li>
<li>
<p>New Endpoints</p>
<ul>
<li>Add <code>POST /account/3pid/unbind</code> for removing a 3PID from an identity
server.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2282">#2282</a>)</li>
</ul>
</li>
<li>
<p>Backwards Compatible Changes</p>
<ul>
<li>Add <code>M_USER_DEACTIVATED</code> error code.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2234">#2234</a>)</li>
<li>Remove <code>bind_msisdn</code> and <code>bind_email</code> from <code>/register</code> now that the
identity server's bind endpoint requires authentication.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2279">#2279</a>)</li>
<li>Add <code>m.identity_server</code> account data for tracking the user's
preferred identity server.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2281">#2281</a>)</li>
<li>Deprecate <code>id_server</code> and make it optional in several places.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2310">#2310</a>)</li>
</ul>
</li>
<li>
<p>Spec Clarifications</p>
<ul>
<li>Add missing format fields to <code>m.room.message$m.notice</code> schema.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2125">#2125</a>)</li>
<li>Remove &quot;required&quot; designation from the <code>url</code> field of certain
<code>m.room.message</code> msgtypes.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2129">#2129</a>)</li>
<li>Fix various typos throughout the specification.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2131">#2131</a>,
<a href="https://github.com/matrix-org/matrix-doc/issues/2136">#2136</a>,
<a href="https://github.com/matrix-org/matrix-doc/issues/2148">#2148</a>,
<a href="https://github.com/matrix-org/matrix-doc/issues/2215">#2215</a>)</li>
<li>Clarify the distinction between <code>m.key.verification.start</code> and its
<code>m.sas.v1</code> variant.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2132">#2132</a>)</li>
<li>Fix link to Olm signing specification.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2133">#2133</a>)</li>
<li>Clarify the conditions for the <code>.m.rule.room_one_to_one</code> push rule.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2152">#2152</a>)</li>
<li>Clarify the encryption algorithms supported by the device of the
device keys example.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2157">#2157</a>)</li>
<li>Clarify that <code>/rooms/:roomId/event/:eventId</code> returns a Matrix error.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2204">#2204</a>)</li>
<li>Add a missing <code>state_key</code> check on <code>.m.rule.tombstone</code>.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2223">#2223</a>)</li>
<li>Fix the <code>m.room_key_request</code> <code>action</code> value, setting it from
<code>cancel_request</code> to <code>request_cancellation</code>.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2247">#2247</a>)</li>
<li>Clarify that the <code>submit_url</code> field is without authentication.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2341">#2341</a>)</li>
<li>Clarify the expected phone number format.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2342">#2342</a>)</li>
<li>Clarify that clients should consider not requesting URL previews in
encrypted rooms.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2343">#2343</a>)</li>
<li>Add missing information on how filters are meant to work with
<code>/context</code>.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2344">#2344</a>)</li>
<li>Clarify what the keys are for rooms in <code>/sync</code>.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2345">#2345</a>)</li>
</ul>
</li>
</ul>
<p>The full changelog for the Identity Service r0.3.0 release is:</p>
<ul>
<li>
<p>New Endpoints</p>
<ul>
<li>Add <code>/account</code>, <code>/account/register</code>, and <code>/account/logout</code> to
authenticate with the identity server.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2255">#2255</a>)</li>
<li>Add endpoints for accepting and handling terms of service.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2258">#2258</a>)</li>
<li>Add <code>/hash_details</code> and a new <code>/lookup</code> endpoint for performing
hashed association lookups.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2287">#2287</a>)</li>
</ul>
</li>
<li>
<p>Backwards Compatible Changes</p>
<ul>
<li>Deprecate the v1 API in favour of an authenticated v2 API.
(<a href="https://github.com/matrix-org/matrix-doc/issues/2254">#2254</a>)</li>
</ul>
</li>
</ul>

                
            </div>
        </article>
        
        <nav class="pagination">
    <div class="prev">
        
        <a href="&#x2F;category&#x2F;releases&#x2F;page&#x2F;9&#x2F;">‹ Previous</a>
        
    </div>
    <span class="page-number">10 / 14</span>
    <div class="prev">
        
        <a href="&#x2F;category&#x2F;releases&#x2F;page&#x2F;11&#x2F;">Next ›</a>
        
    </div>
</nav>

    </div>
</div>

    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;security-hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p>© 2022 The Matrix.org Foundation C.I.C.</p>
</footer>

</body>

</html>
