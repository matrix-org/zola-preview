<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - Releases</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/png" href="/assets/favicon.png" />
    <link rel="stylesheet" href="/style.css" />

    
<link rel="alternate" type="application/rss+xml" title="RSS" href="/category/releases/atom.xml">
</head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            ">
            Blog
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <a href="&#x2F;docs&#x2F;" class="section ">
                Documentation
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    
                    
                    <a href="&#x2F;docs&#x2F;users&#x2F;">Users</a>
                    
                    
                    <a href="&#x2F;docs&#x2F;communities&#x2F;">Communities</a>
                    
                    
                    <a href="&#x2F;docs&#x2F;legacy&#x2F;">Legacy documentation</a>
                    
                </div>
            </div>
        </div>
        
        
        
        
        
        <div class="section-wrap">
            <a href="&#x2F;ecosystem&#x2F;" class="section ">
                Ecosystem
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bots&#x2F;">Bots</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        
<div id="taxonomy-single">
    <div class="content">
        <header>
            <h1>Releases</h1>
            132 posts tagged with "Releases" <a href="/category">(See all Category)</a>
            
            <h2>
                <small><a href="/category/releases/atom.xml">Atom Feed</a></small>
            </h2>
            
        </header>

        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2018&#x2F;08&#x2F;22&#x2F;synapse-0-33-3-released&#x2F;" title="Synapse 0.33.3 Released">Synapse 0.33.3 Released</a></h2>
                <span>
                    22.08.2018 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/ben-parsons">
                        Ben Parsons
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>All the threes, Synapse 0.33.3!</p>
<p>This release brings together a lot of bugfixes, and also some preparation for support for Lazy Loading and Room Versioning.</p>
<p>We also have, as a great contribution from <a href="https://github.com/vojeroen">@vojeroen</a>, SNI extension support! With v0.33.3, Synapse now supports sending SNI over federation for vhosted servers, which resolves <a href="https://github.com/matrix-org/synapse/issues/1491">this long-standing request</a>.</p>
<p>As always, you can get the new update from <a href="https://github.com/matrix-org/synapse/releases/tag/v0.33.3">https://github.com/matrix-org/synapse/releases/tag/v0.33.3</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>.</p>
<h4 id="features">Features</h4>
<ul>
 	<li>Add support for the SNI extension to federation TLS connections. Thanks to <a href="https://github.com/vojeroen">@vojeroen</a>! (<a href="https://github.com/matrix-org/synapse/issues/3439">#3439</a>)</li>
 	<li>Add /_media/r0/config (<a href="https://github.com/matrix-org/synapse/issues/3184">#3184</a>)</li>
 	<li>speed up /members API and add <code>at</code> and <code>membership</code> params as per MSC1227 (<a href="https://github.com/matrix-org/synapse/issues/3568">#3568</a>)</li>
 	<li>implement <code>summary</code> block in /sync response as per MSC688 (<a href="https://github.com/matrix-org/synapse/issues/3574">#3574</a>)</li>
 	<li>Add lazy-loading support to /messages as per MSC1227 (<a href="https://github.com/matrix-org/synapse/issues/3589">#3589</a>)</li>
 	<li>Add ability to limit number of monthly active users on the server (<a href="https://github.com/matrix-org/synapse/issues/3633">#3633</a>)</li>
 	<li>Support more federation endpoints on workers (<a href="https://github.com/matrix-org/synapse/issues/3653">#3653</a>)</li>
 	<li>Basic support for room versioning (<a href="https://github.com/matrix-org/synapse/issues/3654">#3654</a>)</li>
 	<li>Ability to disable client/server Synapse via conf toggle (<a href="https://github.com/matrix-org/synapse/issues/3655">#3655</a>)</li>
 	<li>Ability to whitelist specific threepids against monthly active user limiting (<a href="https://github.com/matrix-org/synapse/issues/3662">#3662</a>)</li>
 	<li>Add some metrics for the appservice and federation event sending loops (<a href="https://github.com/matrix-org/synapse/issues/3664">#3664</a>)</li>
 	<li>Where server is disabled, block ability for locked out users to read new messages (<a href="https://github.com/matrix-org/synapse/issues/3670">#3670</a>)</li>
 	<li>set admin uri via config, to be used in error messages where the user should contact the administrator (<a href="https://github.com/matrix-org/synapse/issues/3687">#3687</a>)</li>
 	<li>Synapse's presence functionality can now be disabled with the "use_presence" configuration option. (<a href="https://github.com/matrix-org/synapse/issues/3694">#3694</a>)</li>
 	<li>For resource limit blocked users, prevent writing into rooms (<a href="https://github.com/matrix-org/synapse/issues/3708">#3708</a>)</li>
</ul>
<h4 id="bugfixes">Bugfixes</h4>
<ul>
 	<li>Fix occasional glitches in the synapse_event_persisted_position metric (<a href="https://github.com/matrix-org/synapse/issues/3658">#3658</a>)</li>
 	<li>Fix bug on deleting 3pid when using identity servers that don't support unbind API (<a href="https://github.com/matrix-org/synapse/issues/3661">#3661</a>)</li>
 	<li>Make the tests pass on Twisted &lt; 18.7.0 (<a href="https://github.com/matrix-org/synapse/issues/3676">#3676</a>)</li>
 	<li>Don't ship recaptcha_ajax.js, use it directly from Google (<a href="https://github.com/matrix-org/synapse/issues/3677">#3677</a>)</li>
 	<li>Fixes test_reap_monthly_active_users so it passes under postgres (<a href="https://github.com/matrix-org/synapse/issues/3681">#3681</a>)</li>
 	<li>Fix mau blocking calculation bug on login (<a href="https://github.com/matrix-org/synapse/issues/3689">#3689</a>)</li>
 	<li>Fix missing yield in synapse.storage.monthly_active_users.initialise_reserved_users (<a href="https://github.com/matrix-org/synapse/issues/3692">#3692</a>)</li>
 	<li>Improve HTTP request logging to include all requests (<a href="https://github.com/matrix-org/synapse/issues/3700">#3700</a>, <a href="https://github.com/matrix-org/synapse/issues/3723">#3723</a>)</li>
 	<li>Avoid timing out requests while we are streaming back the response (<a href="https://github.com/matrix-org/synapse/issues/3701">#3701</a>)</li>
 	<li>Support more federation endpoints on workers (<a href="https://github.com/matrix-org/synapse/issues/3705">#3705</a>, <a href="https://github.com/matrix-org/synapse/issues/3713">#3713</a>)</li>
 	<li>Fix "Starting db txn 'get_all_updated_receipts' from sentinel context" warning (<a href="https://github.com/matrix-org/synapse/issues/3710">#3710</a>)</li>
 	<li>Fix bug where <code>state_cache</code> cache factor ignored environment variables (<a href="https://github.com/matrix-org/synapse/issues/3719">#3719</a>)</li>
</ul>
<h4 id="deprecations-and-removals">Deprecations and Removals</h4>
<ul>
 	<li>The Shared-Secret registration method of the legacy v1/register REST endpoint has been removed. For a replacement, please see <a href="https://github.com/matrix-org/synapse/blob/master/docs/admin_api/register_api.rst">the admin/register API documentation</a>. (<a href="https://github.com/matrix-org/synapse/issues/3703">#3703</a>)</li>
</ul>
<h4 id="internal-changes">Internal Changes</h4>
<ul>
 	<li>The test suite now can run under PostgreSQL. (<a href="https://github.com/matrix-org/synapse/issues/3423">#3423</a>)</li>
 	<li>Refactor HTTP replication endpoints to reduce code duplication (<a href="https://github.com/matrix-org/synapse/issues/3632">#3632</a>)</li>
 	<li>Tests now correctly execute on Python 3. (<a href="https://github.com/matrix-org/synapse/issues/3647">#3647</a>)</li>
 	<li>Sytests can now be run inside a Docker container. (<a href="https://github.com/matrix-org/synapse/issues/3660">#3660</a>)</li>
 	<li>Port over enough to Python 3 to allow the sytests to start. (<a href="https://github.com/matrix-org/synapse/issues/3668">#3668</a>, <a href="https://github.com/matrix-org/synapse/issues/3732">#3732</a>)</li>
 	<li>Update docker base image from alpine 3.7 to 3.8. (<a href="https://github.com/matrix-org/synapse/issues/3669">#3669</a>)</li>
 	<li>Rename synapse.util.async to synapse.util.async_helpers to mitigate async becoming a keyword on Python 3.7. (<a href="https://github.com/matrix-org/synapse/issues/3678">#3678</a>)</li>
 	<li>Synapse's tests are now formatted with the black autoformatter. (<a href="https://github.com/matrix-org/synapse/issues/3679">#3679</a>)</li>
 	<li>Implemented a new testing base class to reduce test boilerplate. (<a href="https://github.com/matrix-org/synapse/issues/3684">#3684</a>)</li>
 	<li>Rename MAU prometheus metrics (<a href="https://github.com/matrix-org/synapse/issues/3690">#3690</a>)</li>
 	<li>add new error type ResourceLimit (<a href="https://github.com/matrix-org/synapse/issues/3707">#3707</a>)</li>
 	<li>Logcontexts for replication command handlers (<a href="https://github.com/matrix-org/synapse/issues/3709">#3709</a>)</li>
 	<li>Update admin register API documentation to reference a real user ID. (<a href="https://github.com/matrix-org/synapse/issues/3712">#3712</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2018&#x2F;08&#x2F;09&#x2F;synapse-0-33-2-is-here&#x2F;" title="Synapse 0.33.2 is here!">Synapse 0.33.2 is here!</a></h2>
                <span>
                    09.08.2018 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Folks, it's release time, Synapse 0.33.2 has landed.</p>
<p>The release focuses on performance, notable highlights include reducing CPU consumption through speeding up state delta calculations (<a href="https://github.com/matrix-org/synapse/issues/3592">#3592</a>) and reducing I/O through lazily loading state on the master process (<a href="https://github.com/matrix-org/synapse/issues/3579">#3579</a>, <a href="https://github.com/matrix-org/synapse/issues/3581">#3581</a>, <a href="https://github.com/matrix-org/synapse/issues/3582">#3582</a>, <a href="https://github.com/matrix-org/synapse/issues/3584">#3584</a>)</p>
<p>Separately work continues on our python 3 port and we hope to have something concrete to trial very soon - we're really excited about this and expect step change improvements in CPU and memory use.</p>
<p>Finally we have some ground work for upcoming room membership lazy loading, there is nothing to see here as yet, but rest assured we will make a lot of noise as soon as it is ready. Stay tuned.</p>
<p> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>.</p>
<h3 id="synapse-0-33-2-2018-08-09">Synapse 0.33.2 (2018-08-09)</h3>
<p>No significant changes.</p>
<h3 id="synapse-0-33-2rc1-2018-08-07">Synapse 0.33.2rc1 (2018-08-07)</h3>
<h4 id="features">Features</h4>
<ul>
 	<li>add support for the lazy_loaded_members filter as per MSC1227 (<a href="https://github.com/matrix-org/synapse/issues/2970">#2970</a>)</li>
 	<li>add support for the include_redundant_members filter param as per MSC1227 (<a href="https://github.com/matrix-org/synapse/issues/3331">#3331</a>)</li>
 	<li>Add metrics to track resource usage by background processes (<a href="https://github.com/matrix-org/synapse/issues/3553">#3553</a>, <a href="https://github.com/matrix-org/synapse/issues/3556">#3556</a>, <a href="https://github.com/matrix-org/synapse/issues/3604">#3604</a>, <a href="https://github.com/matrix-org/synapse/issues/3610">#3610</a>)</li>
 	<li>Add <code>code</code> label to <code>synapse_http_server_response_time_seconds</code> prometheus metric (<a href="https://github.com/matrix-org/synapse/issues/3554">#3554</a>)</li>
 	<li>Add support for client_reader to handle more APIs (<a href="https://github.com/matrix-org/synapse/issues/3555">#3555</a>, <a href="https://github.com/matrix-org/synapse/issues/3597">#3597</a>)</li>
 	<li>make the /context API filter & lazy-load aware as per MSC1227 (<a href="https://github.com/matrix-org/synapse/issues/3567">#3567</a>)</li>
 	<li>Add ability to limit number of monthly active users on the server (<a href="https://github.com/matrix-org/synapse/issues/3630">#3630</a>)</li>
 	<li>When we fail to join a room over federation, pass the error code back to the client. (<a href="https://github.com/matrix-org/synapse/issues/3639">#3639</a>)</li>
 	<li>Add a new /admin/register API for non-interactively creating users. (<a href="https://github.com/matrix-org/synapse/issues/3415">#3415</a>)</li>
</ul>
<h4 id="bugfixes">Bugfixes</h4>
<ul>
 	<li>Make /directory/list API return 404 for room not found instead of 400 (<a href="https://github.com/matrix-org/synapse/issues/2952">#2952</a>)</li>
 	<li>Default inviter_display_name to mxid for email invites (<a href="https://github.com/matrix-org/synapse/issues/3391">#3391</a>)</li>
 	<li>Don't generate TURN credentials if no TURN config options are set (<a href="https://github.com/matrix-org/synapse/issues/3514">#3514</a>)</li>
 	<li>Correctly announce deleted devices over federation (<a href="https://github.com/matrix-org/synapse/issues/3520">#3520</a>)</li>
 	<li>Catch failures saving metrics captured by Measure, and instead log the faulty metrics information for further analysis. (<a href="https://github.com/matrix-org/synapse/issues/3548">#3548</a>)</li>
 	<li>Unicode passwords are now normalised before hashing, preventing the instance where two different devices or browsers might send a different UTF-8 sequence for the password. (<a href="https://github.com/matrix-org/synapse/issues/3569">#3569</a>)</li>
 	<li>Fix potential stack overflow and deadlock under heavy load (<a href="https://github.com/matrix-org/synapse/issues/3570">#3570</a>)</li>
 	<li>Respond with M_NOT_FOUND when profiles are not found locally or over federation. Fixes #3585 (<a href="https://github.com/matrix-org/synapse/issues/3585">#3585</a>)</li>
 	<li>Fix failure to persist events over federation under load (<a href="https://github.com/matrix-org/synapse/issues/3601">#3601</a>)</li>
 	<li>Fix updating of cached remote profiles (<a href="https://github.com/matrix-org/synapse/issues/3605">#3605</a>)</li>
 	<li>Fix 'tuple index out of range' error (<a href="https://github.com/matrix-org/synapse/issues/3607">#3607</a>)</li>
 	<li>Only import secrets when available (fix for py &lt; 3.6) (<a href="https://github.com/matrix-org/synapse/issues/3626">#3626</a>)</li>
</ul>
<h4 id="internal-changes">Internal Changes</h4>
<ul>
 	<li>Remove redundant checks on who_forgot_in_room (<a href="https://github.com/matrix-org/synapse/issues/3350">#3350</a>)</li>
 	<li>Remove unnecessary event re-signing hacks (<a href="https://github.com/matrix-org/synapse/issues/3367">#3367</a>)</li>
 	<li>Rewrite cache list decorator (<a href="https://github.com/matrix-org/synapse/issues/3384">#3384</a>)</li>
 	<li>Move v1-only REST APIs into their own module. (<a href="https://github.com/matrix-org/synapse/issues/3460">#3460</a>)</li>
 	<li>Replace more instances of Python 2-only iteritems and itervalues uses. (<a href="https://github.com/matrix-org/synapse/issues/3562">#3562</a>)</li>
 	<li>Refactor EventContext to accept state during init (<a href="https://github.com/matrix-org/synapse/issues/3577">#3577</a>)</li>
 	<li>Improve Dockerfile and docker-compose instructions (<a href="https://github.com/matrix-org/synapse/issues/3543">#3543</a>)</li>
 	<li>Release notes are now in the Markdown format. (<a href="https://github.com/matrix-org/synapse/issues/3552">#3552</a>)</li>
 	<li>add config for pep8 (<a href="https://github.com/matrix-org/synapse/issues/3559">#3559</a>)</li>
 	<li>Merge Linearizer and Limiter (<a href="https://github.com/matrix-org/synapse/issues/3571">#3571</a>, <a href="https://github.com/matrix-org/synapse/issues/3572">#3572</a>)</li>
 	<li>Lazily load state on master process when using workers to reduce DB consumption (<a href="https://github.com/matrix-org/synapse/issues/3579">#3579</a>, <a href="https://github.com/matrix-org/synapse/issues/3581">#3581</a>, <a href="https://github.com/matrix-org/synapse/issues/3582">#3582</a>, <a href="https://github.com/matrix-org/synapse/issues/3584">#3584</a>)</li>
 	<li>Fixes and optimisations for resolve_state_groups (<a href="https://github.com/matrix-org/synapse/issues/3586">#3586</a>)</li>
 	<li>Improve logging for exceptions when handling PDUs (<a href="https://github.com/matrix-org/synapse/issues/3587">#3587</a>)</li>
 	<li>Add some measure blocks to persist_events (<a href="https://github.com/matrix-org/synapse/issues/3590">#3590</a>)</li>
 	<li>Fix some random logcontext leaks. (<a href="https://github.com/matrix-org/synapse/issues/3591">#3591</a>, <a href="https://github.com/matrix-org/synapse/issues/3606">#3606</a>)</li>
 	<li>Speed up calculating state deltas in persist_event loop (<a href="https://github.com/matrix-org/synapse/issues/3592">#3592</a>)</li>
 	<li>Attempt to reduce amount of state pulled out of DB during persist_events (<a href="https://github.com/matrix-org/synapse/issues/3595">#3595</a>)</li>
 	<li>Fix a documentation typo in on_make_leave_request (<a href="https://github.com/matrix-org/synapse/issues/3609">#3609</a>)</li>
 	<li>Make EventStore inherit from EventFederationStore (<a href="https://github.com/matrix-org/synapse/issues/3612">#3612</a>)</li>
 	<li>Remove some redundant joins on event_edges.room_id (<a href="https://github.com/matrix-org/synapse/issues/3613">#3613</a>)</li>
 	<li>Stop populating events.content (<a href="https://github.com/matrix-org/synapse/issues/3614">#3614</a>)</li>
 	<li>Update the /send_leave path registration to use event_id rather than a transaction ID. (<a href="https://github.com/matrix-org/synapse/issues/3616">#3616</a>)</li>
 	<li>Refactor FederationHandler to move DB writes into separate functions (<a href="https://github.com/matrix-org/synapse/issues/3621">#3621</a>)</li>
 	<li>Remove unused field "pdu_failures" from transactions. (<a href="https://github.com/matrix-org/synapse/issues/3628">#3628</a>)</li>
 	<li>rename replication_layer to federation_client (<a href="https://github.com/matrix-org/synapse/issues/3634">#3634</a>)</li>
 	<li>Factor out exception handling in federation_client (<a href="https://github.com/matrix-org/synapse/issues/3638">#3638</a>)</li>
 	<li>Refactor location of docker build script. (<a href="https://github.com/matrix-org/synapse/issues/3644">#3644</a>)</li>
 	<li>Update CONTRIBUTING to mention newsfragments. (<a href="https://github.com/matrix-org/synapse/issues/3645">#3645</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2018&#x2F;08&#x2F;02&#x2F;security-update-synapse-0-33-1&#x2F;" title="Security update: Synapse 0.33.1">Security update: Synapse 0.33.1</a></h2>
                <span>
                    02.08.2018 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi All,</p>
<p>We have patched two securities vulnerabilities (details follow), we do not believe either have been exploited in the wild, but recommend upgrading asap.</p>
<p>As always you can get the new update from <a href="https://github.com/matrix-org/synapse/releases/tag/v0.33.1">https://github.com/matrix-org/synapse/releases/tag/v0.33.1</a> or from any of the sources mentioned at <a href="https://github.com/matrix-org/synapse/">https://github.com/matrix-org/synapse/</a></p>
<p>Thanks</p>
<h3 id="changes-in-synapse-v0-33-1-2018-08-2">Changes in Synapse v0.33.1 (2018-08-2)</h3>
<ul>
 	<li>Fix a potential issue where servers could request events for rooms they have not joined. (<a href="https://github.com/matrix-org/synapse/issues/3641">#3641</a>)</li>
 	<li>Fix a potential issue where users could see events in private rooms before they joined. (<a href="https://github.com/matrix-org/synapse/issues/3642">#3642</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2018&#x2F;07&#x2F;06&#x2F;security-update-synapse-0-32-0&#x2F;" title="Security update: Synapse 0.32.0">Security update: Synapse 0.32.0</a></h2>
                <span>
                    06.07.2018 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Folks, Synapse 0.32.0 is an important security update: please upgrade as soon as you can.</p>
<p>The release focuses on security; fixing several federation bugs and adding new features for countering abuse. Notably it includes the ability to blacklist &amp; whitelist servers allowed to send events to a room on a per-room basis via the new 
m.room.server_acl
state event: see <a href="https://docs.google.com/document/d/1aiuROf1__7ZFkJvDdAZQfBNxyzjYd-ijiRAcHJYqJCM/edit">MSC1383</a> for details.  This also closes out <a href="https://github.com/matrix-org/matrix-doc/issues/709">https://github.com/matrix-org/matrix-doc/issues/709</a> - one of our oldest feature requests from users who wish to be able to limit the servers allowed to participate in a given room.</p>
<p>It's important to understand that server ACLs only work if all the servers participating in the room honour them.  In future this will be handled better (as part of ongoing work in making it easier to incrementally version and upgrade the federation protocol).  This means that for the ACLs to work, any servers which don't yet implement ACLs (e.g. older Synapses) have to be ACL'd from the room for the access control to work.  
<b>Therefore please upgrade as soon as possible to avoid this problem.</b></p>
<p>This ongoing flurry of security work is in general all part of moving towards the long-awaited stable release of the Server-Server API. In parallel we've been working on the other main outstanding point: State Resets (i.e. scenarios where you get unexpected results when resolving conflicts between different servers' copies of a room).  There will be a few more major changes and upgrades on the horizon as we fix these, but then we'll finally be able to cut an r0 release of the Server-Server API and Matrix will be one massive step closer to being out of beta!</p>
<p>As always, you can get the new update from <a href="https://github.com/matrix-org/synapse/releases/tag/v0.32.1">https://github.com/matrix-org/synapse/releases/tag/v0.32.1</a>
 or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>.</p>
<h2 id="changes-in-synapse-v0-32-0-2018-07-06">Changes in synapse v0.32.0 (2018-07-06)</h2>
<p>No changes since 0.32.0rc1</p>
<h2 id="synapse-0-32-0rc1-2018-07-05">Synapse 0.32.0rc1 (2018-07-05)</h2>
<h4 id="features">Features</h4>
<ul>
 	<li>Add blacklist & whitelist of servers allowed to send events to a
room via <code>m.room.server_acl</code> event. (<a href="https://github.com/matrix-org/synapse/commit/feef8461d19c51f3766471e17e2a2f8a2b36c785">merge</a>)</li>
 	<li>Cache factor override system for specific caches (<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3334" data-error-text="Failed to load issue title" data-id="329021103" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3334">#3334</a>)</li>
 	<li>Add metrics to track appservice transactions (<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3344" data-error-text="Failed to load issue title" data-id="329432100" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3344">#3344</a>)</li>
 	<li>Try to log more helpful info when a sig verification fails
(<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3372" data-error-text="Failed to load issue title" data-id="330617906" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3372">#3372</a>)</li>
 	<li>Synapse now uses the best performing JSON encoder/decoder according
to your runtime (simplejson on CPython, stdlib json on PyPy).
(<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3462" data-error-text="Failed to load issue title" data-id="336619861" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3462">#3462</a>)</li>
 	<li>Add optional ip_range_whitelist param to AS registration files to
lock AS IP access (<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3465" data-error-text="Failed to load issue title" data-id="336751400" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3465">#3465</a>)</li>
 	<li>Reject invalid server names in federation requests (<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3480" data-error-text="Failed to load issue title" data-id="337874054" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3480">#3480</a>)</li>
 	<li>Reject invalid server names in homeserver.yaml (<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3483" data-error-text="Failed to load issue title" data-id="338348899" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3483">#3483</a>)</li>
</ul>
<h4 id="bugfixes">Bugfixes</h4>
<ul>
 	<li>Strip access_token from outgoing requests (<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3327" data-error-text="Failed to load issue title" data-id="328782473" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3327">#3327</a>)</li>
 	<li>Redact AS tokens in logs (<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3349" data-error-text="Failed to load issue title" data-id="329791545" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3349">#3349</a>)</li>
 	<li>Fix federation backfill from SQLite servers (<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3355" data-error-text="Failed to load issue title" data-id="329865615" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3355">#3355</a>)</li>
 	<li>Fix event-purge-by-ts admin API (<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3363" data-error-text="Failed to load issue title" data-id="330065602" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3363">#3363</a>)</li>
 	<li>Fix event filtering in get_missing_events handler (<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3371" data-error-text="Failed to load issue title" data-id="330608172" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3371">#3371</a>)</li>
 	<li>Synapse is now stricter regarding accepting events which it cannot
retrieve the prev_events for. (<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3456" data-error-text="Failed to load issue title" data-id="336184658" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3456">#3456</a>)</li>
 	<li>Fix bug where synapse would explode when receiving unicode in HTTP
User-Agent header (<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3470" data-error-text="Failed to load issue title" data-id="337261723" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3470">#3470</a>)</li>
 	<li>Invalidate cache on correct thread to avoid race (<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3473" data-error-text="Failed to load issue title" data-id="337463703" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3473">#3473</a>)</li>
</ul>
<h4 id="improved-documentation">Improved Documentation</h4>
<ul>
 	<li><code>doc/postgres.rst</code>: fix display of the last command block. Thanks to
<a class="user-mention" href="https://github.com/ArchangeGabriel" data-hovercard-user-id="490531" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@ArchangeGabriel</a>! (<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3340" data-error-text="Failed to load issue title" data-id="329241972" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3340">#3340</a>)</li>
</ul>
<h4 id="deprecations-and-removals">Deprecations and Removals</h4>
<ul>
 	<li>Remove was_forgotten_at (<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3324" data-error-text="Failed to load issue title" data-id="328600145" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3324">#3324</a>)</li>
</ul>
<h4 id="misc">Misc</h4>
<ul>
 	<li><a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3332" data-error-text="Failed to load issue title" data-id="328922729" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3332">#3332</a> <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3341" data-error-text="Failed to load issue title" data-id="329315777" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3341">#3341</a> <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3347" data-error-text="Failed to load issue title" data-id="329626817" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3347">#3347</a> <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3348" data-error-text="Failed to load issue title" data-id="329660142" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3348">#3348</a> <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3356" data-error-text="Failed to load issue title" data-id="329938222" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3356">#3356</a> <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3385" data-error-text="Failed to load issue title" data-id="331533857" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3385">#3385</a> <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3446" data-error-text="Failed to load issue title" data-id="335720791" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3446">#3446</a> <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/issues/3447" data-error-text="Failed to load issue title" data-id="335727844" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3447">#3447</a> <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3467" data-error-text="Failed to load issue title" data-id="336993276" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3467">#3467</a> <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3474" data-error-text="Failed to load issue title" data-id="337465451" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3474">#3474</a></li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2018&#x2F;06&#x2F;08&#x2F;synapse-0-31-1-released&#x2F;" title="Synapse 0.31.1 Released!">Synapse 0.31.1 Released!</a></h2>
                <span>
                    08.06.2018 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Folks,</p>
<p>v0.31.1 fixes a security bug in the <code>get_missing_events</code> federation API where event visibility rules were not applied correctly.</p>
<p>We are not aware of it being actively exploited but please upgrade asap.</p>
<p>Sorry for the inconvenience, Synapse and the Matrix spec are still in beta and we still ironing out gaps such as this one.</p>
<p>You can get the release <a href="https://github.com/matrix-org/synapse/releases/tag/v0.31.1">here</a>.</p>
<h4 id="changes-in-synapse-v0-31-1-2018-06-08">Changes in synapse v0.31.1 (2018-06-08)</h4>
<p>v0.31.1 fixes a security bug in the <code>get_missing_events</code> federation API
where event visibility rules were not applied correctly.</p>
<p>We are not aware of it being actively exploited but please upgrade asap.</p>
<p>Bug Fixes:</p>
<ul>
 	<li>Fix event filtering in get_missing_events handler (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3371" data-error-text="Failed to load issue title" data-id="330608172" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3371">#3371</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2018&#x2F;06&#x2F;06&#x2F;synapse-v0-31-0-released&#x2F;" title="Synapse v0.31.0 released!">Synapse v0.31.0 released!</a></h2>
                <span>
                    06.06.2018 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Good people, it's release time.</p>
<p>With the core team focusing on upcoming performance work and GDPR management tooling, v0.31.0 is most notable for improvements to system stats. Additionally, work continues on our py3 port and a host of small bug fixes and perf improvements.</p>
<p>Get it now from <a href="https://github.com/matrix-org/synapse/releases/tag/v0.31.0">https://github.com/matrix-org/synapse/releases/tag/v0.31.0</a></p>
<h4 id="changes-in-synapse-v0-31-0-2018-06-06">Changes in synapse v0.31.0 (2018-06-06)</h4>
<p>Most notable change from v0.30.0 is to switch to python prometheus library to improve system stats reporting. WARNING this changes a number of prometheus metrics in a backwards-incompatible manner. For more details, see<code><a href="https://github.com/matrix-org/synapse/blob/master/docs/metrics-howto.rst">docs/metrics-howto.rst</a></code></p>
<p>Bug Fixes:</p>
<ul>
 	<li>Fix metric documentation tables (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3341" data-error-text="Failed to load issue title" data-id="329315777" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3341">#3341</a>)</li>
 	<li>Fix LaterGauge error handling (<a class="commit-link" href="https://github.com/matrix-org/synapse/commit/694968fa81aab4eac81309b1e16f6063103dd57f"><tt>694968f</tt></a>)</li>
 	<li>Fix replication metrics (<a class="commit-link" href="https://github.com/matrix-org/synapse/commit/b7e7fd2d0edd4d46aaf9d6afc8df14cf3de911f9"><tt>b7e7fd2</tt></a>)</li>
</ul>
<h4 id="changes-in-synapse-v0-31-0-rc1-2018-06-04">Changes in synapse v0.31.0-rc1 (2018-06-04)</h4>
<p>Features:</p>
<ul>
 	<li>Switch to the Python Prometheus library (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3256" data-error-text="Failed to load issue title" data-id="325104990" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3256">#3256</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3274" data-error-text="Failed to load issue title" data-id="325830300" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3274">#3274</a>)</li>
 	<li>Let users leave the server notice room after joining (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3287" data-error-text="Failed to load issue title" data-id="326461744" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3287">#3287</a>)</li>
</ul>
Changes:
<ul>
 	<li>daily user type phone home stats (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3264" data-error-text="Failed to load issue title" data-id="325386403" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3264">#3264</a>)</li>
 	<li>Use iter* methods for _filter_events_for_server (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3267" data-error-text="Failed to load issue title" data-id="325614605" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3267">#3267</a>)</li>
 	<li>Docs on consent bits (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3268" data-error-text="Failed to load issue title" data-id="325692950" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3268">#3268</a>)</li>
 	<li>Remove users from user directory on deactivate (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3277" data-error-text="Failed to load issue title" data-id="326163134" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3277">#3277</a>)</li>
 	<li>Avoid sending consent notice to guest users (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3288" data-error-text="Failed to load issue title" data-id="326470814" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3288">#3288</a>)</li>
 	<li>disable CPUMetrics if no /proc/self/stat (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3299" data-error-text="Failed to load issue title" data-id="327143395" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3299">#3299</a>)</li>
 	<li>Add local and loopback IPv6 addresses to url_preview_ip_range_blacklist (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/issues/3312" data-error-text="Failed to load issue title" data-id="327707583" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3312">#3312</a>) Thanks to <a class="user-mention" href="https://github.com/thegcat" data-hovercard-user-id="22835" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@thegcat</a>!</li>
 	<li>Consistently use six's iteritems and wrap lazy keys/values in list() if they're not meant to be lazy (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3307" data-error-text="Failed to load issue title" data-id="327587988" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3307">#3307</a>)</li>
 	<li>Add private IPv6 addresses to example config for url preview blacklist (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3317" data-error-text="Failed to load issue title" data-id="328463163" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3317">#3317</a>) Thanks to <a class="user-mention" href="https://github.com/thegcat" data-hovercard-user-id="22835" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@thegcat</a>!</li>
 	<li>Reduce stuck read-receipts: ignore depth when updating (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3318" data-error-text="Failed to load issue title" data-id="328480595" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3318">#3318</a>)</li>
 	<li>Put python's logs into Trial when running unit tests (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3319" data-error-text="Failed to load issue title" data-id="328483239" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3319">#3319</a>)</li>
</ul>
Changes, python 3 migration:
<ul>
 	<li>Replace some more comparisons with six (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3243" data-error-text="Failed to load issue title" data-id="324637327" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3243">#3243</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>replace some iteritems with six (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3244" data-error-text="Failed to load issue title" data-id="324637417" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3244">#3244</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>Add batch_iter to utils (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3245" data-error-text="Failed to load issue title" data-id="324637631" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3245">#3245</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>use repr, not str (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3246" data-error-text="Failed to load issue title" data-id="324637830" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3246">#3246</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>Misc Python3 fixes (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3247" data-error-text="Failed to load issue title" data-id="324638685" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3247">#3247</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>Py3 storage/_base.py (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3278" data-error-text="Failed to load issue title" data-id="326199044" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3278">#3278</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>more six iteritems (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3279" data-error-text="Failed to load issue title" data-id="326236209" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3279">#3279</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>More Misc. py3 fixes (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3280" data-error-text="Failed to load issue title" data-id="326237427" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3280">#3280</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>remaining isintance fixes (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3281" data-error-text="Failed to load issue title" data-id="326248255" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3281">#3281</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>py3-ize state.py (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3283" data-error-text="Failed to load issue title" data-id="326249587" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3283">#3283</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>extend tox testing for py3 to avoid regressions (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3302" data-error-text="Failed to load issue title" data-id="327341929" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3302">#3302</a>) Thanks to <a class="user-mention" href="https://github.com/krombel" data-hovercard-user-id="11167142" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@krombel</a>!</li>
 	<li>use memoryview in py3 (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3303" data-error-text="Failed to load issue title" data-id="327370655" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3303">#3303</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
</ul>
Bugs:
<ul>
 	<li>Fix federation backfill bugs (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3261" data-error-text="Failed to load issue title" data-id="325289139" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3261">#3261</a>)</li>
 	<li>federation: fix LaterGauge usage (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3328" data-error-text="Failed to load issue title" data-id="328820215" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3328">#3328</a>) Thanks to <a class="user-mention" href="https://github.com/intelfx" data-hovercard-user-id="1158172" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@intelfx</a>!</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2018&#x2F;05&#x2F;24&#x2F;synapse-0-30-0-released-today&#x2F;" title="Synapse v0.30.0 released today!">Synapse v0.30.0 released today!</a></h2>
                <span>
                    24.05.2018 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>It's release o'clock - GDPR time!!!!</p>
<p>v0.30.0 sees the introduction of <a href="https://github.com/matrix-org/synapse/blob/master/docs/server_notices.md">Server Notices</a>, which provides a channel whereby server administrators can send messages to users on the server, as well as <a href="https://github.com/matrix-org/synapse/blob/master/docs/consent_tracking.md">Consent Management</a> for tracking whether users have agreed to the terms and conditions set by the administrator of a server - and blocking access to the server until they have.</p>
<p>In conjunction these features support GDPR compliance in the form of providing a client agnostic means to contact users and ask for consent/agreement to a Privacy Notice.</p>
<p>For more information about our approach to GDPR compliance take a look <a href="/blog/2018/05/08/gdpr-compliance-in-matrix/">here</a> (although be aware that our position has evolved a bit; see the upcoming new privacy policy for the Matrix.org homeserver for details).</p>
<p>Additionally there are a host of bug fixes and refactors as well as an enhancement to our Dockerfile.</p>
<p>Get it now from <a href="https://github.com/matrix-org/synapse/releases/tag/v0.30.0">https://github.com/matrix-org/synapse/releases/tag/v0.30.0</a></p>
<h2 id="changes-in-synapse-v0-30-0-2018-05-24">Changes in synapse v0.30.0 (2018-05-24)</h2>
<p>'Server Notices' are a new feature introduced in Synapse 0.30. They provide a
channel whereby server administrators can send messages to users on the server.</p>
<p>They are used as part of communication of the server policies (see <a href="https://github.com/matrix-org/synapse/blob/master/docs/consent_tracking.md">Consent Tracking</a>),
however the intention is that they may also find a use for features such
as &quot;Message of the day&quot;.</p>
<p>This feature is specific to Synapse, but uses standard Matrix communication mechanisms,
so should work with any Matrix client. For more details see <a href="https://github.com/matrix-org/synapse/blob/master/docs/server_notices.md">here</a>. <a href="https://github.com/matrix-org/synapse/blob/master/docs/server_notices.md"><code></code></a></p>
<p>Further Server Notices/Consent Tracking Support:</p>
<ul>
 	<li>Allow overriding the server_notices user's avatar (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3273" data-error-text="Failed to load issue title" data-id="325788990" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3273">#3273</a>)</li>
 	<li>Use the localpart in the consent uri (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3272" data-error-text="Failed to load issue title" data-id="325732749" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3272">#3272</a>)</li>
 	<li>Support for putting %(consent_uri)s in messages (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3271" data-error-text="Failed to load issue title" data-id="325731335" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3271">#3271</a>)</li>
 	<li>Block attempts to send server notices to remote users (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3270" data-error-text="Failed to load issue title" data-id="325706652" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3270">#3270</a>)</li>
 	<li>Docs on consent bits (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3268" data-error-text="Failed to load issue title" data-id="325692950" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3268">#3268</a>)</li>
</ul>
<h3 id="changes-in-synapse-v0-30-0-rc1-2018-05-23">Changes in synapse v0.30.0-rc1 (2018-05-23)</h3>
<p>GDPR Support:</p>
<ul>
 	<li>ConsentResource to gather policy consent from users (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3213" data-error-text="Failed to load issue title" data-id="322329950" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3213">#3213</a>)</li>
 	<li>Move RoomCreationHandler out of synapse.handlers.Handlers (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3225" data-error-text="Failed to load issue title" data-id="323966891" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3225">#3225</a>)</li>
 	<li>Infrastructure for a server notices room (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3232" data-error-text="Failed to load issue title" data-id="324110323" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3232">#3232</a>)</li>
 	<li>Send users a server notice about consent (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3236" data-error-text="Failed to load issue title" data-id="324363121" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3236">#3236</a>)</li>
 	<li>Reject attempts to send event before privacy consent is given (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3257" data-error-text="Failed to load issue title" data-id="325182001" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3257">#3257</a>)</li>
 	<li>Add a 'has_consented' template var to consent forms (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3262" data-error-text="Failed to load issue title" data-id="325308498" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3262">#3262</a>)</li>
 	<li>Fix dependency on jinja2 (PR <a class="issue-link js-issue-link tooltipped tooltipped-ne" href="https://github.com/matrix-org/synapse/pull/3263" data-error-text="Failed to load issue title" data-id="325308826" data-permission-text="Issue title is private" aria-label="#3263, Fix dependency on jinja2">#3263</a>)</li>
</ul>
Features:
<ul>
 	<li>Cohort analytics (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3163" data-error-text="Failed to load issue title" data-id="319174463" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3163">#3163</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3241" data-error-text="Failed to load issue title" data-id="324442563" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3241">#3241</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3251" data-error-text="Failed to load issue title" data-id="324872139" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3251">#3251</a>)</li>
 	<li>Add lxml to docker image for web previews (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3239" data-error-text="Failed to load issue title" data-id="324408394" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3239">#3239</a>) Thanks to <a class="user-mention" href="https://github.com/ptman" data-hovercard-user-id="24669" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@ptman</a>!</li>
 	<li>Add in flight request metrics (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3252" data-error-text="Failed to load issue title" data-id="324955805" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3252">#3252</a>)</li>
</ul>
Changes:
<ul>
 	<li>Remove unused <code>update_external_syncs</code> (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3233" data-error-text="Failed to load issue title" data-id="324114741" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3233">#3233</a>)</li>
 	<li>Use stream rather depth ordering for push actions (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3212" data-error-text="Failed to load issue title" data-id="322319018" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3212">#3212</a>)</li>
 	<li>Make purge_history operate on tokens (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3221" data-error-text="Failed to load issue title" data-id="323268684" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3221">#3221</a>)</li>
 	<li>Don't support limitless pagination (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3265" data-error-text="Failed to load issue title" data-id="325389253" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3265">#3265</a>)</li>
</ul>
Bug Fixes:
<ul>
 	<li>Fix logcontext resource usage tracking (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3258" data-error-text="Failed to load issue title" data-id="325229997" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3258">#3258</a>)</li>
 	<li>Fix error in handling receipts (PR <a class="issue-link js-issue-link tooltipped tooltipped-ne" href="https://github.com/matrix-org/synapse/pull/3235" data-error-text="Failed to load issue title" data-id="324313546" data-permission-text="Issue title is private" aria-label="#3235, Fix error in handling receipts">#3235</a>)</li>
 	<li>Stop the transaction cache caching failures (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3255" data-error-text="Failed to load issue title" data-id="324972872" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3255">#3255</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2018&#x2F;05&#x2F;18&#x2F;synapse-0-29-1&#x2F;" title="Synapse 0.29.1 Released!">Synapse 0.29.1 Released!</a></h2>
                <span>
                    18.05.2018 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>It's release time people, not to be outdone by our friends on the <a href="https://medium.com/@RiotChat/stickers-are-here-introducing-riot-im-0-15-for-web-desktop-284c32b93acc">Riot web team</a>, Synapse v0.29.1 lands today.</p>
<p>v0.29.1 contains an officially supported docker image (many thanks to the contribution from <a href="https://github.com/kaiyou">@kaiyou</a>), continued progress towards Python 3 (thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>) - as well as a heap of refactorings and bug fixes.</p>
<p>Something worth noting is a potentially breaking change in the error code that /login returns in the Client Server API. Details follow, but the change closes a gap between Synapse behaviour and the spec.</p>
<p>We'd like to give huge thanks to Silvio Fricke and Andreas Peters for writing and maintaining <a href="https://github.com/AVENTER-UG/docker-matrix">Synapse's first Dockerfile</a>, as well as <a href="https://github.com/allmende/docker-synapse">allmende</a>, <a href="https://github.com/jcgruenhage/docker-synapse">jcgruenhage</a>, <a href="https://github.com/ptman/synapse-docker">ptman</a>, and <a href="https://github.com/ilianaw/dockerfiles/tree/master/synapse">ilianaw</a> for theirs!  The new Dockerfile from kaiyou has ended up being merged into the <a href="https://github.com/matrix-org/synapse/tree/master/contrib/docker">main synapse tree</a> and we're going to try to maintain it going forwards, but folks should use whichever one they prefer.</p>
<p>You can pick it up from <a href="https://github.com/matrix-org/synapse/releases/tag/v0.29.1">https://github.com/matrix-org/synapse/releases/tag/v0.29.1</a> and thanks to everyone who tested the release candidate.</p>
<h2 id="changes-in-synapse-v0-29-1-2018-05-17">Changes in synapse v0.29.1 (2018-05-17)</h2>
<p>Changes:</p>
<ul>
 	<li>Update docker documentation (PR <a href="https://github.com/matrix-org/synapse/pull/3222">#3222</a>)</li>
</ul>
<h3 id="changes-in-synapse-v0-29-0-2018-05-16">Changes in synapse v0.29.0 (2018-05-16)</h3>
<p>No changes since v0.29.0-rc1</p>
<h3 id="changes-in-synapse-v0-29-0-rc1-2018-05-14">Changes in synapse v0.29.0-rc1 (2018-05-14)</h3>
<p>Potentially breaking change:</p>
<ul>
 	<li>Make Client-Server API return 401 for invalid token (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3161" data-error-text="Failed to load issue title" data-id="319022836" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3161">#3161</a>).This changes the Client-server spec to return a 401 error code instead of 403 when the access token is unrecognised. This is the behaviour required by the specification, but some clients may be relying on the old, incorrect behaviour.Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a> for fixing this.</li>
</ul>
Features:
<ul>
 	<li>Add a Dockerfile for synapse (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2846" data-error-text="Failed to load issue title" data-id="294138160" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2846">#2846</a>) Thanks to <a class="user-mention" href="https://github.com/kaiyou" data-hovercard-user-id="847861" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@kaiyou</a>!</li>
</ul>
Changes - General:
<ul>
 	<li>nuke-room-from-db.sh: added postgresql option and help (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2337" data-error-text="Failed to load issue title" data-id="240936932" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2337">#2337</a>) Thanks to <a class="user-mention" href="https://github.com/rubo77" data-hovercard-user-id="1591563" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@rubo77</a>!</li>
 	<li>Part user from rooms on account deactivate (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3201" data-error-text="Failed to load issue title" data-id="321584384" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3201">#3201</a>)</li>
 	<li>Make 'unexpected logging context' into warnings (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3007" data-error-text="Failed to load issue title" data-id="305674363" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3007">#3007</a>)</li>
 	<li>Set Server header in SynapseRequest (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3208" data-error-text="Failed to load issue title" data-id="322021667" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3208">#3208</a>)</li>
 	<li>remove duplicates from groups tables (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3129" data-error-text="Failed to load issue title" data-id="317640994" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3129">#3129</a>)</li>
 	<li>Improve exception handling for background processes (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3138" data-error-text="Failed to load issue title" data-id="318353806" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3138">#3138</a>)</li>
 	<li>Add missing consumeErrors to improve exception handling (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3139" data-error-text="Failed to load issue title" data-id="318354891" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3139">#3139</a>)</li>
 	<li>reraise exceptions more carefully (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3142" data-error-text="Failed to load issue title" data-id="318362067" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3142">#3142</a>)</li>
 	<li>Remove redundant call to preserve_fn (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3143" data-error-text="Failed to load issue title" data-id="318369685" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3143">#3143</a>)</li>
 	<li>Trap exceptions thrown within run_in_background (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3144" data-error-text="Failed to load issue title" data-id="318372621" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3144">#3144</a>)</li>
</ul>
Changes - Refactors:
<ul>
 	<li>Refactor /context to reuse pagination storage functions (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3193" data-error-text="Failed to load issue title" data-id="321240389" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3193">#3193</a>)</li>
 	<li>Refactor recent events func to use pagination func (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3195" data-error-text="Failed to load issue title" data-id="321511701" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3195">#3195</a>)</li>
 	<li>Refactor pagination DB API to return concrete type (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3196" data-error-text="Failed to load issue title" data-id="321514152" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3196">#3196</a>)</li>
 	<li>Refactor get_recent_events_for_room return type (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3198" data-error-text="Failed to load issue title" data-id="321524525" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3198">#3198</a>)</li>
 	<li>Refactor sync APIs to reuse pagination API (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3199" data-error-text="Failed to load issue title" data-id="321556855" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3199">#3199</a>)</li>
 	<li>Remove unused code path from member change DB func (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3200" data-error-text="Failed to load issue title" data-id="321572270" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3200">#3200</a>)</li>
 	<li>Refactor request handling wrappers (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3203" data-error-text="Failed to load issue title" data-id="321896316" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3203">#3203</a>)</li>
 	<li>transaction_id, destination defined twice (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3209" data-error-text="Failed to load issue title" data-id="322050253" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3209">#3209</a>) Thanks to <a class="user-mention" href="https://github.com/damir-manapov" data-hovercard-user-id="84543" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@damir-manapov</a>!</li>
 	<li>Refactor event storage to prepare for changes in state calculations (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3141" data-error-text="Failed to load issue title" data-id="318360848" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3141">#3141</a>)</li>
 	<li>Set Server header in SynapseRequest (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3208" data-error-text="Failed to load issue title" data-id="322021667" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3208">#3208</a>)</li>
 	<li>Use deferred.addTimeout instead of time_bound_deferred (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3127" data-error-text="Failed to load issue title" data-id="316624675" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3127">#3127</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3178" data-error-text="Failed to load issue title" data-id="319723346" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3178">#3178</a>)</li>
 	<li>Use run_in_background in preference to preserve_fn (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3140" data-error-text="Failed to load issue title" data-id="318358846" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3140">#3140</a>)</li>
</ul>
Changes - Python 3 migration:
<ul>
 	<li>Construct HMAC as bytes on py3 (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3156" data-error-text="Failed to load issue title" data-id="318672814" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3156">#3156</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>run config tests on py3 (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3159" data-error-text="Failed to load issue title" data-id="318819505" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3159">#3159</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>Open certificate files as bytes (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3084" data-error-text="Failed to load issue title" data-id="312978895" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3084">#3084</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>Open config file in non-bytes mode (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3085" data-error-text="Failed to load issue title" data-id="312979176" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3085">#3085</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>Make event properties raise AttributeError instead (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3102" data-error-text="Failed to load issue title" data-id="314438601" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3102">#3102</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>Use six.moves.urlparse (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3108" data-error-text="Failed to load issue title" data-id="314444112" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3108">#3108</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>Add py3 tests to tox with folders that work (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3145" data-error-text="Failed to load issue title" data-id="318431714" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3145">#3145</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>Don't yield in list comprehensions (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3150" data-error-text="Failed to load issue title" data-id="318628803" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3150">#3150</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>Move more xrange to six (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3151" data-error-text="Failed to load issue title" data-id="318628945" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3151">#3151</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>make imports local (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3152" data-error-text="Failed to load issue title" data-id="318629082" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3152">#3152</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>move httplib import to six (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3153" data-error-text="Failed to load issue title" data-id="318629172" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3153">#3153</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>Replace stringIO imports with six (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3154" data-error-text="Failed to load issue title" data-id="318629362" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3154">#3154</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3168" data-error-text="Failed to load issue title" data-id="319453092" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3168">#3168</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
 	<li>more bytes strings (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3155" data-error-text="Failed to load issue title" data-id="318672504" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3155">#3155</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@NotAFile</a>!</li>
</ul>
Bug Fixes:
<ul>
 	<li>synapse fails to start under Twisted &gt;= 18.4 (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3157" data-error-text="Failed to load issue title" data-id="318721696" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3157">#3157</a>) Thanks to <a class="user-mention" href="https://github.com/Half-Shot" data-hovercard-user-id="2072976" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@Half-Shot</a>!</li>
 	<li>Fix a class of logcontext leaks (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3170" data-error-text="Failed to load issue title" data-id="319506071" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3170">#3170</a>)</li>
 	<li>Fix a couple of logcontext leaks in unit tests (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3172" data-error-text="Failed to load issue title" data-id="319584239" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3172">#3172</a>)</li>
 	<li>Fix logcontext leak in media repo (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3174" data-error-text="Failed to load issue title" data-id="319596214" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3174">#3174</a>)</li>
 	<li>Escape label values in prometheus metrics (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3175" data-error-text="Failed to load issue title" data-id="319611493" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3175">#3175</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3186" data-error-text="Failed to load issue title" data-id="319955083" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3186">#3186</a>)</li>
 	<li>Fix 'Unhandled Error' logs with Twisted 18.4 (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3182" data-error-text="Failed to load issue title" data-id="319867481" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3182">#3182</a>) Thanks to <a class="user-mention" href="https://github.com/Half-Shot" data-hovercard-user-id="2072976" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@Half-Shot</a>!</li>
 	<li>Fix logcontext leaks in rate limiter (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3183" data-error-text="Failed to load issue title" data-id="319883299" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3183">#3183</a>)</li>
 	<li>notifications: Convert next_token to string according to the spec (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3190" data-error-text="Failed to load issue title" data-id="320496620" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3190">#3190</a>) Thanks to <a class="user-mention" href="https://github.com/mujx" data-hovercard-user-id="6430350" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@mujx</a>!</li>
 	<li>nuke-room-from-db.sh: fix deletion from search table (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3194" data-error-text="Failed to load issue title" data-id="321366575" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3194">#3194</a>) Thanks to <a class="user-mention" href="https://github.com/rubo77" data-hovercard-user-id="1591563" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@rubo77</a>!</li>
 	<li>add guard for None on purge_history api (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3160" data-error-text="Failed to load issue title" data-id="318873877" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3160">#3160</a>) Thanks to <a class="user-mention" href="https://github.com/krombel" data-hovercard-user-id="11167142" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@krombel</a>!</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2018&#x2F;04&#x2F;27&#x2F;synapse-0-28-0-released&#x2F;" title="Synapse 0.28.0 Released!">Synapse 0.28.0 Released!</a></h2>
                <span>
                    27.04.2018 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Well now, today sees the release of Synapse 0.28.0!</p>
<p>This release is particularly exciting as it's a major bump mainly thanks to lots and lots of contributions from the wider community - including support for running Synapse on PyPy (thanks Valodim) and lots of progress towards official Python3 support (thanks notafile)!! However, almost all the changes are under the hood (and some are quite major), so this is more a performance, bugfix and synapse internals release rather than adding many new APIs or features</p>
<p>As always, you can get it from <a href="https://github.com/matrix-org/synapse/releases/tag/v0.28.0">https://github.com/matrix-org/synapse/releases/tag/v0.28.0</a> and thanks to everyone who tested the release candidates.</p>
<h3 id="changes-in-synapse-v0-28-0-2018-04-26">Changes in synapse v0.28.0 (2018-04-26)</h3>
<p>Bug Fixes:</p>
<ul>
 	<li>Fix quarantine media admin API and search reindex (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3130" data-error-text="Failed to load issue title" data-id="317646661" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3130">#3130</a>)</li>
 	<li>Fix media admin APIs (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3134" data-error-text="Failed to load issue title" data-id="317969752" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3134">#3134</a>)</li>
</ul>
<h3 id="changes-in-synapse-v0-28-0-rc1-2018-04-24">Changes in synapse v0.28.0-rc1 (2018-04-24)</h3>
<p>Minor performance improvement to federation sending and bug fixes.</p>
<p>(Note: This release does not include state resolutions discussed in matrix live)</p>
<p>Features:</p>
<ul>
 	<li>Add metrics for event processing lag (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3090" data-error-text="Failed to load issue title" data-id="313326931" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3090">#3090</a>)</li>
 	<li>Add metrics for ResponseCache (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3092" data-error-text="Failed to load issue title" data-id="313664599" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3092">#3092</a>)</li>
</ul>
Changes:
<ul>
 	<li>Synapse on PyPy (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2760" data-error-text="Failed to load issue title" data-id="286622617" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2760">#2760</a>) Thanks to <a class="user-mention" href="https://github.com/Valodim" data-hovercard-user-id="27813" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self">@Valodim</a>!</li>
 	<li>move handling of auto_join_rooms to RegisterHandler (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2996" data-error-text="Failed to load issue title" data-id="305218362" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2996">#2996</a>) Thanks to <a class="user-mention" href="https://github.com/krombel" data-hovercard-user-id="11167142" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self">@krombel</a>!</li>
 	<li>Improve handling of SRV records for federation connections (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3016" data-error-text="Failed to load issue title" data-id="306884886" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3016">#3016</a>) Thanks to <a class="user-mention" href="https://github.com/silkeh" data-hovercard-user-id="5798032" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self">@silkeh</a>!</li>
 	<li>Document the behaviour of ResponseCache (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3059" data-error-text="Failed to load issue title" data-id="311125652" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3059">#3059</a>)</li>
 	<li>Preparation for py3 (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3061" data-error-text="Failed to load issue title" data-id="311182479" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3061">#3061</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3073" data-error-text="Failed to load issue title" data-id="312120046" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3073">#3073</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3074" data-error-text="Failed to load issue title" data-id="312126869" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3074">#3074</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3075" data-error-text="Failed to load issue title" data-id="312144464" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3075">#3075</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3103" data-error-text="Failed to load issue title" data-id="314439691" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3103">#3103</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3104" data-error-text="Failed to load issue title" data-id="314439972" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3104">#3104</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3106" data-error-text="Failed to load issue title" data-id="314440233" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3106">#3106</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3107" data-error-text="Failed to load issue title" data-id="314440492" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3107">#3107</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3109" data-error-text="Failed to load issue title" data-id="314459327" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3109">#3109</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3110" data-error-text="Failed to load issue title" data-id="314459750" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3110">#3110</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self">@NotAFile</a>!</li>
 	<li>update prometheus dashboard to use new metric names (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3069" data-error-text="Failed to load issue title" data-id="311770477" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3069">#3069</a>) Thanks to <a class="user-mention" href="https://github.com/krombel" data-hovercard-user-id="11167142" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self">@krombel</a>!</li>
 	<li>use python3-compatible prints (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3074" data-error-text="Failed to load issue title" data-id="312126869" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3074">#3074</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self">@NotAFile</a>!</li>
 	<li>Send federation events concurrently (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3078" data-error-text="Failed to load issue title" data-id="312485229" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3078">#3078</a>)</li>
 	<li>Limit concurrent event sends for a room (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3079" data-error-text="Failed to load issue title" data-id="312488812" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3079">#3079</a>)</li>
 	<li>Improve R30 stat definition (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3086" data-error-text="Failed to load issue title" data-id="313004914" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3086">#3086</a>)</li>
 	<li>Send events to ASes concurrently (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3088" data-error-text="Failed to load issue title" data-id="313232647" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3088">#3088</a>)</li>
 	<li>Refactor ResponseCache usage (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3093" data-error-text="Failed to load issue title" data-id="313696664" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3093">#3093</a>)</li>
 	<li>Clarify that SRV may not point to a CNAME (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3100" data-error-text="Failed to load issue title" data-id="314327149" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3100">#3100</a>) Thanks to <a class="user-mention" href="https://github.com/silkeh" data-hovercard-user-id="5798032" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self">@silkeh</a>!</li>
 	<li>Use str(e) instead of e.message (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3103" data-error-text="Failed to load issue title" data-id="314439691" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3103">#3103</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self">@NotAFile</a>!</li>
 	<li>Use six.itervalues in some places (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3106" data-error-text="Failed to load issue title" data-id="314440233" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3106">#3106</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self">@NotAFile</a>!</li>
 	<li>Refactor store.have_events (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3117" data-error-text="Failed to load issue title" data-id="315159849" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3117">#3117</a>)</li>
</ul>
Bug Fixes:
<ul>
 	<li>Return 401 for invalid access_token on logout (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2938" data-error-text="Failed to load issue title" data-id="301972886" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2938">#2938</a>) Thanks to <a class="user-mention" href="https://github.com/dklug" data-hovercard-user-id="8633205" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self">@dklug</a>!</li>
 	<li>Return a 404 rather than a 500 on rejoining empty rooms (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3080" data-error-text="Failed to load issue title" data-id="312501677" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3080">#3080</a>)</li>
 	<li>fix federation_domain_whitelist (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3099" data-error-text="Failed to load issue title" data-id="314137025" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3099">#3099</a>)</li>
 	<li>Avoid creating events with huge numbers of prev_events (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3113" data-error-text="Failed to load issue title" data-id="314753743" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3113">#3113</a>)</li>
 	<li>Reject events which have lots of prev_events (PR <a class="issue-link js-issue-link tooltipped tooltipped-ne" href="https://github.com/matrix-org/synapse/pull/3118" data-error-text="Failed to load issue title" data-id="315273891" data-permission-text="Issue title is private">#3118</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2018&#x2F;04&#x2F;11&#x2F;synapse-0-27-3-released&#x2F;" title="Synapse 0.27.3 released!">Synapse 0.27.3 released!</a></h2>
                <span>
                    11.04.2018 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Today we release Synapse 0.27.3!</p>
<p>Hot on the heels of 0.27.2, notable changes include API support for joining groups/communities as well as a major bug fix (<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3082" data-error-text="Failed to load issue title" data-id="312859684" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3082">#3082</a>), that is particularly important for those upgrading for the first time in a while. Also new metrics and phone home stats. Phone home stats include better visibility of system usage so we can have a better idea of how synapse's RAM and CPU is behaving in the wild. Also, recording the number of users on the server who have been using it for at least 30 days.</p>
<p>Phone home stats are entirely optional and can be enabled/disabled by setting &quot;<span class="s1">report_</span>
<span class="s2">stat</span>
<span class="s1">s&quot; in homeserver.yaml. </span>
Please consider enabling phone home stats if you currently have not done so - this data is really important to us in improving Matrix as a whole (and justifying future funding for <a class="linkified" href="http://matrix.org/" target="_blank" rel="noopener">Matrix.org</a>).</p>
<p>As always, you can get it from <a href="https://github.com/matrix-org/synapse/releases/tag/v0.27.3">https://github.com/matrix-org/synapse/releases/tag/v0.27.3</a> and thanks to everyone who tested the release candidates.</p>
<h3 id="changes-in-synapse-v0-27-3-2018-04-11">Changes in synapse v0.27.3 (2018-04-11)</h3>
<p>Bug fixes:</p>
<ul>
 	<li>URL quote path segments over federation (<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3082" data-error-text="Failed to load issue title" data-id="312859684" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3082">#3082</a>)</li>
</ul>
<h3 id="changes-in-synapse-v0-27-3-rc2-2018-04-09">Changes in synapse v0.27.3-rc2 (2018-04-09)</h3>
<p>v0.27.3-rc1 used a stale version of the develop branch so the changelog overstates
the functionality. v0.27.3-rc2 is up to date, rc1 should be ignored.</p>
<h3 id="changes-in-synapse-v0-27-3-rc1-2018-04-09">Changes in synapse v0.27.3-rc1 (2018-04-09)</h3>
<p>Notable changes include API support for joinability of groups. Also new metrics
and phone home stats. Phone home stats include better visibility of system usage
so we can tweak synpase to work better for all users rather than our own experience
with matrix.org. Also, recording 'r30' stat which is the measure we use to track
overall growth of the Matrix ecosystem. It is defined as:-</p>
<p>Counts the number of native 30 day retained users, defined as:-</p>
<ul>
<li>Users who have created their accounts more than 30 days</li>
<li>Where last seen at most 30 days ago</li>
<li>Where account creation and last_seen are &gt; 30 days&quot;</li>
</ul>
<p>Features:</p>
<ul>
 	<li>Add joinability for groups (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3045" data-error-text="Failed to load issue title" data-id="309358488" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3045">#3045</a>)</li>
 	<li>Implement group join API (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3046" data-error-text="Failed to load issue title" data-id="309437433" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3046">#3046</a>)</li>
 	<li>Add counter metrics for calculating state delta (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3033" data-error-text="Failed to load issue title" data-id="308901076" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3033">#3033</a>)</li>
 	<li>R30 stats (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3041" data-error-text="Failed to load issue title" data-id="309293623" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3041">#3041</a>)</li>
 	<li>Measure time it takes to calculate state group ID (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3043" data-error-text="Failed to load issue title" data-id="309312509" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3043">#3043</a>)</li>
 	<li>Add basic performance statistics to phone home (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3044" data-error-text="Failed to load issue title" data-id="309323226" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3044">#3044</a>)</li>
 	<li>Add response size metrics (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3071" data-error-text="Failed to load issue title" data-id="311954815" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3071">#3071</a>)</li>
 	<li>phone home cache size configurations (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3063" data-error-text="Failed to load issue title" data-id="311248683" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3063">#3063</a>)</li>
</ul>
Changes:
<ul>
 	<li>Add a blurb explaining the main synapse worker (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2886" data-error-text="Failed to load issue title" data-id="298059141" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2886">#2886</a>) Thanks to <a class="user-mention" href="https://github.com/turt2live" data-hovercard-user-id="1190097">@turt2live</a>!</li>
 	<li>Replace old style error catching with 'as' keyword (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3000" data-error-text="Failed to load issue title" data-id="305290730" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3000">#3000</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747">@NotAFile</a>!</li>
 	<li>Use .iter* to avoid copies in StateHandler (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3006" data-error-text="Failed to load issue title" data-id="305656885" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3006">#3006</a>)</li>
 	<li>Linearize calls to _generate_user_id (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3029" data-error-text="Failed to load issue title" data-id="308526745" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3029">#3029</a>)</li>
 	<li>Remove last usage of ujson (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3030" data-error-text="Failed to load issue title" data-id="308552644" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3030">#3030</a>)</li>
 	<li>Use simplejson throughout (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3048" data-error-text="Failed to load issue title" data-id="309920407" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3048">#3048</a>)</li>
 	<li>Use static JSONEncoders (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3049" data-error-text="Failed to load issue title" data-id="309920728" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3049">#3049</a>)</li>
 	<li>Remove uses of events.content (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3060" data-error-text="Failed to load issue title" data-id="311128650" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3060">#3060</a>)</li>
 	<li>Improve database cache performance (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3068" data-error-text="Failed to load issue title" data-id="311658915" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3068">#3068</a>)</li>
</ul>
Bug fixes:
<ul>
 	<li>Add room_id to the response of <code>rooms/{'{'}roomId{'}'}/join</code> (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2986" data-error-text="Failed to load issue title" data-id="304772714" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2986">#2986</a>) Thanks to <a class="user-mention" href="https://github.com/jplatte" data-hovercard-user-id="951129">@jplatte</a>!</li>
 	<li>Fix replication after switch to simplejson (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3015" data-error-text="Failed to load issue title" data-id="306553712" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3015">#3015</a>)</li>
 	<li>Fix replication after switch to simplejson (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3015" data-error-text="Failed to load issue title" data-id="306553712" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3015">#3015</a>)</li>
 	<li>404 correctly on missing paths via NoResource (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3022" data-error-text="Failed to load issue title" data-id="307976332" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3022">#3022</a>)</li>
 	<li>Fix error when claiming e2e keys from offline servers (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3034" data-error-text="Failed to load issue title" data-id="309039857" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3034">#3034</a>)</li>
 	<li>fix tests/storage/test_user_directory.py (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3042" data-error-text="Failed to load issue title" data-id="309299280" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3042">#3042</a>)</li>
 	<li>use PUT instead of POST for federating groups/m.join_policy (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3070" data-error-text="Failed to load issue title" data-id="311932835" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3070">#3070</a>) Thanks to <a class="user-mention" href="https://github.com/krombel" data-hovercard-user-id="11167142">@krombel</a>!</li>
 	<li>postgres port script: fix state_groups_pkey error (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3072" data-error-text="Failed to load issue title" data-id="311965025" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3072">#3072</a>)</li>
</ul>

                
            </div>
        </article>
        
        <nav class="pagination">
    <div class="prev">
        
        <a href="&#x2F;category&#x2F;releases&#x2F;page&#x2F;12&#x2F;">‹ Previous</a>
        
    </div>
    <span class="page-number">13 / 14</span>
    <div class="prev">
        
        <a href="&#x2F;category&#x2F;releases&#x2F;page&#x2F;14&#x2F;">Next ›</a>
        
    </div>
</nav>

    </div>
</div>

    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;security-hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="&#x2F;code"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p>© 2022 The Matrix.org Foundation C.I.C.</p>
</footer>

</body>

</html>
