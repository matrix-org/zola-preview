<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - Releases</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/png" href="/assets/favicon.png" />
    <link rel="stylesheet" href="/style.css" />

    
<link rel="alternate" type="application/rss+xml" title="RSS" href="/category/releases/atom.xml">
</head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo-white.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            ">
            Blog
        </a>
        
        
        
        <a href="&#x2F;docs&#x2F;" class="
            ">
            Documentation
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <input id="ecosystem-submenu-checkbox" type="checkbox" class="submenu-checkbox" aria-hidden="true"
                >
            <label for="ecosystem-submenu-checkbox" class="submenu-title">Ecosystem <div class="arrow">
                </div></label>

            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bots&#x2F;">Bots</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        
<div id="taxonomy-single">
    <div class="content">
        <header>
            <h1>Releases</h1>
            138 posts tagged with "Releases" <a href="/category">(See all Category)</a>
            
            <h2>
                <small><a href="/category/releases/atom.xml">Atom Feed</a></small>
            </h2>
            
        </header>

        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;07&#x2F;08&#x2F;synapse-1-16-0-released&#x2F;" title="Synapse 1.16.0 released">Synapse 1.16.0 released</a></h2>
                <span>
                    08.07.2020 19:18
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                <br>
                <small>Last update: 08.07.2020 14:45</small>
            </header>
            <div>
                
                <p>Synapse 1.16.0 is here!</p>
<p>Notable additions in 1.16.0 include:-</p>
<ul>
<li>An important performance fix to improve room state resolution.</li>
<li>An option to enable e2e by default for new rooms.</li>
<li>Ability to run multiple media repo workers side by side.</li>
<li>Ability to mark specific content as being safe from quarantine.</li>
<li>Bug fixes to make migrating from SQLite to Postgres more reliable - if you are running sqlite for anything other than evaluation purposes then please migrate!</li>
</ul>
<p>Note, we have deprecated the <code>m.login.jwt</code> login method in favour of <code>org.matrix.login.jwt</code> see the changelog for more details.</p>
<p>Enjoy!</p>
<p>Get the new releases from any of the usual sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md. 1.16.0 is on github <a href="https://github.com/matrix-org/synapse/releases/tag/v1.16.0">here</a>.</p>
<p>Changelog for 1.16.0 follows:</p>
<h1 id="synapse-1-16-0-2020-07-08">Synapse 1.16.0 (2020-07-08)</h1>
<p>No significant changes since 1.16.0rc2.</p>
<p>Note that this release deprecates the <code>m.login.jwt</code> login method, renaming it to <code>org.matrix.login.jwt</code>, as <code>m.login.jwt</code> is not part of the Matrix spec. Otherwise the behaviour is identical. Synapse will accept both names for now, but this may change in a future release.</p>
<h1 id="synapse-1-16-0rc2-2020-07-02">Synapse 1.16.0rc2 (2020-07-02)</h1>
<p>Synapse 1.16.0rc2 includes the security fixes released with Synapse 1.15.2.
Please see the <a href="https://github.com/matrix-org/synapse/releases/tag/v1.15.2">1.15.2 release notes</a> for more details.</p>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Update postgres image in example <code>docker-compose.yaml</code> to tag <code>12-alpine</code>. (<a href="https://github.com/matrix-org/synapse/issues/7696">#7696</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Add some metrics for inbound and outbound federation latencies: <code>synapse_federation_server_pdu_process_time</code> and <code>synapse_event_processing_lag_by_event</code>. (<a href="https://github.com/matrix-org/synapse/issues/7771">#7771</a>)</li>
</ul>
<h1 id="synapse-1-16-0rc1-2020-07-01">Synapse 1.16.0rc1 (2020-07-01)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Add an option to enable encryption by default for new rooms. (<a href="https://github.com/matrix-org/synapse/issues/7639">#7639</a>)</li>
<li>Add support for running multiple media repository workers. See <a href="https://github.com/matrix-org/synapse/blob/release-v1.16.0/docs/workers.md">docs/workers.md</a> for instructions. (<a href="https://github.com/matrix-org/synapse/issues/7706">#7706</a>)</li>
<li>Media can now be marked as safe from quarantined. (<a href="https://github.com/matrix-org/synapse/issues/7718">#7718</a>)</li>
<li>Expand the configuration options for auto-join rooms. (<a href="https://github.com/matrix-org/synapse/issues/7763">#7763</a>)</li>
</ul>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Remove <code>user_id</code> from the response to <code>GET /_matrix/client/r0/presence/{userId}/status</code> to match the specification. (<a href="https://github.com/matrix-org/synapse/issues/7606">#7606</a>)</li>
<li>In worker mode, ensure that replicated data has not already been received. (<a href="https://github.com/matrix-org/synapse/issues/7648">#7648</a>)</li>
<li>Fix intermittent exception during startup, introduced in Synapse 1.14.0. (<a href="https://github.com/matrix-org/synapse/issues/7663">#7663</a>)</li>
<li>Include a user-agent for federation and well-known requests. (<a href="https://github.com/matrix-org/synapse/issues/7677">#7677</a>)</li>
<li>Accept the proper field (<code>phone</code>) for the <code>m.id.phone</code> identifier type. The legacy field of <code>number</code> is still accepted as a fallback. Bug introduced in v0.20.0. (<a href="https://github.com/matrix-org/synapse/issues/7687">#7687</a>)</li>
<li>Fix &quot;Starting db txn 'get_completed_ui_auth_stages' from sentinel context&quot; warning. The bug was introduced in 1.13.0. (<a href="https://github.com/matrix-org/synapse/issues/7688">#7688</a>)</li>
<li>Compare the URI and method during user interactive authentication (instead of the URI twice). Bug introduced in 1.13.0. (<a href="https://github.com/matrix-org/synapse/issues/7689">#7689</a>)</li>
<li>Fix a long standing bug where the response to the <code>GET room_keys/version</code> endpoint had the incorrect type for the <code>etag</code> field. (<a href="https://github.com/matrix-org/synapse/issues/7691">#7691</a>)</li>
<li>Fix logged error during device resync in opentracing. Broke in v1.14.0. (<a href="https://github.com/matrix-org/synapse/issues/7698">#7698</a>)</li>
<li>Do not break push rule evaluation when receiving an event with a non-string body. This is a long-standing bug. (<a href="https://github.com/matrix-org/synapse/issues/7701">#7701</a>)</li>
<li>Fixs a long standing bug which resulted in an exception: &quot;TypeError: argument of type 'ObservableDeferred' is not iterable&quot;. (<a href="https://github.com/matrix-org/synapse/issues/7708">#7708</a>)</li>
<li>The <code>synapse_port_db</code> script no longer fails when the <code>ui_auth_sessions</code> table is non-empty. This bug has existed since v1.13.0. (<a href="https://github.com/matrix-org/synapse/issues/7711">#7711</a>)</li>
<li>Synapse will now fetch media from the proper specified URL (using the r0 prefix instead of the unspecified v1). (<a href="https://github.com/matrix-org/synapse/issues/7714">#7714</a>)</li>
<li>Fix the tables ignored by <code>synapse_port_db</code> to be in sync the current database schema. (<a href="https://github.com/matrix-org/synapse/issues/7717">#7717</a>)</li>
<li>Fix missing <code>Content-Length</code> on HTTP responses from the metrics handler. (<a href="https://github.com/matrix-org/synapse/issues/7730">#7730</a>)</li>
<li>Fix large state resolutions from stalling Synapse for seconds at a time. (<a href="https://github.com/matrix-org/synapse/issues/7735">#7735</a>, <a href="https://github.com/matrix-org/synapse/issues/7746">#7746</a>)</li>
</ul>
<h2 id="improved-documentation-1">Improved Documentation</h2>
<ul>
<li>Spelling correction in sample_config.yaml. (<a href="https://github.com/matrix-org/synapse/issues/7652">#7652</a>)</li>
<li>Added instructions for how to use Keycloak via OpenID Connect to authenticate with Synapse. (<a href="https://github.com/matrix-org/synapse/issues/7659">#7659</a>)</li>
<li>Corrected misspelling of PostgreSQL. (<a href="https://github.com/matrix-org/synapse/issues/7724">#7724</a>)</li>
</ul>
<h2 id="deprecations-and-removals">Deprecations and Removals</h2>
<ul>
<li>Deprecate <code>m.login.jwt</code> login method in favour of <code>org.matrix.login.jwt</code>, as <code>m.login.jwt</code> is not part of the Matrix spec. (<a href="https://github.com/matrix-org/synapse/issues/7675">#7675</a>)</li>
</ul>
<h2 id="internal-changes-1">Internal Changes</h2>
<ul>
<li>Refactor getting replication updates from database. (<a href="https://github.com/matrix-org/synapse/issues/7636">#7636</a>)</li>
<li>Clean-up the login fallback code. (<a href="https://github.com/matrix-org/synapse/issues/7657">#7657</a>)</li>
<li>Increase the default SAML session expiry time to 15 minutes. (<a href="https://github.com/matrix-org/synapse/issues/7664">#7664</a>)</li>
<li>Convert the device message and pagination handlers to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7678">#7678</a>)</li>
<li>Convert typing handler to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7679">#7679</a>)</li>
<li>Require <code>parameterized</code> package version to be at least 0.7.0. (<a href="https://github.com/matrix-org/synapse/issues/7680">#7680</a>)</li>
<li>Refactor handling of <code>listeners</code> configuration settings. (<a href="https://github.com/matrix-org/synapse/issues/7681">#7681</a>)</li>
<li>Replace uses of <code>six.iterkeys</code>/<code>iteritems</code>/<code>itervalues</code> with <code>keys()</code>/<code>items()</code>/<code>values()</code>. (<a href="https://github.com/matrix-org/synapse/issues/7692">#7692</a>)</li>
<li>Add support for using <code>rust-python-jaeger-reporter</code> library to reduce jaeger tracing overhead. (<a href="https://github.com/matrix-org/synapse/issues/7697">#7697</a>)</li>
<li>Make Tox actions work on Debian 10. (<a href="https://github.com/matrix-org/synapse/issues/7703">#7703</a>)</li>
<li>Replace all remaining uses of <code>six</code> with native Python 3 equivalents. Contributed by @ilmari. (<a href="https://github.com/matrix-org/synapse/issues/7704">#7704</a>)</li>
<li>Fix broken link in sample config. (<a href="https://github.com/matrix-org/synapse/issues/7712">#7712</a>)</li>
<li>Speed up state res v2 across large state differences. (<a href="https://github.com/matrix-org/synapse/issues/7725">#7725</a>)</li>
<li>Convert directory handler to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7727">#7727</a>)</li>
<li>Move <code>flake8</code> to the end of <code>scripts-dev/lint.sh</code> as it takes the longest and could cause the script to exit early. (<a href="https://github.com/matrix-org/synapse/issues/7738">#7738</a>)</li>
<li>Explain the &quot;test&quot; conditional requirement for dependencies is not all of the modules necessary to run the unit tests. (<a href="https://github.com/matrix-org/synapse/issues/7751">#7751</a>)</li>
<li>Add some metrics for inbound and outbound federation latencies: <code>synapse_federation_server_pdu_process_time</code> and <code>synapse_event_processing_lag_by_event</code>. (<a href="https://github.com/matrix-org/synapse/issues/7755">#7755</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;07&#x2F;02&#x2F;synapse-1-15-2-released-with-security-fixes&#x2F;" title="Synapse 1.15.2 released with security fixes">Synapse 1.15.2 released with security fixes</a></h2>
                <span>
                    02.07.2020 17:58
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/richard-van-der-hoff">
                        Richard van der Hoff
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Folks, today we are releasing Synapse 1.15.2, which is a security release which contains fixes to two separate problems. We are also putting out the second release candidate for the forthcoming Synapse 1.16, including the same fixes.</p>
<p>Firstly, we have fixed a bug in the implementation of the room state resolution algorithm which could cause users to be unexpectedly ejected from rooms (Synapse issue <a href="https://github.com/matrix-org/synapse/issues/7742">#7742</a>).</p>
<p>Secondly, we have improved the security of pages served as part of the Single-Sign-on login flows to prevent clickjacking attacks. Thank you to <a href="https://sandhose.fr/">Quentin Gliech</a> for reporting this.</p>
<p>We are not aware of either of these vulnerabilities being exploited in the wild, but we recommend that administrators upgrade as soon as possible. Those on Synapse 1.15.1 or earlier should upgrade to Synapse 1.15.2, while those who have already upgraded to Synapse 1.16.0rc1 should upgrade to 1.16.0rc2.</p>
<p>Get the new releases from any of the usual sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md. 1.15.2 is on github <a href="https://github.com/matrix-org/synapse/releases/tag/v1.15.2">here</a>, and 1.16.0rc2 is <a href="https://github.com/matrix-org/synapse/releases/tag/v1.16.0rc2">here</a>.</p>
<p>Changelog for 1.15.2 follows:</p>
<h2 id="synapse-1-15-2-2020-07-02">Synapse 1.15.2 (2020-07-02)</h2>
<p>Due to the two security issues highlighted below, server administrators are
encouraged to update Synapse. We are not aware of these vulnerabilities being
exploited in the wild.</p>
<h3 id="security-advisory">Security advisory</h3>
<ul>
<li>
<p>A malicious homeserver could force Synapse to reset the state in a room to a
small subset of the correct state. This affects all Synapse deployments which
federate with untrusted servers. (<a href="https://github.com/matrix-org/synapse/commit/96e9afe62500310977dc3cbc99a8d16d3d2fa15c">96e9afe6</a>)</p>
</li>
<li>
<p>HTML pages served via Synapse were vulnerable to clickjacking attacks. This
predominantly affects homeservers with single-sign-on enabled, but all server
administrators are encouraged to upgrade.  (<a href="https://github.com/matrix-org/synapse/commit/ea26e9a98b0541fc886a1cb826a38352b7599dbe">ea26e9a9</a>)</p>
<p>This was reported by <a href="https://sandhose.fr/">Quentin Gliech</a>.</p>
</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;06&#x2F;16&#x2F;synapse-1-15-1-released&#x2F;" title="Synapse 1.15.1 released">Synapse 1.15.1 released</a></h2>
                <span>
                    16.06.2020 12:25
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Synapse 1.15.1 is a bug fix release to fix two bugs introduced in 1.15.0.</p>
<p>The first prevented users of certain clients (including Riot) to add or remove third party identifiers such as email addresses.</p>
<p>The second caused Synapse not to start when configured with certain password auth providers.</p>
<p>Sorry if you have been bitten!</p>
<p>Get 1.15.1 from <a href="https://github.com/matrix-org/synapse/releases/tag/v1.15.1">github</a> or any of the sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md.</p>
<p>Changelog since v1.15.0</p>
<h1 id="synapse-1-15-1-2020-06-16">Synapse 1.15.1 (2020-06-16)</h1>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix a bug introduced in v1.15.0 that would crash Synapse on start when using certain password auth providers. (<a href="https://github.com/matrix-org/synapse/issues/7684">#7684</a>)</li>
<li>Fix a bug introduced in v1.15.0 which meant that some 3PID management endpoints were not accessible on the correct URL. (<a href="https://github.com/matrix-org/synapse/issues/7685">#7685</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;06&#x2F;11&#x2F;synapse-1-15-0-released&#x2F;" title="Synapse 1.15.0 released">Synapse 1.15.0 released</a></h2>
                <span>
                    11.06.2020 18:27
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Synapse 1.15.0 release day folks.</p>
<p>We continue our push to improve performance across the board. Factoring out event persistence into a separate worker pointed the way to a host of small but collectively important improvements. Expect further changes in coming releases.</p>
<p>Aside from that the admin API continues to grow (this time device management) and we have improved device list syncing to aid e2ee reliability.</p>
<p>We are receiving an increasing number of high quality PRs from the community, please keep them coming. Special thanks to <a href="https://github.com/cg505">cg505</a>, <a href="https://github.com/dklimpel">dklimpel</a>, <a href="https://github.com/WGH">WGH</a>, <a href="https://github.com/olof">olof</a> and <a href="https://github.com/ilmari">ilmari</a></p>
<p>Get 1.15.0 from <a href="https://github.com/matrix-org/synapse/releases/tag/v1.15.0">github</a> or any of the sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md.</p>
<p>Changelog since v1.14.0</p>
<h1 id="synapse-1-15-0-2020-06-11">Synapse 1.15.0 (2020-06-11)</h1>
<p>No significant changes.</p>
<h1 id="synapse-1-15-0rc1-2020-06-09">Synapse 1.15.0rc1 (2020-06-09)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Advertise support for Client-Server API r0.6.0 and remove related unstable feature flags. (<a href="https://github.com/matrix-org/synapse/issues/6585">#6585</a>)</li>
<li>Add an option to disable autojoining rooms for guest accounts. (<a href="https://github.com/matrix-org/synapse/issues/6637">#6637</a>)</li>
<li>For SAML authentication, add the ability to pass email addresses to be added to new users' accounts via SAML attributes. Contributed by Christopher Cooper. (<a href="https://github.com/matrix-org/synapse/issues/7385">#7385</a>)</li>
<li>Add admin APIs to allow server admins to manage users' devices. Contributed by @dklimpel. (<a href="https://github.com/matrix-org/synapse/issues/7481">#7481</a>)</li>
<li>Add support for generating thumbnails for WebP images. Previously, users would see an empty box instead of preview image. Contributed by @WGH-. (<a href="https://github.com/matrix-org/synapse/issues/7586">#7586</a>)</li>
<li>Support the standardized <code>m.login.sso</code> user-interactive authentication flow. (<a href="https://github.com/matrix-org/synapse/issues/7630">#7630</a>)</li>
</ul>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Allow new users to be registered via the admin API even if the monthly active user limit has been reached. Contributed by @dklimpel. (<a href="https://github.com/matrix-org/synapse/issues/7263">#7263</a>)</li>
<li>Fix email notifications not being enabled for new users when created via the Admin API. (<a href="https://github.com/matrix-org/synapse/issues/7267">#7267</a>)</li>
<li>Fix str placeholders in an instance of <code>PrepareDatabaseException</code>. Introduced in Synapse v1.8.0. (<a href="https://github.com/matrix-org/synapse/issues/7575">#7575</a>)</li>
<li>Fix a bug in automatic user creation during first time login with <code>m.login.jwt</code>. Regression in v1.6.0. Contributed by @olof. (<a href="https://github.com/matrix-org/synapse/issues/7585">#7585</a>)</li>
<li>Fix a bug causing the cross-signing keys to be ignored when resyncing a device list. (<a href="https://github.com/matrix-org/synapse/issues/7594">#7594</a>)</li>
<li>Fix metrics failing when there is a large number of active background processes. (<a href="https://github.com/matrix-org/synapse/issues/7597">#7597</a>)</li>
<li>Fix bug where returning rooms for a group would fail if it included a room that the server was not in. (<a href="https://github.com/matrix-org/synapse/issues/7599">#7599</a>)</li>
<li>Fix duplicate key violation when persisting read markers. (<a href="https://github.com/matrix-org/synapse/issues/7607">#7607</a>)</li>
<li>Prevent an entire iteration of the device list resync loop from failing if one server responds with a malformed result. (<a href="https://github.com/matrix-org/synapse/issues/7609">#7609</a>)</li>
<li>Fix exceptions when fetching events from a remote host fails. (<a href="https://github.com/matrix-org/synapse/issues/7622">#7622</a>)</li>
<li>Make <code>synctl restart</code> start synapse if it wasn't running. (<a href="https://github.com/matrix-org/synapse/issues/7624">#7624</a>)</li>
<li>Pass device information through to the login endpoint when using the login fallback. (<a href="https://github.com/matrix-org/synapse/issues/7629">#7629</a>)</li>
<li>Advertise the <code>m.login.token</code> login flow when OpenID Connect is enabled. (<a href="https://github.com/matrix-org/synapse/issues/7631">#7631</a>)</li>
<li>Fix bug in account data replication stream. (<a href="https://github.com/matrix-org/synapse/issues/7656">#7656</a>)</li>
</ul>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Update the OpenBSD installation instructions. (<a href="https://github.com/matrix-org/synapse/issues/7587">#7587</a>)</li>
<li>Advertise Python 3.8 support in <code>setup.py</code>. (<a href="https://github.com/matrix-org/synapse/issues/7602">#7602</a>)</li>
<li>Add a link to <code>#synapse:matrix.org</code> in the troubleshooting section of the README. (<a href="https://github.com/matrix-org/synapse/issues/7603">#7603</a>)</li>
<li>Clarifications to the admin api documentation. (<a href="https://github.com/matrix-org/synapse/issues/7647">#7647</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Convert the identity handler to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7561">#7561</a>)</li>
<li>Improve query performance for fetching state from a PostgreSQL database. Contributed by @ilmari. (<a href="https://github.com/matrix-org/synapse/issues/7567">#7567</a>)</li>
<li>Speed up processing of federation stream RDATA rows. (<a href="https://github.com/matrix-org/synapse/issues/7584">#7584</a>)</li>
<li>Add comment to systemd example to show postgresql dependency. (<a href="https://github.com/matrix-org/synapse/issues/7591">#7591</a>)</li>
<li>Refactor <code>Ratelimiter</code> to limit the amount of expensive config value accesses. (<a href="https://github.com/matrix-org/synapse/issues/7595">#7595</a>)</li>
<li>Convert groups handlers to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7600">#7600</a>)</li>
<li>Clean up exception handling in <code>SAML2ResponseResource</code>. (<a href="https://github.com/matrix-org/synapse/issues/7614">#7614</a>)</li>
<li>Check that all asynchronous tasks succeed and general cleanup of <code>MonthlyActiveUsersTestCase</code> and <code>TestMauLimit</code>. (<a href="https://github.com/matrix-org/synapse/issues/7619">#7619</a>)</li>
<li>Convert <code>get_user_id_by_threepid</code> to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7620">#7620</a>)</li>
<li>Switch to upstream <code>dh-virtualenv</code> rather than our fork for Debian package builds. (<a href="https://github.com/matrix-org/synapse/issues/7621">#7621</a>)</li>
<li>Update CI scripts to check the number in the newsfile fragment. (<a href="https://github.com/matrix-org/synapse/issues/7623">#7623</a>)</li>
<li>Check if the localpart of a Matrix ID is reserved for guest users earlier in the registration flow, as well as when responding to requests to <code>/register/available</code>. (<a href="https://github.com/matrix-org/synapse/issues/7625">#7625</a>)</li>
<li>Minor cleanups to OpenID Connect integration. (<a href="https://github.com/matrix-org/synapse/issues/7628">#7628</a>)</li>
<li>Attempt to fix flaky test: <code>PhoneHomeStatsTestCase.test_performance_100</code>. (<a href="https://github.com/matrix-org/synapse/issues/7634">#7634</a>)</li>
<li>Fix typos of <code>m.olm.curve25519-aes-sha2</code> and <code>m.megolm.v1.aes-sha2</code> in comments, test files. (<a href="https://github.com/matrix-org/synapse/issues/7637">#7637</a>)</li>
<li>Convert user directory, state deltas, and stats handlers to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7640">#7640</a>)</li>
<li>Remove some unused constants. (<a href="https://github.com/matrix-org/synapse/issues/7644">#7644</a>)</li>
<li>Fix type information on <code>assert_*_is_admin</code> methods. (<a href="https://github.com/matrix-org/synapse/issues/7645">#7645</a>)</li>
<li>Convert registration handler to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7649">#7649</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;05&#x2F;28&#x2F;synapse-1-14-0-released&#x2F;" title="Synapse 1.14.0 released">Synapse 1.14.0 released</a></h2>
                <span>
                    28.05.2020 17:45
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                <br>
                <small>Last update: 28.05.2020 17:23</small>
            </header>
            <div>
                
                <p>Synapse 1.14.0 has landed.</p>
<p>This release contains OpenId Connect support, so that admins can configure a whole range of SSO options. We're really excited about what this means for helping users sign up and are considering it for matrix.org.</p>
<p>1.14.0 also contains finer grained cache configuration support, so that admins can tune caches in a more granular way. Our experience is that cache tuning can make a big difference to Synapse performance and over time we hope to continue improving cache tooling. Potentially we could even have caches auto-tune.</p>
<p>You'll also find support for <a href="https://matrix.org/docs/spec/rooms/v6">rooms v6</a>. v6 contains some small but important changes to improve the security of the room model. As with all room version upgrades we can't switch to v6 as the default version immediately since we need to build up a critical mass of servers that can support it. So upgrade and watch this space for when we switch over properly.</p>
<p>As an aside we continue to be very happy with using Redis for worker inter-communication and will likely recommend it for production use in the coming weeks.</p>
<p>Get 1.14.0 from <a href="https://github.com/matrix-org/synapse/releases/tag/v1.14.0">github</a> or any of the sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md.</p>
<p>Changelog since v1.13.0</p>
<h1 id="synapse-1-14-0-2020-05-28">Synapse 1.14.0 (2020-05-28)</h1>
<p>No significant changes.</p>
<h1 id="synapse-1-14-0rc2-2020-05-27">Synapse 1.14.0rc2 (2020-05-27)</h1>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix cache config to not apply cache factor to event cache. Regression in v1.14.0rc1. (<a href="https://github.com/matrix-org/synapse/issues/7578">#7578</a>)</li>
<li>Fix bug where <code>ReplicationStreamer</code> was not always started when replication was enabled. Bug introduced in v1.14.0rc1. (<a href="https://github.com/matrix-org/synapse/issues/7579">#7579</a>)</li>
<li>Fix specifying individual cache factors for caches with special characters in their name. Regression in v1.14.0rc1. (<a href="https://github.com/matrix-org/synapse/issues/7580">#7580</a>)</li>
</ul>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Fix the OIDC <code>client_auth_method</code> value in the sample config. (<a href="https://github.com/matrix-org/synapse/issues/7581">#7581</a>)</li>
</ul>
<h1 id="synapse-1-14-0rc1-2020-05-26">Synapse 1.14.0rc1 (2020-05-26)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Synapse's cache factor can now be configured in <code>homeserver.yaml</code> by the <code>caches.global_factor</code> setting. Additionally, <code>caches.per_cache_factors</code> controls the cache factors for individual caches. (<a href="https://github.com/matrix-org/synapse/issues/6391">#6391</a>)</li>
<li>Add OpenID Connect login/registration support. Contributed by Quentin Gliech, on behalf of <a href="https://connecteu.rs">les Connecteurs</a>. (<a href="https://github.com/matrix-org/synapse/issues/7256">#7256</a>, <a href="https://github.com/matrix-org/synapse/issues/7457">#7457</a>)</li>
<li>Add room details admin endpoint. Contributed by Awesome Technologies Innovationslabor GmbH. (<a href="https://github.com/matrix-org/synapse/issues/7317">#7317</a>)</li>
<li>Allow for using more than one spam checker module at once. (<a href="https://github.com/matrix-org/synapse/issues/7435">#7435</a>)</li>
<li>Add additional authentication checks for <code>m.room.power_levels</code> event per <a href="https://github.com/matrix-org/matrix-doc/pull/2209">MSC2209</a>. (<a href="https://github.com/matrix-org/synapse/issues/7502">#7502</a>)</li>
<li>Implement room version 6 per <a href="https://github.com/matrix-org/matrix-doc/pull/2240">MSC2240</a>. (<a href="https://github.com/matrix-org/synapse/issues/7506">#7506</a>)</li>
<li>Add highly experimental option to move event persistence off master. (<a href="https://github.com/matrix-org/synapse/issues/7281">#7281</a>, <a href="https://github.com/matrix-org/synapse/issues/7374">#7374</a>, <a href="https://github.com/matrix-org/synapse/issues/7436">#7436</a>, <a href="https://github.com/matrix-org/synapse/issues/7440">#7440</a>, <a href="https://github.com/matrix-org/synapse/issues/7475">#7475</a>, <a href="https://github.com/matrix-org/synapse/issues/7490">#7490</a>, <a href="https://github.com/matrix-org/synapse/issues/7491">#7491</a>, <a href="https://github.com/matrix-org/synapse/issues/7492">#7492</a>, <a href="https://github.com/matrix-org/synapse/issues/7493">#7493</a>, <a href="https://github.com/matrix-org/synapse/issues/7495">#7495</a>, <a href="https://github.com/matrix-org/synapse/issues/7515">#7515</a>, <a href="https://github.com/matrix-org/synapse/issues/7516">#7516</a>, <a href="https://github.com/matrix-org/synapse/issues/7517">#7517</a>, <a href="https://github.com/matrix-org/synapse/issues/7542">#7542</a>)</li>
</ul>
<h2 id="bugfixes-1">Bugfixes</h2>
<ul>
<li>Fix a bug where event updates might not be sent over replication to worker processes after the stream falls behind. (<a href="https://github.com/matrix-org/synapse/issues/7384">#7384</a>)</li>
<li>Allow expired user accounts to log out their device sessions. (<a href="https://github.com/matrix-org/synapse/issues/7443">#7443</a>)</li>
<li>Fix a bug that would cause Synapse not to resync out-of-sync device lists. (<a href="https://github.com/matrix-org/synapse/issues/7453">#7453</a>)</li>
<li>Prevent rooms with 0 members or with invalid version strings from breaking group queries. (<a href="https://github.com/matrix-org/synapse/issues/7465">#7465</a>)</li>
<li>Workaround for an upstream Twisted bug that caused Synapse to become unresponsive after startup. (<a href="https://github.com/matrix-org/synapse/issues/7473">#7473</a>)</li>
<li>Fix Redis reconnection logic that can result in missed updates over replication if master reconnects to Redis without restarting. (<a href="https://github.com/matrix-org/synapse/issues/7482">#7482</a>)</li>
<li>When sending <code>m.room.member</code> events, omit <code>displayname</code> and <code>avatar_url</code> if they aren't set instead of setting them to <code>null</code>. Contributed by Aaron Raimist. (<a href="https://github.com/matrix-org/synapse/issues/7497">#7497</a>)</li>
<li>Fix incorrect <code>method</code> label on <code>synapse_http_matrixfederationclient_{requests,responses}</code> prometheus metrics. (<a href="https://github.com/matrix-org/synapse/issues/7503">#7503</a>)</li>
<li>Ignore incoming presence events from other homeservers if presence is disabled locally. (<a href="https://github.com/matrix-org/synapse/issues/7508">#7508</a>)</li>
<li>Fix a long-standing bug that broke the update remote profile background process. (<a href="https://github.com/matrix-org/synapse/issues/7511">#7511</a>)</li>
<li>Hash passwords as early as possible during password reset. (<a href="https://github.com/matrix-org/synapse/issues/7538">#7538</a>)</li>
<li>Fix bug where a local user leaving a room could fail under rare circumstances. (<a href="https://github.com/matrix-org/synapse/issues/7548">#7548</a>)</li>
<li>Fix &quot;Missing RelayState parameter&quot; error when using user interactive authentication with SAML for some SAML providers. (<a href="https://github.com/matrix-org/synapse/issues/7552">#7552</a>)</li>
<li>Fix exception <code>'GenericWorkerReplicationHandler' object has no attribute 'send_federation_ack'</code>, introduced in v1.13.0. (<a href="https://github.com/matrix-org/synapse/issues/7564">#7564</a>)</li>
<li><code>synctl</code> now warns if it was unable to stop Synapse and will not attempt to start Synapse if nothing was stopped. Contributed by Romain Bouyé. (<a href="https://github.com/matrix-org/synapse/issues/6590">#6590</a>)</li>
</ul>
<h2 id="updates-to-the-docker-image">Updates to the Docker image</h2>
<ul>
<li>Update docker runtime image to Alpine v3.11. Contributed by @Starbix. (<a href="https://github.com/matrix-org/synapse/issues/7398">#7398</a>)</li>
</ul>
<h2 id="improved-documentation-1">Improved Documentation</h2>
<ul>
<li>Update information about mapping providers for SAML and OpenID. (<a href="https://github.com/matrix-org/synapse/issues/7458">#7458</a>)</li>
<li>Add additional reverse proxy example for Caddy v2. Contributed by Jeff Peeler. (<a href="https://github.com/matrix-org/synapse/issues/7463">#7463</a>)</li>
<li>Fix copy-paste error in <code>ServerNoticesConfig</code> docstring. Contributed by @ptman. (<a href="https://github.com/matrix-org/synapse/issues/7477">#7477</a>)</li>
<li>Improve the formatting of <code>reverse_proxy.md</code>. (<a href="https://github.com/matrix-org/synapse/issues/7514">#7514</a>)</li>
<li>Change the systemd worker service to check that the worker config file exists instead of silently failing. Contributed by David Vo. (<a href="https://github.com/matrix-org/synapse/issues/7528">#7528</a>)</li>
<li>Minor clarifications to the TURN docs. (<a href="https://github.com/matrix-org/synapse/issues/7533">#7533</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Add typing annotations in <code>synapse.federation</code>. (<a href="https://github.com/matrix-org/synapse/issues/7382">#7382</a>)</li>
<li>Convert the room handler to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7396">#7396</a>)</li>
<li>Improve performance of <code>get_e2e_cross_signing_key</code>. (<a href="https://github.com/matrix-org/synapse/issues/7428">#7428</a>)</li>
<li>Improve performance of <code>mark_as_sent_devices_by_remote</code>. (<a href="https://github.com/matrix-org/synapse/issues/7429">#7429</a>, <a href="https://github.com/matrix-org/synapse/issues/7562">#7562</a>)</li>
<li>Add type hints to the SAML handler. (<a href="https://github.com/matrix-org/synapse/issues/7445">#7445</a>)</li>
<li>Remove storage method <code>get_hosts_in_room</code> that is no longer called anywhere. (<a href="https://github.com/matrix-org/synapse/issues/7448">#7448</a>)</li>
<li>Fix some typos in the <code>notice_expiry</code> templates. (<a href="https://github.com/matrix-org/synapse/issues/7449">#7449</a>)</li>
<li>Convert the federation handler to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7459">#7459</a>)</li>
<li>Convert the search handler to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7460">#7460</a>)</li>
<li>Add type hints to <code>synapse.event_auth</code>. (<a href="https://github.com/matrix-org/synapse/issues/7505">#7505</a>)</li>
<li>Convert the room member handler to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7507">#7507</a>)</li>
<li>Add type hints to room member handler. (<a href="https://github.com/matrix-org/synapse/issues/7513">#7513</a>)</li>
<li>Fix typing annotations in <code>tests.replication</code>. (<a href="https://github.com/matrix-org/synapse/issues/7518">#7518</a>)</li>
<li>Remove some redundant Python 2 support code. (<a href="https://github.com/matrix-org/synapse/issues/7519">#7519</a>)</li>
<li>All endpoints now respond with a 200 OK for <code>OPTIONS</code> requests. (<a href="https://github.com/matrix-org/synapse/issues/7534">#7534</a>, <a href="https://github.com/matrix-org/synapse/issues/7560">#7560</a>)</li>
<li>Synapse now exports <a href="https://doc.pypy.org/en/latest/gc_info.html#gc-get-stats">detailed allocator statistics</a> and basic GC timings as Prometheus metrics (<code>pypy_gc_time_seconds_total</code> and <code>pypy_memory_bytes</code>) when run under PyPy. Contributed by Ivan Shapovalov. (<a href="https://github.com/matrix-org/synapse/issues/7536">#7536</a>)</li>
<li>Remove Ubuntu Cosmic and Disco from the list of distributions which we provide <code>.deb</code>s for, due to end-of-life. (<a href="https://github.com/matrix-org/synapse/issues/7539">#7539</a>)</li>
<li>Make worker processes return a stubbed-out response to <code>GET /presence</code> requests. (<a href="https://github.com/matrix-org/synapse/issues/7545">#7545</a>)</li>
<li>Optimise some references to <code>hs.config</code>. (<a href="https://github.com/matrix-org/synapse/issues/7546">#7546</a>)</li>
<li>On upgrade room only send canonical alias once. (<a href="https://github.com/matrix-org/synapse/issues/7547">#7547</a>)</li>
<li>Fix some indentation inconsistencies in the sample config. (<a href="https://github.com/matrix-org/synapse/issues/7550">#7550</a>)</li>
<li>Include <code>synapse.http.site</code> in type checking. (<a href="https://github.com/matrix-org/synapse/issues/7553">#7553</a>)</li>
<li>Fix some test code to not mangle stacktraces, to make it easier to debug errors. (<a href="https://github.com/matrix-org/synapse/issues/7554">#7554</a>)</li>
<li>Refresh apt cache when building <code>dh_virtualenv</code> docker image. (<a href="https://github.com/matrix-org/synapse/issues/7555">#7555</a>)</li>
<li>Stop logging some expected HTTP request errors as exceptions. (<a href="https://github.com/matrix-org/synapse/issues/7556">#7556</a>, <a href="https://github.com/matrix-org/synapse/issues/7563">#7563</a>)</li>
<li>Convert sending mail to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7557">#7557</a>)</li>
<li>Simplify <code>reap_monthly_active_users</code>. (<a href="https://github.com/matrix-org/synapse/issues/7558">#7558</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;05&#x2F;27&#x2F;room-version-6-client-server-r0-6-1-and-federation-r0-1-4-spec-releases&#x2F;" title="Room Version 6, Client-Server r0.6.1, and Federation r0.1.4 spec releases">Room Version 6, Client-Server r0.6.1, and Federation r0.1.4 spec releases</a></h2>
                <span>
                    27.05.2020 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/travis-ralston">
                        Travis Ralston
                    </a>
                </span>
                
            </header>
            <div>
                
                <h2 id="room-version-6-client-server-r0-6-1-and-federation-r0-1-4-spec-releases">Room Version 6, Client-Server r0.6.1, and Federation r0.1.4 spec releases</h2>
<p>Hey all,</p>
<p>It's been <a href="https://matrix.org/blog/2019/11/08/client-server-r-0-6-0-and-identity-service-r-0-3-0-releases">a little while</a> since we've done a spec release, so here we are with <a href="https://matrix.org/docs/spec/rooms/v6">Room Version 6</a>, <a href="https://matrix.org/docs/spec/client_server/r0.6.1">Client-Server r0.6.1</a>, and <a href="https://matrix.org/docs/spec/server_server/r0.1.4">Federation r0.1.4</a>.</p>
<p>Room Version 6 (and the associated Federation r0.1.4 release) is largely something for implementations to worry about. It contains new event authorisation rules, changes to the redaction algorithm, and stricter compliance for JSON.</p>
<p>Client-Server r0.6.1 contains a number of clarifications as well as SSO support for authorisation, &quot;soft logout&quot; to avoid needlessly destroying e2e history, and new ways to publish aliases within rooms.</p>
<p>If you're wondering where all the E2E-by-default related MSCs are - we're doing final iterations based on the real-world feedback from the E2E-by-default launch a few weeks ago, and they are then expected to land in the upcoming Client-Server r0.7.</p>
<p>Here's all the MSCs that got merged since the last release:</p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2240">MSC2240</a>: Room version 6</li>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2457">MSC2457</a>: Invalidating devices during password modification</li>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2454">MSC2454</a>: Support UI auth for SSO</li>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2451">MSC2451</a>: Remove <code>query_auth</code> federation endpoint</li>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2432">MSC2432</a>: Updated semantics for publishing room aliases</li>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2324">MSC2324</a>: Facilitating early releases of software dependent on spec</li>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2313">MSC2313</a>: Moderation policies as rooms</li>
<li><a href="https://github.com/matrix-org/matrix-doc/issues/1466">MSC1466</a>: Soft Logout</li>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2540">MSC2540</a>: Stricter event validation: JSON compliance</li>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2209">MSC2209</a>: Alter auth rules to check notifications in m.room.power_levels</li>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/1802">MSC1802</a>: Remove the '200' value from some federation responses</li>
</ul>
<h3 id="client-server-r0-6-1-changelog">Client-Server r0.6.1 changelog</h3>
<h4 id="new-endpoints">New Endpoints</h4>
<ul>
<li>Added <code>/rooms/{roomId}/aliases</code> for retrieving local aliases for a room. (<a href="https://github.com/matrix-org/matrix-doc/issues/2562">#2562</a>)</li>
</ul>
<h4 id="backwards-compatible-changes">Backwards Compatible Changes</h4>
<ul>
<li>Added data structures for defining moderation policies in rooms per <a href="https://github.com/matrix-org/matrix-doc/pull/2313">MSC2313</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/2434">#2434</a>)</li>
<li>Optionally invalidate other access tokens during password modification per <a href="https://github.com/matrix-org/matrix-doc/pull/2457">MSC2457</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/2523">#2523</a>)</li>
<li>Add User-Interactive Authentication for SSO-backed homeserver per <a href="https://github.com/matrix-org/matrix-doc/pull/2454">MSC2454</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/2532">#2532</a>)</li>
<li>Add soft-logout support per <a href="https://github.com/matrix-org/matrix-doc/issues/1466">MSC1466</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/2546">#2546</a>)</li>
<li>Replaced legacy room alias handling with a more sustainable solution per <a href="https://github.com/matrix-org/matrix-doc/pull/2432">MSC2432</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/2562">#2562</a>)</li>
</ul>
<h4 id="spec-clarifications">Spec Clarifications</h4>
<ul>
<li>List available enum values for the room versions capability. (<a href="https://github.com/matrix-org/matrix-doc/issues/2245">#2245</a>)</li>
<li>Fix various spelling errors throughout the specification. (<a href="https://github.com/matrix-org/matrix-doc/issues/2351">#2351</a>, <a href="https://github.com/matrix-org/matrix-doc/issues/2415">#2415</a>, <a href="https://github.com/matrix-org/matrix-doc/issues/2453">#2453</a>, <a href="https://github.com/matrix-org/matrix-doc/issues/2524">#2524</a>, <a href="https://github.com/matrix-org/matrix-doc/issues/2553">#2553</a>, <a href="https://github.com/matrix-org/matrix-doc/issues/2569">#2569</a>)</li>
<li>Minor clarifications to token-based User-Interactive Authentication. (<a href="https://github.com/matrix-org/matrix-doc/issues/2369">#2369</a>)</li>
<li>Minor clarification for what the user directory searches. (<a href="https://github.com/matrix-org/matrix-doc/issues/2381">#2381</a>)</li>
<li>Fix key export format example to match the specification. (<a href="https://github.com/matrix-org/matrix-doc/issues/2430">#2430</a>)</li>
<li>Clarify the IV data type for encrypted files. (<a href="https://github.com/matrix-org/matrix-doc/issues/2492">#2492</a>)</li>
<li>Fix the <code>.m.rule.contains_user_name</code> default push rule to set the highlight tweak. (<a href="https://github.com/matrix-org/matrix-doc/issues/2519">#2519</a>)</li>
<li>Clarify that an <code>event_id</code> is returned when sending events. (<a href="https://github.com/matrix-org/matrix-doc/issues/2525">#2525</a>)</li>
<li>Fix some numbers in the specification to match their explanation text. (<a href="https://github.com/matrix-org/matrix-doc/issues/2554">#2554</a>)</li>
<li>Move redaction algorithm into the room version specifications. (<a href="https://github.com/matrix-org/matrix-doc/issues/2563">#2563</a>)</li>
<li>Clarify signature object structures for encryption. (<a href="https://github.com/matrix-org/matrix-doc/issues/2566">#2566</a>)</li>
<li>Clarify which events are created as part of <code>/createRoom</code>. (<a href="https://github.com/matrix-org/matrix-doc/issues/2571">#2571</a>)</li>
<li>Remove claims that the homeserver is exclusively responsible for profile information in membership events. (<a href="https://github.com/matrix-org/matrix-doc/issues/2574">#2574</a>)</li>
</ul>
<h3 id="server-server-federation-r0-1-4-changelog">Server-Server (Federation) r0.1.4 changelog</h3>
<h4 id="new-endpoints-1">New Endpoints</h4>
<ul>
<li>Add new <code>POST /publicRooms</code> endpoint for filtering the room directory. (<a href="https://github.com/matrix-org/matrix-doc/issues/2305">#2305</a>)</li>
<li>Add new v2 <code>/send_join</code> and <code>/send_leave</code> endpoints per <a href="https://github.com/matrix-org/matrix-doc/pull/1802">MSC1802</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/2547">#2547</a>)</li>
</ul>
<h4 id="removed-endpoints">Removed Endpoints</h4>
<ul>
<li>Remove the unused <code>query_auth</code> API per <a href="https://github.com/matrix-org/matrix-doc/pull/2451">MSC2451</a>. (<a href="https://github.com/matrix-org/matrix-doc/issues/2470">#2470</a>)</li>
</ul>
<h4 id="spec-clarifications-1">Spec Clarifications</h4>
<ul>
<li>Move auth event selection to a more obvious location. (<a href="https://github.com/matrix-org/matrix-doc/issues/2392">#2392</a>)</li>
<li>Fix typo in Request Authentication python example. (<a href="https://github.com/matrix-org/matrix-doc/issues/2510">#2510</a>)</li>
<li>Clarify which fields are required on the key server endpoints. (<a href="https://github.com/matrix-org/matrix-doc/issues/2527">#2527</a>)</li>
<li>Clarify the limits of <code>prev_events</code> and <code>auth_events</code> for PDUs. (<a href="https://github.com/matrix-org/matrix-doc/issues/2538">#2538</a>)</li>
<li>Clarify which events are targeted by backfill. (<a href="https://github.com/matrix-org/matrix-doc/issues/2559">#2559</a>)</li>
<li>Fix the response format of the <code>/send</code> endpoint. (<a href="https://github.com/matrix-org/matrix-doc/issues/2560">#2560</a>)</li>
<li>Clarify signature object structures for encryption. (<a href="https://github.com/matrix-org/matrix-doc/issues/2566">#2566</a>)</li>
<li>Clarify the server names to use when signing requests. (<a href="https://github.com/matrix-org/matrix-doc/issues/2570">#2570</a>)</li>
<li>Clarify the state/auth chain requirements for <code>/send_join</code>. (<a href="https://github.com/matrix-org/matrix-doc/issues/2575">#2575</a>)</li>
<li>Fix various spelling errors throughout the specification. (<a href="https://github.com/matrix-org/matrix-doc/issues/2577">#2577</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;05&#x2F;19&#x2F;synapse-1-13-0-released&#x2F;" title="Synapse 1.13.0 released">Synapse 1.13.0 released</a></h2>
                <span>
                    19.05.2020 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Synapse 1.13.0 is here and it's a whopper!</p>
<p>Highlights include new support for User Interactive Authentication (UIA) for Single Sign-on (SSO) installations. This means that for the first time features that require the user to re-authenticate are available for servers that authenticate by SSO. Notably this means that these servers now support cross signing!</p>
<p>SSO admins should take a look at the SSO notes in the changelog.</p>
<p>We have been working hard on performance for large scale installations. Anyone supporting more than a few thousand users is probably running Synapse in worker mode. This means splitting out functionality from the master process and making use of multiple cores (or machines) to spread the load. Cross process communication was previously handled by a home grown TCP based replication protocol. As part of our ongoing efforts to improve performance we have replaced this replication system with Redis and have been running Redis in production on matrix.org for the past 2 weeks.</p>
<p>Redis itself does not provide a significant performance win directly but it means that it is much less expensive to add new workers to a cluster. The topology of the old system meant that every additional worker carried a small but not insignificant overhead to the master process. Since moving to Redis we have doubled the number of workers backing matrix.org.</p>
<p>We still consider Redis to be experimental and admins should not feel obliged to upgrade. However it looks very promising and we are likely to deprecate the old replication system in future. So watch this space - Redis is the future.</p>
<p>Finally we've seen lots of improvements to our documentation and many thanks for those in the community making contributions in this area.</p>
<p>It is also worth noting for those of you contributing to Synapse that the <code>develop</code> branch is now the default. More details in the changelog, so take a look.</p>
<p>Get 1.13.0 from <a href="https://github.com/matrix-org/synapse/releases/tag/v1.13.0">github</a> or any of the sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md.</p>
<p>Changelog since v1.12.4</p>
<h1 id="synapse-1-13-0-2020-05-19">Synapse 1.13.0 (2020-05-19)</h1>
<p>This release brings some potential changes necessary for certain configurations of Synapse:</p>
<ul>
<li>If your Synapse is configured to use SSO and have a custom <code>sso_redirect_confirm_template_dir</code> configuration option set, you will need to duplicate the new <code>sso_auth_confirm.html</code>, <code>sso_auth_success.html</code> and <code>sso_account_deactivated.html</code> templates into that directory.</li>
<li>Synapse plugins using the <code>complete_sso_login</code> method of <code>synapse.module_api.ModuleApi</code> should instead switch to the async/await version, <code>complete_sso_login_async</code>, which includes additional checks. The former version is now deprecated.</li>
<li>A bug was introduced in Synapse 1.4.0 which could cause the room directory to be incomplete or empty if Synapse was upgraded directly from v1.2.1 or earlier, to versions between v1.4.0 and v1.12.x.</li>
</ul>
<p>Please review <a href="https://github.com/matrix-org/synapse/blob/master/UPGRADE.rst">UPGRADE.rst</a> for more details on these changes and for general upgrade guidance.</p>
<h2 id="notice-of-change-to-the-default-git-branch-for-synapse">Notice of change to the default <code>git</code> branch for Synapse</h2>
<p>With the release of Synapse 1.13.0, the default <code>git</code> branch for Synapse has changed to <code>develop</code>, which is the development tip. This is more consistent with common practice and modern <code>git</code> usage.</p>
<p>The <code>master</code> branch, which tracks the latest release, is still available. It is recommended that developers and distributors who have scripts which run builds using the default branch of Synapse should therefore consider pinning their scripts to <code>master</code>.</p>
<h2 id="features">Features</h2>
<ul>
<li>Extend the <code>web_client_location</code> option to accept an absolute URL to use as a redirect. Adds a warning when running the web client on the same hostname as homeserver. Contributed by Martin Milata. (<a href="https://github.com/matrix-org/synapse/issues/7006">#7006</a>)</li>
<li>Set <code>Referrer-Policy</code> header to <code>no-referrer</code> on media downloads. (<a href="https://github.com/matrix-org/synapse/issues/7009">#7009</a>)</li>
<li>Add support for running replication over Redis when using workers. (<a href="https://github.com/matrix-org/synapse/issues/7040">#7040</a>, <a href="https://github.com/matrix-org/synapse/issues/7325">#7325</a>, <a href="https://github.com/matrix-org/synapse/issues/7352">#7352</a>, <a href="https://github.com/matrix-org/synapse/issues/7401">#7401</a>, <a href="https://github.com/matrix-org/synapse/issues/7427">#7427</a>, <a href="https://github.com/matrix-org/synapse/issues/7439">#7439</a>, <a href="https://github.com/matrix-org/synapse/issues/7446">#7446</a>, <a href="https://github.com/matrix-org/synapse/issues/7450">#7450</a>, <a href="https://github.com/matrix-org/synapse/issues/7454">#7454</a>)</li>
<li>Admin API <code>POST /_synapse/admin/v1/join/&lt;roomIdOrAlias&gt;</code> to join users to a room like <code>auto_join_rooms</code> for creation of users. (<a href="https://github.com/matrix-org/synapse/issues/7051">#7051</a>)</li>
<li>Add options to prevent users from changing their profile or associated 3PIDs. (<a href="https://github.com/matrix-org/synapse/issues/7096">#7096</a>)</li>
<li>Support SSO in the user interactive authentication workflow. (<a href="https://github.com/matrix-org/synapse/issues/7102">#7102</a>, <a href="https://github.com/matrix-org/synapse/issues/7186">#7186</a>, <a href="https://github.com/matrix-org/synapse/issues/7279">#7279</a>, <a href="https://github.com/matrix-org/synapse/issues/7343">#7343</a>)</li>
<li>Allow server admins to define and enforce a password policy (<a href="https://github.com/matrix-org/matrix-doc/issues/2000">MSC2000</a>). (<a href="https://github.com/matrix-org/synapse/issues/7118">#7118</a>)</li>
<li>Improve the support for SSO authentication on the login fallback page. (<a href="https://github.com/matrix-org/synapse/issues/7152">#7152</a>, <a href="https://github.com/matrix-org/synapse/issues/7235">#7235</a>)</li>
<li>Always whitelist the login fallback in the SSO configuration if <code>public_baseurl</code> is set. (<a href="https://github.com/matrix-org/synapse/issues/7153">#7153</a>)</li>
<li>Admin users are no longer required to be in a room to create an alias for it. (<a href="https://github.com/matrix-org/synapse/issues/7191">#7191</a>)</li>
<li>Require admin privileges to enable room encryption by default. This does not affect existing rooms. (<a href="https://github.com/matrix-org/synapse/issues/7230">#7230</a>)</li>
<li>Add a config option for specifying the value of the Accept-Language HTTP header when generating URL previews. (<a href="https://github.com/matrix-org/synapse/issues/7265">#7265</a>)</li>
<li>Allow <code>/requestToken</code> endpoints to hide the existence (or lack thereof) of 3PID associations on the homeserver. (<a href="https://github.com/matrix-org/synapse/issues/7315">#7315</a>)</li>
<li>Add a configuration setting to tweak the threshold for dummy events. (<a href="https://github.com/matrix-org/synapse/issues/7422">#7422</a>)</li>
</ul>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Don't attempt to use an invalid sqlite config if no database configuration is provided. Contributed by @nekatak. (<a href="https://github.com/matrix-org/synapse/issues/6573">#6573</a>)</li>
<li>Fix single-sign on with CAS systems: pass the same service URL when requesting the CAS ticket and when calling the <code>proxyValidate</code> URL. Contributed by @Naugrimm. (<a href="https://github.com/matrix-org/synapse/issues/6634">#6634</a>)</li>
<li>Fix missing field <code>default</code> when fetching user-defined push rules. (<a href="https://github.com/matrix-org/synapse/issues/6639">#6639</a>)</li>
<li>Improve error responses when accessing remote public room lists. (<a href="https://github.com/matrix-org/synapse/issues/6899">#6899</a>, <a href="https://github.com/matrix-org/synapse/issues/7368">#7368</a>)</li>
<li>Transfer alias mappings on room upgrade. (<a href="https://github.com/matrix-org/synapse/issues/6946">#6946</a>)</li>
<li>Ensure that a user interactive authentication session is tied to a single request. (<a href="https://github.com/matrix-org/synapse/issues/7068">#7068</a>, <a href="https://github.com/matrix-org/synapse/issues/7455">#7455</a>)</li>
<li>Fix a bug in the federation API which could cause occasional &quot;Failed to get PDU&quot; errors. (<a href="https://github.com/matrix-org/synapse/issues/7089">#7089</a>)</li>
<li>Return the proper error (<code>M_BAD_ALIAS</code>) when a non-existent canonical alias is provided. (<a href="https://github.com/matrix-org/synapse/issues/7109">#7109</a>)</li>
<li>Fix a bug which meant that groups updates were not correctly replicated between workers. (<a href="https://github.com/matrix-org/synapse/issues/7117">#7117</a>)</li>
<li>Fix starting workers when federation sending not split out. (<a href="https://github.com/matrix-org/synapse/issues/7133">#7133</a>)</li>
<li>Ensure <code>is_verified</code> is a boolean in responses to <code>GET /_matrix/client/r0/room_keys/keys</code>. Also warn the user if they forgot the <code>version</code> query param. (<a href="https://github.com/matrix-org/synapse/issues/7150">#7150</a>)</li>
<li>Fix error page being shown when a custom SAML handler attempted to redirect when processing an auth response. (<a href="https://github.com/matrix-org/synapse/issues/7151">#7151</a>)</li>
<li>Avoid importing <code>sqlite3</code> when using the postgres backend. Contributed by David Vo. (<a href="https://github.com/matrix-org/synapse/issues/7155">#7155</a>)</li>
<li>Fix excessive CPU usage by <code>prune_old_outbound_device_pokes</code> job. (<a href="https://github.com/matrix-org/synapse/issues/7159">#7159</a>)</li>
<li>Fix a bug which could cause outbound federation traffic to stop working if a client uploaded an incorrect e2e device signature. (<a href="https://github.com/matrix-org/synapse/issues/7177">#7177</a>)</li>
<li>Fix a bug which could cause incorrect 'cyclic dependency' error. (<a href="https://github.com/matrix-org/synapse/issues/7178">#7178</a>)</li>
<li>Fix a bug that could cause a user to be invited to a server notices (aka System Alerts) room without any notice being sent. (<a href="https://github.com/matrix-org/synapse/issues/7199">#7199</a>)</li>
<li>Fix some worker-mode replication handling not being correctly recorded in CPU usage stats. (<a href="https://github.com/matrix-org/synapse/issues/7203">#7203</a>)</li>
<li>Do not allow a deactivated user to login via SSO. (<a href="https://github.com/matrix-org/synapse/issues/7240">#7240</a>, <a href="https://github.com/matrix-org/synapse/issues/7259">#7259</a>)</li>
<li>Fix --help command-line argument. (<a href="https://github.com/matrix-org/synapse/issues/7249">#7249</a>)</li>
<li>Fix room publish permissions not being checked on room creation. (<a href="https://github.com/matrix-org/synapse/issues/7260">#7260</a>)</li>
<li>Reject unknown session IDs during user interactive authentication instead of silently creating a new session. (<a href="https://github.com/matrix-org/synapse/issues/7268">#7268</a>)</li>
<li>Fix a SQL query introduced in Synapse 1.12.0 which could cause large amounts of logging to the postgres slow-query log. (<a href="https://github.com/matrix-org/synapse/issues/7274">#7274</a>)</li>
<li>Persist user interactive authentication sessions across workers and Synapse restarts. (<a href="https://github.com/matrix-org/synapse/issues/7302">#7302</a>)</li>
<li>Fixed backwards compatibility logic of the first value of <code>trusted_third_party_id_servers</code> being used for <code>account_threepid_delegates.email</code>, which occurs when the former, deprecated option is set and the latter is not. (<a href="https://github.com/matrix-org/synapse/issues/7316">#7316</a>)</li>
<li>Fix a bug where event updates might not be sent over replication to worker processes after the stream falls behind. (<a href="https://github.com/matrix-org/synapse/issues/7337">#7337</a>, <a href="https://github.com/matrix-org/synapse/issues/7358">#7358</a>)</li>
<li>Fix bad error handling that would cause Synapse to crash if it's provided with a YAML configuration file that's either empty or doesn't parse into a key-value map. (<a href="https://github.com/matrix-org/synapse/issues/7341">#7341</a>)</li>
<li>Fix incorrect metrics reporting for <code>renew_attestations</code> background task. (<a href="https://github.com/matrix-org/synapse/issues/7344">#7344</a>)</li>
<li>Prevent non-federating rooms from appearing in responses to federated <code>POST /publicRoom</code> requests when a filter was included. (<a href="https://github.com/matrix-org/synapse/issues/7367">#7367</a>)</li>
<li>Fix a bug which would cause the room directory to be incorrectly populated if Synapse was upgraded directly from v1.2.1 or earlier to v1.4.0 or later. Note that this fix does not apply retrospectively; see the <a href="UPGRADE.rst#upgrading-to-v1130">upgrade notes</a> for more information. (<a href="https://github.com/matrix-org/synapse/issues/7387">#7387</a>)</li>
<li>Fix bug in <code>EventContext.deserialize</code>. (<a href="https://github.com/matrix-org/synapse/issues/7393">#7393</a>)</li>
<li>Fix a long-standing bug which could cause messages not to be sent over federation, when state events with state keys matching user IDs (such as custom user statuses) were received. (<a href="https://github.com/matrix-org/synapse/issues/7376">#7376</a>)</li>
<li>Restore compatibility with non-compliant clients during the user interactive authentication process, fixing a problem introduced in v1.13.0rc1. (<a href="https://github.com/matrix-org/synapse/issues/7483">#7483</a>)</li>
<li>Hash passwords as early as possible during registration. (<a href="https://github.com/matrix-org/synapse/issues/7523">#7523</a>)</li>
</ul>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Update Debian installation instructions to recommend installing the <code>virtualenv</code> package instead of <code>python3-virtualenv</code>. (<a href="https://github.com/matrix-org/synapse/issues/6892">#6892</a>)</li>
<li>Improve the documentation for database configuration. (<a href="https://github.com/matrix-org/synapse/issues/6988">#6988</a>)</li>
<li>Improve the documentation of application service configuration files. (<a href="https://github.com/matrix-org/synapse/issues/7091">#7091</a>)</li>
<li>Update pre-built package name for FreeBSD. (<a href="https://github.com/matrix-org/synapse/issues/7107">#7107</a>)</li>
<li>Update postgres docs with login troubleshooting information. (<a href="https://github.com/matrix-org/synapse/issues/7119">#7119</a>)</li>
<li>Clean up INSTALL.md a bit. (<a href="https://github.com/matrix-org/synapse/issues/7141">#7141</a>)</li>
<li>Add documentation for running a local CAS server for testing. (<a href="https://github.com/matrix-org/synapse/issues/7147">#7147</a>)</li>
<li>Improve README.md by being explicit about public IP recommendation for TURN relaying. (<a href="https://github.com/matrix-org/synapse/issues/7167">#7167</a>)</li>
<li>Fix a small typo in the <code>metrics_flags</code> config option. (<a href="https://github.com/matrix-org/synapse/issues/7171">#7171</a>)</li>
<li>Update the contributed documentation on managing synapse workers with systemd, and bring it into the core distribution. (<a href="https://github.com/matrix-org/synapse/issues/7234">#7234</a>)</li>
<li>Add documentation to the <code>password_providers</code> config option. Add known password provider implementations to docs. (<a href="https://github.com/matrix-org/synapse/issues/7238">#7238</a>, <a href="https://github.com/matrix-org/synapse/issues/7248">#7248</a>)</li>
<li>Modify suggested nginx reverse proxy configuration to match Synapse's default file upload size. Contributed by @ProCycleDev. (<a href="https://github.com/matrix-org/synapse/issues/7251">#7251</a>)</li>
<li>Documentation of media_storage_providers options updated to avoid misunderstandings. Contributed by Tristan Lins. (<a href="https://github.com/matrix-org/synapse/issues/7272">#7272</a>)</li>
<li>Add documentation on monitoring workers with Prometheus. (<a href="https://github.com/matrix-org/synapse/issues/7357">#7357</a>)</li>
<li>Clarify endpoint usage in the users admin api documentation. (<a href="https://github.com/matrix-org/synapse/issues/7361">#7361</a>)</li>
</ul>
<h2 id="deprecations-and-removals">Deprecations and Removals</h2>
<ul>
<li>Remove nonfunctional <code>captcha_bypass_secret</code> option from <code>homeserver.yaml</code>. (<a href="https://github.com/matrix-org/synapse/issues/7137">#7137</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Add benchmarks for LruCache. (<a href="https://github.com/matrix-org/synapse/issues/6446">#6446</a>)</li>
<li>Return total number of users and profile attributes in admin users endpoint. Contributed by Awesome Technologies Innovationslabor GmbH. (<a href="https://github.com/matrix-org/synapse/issues/6881">#6881</a>)</li>
<li>Change device list streams to have one row per ID. (<a href="https://github.com/matrix-org/synapse/issues/7010">#7010</a>)</li>
<li>Remove concept of a non-limited stream. (<a href="https://github.com/matrix-org/synapse/issues/7011">#7011</a>)</li>
<li>Move catchup of replication streams logic to worker. (<a href="https://github.com/matrix-org/synapse/issues/7024">#7024</a>, <a href="https://github.com/matrix-org/synapse/issues/7195">#7195</a>, <a href="https://github.com/matrix-org/synapse/issues/7226">#7226</a>, <a href="https://github.com/matrix-org/synapse/issues/7239">#7239</a>, <a href="https://github.com/matrix-org/synapse/issues/7286">#7286</a>, <a href="https://github.com/matrix-org/synapse/issues/7290">#7290</a>, <a href="https://github.com/matrix-org/synapse/issues/7318">#7318</a>, <a href="https://github.com/matrix-org/synapse/issues/7326">#7326</a>, <a href="https://github.com/matrix-org/synapse/issues/7378">#7378</a>, <a href="https://github.com/matrix-org/synapse/issues/7421">#7421</a>)</li>
<li>Convert some of synapse.rest.media to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7110">#7110</a>, <a href="https://github.com/matrix-org/synapse/issues/7184">#7184</a>, <a href="https://github.com/matrix-org/synapse/issues/7241">#7241</a>)</li>
<li>De-duplicate / remove unused REST code for login and auth. (<a href="https://github.com/matrix-org/synapse/issues/7115">#7115</a>)</li>
<li>Convert <code>*StreamRow</code> classes to inner classes. (<a href="https://github.com/matrix-org/synapse/issues/7116">#7116</a>)</li>
<li>Clean up some LoggingContext code. (<a href="https://github.com/matrix-org/synapse/issues/7120">#7120</a>, <a href="https://github.com/matrix-org/synapse/issues/7181">#7181</a>, <a href="https://github.com/matrix-org/synapse/issues/7183">#7183</a>, <a href="https://github.com/matrix-org/synapse/issues/7408">#7408</a>, <a href="https://github.com/matrix-org/synapse/issues/7426">#7426</a>)</li>
<li>Add explicit <code>instance_id</code> for USER_SYNC commands and remove implicit <code>conn_id</code> usage. (<a href="https://github.com/matrix-org/synapse/issues/7128">#7128</a>)</li>
<li>Refactored the CAS authentication logic to a separate class. (<a href="https://github.com/matrix-org/synapse/issues/7136">#7136</a>)</li>
<li>Run replication streamers on workers. (<a href="https://github.com/matrix-org/synapse/issues/7146">#7146</a>)</li>
<li>Add tests for outbound device pokes. (<a href="https://github.com/matrix-org/synapse/issues/7157">#7157</a>)</li>
<li>Fix device list update stream ids going backward. (<a href="https://github.com/matrix-org/synapse/issues/7158">#7158</a>)</li>
<li>Use <code>stream.current_token()</code> and remove <code>stream_positions()</code>. (<a href="https://github.com/matrix-org/synapse/issues/7172">#7172</a>)</li>
<li>Move client command handling out of TCP protocol. (<a href="https://github.com/matrix-org/synapse/issues/7185">#7185</a>)</li>
<li>Move server command handling out of TCP protocol. (<a href="https://github.com/matrix-org/synapse/issues/7187">#7187</a>)</li>
<li>Fix consistency of HTTP status codes reported in log lines. (<a href="https://github.com/matrix-org/synapse/issues/7188">#7188</a>)</li>
<li>Only run one background database update at a time. (<a href="https://github.com/matrix-org/synapse/issues/7190">#7190</a>)</li>
<li>Remove sent outbound device list pokes from the database. (<a href="https://github.com/matrix-org/synapse/issues/7192">#7192</a>)</li>
<li>Add a background database update job to clear out duplicate <code>device_lists_outbound_pokes</code>. (<a href="https://github.com/matrix-org/synapse/issues/7193">#7193</a>)</li>
<li>Remove some extraneous debugging log lines. (<a href="https://github.com/matrix-org/synapse/issues/7207">#7207</a>)</li>
<li>Add explicit Python build tooling as dependencies for the snapcraft build. (<a href="https://github.com/matrix-org/synapse/issues/7213">#7213</a>)</li>
<li>Add typing information to federation server code. (<a href="https://github.com/matrix-org/synapse/issues/7219">#7219</a>)</li>
<li>Extend room admin api (<code>GET /_synapse/admin/v1/rooms</code>) with additional attributes. (<a href="https://github.com/matrix-org/synapse/issues/7225">#7225</a>)</li>
<li>Unblacklist '/upgrade creates a new room' sytest for workers. (<a href="https://github.com/matrix-org/synapse/issues/7228">#7228</a>)</li>
<li>Remove redundant checks on <code>daemonize</code> from synctl. (<a href="https://github.com/matrix-org/synapse/issues/7233">#7233</a>)</li>
<li>Upgrade jQuery to v3.4.1 on fallback login/registration pages. (<a href="https://github.com/matrix-org/synapse/issues/7236">#7236</a>)</li>
<li>Change log line that told user to implement onLogin/onRegister fallback js functions to a warning, instead of an info, so it's more visible. (<a href="https://github.com/matrix-org/synapse/issues/7237">#7237</a>)</li>
<li>Correct the parameters of a test fixture. Contributed by Isaiah Singletary. (<a href="https://github.com/matrix-org/synapse/issues/7243">#7243</a>)</li>
<li>Convert auth handler to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7261">#7261</a>)</li>
<li>Add some unit tests for replication. (<a href="https://github.com/matrix-org/synapse/issues/7278">#7278</a>)</li>
<li>Improve typing annotations in <code>synapse.replication.tcp.streams.Stream</code>. (<a href="https://github.com/matrix-org/synapse/issues/7291">#7291</a>)</li>
<li>Reduce log verbosity of url cache cleanup tasks. (<a href="https://github.com/matrix-org/synapse/issues/7295">#7295</a>)</li>
<li>Fix sample SAML Service Provider configuration. Contributed by @frcl. (<a href="https://github.com/matrix-org/synapse/issues/7300">#7300</a>)</li>
<li>Fix StreamChangeCache to work with multiple entities changing on the same stream id. (<a href="https://github.com/matrix-org/synapse/issues/7303">#7303</a>)</li>
<li>Fix an incorrect import in IdentityHandler. (<a href="https://github.com/matrix-org/synapse/issues/7319">#7319</a>)</li>
<li>Reduce logging verbosity for successful federation requests. (<a href="https://github.com/matrix-org/synapse/issues/7321">#7321</a>)</li>
<li>Convert some federation handler code to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7338">#7338</a>)</li>
<li>Fix collation for postgres for unit tests. (<a href="https://github.com/matrix-org/synapse/issues/7359">#7359</a>)</li>
<li>Convert RegistrationWorkerStore.is_server_admin and dependent code to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7363">#7363</a>)</li>
<li>Add an <code>instance_name</code> to <code>RDATA</code> and <code>POSITION</code> replication commands. (<a href="https://github.com/matrix-org/synapse/issues/7364">#7364</a>)</li>
<li>Thread through instance name to replication client. (<a href="https://github.com/matrix-org/synapse/issues/7369">#7369</a>)</li>
<li>Convert synapse.server_notices to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7394">#7394</a>)</li>
<li>Convert synapse.notifier to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7395">#7395</a>)</li>
<li>Fix issues with the Python package manifest. (<a href="https://github.com/matrix-org/synapse/issues/7404">#7404</a>)</li>
<li>Prevent methods in <code>synapse.handlers.auth</code> from polling the homeserver config every request. (<a href="https://github.com/matrix-org/synapse/issues/7420">#7420</a>)</li>
<li>Speed up fetching device lists changes when handling <code>/sync</code> requests. (<a href="https://github.com/matrix-org/synapse/issues/7423">#7423</a>)</li>
<li>Run group attestation renewal in series rather than parallel for performance. (<a href="https://github.com/matrix-org/synapse/issues/7442">#7442</a>)</li>
<li>Fix linting errors in new version of Flake8. (<a href="https://github.com/matrix-org/synapse/issues/7470">#7470</a>)</li>
<li>Update the version of dh-virtualenv we use to build debs, and add focal to the list of target distributions. (<a href="https://github.com/matrix-org/synapse/issues/7526">#7526</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;04&#x2F;23&#x2F;synapse-1-12-4-released&#x2F;" title="Synapse 1.12.4 released">Synapse 1.12.4 released</a></h2>
                <span>
                    23.04.2020 19:04
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>A small patch release containing features and bugs to support the upcoming launch of cross signing. We are very close now :)</p>
<p>Get 1.12.4 from <a href="https://github.com/matrix-org/synapse/releases/tag/v1.12.4">github</a> or any of the sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md.</p>
<p>Changelog since v1.12.3</p>
<h1 id="synapse-1-12-4-2020-04-23">Synapse 1.12.4 (2020-04-23)</h1>
<p>No significant changes.</p>
<h1 id="synapse-1-12-4rc1-2020-04-22">Synapse 1.12.4rc1 (2020-04-22)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Always send users their own device updates. (<a href="https://github.com/matrix-org/synapse/issues/7160">#7160</a>)</li>
<li>Add support for handling GET requests for <code>account_data</code> on a worker. (<a href="https://github.com/matrix-org/synapse/issues/7311">#7311</a>)</li>
</ul>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix a bug that prevented cross-signing with users on worker-mode synapses. (<a href="https://github.com/matrix-org/synapse/issues/7255">#7255</a>)</li>
<li>Do not treat display names as globs in push rules. (<a href="https://github.com/matrix-org/synapse/issues/7271">#7271</a>)</li>
<li>Fix a bug with cross-signing devices belonging to remote users who did not share a room with any user on the local homeserver. (<a href="https://github.com/matrix-org/synapse/issues/7289">#7289</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;04&#x2F;02&#x2F;synapse-1-12-2-released&#x2F;" title="Synapse 1.12.2 released">Synapse 1.12.2 released</a></h2>
                <span>
                    02.04.2020 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>A small patch release to fix regressions introduced in v1.11.0 and v1.12.0.</p>
<p>Update 1.12.3 is a fast follow release from 1.12.2</p>
<p>Get 1.12.3 (not 1.12.2) from <a href="https://github.com/matrix-org/synapse/releases/tag/v1.12.3">github</a> or any of the sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md.</p>
<p>Changelog since v1.12.0</p>
<h1 id="synapse-1-12-3-2020-04-03">Synapse 1.12.3 (2020-04-03)</h1>
<ul>
<li>Remove the the pin to Pillow 7.0 which was introduced in Synapse 1.12.2, and
correctly fix the issue with building the Debian packages. (<a href="https://github.com/matrix-org/synapse/issues/7212">#7212</a>)</li>
</ul>
<h1 id="synapse-1-12-2-2020-04-02">Synapse 1.12.2 (2020-04-02)</h1>
<p>This release fixes <a href="https://github.com/matrix-org/synapse/issues/7208">an issue</a> with building the debian packages.</p>
<h1 id="synapse-1-12-1-2020-04-02">Synapse 1.12.1 (2020-04-02)</h1>
<p>No significant changes since 1.12.1rc1.</p>
<h1 id="synapse-1-12-1rc1-2020-03-31">Synapse 1.12.1rc1 (2020-03-31)</h1>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix starting workers when federation sending not split out. (<a href="https://github.com/matrix-org/synapse/issues/7133">#7133</a>). Introduced in v1.12.0.</li>
<li>Avoid importing <code>sqlite3</code> when using the postgres backend. Contributed by David Vo. (<a href="https://github.com/matrix-org/synapse/issues/7155">#7155</a>). Introduced in v1.12.0rc1.</li>
<li>Fix a bug which could cause outbound federation traffic to stop working if a client uploaded an incorrect e2e device signature. (<a href="https://github.com/matrix-org/synapse/issues/7177">#7177</a>). Introduced in v1.11.0.</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;03&#x2F;23&#x2F;synapse-1-12-0-released&#x2F;" title="Synapse 1.12.0 released">Synapse 1.12.0 released</a></h2>
                <span>
                    23.03.2020 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Synapse 1.12.0 is here.</p>
<p>The most important reason to upgrade to 1.12.0 is that it contains performance improvements to boost the efficiency of state resolution in room versions greater than v1 (<a href="https://github.com/matrix-org/synapse/issues/7095">#7095</a>).</p>
<p>It also contains an implementation of (<a href="https://github.com/matrix-org/matrix-doc/pull/2432">MSC2432</a>) designed to limit room alias abuse. The MSC contains the full details, but in short admins now have more control over aliases as they appear on their local server.</p>
<p>There is also plenty of ground work for our master process sharding project. Nothing that can be used today unfortunately, but expect big improvements for worker based deployments over the coming weeks.</p>
<p>Please pay special attention to the security advisory in the changelog, TL;DR make sure your installation is using Twisted 20.3.0.</p>
<p>Also, note that once Synapse 1.13.0 is released, the default branch will change to being <code>develop</code> rather than <code>master</code>. Again more details follow in the changelog.</p>
<p>Get the new release from <a href="https://github.com/matrix-org/synapse/releases/tag/v1.12.0">github</a> or any of the sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md.</p>
<p>Changelog since Synapse 1.11.1</p>
<h1 id="synapse-1-12-0-2020-03-23">Synapse 1.12.0 (2020-03-23)</h1>
<p>No significant changes since 1.12.0rc1.</p>
<p>Debian packages and Docker images are rebuilt using the latest versions of
dependency libraries, including Twisted 20.3.0. <strong>Please see security advisory
below</strong>.</p>
<h2 id="security-advisory">Security advisory</h2>
<p>Synapse may be vulnerable to request-smuggling attacks when it is used with a
reverse-proxy. The vulnerabilities are fixed in Twisted 20.3.0, and are
described in
<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-10108">CVE-2020-10108</a>
and
<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-10109">CVE-2020-10109</a>.
For a good introduction to this class of request-smuggling attacks, see
https://portswigger.net/research/http-desync-attacks-request-smuggling-reborn.</p>
<p>We are not aware of these vulnerabilities being exploited in the wild, and
do not believe that they are exploitable with current versions of any reverse
proxies. Nevertheless, we recommend that all Synapse administrators ensure that
they have the latest versions of the Twisted library to ensure that their
installation remains secure.</p>
<ul>
<li>Administrators using the <a href="https://hub.docker.com/r/matrixdotorg/synapse/"><code>matrix.org</code> Docker
image</a> or the <a href="https://github.com/matrix-org/synapse/blob/master/INSTALL.md#matrixorg-packages">Debian/Ubuntu
packages from
<code>matrix.org</code></a>
should ensure that they have version 1.12.0 installed: these images include
Twisted 20.3.0.</li>
<li>Administrators who have <a href="https://github.com/matrix-org/synapse/blob/master/INSTALL.md#installing-from-source">installed Synapse from
source</a>
should upgrade Twisted within their virtualenv by running:<pre data-lang="sh" style="background-color:#1e1e1e;color:#dcdcdc;" class="language-sh "><code class="language-sh" data-lang="sh"><span>&lt;path_to_virtualenv&gt;/bin/pip install </span><span style="color:#d69d85;">&#39;Twisted&gt;=20.3.0&#39;
</span></code></pre>
</li>
<li>Administrators who have installed Synapse from distribution packages should
consult the information from their distributions.</li>
</ul>
<p>The <code>matrix.org</code> Synapse instance was not vulnerable to these vulnerabilities.</p>
<h2 id="advance-notice-of-change-to-the-default-git-branch-for-synapse">Advance notice of change to the default <code>git</code> branch for Synapse</h2>
<p>Currently, the default <code>git</code> branch for Synapse is <code>master</code>, which tracks the
latest release.</p>
<p>After the release of Synapse 1.13.0, we intend to change this default to
<code>develop</code>, which is the development tip. This is more consistent with common
practice and modern <code>git</code> usage.</p>
<p>Although we try to keep <code>develop</code> in a stable state, there may be occasions
where regressions creep in. Developers and distributors who have scripts which
run builds using the default branch of <code>Synapse</code> should therefore consider
pinning their scripts to <code>master</code>.</p>
<h1 id="synapse-1-12-0rc1-2020-03-19">Synapse 1.12.0rc1 (2020-03-19)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Changes related to room alias management (<a href="https://github.com/matrix-org/matrix-doc/pull/2432">MSC2432</a>):
<ul>
<li>Publishing/removing a room from the room directory now requires the user to have a power level capable of modifying the canonical alias, instead of the room aliases. (<a href="https://github.com/matrix-org/synapse/issues/6965">#6965</a>)</li>
<li>Validate the <code>alt_aliases</code> property of canonical alias events. (<a href="https://github.com/matrix-org/synapse/issues/6971">#6971</a>)</li>
<li>Users with a power level sufficient to modify the canonical alias of a room can now delete room aliases. (<a href="https://github.com/matrix-org/synapse/issues/6986">#6986</a>)</li>
<li>Implement updated authorization rules and redaction rules for aliases events, from <a href="https://github.com/matrix-org/matrix-doc/pull/2261">MSC2261</a> and <a href="https://github.com/matrix-org/matrix-doc/pull/2432">MSC2432</a>. (<a href="https://github.com/matrix-org/synapse/issues/7037">#7037</a>)</li>
<li>Stop sending m.room.aliases events during room creation and upgrade. (<a href="https://github.com/matrix-org/synapse/issues/6941">#6941</a>)</li>
<li>Synapse no longer uses room alias events to calculate room names for push notifications. (<a href="https://github.com/matrix-org/synapse/issues/6966">#6966</a>)</li>
<li>The room list endpoint no longer returns a list of aliases. (<a href="https://github.com/matrix-org/synapse/issues/6970">#6970</a>)</li>
<li>Remove special handling of aliases events from <a href="https://github.com/matrix-org/matrix-doc/pull/2260">MSC2260</a> added in v1.10.0rc1. (<a href="https://github.com/matrix-org/synapse/issues/7034">#7034</a>)</li>
</ul>
</li>
<li>Expose the <code>synctl</code>, <code>hash_password</code> and <code>generate_config</code> commands in the snapcraft package. Contributed by @devec0. (<a href="https://github.com/matrix-org/synapse/issues/6315">#6315</a>)</li>
<li>Check that server_name is correctly set before running database updates. (<a href="https://github.com/matrix-org/synapse/issues/6982">#6982</a>)</li>
<li>Break down monthly active users by <code>appservice_id</code> and emit via Prometheus. (<a href="https://github.com/matrix-org/synapse/issues/7030">#7030</a>)</li>
<li>Render a configurable and comprehensible error page if something goes wrong during the SAML2 authentication process. (<a href="https://github.com/matrix-org/synapse/issues/7058">#7058</a>, <a href="https://github.com/matrix-org/synapse/issues/7067">#7067</a>)</li>
<li>Add an optional parameter to control whether other sessions are logged out when a user's password is modified. (<a href="https://github.com/matrix-org/synapse/issues/7085">#7085</a>)</li>
<li>Add prometheus metrics for the number of active pushers. (<a href="https://github.com/matrix-org/synapse/issues/7103">#7103</a>, <a href="https://github.com/matrix-org/synapse/issues/7106">#7106</a>)</li>
<li>Improve performance when making HTTPS requests to sygnal, sydent, etc, by sharing the SSL context object between connections. (<a href="https://github.com/matrix-org/synapse/issues/7094">#7094</a>)</li>
</ul>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>When a user's profile is updated via the admin API, also generate a displayname/avatar update for that user in each room. (<a href="https://github.com/matrix-org/synapse/issues/6572">#6572</a>)</li>
<li>Fix a couple of bugs in email configuration handling. (<a href="https://github.com/matrix-org/synapse/issues/6962">#6962</a>)</li>
<li>Fix an issue affecting worker-based deployments where replication would stop working, necessitating a full restart, after joining a large room. (<a href="https://github.com/matrix-org/synapse/issues/6967">#6967</a>)</li>
<li>Fix <code>duplicate key</code> error which was logged when rejoining a room over federation. (<a href="https://github.com/matrix-org/synapse/issues/6968">#6968</a>)</li>
<li>Prevent user from setting 'deactivated' to anything other than a bool on the v2 PUT /users Admin API. (<a href="https://github.com/matrix-org/synapse/issues/6990">#6990</a>)</li>
<li>Fix py35-old CI by using native tox package. (<a href="https://github.com/matrix-org/synapse/issues/7018">#7018</a>)</li>
<li>Fix a bug causing <code>org.matrix.dummy_event</code> to be included in responses from <code>/sync</code>. (<a href="https://github.com/matrix-org/synapse/issues/7035">#7035</a>)</li>
<li>Fix a bug that renders UTF-8 text files incorrectly when loaded from media. Contributed by @TheStranjer. (<a href="https://github.com/matrix-org/synapse/issues/7044">#7044</a>)</li>
<li>Fix a bug that would cause Synapse to respond with an error about event visibility if a client tried to request the state of a room at a given token. (<a href="https://github.com/matrix-org/synapse/issues/7066">#7066</a>)</li>
<li>Repair a data-corruption issue which was introduced in Synapse 1.10, and fixed in Synapse 1.11, and which could cause <code>/sync</code> to return with 404 errors about missing events and unknown rooms. (<a href="https://github.com/matrix-org/synapse/issues/7070">#7070</a>)</li>
<li>Fix a bug causing account validity renewal emails to be sent even if the feature is turned off in some cases. (<a href="https://github.com/matrix-org/synapse/issues/7074">#7074</a>)</li>
</ul>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Updated CentOS8 install instructions. Contributed by Richard Kellner. (<a href="https://github.com/matrix-org/synapse/issues/6925">#6925</a>)</li>
<li>Fix <code>POSTGRES_INITDB_ARGS</code> in the <code>contrib/docker/docker-compose.yml</code> example docker-compose configuration. (<a href="https://github.com/matrix-org/synapse/issues/6984">#6984</a>)</li>
<li>Change date in <a href="./INSTALL.md#tls-certificates">https://github.com/matrix-org/synapse/blob/master/INSTALL.md</a> for last date of getting TLS certificates to November 2019. (<a href="https://github.com/matrix-org/synapse/issues/7015">#7015</a>)</li>
<li>Document that the fallback auth endpoints must be routed to the same worker node as the register endpoints. (<a href="https://github.com/matrix-org/synapse/issues/7048">#7048</a>)</li>
</ul>
<h2 id="deprecations-and-removals">Deprecations and Removals</h2>
<ul>
<li>Remove the unused query_auth federation endpoint per <a href="https://github.com/matrix-org/matrix-doc/pull/2451">MSC2451</a>. (<a href="https://github.com/matrix-org/synapse/issues/7026">#7026</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Add type hints to <code>logging/context.py</code>. (<a href="https://github.com/matrix-org/synapse/issues/6309">#6309</a>)</li>
<li>Add some clarifications to <code>README.md</code> in the database schema directory. (<a href="https://github.com/matrix-org/synapse/issues/6615">#6615</a>)</li>
<li>Refactoring work in preparation for changing the event redaction algorithm. (<a href="https://github.com/matrix-org/synapse/issues/6874">#6874</a>, <a href="https://github.com/matrix-org/synapse/issues/6875">#6875</a>, <a href="https://github.com/matrix-org/synapse/issues/6983">#6983</a>, <a href="https://github.com/matrix-org/synapse/issues/7003">#7003</a>)</li>
<li>Improve performance of v2 state resolution for large rooms. (<a href="https://github.com/matrix-org/synapse/issues/6952">#6952</a>, <a href="https://github.com/matrix-org/synapse/issues/7095">#7095</a>)</li>
<li>Reduce time spent doing GC, by freezing objects on startup. (<a href="https://github.com/matrix-org/synapse/issues/6953">#6953</a>)</li>
<li>Minor performance fixes to <code>get_auth_chain_ids</code>. (<a href="https://github.com/matrix-org/synapse/issues/6954">#6954</a>)</li>
<li>Don't record remote cross-signing keys in the <code>devices</code> table. (<a href="https://github.com/matrix-org/synapse/issues/6956">#6956</a>)</li>
<li>Use flake8-comprehensions to enforce good hygiene of list/set/dict comprehensions. (<a href="https://github.com/matrix-org/synapse/issues/6957">#6957</a>)</li>
<li>Merge worker apps together. (<a href="https://github.com/matrix-org/synapse/issues/6964">#6964</a>, <a href="https://github.com/matrix-org/synapse/issues/7002">#7002</a>, <a href="https://github.com/matrix-org/synapse/issues/7055">#7055</a>, <a href="https://github.com/matrix-org/synapse/issues/7104">#7104</a>)</li>
<li>Remove redundant <code>store_room</code> call from <code>FederationHandler._process_received_pdu</code>. (<a href="https://github.com/matrix-org/synapse/issues/6979">#6979</a>)</li>
<li>Update warning for incorrect database collation/ctype to include link to documentation. (<a href="https://github.com/matrix-org/synapse/issues/6985">#6985</a>)</li>
<li>Add some type annotations to the database storage classes. (<a href="https://github.com/matrix-org/synapse/issues/6987">#6987</a>)</li>
<li>Port <code>synapse.handlers.presence</code> to async/await. (<a href="https://github.com/matrix-org/synapse/issues/6991">#6991</a>, <a href="https://github.com/matrix-org/synapse/issues/7019">#7019</a>)</li>
<li>Add some type annotations to the federation base &amp; client classes. (<a href="https://github.com/matrix-org/synapse/issues/6995">#6995</a>)</li>
<li>Port <code>synapse.rest.keys</code> to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7020">#7020</a>)</li>
<li>Add a type check to <code>is_verified</code> when processing room keys. (<a href="https://github.com/matrix-org/synapse/issues/7045">#7045</a>)</li>
<li>Add type annotations and comments to the auth handler. (<a href="https://github.com/matrix-org/synapse/issues/7063">#7063</a>)</li>
</ul>

                
            </div>
        </article>
        
        <nav class="pagination">
    <div class="prev">
        
        <a href="&#x2F;category&#x2F;releases&#x2F;page&#x2F;8&#x2F;">‹ Previous</a>
        
    </div>
    <span class="page-number">9 / 14</span>
    <div class="prev">
        
        <a href="&#x2F;category&#x2F;releases&#x2F;page&#x2F;10&#x2F;">Next ›</a>
        
    </div>
</nav>

    </div>
</div>

    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;security-hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="&#x2F;code"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p>© 2022 The Matrix.org Foundation C.I.C.</p>
</footer>

</body>

</html>
