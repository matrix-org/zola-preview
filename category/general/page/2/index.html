<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - General</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/png" href="/assets/favicon.png" />
    <link rel="stylesheet" href="/style.css" />

    
<link rel="alternate" type="application/rss+xml" title="RSS" href="/category/general/atom.xml">
</head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo-white.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            ">
            Blog
        </a>
        
        
        
        <a href="&#x2F;docs&#x2F;" class="
            ">
            Documentation
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <input id="ecosystem-submenu-checkbox" type="checkbox" class="submenu-checkbox" aria-hidden="true" >
            <label for="ecosystem-submenu-checkbox" class="submenu-title">Ecosystem <div class="arrow"></div></label>

            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bots&#x2F;">Bots</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        
<div id="taxonomy-single">
    <div class="content">
        <header>
            <h1>General</h1>
            131 posts tagged with "General" <a href="/category">(See all Category)</a>
            
            <h2>
                <small><a href="/category/general/atom.xml">Atom Feed</a></small>
            </h2>
            
        </header>

        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2021&#x2F;12&#x2F;22&#x2F;the-mega-matrix-holiday-special-2021&#x2F;" title="The Mega Matrix Holiday Special 2021">The Mega Matrix Holiday Special 2021</a></h2>
                <span>
                    22.12.2021 23:27
                    ‚Äî
                    <a href="/category/general">
                        General
                    </a>
                    ‚Äî
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                <br>
                <small>Last update: 22.12.2021 17:54</small>
            </header>
            <div>
                
                <p>Hi all,</p>
<p>If you‚Äôre reading this - congratulations; you made it through another year :)  Every winter we sit down and review Matrix‚Äôs progress over the last twelve months, and look forward to the next - for it‚Äôs all too easy to get lost in the day-to-day development and fail to realise how much the overall project is evolving, especially when it‚Äôs one as large and ambitious as Matrix!</p>
<p>Looking back at 2021, it‚Äôs unbelievable how much stuff has been going on in the core team (as you can tell by the length of this post - sorry!).  There‚Äôs been a really interesting mix of activity too - between massive improvements to the core functionality and baseline features that Matrix provides, and also major breakthroughs on next generation work.  But first, let‚Äôs check out what‚Äôs been happening in the wider ecosystem‚Ä¶</p>
<h2 id="the-matrix-ecosystem">The Matrix Ecosystem</h2>
<p>Over 2021 the Matrix ecosystem has expanded unrecognisably.  This time last year we were aware of 2 governments who were seriously adopting Matrix at scale (France and Germany), with the UK and US starting to roll out initial deployments.  12 months later, and we are now aware of <strong>12</strong> governments who are adopting Matrix in various capacities - and we hope to be able to talk about at least some of them in public in 2022!  The UK and US have both progressed significantly too.</p>
<p>Meanwhile, one of the most exciting new public sector stories this year has been <a href="https://www.gematik.de/anwendungen/ti-messenger">gematik</a>: Germany‚Äôs national healthcare agency, who <a href="https://matrix.org/blog/2021/07/21/germanys-national-healthcare-system-adopts-matrix">announced Matrix</a> as the basis for interoperable secure messaging throughout the whole healthcare sector.  This is a genuine step change for Matrix: rather than a government putting out tenders for ‚Äúa secure messaging solution‚Äù, instead we are seeing tenders for Matrix solution providers.  The Matrix industry is real; it exists today, and we‚Äôre seeing more and more new providers such as <a href="https://famedly.com/">Famedly</a> (building on the <a href="https://gitlab.com/famedly/company/frontend">Flutter/Dart stack</a> which powers <a href="https://fluffychat.im">FluffyChat</a>) and <a href="https://folivo.net/portfolio/timmy-messenger/">Folivonet</a> (building on the <a href="https://gitlab.com/benkuly/trixnity">Trixnity</a> Kotlin Multiplatform stack) stepping up to get involved - as well as many more big incumbents.  We created Matrix in order to bootstrap a new decentralised communication industry, and frankly it‚Äôs amazing to see it actually taking shape.</p>
<p>Another big step change has been the number of existing chat providers looking to become part of the wider Matrix network. Back in September our friends at <a href="https://www.youtube.com/watch?v=jBtBiUXLqAk&amp;t=1691s">Rocket.Chat announced that they‚Äôre working on Matrix support</a> for federation, perhaps inspired by our case study in making <a href="https://matrix.org/blog/2020/12/07/gitter-now-speaks-matrix">Gitter speak Matrix</a> - and meanwhile Matrix comes up a lot in the context of Twitter‚Äôs Bluesky initiative, and a few big players we can‚Äôt yet mention have also been in touch wanting to natively talk Matrix too.</p>
<p>We‚Äôve also seen a huge shift in big enterprises adopting Matrix for self-sovereign secure communication (although we can‚Äôt drop any names yet üòî). This may have been spurred on by such misadventures as Electronic Arts being compromised via a <a href="https://www.vice.com/en/article/7kvkqb/how-ea-games-was-hacked-slack">leaked Slack access token</a>, but it feels like many of the biggest organisations now realise that unquestioningly handing their data to Slack or Teams is a bad idea, when they could have an end-to-end encrypted deployment of their own instead.</p>
<p>There has also been a turning point in legislation in favour of Matrix - with the EU Digital Markets Act <a href="https://twitter.com/matrixdotorg/status/1471191916838633481">pushing hard for interoperability</a> for ‚Äòbig tech‚Äô communication services in the EU (see <a href="https://interoperability.news/2021/12/eu-parliament-upgrades-dma-to-open-gatekeepers-gates/">Amandine‚Äôs take</a> here), and meanwhile Eric Migicovsky, CEO at <a href="https://www.beeper.com/">Beeper</a> has been busy <a href="https://www.c-span.org/video/?c4992173/user-clip-eric-migicovsky-testimony">testifying to US Congress</a> on the merits of interoperability too. It‚Äôs not inconceivable that we will soon live in a world where governments mandate that the walled gardens will finally have to open up, and we may see a whole new level of interest in communication providers wanting to join Matrix!</p>
<p>Communities themselves have also been embracing Matrix more and more over the last year: we were incredibly proud to host <a href="https://matrix.org/blog/2021/02/15/how-we-hosted-fosdem-2021-on-matrix">FOSDEM 2021</a>, the world‚Äôs biggest open source conference via Matrix (all 35K attendees!) - and we‚Äôre gearing up to do it again in February for <a href="https://twitter.com/fosdem/status/1451475324684980241">FOSDEM 2022</a> (this time with our <a href="https://matrix.org/blog/2021/12/02/call-for-participation-for-the-fosdem-2022-matrix-dev-room">very first FOSDEM Matrix dev room</a>!). We were also really glad that <a href="https://libera.chat/">Libera.chat</a> let us point a dedicated homeserver and IRC bridge at their new IRC network (meaning you can join anywhere on Libera from Matrix as #channel:libera.chat, and talk to anyone as @nick:libera.chat). High profile open source projects have been adopting Matrix all over the place - <a href="https://wiki.debian.org/Teams/DebianSocial/Matrix">Debian</a>, <a href="https://fedoramagazine.org/multiple-matrix-sessions-with-element-on-fedora-linux/">Fedora</a>, <a href="https://nixos.wiki/wiki/Matrix">NixOS</a>, <a href="https://wiki.archlinux.org/title/Matrix">Arch</a>, <a href="https://blog.torproject.org/entering-the-matrix/">Tor</a>, <a href="https://ansible.github.io/community/posts/matrix_and_ansible.html">Ansible</a>, <a href="https://whatwg.org/chat">WHATWG</a> and many others (check out <a href="https://www.ubuntubuzz.com/2021/10/matrix-chat-adoption-by-community-in.html">this list</a>!) now have their own Matrix servers and spaces.  (You know things are busy when we haven‚Äôt had time to do a big blog post to announce folk as important as these joining the network!)</p>
<p>Finally, there has been an explosion of new projects and milestones in the wider community - <a href="https://conduit.rs">Conduit</a> entered <a href="https://conduit.rs/release-0-2-0/">beta</a> as a super exciting lightweight Rust homeserver implementation; <a href="https://fluffychat.im">FluffyChat</a> hit 1.0 with an impressively polished Flutter-based experience; <a href="https://beeper.com">Beeper</a> pre-launched to huge amounts of mainstream excitement; <a href="https://cinny.in/">Cinny</a> exploded out of the blue as an incredibly elegant next-generation web client; <a href="https://keanu.im/">Keanu</a> materialised from <a href="https://guardianproject.info/">The Guardian Project</a> as their glossy Matrix client suite; <a href="https://commune.chat/">Commune</a> appeared as a hybrid messageboard/chatroom interface; <a href="https://github.com/Nheko-Reborn/nheko/">Nheko</a> has matured significantly with huge E2EE improvements and feature and VoIP polish; <a href="https://apps.kde.org/en-gb/neochat/">NeoChat</a> and <a href="https://github.com/quotient-im/libQuotient">libQuotient</a> development is progressing solidly; <a href="https://gitlab.gnome.org/GNOME/fractal">Fractal</a> is busy with the <a href="https://gitlab.gnome.org/GNOME/fractal/-/tree/fractal-next">fractal-next</a> rewrite to move everything over to matrix-rust-sdk and GTK 4;  <a href="https://syphon.org/">Syphon</a> continues to forge ahead as a privacy-focused Flutter-based client, and non-chat clients like <a href="https://github.com/toger5/TheBoard">The Board</a>, <a href="https://github.com/opentower/populus-viewer">Populus</a> and <a href="https://github.com/DanilaFe/matrix-highlight">Matrix Highlight</a> have started to appear in earnest too!  We also had a super successful <a href="https://matrix.org/blog/2021/05/20/google-summer-of-code-2021">Google Summer of Code</a> this year, with a record number of 7 students participating in both core team and community projects.</p>
<p>Please note this is just a random sample of all the community news over the last year - to get more colour on what‚Äôs been going on, we highly recommend flipping through the <a href="https://matrix.org/blog/category/this-week-in-matrix">This Week In Matrix archives</a>!</p>
<h2 id="the-matrix-spec">The Matrix Spec</h2>
<p>The Matrix spec is the single source of truth of what Matrix actually is, and this year it got some major improvements thanks to a beautiful new website at <a href="https://spec.matrix.org">https://spec.matrix.org</a> thanks to Will Bamberg, formerly of <a href="https://developer.mozilla.org/">MDN</a> (and who‚Äôs now back fighting the good fight with the MDN team at <a href="https://opencollective.com/open-web-docs/updates/will-bamberg-joins-open-web-docs-staff">OWD</a>).</p>
<p>Aside from the new spec site, we also released our first official point release in a while - <a href="https://matrix.org/blog/2021/11/09/matrix-v-1-1-release">Matrix 1.1</a>, and we‚Äôre going to aim to keep regular releases happening once a quarter from here on in.  It‚Äôs also worth noting that it‚Äôs very much a feature and not a bug that spec releases lag behind the various <a href="https://matrix.org/docs/spec/proposals">spec proposals</a> which fly around as the core team and community experiment with new features like spaces, threads, etc.  We very deliberately only merge change proposals to the spec which have been proven to work in real life implementations, and which have fully passed the spec review process (along with any dependencies they might have!).</p>
<p>Talking of which, in 2021 we saw a record <strong>109</strong> Matrix Spec Change proposals (MSCs) created. Even better, we closed <strong>62</strong> MSCs - so while the backlog is still growing, we‚Äôre still making very concrete progress.  Of the 109 new MSCs: 34 were from the wider Matrix community, 34 were from ex-community contributors who are now part of the core team, 13 were from the founding Matrix team, and 28 were from folks hired to work on Matrix by Element on behalf of the Matrix.org Foundation.  This feels like a pretty healthy blend of contributions, and while it‚Äôs true that spec work could always progress faster, things do seem to be heading in the right direction.</p>
<p><img src="/blog/img/2021-12-22-spec.png" alt="The latest MSC stats" /></p>
<p>In the new year, the Spec Core Team (responsible for reviewing MSCs and voting on what gets merged to the spec) is going to make a concerted effort to carve out more dedicated time for spec work - thankfully one of the side-effects of Matrix growing is that there are now a lot more people around with whom we can share other work, hopefully meaning that we can put significantly more hours into keeping the spec growing healthily.</p>
<h2 id="synapse">Synapse</h2>
<p>Synapse is the primary homeserver implementation published by the Matrix core team, and its maturity is unrecognisable from where we were a year ago.  One of the big breakthroughs has been stabilising memory usage through caching improvements - the Matrix.org synapse now reliably only uses 2-3GB of RAM on its main process, despite its activity having more than doubled over the last year (up from 513K monthly active users to 1.11M!).</p>
<p><img src="/blog/img/2021-12-22-perf.jpg" alt="Synapse memory performance fixes" /></p>
<p>Further signs of maturity include Synapse‚Äôs radically improved new <a href="https://matrix-org.github.io/synapse/latest/">documentation</a> and the new <a href="https://matrix-org.github.io/synapse/latest/modules/index.html">module API</a>, the fact that mypy type-safety coverage has improved from ~75% to over 89.7% (across 151,903 lines of code!), and the fact that Open Tracing support has matured to the point that visualising complex cross-worker behaviour is nowadays a genuine pleasure.  Frankly, Synapse should be feeling robust and stable these days - if you see folks claiming otherwise, please check they‚Äôre not basing that on outdated info (or failing that, get them to file bug reports that we can jump on!).</p>
<p>Meanwhile, on the feature side, we‚Äôve landed a huge spate of long-awaited core functionality.  Probably the best way to track it is by the Matrix Spec Change proposals (MSCs) which have been implemented (although I dare you to also go and check out Synapse‚Äôs <a href="https://github.com/matrix-org/synapse/blob/develop/CHANGES.md">changelog</a>, all 675KB of it, which is frankly a thing of beauty and will take you down a rabbithole all the way back to v0.0.0 in Aug 2014 if you so desire ;P). Major MSCs which we‚Äôve landed include:</p>
<ul>
<li>Spaces! It‚Äôs hard to overstate how positive this has been for Matrix‚Äôs usability: at last, we can group our rooms together however we please, both for our own edification and to share with others - and we can view space hierarchies over federation, complete with pagination (<a href="https://github.com/matrix-org/matrix-doc/pull/2946">MSC2946</a>) as well as specify who can join a room based on whether they‚Äôre a member of a given space/room (<a href="https://github.com/matrix-org/matrix-doc/pull/3083">MSC3083</a>).</li>
<li>Threads! Yes, that‚Äôs right - coming any day now to a Matrix client close to you, we have ‚Äòclassic‚Äô threaded messaging landing, providing sidebars of conversation through the new m.thread relation type (<a href="https://github.com/matrix-org/matrix-doc/pull/3440">MSC3440</a>), building on Matrix‚Äôs existing aggregation API as used for edits and reactions.  We‚Äôve chosen to prioritise single-level-deep-threads rather than arbitrarily-deep-trees (<a href="https://github.com/matrix-org/matrix-doc/pull/2836">MSC2836</a>) as it maps more easily to a chat UX, although the two approaches are not mutually exclusive.</li>
<li>Aggregations! Everyone‚Äôs favourite b√™te noire in Matrix tends to be that aggregations for edits &amp; reactions predate today‚Äôs Matrix Spec Change process and went mainstream without using a vendor prefix before their spec had been stabilised.  Better late than never, we‚Äôve taken advantage of Threads to go back and fix what once went wrong - and now <a href="https://github.com/matrix-org/matrix-doc/pull/2674">MSC2674</a> and <a href="https://github.com/matrix-org/matrix-doc/pull/2675">MSC2675</a> and friends are hopefully on a much better track to provide a basis for how aggregations work - both in the spec and in the reference implementation in Synapse.</li>
</ul>
<p><img src="/blog/img/2021-12-22-aggs.png" alt="Anatomy of a b√™te noire" /></p>
<ul>
<li>Social Login via multiple SSO providers (<a href="https://github.com/matrix-org/matrix-doc/pull/2858">MSC2858</a>) - almost 50% of new registrations on the Matrix.org homeserver now use social login!  Interestingly the split of SSO usage is roughly 70% Google, 12% GitHub, 11% Apple, 6% Facebook and 1% GitLab. Make of that what you will!</li>
<li>Knocking (<a href="https://github.com/matrix-org/matrix-doc/pull/2403">MSC2403</a>)! Huge thanks to Sorunome and Anoa, we now support the ability to knock to ask to join a room if not yet invited. If this sounds unfamiliar, it may be because it hasn‚Äôt landed in Element yet, but expect it to land next year.</li>
<li>Refresh tokens (<a href="https://github.com/matrix-org/matrix-doc/pull/2918">MSC2918</a>)! At last, we have a standard way for clients to refresh their access tokens, so that if your access token leaks it will not give access to your account indefinitely.  (This also has yet to land in Element, but has been proved on a branch on Hydrogen).</li>
</ul>
<p>Finally, last but not least, Eric from Gitter has been fearlessly hacking his way through some of Matrix‚Äôs gnarliest problems in his quest to bring Matrix+Element up to full feature parity with Gitter. In practice, this means adding the ability to incrementally import old history into existing Matrix rooms (<a href="https://github.com/matrix-org/matrix-doc/pull/2716">MSC2716</a>), so we can expose the vast amounts of knowledge in Gitter‚Äôs archives directly into Matrix - and in future provide bridging in general of existing archives (Slack, Discord, mailing lists, newsgroups, forums, etc.) into Matrix.</p>
<p>This is a <em>tough</em> problem, as Matrix rooms are fundamentally immutable - events sent into a room cannot be changed.  However, we can bend time a bit and add old chapters of history to the room as if we‚Äôd just discovered them down the back of the sofa - and this is what <a href="https://github.com/matrix-org/matrix-doc/pull/2716">MSC2716</a> does.  The (rewritten!) <a href="https://github.com/matrix-org/matrix-doc/blob/matthew/%5BMSC2716%5D(https://github.com/matrix-org/matrix-doc/pull/2716)/proposals/2716-batch-send-historical-messages.md">spec proposal</a> is a thing of beauty and well worth a look, and you can see an early preview in action back on <a href="https://youtu.be/gSrqj2IzJew?t=529">Matrix Live in June</a>. Over the last few months it‚Äôs been merging and maturing in Synapse and we should see it in the wild in the near future!  And for bonus points Eric‚Äôs also just added in Jump-to-date support (<a href="https://github.com/matrix-org/matrix-doc/pull/3030">MSC3030</a>), letting clients jump around room history by timestamp - another Gitter feature that we sorely need, and will also help us publish excellent Gitter-style online chat archives in future.  You can see it in action in last week‚Äôs <a href="https://youtu.be/Hsyqa5ozWIo?t=581">Matrix Live</a>!</p>
<h2 id="element">Element</h2>
<p>Meanwhile, on the client side, Element continues to act as a flagship client to drive the development of the official client SDKs we ship as the Matrix.org Foundation - and our focus more than ever before has been to ensure that Matrix can be used to create mainstream-usable polished glossy apps.  After all, Matrix will only succeed if clients emerge which can punch their weight against the enormous incumbents - be they Slack, Teams, WhatsApp or Discord.</p>
<p>This year, improving UX quality has been front and center - and hopefully the shift has been obvious in the app (and huge thanks to everyone who tweeted/tooted/enthused about improvements when they saw them!).  Part of this has been ensuring that all new features are built in a design- and product-led fashion by folks who are explicitly focused on product engineering - with product design involved from the outset and with coordination and focus provided by product management folks. This is far from the typical way that FOSS operates, but if we‚Äôre to succeed against the incumbents we have to beat them at their own game (just as, for instance, Mozilla wields conventional product management in their browser wars).</p>
<p>More recently, there‚Äôs also been a major shift towards structured <a href="https://twitter.com/element_hq/status/1470798993122807809">user testing</a> in order to evaluate new features and analyse how users trip over the app in general, including radically improved analytics (for those who opt in!) to help visualise which bits of the app aren‚Äôt working.  In the new year, the expectation is to double down on user testing: quite simply, if you can hand Element to a casual mainstream user and they can get the core jobs done (sign up, chat to someone, call someone, etc.) without tripping over, then mission successful :)</p>
<p>The <a href="https://element.io/blog/">Element blog</a> covers the work this year from the Element side, but from the Matrix side, the key changes include:</p>
<ul>
<li>finalising <a href="https://element.io/blog/spaces-blast-out-of-beta/">Spaces</a> as a way to group together rooms - providing the equivalent of Discord servers or Slack workspaces, or alternatively letting you gather your own rooms together into a private space.</li>
<li>building out Threads (available in labs; launching soon!)</li>
<li>Social Login!</li>
<li>radically improving Element‚Äôs Information Architecture (i.e. the layout of the UI, so that the panels and buttons are correctly semantically grouped together in a visual hierarchy)</li>
<li>adding <a href="https://element.io/blog/introducing-voice-messages-and-so-much-more/">Voice Messages</a> as a really beautiful polished feature powered by <a href="https://github.com/matrix-org/matrix-doc/pull/3245">MSC3245</a></li>
<li>adding Location Share (available in labs; launching soon!) powered by <a href="https://github.com/matrix-org/matrix-doc/pull/3488">MSC3488</a> (and in future <a href="https://github.com/matrix-org/matrix-doc/pull/3489">MSC3489</a> for live-location sharing - in dev on iOS right now!)</li>
<li>adding <a href="https://element.io/blog/element-1-9-1-export-is-finally-here/">Chat Export</a>, thanks to the amazing GSOC work by Jaiwanth </li>
<li>adding Polls via <a href="https://github.com/matrix-org/matrix-doc/pull/3381">MSC3381</a>.</li>
</ul>
<p><img src="/blog/img/2021-12-22-spaces.gif" alt="Spaces in all their glory" /></p>
<p>From a spec perspective, it‚Äôs been particularly exciting to be finally using Extensible Events (<a href="https://github.com/matrix-org/matrix-doc/pull/1767">MSC1767</a>) for many of these new features: voice messages, location sharing and polls are all experimenting with this new idiom for expressing richer structured data over Matrix while presenting a consistent and useful ‚Äòfallback‚Äô representation for clients which don‚Äôt know how to natively render the richer data.</p>
<p>We‚Äôve also done a huge amount of work this year in improving 1:1 VoIP - both via <a href="https://github.com/matrix-org/matrix-doc/pull/2746">MSC2746</a> and within the JS, iOS &amp; Android Matrix SDKs. If you haven‚Äôt tried doing a 1:1 call via Matrix recently we‚Äôd highly recommend giving it a go - probably the main remaining bug at this point is that we need to find a better default ringtone for Element(!). Huge thanks go to ≈†imon Brandner both for his community contributions to VoIP and across all of Element Web - including proper screensharing for 1:1 (and group!) VoIP calls. This has also laid excellent groundwork for native Group VoIP/Video over Matrix - more on that later.</p>
<p>On Element Mobile, work on all the above features has been balanced by fighting against the various platform‚Äôs quirks, and lots of under-the-hood work improving performance. iOS has gone through a long journey to get back to stability after iOS‚Äôs push notification API changes, while also improving incremental sync performance by rearchitecting the local cache in the client.  Android meanwhile has been working away improving the app; reworking Notifications, migrating to Kotlin coroutines and Hilt, and closing over 690 GH issues.  Android has also had its fair <a href="https://element.io/blog/element-on-google-play-store/">share of dramas</a>, including some recent long Play Store review times, but we‚Äôve come through the other side intact.</p>
<p>However, we‚Äôve been thinking more and more about the nightmarish pain point that is the amount of time we spend implementing the same features across the three different platforms. This becomes particularly apparent for security-sensitive features such as end-to-end encryption, or major API changes such as aggregations, spaces or sync v3 (more on that later). Or simply rapidly sharing improvements to implementation best practices between platforms.</p>
<p>Historically we consciously built platform-native Matrix SDKs in order to provide entirely idiomatic SDKs for other Matrix developers to use - and also to better dogfood the protocol and ensure that the heterogenous implementations could interoperate successfully. However, in practice, relatively few third party projects other than Element build on top of matrix-ios-sdk and matrix-android-sdk2 - and meanwhile there are more than enough other Matrix clients out there nowadays to dogfood interoperability against (including alternative experimental clients from the core team such as Hydrogen).</p>
<p>So, we‚Äôve been thinking increasingly seriously about how to solve this‚Ä¶</p>
<h2 id="a-new-hope-matrix-rust-sdk">A new hope: matrix-rust-sdk</h2>
<p><a href="https://github.com/matrix-org/matrix-rust-sdk">matrix-rust-sdk</a> is an attempt to build a new reference client SDK for Matrix which can be used by as many platforms as possible - hopefully forever stopping us from reimplementing the wheel more than we need to. Work began towards the end of 2019, building on top of <a href="https://www.ruma.io/">Ruma</a>‚Äôs excellent Matrix rust crates, and poljar has been working away solidly at it ever since.  We teased matrix-rust-sdk in last year‚Äôs update, but as of this year it is properly coming of age and we‚Äôve started using it in earnest - beginning by swapping out Element Android‚Äôs encryption implementation for matrix-rust-sdk-crypto (the E2EE cryptography crate provided by the SDK).</p>
<p>If you‚Äôre not familiar with Rust, the main benefits we get here are a heavy emphasis on safety and security without compromising performance; while providing a single codebase which can be used equally from iOS, native Desktop apps such as Fractal, Android (with native bindings) and even Web (via WASM, in future).  While technically this results in a ‚Äúnon-native‚Äù SDK relative to matrix-js-sdk, matrix-ios-sdk and matrix-android-sdk - in practice, it‚Äôs become so common to depend on native-code shared libraries (outside the web, at least) that it‚Äôs not really a problem.</p>
<p>Initial results look wildly promising here: ‚ÄúElement R‚Äù (formerly known as Corroded Element - the codename for the Rust-enhanced version of Element Android) builds are now out there, and out-perform the kotlin E2EE implementation by <a href="https://github.com/matrix-org/matrix-rust-sdk/pull/170">roughly 10x</a>, thanks to using native code and Rust‚Äôs improved parallelisation.</p>
<p>Our next step is to start using it on iOS, and we‚Äôll be experimenting with a next-generation of Element iOS shortly in the new year with the SDK provided exclusively by matrix-rust-sdk.  Element will also be funding more people to work fulltime on matrix-rust-sdk itself, and to see what the developer experience is like when you use it seriously on the Web - watch this space!</p>
<h2 id="bridges-bots-widgets-and-integration-managers">Bridges, Bots, Widgets and Integration Managers</h2>
<p>Elsewhere in Matrix, the Bridge Crew has busy polishing bridges like crazy - working away on encrypted application services (<a href="https://github.com/matrix-org/matrix-doc/pull/3202">MSC3202</a>), massively improving the IRC bridge (particularly in the fallout of the great Freenode-&gt;Libera migration), stabilising and extending <a href="https://github.com/matrix-org/matrix-bifrost">matrix-bifrost</a> (our XMPP-and-more bridge), getting libpurple bridging working properly in bifrost, getting <a href="https://github.com/matrix-org/matrix-appservice-slack">matrix-appservice-slack</a> and <a href="https://github.com/Half-Shot/matrix-appservice-discord">matrix-appservice-discord</a> stable enough to be hosted by <a href="https://element.io/blog/slack-bridging/">EMS</a>, experimenting with <a href="https://github.com/turt2live/matrix-bot-sdk">matrix-bot-sdk</a> as an alternative bridging API, and even looking at adding <a href="https://github.com/matrix-org/matrix-rust-sdk/tree/main/crates/matrix-sdk-crypto">matrix-rust-sdk-crypto</a> into matrix-bot-sdk as an elegant way to power robust encrypted bridges (thus replacing Panatalaimon for that use case).</p>
<p>There‚Äôs also a new kid in town: <a href="https://github.com/Half-Shot/matrix-hookshot">matrix-hookshot</a> (formerly known as matrix-github) is a new all-singing-all-dancing general purpose integration built on matrix-bot-sdk, coming soon to an integration manager near you, which can bridge through to GitHub, GitLab, JIRA and freeform webhooks! Check it out a few weeks ago on <a href="https://youtu.be/55P-NdDa-UI?t=1018">Matrix Live</a>. matrix-hookshot is primarily Node, but is also getting in on the Rust action with some functions being implemented in native code.</p>
<p>Meanwhile, change is afoot for integration managers, which have been screaming out for an overhaul for years. There was a cheeky hint in last week‚Äôs <a href="https://youtu.be/Hsyqa5ozWIo?t=724">Matrix Live</a> where <a href="https://dimension.t2bot.io/">Dimension</a> did an unexpected cameo looking particularly swish‚Ä¶  All shall be revealed next year!</p>
<p><img src="/blog/img/2021-12-22-dimension.png" alt="A whole new Dimension" /></p>
<h2 id="dendrite-low-bandwidth-matrix-and-peer-to-peer-matrix">Dendrite, Low bandwidth Matrix and Peer-to-Peer Matrix</h2>
<p>Dendrite is our next-generation homeserver implementation written in Go, and having shipped the first beta in Oct 2020, we‚Äôve cut another 11 releases over the course of this year - adding in features such as E2EE key backups, cross-signing, support for room versions 7, 8 and 9 (knocking and restricted join rules), massive state resolution performance improvements, an entirely new state storage implementation that uses ~15x less disk space, sync filtering, experimental support for peeking-over-federation (<a href="https://github.com/matrix-org/matrix-doc/pull/2444">MSC2444</a>) - not to mention huge numbers of bug fixes. Even more excitingly, we‚Äôre in the process of ditching Kafka in favour of native-Go message queuing in the form of <a href="https://github.com/matrix-org/dendrite/compare/nats">NATS</a>!</p>
<p>However, it‚Äôs been a bit of a weird year as the team has been repeatedly pulled onto other projects due to competing priorities - and there‚Äôs still a bunch of stuff left which is keeping us in beta.  Some of this is plain old missing features (search, push rules/notifications, room upgrades, presence etc) - but we‚Äôve also run up against some problems over the last few months while implementing new room versions and similar thanks to the sheer number of different microservices which Dendrite is made out of. In retrospect, it feels like Dendrite has ended up too granular, and when hacking on it you get slowed down badly by all the boilerplate required to glue the various services together.  Therefore, we‚Äôve just started to <a href="https://github.com/matrix-org/dendrite/pull/2055">merge some of the services together</a> - still preserving horizontal scaling of course, but refactoring the architecture a bit while we‚Äôre still in beta to help speed up development again. So far things are looking promising!  We‚Äôre also really looking forwards to <a href="https://github.com/matrix-org/dendrite/pulls?q=+is%3Apr+author%3As7evinK">s7evinK</a> joining the team to work on Dendrite fulltime in the coming weeks :)</p>
<p>Talking of competing priorities, there have been three other big missions going on at the same time as Dendrite dev: firstly - formalising Low Bandwidth Matrix. LB Matrix is super important for maximising battery life on mobile, as well as (obviously) supporting worse network conditions - and it‚Äôs effectively a prerequisite for P2P Matrix.  We did a bunch of experiments around it back in <a href="https://matrix.org/blog/2019/03/12/breaking-the-100-bps-barrier-with-matrix-meshsim-coap-proxy">2019</a>, but earlier in the year we needed it <a href="https://twitter.com/element_hq/status/1418632867626770433">for real</a> and <a href="https://github.com/matrix-org/matrix-doc/pull/3079">MSC3079</a> was the result. The low bandwidth dialect which we‚Äôve proposed in the MSC is designed for use on the real Internet using standard IETF protocols (CoAP + DTLS + CBOR) and so isn‚Äôt quite as exotic as the 2019 version, but still gives a ~10-20x bandwidth improvement over normal HTTP+JSON based Matrix.  It hasn‚Äôt made it to Element yet, but if you‚Äôre interested go <a href="https://matrix.org/blog/2021/06/10/low-bandwidth-matrix-an-implementation-guide">check out the blog post</a>!</p>
<p>Secondly, we‚Äôve been sidetracked by the entirety of P2P Matrix.  This is our long-term mission to let Matrix run peer-to-peer without the need for any servers (or indeed Internet connectivity, thanks to Bluetooth Low Energy) by embedding servers such as Dendrite into clients such as Element and so let each Matrix Client have its own personal local homeserver.  We‚Äôve made massive progress over the course of the year on P2P - the biggest breakthroughs being <a href="https://matrix.org/blog/2021/05/06/introducing-the-pinecone-overlay-network">Pinecone</a> as an entirely new P2P overlay network, with the novel SNEK (sequentially networked edwards key) routing topology.  (The animation below shows a P2P network arranging itself into a SNEK!)</p>
<p><img src="/blog/img/2021-12-22-pinecone.gif" alt="SNEK" /></p>
<p>You can read all about it in <a href="https://matrix.org/blog/2021/05/06/introducing-the-pinecone-overlay-network">the blog post</a>, but suffice it to say that Pinecone outperformed all the other P2P overlay networks in <a href="https://github.com/mwarning/meshnet-lab">meshnet-lab</a>‚Äôs <a href="https://github.com/mwarning/meshnet-lab/tree/master/tests/mobility2">Mobility2</a> test:</p>
<p><img src="/blog/img/2021-12-22-pinecone-perf.png" alt="Pinecone perf benchmarks" /></p>
<p>You can play with P2P Matrix today on iOS and Android (head over to <a href="https://matrix.to/#/#p2p:matrix.org">#p2p:matrix.org</a> for builds), but there is some major work still to be done:</p>
<ul>
<li>We need to bridge to today‚Äôs Matrix network. Right now, having a weird experimental test network for P2P means that in practice nobody actually uses it other than for demos - whereas if you could actually talk to everything else in Matrix, it‚Äôd be way more compelling and interesting to use and dogfood.  We‚Äôre currently thinking about how best to do this!</li>
<li>We need to standardise the actual transport to be used over Pinecone.  Currently it uses HTTPS over <a href="https://en.wikipedia.org/wiki/Micro_Transport_Protocol">ŒºTP</a> (purely because empirically it handled packet loss and congestion well, and LB Matrix wasn‚Äôt ready at the time).  We‚Äôre currently experimenting with switching to LB Matrix using our own CoAP implementation called PineCoAP (potentially using pCoCoA congestion control, given CoAP doesn‚Äôt provide any congestion control out of the box), but this is early days.</li>
<li>We still need to finalise store-and-forward: if your destination is offline, do you buffer your transactions in the network somehow, or do you use another Matrix node to buffer them?</li>
<li>Relatedly, we need to tweak federation so that if events get lost, federation for a room can recover more gracefully than it does today - for instance, by bundling redundant auth events on transactions, or by providing more recovery mechanisms.</li>
<li>We still need to spec and implement multihomed accounts, so that your identity on your phone is not divorced from your identity on your laptop.</li>
<li>‚Ä¶and obviously, we need a robust post-beta Dendrite to act as the local homeserver!</li>
</ul>
<p>Right now focus is going back to Dendrite for a bit, but P2P work will resume again in the new year :)</p>
<p>Finally, the third big distraction from Dendrite has been‚Ä¶ sync v3.</p>
<h2 id="sync-v3">Sync v3</h2>
<p>Sync v3 is shaping up to be the single most significant improvement to Matrix since we began.</p>
<p>Syncing data from the homeserver to the client is obviously fundamental to Matrix - and the current behaviour (sync v2) is far from perfect, as it‚Äôs designed around the assumption that your client wants to receive information for every room that it‚Äôs in.  In the early days of Matrix, this was fine: a typical user might be in tens of conversations, and it‚Äôs useful to have them all available for offline access.  Nowadays, however, it‚Äôs a disaster: users can easily accumulate hundreds or thousands of rooms - especially with rooms used to describe spaces or profiles and other structured realtime data.  Moreover, the number of rooms you‚Äôre in typically increases linearly over time, unbounded, as nobody wants to archive their old conversations.</p>
<p>So, the idea of sync v3 is that you only sync the strict subset of data that your client actually cares about to display in its UI - effectively making both initial and incremental sync instant, incredibly low bandwidth, and completely independent of the number of rooms you‚Äôre in (just as filesystem performance should be independent of the number of directories or files present).</p>
<p>For instance, the full initial sync for @matthew:matrix.org in sync v2 is 417MB of JSON uncompressed - or ~100MB if gzipped, and takes about 5 minutes to calculate on matrix.org (during which it murders the sync worker responsible and hammers the database like crazy).  By contrast, sync v3‚Äôs initial sync is 15KB uncompressed, or 5106 bytes compressed - and synced in 250 microseconds from a local sync-v3 server.  <strong>Yes folks, that‚Äôs somewhere between a 30,000x to 1,200,000x improvement over sync v2, depending on how you count it.</strong></p>
<p>Sync v3 gets this unbelievable performance by the client defining a sliding window into the server‚Äôs datasets, sized and ordered as needed for the client‚Äôs UI. This effectively performs real-time serverside pagination, so that as the client scrolls around or filters their roomlist or membership list, the client requests new views from the server.  Meanwhile the server sends incremental updates to the client if they intersect with the sliding window.  This may sound unwieldy, but in practice it works fine (although we‚Äôll have some interesting challenges when we get around to encrypting state events, given serverside ordering and filtering will become distinctly harder).  It also doesn‚Äôt design out offline access, as the client caches its view of the world so even if you do go offline you can still work with all the data that has sent to your client so far (and the client could even proactively paginate in other content, if it wanted to, similar to an email client synchronising for offline access).</p>
<p>Sync v3 exists today as a proxy called <a href="https://github.com/matrix-org/sync-v3">sync-v3</a> which sits between any existing homeserver and a sync-v3-capable Matrix client.  It‚Äôs very early days, but Hydrogen has <a href="https://github.com/vector-im/hydrogen-web/compare/kegan/syncv3">basic v3 support</a> on a branch which we‚Äôve been using to experiment with the API and flesh it out - and you can see a demo and intro talk in <a href="https://youtu.be/Hsyqa5ozWIo?t=59">last week‚Äôs Matrix Live</a>!</p>
<iframe src="https://www.youtube.com/embed/Hsyqa5ozWIo?t=59" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>The API itself is still in flux, but those interested can see the initial spec design at <a href="https://github.com/matrix-org/sync-v3/blob/main/api.md">https://github.com/matrix-org/sync-v3/blob/main/api.md</a> and also an MSC is emerging at <a href="https://github.com/matrix-org/matrix-doc/blob/kegan/sync-v3/proposals/3575-sync.md">MSC3575</a>.  Next steps will be to finish hooking up to Hydrogen (including filtering the room list), finish the MSC, and then start thinking about implementing it in other clients and servers!</p>
<h2 id="fast-joins-over-federation">Fast Joins over Federation</h2>
<p>While we‚Äôre on the subject of speeding up Matrix‚Ä¶ it‚Äôs all very well being able to sync your client instantly, but the other big complaint everyone has about Matrix is how long it takes to join rooms - especially big ones.  As most people will know, it can easily take 5-10 minutes to join a large room like Matrix HQ on a new homeserver - and given this is the first experience most users have of running their own homeserver, it can prove pretty disastrous and we are determined to fix it.  It will become even more relevant when we implement peeking over federation, as the last thing you want is to have to wait 5 minutes to temporarily dip into some random federated room to see if you want to join it or not (or to sniff its room state for things like extensible profiles or <a href="https://github.com/matrix-org/matrix-doc/pull/2313">MSC2313</a> reputation rooms).</p>
<p>So, to address this, we‚Äôre currently in the middle of experimenting with <a href="https://github.com/matrix-org/matrix-doc/pull/2775">MSC2775</a> (Lazyloading over Federation) in Synapse. This MSC lets servers participate in a room before they‚Äôve received the full room state by defining a subset of state which is mandatory for participation, and then letting the rest get added lazily.  It‚Äôs quite a violent change as it means the assumption that room state is complete (to the best of the server‚Äôs knowledge) is no longer true - but given Matrix already has to handle incomplete room state, it‚Äôs not necessarily a showstopper.</p>
<p>Watch this space for how well it works in practice, but we‚Äôre hoping for a ~20x speed improvement in joining Matrix HQ.</p>
<h2 id="hydrogen">Hydrogen</h2>
<p>2021 has been a busy year for Hydrogen - our ultra-lightweight Matrix Client, which provides a small but perfectly formed progressive web app for us to experiment on! There have been no fewer than 56 releases over the course of the year, with loads of contributions from Bruno, Midhun (who joined first as a GSOCcer and then as a fulltime Element employee) and also Danila who interned at Element on Hydrogen over the summer.</p>
<p>People often ask why Hydrogen exists as well as Element Web - and the reason is because Element Web is (for now at least) very far from a progressive web app and is stuffed full of features, whereas Hydrogen is intended to be as lightweight and simple and efficient as possible while also targeting as wide a range of web browsers as possible (even Internet Explorer!).  It also provides a simpler platform for experimenting with new approaches such as sync v3 or OIDC without getting entangled in the constant hive of activity around Element Web.  Finally, it gives us a playground to experiment with embeddable chat clients thanks to Hydrogen‚Äôs strict <a href="https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93viewmodel">MVVM</a> component model.</p>
<p>In terms of features, 2021 has seen huge steps forwards as Hydrogen converges on feature parity with Element - proper mentions and replies; rich formatted linkified messages; reactions; redactions; memberlist; member info; webpush notifications; proper image, video &amp; file uploads; SSO login; sync v3(!) and so much more. Can‚Äôt wait to see what 2022 will bring!</p>
<h2 id="end-to-end-encryption">End-to-End Encryption</h2>
<p>2021 saw the long-awaited creation of a dedicated cryptography team to focus exclusively on improving encryption in Matrix: previously encryption expertise was split across various different areas, meaning that it could prove hard to carve out time to tackle the bigger remaining encryption challenges.</p>
<p>So far the team has been busy digging deep into the few remaining causes of UISIs (undecryptable messages), including automated UISI reporting and tracing E2EE flows end-to-end (from client to server to server to client).  There‚Äôs also been an initial wave of UX work - with much more to come next year as we overhaul cross-signing and device backups to make it way more user friendly.</p>
<p>Meanwhile, on the more foundational side of things, we‚Äôre continuing to define Decentralised MLS as a potential next-generation form of end-to-end encryption, building on the IETF‚Äôs <a href="https://datatracker.ietf.org/wg/mls/about/">MLS</a> work - providing much better scalability for large chat rooms and potentially helping with some causes of encryption failures.  Hubert (uhoreg) has been leading the charge here, with his <a href="https://gitlab.matrix.org/matrix-org/mls-ts/-/blob/decentralised2/decentralised.org">latest thoughts emerging here</a> alongside a <a href="https://www.youtube.com/watch?v=UiUyWZg3J7k">brand new demo</a> showing his <a href="https://gitlab.matrix.org/uhoreg/mls-demo">DMLS simulator</a> - which under the hood is actually sending real Matrix events over DMLS!</p>
<p><img src="/blog/img/2021-12-22-dmls.png" alt="DMLS" /></p>
<p>Otherwise, the team has had three big projects: adding matrix-rust-sdk-crypto into Element Android (which we already covered above), arranging a fresh security audit of Matrix‚Äôs end-to-end encryption (due to complete January 2022)‚Ä¶ and, most excitingly: vodozemac.</p>
<p><a href="https://github.com/matrix-org/vodozemac">Vodozemac</a> (pronounced roughly vod-oz-eh-matz) is an entirely new implementation of our Olm and Megolm end-to-end encryption system, written from scratch in pure Rust, aiming to replace the original reference C/C++11 implementation in <a href="https://gitlab.matrix.org/matrix-org/olm">libolm</a>.  Originally written as an <a href="https://github.com/matrix-org/matrix-rust-sdk/compare/vodozemac-bench">experiment for matrix-rust-sdk</a> at the beginning of the year, in the last week it‚Äôs received a <a href="https://github.com/matrix-org/vodozemac/graphs/contributors">huge explosion of attention</a> from poljar and dkasak to bring it up to production quality‚Ä¶ for we decided that if we are doing a full E2EE audit for Matrix, we should target the new and future codebase rather than burn money on re-auditing the legacy libolm library (much as the <a href="https://matrix.org/blog/2016/11/21/matrixs-olm-end-to-end-encryption-security-assessment-released-and-implemented-cross-platform-on-riot-at-last">original 2016 review of libolm</a> happened when the library was fresh and new).</p>
<p>The motivation for vodozemac in general is to benefit from the intrinsic type and memory safety and fearless parallelism provided by Rust - and also maintain full type &amp; memory safety throughout the matrix-rust-sdk stack, including encryption.  Over the last year we‚Äôve been taking<a href="https://matrix.org/blog/2021/06/14/adventures-in-fuzzing-libolm"> more and more of a careful look at libolm</a>, and despite our best efforts a <a href="https://matrix.org/blog/2021/12/13/disclosure-buffer-overflow-in-libolm-and-matrix-js-sdk">few</a> memory management bugs have crept in - which vodozemac should be immune to.  Vodozemac will solve another embarrassing problem with libolm: that its default cryptography primitives are designed for correctness rather than performance or safety.  By switching to Rust‚Äôs ed25519-dalek and rustCrypto AES primitives we should be in a much better position in terms of performance and safety.</p>
<p>Next up, we‚Äôll be fully integrating vodozemac into matrix-rust-sdk, and figuring out how best to provide it as a libolm replacement in general.</p>
<h2 id="matrix-security">Matrix Security</h2>
<p>Alongside the new Cryptography team we‚Äôve also established a new dedicated Security team for Matrix, led by dkasak.  As well as <a href="https://matrix.org/blog/2021/06/14/adventures-in-fuzzing-libolm">fuzzing excursions</a> into libolm and similar research, Denis has been handling all our <a href="https://matrix.org/security-disclosure-policy">security disclosure policy</a> submissions, managing the <a href="https://blog.intigriti.com/matrix/">Intigriti bug bounty</a> programme, helping coordinate all our security releases, and coordinating the upcoming external independent security audit of vodozemac, matrix-rust-sdk, Element and Synapse.  It‚Äôs a huge step forwards to be able to fund full-time infosec researchers to focus exclusively on Matrix, and this is just the beginning!</p>
<h2 id="trust-and-safety">Trust and Safety</h2>
<p>Another place where we‚Äôve created a dedicated team this year is around Trust &amp; Safety: building tools to fight spam and abuse on our own servers, while also empowering the wider network of users, moderators and admins to manage abuse as they see fit.  This includes lots of work on Mjolnir, our primary moderation bot, but also defining MSCs such as <a href="https://github.com/matrix-org/matrix-doc/pull/3215">MSC3215</a> (Aristotle: Moderation in all things) and <a href="https://github.com/matrix-org/matrix-doc/pull/3531">MSC3531</a> (Letting moderators hide messages pending moderation) and internal tooling as we experiment with different approaches.</p>
<p>We‚Äôll have more updates on this in the coming year as we release the tools we‚Äôve been working on, but suffice it to say that the goal is to empower mainstream users in the wider Matrix network to apply their own rules as they see fit, directly from the comfort of their favourite Matrix client - without having to know what a Mjolnir is (or how to run one), and without having to be a moderation expert.</p>
<h2 id="openid-connect">OpenID Connect</h2>
<p>A new project brewing throughout 2021 has been the investigation into replacing the entirety of Matrix‚Äôs authentication APIs with industry standard OpenID Connect.  Spearheaded by Quentin, this has proved to be a fascinating and challenging endeavour, but we‚Äôre starting to see some really interesting results.  The problem we‚Äôre trying to solve here is:</p>
<ul>
<li>As Matrix grows, we‚Äôre seeing more and more clients and services appearing which you might want to log into with your Matrix account.  But do you really want to trust each app with your account password?  And what if you only want to give it access to a small subset of your account?</li>
<li>Similarly, we‚Äôre seeing more and more login mechanisms used to access Matrix - it‚Äôs no longer just a matter just a username + password; many servers use single-sign-on (e.g. mozilla.org) or social login (fosdem.org, matrix.org), or layer on 2FA or MFA hardware tokens and similar to access their accounts via an SSO provider.  We also see passwordless login on the horizon.</li>
</ul>
<p>So, do we really want to mandate each new Matrix client to have to implement custom flows to handle this explosion of login/registration mechanisms?  And is it even really the client‚Äôs problem in the first place?  You‚Äôre securing access to your account on your chosen server, which isn‚Äôt really a client-specific thing at all.</p>
<p>The real turning point for the project however has been our recent experiences building out a new wave of single-use domain-specific clients (see below) for video conferencing, whiteboarding, metaverse-browsing etc‚Ä¶ where by <em>far</em> the most painful bit of the project has been hooking up the UI for login, registration, guest access, incremental signup, password reset, email verification, CAPTCHA, SSO, etc.  And that‚Äôs even when building on top of matrix-react-sdk, which theoretically has it all already thanks to Element Web!</p>
<p>Frankly, it has become blindingly obvious that it‚Äôs crazy for clients to reimplement this every time, and they should instead chuck the user over to a sign-on portal provided by their homeserver - just like Google and everyone else‚Äôs single-sign-on does.  And rather than inventing our own homebrew way of doing that, we should just use the existing industry standard SSO best practices defined by OpenID Connect.</p>
<p>The main objections which have come up against this are: ‚Äúwhat if my Matrix client doesn‚Äôt have a web browser, or what if I want to provide my own native login UI‚Äù, and ‚Äúdoes this design out the idea of using a single password to access your account as well as your E2EE history‚Äù?  In both instances, we have workarounds: in practice, there are so many Matrix clients around that we won‚Äôt be removing today‚Äôs legacy login/registration APIs any time soon (just like HTTP Basic Auth is still very much a thing on the web!).  And in terms of ‚Äúcryptographic login‚Äù, there are ways we could daisychain the auth required to unlock your E2EE storage to also authenticate you with your server - although this would be a major extension (much as cryptographic login is already today!)</p>
<p>The current status is that we‚Äôve defined a set of initial MSCs (<a href="https://github.com/matrix-org/matrix-doc/pull/2964">MSC2964</a>, <a href="https://github.com/matrix-org/matrix-doc/pull/2965">MSC2965</a>, <a href="https://github.com/matrix-org/matrix-doc/pull/2966">MSC2966</a> and <a href="https://github.com/matrix-org/matrix-doc/pull/2967">MSC2967</a>), and are implementing an initial Open ID Connect auth server (in Rust!) called <a href="https://github.com/matrix-org/matrix-authentication-service">matrix-authentication-service</a> (better name suggestions welcome!) designed to sit alongside your homeserver, and we‚Äôre experimenting with hooking <a href="https://github.com/sandhose/hydrogen-web/tree/sandhose/oidc-login">Hydrogen</a> (and some of the new domain-specific clients) up to see how it feels.  But if it goes as well as we think it might, folks should prepare for 2022 to be the year where Matrix‚Äôs authentication system finally gets fixed!</p>
<h2 id="native-matrix-video-voip-conferencing">Native Matrix Video/VoIP Conferencing</h2>
<p>One of the most anticipated features in Matrix over the years has been the prospect of native, decentralised, end-to-end encrypted video and voice conferencing.  Today, voice and video conferencing in Matrix works by embedding Jitsi as a third party centralised service into your chatroom.  This works fairly well - but Jitsi is an entirely separate service with lots of moving parts, and its own concept of users and access control (provided by XMPP!) and its megolm-based end-to-end-encryption doesn‚Äôt actually integrate with Matrix‚Äôs own Olm identities, verification or cross-signing.  The fact that the conference is then logically centralised on whoever is hosting the Jitsi service also misses one Matrix‚Äôs main goals - that users should be able to hold a conversation without being dependent on any single service or provider.  Plus it‚Äôs really confusing that Matrix has proper native 1:1 calls for DMs‚Ä¶ but then switches to a totally different system in group chats.</p>
<p>So, this year we set out to fix it - and succeeded :D  The solution hinges around <a href="https://github.com/matrix-org/matrix-doc/blob/matthew/group-voip/proposals/3401-group-voip.md">MSC3401</a> - a spec proposal that describes how to extend native 1:1 calls to work for groups, while providing real flexibility on how to actually mix the calls together.  At the simplest extreme, it defines how full mesh calls work (where every client simply calls every other client simultaneously) - but then also defines how you can mix calls together either using a single focus (conferencing server) or multiple foci run by different parties, where foci can either be Selective Forwarding Units (SFUs, like Jitsi) or Multipoint Conferencing Units (MCUs, like FreeSWITCH).  The end result is to give us decentralised, cascading, end-to-end encrypted conferencing which even has direct compatibility with today‚Äôs 1:1 Matrix calling, letting you easily hook in bots and bridges which already support 1:1 Matrix calls!</p>
<p>Robert Long has been frantically hacking away at the <a href="https://github.com/vector-im/matrix-video-chat">initial implementation</a> over the last few months, fleshing out full-mesh conferencing at first and getting it running in as many browsers as possible (including Mobile Safari and Chrome Android!).  We were hoping to fully unveil the end result in time for Christmas, but in practice we hit some last minute snags (turns out Matthew forgot guest users can‚Äôt use TURN, who knew? so much for incremental login! üò∞) which have pushed the launch to early next year.  But hopefully in a few weeks, you‚Äôll be able to start jumping on a native group call in Matrix!</p>
<p>Meanwhile, those interested can see all the gory details from our CommCon 2021 talk a few weeks ago, complete with a demo of the shape of things to come‚Ä¶</p>
<iframe src="https://www.youtube.com/embed/A4k7DVIK5TE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>Next up, we‚Äôll be working on building an <a href="https://github.com/matrix-org/matrix-doc/pull/3401">MSC3401</a>-compatible SFU so we can go beyond full mesh (which typically supports a maximum of ~7 callers).  Our candidates right now are mediasoup, ion-sfu, janus and signal-calling-service - we‚Äôll let you know how it goes!  Also, if you‚Äôre interested in helping us build this out quicker, we are frantically searching for more WebRTC &amp; VoIP gurus to <a href="https://apply.workable.com/elementio/j/25BB112FBD/">join the team at Element</a> working on this.</p>
<h2 id="applications-beyond-chat">Applications Beyond Chat</h2>
<p>Finally, 2021 was the year where we seriously started building out functionality on Matrix which goes far beyond plain old chat rooms.</p>
<p>Work began in the summer as a research project led by Ryan, formerly tech lead for Element Web - looking at ways to store hierarchical structured data into Matrix while preserving real-time semantics; effectively using Matrix as a collaborative decentralised object tree, providing CRDT (Conflict-free Replicated Data Types) to allow richer applications to be built on Matrix.  This journey led him to create <a href="https://github.com/matrix-org/patience">Patience</a> as a test environment for building out these sort of clients, and meanwhile Timo (famous of <a href="https://github.com/toger5/TheBoard">The Board</a>) joined the team to build out <a href="https://youtu.be/Hsyqa5ozWIo?t=1054">Full Screen Widgets</a> in Element, providing a much better UI for beyond-chat experiments.</p>
<p>Meanwhile, Matthew Weidner and the Composable Systems Lab at CMU stunned us all by presenting a complete CRDT solution using Matrix named <a href="https://github.com/composablesys/collabs">Collabs</a> at <a href="https://youtu.be/Exr0iY_D-vw?t=382">Strange Loop 2021</a>.  This is <em>really</em> impressive stuff - the brave of heart can go and embed a Matrix-powered end-to-end-encrypted collaborative markdown editor straight into Element via Collabs by following the <a href="https://compoventuals-tests.herokuapp.com/">instructions here</a>.  In practice, Collabs works by serialising the CRDT updates as base64 blobs inside Matrix timeline events (hello <a href="https://svn.apache.org/repos/asf/incubator/wave/whitepapers/federation/wavespec.html#anchor35">Wave</a>, is that you?), but we‚Äôre now investigating how you might reconcile this with maintaining a proper realtime object tree in Matrix.</p>
<p>It‚Äôs hard to overstate how powerful storing freeform tree CRDTs in Matrix would be.  It could open up everything from decentralised encrypted collaborative document editing to collaborative whiteboarding and collaborative <a href="https://figma.com/">Figma</a>-style (or <a href="https://penpot.app/">Penpot</a>- or <a href="https://www.blender.org/">Blender</a>-style) design.  You could even start storing an HTML DOM into a room, alongside its binary assets, giving you a multiplayer DOM to build on‚Ä¶ and then imagine if you could store the <a href="https://developer.mozilla.org/en-US/docs/WebAssembly/Understanding_the_text_format">syntax tree</a> of the code operating on that DOM alongside it, in the same room.  Before you know it, we will have created kind of some incredible <a href="https://en.wikipedia.org/wiki/Smalltalk">Smalltalk</a> / <a href="https://en.wikipedia.org/wiki/Croquet_Project">Croquet</a> / <a href="https://en.wikipedia.org/wiki/Alan_Kay">Alan Kay</a> nirvana where code is data and data is code and it‚Äôs all running live in some kind of decentralised encrypted multiplayer Metaverse :D</p>
<p>While we‚Äôve been looking at storing object trees in Matrix, another obvious angle that has emerged is to use Matrix for encrypted decentralised file storage. <a href="https://github.com/matrix-org/matrix-doc/pull/3089">MSC3089</a> is a proposal on how you might represent hierarchies of files in Matrix - where each room acts effectively as a directory of files, with spaces forming a directory structure (much as they do already in today‚Äôs Matrix), leveraging Matrix‚Äôs existing decentralised access control mechanisms to control who can access what.  Combine such a file storage system with the collaborative editing capabilities mentioned above, and suddenly a really exciting proposition starts to emerge.  We‚Äôre investigating this right now, and all will be revealed early next year‚Ä¶</p>
<p>Finally, and last but not least, Robert Long has been building on top of our shiny new Native Matrix Voice/Video Conferencing capabilities to use Matrix as the communication backbone for a truly open, equitable and interoperable vision of the Metaverse.  The best way of describing it is to look at his awesome <a href="https://www.youtube.com/watch?v=e26UJRCGfGk&amp;t=2263s">Third Room demo from the Open Metaverse Interoperability Group demo session</a> in September:</p>
<iframe src="https://www.youtube.com/embed/e26UJRCGfGk?t=2263s" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>Now, some folks will recall that since day one (in fact, since before day one) the hope for Matrix was that it might end up as the communications fabric of the Metaverse.  We were about 4 years early when we <a href="https://matrix.org/blog/2017/04/04/opening-up-cyberspace-with-matrix-and-webvr">first starting enthusing about this</a>, and then still ahead of our time when we did the world‚Äôs first <a href="https://matrix.org/blog/2018/02/05/3-d-video-calling-with-matrix-webrtc-and-webvr-at-fosdem-2018">3D Video calling</a> over Matrix.  However, it now feels like the world has finally caught up - and we‚Äôre in grave danger of being overtaken by a dystopia where the big tech companies balkanize the Metaverse into a series of closed proprietary user-exploiting walled gardens, much like today‚Äôs incumbent chat silos - but even worse.</p>
<p><strong>This is our chance to fix it before it‚Äôs too late</strong>, and <a href="https://element.io/careers">Element is funding a small but highly targeted team</a> to focus exclusively on building out open interoperable Metaverse over Matrix - ensuring that collaboration in 3D (and 2D) spatial environments in future is decentralised, secure and standards-based.  This obviously ties in directly with the rest of the Beyond Chat projects listed above: it‚Äôs early days, but it‚Äôs incredibly exciting to imagine where we could end up if this works!</p>
<p>Finally, a question which has kept coming up while working on Beyond Chat projects has been whether to implement this new functionality as Matrix widgets, bake them into existing Matrix clients, or build them as domain-specific dedicated Matrix clients.  But perhaps we‚Äôre thinking about this all wrong: what if your Matrix client was just a browser for Matrix rooms?  Some of these could be chatrooms.  Some of these could be VoIP/Video conferences or Discord-style voice/video rooms.  Some of these could be message boards or mailing lists.  Some of these could be collaborative editors or whiteboards.  Some of these could be 3D views into the metaverse.  Some of these could be rendered via widgets; some could be rendered natively if the client knows how.  And some of these could even be good old web pages(!!!).</p>
<p>Imagine if your Matrix client was effectively a genuine browser of arbitrary decentralised realtime content?  If your view into a Matrix room was just that: a full window view into that room, be it textual or 2D or 3D - and your Matrix client was just a browser which added the necessary chrome and navigation to help you tab between rooms, login and logout, manage your encryption, track who‚Äôs in the room, track your notifications, etc.?</p>
<p>Meanwhile, if you‚Äôre in a web browser, you might hop into a lightweight single-page domain-specific webapp which happens to use Matrix for collaboration.  Or if you‚Äôre in a Matrix client/browser, you could hop to the same matrix URL to get at the same functionality with all the supporting chrome and UI overlays sliding in as needed‚Ä¶</p>
<p>Perhaps the vision of Matrix as the missing communication layer of the open Web is more literal than we ever thought.  Eitherway, it will be fascinating to see how Applications Beyond Chat evolves over the next year.</p>
<h2 id="2022">2022</h2>
<p>Now, I dare you to cross-reference all of the above with <a href="https://matrix.org/blog/2020/12/25/the-matrix-holiday-special-2020#2021">last year‚Äôs predictions for 2021</a> to see how we did :D In practice, the only things from the list we haven‚Äôt got to are peeking-over-federation (although arguably fast joins are a key part of that), account portability, and restoring incremental sign-up (although our new clients have it!).</p>
<p>So, here go the predictions for 2022 (keeping it short, otherwise it‚Äôll be 2023 before this blog post gets finished‚Ä¶):</p>
<ul>
<li><strong>Client polish and performance</strong> - our prime directive is to ensure that Matrix clients can be built with UX polish and quality which exceeds our centralised alternatives.  In practice, this means:
<ul>
<li><strong>Element must spark joy</strong>.  Ensuring Element‚Äôs Information Architecture continues to be simplified and refined, and that <em>nobody</em> who knows how to use a computer hits a WTF moment when first using the app.  Never again do we want to see someone on Twitter saying ‚ÄúI have no idea how to use Matrix‚Äù.</li>
<li><strong>Instant launch</strong>.  With Sync v3 and matrix-rust-sdk we hope to make Element launch instantly on all platforms - including initial sync.</li>
<li><strong>Fast joins</strong>.  We should never get bored while waiting to join a room or accept an invite.</li>
<li><strong>Spaces</strong>.  While Spaces are already a huge improvement in letting users organise and discover rooms, there‚Äôs still much more to be done:
<ul>
<li><strong>Flair</strong> - Users who are members of a space should be able to announce it loud and proud with a Flair badge on their avatar, like we used to with the old pre-spaces Communities feature (<a href="https://github.com/matrix-org/matrix-doc/pull/3219">MSC3219</a> being the potential proposal).</li>
<li><strong>Synchronising access controls</strong> - You should be able to apply access controls based on whether a user is a member of a given group (so that if you invite them to #moderators:example.com, they automatically get made moderator in all the rooms in a given space).  It looks likely that this will be implemented at last using joepie91‚Äôs <a href="https://github.com/matrix-org/matrix-doc/pull/3216">MSC3216</a> proposal for Synchronized access control for Spaces (rather than Matthew‚Äôs original <a href="https://github.com/matrix-org/matrix-doc/pull/2962">MSC2962</a> - an excellent example of the community steering the spec process :)</li>
<li><strong>Bulk joins</strong> - It should be a one-button operation to join all the rooms in a space.</li>
<li>**Subspaces **- as more and more spaces emerge, the ability to navigate them as a hierarchy becomes more and more useful.  We want to get to the point where we can turn off the Matrix.org public rooms list, and instead present a Space tree of all the good rooms we know about in Matrix‚Ä¶ delegating over curation to the wider community; building a huge USENET-style hierarchy of where to go in Matrix.  To do that, we need subspaces to sing!</li>
<li><strong>Removing communities/groups</strong>, which will then be entirely superseded by spaces.</li>
</ul>
</li>
<li>**Threads **go-live!</li>
<li><strong>Location share</strong> go-live</li>
<li><strong>Pinned messages</strong>, so the most important messages are always visible to everyone n the room</li>
<li><strong>Starred messages</strong>, so you never lose a message ever again</li>
<li><strong>Custom emoji</strong>, finally merging in all the custom emoji work from the community.</li>
</ul>
</li>
<li><strong>matrix-rust-sdk</strong>
<ul>
<li><strong>Element iOS on rust-sdk</strong></li>
<li><strong>Element Android on rust-sdk-crypto</strong></li>
<li>‚Ä¶and experiment to see how matrix-rust-sdk feels on Web? It‚Äôs a real shame that <a href="https://github.com/daydream-mx/Daydream">Daydream</a> got archived‚Ä¶</li>
</ul>
</li>
<li><strong>Encryption</strong>
<ul>
<li><strong>Vodozemac</strong> in matrix-rust-sdk, maybe even elsewhere.</li>
<li>**Updated E2EE Audit **spanning vodozemac, olm+megolm, matrix-rust-sdk‚Ä¶ and a representative sample of a typical Element+Synapse deployment.</li>
<li><strong>DMLS</strong> - getting to the point where we can experiment with it in real clients.</li>
<li><strong>Encryption Agility</strong> - the ability to <a href="https://github.com/matrix-org/matrix-doc/issues/3516">migrate encrypted history</a> is going to become really important as we evolve our E2EE, whether that‚Äôs by adding in post-quantum algorithms, or moving from Megolm to MLS, or any other shifts.  We will need to start thinking about it in 2022.</li>
</ul>
</li>
<li><strong>Next-generation MSCs</strong>
<ul>
<li><strong>Aggregations</strong> - finalising the foundational MSCs for aggregations, at last</li>
<li><strong>Extensible events</strong> - finalising the foundational MSCs for extensible events, at last</li>
<li>**Sync v3 **- finalising the MSC and implementing it in matrix-rust-sdk</li>
<li><strong>Fast joins</strong> - getting them implemented in Synapse and Dendrite</li>
<li><strong>Peeking over federation</strong> - getting them implemented in Synapse and Dendrite</li>
<li><strong>Extensible profiles</strong> - who needs a facebook wall when you have a profile room on Matrix?</li>
<li><strong>Open ID Connect</strong> - using OIDC as an alternative auth mechanism for new clients.</li>
</ul>
</li>
<li><strong>Gitter parity</strong>
<ul>
<li><strong>Importing the Gitter archives into Matrix</strong> via <a href="https://github.com/matrix-org/matrix-doc/pull/2716">MSC2716</a></li>
<li><strong>Implementing excellent public static Matrix archives</strong> (replacing both view.matrix.org and gitter.im‚Äôs static views)</li>
<li><strong>Transfiguring Gitter into a Gitter-themed Element</strong></li>
</ul>
</li>
<li><strong>Dendrite</strong>
<ul>
<li>**Parity with Synapse **- and out of beta, with any luck!</li>
</ul>
</li>
<li><strong>P2P Matrix</strong>
<ul>
<li><strong>Exposing the normal Matrix network via P2P!</strong></li>
<li><strong>Multihomed accounts</strong></li>
<li><strong>Store and forward</strong> (if only by relaying via other P2P Matrix nodes)</li>
<li>**Low bandwidth transports **- via PineCoAP or similar</li>
<li><strong>Making federation robust in a highly disconnected network.</strong></li>
</ul>
</li>
<li><strong>Hydrogen</strong>
<ul>
<li>**Daily Driver **- making sure that Hydrogen can be readily used as a daily driver Matrix client, even if it lacks full parity with Element.</li>
<li>**Embeddable Hydrogen **- making the most of Hydrogen as a tiny lightweight PWA to embed it into existing websites.</li>
</ul>
</li>
<li><strong>Bots and Bridges</strong>
<ul>
<li>**Landing End-to-Bridge-Encryption **for all existing matrix-appservice-bridge based bridges</li>
<li><strong>All the integrations!</strong></li>
<li><strong>First-class UI for configuring integrations!</strong></li>
</ul>
</li>
<li><strong>Trust &amp; Safety</strong>
<ul>
<li><strong>Empower users to manage abuse within their communities</strong>.</li>
</ul>
</li>
<li><strong>Native Group Voice/Video Conferencing</strong>
<ul>
<li><strong>Launch a standalone conferencing app!</strong></li>
<li><strong>Build a <a href="https://github.com/matrix-org/matrix-doc/pull/3401">MSC3401</a>-capable SFU</strong></li>
<li><strong>Add native group calling to Element</strong></li>
</ul>
</li>
<li><strong>Border gateways</strong>
<ul>
<li>Something we didn‚Äôt mention in 2021 is the increasing interest in building border gateways and hardware cross domain gateways to safely link different Matrix federations together.  We expect to see a lot of activity in this space in 2022, and there should be some new MSCs too :)</li>
</ul>
</li>
<li><strong>Beyond Chat</strong>
<ul>
<li>**Metaverse on Matrix **- building out the dream as per above!</li>
<li>**Collaborative editing **- extending Matrix to store trees of events, and collaborate on them in realtime - starting with a collaborative editor!</li>
<li><strong>File storage in Matrix</strong> - building out real-life file storage on top of Matrix.</li>
</ul>
</li>
</ul>
<p>So, there you have it. If you‚Äôve got this far‚Ä¶ it‚Äôs incredible; you‚Äôre amazing: thank you for reading!  The sheer length of this update shows just how much Matrix has grown in 2021 relative to previous years; it‚Äôs frankly terrifying to imagine how long the equivalent post will be next year.  We may have to change the format a little :)</p>
<p>And that‚Äôs a wrap for 2021: we hope you stay safe and have an excellent end of the year.  Huge thanks for flying Matrix and supporting the project - we literally wouldn‚Äôt be here without you.</p>
<p>- Matthew, Amandine &amp; the whole Matrix core team.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2021&#x2F;12&#x2F;02&#x2F;call-for-participation-for-the-fosdem-2022-matrix-dev-room&#x2F;" title="Call for Participation for the FOSDEM 2022 Matrix Dev Room!">Call for Participation for the FOSDEM 2022 Matrix Dev Room!</a></h2>
                <span>
                    02.12.2021 00:00
                    ‚Äî
                    <a href="/category/general">
                        General
                    </a>
                    ‚Äî
                    <a
                        href="/author/thib">
                        Thib
                    </a>
                </span>
                
            </header>
            <div>
                
                <h2 id="a-full-day-of-matrix-talks">A full day of Matrix talks</h2>
<p>This year, the Matrix.org Foundation is excited to host the first ever <em>Matrix.org Foundation and Community</em> devroom at FOSDEM. A full day of talks, demos and workshops around Matrix itself and projects built on top of Matrix.</p>
<p>Matrix is the open source project that publishes the Matrix open standard for secure, decentralised, real-time communication, and its Apache licensed reference implementations.</p>
<p>We encourage people working on the Matrix protocol or building on it in an open source project to submit a proposal! Note that companies are welcome to talk about the Matrix details of their open source projects, but marketing talks are not welcome.</p>
<p>We want this devroom to be a space where the Matrix community can show its work, where developers can talk about the challenges they faced and how they overcame them, and where people can get a glimpse of the future of the Matrix protocol and ecosystem.</p>
<h2 id="talk-details">Talk Details</h2>
<p>The talks will be pre-recorded in January. They will be played during FOSDEM, followed by a session of live Q&amp;A depending on the format. During the playback of the talk, people will be able to comment and ask questions in the chat (via Matrix!).</p>
<p>The talks can follow one of three formats:</p>
<ul>
<li>5 min lightning talk, ideal to showcase your project and make people want to have a look at it</li>
<li>20 min talk + 10 min Q&amp;A, for topics that can be covered briefly</li>
<li>50 min talk + 10 min Q&amp;A for more complex subjects which need more focus</li>
</ul>
<p>We strongly encourage you to prepare a demo when it makes sense, so people can actually see what your work looks like in practice!</p>
<p>Of course, the proposal must respect the FOSDEM terms as well:</p>
<blockquote>
<p>The conference language is English. All content must relate to Free and Open Source Software. By participating in the event you agree to the publication of your recordings, slides and other content provided under the same licence as all FOSDEM content (CC-BY).</p>
</blockquote>
<h2 id="submitting-a-proposal">Submitting a Proposal</h2>
<p>Proposals must be <a href="https://penta.fosdem.org/submission/FOSDEM22">submitted on FOSDEM's conference management system Pentabarf</a> before December 17th 2021. If you are not used to Pentabarf, you can follow this <a href="https://eyskens.me/beginners-guide-to-pentabarf/">beginners guide to Pentabarf</a>.</p>
<p>We expect to receive more requests than we have slots available. The devroom organisers (two community members and one core team rep) will be reviewing the proposals and accepting them based on the potential positive impact the project has on Matrix (as defined in by the Mission section of https://matrix.org/foundation).</p>
<p>If a project proposal has been turned down, it doesn't mean we don't believe it has good potential. Maintainers are invited to join the <a href="https://matrix.to/#/#twim:matrix.org">#twim:matrix.org</a> Matrix room to give it some visibility.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2021&#x2F;07&#x2F;27&#x2F;element-raises-30m-to-boost-matrix&#x2F;" title="Element raises $30M to boost Matrix">Element raises $30M to boost Matrix</a></h2>
                <span>
                    27.07.2021 00:00
                    ‚Äî
                    <a href="/category/general">
                        General
                    </a>
                    ‚Äî
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi folks,</p>
<p>Big news today: Element, the startup founded by the team who created Matrix,
just raised $30M of Series B funding in order to further accelerate Matrix
development and improve Element, the flagship Matrix app. The round is led by
our friends at <a href="https://protocol.ai">Protocol Labs</a> and <a href="https://metaplanet.com">Metaplanet</a>,
the fund established by Jaan Tallinn (co-founder of
Skype and Kazaa).  Both Protocol Labs and Metaplanet are spectacularly on
board our decentralised communication quest, and you couldn't really ask for
a better source of funding to help take Matrix to the next level.  Thank you
for believing in Matrix and leading Element's latest funding!</p>
<p>You can read all about it from the Element perspective over at the
<a href="https://element.io/blog/element-raises-30m-as-matrix-explodes">Element Blog</a>,
but suffice it to say that this is enormous news for the Matrix ecosystem as a
whole.  In addition to transforming the Element app, on the Matrix side this
means that there is now concrete funding secured to:</p>
<ul>
<li>
<p>finish building out <a href="https://matrix.org/blog/2021/05/06/introducing-the-pinecone-overlay-network">P2P Matrix</a>
and get it live (including finishing Dendrite, given our P2P work builds on Dendrite!)</p>
</li>
<li>
<p>implement <a href="https://twitter.com/matrixdotorg/status/1419820122143961093">native decentralised E2EE voip/video conferencing</a> for Matrix</p>
</li>
<li>
<p>fully build out our
<a href="https://matrix.org/blog/2020/10/19/combating-abuse-in-matrix-without-backdoors">relative decentralised reputation system</a>
in order to combat abuse in Matrix.</p>
</li>
</ul>
<p>Obviously this is in addition to all the normal business-as-usual work going
on in terms of:</p>
<ul>
<li>getting <a href="https://element.io/blog/spaces-the-next-frontier/">Spaces</a> out of beta</li>
<li>adding Threading to Element (yes, it's finally happening!)</li>
<li>speeding up room joins over federation</li>
<li>creating 'sync v3' to lazy-load all content and make the API super-snappy</li>
<li>lots of little long-overdue fun bits and pieces (yes, custom emoji, we're looking at you).</li>
</ul>
<p>If you're wondering whether Protocol Labs' investment means that we'll be
seeing more overlap between <a href="https://ipfs.io">IPFS</a> and Matrix, then yes -
where it makes tech sense to do so, we're hoping to work more closely
together; for instance collaborating with the libp2p team on our P2P work
(we still need to experiment properly with gossipsub!), or perhaps giving
<a href="https://github.com/matrix-org/matrix-doc/blob/travis/msc/ipfs/proposals/2706-IPFS.md">MSC2706</a>
some attention.  However, there are no plans to use cryptocurrency incentives
in Matrix or Element any time soon.</p>
<p>So, exciting times ahead!  We'd like to inordinately thank everyone who has
supported Matrix over the years - especially our Patreon supporters, whose
donations pay for all the matrix.org infrastructure while inspiring others to
open their cheque books; the existing investors at Element (especially <a href="https://notion.vc">Notion</a>
and <a href="https://automattic.com">Automattic</a>, who have come in again on this round); all the large scale
Matrix deployments out there which are effectively turning Matrix into an
industry (hello <a href="https://matrix.org/blog/2021/07/21/germanys-national-healthcare-system-adopts-matrix">gematik!</a>) -
and everyone who has ever run a Matrix server, contributed code, used the
spec to make their own Matrix-powered creation, or simply chatted on Matrix.</p>
<p>Needless to say, Matrix wouldn't exist without you: the protocol and network
would have fizzled out long ago were it not for all the people supporting it
(the matrix.org server can now see over 35.5M addressable users on the
network!) - and meanwhile the ever-increasing energy of the community and the
core team combines to keep the protocol advancing forwards faster than ever.</p>
<p>We will do everything we possibly can to succeed in creating the long-awaited
secure communication layer of the open Web, and we look forward to large
amounts of Element's new funding being directed directly into core Matrix
development :)</p>
<p>thanks for flying Matrix,</p>
<p>Matthew, Amandine &amp; the whole Matrix core team.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2021&#x2F;07&#x2F;21&#x2F;germany-s-national-healthcare-system-adopts-matrix&#x2F;" title="Germany‚Äôs national healthcare system adopts Matrix!">Germany‚Äôs national healthcare system adopts Matrix!</a></h2>
                <span>
                    21.07.2021 15:30
                    ‚Äî
                    <a href="/category/general">
                        General
                    </a>
                    ‚Äî
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi folks,</p>
<p>We‚Äôre incredibly excited to officially announce that the national agency for
the digitalisation of the healthcare system in Germany (<a href="http://gematik.de">gematik</a>)
has selected Matrix as the open standard on which to base all its
interoperable instant messaging standard - the TI-Messenger.</p>
<p>gematik has released a <a href="https://fachportal.gematik.de/anwendungen/ti-messenger">concept paper</a>
that explains the initiative in full.</p>
<h2 id="tl-dr">TL;DR</h2>
<p>With the TI-Messenger, gematik is creating a nationwide decentralised private
communication network - based on Matrix - to support potentially more than
<strong>150,000</strong> healthcare organisations within Germany‚Äôs national healthcare system.
It will provide end-to-end encrypted VoIP/Video and messaging for the whole
healthcare system, as well as the ability to share healthcare based data,
images and files.</p>
<p>Initially every healthcare provider (HCP) with an HBA (HPC ID card) will be
able to choose their own TI-Messenger provider. The homesever for HCP
accounts will be hosted by the provider‚Äôs datacentre. The homeserver for
institutions can be hosted by TI-Messenger providers, or on-premise.</p>
<p>Each organisation and individual will therefore retain complete ownership and
control of their communication data - while being able to share it securely
within the healthcare system with end-to-end encryption by default. All
servers in the Matrix-based private federation will be hosted within
Germany.</p>
<p>Needless to say, security is key when underpinning the entire nation‚Äôs
healthcare infrastructure and safeguarding sensitive patient data. As such,
the entire implementation will be <a href="https://www.bsi.bund.de/EN/Home/home_node.html">accredited by BSI</a>
(Federal Office for Information Security) and <a href="https://www.bfdi.bund.de/DE/Home/home_node.html">BfDI</a>
(Federal Commissioner for Data Protection and Freedom of Information).</p>
<h2 id="the-full-context">The full context...</h2>
<p>Germany‚Äôs digital care modernisation law (‚ÄúDigitale Versorgung und Pflege
Modernisierungs Gesetz‚Äù or DVPMG), which came into force in June 2021, spells
out  the need for an instant messaging solution.</p>
<p>The urgency has increased by a significant rise in the use of instant
messaging and video conferencing within the healthcare system - for instance,
the amount of medical practices using messenger services doubled in 2020
compared to 2018 (much of this using insecure messaging solutions).</p>
<p><a href="https://www.gematik.de/">gematik</a>, majority-owned by Germany‚Äôs
<a href="https://www.bundesgesundheitsministerium.de/english-version.html">Federal Ministry of Health</a>,
is responsible for the standardised digital transformation of Germany‚Äôs
healthcare sector. It focuses on improving efficiency and introducing new
ways of working by setting, testing and certifying healthcare technology
including electronic health cards, electronic patient records and
e-prescriptions.</p>
<p><a href="https://www.gematik.de/anwendungen/ti-messenger/">TI-Messenger</a> is gematik‚Äôs
technical specification for an interoperable secure instant messaging
standard. The healthcare industry will be able to build a wide range of apps
based on TI-Messenger specifications knowing that, being built on Matrix, all
those apps will interoperate.</p>
<p>More than 150,000 organisations - ranging from local doctors to clinics,
hospitals, and insurance companies - can potentially standardise on instant
messaging thanks to gematik‚Äôs TI-Messenger initiative.</p>
<h2 id="the-road-to-interoperability">The road to interoperability</h2>
<p>By 1 October 2021, TI-Messenger will initially specify how communication
should work in practice between healthcare professionals (HCPs). Physicians
will be able to find and communicate with each other via TI-Messenger
approved apps - specifications include secure authentication mechanisms with
electronic health professional cards (eHBAs), electronic institution cards
(SMC-B) and a central <a href="https://hl7.org/FHIR/">FHIR</a> directory. The first
compliant apps for HCPs are expected to be licensed by Q2 2022.</p>
<p>Eric Grey (product manager for TI-Messenger at gematik), reckons there will
initially be around 10-15 TI-Messenger compliant Matrix-based apps for HCP
communications available from different vendors. </p>
<p>Healthcare professionals will be able to choose a TI-Messenger provider, who
will be hosting their personal accounts and provide the messenger-client. </p>
<p>Healthcare organisations will choose a TI-Messenger provider to build the
dedicated homeserver infrastructure (on prem or in a data center), provide
the client and ongoing support.</p>
<h2 id="what-does-this-mean-for-the-matrix-community">What does this mean for the Matrix community?</h2>
<p>Matrix is already integral to huge parts of the public sector; from the French
government‚Äôs Tchap platform, to Bundeswehr‚Äôs use of BwMessenger and adoption
by universities and schools across Europe. </p>
<p>Germany‚Äôs healthcare system standardising on Matrix takes this to entirely the
next level - and we can‚Äôt wait to see the rest of Europe (and the world!)
converge on Matrix for healthcare!</p>
<p>We'll have more info about TI-Messenger on this week's Matrix Live, out on
Friday - stay tuned!</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2021&#x2F;05&#x2F;19&#x2F;how-the-uk-s-online-safety-bill-threatens-matrix&#x2F;" title="How the UK&#x27;s Online Safety Bill threatens Matrix">How the UK&#x27;s Online Safety Bill threatens Matrix</a></h2>
                <span>
                    19.05.2021 15:47
                    ‚Äî
                    <a href="/category/tech">
                        Tech
                    </a>
                    ‚Äî
                    <a
                        href="/author/denise-almeida">
                        Denise Almeida
                    </a>
                </span>
                <br>
                <small>Last update: 19.05.2021 14:48</small>
            </header>
            <div>
                
                <p>Last week the UK government published a <a href="https://www.gov.uk/government/publications/draft-online-safety-bill">draft of the proposed Online Safety
Bill,</a>
after having initially introduced <a href="https://www.gov.uk/government/consultations/online-harms-white-paper/public-feedback/online-harms-white-paper-initial-consultation-response">formal proposals for said bill in early
2020</a>.
With this post we aim to shed some light on its potential impacts and explain
why we think that this bill - despite having great intentions - may actually
be setting a dangerous precedent when it comes to our rights to privacy,
freedom of expression and self determination.</p>
<p>The proposed bill aims to provide a legal framework to address illegal and
harmful content online. This focus on ‚Äúnot illegal, but harmful‚Äù content is at
the centre of our concerns - it puts responsibility on organisations
themselves to arbitrarily decide what might be harmful, without any legal
backing. The bill itself does not actually provide a definition of harmful,
instead relying on service providers to assess and decide on this. This
requirement to identify what is ‚Äúlikely to be harmful‚Äù applies to all users,
children and adults. Our question here is - would you trust a service provider
to decide what might be harmful to you and your children, with zero input from
you as a user?</p>
<p>Additionally, the bill incentivises the use of privacy-invasive age
verification processes which come with their own set of problems. This
complete disregard of people‚Äôs right to privacy is a reflection of the
privileged perspectives of those in charge of the drafting of this bill, which
fails to acknowledge how <em>actually</em> harmful it would be for certain groups of
the population to have their real life identity associated with their online
identity.</p>
<p>Our view of the world, and of the internet, is largely different from the one
presented by this bill. Now, this categorically does not mean we don‚Äôt care
about online safety (it is quite literally our bread and butter) - we just
fundamentally disagree with the approach taken.</p>
<p>Whilst we sympathise with the government‚Äôs desire to show action in this space
and to do something about children‚Äôs safety (everyone‚Äôs safety really), we
cannot possibly agree with the methods.</p>
<p>Back in October of 2020 we presented <a href="https://matrix.org/blog/2020/10/19/combating-abuse-in-matrix-without-backdoors">our proposed approach to online safety</a> -
ironically also in response to a government proposal, albeit about encryption
backdoors. In it, we briefly discussed the dangers of absolute determinations
of morality from a single cultural perspective:</p>
<blockquote>
<p><a href="https://matrix.org/blog/2020/10/19/combating-abuse-in-matrix-without-backdoors">As uncomfortable as it may be, one man‚Äôs terrorist is another man‚Äôs freedom fighter, and different jurisdictions have different laws - and it‚Äôs not up to the Matrix.org Foundation to play God and adjudicate.</a></p>
</blockquote>
<p>We now find ourselves reading a piece of legislation that essentially demands
these determinations from tech companies. The beauty of the human experience
lies with its diversity and when we force technology companies to make calls
about what is right or wrong - or what is ‚Äúlikely to have adverse
psychological or physical impacts‚Äù on children - we end up in a dangerous
place of centralising and regulating relative morals. Worst of all, when the
consequence of getting it wrong is criminal liability for senior managers what
do we think will happen?</p>
<p>Regardless of how omnipresent it is in our daily lives, technology is still
not a solution for human problems. Forcing organisations to be judge and jury
of human morals for the sake of ‚Äúfree speech‚Äù will, ironically, have severe
consequences on free speech, as risk profiles will change for fear of
liability.</p>
<p>Forcing a ‚Äúduty of care‚Äù responsibility on organisations which operate online
will not only drown small and medium sized companies in administrative tasks
and costs, it will further accentuate the existing monopolies by Big Tech.
Plainly, Big Tech can afford the regulatory burden - small start-ups can‚Äôt.
Future creators will have their wings clipped from the offset and we might
just miss out on new ideas and projects for fear of legal repercussions. This
is a threat to the technology sector, particularly those building on emerging
technologies like Matrix. In some ways, it is a threat to democracy and some
of the freedoms this bill claims to protect.</p>
<p>These are, quite frankly, steps towards an authoritarian dystopia. If Trust &amp;
Safety managers start censoring something as natural as a nipple on the off
chance it might cause ‚Äúadverse psychological impacts‚Äù on children, whose
freedom of expression are we actually protecting here?</p>
<p>More specifically on the issue of content moderation: the <a href="https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/985283/Draft_Online_Safety_Bill_-_Impact_Assessment_Web_Accessible.pdf">impact assessment
provided by the government alongside this
bill</a>
predicts that the additional costs for companies directly related to the bill
will be in the billions, over the course of 10 years. The cost for the
government? ¬£400k, in every proposed policy option. Our question is - why are
these responsibilities being placed on tech companies, when evidently this is
a societal problem?</p>
<p>We are not saying it is up to the government to single-handedly end the
existence of Child Sexual Abuse and Exploitation (CSAE) or extremist content
online. What we are saying is that it takes more than content filtering, risk
assessments and (faulty) age verification processes for it to end. More
funding for tech literacy organisations and schools, to give children (and
parents) the tools to stay safe is the first thing that comes to mind. Further
investment in law enforcement cyber units and the judicial system, improving
tech companies‚Äô routes for abuse reporting and allowing the actual judges to
do the judging seems pretty sensible too. What is absolutely egregious is the
degradation of the digital rights of the majority, due to the wrongdoings of a
few.</p>
<p>Our goal with this post is not to be dramatic or alarmist. However, we want to
add our voices to the countless <a href="https://www.openrightsgroup.org/blog/online-abuse-why-management-liability-isnt-the-answer/">digital rights
campaigners</a>,
individuals and organisations that have been raising the alarm since the early
days of this bill. Just like with coercive control and abuse, the degradation
of our rights does not happen all at once. It is a slippery slope that starts
with something as (seemingly) innocuous as <a href="https://twitter.com/matthew_d_green/status/1392823038920564736">mandatory content scanning for
CSAE content and ends with authoritarian surveillance
infrastructure</a>.
It is our duty to put a stop to this before it even begins.</p>
<small style="display: block; text-align: right">
Twitter card image credit from <a href="https://film-grab.com/2010/10/04/brazil/#bwg644/39614">Brazil</a>, which feels all too familiar right now.
</small>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2021&#x2F;05&#x2F;17&#x2F;the-matrix-space-beta&#x2F;" title="The Matrix Space Beta!">The Matrix Space Beta!</a></h2>
                <span>
                    17.05.2021 17:50
                    ‚Äî
                    <a href="/category/tech">
                        Tech
                    </a>
                    ‚Äî
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                <br>
                <small>Last update: 17.05.2021 17:35</small>
            </header>
            <div>
                
                <p>Hi all,</p>
<p>As many know, over the years we've experimented with how to let users locate
and curate sets of users and rooms in Matrix. <a href="https://medium.com/@RiotChat/communities-aka-groups-are-here-announcing-riot-web-0-13-riot-ios-0-6-and-riot-android-0-7-4-933cb193a28e">Back in Nov
2017</a>
we added 'groups' (aka 'communities') as a custom mechanism for this -
introducing identifiers beginning with a + symbol to represent sets of rooms
and users, like <a href="https://matrix.to/#/+matrix:matrix.org">+matrix:matrix.org</a>.</p>
<p>However, it rapidly became obvious that Communities had some major
shortcomings.  They ended up being an extensive and entirely new API surface
(designed around letting you dynamically bridge the membership of a group
through to a single source of truth like LDAP) - while in practice groups
have enormous overlap with rooms: managing membership, inviting by email,
access control, power levels, names, topics, avatars, etc.  Meanwhile the
custom groups API re-invented the wheel for things like pushing updates
to the client (causing a whole suite of
<a href="https://github.com/vector-im/element-web/issues/5235">problems</a>).  So clients
and servers alike ended up reimplementing large chunks of similar
functionality for both rooms and groups.</p>
<p>And so almost before Communities were born, we started thinking about whether
it would make more sense to model them as a special type of room, rather than
being their own custom primitive.
<a href="https://github.com/matrix-org/matrix-doc/issues/1215">MSC1215</a> had the first
thoughts on this in 2017, and then a formal proposal emerged at
<a href="https://github.com/matrix-org/matrix-doc/pull/1772">MSC1772</a> in Jan 2019. We
started working on this in earnest at the end of 2020, and christened the new
way of handling groups of rooms and users as... Spaces!</p>
<p>Spaces work as follows:</p>
<ul>
<li>You can designate specific rooms as 'spaces', which contain other rooms.</li>
<li>You can have a nested hierarchy of spaces.</li>
<li>You can rapidly navigate around that hierarchy using the new 'space summary'
(aka space-nav) API - <a href="https://github.com/matrix-org/matrix-doc/blob/kegan/spaces-summary/proposals/2946-spaces-summary.md">MSC2946</a>.</li>
<li>Spaces can be shared with other people publicly, or invite-only, or private
for your own curation purposes.</li>
<li>Rooms can appear in multiple places in the hierarchy.</li>
<li>You can have 'secret' spaces where you group your own personal rooms and
spaces into an existing hierarchy.</li>
</ul>
<p>Today, we're ridiculously excited to be launching Space support as a beta in
matrix-react-sdk and matrix-android-sdk2 (and thus Element Web/Desktop and
Element Android) and Synapse
<a href="https://matrix.org/blog/2021/05/17/synapse-1-34-0-released">1.34.0</a> - so head
over to your nearest Element, make sure it's connected to the latest Synapse
(and that Synapse has Spaces enabled in its config) and find some Space to
explore! <a href="https://matrix.to/#/#community:matrix.org">#community:matrix.org</a>
might be a good start :)</p>
<p>The beta today gives us the bare essentials: and we haven't yet finished
space-based access controls such as setting powerlevels in rooms based on
space membership
(<a href="https://github.com/matrix-org/matrix-doc/blob/matthew/msc2962/proposals/2962-spaces-access-control.md">MSC2962</a>)
or limiting who can join a room based on their space membership
(<a href="https://github.com/matrix-org/matrix-doc/blob/clokep/restricted-rooms/proposals/3083-restricted-rooms.md">MSC3083</a>) -
but these will be coming asap.  We also need to figure out how to implement
Flair on top of Spaces rather than Communities.</p>
<p>This is also a bit of a turning point in Matrix's architecture: we are now
using rooms more and more as a generic way of modelling new features in
Matrix.  For instance, rooms could be used as a structured way of storing
files (<a href="https://github.com/matrix-org/matrix-doc/pull/3089">MSC3089</a>);
Reputation data
(<a href="https://github.com/matrix-org/matrix-doc/pull/2313">MSC2313</a>) is stored in
rooms; Threads can be stored in rooms
(<a href="https://github.com/matrix-org/matrix-doc/pull/2836">MSC2836</a>); Extensible
Profiles are proposed as rooms too
(<a href="https://github.com/matrix-org/matrix-doc/pull/1769">MSC1769</a>).  As such,
this pushes us towards ensuring rooms are as lightweight as possible in Matrix -
and that things like sync and changing profile scale independently of the
number of rooms you're in.  Spaces effectively gives us a way of creating a
global decentralised filesystem hierarchy on top of Matrix - grouping the
existing rooms of all flavours into an epic multiplayer tree of realtime data.
It's like USENET had a baby with the Web!</p>
<p>For lots more info from the Element perspective, head over to the <a href="https://element.io/blog/p/4ff44807-fe9a-4363-8521-9eab7efd4365/">Element
blog</a>. 
Finally, the point of the beta is to gather feedback and fix bugs - so please
go wild in Element reporting your first impressions and help us make Spaces as
awesome as they deserve to be!</p>
<p>Thanks for flying Matrix into Space;</p>
<p>Matthew &amp; the whole Spaces (and Matrix) team.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2021&#x2F;02&#x2F;15&#x2F;how-we-hosted-fosdem-2021-on-matrix&#x2F;" title="How we hosted FOSDEM 2021 on Matrix">How we hosted FOSDEM 2021 on Matrix</a></h2>
                <span>
                    15.02.2021 00:00
                    ‚Äî
                    <a href="/category/general">
                        General
                    </a>
                    ‚Äî
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>Just over a week ago we had the honour of using Matrix to host FOSDEM: the world's largest free &amp; open source software conference.  It's taken us a little while to write up the experience given we had to recover and catch up on business as usual... but better late than never, here's an overview of what it takes to run a ~30K attendee conference on Matrix!</p>
<p><img src="/blog/img/upload_5335e89b9ca474d844bdc37ea328967b.png" alt="" /><small><center><em>[confetti and firework easter-eggs explode over the closing keynote of FOSDEM 2021]</em></center></small></p>
<p>First of all, a quick (re)introduction to Matrix for any newcomers: Matrix is an open source project which defines an open standard protocol for decentralised communication.  The global Matrix network makes up at least 28M Matrix IDs spread over around 60K servers.  For FOSDEM, we set up a fosdem.org server to host newcomers, provided by <a href="https://ems.element.io">Element Matrix Services (EMS)</a> - <a href="https://element.io">Element</a> being the startup formed by the Matrix core team to help fund Matrix development.</p>
<p>The most unique thing about Matrix is that conversations get replicated across all servers whose users are present in the conversation, so there's never a single point of control or failure for a conversation (much as git repositories get replicated between all contributors).  And so hosting FOSDEM in Matrix meant that everyone already on Matrix (including users bridged to Matrix from IRC, XMPP, Slack, Discord etc) could attend directly - in addition to users signing up for the first time on the FOSDEM server.  Therefore the chat around FOSDEM 2021 now exists for posterity on all the Matrix servers whose users who participated; and we hope that the fosdem.org server will hang around for the benefit of all the newcomers for the foreseeable so they don't lose their accounts!</p>
<p>Talking of which: the vital stats of the weekend were as follows:</p>
<ul>
<li>We saw almost 30K local users on the FOSDEM server + 4K remote users from elsewhere in Matrix.</li>
<li>There were 24,826 guests (read-only invisible users) on the FOSDEM server.</li>
<li>There were 8,060 distinct users actively joined to the public FOSDEM rooms...</li>
<li>...of which 3,827 registered on the FOSDEM server.  (This is a bit of an eye-opener: over 50% of the actively participating attendees for FOSDEM were already on Matrix!)</li>
<li>These numbers don't count users who were viewing the livestreams directly, but only those who were attending via Matrix.</li>
</ul>
<p>Given last year's FOSDEM had roughly 8,500 in-person attendees at the Universit√© libre de Bruxelles, this feels like a pretty good outcome :)</p>
<p>Graphwise, local user activity on the FOSDEM server looked like this:</p>
<p><img src="/blog/img/upload_e24e0febde0118ea9f2e93005d926d48.png" alt="" />
<img src="/blog/img/upload_63bad29ebc4d672d9979f9eea48fcfc5.png" alt="" /></p>
<h2 id="how-was-it-built">How was it built?</h2>
<p>There were four main components on the Matrix side:</p>
<ol>
<li>A horizontally-scalable Matrix server deployment (Synapse hosted in <a href="https://ems.element.io">EMS</a>)</li>
<li>A Jitsi cluster for the video conferencing, used to host all the Q&amp;A sessions, hallway sessions, stands, and other adhoc video conferences</li>
<li>An elastically scalable Jibri cluster used to livestream the Jitsi conferences both to the official FOSDEM livestreams and to provide a local preview of the conference on Matrix (to avoid the Jitsis getting overloaded with folks who just want to view)</li>
<li><a href="https://github.com/matrix-org/conference-bot">conference-bot</a> - a Matrix bot which orchestrated the overall conference on Matrix, written from scratch for FOSDEM by <a href="https://matrix.to/#/@travis:t2l.io">TravisR</a>, consuming the schedule from FOSDEM and maintaining all the necessary rooms with the correct permissions, widgets, invites, etc.</li>
</ol>
<p>Architecturally, it looked like this:</p>
<p><img src="/blog/img/upload_06b59bc2b2d518ffe616020e1fe5bee8.png" alt="" /></p>
<p>On the clientside, we made heavy use of widgets: the ability to embed arbitrary web content as iframes into Matrix chatrooms. (Widgets currently exist as a set of <a href="https://matrix.org/docs/spec/proposals">proposals</a> for the Matrix spec, which have been preemptively implemented in Element.)</p>
<p>For instance, the conference-bot created Matrix rooms for all the FOSDEM devrooms with a predefined widget for viewing the official FOSDEM livestream for that room, pointing at the appropriate HLS stream at stream.fosdem.org - which looked like this:</p>
<p><img src="/blog/img/upload_07145dc9cf8d5ae22b6eaf91a63dd8d6.jpg" alt="" /></p>
<p>Each devroom also had a schedule widget available on the righthand side, visualising the schedule of that room - huge thanks to Hato and Steffen and folks at <a href="https://nordeck.net/">Nordeck</a> for putting this together at the last minute; it enormously helped navigate the devrooms (and even had a live countdown to help you track where you were at in the schedule!)</p>
<p>Each devroom was also available via IRC on Freenode via a dedicated bridge (#fosdem-...) and via XMPP.</p>
<p>The bot also created rooms for each and every talk at FOSDEM (all 666 of them), as the space where the speaker and host could hang out in advance; watch the talk together, and then broadcast the Q&amp;A session.  At the end of the talk slot, the bot then transformed the talk room into a 'hallway' for the talk, and advertised it to the audience in the devroom, so folks could pose follow-on questions to the speaker as so often happens in real life at FOSDEM.  The speaker's view of the talk rooms looked like this:</p>
<p><img src="/blog/img/upload_f8b9121b21323955233d6633d19e3fb5.jpg" alt="" /></p>
<p>On the right-hand side you can see a &quot;scoreboard&quot; - a simple widget which tracked which messages in the devroom had been most upvoted, to help select questions for the Q&amp;A session.  On the left-hand side you can see a hybrid Jitsi/livestream widget used to coordinate between the speaker &amp; host.  By default, the widget showed the local livestream of the video call - if you clicked 'join conference' you'd join the Jitsi itself.  This stopped view-only users from overloading the Jitsi once the room became public.</p>
<p>The widgets themselves were hosted by the bot (you can see them at https://github.com/matrix-org/conference-bot/tree/main/web).  Meanwhile the chat.fosdem.org webclient itself ended up being identical to mainline Element Web 1.7.19, other than FOSDEM branding and being configured to hook the 'video call' button up to the hybrid Jitsi/livestream widget rather than a plain Jitsi.</p>
<p>Meanwhile, for conferencing we hosted an off-the-shelf Jitsi cluster sized to ~100 concurrent conferences, and for the Jibri livestreaming we set up an elastic scalable cluster using AWS Auto Scaling Groups.  Jibri is essentially a Chromium which views the Jitsi webapp, running in a headless X server whose framebuffer and ALSA audio is hooked up to an ffmpeg process which livestreams to the appropriate destination - so we chose to run a separate VM for every concurrent livestream to keep them isolated from each other.  The Jibri ffmpegs compressed the livestream to RTMP and relayed it to our nginx, which in turn relayed it to FOSDEM's livestreaming infrastructure for use in the official stream, as well as relaying it back to the local video preview in the Matrix livestream/video widget.</p>
<p>Here's a screengrab of the Jitsi/Jibri Grafana dashboard during the first day of the conference, showing 46 concurrent conferences in action, with 25 spare jibris in the scaling group cluster ready for action if needed :)</p>
<p><img src="/blog/img/upload_1dfb1ef630c0ac8f5b3fd81f52491964.png" alt="" /></p>
<p>There was also an explosion of changes to Element itself to try to make things go as smoothly as possible.  Probably the most important one was implementing Social Login - giving single-click registration for attendees who were happy to piggyback on existing identity providers (GitHub, GitLab, Google, Apple and Facebook) rather then signing up natively in Matrix:</p>
<p><img src="/blog/img/upload_45b228cf122b2faedfca5e36b6d52576.png" alt="" /></p>
<p>This was a real epic to get together (and is also an important part of <a href="https://matrix.org/blog/2020/12/07/gitter-now-speaks-matrix">achieving parity</a> between Gitter and Element) - and seems to have been surprisingly successful for FOSDEM.  Almost 50% of users who signed up on the FOSDEM server did so via social login!  We should also be turning it on for the matrix.org server this week.</p>
<p>Finally, on the Matrix server side, we ran a cluster of synapse worker processes (1 federation inbound, reader and sender, 1 pusher, 1 initial sync worker, 10 synchrotrons, 1 event persister, 1 event creator, 4 general purpose client readers, 1 typing worker and 1 user directory) within Kubernetes on <a href="https://ems.element.io">EMS</a>.  These were hooked up for <a href="https://matrix.org/blog/2020/11/03/how-we-fixed-synapses-scalability/">horizontal scalability</a> as follows:</p>
<p><img src="/blog/img/upload_22b8ea14fff89c1bce93767b82ab1db5.png" alt="" /></p>
<p>The sort of traffic we saw (from day 2) looked like this:</p>
<p><img src="/blog/img/upload_42c22d9a51988d1bd28a17b814fd3859.png" alt="" />
<img src="/blog/img/upload_d2bd3f14d1ac53e5177152d48b8808e0.png" alt="" />
<img src="/blog/img/upload_08a75cf1588657a935d3801c3f346886.png" alt="" />
<img src="/blog/img/upload_5b7b327bbc4f633263daeaa6bbf54743.png" alt="" /></p>
<h2 id="how-did-it-go">How did it go?</h2>
<p>Overall, people seem to have had a good time.  Some folks have <a href="https://twitter.com/haerwu/status/1358731829512183813">even</a> been <a href="https://twitter.com/AxSaucedo/status/1358048849944797187">kind</a> enough to call it the <a href="https://twitter.com/cterboven/status/1358343020576440322">best</a> online event they've been to :)  This probably reflects the fact that FOSDEM rocks no matter what - and that Matrix is an inherently social medium, built by and for open source communities (after all, the whole Matrix ecosystem is developed over Matrix!).  Also, Matrix being an open network means that folks could join from all over, so the social dynamics already present in Matrix spilled over into FOSDEM - and we even saw a bunch of people spin up their own servers to participate; literally sharing the hosting responsibility themselves.  Finally, having critical infrastructure rooms available such as <a href="https://matrix.to/#/#beerevent:fosdem.org">#beerevent:fosdem.org</a>, <a href="https://matrix.to/#/#cafe:fosdem.org">#cafe:fosdem.org</a> and <a href="https://matrix.to/#/#food-trucks:fosdem.org">#food-trucks:fosdem.org</a> <a href="https://twitter.com/bortzmeyer/status/1358022989875466240">probably</a> helped as well.</p>
<p>That said, we did have some production incidents which impacted the event.  The most serious one was on Saturday morning, where it transpired that some of the endpoints hosted on the main Synapse process were taking way more CPU than we'd anticipated - most importantly the /groups endpoints which handle traffic relating to communities (the legacy way of defining groups of rooms in Matrix).  One of the last things we'd done to prepare for the conference on Friday night was to create a +fosdem:fosdem.org community which spanned all 1000 public rooms in the conference, as well as add the +staff:fosdem.org community to all of those rooms - and unfortunately we didn't anticipate how popular these would be.  As a result we had to do some emergency rebalancing of endpoints, spinning up new workers and reconfiguring the loadbalancer to relieve load off the main process.</p>
<p>Ironically the Matrix server was largely working okay during this timeframe, given event-sending no longer passes through the main process - but the most serious impact was that the conference bot was unable to boot due to hitting a wide range of endpoints on startup as it syncs with the conference, some of which were timing out.  This in turn impacted widgets, which had been hosted by the bot for convenience, meaning that the Jitsi conferences for stands and talk Q&amp;A were unavailable (even though the Jitsi/Jibri cluster was fine).  This was solved by lunchtime on Saturday: we are really sorry for folks whose Q&amp;As or conferences got caught in this.  On the plus side, we spotted that many affected rooms just added their own widgets for their own Jitsis or BBBs to continue with minimal distraction - effectively manually taking over from the bot.</p>
<p>The other main incident was briefly first thing on Sunday morning, where two Jibri livestreams ended up trying to broadcast video to the same RTMP URL (potentially due to a race when rapidly removing and re-adding the jitsi/livestream widget for one of the stands).  This caused a cascading failure which briefly impacted all RTMP streams, but was solved within about 30 minutes.  We also had a more minor problem with the active speaker recognition malfunctioning in Jitsi on Sunday (apparently a risk when using SCTP rather than Websockets as a transport within Jitsi) - this was solved around lunchtime.  Again, we're really sorry if you were impacted by this.  We've learned a lot from the experience, and if we end up doing this again we will make sure these failure modes don't repeat!</p>
<p>Other things we'd change if we have the chance to do it again include:</p>
<ul>
<li>Providing a to-the-second countdown via a widget in the talk room so the speaker &amp; host can see precisely when they're going 'live' in the devroom (and when precisely they're going to be cut in favour of the next talk)</li>
<li>Providing a scratch-pad of some kind in the talk room so the host &amp; speaker can track which questions they want to answer, and which they've already answered</li>
<li>Keep the questions scoreboard and scratchpad visible to the speaker/host after their Q&amp;A has finished so they can keep answering the questions in the per-talk room, and advertise the per-talk room more effectively.</li>
<li>Use Spaces rather than Communities to group the rooms together and automatically provide a structured room directory! (<a href="https://youtu.be/TzUfS08lMek?t=1609">Like this!</a>)</li>
<li>Use threads (once they land!) to help structure conversations in the devroom (perhaps these could even replace the hallway rooms?)</li>
<li>Make the schedule widgets easier to find, and have more of them around the place</li>
<li>Make room directory easier to find.</li>
<li>Give the option of recording the video in the per-talk and stands for posterity</li>
<li>Provide more tools to stands to help organise demos etc.</li>
</ul>
<p>So, there you have it.  We hope that this shows that it's possible to host successful large-scale conferences on Matrix using an <a href="https://sfconservancy.org/blog/2021/feb/08/just-say-no-to-zoom/">entirely open source stack</a>, and we hope that other events will be inspired to go online via Matrix!  We should give a big shout out to <a href="https://hope.net">HOPE</a>, who independently trailblazed running conferences on Matrix last year and <a href="https://hackaday.com/2020/08/11/hope-2020-delivers-historic-marathon-of-hacking/">inspired us</a> to make FOSDEM work.</p>
<p>If you want to know more, we also did a talk about FOSDEM-on-Matrix in this month's <a href="https://youtu.be/Wp2rSyqZsbs?t=4903">Open Tech Will Save Us</a> meetup and the <a href="https://www.youtube.com/watch?v=TzUfS08lMek">Building Massive Virtual Communities on Matrix</a> talk at FOSDEM went into more detail too.  Our historical <a href="https://matrix.org/blog/2021/01/04/taking-fosdem-online-via-matrix">Taking FOSDEM online via Matrix</a> blog has been somewhat overtaken by events but gives further context still.</p>
<p>Finally, huge thanks to FOSDEM for letting Matrix host the social side of the conference.  This was a big bet, starting from scratch with our <a href="https://twitter.com/matrixdotorg/status/1301285515774373889">offer to help</a> back in September, and we hope it paid off.  Also, thanks to all the folks at Element who bust a gut to pull it together - and to the FOSDEM organisers, who were a real pleasure to work with.</p>
<p>Let's hope that FOSDEM 2022 will be back in person at ULB - but whatever happens, the infrastructure we built this year will be available if ever needed in future.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2021&#x2F;01&#x2F;04&#x2F;taking-fosdem-online-via-matrix&#x2F;" title="Taking FOSDEM online via Matrix">Taking FOSDEM online via Matrix</a></h2>
                <span>
                    04.01.2021 12:25
                    ‚Äî
                    <a href="/category/general">
                        General
                    </a>
                    ‚Äî
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <div style="text-align: center; padding-bottom: 1em">
<a href="https://fosdem.org">
    <img src="/blog/img/2021-01-04-fosdem.jpg" alt="FOSDEM" width="480"/>
</a>
</div>
<p>Imagine you could physically step into your favourite FOSS projects‚Äô chatrooms, mailing lists or forums and talk in person to other community members, contributors or committers?  Imagine you could see project leads show off their latest work in front of a packed audience, and then chat and brainstorm with them afterwards (and maybe grab a beer)?  Imagine, as a developer, you could suddenly meet a random subset of your users, to hear and understand their joys and woes in person?</p>
<p>This is <a href="https://fosdem.org">FOSDEM</a>, Europe‚Äôs largest Free and Open Source conference, where every year thousands of people (last year, ~8,500) take over the Solbosch campus of the Universit√© Libre de Bruxelles in Belgium for a weekend and turn it into both a cathedral and bazaar for FOSS, with over 800+ talks organised over 50+ tracks, hundreds of exhibitor stands, and the whole campus generally exploding into a physical manifestation of the Internet.  The event is completely non-commercial and volunteer run, and is a truly unique and powerful (if slightly overwhelming!) experience to attend.  Ever since we began Matrix in 2014, FOSDEM has been <a href="https://matrix.org/blog/2020/02/03/matrix-at-fosdem-2020">the</a> <a href="https://matrix.org/blog/2019/02/04/matrix-at-fosdem-2019">focal</a> <a href="https://matrix.org/blog/2018/02/05/3-d-video-calling-with-matrix-webrtc-and-webvr-at-fosdem-2018">point</a> <a href="https://matrix.org/blog/2017/02/06/fosdem-2017-report">of</a> <a href="https://matrix.org/blog/2016/02/03/fosdem-16-retrospective">our</a> <a href="https://matrix.org/blog/2015/02/04/back-from-fosdem">year</a> as we‚Äôve rushed to demonstrate our latest work and catch up with the wider community and sync with other projects.</p>
<p>This year, things are of course different.  Thankfully FOSDEM 2020 snuck in a few weeks before the COVID-19 pandemic went viral, but for FOSDEM 2021 on Feb 6/7th the conference will inevitably happen online.  When this was announced <a href="https://twitter.com/fosdem/status/1301167254705303554">a few months back</a>, we reached out to FOSDEM to see if we could help: we‚Äôd just had a lot of fun helping <a href="https://hackaday.com/2020/08/11/hope-2020-delivers-historic-marathon-of-hacking/">HOPE go online</a>, and meanwhile a lot of the work that‚Äôs gone into Matrix and Element in 2020 has been around large-scale community collaboration due to COVID - particularly thanks to all the development driven by Element‚Äôs <a href="https://sifted.eu/articles/element-germany-deal/">German Education</a> work.  Meanwhile, we obviously love FOSDEM and want it to succeed as much as possible online - and we want to attempt to solve the impossible paradox of faithfully capturing the atmosphere and community of an event which is ‚Äúonline communities, but in person!‚Äù... but online.</p>
<p>And so, over the last few weeks we‚Äôve been hard at work with the FOSDEM team to figure out how to make this happen, and we wanted to give an update on how things are shaping up (and to hopefully reassure folks that things are on track, and that devrooms don‚Äôt need to make their own plans!).</p>
<p>Firstly, FOSDEM will have its own dedicated Matrix server at fosdem.org (hosted by <a href="https://element.io/matrix-services">EMS</a> along with a tonne of Jitsi‚Äôs) acting as the social backbone for the event.  Matrix is particularly well suited for this, because:</p>
<ul>
<li>We‚Äôre an <a href="https://matrix.org/docs/spec">open standard</a> comms protocol with an open network run under a <a href="https://matrix.org/foundation">non-profit foundation</a> with loads of <a href="https://matrix.org/docs/projects/try-matrix-now/">open source implementations</a> (including the reference ones): folks can jump on board and participate via their own servers, clients, bridges, bots etc.</li>
<li>We provide official bridges through to IRC and XMPP (and most other chat systems), giving as much openness and choice as possible - if folks want to participate via Freenode and XMPP they can!</li>
<li>We‚Äôre built with large virtual communities in mind (e.g. Mozilla, KDE, Matrix itself) - for instance, we‚Äôve worked a lot on <a href="https://matrix.org/docs/guides/moderation">moderation</a> recently.</li>
<li>We‚Äôve spent a lot of time improving <a href="https://youtu.be/Fk7YRiFIwZ4?t=251">widgets</a> recently: these give the ability to embed arbitrary webapps into chatrooms - letting you add livestreams, video conferences, schedules, Q&amp;A dashboards etc, augmenting a plain old chatroom into a much richer virtual experience that can hopefully capture the semantics and requirements of an event like FOSDEM. </li>
</ul>
<p>We‚Äôre currently in the middle of setting up the server with a dedicated <a href="https://element.io">Element</a> as the default client, but what we‚Äôre aiming for is:</p>
<ul>
<li>Attendees can lurk as read-only guests in devrooms without needing to set up accounts (or they can of course use their existing Matrix/IRC/XMPP accounts)</li>
<li>Every devroom and track will have its own chatroom, where the audience can hang out and view the livestream of that particular devroom (using the normal FOSDEM video livestream system).  There‚Äôll also be a ‚Äòbackstage‚Äô room per track for coordination between the devroom organisers and the speakers.</li>
<li>The talks themselves will be prerecorded to minimise risk of disaster, but each talk will have a question &amp; answer session at the end which will be a live Jitsi broadcast from the speaker and a host who will relay questions from the devroom.</li>
<li>Each talk will have a dedicated room too, where after the official talk slot the audience can pop in and chat to the speaker more informally if they‚Äôre available (by text and/or by moderated jitsi).  During the talk, this room will act as the ‚Äòstage‚Äô for the speaker &amp; host to watch the livestream and conduct the question &amp; answer session.</li>
<li>Every stand will also have its own chatroom and optional jitsi+livestream, as will BOFs or other adhoc events, so folks can get involved both by chat and video, to get as close to the real event as possible (although it‚Äôs unlikely we‚Äôll capture the unique atmospheric conditions of K building, which may or may not be a bug ;)</li>
<li>There‚Äôll also be a set of official support, social etc rooms - and of course folks can always create their own!  Unfortunately folks will have to bring their own beer though :(</li>
<li>All of this will be orchestrated by a Matrix bot (which is rapidly taking shape over at <a href="https://github.com/matrix-org/conference-bot">https://github.com/matrix-org/conference-bot</a>), responsible for orchestrating the hundreds of required rooms, setting up the right widgets and permissions, setting up bridges to IRC &amp; XMPP, and keeping everything in sync with the official live <a href="https://fosdem.org/2021/schedule/xml">FOSDEM schedule</a>.</li>
</ul>
<p><strong>N.B. This is aspirational, and is all still subject to change</strong>, but that said - so far it‚Äôs all coming together pretty well, and hopefully our next update will be opening up the rooms and the server so that folks can get comfortable in advance of the event.</p>
<p>Huge thanks go to the FOSDEM team for trusting us to sort out the social/chat layer of FOSDEM 2021 - we will do everything we can to make it as successful and as inclusive as we possibly can! :)</p>
<h2 id="p-s-we-need-help">P.S. We need help!</h2>
<p>FOSDEM is only a handful of weeks away, and we have our work cut out to bring this all together in time.  There are a few areas where we could really do with some help:</p>
<ul>
<li>Folks on XMPP often complain that the <a href="https://github.com/matrix-org/matrix-bifrost">Bifr√∂st</a> Matrix&lt;-&gt;XMPP bridge <a href="https://github.com/matrix-org/matrix-bifrost/issues/64">doesn‚Äôt support MAMs</a> - meaning that if XMPP users lose connection, they lose scrollback.  We‚Äôre not going to have time to fix this ourselves in time, so this would be a great time for XMPP folks who grok xmpp.js to come get involved and help to ensure the best possible XMPP experience!  (Similarly on other bifrost shortcomings).</li>
<li>It‚Äôd be really nice to be able to render nice schedule widgets for each devroom, and embed the overall schedule in the support rooms etc.  The current HTML schedules at <a href="https://fosdem.org/2021/schedule/day/saturday/">https://fosdem.org/2021/schedule/day/saturday/</a> and (say) <a href="https://fosdem.org/2021/schedule/room/vcollab/">https://fosdem.org/2021/schedule/room/vcollab/</a> don‚Äôt exactly fit - if someone could write a thing which renders them at (say) 2:5 aspect ratio so they can fit nicely down the side of a chatroom then that could be awesome!</li>
<li>While we‚Äôll bridge all the official rooms over to Freenode, it‚Äôd be even nicer if people could just hop straight into <em>any</em> room on the FOSDEM server (or beyond) via IRC - effectively exposing the whole thing as an IRC network for those who prefer IRC.  We have a project to do this: <a href="https://github.com/matrix-org/matrix-ircd">matrix-ircd</a>, but it almost certainly needs more love and polish before it could be used for something as big as this.  If you like Rust and know Matrix, please jump in and get involved! </li>
<li>If you just want to follow along or help out, then we‚Äôve created a general room for discussion over at <a href="https://matrix.to/#/#fosdem-matrix:fosdem.org">#fosdem-matrix:fosdem.org</a>.  It‚Äôd be awesome to have as many useful bots &amp; widgets as possible to help things along.</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;12&#x2F;25&#x2F;the-matrix-holiday-special-2020&#x2F;" title="The Matrix Holiday Special 2020">The Matrix Holiday Special 2020</a></h2>
                <span>
                    25.12.2020 00:00
                    ‚Äî
                    <a href="/category/general">
                        General
                    </a>
                    ‚Äî
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>Over the years it‚Äôs become a tradition to write an end-of-year wrap-up on Christmas Eve, reviewing all the things the core Matrix team has been up over the year, and looking forwards to the next (e.g. here‚Äôs <a href="https://matrix.org/blog/2019/12/24/the-2019-matrix-holiday-update">last year‚Äôs edition</a>).  These days there‚Äôs so much going on in Matrix it‚Äôs impossible to cover it all (and besides, we now have <a href="https://matrix.org/blog/category/this-week-in-matrix">This Week In Matrix</a> and better blogging in general to cover events as they happen).  So here‚Äôs a quick overview of the highlights:</p>
<p>Looking back at our <a href="https://matrix.org/blog/2019/12/24/the-2019-matrix-holiday-update#2020">plans for 2020</a> in last year‚Äôs wrap-up, amazingly it seems we pretty much achieved what we set out to do.  Going through the bulletpoints in order:</p>
<ul>
<li>We <a href="https://matrix.org/blog/2020/05/06/cross-signing-and-end-to-end-encryption-by-default-is-here">turned on End-to-end Encryption by default</a>.</li>
<li>We have a dedicated team making major improvements to First-Time User Experience in Element (as of the last few months; hopefully you‚Äôve been noticing the improvements!)</li>
<li><a href="https://element.io/blog/welcome-to-element/">RiotX became Element Android and shipped</a>.</li>
<li>Communities have been completely reinvented as <a href="https://youtu.be/_Ade0FZfnWo?t=39">Spaces</a> (<a href="https://github.com/matrix-org/matrix-doc/commits/matthew/msc1772/proposals/1772-groups-as-rooms.md">MSC1772</a>) and while in alpha currently, they should ship in Jan.</li>
<li><a href="https://matrix.org/blog/2020/11/03/how-we-fixed-synapses-scalability">Synapse scalability is fixed</a>: we now shard horizontally by event - and Synapse is now pretty much <a href="https://patrick.cloke.us/areweasyncyet/">entirely async/await</a>!</li>
<li><a href="https://matrix.org/blog/2020/10/08/dendrite-is-entering-beta/">Dendrite Beta shipped</a>, as did the <a href="https://matrix.org/blog/2020/06/02/introducing-p-2-p-matrix/">initial P2P Matrix experiments</a>, which have subsequently continued to evolve significantly (although we haven‚Äôt implemented <a href="https://github.com/matrix-org/matrix-doc/blob/rav/proposal/remove_mxids_from_events/proposals/1228-removing-mxids-from-events.md">MSC1228</a> or <a href="https://github.com/matrix-org/matrix-doc/blob/neilalexander/identities/proposals/2787-portable-identities.md">MSC2787</a> portable accounts yet). Check out the <a href="https://matrix.org/blog/2020/12/15/dendrite-2020-progress-update">Dendrite end-of-year update</a> for more.</li>
<li><a href="https://youtu.be/_Ade0FZfnWo?t=939">MLS experiments are in full swing</a> - we got the first MLS messages passing over Matrix a few days ago, and Decentralised MLS work is back on the menu after an initial sprint in May.</li>
<li>There‚Äôs been a valiant mission to improve Bridge UX in the form of <a href="https://github.com/matrix-org/matrix-doc/pull/2346">MSC2346</a> and its implementations in Element Web, although this has ended up failing to get to the top of the todo list (sorry Half-Shot! :/)</li>
<li>Spec progress has improved somewhat, and we are very excited to have welcomed Will Bamberg (formerly MDN) to support the spec from a professional tech writer perspective, with <a href="https://friendly-yonath-3de225.netlify.app/">the all-new engine</a> landing any day now! We‚Äôre still experimenting with ways to ensure the spec gets enough time allocated to keep up with the backlog, however - particularly community contributions.</li>
<li>...and in terms of Abuse/Reputation - we properly <a href="https://matrix.org/blog/2020/10/19/combating-abuse-in-matrix-without-backdoors">kicked off our anti-abuse work</a> and launched a first PoC implementation in the depths of <a href="https://matrix.org/blog/2020/12/18/introducing-cerulean#whats-with-the-decentralised-reputation-button">Cerulean</a> last week.</li>
</ul>
<p>Perhaps more interesting is the stuff we didn‚Äôt predict (or at least didn‚Äôt want to pre-announce ;) for 2020:</p>
<ul>
<li>Riot, Modular and New Vector got unified at last behind a single name: <a href="https://element.io/blog/welcome-to-element/">Element</a>; hopefully the shock has worn off by now :)</li>
<li><a href="https://matrix.org/blog/2020/03/03/moznet-irc-is-dead-long-live-mozilla-matrix">Mozilla joined Matrix</a> in force, turning off Moznet IRC in favour of going full Matrix.</li>
<li><a href="https://matrix.org/blog/2020/09/30/welcoming-gitter-to-matrix">We welcomed Gitter</a> into the heart of the Matrix ecosystem (with <a href="https://element.io/blog/gitter-is-joining-element/">Element acquiring Gitter</a> from <a href="https://about.gitlab.com/blog/2020/09/30/gitter-moves-to-element/">Gitlab</a> in order to ensure Gitter‚Äôs Matrix integration acts as a reference for integrating future chat silos into Matrix) - with <a href="https://matrix.org/blog/2020/12/07/gitter-now-speaks-matrix">native Matrix support in Gitter</a> going live shortly afterwards.</li>
<li><a href="https://matrix.org/blog/2020/05/21/welcoming-automattic-to-matrix">Automattic</a> launched itself into the Matrix ecosystem with an investment in Element, and since then we‚Äôve been working on getting Matrix better integrated and available to them (although all of Element‚Äôs Matrix-for-governments activity has ended up delaying this a bit).  If you want to work for Automattic on integrating Matrix, <a href="https://automattic.com/work-with-us/matrix-integrations-engineer/">they‚Äôre hiring</a>!</li>
<li>We previewed <a href="https://matrix.org/blog/2020/12/18/introducing-cerulean">Cerulean</a> as a super-exciting proof-of-concept client, demonstrating how social media could work on Matrix, with native threading, profiles-as-rooms, decentralised reputation, and (shortly) peeking-over-federation.</li>
<li><a href="https://matrix.org/blog/2020/12/17/matrix-to-reloaded">We completely rewrote matrix.to</a> and relaunched it as a much more capable and friendly permalink redirection service; a precursor to finally getting matrix:// URLs everywhere!</li>
<li>We certainly didn‚Äôt predict that the ‚Äú<a href="https://matrix.org/blog/2020/04/06/running-your-own-secure-communication-service-with-matrix-and-jitsi">how to install Synapse</a>‚Äù video tutorial published at the beginning of the COVID-19 pandemic would end up with 25.5K views (and counting‚Ä¶)</li>
</ul>
<p>Then, there‚Äôs whole new waves of exciting stuff going on.  The most obvious has to be the amount of Government uptake we‚Äôve seen with Matrix this year, following on from <a href="https://joinup.ec.europa.eu/collection/open-source-observatory-osor/document/french-government-launches-house-developed-messaging-service-tchap">France embracing Matrix</a> across the public sector last year.  Firstly the German armed forces announced their <a href="https://www.bwi.de/news-blog/news/artikel/open-source-matrix-ist-einheitlicher-messenger-standard-fuer-die-bundeswehr">transition to Matrix</a>, and then the German states of Schleswig-Holstein and Hamburg announced a <a href="https://sifted.eu/articles/element-germany-deal/">mammoth 500K user Matrix deployment</a> for education and public administration.  Meanwhile, North Rhine Westphalia (the biggest state in Germany) launched their own Matrix-powered <a href="https://www.logineo.schulministerium.nrw.de/LOGINEO-NRW/NEU-LOGINEO-NRW-Messenger/Messenger.html">messager for education</a>; loads of different universities have rolled out Matrix for collaboration  - and we hear <a href="https://famedly.com">Famedly</a> is <a href="https://www.businessinsider.de/gruenderszene/health/famedly-kommunikation-app-gesundheitswesen/">making good progress</a> with Matrix-powered healthcare messaging solutions.  Finally, outside of Germany, we‚Äôre seeing the first official deployments in the UK government and US federal government - we‚Äôll share details where possible (but sometimes big deployments of encrypted communication systems want to remain discreet).  It‚Äôs incredibly exciting to see Matrix spreading across the public sector and education, and we‚Äôre hoping this will follow a similar pattern to how the Internet, email or indeed the Web first developed: a mix of high profile public sector deployments, complemented by a passionate grass-roots technical community, eventually spreading to span the rest of society :).</p>
<p>Another exciting thing which emerged this year is the amazing academic work that Karlsruhe Institute of Technology‚Äôs <a href="https://dsn.tm.kit.edu/english/">Decentralized Systems and Network Services Research Group</a> has been conducting on Matrix.  This really came on the radar back in June when their <a href="https://matrix.org/blog/2020/06/16/matrix-decomposition-an-independent-academic-analysis-of-matrix-state-resolution">Matrix Decomposition: Analysis of an Access Control Approach on Transaction-based DAGs without Finality</a> paper was published - a truly fascinating analysis of how state resolution works in Matrix, and how we manage to preserve access control within rooms without using blockchain-style ‚Äòsealed blocks‚Äô (and has helped fix a few nasty bugs!).  I‚Äôm not sure any of us realised that Matrix‚Äôs state resolution counts as a new field of research, but it‚Äôs been great to follow along with their independent work.  Most recently, and even more excitingly, they‚Äôre circulating a preview of their <a href="https://arxiv.org/abs/2011.06488">Analysis of the Matrix Event Graph Replicated Data Type</a> paper - a deep analysis of the properties of Matrix DAGs themselves.  We highly recommend reading the papers (what better way to spend the holiday break!).  To give a taste, the final paragraph of the paper concludes:</p>
<p><a href="https://arxiv.org/abs/2011.06488"><img src="https://matrix.org/blog/img/2020-12-25-meg-summary.png" alt="MEG summary" /></a></p>
<p>2020 has also seen the arrival and maturation of a whole new generation of Matrix clients - <a href="https://hydrogen.element.io">Hydrogen</a> is <em>really</em> impressive as an experimental next-generation Web (and Mobile Web) client; an account with 3000 rooms that uses 1.4GB of RAM on Element Web uses 14MB of RAM on Hydrogen and launches instantly, complete with excellent E2EE implementation.  It even works on MSIE!  The whole app, including dependencies, is about 70KB of code (200KB including Olm).  Meanwhile, <a href="https://github.com/matrix-org/matrix-rust-sdk">matrix-rust-sdk</a> is coming along well, providing a general purpose native library for writing excellent native Matrix clients.  Fractal merged initial matrix-rust-sdk a few weeks ago, and we‚Äôll be experimenting with switching to it in Element iOS and Element Android (for its e2ee) in the coming year.  It‚Äôs not inconceivable to think of a world where matrix-rust-sdk ends up being the no-brainer official SDK for native apps, and Hydrogen‚Äôs SDK becomes the no-brainer official SDK for JS apps.</p>
<p>Meanwhile, in the community, there‚Äôs been so much activity it‚Äôs untrue.  But on the subject of maturing apps, it‚Äôs been incredibly exciting to see <a href="https://invent.kde.org/network/neochat">NeoChat</a> emerge as an official KDE Matrix client (built on <a href="https://github.com/quotient-im/libQuotient">libQuotient</a> and <a href="https://develop.kde.org/frameworks/kirigami">Kirigami</a>, forked from <a href="https://gitlab.com/spectral-im/spectral">Spectral</a>), <a href="https://gitlab.com/famedly/fluffychat">FluffyChat</a> going from strength to strength; <a href="https://nheko.im/nheko-reborn/nheko">Nheko</a> continuing to mature impressively; <a href="https://github.com/mirukana/mirage">Mirage</a> appearing out of nowhere as a fully featured desktop client; <a href="https://gitlab.gnome.org/GNOME/fractal">Fractal</a> merging matrix-rust-sdk etc.  On the serverside, <a href="http://conduit.rs/">Conduit</a> was the big community story of the year - with an incredibly fast Rust + Sled server appearing out of the blue, with viable federation coming up on the horizon.  The best bet for an overview of all things community is to checkout the <a href="https://matrix.org/blog/category/this-week-in-matrix">TWIM backlogs</a> however - there‚Äôs simply way too much stuff to mention it all here.</p>
<p>Obviously, no 2020 wrap-up post would be complete without acknowledging the COVID-19 pandemic - which increased focus on Matrix and other remote collaboration technology more than anyone could have predicted (especially given all the privacy missteps from Zoom, Teams and others).  One of the highlights of the year was seeing the HOPE (Hackers On Planet Earth) conference shift <a href="https://hackaday.com/2020/08/11/hope-2020-delivers-historic-marathon-of-hacking/">their entire proceedings over to Matrix</a> - turning the conference into a 10 day television station of premium hacking content, with Matrix successfully providing the social glue to preserve a sense of community despite going virtual.  Similarly, we‚Äôre incredibly excited that FOSDEM 2021 is highly likely to run primarily via Matrix (with bridges to IRC and XMPP, of course) - our work is going to be cut out for us in January to ensure the amazing atmosphere of FOSDEM is preserved online for the &gt;8,500 participants and ~800 talks.  And if any other event organisers are reading this - please do reach out if you‚Äôre interested in going online via Matrix: we want Matrix to be the best possible ecosystem for online communities, including virtual events, and we‚Äôll be happy to help :)</p>
<p>Talking of FOSDEM, a really fun bit of work which landed in Element this year was to (finally!) polish Widgets: the ability to embed arbitrary webapps into Matrix chatrooms.  This includes being able to embed widgets in the RightPanel on Element Web, the LeftPanel too, add as many as you like to a room, resize them(!), and generally build much more sophisticated dashboards of additional content.  Modal and fullscreen widgets are coming too, as are ways to simplify and unify access control.  It turns out that these have arrived in the nick of time for events like FOSDEM, where we‚Äôre expecting to very heavily use widgets to embed video streams, video conferences, schedules, and generally automate the workflow of the conference via adding in web UIs as widgets wherever necessary.  The work for this has been driven by the various German education deployments, where the same tricks are invaluable for automating online learning experiences.  We originally wrote Widgets back in 2017 as a proof-of-concept to try to illustrate how chatrooms could be used to host proper custom UIs, and it's fantastic to see that dream finally come of age.</p>
<p>Finally, it‚Äôs been really exciting to see major progress in recent months on what‚Äôs essentially a whole new evolution of Matrix.  Two years ago, a quiet patch during the Christmas holidays gave birth to a whole bunch of wild science fiction Matrix Spec Changes: <a href="https://github.com/matrix-org/matrix-doc/pull/1772">MSC1772</a>: Spaces (groups as rooms), <a href="https://github.com/matrix-org/matrix-doc/pull/1769">MSC1769</a>: Profiles as rooms, <a href="https://github.com/matrix-org/matrix-doc/pull/1767">MSC1767</a>: Extensible events, <a href="https://github.com/matrix-org/matrix-doc/pull/1776">MSC1776</a>: Peeking over /sync, <a href="https://github.com/matrix-org/matrix-doc/pull/1777">MSC1777</a>: Peeking over federation, etc.  This was in part trying to ensure that we had something to look forward to when we emerged from the tunnel of launching Matrix 1.0, and in part trying to draw a coherent high-level sketch of what the next big wave of Matrix features could look like.  Inevitably the MSCs got stuck in limbo for ages while we exited beta, launched Matrix 1.0, turned on E2EE by default etc - but in the latter half of this year they‚Äôve hit the top of the todo list and it‚Äôs been incredibly exciting to see entirely new features landing once again.  Implementation for Spaces is in in full swing and <a href="https://youtu.be/_Ade0FZfnWo?t=39">looking great</a>; Profiles-as-rooms are effectively being trialled in Cerulean; Peeking over /sync has landed in Dendrite and peeking over federation is in PR (and unlocks all sorts of desirable features for using rooms more generically than we have today, including Spaces).  Only Extensible events remains in limbo for now (we have enough to handle getting the others landed!)</p>
<p>Of these, Spaces has turned out to be exciting in wholly unexpected ways.  While prototyping the UX for how best to navigate hierarchies of spaces, we had a genuine epiphany: the ability for anyone to define and share arbitrary hierarchies of rooms makes Matrix effectively a global decentralised hierarchical file system (where the ‚Äòfiles‚Äô are streams of realtime data, but can obviously store static content too).  The decentralised access controls that KIT DSN <a href="https://matrix.org/blog/2020/06/16/matrix-decomposition-an-independent-academic-analysis-of-matrix-state-resolution">wrote about</a> could <em>literally</em> be file-system style access controls; enforcing access on a global decentralised hierarchy.  We obviously have shared hierarchical filesystems today thanks to Dropbox and Google Drive, but these of course are centralised and effectively only store files - whereas Spaces could potentially scale to the whole web.  In fact, you could even think of Spaces as flipping Matrix entirely on its head: the most defining building block going forwards could be the Spaces themselves rather than the rooms and events - just as directories are intrinsic to how you navigate a conventional filesystem.  How has Matrix got this far without the concept of folders/directories?!</p>
<p>Right now these thoughts are just overexcited science fiction, but the potential really is mindblowing.  It could give us a global read/write web for organising any arbitrary realtime data - with the social controls via ACLs to delegate and crowdsource curation of hierarchies however folks choose.  The Matrix.org Foundation could seed a ‚Äòroot‚Äô hierarchy, go curate all the rooms we know about into some Linnean-style taxonomy, delegate curation of the various subspaces to moderators from the community, and hey presto we‚Äôve reinvented USENET‚Ä¶ but with modern semantics, and without the rigid governance models.  Hell, we could just mount (i.e. bridge) USENET straight into it.  And any other hierarchical namespace of conversations you can think of - Google Groups, Stackoverflow, Discourse, IMAP trees‚Ä¶</p>
<p>Of course, the initial Spaces implementation is going to be focused of on letting communities publish their existing rooms, and users organise their own rooms, rather than managing an infinite ever-expanding global space hierarchy - but given we‚Äôve been designing Spaces to support government (and inter-government) scales of Spaces, it‚Äôs not inconceivable to think we could use it to navigate gigantic public shared Spaces in the longer term.</p>
<p>Anyway, enough Space scifi - what‚Äôs coming up in 2021?</p>
<h2 id="2021">2021</h2>
<p>Our current hit list is:</p>
<ul>
<li><strong>Spaces</strong> - see above :)</li>
<li><strong>Social Login</strong> - we‚Äôre going to be making Single Sign On (SSO) a proper first-class citizen in Matrix (and Synapse and Element) in the coming weeks, and enabling it on the matrix.org homeserver, so users can do single-click logins via Github/Gitlab/Google and other SSO providers.  Obviously this means your Matrix identity will be beholden to your identity provider (IdP), but this may well be preferable for many users who just want a single-click way to enter Matrix and don‚Äôt care about being tied to a given IdP.</li>
<li><strong>VoIP</strong> - we have a <em>lot</em> of work in flight at the moment to make 1:1 VoIP super robust.  Some of it has already landed in Element, but the rest will land in the coming weeks - and then we‚Äôre hoping to revisit Matrix-native group voice/video.</li>
<li><strong>Voice messaging</strong> - we‚Äôre hoping to finally add voice messaging to Element (and Matrix)</li>
<li><strong>Location sharing</strong> - ...and this too.</li>
<li>**P2P **- Lots of P2P work on the horizon, now Dendrite is increasingly stable.  First of all we need to iterate more on Pinecone, our pre-alpha next-generation P2P overlay network - and then sort out account portability, and privacy-preserving store-and-forward.  We‚Äôre hoping to see the live P2P Matrix network turn on this year, however, and ideally see homeservers (probably Dendrite) multihoming by default on both today‚Äôs Matrix as well as the P2P network, acting as gateways between the two.</li>
<li><strong>Threads</strong> - Cerulean is excellent proof for how threading could work in Matrix; we just need to get it implemented in Element!</li>
<li><strong>Peeking</strong> - Peeking is going to become so much more important for participating in non-chat rooms, such as Spaces, Profiles, Reputation feeds, etc.  We‚Äôll finish it in Dendrite, and then implement it in Synapse too.</li>
<li>**Decentralised Reputation **- Cerulean has the first implementation of decentralised reputation for experimentation purposes, and we‚Äôll be working solidly on it over the coming year to empower users to counter abuse by applying their own subjective reputation feeds to their content.</li>
<li>**Incremental Signup **- Once upon a time, Element (Riot) had the ability to gradually sign-up without the user even really realising they‚Äôd signed up.  We want to bring it back - perhaps this will be the year?</li>
<li><strong>DMLS</strong> - with the first <a href="https://datatracker.ietf.org/wg/mls">MLS</a> messages flowing over Matrix, we want to at least provide MLS as an option alongside Megolm for encryption.  It should be radically more performant in larger rooms (logarithmic rather than linear complexity), but lacks deniability (the assurance that you cannot prove a user said something in retrospect, in order to blackmail them or similar), and is still unproven technology.  We‚Äôll aim to prove it in 2021.</li>
<li><strong>E2EE improvements</strong> - We improved E2EE immeasurably in 2020; turning it on by default, adding cross-signing, QR code verification etc.  But usability and reliability can still be improved.  We‚Äôll be looking at further simplifying the UX, and potentially combining together your login password and recovery/security passphrase so you only have one password to remember going forwards.</li>
<li><strong>Hydrogen</strong> - We‚Äôll keep polishing Hydrogen, bringing it towards feature parity with Element, ensure its SDK is available for other clients, and start seeing how we can use it in Element itself.  For instance, the Spaces-aware RoomList in Element may well end up stealing alien technology from Hydrogen.</li>
<li><strong>matrix-rust-sdk</strong> - Similarly, we‚Äôll keep polishing matrix-rust-sdk; stealing inspiration from Hydrogen‚Äôs state model, and start migrating bits of the native mobile Element apps to use it.</li>
<li><strong>The Spec</strong> - get Will‚Äôs new spec website live, and get improving all the surrounding material too.</li>
</ul>
<p>I‚Äôm sure I‚Äôm missing lots here, but these are the ones which pop immediately to mind.  You can also check <a href="https://github.com/vector-im/roadmap/projects/1">Element's public roadmap</a>, which covers all the core Matrix work donated by Element (as well as everything else Element is getting up to).</p>
<p>As always, huge huge thanks goes to the whole Matrix community for flying Matrix and keeping the dream alive and growing faster than ever.  It‚Äôs been a rough year, and we hope that you‚Äôve survived it intact (and you have our sincere sympathies if you haven‚Äôt).  Let‚Äôs hope that 2021 will be a massive improvement, and that the whole Matrix ecosystem will continue to prosper in the new year.</p>
<p>-- Matthew, Amandine, and the whole Matrix team.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;12&#x2F;18&#x2F;introducing-cerulean&#x2F;" title="Introducing Cerulean">Introducing Cerulean</a></h2>
                <span>
                    18.12.2020 00:00
                    ‚Äî
                    <a href="/category/general">
                        General
                    </a>
                    ‚Äî
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>We have a bit of an unexpected early Christmas present for you today‚Ä¶</p>
<p>Alongside all the normal business-as-usual Matrix stuff, we‚Äôve found some time to do a mad science experiment over the last few weeks - to test the question: ‚ÄúIs it possible to build a serious Twitter-style decentralised microblogging app using Matrix?‚Äù</p>
<p>It turns out the answer is a firm ‚Äúyes‚Äù - and as a result we‚Äôd like to present a <strong>very</strong> early sneak preview of <a href="https://cerulean.matrix.org">Cerulean</a>: a highly experimental new microblogging app for Matrix, complete with first-class support for arbitrarily nested threading, with both Twitter-style (‚Äúvertical‚Äù) and HN/Reddit-style (‚Äúhorizontal‚Äù) layout‚Ä¶ and mobile web support!</p>
<p><a href="https://cerulean.matrix.org/@kegan:dendrite.matrix.org/!bHe21S4P3axekSRD:dendrite.matrix.org/$0QE6vqMZiS9169Y-3C84dkQui-1G5uG2eGFsYzPrhx8"><img src="https://matrix.org/blog/img/2020-12-18-cerulean-screenshot.jpg" alt="Cerulean screenie" /></a></p>
<p>Cerulean is unusual in many ways:</p>
<ul>
<li>It‚Äôs (currently) <a href="https://github.com/matrix-org/cerulean">a very minimal javascript app</a> - only 2,500 lines of code.</li>
<li>It has zero dependencies (other than React).
<ul>
<li>This is to show just how simple a fairly sophisticated Matrix client can be...</li>
<li>...and so the code can be easily understood by folks unfamiliar with Matrix...</li>
<li>...and so we can iterate fast while figuring out threading...</li>
<li>...and because none of the SDKs support threading yet :D</li>
</ul>
</li>
<li>It relies on <a href="https://github.com/matrix-org/matrix-doc/pull/2836">MSC2836: Threading</a> - our highly experimental Matrix Spec Change to extend relationships (as used by reaction &amp; edit aggregations) to support free-form arbitrary depth threading.</li>
<li>As such, <strong>it only works on Dendrite</strong>, as that‚Äôs where we‚Äôve been experimenting with implementing MSC2836.  (We‚Äôre now running an <a href="https://matrix.org/blog/2020/12/15/dendrite-2020-progress-update">official public Dendrite server instance</a> at dendrite.matrix.org though, which makes it easy to test - and our test Cerulean instance <a href="https://cerulean.matrix.org">https://cerulean.matrix.org</a> points at it by default).</li>
</ul>
<p>This is **very much a proof of concept.  **We‚Äôre releasing it today as a sneak preview so that intrepid Matrix experimenters can play with it, and to open up the project for contributions! (PRs welcome - it should be dead easy to hack on!).  Also, we give no guarantees about data durability: both Cerulean and dendrite.matrix.org are highly experimental; do not trust them yet with important data; we reserve the right to delete it all while we iterate on the design.</p>
<h3 id="what-can-it-do">What can it do?</h3>
<p>So for the first cut, we‚Äôve implemented the minimal features to make this something you can just about use and play with for real :)</p>
<ul>
<li>Home view (showing recent posts from folks you follow)</li>
<li>Timeline view (showing the recent posts or replies from a given user)</li>
<li>Thread view (showing a post and its replies as a thread)</li>
<li>Live updating (It‚Äôs Matrix, after all! We‚Äôve disabled it for guests though.)</li>
<li>Posting plain text and images</li>
<li>Fully decentralised thanks to Matrix (assuming you‚Äôre on Dendrite)</li>
<li>Twitter-style ‚ÄúVertical‚Äù threading (replies form a column; you indent when someone forks the conversation)</li>
<li>HN/Reddit/Email-style ‚ÄúHorizontal‚Äù threading (each reply is indented; forks have the same indentation)</li>
<li>Basic Registration &amp; Login</li>
<li>Guest support (slightly faked with non-guest users, as Dendrite‚Äôs guest support isn‚Äôt finished yet)</li>
<li>Super-experimental proof-of-concept support for <a href="https://matrix.org/blog/2020/10/19/combating-abuse-in-matrix-without-backdoors">decentralised reputation filtering</a>(!) </li>
</ul>
<p>Obviously, there‚Äôs a huge amount of stuff needed for parity with a proper Twitter-style system:</p>
<ul>
<li>Configurable follows.  Currently the act of viewing someone‚Äôs timeline automatically follows them.  This is because Dendrite doesn‚Äôt peek over federation yet (but <a href="https://github.com/matrix-org/dendrite/pull/1391">it‚Äôs close</a>), so you have to join a room to view its contents - and the act of viewing someone‚Äôs timeline room is how you follow them in Cerulean. </li>
<li>Likes (i.e. plain old Matrix reactions, although we might need to finally sort out federating them as aggregations rather than individually, if people use them like they use them on Twitter!)</li>
<li>Retweets (dead easy)</li>
<li>Pagination / infinite scrolling (just need to hook it up)</li>
<li>Protect your posts (dead easy; you just switch your timeline room to invite-only!)</li>
<li>Show (some) replies to messages in the Home view</li>
<li>Show parent and sibling context as well as child context in the Thread view</li>
<li>Mentions (we need to decide how to notify folks when they‚Äôre mentioned - perhaps Matrix‚Äôs push notifications should be extended to let you subscribe to keywords for public rooms you‚Äôre not actually in?)</li>
<li>Notifications (although this is just because Dendrite doesn‚Äôt do notifs yet)</li>
<li>Search (again, just needs to be implemented in Dendrite - although how do you search beyond the data in your current homeserver? Folks are used to global search)</li>
<li>Hashtags (it‚Äôs just search, basically)</li>
<li>Symlinks (see below)</li>
<li>Figure out how to handle lost unthreaded messages (see below)</li>
<li>Offline support? (if we were using a proper Matrix SDK, we‚Äôd hopefully get this for free, but currently Cerulean doesn‚Äôt store any state locally at all).</li>
</ul>
<h3 id="how-does-it-work">How does it work?</h3>
<p>Every message you send using Cerulean goes into two Matrix rooms, dubbed the &quot;timeline&quot; room and the &quot;thread&quot; room. The &quot;timeline&quot; room (with an alias of <a href="https://matrix.to/#/#@matthew:dendrite.matrix.org">#@matthew:dendrite.matrix.org</a> or whatever your matrix id is) is a room with all of your posts and no one else's. The &quot;thread&quot; room is a normal Matrix room which represents the message thread itself. Creating a new &quot;Post&quot; will create a new &quot;thread&quot; room. Replying to a post will join the existing &quot;thread&quot; room and send a message into that room. MSC2836 is used to handle threading of messages in the &quot;thread‚Äù room - the replies refer to their parent via an m.relationship field in the event.</p>
<p>These semantics play nicely with existing Matrix clients, who will see one room per thread and a flattened chronological view of the thread itself (unless the client natively supports MSC2836, but none do yet apart from Cerulean). However, as Cerulean only navigates threaded messages with an m.reference relationship (eg it only ever uses the new /event_relationships API rather than /messages to pull in history), <strong>normal messages sent by Matrix into a thread or timeline room will not yet show up in Cerulean.</strong></p>
<p>In this initial version, Cerulean literally posts the message twice into both rooms - but we‚Äôre also experimenting with the idea of adding ‚Äúsymlinks‚Äù to Matrix, letting the canonical version of the event be in the timeline room, and then the instance of the event in the thread room be a ‚Äòsymlink‚Äô to the one in the timeline.  This means that the threading metadata could be structured in the thread room, and let the user do things like turn their timeline private (or vice versa) without impacting the threading metadata.  We could also add an API to both post to timeline and symlink into a thread in one fell swoop, rather than manually sending two events.  It‚Äôd look something like this:</p>
<p><img src="https://matrix.org/blog/img/2020-12-18-cerulean-diagram.png" alt="Cerulean diagram" /></p>
<p>We also experimented with cross-room threading (letting Bob‚Äôs timeline messages directly respond to Alice‚Äôs timeline messages and vice versa), but it posed some nasty problems - for instance, to find out what cross-room replies a message has, you‚Äôd need to store forward references somehow which the replier would need permission to create.  Also, if you didn‚Äôt have access to view the remote room, the thread would break. So we‚Äôve punted cross-room threading to a later MSC for now.</p>
<p>Needless to say, once we‚Äôre happy with how threading works at the protocol level, we‚Äôll be looking at getting it into the UX of Element and mainstream Matrix chat clients too!</p>
<h3 id="what-s-with-the-decentralised-reputation-button">What‚Äôs with the decentralised reputation button?</h3>
<p>Cerulean is very much a test jig for new ideas (e.g. threading, timeline rooms, peeking), and we‚Äôre taking the opportunity to also use it as an experiment for our first forays into publishing and subscribing to reputation greylists; giving users the option to filter out content by default they might not want to see‚Ä¶ but doing so on their own terms by subscribing to whatever reputation feed they prefer, while clearly visualising the filtering being applied.  In other words, this is the first concrete experimental implementation of the work proposed in the second half of <a href="https://matrix.org/blog/2020/10/19/combating-abuse-in-matrix-without-backdoors">Combating Abuse in Matrix without Backdoors</a>.  This is super early days, and we haven‚Äôt even published a proto-MSC for the event format being used, but if you‚Äôre particularly interested in this domain it‚Äôs easy enough to figure out - just head over to <a href="https://matrix.to/#/#nsfw:dendrite.matrix.org">#nsfw:dendrite.matrix.org</a> (warning: not actually NSFW, yet) and look in /devtools to see what‚Äôs going on.</p>
<p>So, there you have it - further evidence that Matrix is not just for Chat, and a hopefully intriguing taste of the shape of things to come! Please check out the demo at <a href="https://cerulean.matrix.org">https://cerulean.matrix.org</a> or try playing with your own from <a href="https://github.com/matrix-org/cerulean">https://github.com/matrix-org/cerulean</a>, and then head over to <a href="https://matrix.to/#/#cerulean:matrix.org">#cerulean:matrix.org</a> and let us know what you think! :)</p>

                
            </div>
        </article>
        
        <nav class="pagination">
    <div class="prev">
        
        <a href="&#x2F;category&#x2F;general&#x2F;">‚Äπ Previous</a>
        
    </div>
    <span class="page-number">2 / 14</span>
    <div class="prev">
        
        <a href="&#x2F;category&#x2F;general&#x2F;page&#x2F;3&#x2F;">Next ‚Ä∫</a>
        
    </div>
</nav>

    </div>
</div>

    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;security-hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="&#x2F;code"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p>¬© 2022 The Matrix.org Foundation C.I.C.</p>
</footer>

</body>

</html>
