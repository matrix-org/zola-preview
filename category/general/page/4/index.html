<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - General</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg" />
    <link rel="stylesheet" href="/style.css" />

    
<link rel="alternate" type="application/rss+xml" title="RSS" href="/category/general/atom.xml">
</head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo-white.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            ">
            Blog
        </a>
        
        
        
        <a href="&#x2F;docs&#x2F;" class="
            ">
            Documentation
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <input id="ecosystem-submenu-checkbox" type="checkbox" class="submenu-checkbox" aria-hidden="true"
                >
            <label for="ecosystem-submenu-checkbox" class="submenu-title">Ecosystem <div class="arrow">
                </div></label>

            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bots&#x2F;">Bots</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        
<div id="taxonomy-single">
    <div class="content">
        <header>
            <h1>General</h1>
            136 posts tagged with "General" <a href="/category">(See all Category)</a>
            
            <h2>
                <small><a href="/category/general/atom.xml">Atom Feed</a></small>
            </h2>
            
        </header>

        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;06&#x2F;16&#x2F;matrix-decomposition-an-independent-academic-analysis-of-matrix-state-resolution&#x2F;" title="Matrix Decomposition: an independent academic analysis of Matrix State Resolution">Matrix Decomposition: an independent academic analysis of Matrix State Resolution</a></h2>
                <span>
                    16.06.2020 20:15
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                <br>
                <small>Last update: 16.06.2020 19:09</small>
            </header>
            <div>
                
                <p>Hi all,</p>
<p>Regular readers of <a href="https://matrix.org/blog/category/this-week-in-matrix/">TWIM</a> may be familiar with the <a href="https://dsn.tm.kit.edu/english/index.php">Decentralized Systems and Network Services Research Group</a> at Karlsruhe Institute of Technology, who have been busy over the last few years analysing Matrix from an independent academic point of view.  The work started in 2018 with Florian Jacob’s <a href="https://dsn.tm.kit.edu/matrix/traveller/explained.html">DSN Traveler</a> spidering project, resulting in the <a href="https://publikationen.bibliothek.kit.edu/1000100364">Glimpse of the Matrix</a> paper analysing Matrix’s scale and room/server distribution (at least as it was back then).</p>
<p>Last week, they released an entirely new paper: <a href="https://dl.acm.org/doi/10.1145/3381991.3395399">Matrix Decomposition: Analysis of an Access Control Approach on Transaction-based DAGs without Finality</a> by Florian Jacob, Luca Becker, Jan Grashöfer and Hannes Hartenstein, presented at <a href="https://www.sacmat.org/2020/index.php">ACM SACMAT ‘20</a>.</p>
<p>Now, the new paper is an absolutely fascinating deep dive analysis into <a href="https://github.com/matrix-org/matrix-doc/blob/master/proposals/1442-state-resolution.md">State Resolution v2</a> - the algorithm at the heart of Matrix which defines how servers merge together their potentially conflicting copies of a given room, such that everyone ends up eventually with a consistent view… even in the face of bad actors. This means that Matrix effectively implements a decentralised access control system - ensuring that users stay banned, and only users with permission can ban, etc.  You can see the <a href="https://matrix.org/blog/img/SACMAT_2020_Talk_Matrix_Decomposition.pdf">slides</a> below, and read the <a href="https://dl.acm.org/doi/pdf/10.1145/3381991.3395399">full paper</a> here. The video of Florian’s talk from SACMAT should be published shortly.</p>
<br/>
<p><object data="https://matrix.org/blog/img/SACMAT_2020_Talk_Matrix_Decomposition.pdf" type="application/pdf" width="1024" height="768"></object></p>
<br/>
<p>To give some context from the Matrix side: designing and implementing State Resolution v2 back in 2018 was a bit of a mission. Our original v1 implementation had some bugs which meant that the result of the merge could unexpectedly favour historical state over the current state (so called ‘state resets’) - thus giving an attacker a way to maliciously revert the state of the room.  In v2 we thought much more carefully about the algorithm, considering state present in one version of the room but not the other as a conflict, separating and applying access control events from regular events, and adding additional ordering of the state in the room by considering events in the context of their authorisation chain (the ‘auth DAG’).  The end result is that we feel confident in v2 State Res, and we haven’t seen any problems with it in the wild since we shipped it in July 2018.</p>
<p>However: state resolution is not intuitive at first - for instance, when you merge two versions of a room together, you treat the state events as unordered sets… even though they are ordered in the context of the room DAG.  The reason is that state res needs to work even if you don’t have a copy of the whole room DAG (otherwise you’d have to download way too much data to participate in a large room).  Another example is the sequence in which orderings are then applied to the state events - and how that interacts with re-authorising those events, to stop malicious ones creeping in.  In the core team, we’ve end up describing it several different ways to try to help folks understand: first Erik’s original <a href="https://github.com/matrix-org/matrix-doc/blob/erikj/state_res_msc/proposals/1442-state-resolution.md">MSC1442</a>, then uhoreg’s <a href="https://matrix.uhoreg.ca/stateres/reloaded.html">literary Haskell implementation</a>, then the terse reference version in <a href="https://matrix.org/docs/spec/rooms/v2">the Spec</a> itself, and most recently Neil Alexander’s <a href="https://matrix.org/docs/guides/implementing-stateres">State Resolution v2 for the Hopelessly Unmathematical</a>.</p>
<p>As a result we are <strong>very</strong> excited and happy that Florian and the DSN team have now published the first ever independent in-depth analysis of the algorithm, particularly in the context of decentralised access control (i.e. enforcing bans, power levels, etc).  We’re pleasantly surprised that apparently “To the best of our knowledge, Matrix is the only system that implements access control based on an eventually consistent partial order without finality and without a consensus algorithm”.</p>
<p>Even better, the DSN team found some remaining thinkos in Synapse’s implementation and the Matrix specification, which could have caused resolution results to diverge from other implementations, specifically:</p>
<ol>
<li>we weren’t enforcing integers in JSON to be within range [-2<sup>53</sup>+1, 2<sup>53</sup>-1], fixed in <a href="https://github.com/matrix-org/synapse/pull/7381">https://github.com/matrix-org/synapse/pull/7381</a> and <a href="https://github.com/matrix-org/matrix-doc/blob/clokep/json-validation-room-ver/proposals/2540-stricter-event-validation.md">MSC2540</a></li>
<li>we forgot to include the notification field when authing power level events, fixed in  <a href="https://github.com/matrix-org/synapse/issues/7501">https://github.com/matrix-org/synapse/issues/7501</a> and <a href="https://github.com/lucavb/matrix-doc/blob/master/proposals/2209-auth-rules-other-keys-in-m.room.power.levels.md">MSC2209</a> (thanks to Luca from DSN for the MSC!)</li>
<li>we forgot to spec the limit that one should apply to the number of parents of an event in the DAG (fixed in <a href="https://github.com/matrix-org/matrix-doc/pull/2538">https://github.com/matrix-org/matrix-doc/pull/2538</a>)</li>
<li>we missed that moderators could set server ACLs which could let them undermine room admins (fixed in <a href="https://github.com/matrix-org/synapse/pull/6834">https://github.com/matrix-org/synapse/pull/6834</a>).</li>
</ol>
<p>All of these have now been fixed in Synapse and the latest versions of the spec (room v6), and we’d like to sincerely thank Florian and Luca for rapidly and responsibly disclosing the issues to us.  In other words: this research is directly improving Matrix, and it’s even more exciting that the stated future work for the DSN team is to work on a <a href="https://en.wikipedia.org/wiki/Formal_verification">formal verification</a> for the security of Matrix’s authorisation rules and state resolution.  This stuff is tough, as anyone who’s played with <a href="https://en.wikipedia.org/wiki/TLA%2B">TLA<sup>+</sup></a> will know, and we are incredibly glad that the research community is helping out to formalise and hopefully prove that State Res v2 is as good as we think it is.</p>
<p>We should stress that DSN’s work is completely independent of The Matrix.org Foundation or anyone else building on the protocol; we’re just writing about it here because we think it’s incredibly cool and deserves the attention of the whole Matrix ecosystem.</p>
<p>Thanks again to Florian and the team - we look forward to seeing what comes next!</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;06&#x2F;02&#x2F;introducing-p2p-matrix&#x2F;" title="Introducing P2P Matrix">Introducing P2P Matrix</a></h2>
                <span>
                    02.06.2020 00:00
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>TL;DR: we shipped a major update (v0.1.1) to <a href="https://p2p.riot.im">https://p2p.riot.im</a> - fire up a desktop Chrome or Firefox in not-private-browsing mode and give it a go!</p>
<p>Hi folks,</p>
<p>As many know by now, a few of us have been working away since mid-December on experimenting with running Matrix in a peer-to-peer architecture - one where every user has absolute total autonomy and ownership of their conversations, because the only place their conversations exist is on the devices they own.</p>
<p>In some ways this is the logical end goal of Matrix: our aim has always been to empower users to have full control over their communication rather than being beholden to any given service provider, and in a P2P world we completely return power over secure communication to the people.</p>
<h3 id="why-p2p">Why P2P?</h3>
<p>P2P Matrix is about more than just letting users store their own conversations: it can also avoid dependencies on the Internet itself by working over local networks, mesh networks, or situations where the Internet has been cut off.  Even more interestingly, without homeservers, there is nowhere for metadata to accumulate about who is talking to who, and when - which is a legitimate complaint about today’s Matrix network, given the homeservers of all users in a given conversation necessarily have to store that conversation’s metadata.  P2P also lets us radically simplify signup for new users if they don’t have to pick a server to get going - and we avoid the unintentional centralisation of users piling onto public servers.</p>
<p>P2P also forces us to solve many of the hardest remaining problems in Matrix: e.g multi-homed accounts, given multi-device P2P requires your account to exist in multiple places. This in turn unlocks high availability and geo-redundancy for accounts on today’s Matrix network (imagine having a primary and backup homeserver that magically did the right thing!), as well as account portability, and thus also vhosting and load-balancing accounts between servers, and even improved GDPR compliance (for if your user IDs are ephemeral they are no longer personally identifying information baked into your Matrix rooms).  We’ll also need better safety mechanisms to avoid folks exploiting the anonymous nature of the network for abuse, accelerating the work we’re already doing for today’s Matrix network.</p>
<p>The way we’ve been approaching P2P is the “<a href="https://twitter.com/Lucid00/status/1263974339294175232">hamfisted but genius</a>” approach of taking homeservers and running them on the client, alongside or within your Matrix client - meaning that there are literally <strong>no</strong> changes required for any Matrix client to talk P2P Matrix, and so P2P Matrix can instantly benefit from all the work which has gone into Riot and other apps.  As a result, P2P is also a huge motivator towards developing much smaller homeservers which can run efficiently clientside (e.g. Dendrite!) - which is of course great news for Matrix as a whole.  It also forces us to develop more scalable routing algorithms (as you don’t want your client to have to talk to every other device in a room every time it sends a message!) and also spurs development of low bandwidth Matrix transports (as you don’t want the additional chatter of talking to multiple peers to consume all your bandwidth).  Finally, it forces us to really ruggedize federation, given nodes are constantly appearing and disappearing, giving the federation much more of a stress test than we see with today’s relatively static homeservers.</p>
<h3 id="p2p-in-practice">P2P in Practice</h3>
<p>So, P2P has been acting as fuel for a lot of our longer term Matrix work over the last few months.  There have been three main experiments so far: at <a href="https://fosdem.org/2020/schedule/event/dip_p2p_matrix/">FOSDEM</a> we showed off running our next-gen Dendrite homeserver running clientside using HTTP over <a href="https://libp2p.io/">libp2p</a> as the transport.  We also highlighted Timothée Floure’s <a href="https://www.epfl.ch/labs/dedis/wp-content/uploads/2020/01/presentation-2019-2-Timothee-Floure-Experimenting-with-Matrix-federation-over-Yggdrasil.pdf">project at EPFL</a> experimenting with Synapse talking P2P CoAP over yggdrasil as the transport via a proxy.</p>
<p>Most recently, however, we’ve been experimenting with compiling Dendrite down to Web Assembly and running it embedded in Riot Web as a Service Worker, using HTTP over libp2p’s websocket transport (coordinated via a websocket rendezvous server).  Architecturally, it looks like this:</p>
<p><img src="/blog/img/p2p-diag.png" alt="P2P Architecture Diagram" /></p>
<p>Today, we’re shipping a major new alpha (v0.1.1) of this P2P demo up at <a href="https://p2p.riot.im">https://p2p.riot.im</a> (requires desktop Chrome or Firefox in non-private-browsing mode) - which hopefully should give a really usable and concrete taste of the shape of things to come.</p>
<p>The main features are:</p>
<ul>
<li>Your conversations are now persisted in your browser storage (via IndexedDB), meaning that as long as all the browsers participating in a given conversation don’t clear their local storage, rooms on the P2P network are here to stay!</li>
<li>Your room directory lists all the aliases for all the rooms published by active nodes on the network.  Moreover, we now automatically publish a local room alias whenever you join a public room, so that others will be able to discover that room via you, even if the server who originally created the alias has disappeared.</li>
<li>Lots and lots of federation improvements between the nodes - for instance, when a node comes online, others should now automatically detect and send scrollback to it.  Invites should work, and there should no longer be any unexpectedly redacted messages.</li>
</ul>
<p>Needless to say, all the code for this is open source under the Apache license, and if you’re feeling particularly adventurous you can embed your very own P2P Dendrite into Riot Web by using the Dockerfile at <a href="https://github.com/matrix-org/dendrite/blob/master/build/docker/DendriteJS.Dockerfile">https://github.com/matrix-org/dendrite/blob/master/build/docker/DendriteJS.Dockerfile</a> or following the instructions at  <a href="https://github.com/matrix-org/dendrite/blob/master/docs/p2p.md">https://github.com/matrix-org/dendrite/blob/master/docs/p2p.md</a>.</p>
<p>Please report bugs to <a href="https://github.com/matrix-org/dendrite/issues">https://github.com/matrix-org/dendrite/issues</a>!</p>
<p>Finally, please understand that the demo is very likely <strong>not</strong> what the final version of P2P Matrix will look like - this is just one step in a series of experiments as we investigate the best paths forward :)</p>
<h3 id="what-s-next">What’s next?</h3>
<p>For the current demo, there’s still lots of stuff remaining, including:</p>
<ul>
<li>More federation debugging (and hooking in <a href="https://github.com/matrix-org/tardis">tardis</a> and writing up everything we’ve learned about implementing federation in Dendrite!)</li>
<li>Making the content repository work in-browser (gotta fill up those IndexedDBs with some GIFs!)</li>
<li>Hooking up E2E Encryption APIs in Dendrite (not that it buys us much in a pure P2P world)</li>
<li>WebRTC transports.  Turns out that service workers aren’t allowed to speak WebRTC, so we’ll have to shim through to Riot to speak true peer-to-peer WebRTC data channels rather than relaying all the traffic through the websocket rendezvous server.</li>
<li>Decentralised accounts for multidevice support - reviewing <a href="https://github.com/matrix-org/matrix-doc/blob/rav/proposal/remove_mxids_from_events/proposals/1228-removing-mxids-from-events.md">MSC1228</a> and getting Dendrite supporting multihoming accounts!</li>
<li>Finishing all of Dendrite’s other remaining APIs.</li>
</ul>
<p>Beyond this, there are some bigger picture questions left to be answered in future experiments.</p>
<p>Firstly: we do not yet have a solution for “store and forward” nodes which can relay messages on behalf of a room if all the participating devices are offline.  A first cut will be to run a P2P-capable homeserver server-side for this, but then metadata will start to accumulate server-side for the conversations it hosts.  A more interesting approach would be to use a store and forward system which obfuscates who is talking to who, such as a mixnet, and could even provide resistance to network traffic pattern analysis.  This is very much an open area of research, but one we are getting into :D</p>
<p>Secondly: we want to experiment more with other transports, and find out which works best for Matrix.  Libp2p has some really exciting new stuff in the form of <a href="https://blog.ipfs.io/2020-05-20-gossipsub-v1.1">Gossipsub v1.1</a> - a much smarter routing algorithm for pubsub traffic in libp2p, which David Dias gave us a <a href="https://youtu.be/APVp-20ATLk?t=3598">VIP tour</a> of at the first Open Tech Will Save Us meetup.  So we’ll need to restructure our libp2p transport as pubsub to see how it works in practice.  Separately, we also want to play with hooking up <a href="https://yggdrasil-network.github.io/">Yggdrasil</a> (the encrypted overlay network) as a transport as a totally different approach - Yggdrasil will easily let us span different underlying network transports, but comes with different tradeoffs (e.g. no browser support yet).  We also want to take a look at the <a href="https://dat.foundation/">DAT</a> / <a href="https://github.com/hypercore-protocol/hypercore">hypercore</a> / <a href="https://github.com/hyperswarm/hyperswarm">hyperswarm</a> / <a href="https://cabal.chat/">Cabal</a> ecosystem to see if there’s a match :)</p>
<p>Thirdly and finally: we obviously want to unify the new P2P Matrix network with today’s federated one.  The ideal outcome here would be to have a hybrid model, where teams who want their users to have a dedicated homeserver (for availability, IT policies, etc) can continue to have one as they do today - but newbies who have just installed Riot would float around on P2P unless they decided to consciously put down roots on a server or two.  Best of all, it would let us turn off the matrix.org homeserver: the best public homeserver is one you run yourself on your own phone ;)  The approach we take for linking P2P and today’s Matrix will depend very much on the transport we select for P2P in the long run, but the likelihood is that today’s homeservers will sprout P2P gateways to link the networks.</p>
<h2 id="conclusion">Conclusion</h2>
<p>So, there you have it.  P2P Matrix exists, and is developing at an alarming speed - and pushing Dendrite development along with it.  Most excitingly, there have been no changes yet to the Matrix spec for P2P at all; we’ve just swapped https for http-over-libp2p as the transport.  So <strong>all</strong> of the work we’ve been doing making Dendrite work in a P2P world has directly translated into making Dendrite work on today’s Matrix too  You can now stand up a Dendrite and have it federate pretty reliably with the wider Matrix network, although we’re still rushing through implementing APIs (we’re up to 35% passing <a href="https://github.com/matrix-org/sytest">sytest</a> coverage - although that 35% does contain most of the important tests :)</p>
<p>Finally, in case you’re worried about why the Matrix core team is off chasing P2P dreams rather than improving Riot’s UX, or implementing Communities, or Extensible Profiles, or working through the MSC backlog etc... in practice only two people (ignoring Matthew) have been working on P2P - Neil Alexander (author of the original FOSDEM demo, Dendrite wrangler and Yggdrasil co-maintainer) and Kegan Dougal (of the original Matrix dev team, one of the original authors of Dendrite, and now wrangling the WASM P2P work too).  Huge thanks to Kegan &amp; Neil for pushing P2P forwards - and huge thanks to everyone else on the core team and the wider community for keeping today’s Matrix advancing too!</p>
<p>Hope this has given a tempting glimpse of the shape of things to come.  Honestly we never thought we’d get as far as P2P when we started Matrix back in 2014, but it’s really fun to be finally catching up with the future :D</p>
<p>-- Matthew</p>
<p>P.S. You can read more about this from Neil Alexander’s point of view <a href="https://neilalexander.dev/2020/06/02/thoughts-p2p-matrix.html">over at his blog</a> (including more thoughts on the potential Yggdrasil demo!)</p>
<p>P.P.S You can read the gory details of the P2P and WASM implementation from Kegan's point of view <a href="https://github.com/matrix-org/dendrite/wiki/How-p2p.riot.im-works">over at the Dendrite wiki</a>.</p>
<p>P.P.P.S Comments over at <a href="https://news.ycombinator.com/item?id=23393935">HN</a></p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;05&#x2F;21&#x2F;welcoming-automattic-to-matrix&#x2F;" title="Welcoming Automattic to Matrix!">Welcoming Automattic to Matrix!</a></h2>
                <span>
                    21.05.2020 01:42
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                <br>
                <small>Last update: 21.05.2020 01:28</small>
            </header>
            <div>
                
                <p><img src="https://matrix.org/blog/img/2020-05-21-automattic.png" alt="Automattic ♥️ Matrix" /></p>
<p>Hi all,</p>
<p>We’re very excited indeed to announce that <a href="https://automattic.com/">Automattic</a>, the creators of <a href="https://wordpress.com/">WordPress.com</a>, are jumping head first into the Matrix ecosystem with a strategic investment of almost $5M into <a href="https://vector.im">New Vector</a> (the company which makes <a href="https://riot.im">Riot</a> and <a href="https://modular.im">Modular.im</a>, founded by the core Matrix team in 2017).  More importantly, Matt Mullenweg (co-founder of WordPress and founder of Automattic) and the Automattic gang are committing to make the most of Matrix in their work going forwards!</p>
<p>This is huge news, not least because WordPress literally runs over 36% of the websites on today’s web - and the potential of bringing Matrix to all those users is incredible.  Imagine if every WP site automatically came with its own Matrix room or community?  Imagine if all content in WP automatically was published into Matrix as well as the Web?  (This isn’t so far fetched an idea - turns out that Automattic already runs a XMPP bridge for wordpress.com over at <a href="https://im.wordpress.com">im.wordpress.com</a>!).  Imagine there was an excellent Matrix client available as a WordPress plugin for embedding realtime chat into your site? Imagine if <a href="https://tumblr.com">Tumblr</a> (which is part of Automattic these days) became decentralised!?</p>
<p>In fact, if you’re a developer in either the Matrix or WordPress communities, now might be a good time to think about how to cross the streams.... not least because Automattic just opened up a role for a <a href="https://automattic.com/work-with-us/matrix-integrations-engineer/">Matrix.org/WordPress Integrations Engineer</a>! Quite aside from the investment, this shows Automattic is serious about Matrix - and we’d like to thank them for opening up jobs in these challenging times to further accelerate Matrix.  Perhaps some day Matrix Engineer will be as common a career choice as Web Developer ;)</p>
<p>That said, it’s super early days for integration work, and there isn’t a concrete project to announce yet beyond the investment in New Vector (which is effectively an extension of the funding NV raised in October) and Automattic’s Job opening - but these are the sort of ideas we’ve been kicking around. And at the very least, we should expect to see Automattic’s communities migrating over to Matrix in the coming months.</p>
<p>It’s been loads of fun working with Matt and the team on this: we see a huge overlap in terms of a genuine love for the open web, open source and open standards.  It’s also no coincidence that Matt (independently of Automattic) donated substantially to Matrix via Patreon back in 2017 when we needed it the most.  We’re also looking forward to benefiting from Automattic’s experience in sustainably and responsibly funding and growing open source projects in general - WordPress.com is an excellent example of how one can support development of a project like WordPress without compromising its open source nature.</p>
<p>So, we’d like to formally welcome WordPress and the rest of the Automattic family into Matrix.  It’s incredibly exciting times, and we can’t wait to see what will come of the partnership!  And meanwhile, if any other massive open source organisations want to join Automattic and <a href="https://matrix.org/blog/2019/12/19/welcoming-mozilla-to-matrix">Mozilla</a> in leaping into Matrix, you know where to find us… :D</p>
<p>Huge thanks go to Matt for believing in Matrix - watch this space for updates.</p>
<ul>
<li>Matthew, Amandine &amp; the Matrix Team.</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;05&#x2F;06&#x2F;cross-signing-and-end-to-end-encryption-by-default-is-here&#x2F;" title="Cross-signing and End-to-end Encryption by Default is HERE!!!">Cross-signing and End-to-end Encryption by Default is HERE!!!</a></h2>
                <span>
                    06.05.2020 00:00
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>As of today, Matrix is end-to-end encrypted <strong>by default</strong> for private conversations.</p>
<p>Three years have passed since we <a href="https://matrix.org/blog/2016/11/21/matrixs-olm-end-to-end-encryption-security-assessment-released-and-implemented-cross-platform-on-riot-at-last">first announced End-to-end Encryption in
Matrix</a>
and started to beta test it in Riot - and after an enormous amount of
polishing and refinement on its user experience, we are finally declaring it
out of beta and enabling it by default for all new private conversations in
Riot.  As Riot is currently the most common Matrix client, this means that
Matrix as a whole should now be considered end-to-end encrypted by default for
DMs and invite-only rooms.</p>
<p>Work on E2EE in Matrix has progressed in waves since we first shipped it - including:</p>
<ul>
<li>adding keysharing (letting you share encryption keys between your devices to improve reliability)</li>
<li>making Riot Web's encryption resilient to running concurrently in multiple tabs</li>
<li>adding online key backup (so you don't lose all your history if you lose all your devices)</li>
<li>making encryption resilient to restoring the app from a backup</li>
<li>adding interactive key verification via emoji to make the verification process easier.</li>
</ul>
<p>However, our goal was always to enable E2EE by default for all private rooms,
which means having feature parity between unencrypted and E2EE Matrix so that
we can enable encryption without <em>any</em> negative impact on usability.  The
high-level remaining items were significant:</p>
<ul>
<li>Cross-signing: verifying your own logins so others don’t have to.</li>
<li>Adding QR codes for even better verification UX, to make cross-signing as painless as possible.</li>
<li>Replacing the old prototype UI for E2EE with final polished UI/UX.</li>
<li>Ability to support non-E2EE clients.</li>
<li>Ability to search encrypted rooms.</li>
<li>Ability to view file indexes in encrypted rooms.</li>
<li>Fixing the remaining “Unable to decrypt” errors.</li>
</ul>
<p>Over the last few months the Riot team has been almost entirely focused on
implementing solutions to these items - and we're finally at the point where
the switch can be flipped and as of Riot Web/Desktop 1.6, Riot iOS 0.11.1 and
RiotX Android 0.19, all new private rooms will be encrypted by default;
completing the transition we began at <a href="https://fosdem.org/2020/schedule/event/matrix/">FOSDEM
2020</a> when we landed
cross-signing E2E-by-default in the development branches of Riot.</p>
<p><strong>For full details, please go check out the <a href="https://blog.riot.im/e2e-encryption-by-default-cross-signing-is-here/">massive deep dive over at the Riot
blog</a></strong> - also featuring all the other recent progress in Riot!</p>
<p>Heads up that encrypted traffic is slightly heavier on the server than
unencrypted (due to exchanging keys, verification traffic, and keybackup
traffic), and so there is a risk that the already-over-popular Matrix.org
server instance may feel a little hugged to death.  However, unprecedented
Synapse performance breakthroughs are on the horizon in the coming weeks which
will fix this - and, of course, you can (and should!) be using your own
instance anyway.</p>
<p>Thanks everyone for helping us test encryption over the years and getting us
to this point: cross-signing provides a more secure way of tracking device
trust than almost any other comms system out there, and we hope that you'll
agree the improved UX has been worth the wait.</p>
<p>Next stop: Synapse performance, and rebuilding Riot's first time user experience!</p>
<p>thanks,</p>
<p>Matthew, Amandine &amp; the Matrix Team.</p>
<p>(Comments over at <a href="https://news.ycombinator.com/item?id=23107564">HN</a>)</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;04&#x2F;29&#x2F;new-categories-for-matrix-spec-changes&#x2F;" title="New Categories for Matrix Spec Changes">New Categories for Matrix Spec Changes</a></h2>
                <span>
                    29.04.2020 22:37
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/andrew-morgan">
                        Andrew Morgan
                    </a>
                </span>
                <br>
                <small>Last update: 29.04.2020 20:50</small>
            </header>
            <div>
                
                <p>On April 14th, the Spec Core Team conducted a long-overdue retrospective
about the things that were working in the
<a href="https://matrix.org/docs/spec/proposals">Matrix Spec Proposal process</a>,
and those that were not.</p>
<p>The most glaring item on the list was the sluggish pace that many Matrix
Spec Changes (MSCs) take throughout the proposal process, as well as the
general lack of activity from the Spec Core Team members on proposals that
have not yet started a Final Comment Period.</p>
<p>We deeply apologize for the frustration this has likely caused many MSC
authors, and want to shed some light on the reasoning behind it, and what we
plan to do to prevent leaving authors in the dark about why there may be no
Spec Core Team activity on their proposal.</p>
<h2 id="proposal-triaging">Proposal Triaging</h2>
<p>There are currently 136 open MSCs that have yet to undergo Final Comment
Period (FCP), 75 of which are marked as proposal-in-review, and 20 that have
a FCP proposed. Relative to the 65 MSCs that have ever been closed, this is a
lot of outstanding ideas, features and maintenance changes.</p>
<p>The Spec Core Team itself is made up of 8 members, each of which have
separate full-time jobs. All team members are well-placed to be on the team
given their wide breadth of knowledge across the Matrix ecosystem,
however the majority are some of the most busy pushing forward Matrix's
reference implementations - without which, Matrix will unquestionably fail.
This limits the amount of MSCs that the team can effectively work on at a
given time.</p>
<p>The team understands that there are MSCs that provide incredibly useful
features, such as
<a href="https://github.com/matrix-org/matrix-doc/pull/2191">support for LaTeX in messages</a>
or
<a href="https://github.com/matrix-org/matrix-doc/pull/2403">the ability to &quot;knock&quot; on rooms</a>,
and would undoubtedly like to see them land at some point.</p>
<p>But there is also a large backlog of MSCs that provide even more fundamental
fixes and additions to the protocol that the team needs to prioritise. These
include things like
<a href="https://github.com/matrix-org/matrix-doc/pull/2472">cross-signing devices</a>,
<a href="https://github.com/matrix-org/matrix-doc/pull/1772">the communities rewrite</a> and
finally merging
<a href="https://github.com/matrix-org/matrix-doc/pull/1849">reactions and edits</a> into the spec.</p>
<p>While we announce what MSCs we're focusing on during a given week during
<a href="https://matrix.org/twim">TWIM</a>, it's not as clear which items we're looking
to pull from the backlog next. To help tackle this, and to help keep us
honest, we've begun putting each MSC into either &quot;feature&quot;, &quot;maintenance&quot;, or
&quot;core&quot; buckets. This materialises in the form of github tags, which can be
used to filter the list of MSCs like so:
<a href="https://github.com/matrix-org/matrix-doc/issues?q=is%3Aopen+label%3Akind%3Afeature">feature</a>,
<a href="https://github.com/matrix-org/matrix-doc/issues?q=is%3Aopen+label%3Akind%3Amaintenance">maintenance</a>,
<a href="https://github.com/matrix-org/matrix-doc/issues?q=is%3Aopen+label%3Akind%3Acore">core</a>.
For a given timespan, we’ll pick a track and pull MSCs out of that category
when possible. More information about MSC categories are now detailed on
<a href="https://matrix.org/docs/spec/proposals#categories">the proposals page</a>.</p>
<p>As for the next 6 to 12 months, we plan to work on items from the “core”
category. We need to get Matrix to a point where it can compete with other,
proprietary chat protocols and items in &quot;core&quot; are decidedly the proposals
that will take us the furthest in that direction. This doesn't mean we won't
occasionally look at an MSC in a different category, but it will heavily
influence our prioritisation.</p>
<h2 id="future">Future</h2>
<p>We'll try this approach out over the next few months and see how it goes. The
next Spec Core Team retro will occur in the middle of May, where we will
review the process once again.</p>
<p>For now, if you have any feedback please come and chat with us in
<a href="https://matrix.to/#/#matrix-spec:matrix.org">#matrix-spec:matrix.org</a> :)</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;04&#x2F;06&#x2F;running-your-own-secure-communication-service-with-matrix-and-jitsi&#x2F;" title="Running your own secure communication service with Matrix and Jitsi">Running your own secure communication service with Matrix and Jitsi</a></h2>
                <span>
                    06.04.2020 00:00
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>Over the last few weeks there's been huge increase in interest from folks
wanting the security and autonomy of running their remote collaboration
services, rather than being at the mercy of traditional proprietary
centralised apps.  Meanwhile, the Matrix.org homeserver has been very
overloaded (although we're at last making excellent progress in radically
improving Synapse's performance) - so it's particularly important right now to
help folks run their own servers.</p>
<p>Therefore we're very happy to announce that it's easier than ever before now to
self-host your own video conferencing alongside Riot &amp; Synapse: as of Riot/Web
1.5.15 (released last week), it's now a single config option to point Riot at
a specific Jitsi rather than needing to hook up to an integration manager!</p>
<p>Meanwhile, over the last 18 months, it's got easier and easier to run your
own Matrix deployments: the Debian packages are unrecognisably better now, and
with <code>.well-known</code> URL support it's trivial to set up federation without
needing to worry about complicated DNS, TLS or load balancer configurations.</p>
<p>So, to try to show off just how smooth this has become, we thought we'd do a
run-through video showing installing Synapse, Riot &amp; Jitsi on a completely
fresh Debian install.  It's (almost) filmed in a single shot, and takes about
20 minutes from beginning to end.</p>
<p>Please note that this does assume you're pretty familiar with Linux system
administration.  If you're not, then we'd recommend using a Matrix hosting
provider such as <a href="https://modular.im">Modular.im</a> (which directly supports development of the core team),
<a href="https://ungleich.ch/u/products/hosted-matrix-chat/">Ungleich.ch</a>, or <a href="https://startupstack.tech/">StartupStack</a>.</p>
<p>Finally, while the video shows how to install on Debian via Debian packages,
there are many many other environments and architectures (e.g. installing
under Docker) - this is just one relatively easy way to skin the cat.  Perhaps
there will be other 'speed-run' videos in future :)</p>
<iframe src="https://www.youtube.com/embed/dDddKmdLEdg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>If you want to follow along at home without listening to the video (and I can't blame you if you do ;) the high level steps are as follows:</p>
<h3 id="debian-dns">Debian &amp; DNS</h3>
<ul>
<li>Take one fresh Debian 10 install.</li>
<li>Point the DNS for your domain to it.  You should use separate subdomains for the various services as a hygiene measure to make cross-site scripting attacks less effective.  In this example, we set up DNS for:
<ul>
<li><code>dangerousdemos.net</code> (general website, and for hosting a .well-known path to advertise the Matrix service)</li>
<li><code>matrix.dangerousdemos.net</code> (Synapse)</li>
<li><code>riot.dangerousdemos.net</code> (Riot/Web)</li>
<li><code>jitsi.dangerousdemos.net</code> (Jitsi video conferencing)</li>
<li>In practice, we used a <code>*.dangerousdemos.net</code> wildcard DNS record for the three subdomains in this instance.</li>
</ul>
</li>
</ul>
<h3 id="nginx-and-letsencrypt">Nginx and LetsEncrypt</h3>
<ul>
<li>Install nginx as a webserver: <code>apt-get update &amp;&amp; apt -y install nginx</code></li>
<li>Go to <code>/etc/nginx/sites-enabled</code> and copy the vhost configuration block from the bottom of <code>default</code> to new files called <code>dangerousdemos.net</code>, <code>matrix.dangerousdemos.net</code>, and <code>riot.dangerousdemos.net</code>.  We don't set up <code>jitsi.dangerousdemos.net</code> at this point as the jitsi installer handles it for us.
<ul>
<li>Rename the <code>server_name</code> field in the new files to match the hostname of each host, and point <code>root</code> to an appropriate location per domain (e.g. <code>/var/www/dangerousdemos.net</code> for the main domain, or <code>/var/www/riot.dangerousdemos.net/riot</code> for riot)</li>
<li>For the Synapse domain (<code>matrix.dangerousdemos.net</code> here), you should replace the contents of the <code>location</code> block with <code>proxy_pass http://localhost:8008;</code> - telling nginx to pass the traffic through to synapse, which listens by default for plaintext HTTP traffic on port 8008.  (N.B. do <strong>not</strong> put a trailing slash on the URL here, otherwise nginx will mangle the forwarded URLs.)</li>
</ul>
</li>
<li>Enable TLS via LetsEncrypt on nginx, by: <code>apt install -y python3-certbot-nginx &amp;&amp; certbot --nginx -d dangerousdemos.net -d riot.dangerousdemos.net -d matrix.dangerousdemos.net</code> (or whatever your domains are).</li>
<li>You should be able to go to https://dangerousdemos.net at this point and see a page with valid HTTPS.</li>
</ul>
<h3 id="synapse">Synapse</h3>
<ul>
<li>Then, install Synapse via Debian packages using the instructions at https://github.com/matrix-org/synapse/blob/master/INSTALL.md#debianubuntu (see below).  If you're not on Debian, keep an eye out for all the other OSes we support too!
<ul>
<li>You should specify the server name to be the domain you want in your matrix IDs - i.e. <code>dangerousdemos.net</code> in this example.</li>
<li>Please report anonymous aggregate stats to us so we can gauge uptake and help justify funding for Matrix!</li>
</ul>
</li>
</ul>
<pre style="background-color:#1e1e1e;color:#dcdcdc;"><code><span>sudo apt install -y lsb-release wget apt-transport-https
</span><span>sudo wget -O /usr/share/keyrings/matrix-org-archive-keyring.gpg https://packages.matrix.org/debian/matrix-org-archive-keyring.gpg
</span><span>echo &quot;deb [signed-by=/usr/share/keyrings/matrix-org-archive-keyring.gpg] https://packages.matrix.org/debian/ $(lsb_release -cs) main&quot; |
</span><span>    sudo tee /etc/apt/sources.list.d/matrix-org.list
</span><span>sudo apt update
</span><span>sudo apt install matrix-synapse-py3
</span></code></pre>
<ul>
<li>
<p>You should now be able to go to https://matrix.dangerousdemos.net and see a valid &quot;It works! Synapse is running&quot; page.</p>
</li>
<li>
<p>Then, you should enable registration on your synapse by switching <code>enable_registration: true</code> in <code>/etc/matrix-synapse/homeserver.yaml</code> and restarting synapse via <code>systemctl restart matrix-synapse</code>.</p>
</li>
<li>
<p>Now you need to tell the rest of Matrix how to find your server.  The easiest way to do this is to publish a file at https://dangerousdemos.net/.well-known/matrix/server which tells everyone the hostname and port where they can find the synapse for dangerousdemos.net - in this instance, it's <code>matrix.dangerousdemos.net:443</code>:</p>
</li>
</ul>
<pre style="background-color:#1e1e1e;color:#dcdcdc;"><code><span>mkdir -p /var/www/dangerousdemos.net/.well-known/matrix
</span><span>cd /var/www/dangerousdemos.net/.well-known/matrix
</span><span>echo &#39;{ &quot;m.server&quot;: &quot;matrix.dangerousdemos.net:443&quot; }&#39; &gt; server
</span></code></pre>
<ul>
<li><strong>Alternatively</strong>, you could advertise the server via DNS, if you don't have write access to <code>/.well-known</code> on your main domain.  However, to prove you are allowed to host the Matrix traffic for dangerousdemos.net, you would have to configure nginx to use the dangerousdemos.net TLS certificate for the matrix.dangerousdemos.net vhost (i.e. the &quot;wrong&quot; one), and in general we think that <code>/.well-known</code> is much easier to reason about.  In this case you would advertise the server with an SRV record like this:</li>
</ul>
<pre style="background-color:#1e1e1e;color:#dcdcdc;"><code><span>_matrix._tcp.dangerousdemos.net. 300    IN  SRV 10 5 443 matrix.dangerousdemos.net.
</span></code></pre>
<h3 id="riot-web">Riot/Web</h3>
<ul>
<li>Then, install Riot/Web.  Grab the latest .tgz release from https://github.com/vector-im/riot-web/releases.  You should check its GnuPG signature too:</li>
</ul>
<pre style="background-color:#1e1e1e;color:#dcdcdc;"><code><span>mkdir /var/www/riot.dangerousdemos.net
</span><span>cd /var/www/riot.dangerousdemos.net
</span><span>wget https://github.com/vector-im/riot-web/releases/download/v1.5.15/riot-v1.5.15.tar.gz
</span><span>
</span><span># check its GnuPG signature (particularly advisable, given Riot is what stores
</span><span># your end-to-end encryption keys)
</span><span>apt install -y gnupg
</span><span>wget https://github.com/vector-im/riot-web/releases/download/v1.5.15/riot-v1.5.15.tar.gz.asc
</span><span>
</span><span># grab the signing key for the riot releases repository, ideally from a keyserver...
</span><span>gpg --keyserver keyserver.ubuntu.com --search-keys releases@riot.im
</span><span>
</span><span># ...and/or you can grab or cross-check the signing key from packages.riot.im
</span><span>wget https://packages.riot.im/riot-release-key.asc
</span><span>gpg --import riot-release-key.asc
</span><span>
</span><span>gpg --verify riot-v1.5.15.tar.gz.asc
</span><span># hopefully this will report &quot;Good signature&quot;, even though it won&#39;t know to trust the riot release key.
</span><span>
</span><span># you could also choose to explicitly trust the key by editing it, entering &#39;trust&#39; and then &#39;5&#39; for ultimate trust.
</span><span>gpg --edit-key 74692659bda3d940
</span><span>
</span><span>tar -xzvf riot-v1.5.15.tar.gz
</span><span>ln -s riot-v1.5.15 riot
</span><span>chown www-data:www-data -R riot
</span><span>cd riot
</span><span>cp config.sample.json config.json
</span></code></pre>
<ul>
<li>You then tweak the <code>config.json</code> to change the <code>base_url</code> of the homeserver to be <code>https://matrix.dangerousdemos.net</code> (i.e. where to find the Client Server API for your server), and change the <code>server_name</code> to be <code>dangerousdemos.net</code> (i.e. the name of your server).</li>
<li>You should then be able to go to https://riot.dangerousdemos.net, register for an account, sign in, and talk to the rest of Matrix!</li>
</ul>
<h3 id="jitsi">Jitsi</h3>
<ul>
<li>Finally, we install Jitsi so you can run your own video conferencing.  We take the instructions from <a href="https://github.com/jitsi/jitsi-meet/blob/master/doc/quick-install.md">Jitsi's quick install guide</a>:</li>
</ul>
<pre style="background-color:#1e1e1e;color:#dcdcdc;"><code><span>echo &#39;deb https://download.jitsi.org stable/&#39; &gt;&gt; /etc/apt/sources.list.d/jitsi-stable.list
</span><span>wget -qO -  https://download.jitsi.org/jitsi-key.gpg.key | sudo apt-key add -
</span><span>apt-get update
</span><span>apt-get -y install jitsi-meet
</span></code></pre>
<ul>
<li>
<p>We give the installer the hostname <code>jitsi.dangerousdemos.net</code>.  <strong>Make sure this DNS is already set up, otherwise the installer will fail!</strong></p>
</li>
<li>
<p>The installer magically detects you have nginx installed and adds in an appropriate vhost!</p>
</li>
<li>
<p>We select a self-signed certificate for now, and then upgrade it to LetsEncrypt after the fact with <code>/usr/share/jitsi-meet/scripts/install-letsencrypt-cert.sh</code>.</p>
<ul>
<li>Alternatively, you could have specified manual certificates, and then used <code>certbot</code> alongside the rest of nginx to create a certificate for <code>jitsi.dangerousdemos.net</code> - both work.</li>
</ul>
</li>
<li>
<p>You should now be able to go to https://jitsi.dangerousdemos.net and use the Jitsi directly.</p>
</li>
<li>
<p>Finally, and this is the cool new bit: you can now point Riot to use the new Jitsi by going to its config.json at <code>/var/www/riot.dangerousdemos.net/riot/config.json</code> and changing the <code>preferredDomain</code> of the <code>jitsi</code> block from <code>https://jitsi.riot.im</code> to your own self-hosted <code>https://jitsi.dangerousdemos.net</code>.</p>
</li>
<li>
<p>You then refresh your Riot/Web, and you should be all set to use Jitsi from within your new Riot - as Riot/Web 1.5.15 and later has the ability to natively embed Jitsi straight into the app without needing to use an integration manager.</p>
</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>Matrix nowadays provides an excellent alternative to the centralised solutions.  It gives:</p>
<ul>
<li>Full autonomy over how to host and store your own conversations</li>
<li>Full freedom to talk to anyone else on the wider global Matrix network (or indeed anyone else bridged into Matrix)</li>
<li>Full privacy via full end-to-end-encryption for chats, file transfer and 1:1 voice/video calls (when enabled)</li>
<li>Full transparency by being 100% open source (as well as benefiting from the overall open source community)</li>
</ul>
<p>Hopefully this gives some confidence that it's pretty easy to run your own fully functional Matrix instance these days.
If not, then hopefully someone will do a similar one to show off Docker!
And if that's still too scary, please take a look at a hosting services like <a href="https://modular.im">Modular.im</a>.</p>
<p>(Comments over at <a href="https://news.ycombinator.com/item?id=22793239">HN</a> and <a href="https://news.ycombinator.com/item?id=22802645">here too</a>)</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;02&#x2F;24&#x2F;synapse-1-11-0-released&#x2F;" title="Synapse 1.11.0 released">Synapse 1.11.0 released</a></h2>
                <span>
                    24.02.2020 00:00
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>Synapse 1.11 landed on Friday (sorry for running late on blogging the release notes!)</p>
<p>The main change is to introduce an experimental API <a href="https://github.com/matrix-org/matrix-doc/pull/2432">MSC2432</a> for managing aliases for rooms on your local server.  In Synapse 1.10 we removed support for <code>m.room.aliases</code> events, which were a way to try to track which aliases a room had on the room itself (but were vulnerable to abuse).  In this release we've re-added the ability to query which aliases a given server has for the room, giving visibility for managing aliases, without having them spray all over the room state itself.  Riot/Web 1.5.10 supports the new API, giving a way to manage aliases on your local server while we finish off the remaining work to improve alias safety &amp; maintenance.</p>
<p>We've also changed the default power levels for new rooms so that room upgrades and ACLs require you to be an Admin (PL100), and invites in public rooms now require you to be a moderator (PL50).</p>
<p>Get the new release from <a href="https://github.com/matrix-org/synapse/releases/tag/v1.11.0">github</a> or any of the sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md.</p>
<h1 id="synapse-1-11-0-2020-02-21">Synapse 1.11.0 (2020-02-21)</h1>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Small grammatical fixes to the ACME v1 deprecation notice. (<a href="https://github.com/matrix-org/synapse/issues/6944">#6944</a>)</li>
</ul>
<h1 id="synapse-1-11-0rc1-2020-02-19">Synapse 1.11.0rc1 (2020-02-19)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Admin API to add or modify threepids of user accounts. (<a href="https://github.com/matrix-org/synapse/issues/6769">#6769</a>)</li>
<li>Limit the number of events that can be requested by the backfill federation API to 100. (<a href="https://github.com/matrix-org/synapse/issues/6864">#6864</a>)</li>
<li>Add ability to run some group APIs on workers. (<a href="https://github.com/matrix-org/synapse/issues/6866">#6866</a>)</li>
<li>Reject device display names over 100 characters in length to prevent abuse. (<a href="https://github.com/matrix-org/synapse/issues/6882">#6882</a>)</li>
<li>Add ability to route federation user device queries to workers. (<a href="https://github.com/matrix-org/synapse/issues/6873">#6873</a>)</li>
<li>The result of a user directory search can now be filtered via the spam checker. (<a href="https://github.com/matrix-org/synapse/issues/6888">#6888</a>)</li>
<li>Implement new <code>GET /_matrix/client/unstable/org.matrix.msc2432/rooms/{roomId}/aliases</code> endpoint as per <a href="https://github.com/matrix-org/matrix-doc/pull/2432">MSC2432</a>. (<a href="https://github.com/matrix-org/synapse/issues/6939">#6939</a>, <a href="https://github.com/matrix-org/synapse/issues/6948">#6948</a>, <a href="https://github.com/matrix-org/synapse/issues/6949">#6949</a>)</li>
<li>Stop sending <code>m.room.aliases</code> events when adding / removing aliases. Check <code>alt_aliases</code> in the latest <code>m.room.canonical_alias</code> event when deleting an alias. (<a href="https://github.com/matrix-org/synapse/issues/6904">#6904</a>)</li>
<li>Change the default power levels of invites, tombstones and server ACLs for new rooms. (<a href="https://github.com/matrix-org/synapse/pull/6834">#6834</a>)</li>
</ul>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fixed third party event rules function <code>on_create_room</code>'s return value being ignored. (<a href="https://github.com/matrix-org/synapse/issues/6781">#6781</a>)</li>
<li>Allow URL-encoded User IDs on <code>/_synapse/admin/v2/users/&lt;user_id&gt;[/admin]</code> endpoints. Thanks to @NHAS for reporting. (<a href="https://github.com/matrix-org/synapse/issues/6825">#6825</a>)</li>
<li>Fix Synapse refusing to start if <code>federation_certificate_verification_whitelist</code> option is blank. (<a href="https://github.com/matrix-org/synapse/issues/6849">#6849</a>)</li>
<li>Fix errors from logging in the purge jobs related to the message retention policies support. (<a href="https://github.com/matrix-org/synapse/issues/6945">#6945</a>)</li>
<li>Return a 404 instead of 200 for querying information of a non-existent user through the admin API. (<a href="https://github.com/matrix-org/synapse/issues/6901">#6901</a>)</li>
</ul>
<h2 id="updates-to-the-docker-image">Updates to the Docker image</h2>
<ul>
<li>The deprecated &quot;generate-config-on-the-fly&quot; mode is no longer supported. (<a href="https://github.com/matrix-org/synapse/issues/6918">#6918</a>)</li>
</ul>
<h2 id="improved-documentation-1">Improved Documentation</h2>
<ul>
<li>Add details of PR merge strategy to contributing docs. (<a href="https://github.com/matrix-org/synapse/issues/6846">#6846</a>)</li>
<li>Spell out that the last event sent to a room won't be deleted by a purge. (<a href="https://github.com/matrix-org/synapse/issues/6891">#6891</a>)</li>
<li>Update Synapse's documentation to warn about the deprecation of ACME v1. (<a href="https://github.com/matrix-org/synapse/issues/6905">#6905</a>, <a href="https://github.com/matrix-org/synapse/issues/6907">#6907</a>, <a href="https://github.com/matrix-org/synapse/issues/6909">#6909</a>)</li>
<li>Add documentation for the spam checker. (<a href="https://github.com/matrix-org/synapse/issues/6906">#6906</a>)</li>
<li>Fix worker docs to point <code>/publicised_groups</code> API correctly. (<a href="https://github.com/matrix-org/synapse/issues/6938">#6938</a>)</li>
<li>Clean up and update docs on setting up federation. (<a href="https://github.com/matrix-org/synapse/issues/6940">#6940</a>)</li>
<li>Add a warning about indentation to generated configuration files. (<a href="https://github.com/matrix-org/synapse/issues/6920">#6920</a>)</li>
<li>Databases created using the compose file in contrib/docker will now always have correct encoding and locale settings. Contributed by Fridtjof Mund. (<a href="https://github.com/matrix-org/synapse/issues/6921">#6921</a>)</li>
<li>Update pip install directions in readme to avoid error when using zsh. (<a href="https://github.com/matrix-org/synapse/issues/6855">#6855</a>)</li>
</ul>
<h2 id="deprecations-and-removals">Deprecations and Removals</h2>
<ul>
<li>Remove <code>m.lazy_load_members</code> from <code>unstable_features</code> since lazy loading is in the stable Client-Server API version r0.5.0. (<a href="https://github.com/matrix-org/synapse/issues/6877">#6877</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Add type hints to <code>SyncHandler</code>. (<a href="https://github.com/matrix-org/synapse/issues/6821">#6821</a>)</li>
<li>Refactoring work in preparation for changing the event redaction algorithm. (<a href="https://github.com/matrix-org/synapse/issues/6823">#6823</a>, <a href="https://github.com/matrix-org/synapse/issues/6827">#6827</a>, <a href="https://github.com/matrix-org/synapse/issues/6854">#6854</a>, <a href="https://github.com/matrix-org/synapse/issues/6856">#6856</a>, <a href="https://github.com/matrix-org/synapse/issues/6857">#6857</a>, <a href="https://github.com/matrix-org/synapse/issues/6858">#6858</a>)</li>
<li>Fix stacktraces when using <code>ObservableDeferred</code> and async/await. (<a href="https://github.com/matrix-org/synapse/issues/6836">#6836</a>)</li>
<li>Port much of <code>synapse.handlers.federation</code> to async/await. (<a href="https://github.com/matrix-org/synapse/issues/6837">#6837</a>, <a href="https://github.com/matrix-org/synapse/issues/6840">#6840</a>)</li>
<li>Populate <code>rooms.room_version</code> database column at startup, rather than in a background update. (<a href="https://github.com/matrix-org/synapse/issues/6847">#6847</a>)</li>
<li>Reduce amount we log at <code>INFO</code> level. (<a href="https://github.com/matrix-org/synapse/issues/6833">#6833</a>, <a href="https://github.com/matrix-org/synapse/issues/6862">#6862</a>)</li>
<li>Remove unused <code>get_room_stats_state</code> method. (<a href="https://github.com/matrix-org/synapse/issues/6869">#6869</a>)</li>
<li>Add typing to <code>synapse.federation.sender</code> and port to async/await. (<a href="https://github.com/matrix-org/synapse/issues/6871">#6871</a>)</li>
<li>Refactor <code>_EventInternalMetadata</code> object to improve type safety. (<a href="https://github.com/matrix-org/synapse/issues/6872">#6872</a>)</li>
<li>Add an additional entry to the SyTest blacklist for worker mode. (<a href="https://github.com/matrix-org/synapse/issues/6883">#6883</a>)</li>
<li>Fix the use of sed in the linting scripts when using BSD sed. (<a href="https://github.com/matrix-org/synapse/issues/6887">#6887</a>)</li>
<li>Add type hints to the spam checker module. (<a href="https://github.com/matrix-org/synapse/issues/6915">#6915</a>)</li>
<li>Convert the directory handler tests to use HomeserverTestCase. (<a href="https://github.com/matrix-org/synapse/issues/6919">#6919</a>)</li>
<li>Increase DB/CPU perf of <code>_is_server_still_joined</code> check. (<a href="https://github.com/matrix-org/synapse/issues/6936">#6936</a>)</li>
<li>Tiny optimisation for incoming HTTP request dispatch. (<a href="https://github.com/matrix-org/synapse/issues/6950">#6950</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;02&#x2F;12&#x2F;synapse-1-10-0-released&#x2F;" title="Synapse 1.10.0 released">Synapse 1.10.0 released</a></h2>
                <span>
                    12.02.2020 00:00
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/neil-johnson">
                        Neil Johnson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>The whole Matrix project is racing towards enabling e2ee by default. Synapse is no different and v1.10.0 contains multiple e2ee UX improvements, as well as a bug fix that prevented cross signing requests over federation to work reliably.</p>
<p><em>If</em> any of your users are on the bleeding edge and have already started using cross signing (by enabling labs flags in Riot), then it will be necessary for them to force Synapse to re-send device updates by renaming all of their devices.</p>
<p>We've also included a temporary fix to address alias abuse. The idea is that until <a href="https://github.com/matrix-org/synapse/issues/6898">#6898</a> lands, servers will refrain from sharing events of type <code>m.room.aliases</code> with clients. Most admins will not be affected, but if you are present in rooms subject to alias abuse, then upgrading provides a pragmatic short term solution.</p>
<p>Finally, as of this release Synapse validates <code>client_secret</code> parameters in the Client-Server API as per the spec. See <a href="https://github.com/matrix-org/synapse/issues/6766">#6766</a> for details.</p>
<p>Get the new release from <a href="https://github.com/matrix-org/synapse/releases/tag/v1.10.0">github</a> or any of the sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md.</p>
<p>Changelog since Synapse 1.9.0</p>
<h1 id="synapse-1-10-0-2020-02-12">Synapse 1.10.0 (2020-02-12)</h1>
<p><strong>WARNING to client developers</strong>: As of this release Synapse validates <code>client_secret</code> parameters in the Client-Server API as per the spec. See <a href="https://github.com/matrix-org/synapse/issues/6766">#6766</a> for details.</p>
<h2 id="updates-to-the-docker-image">Updates to the Docker image</h2>
<ul>
<li>Update the docker images to Alpine Linux 3.11. (<a href="https://github.com/matrix-org/synapse/issues/6897">#6897</a>)</li>
</ul>
<h1 id="synapse-1-10-0rc5-2020-02-11">Synapse 1.10.0rc5 (2020-02-11)</h1>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix the filtering introduced in 1.10.0rc3 to also apply to the state blocks returned by <code>/sync</code>. (<a href="https://github.com/matrix-org/synapse/issues/6884">#6884</a>)</li>
</ul>
<h1 id="synapse-1-10-0rc4-2020-02-11">Synapse 1.10.0rc4 (2020-02-11)</h1>
<p>This release candidate was built incorrectly and is superseded by 1.10.0rc5.</p>
<h1 id="synapse-1-10-0rc3-2020-02-10">Synapse 1.10.0rc3 (2020-02-10)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Filter out <code>m.room.aliases</code> from the CS API to mitigate abuse while a better solution is specced. (<a href="https://github.com/matrix-org/synapse/issues/6878">#6878</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Fix continuous integration failures with old versions of <code>pip</code>, which were introduced by a release of the <code>zipp</code> library. (<a href="https://github.com/matrix-org/synapse/issues/6880">#6880</a>)</li>
</ul>
<h1 id="synapse-1-10-0rc2-2020-02-06">Synapse 1.10.0rc2 (2020-02-06)</h1>
<h2 id="bugfixes-1">Bugfixes</h2>
<ul>
<li>Fix an issue with cross-signing where device signatures were not sent to remote servers. (<a href="https://github.com/matrix-org/synapse/issues/6844">#6844</a>)</li>
<li>Fix to the unknown remote device detection which was introduced in 1.10.rc1. (<a href="https://github.com/matrix-org/synapse/issues/6848">#6848</a>)</li>
</ul>
<h2 id="internal-changes-1">Internal Changes</h2>
<ul>
<li>Detect unexpected sender keys on remote encrypted events and resync device lists. (<a href="https://github.com/matrix-org/synapse/issues/6850">#6850</a>)</li>
</ul>
<h1 id="synapse-1-10-0rc1-2020-01-31">Synapse 1.10.0rc1 (2020-01-31)</h1>
<h2 id="features-1">Features</h2>
<ul>
<li>Add experimental support for updated authorization rules for aliases events, from <a href="https://github.com/matrix-org/matrix-doc/pull/2260">MSC2260</a>. (<a href="https://github.com/matrix-org/synapse/issues/6787">#6787</a>, <a href="https://github.com/matrix-org/synapse/issues/6790">#6790</a>, <a href="https://github.com/matrix-org/synapse/issues/6794">#6794</a>)</li>
</ul>
<h2 id="bugfixes-2">Bugfixes</h2>
<ul>
<li>Warn if postgres database has a non-C locale, as that can cause issues when upgrading locales (e.g. due to upgrading OS). (<a href="https://github.com/matrix-org/synapse/issues/6734">#6734</a>)</li>
<li>Minor fixes to <code>PUT /_synapse/admin/v2/users</code> admin api. (<a href="https://github.com/matrix-org/synapse/issues/6761">#6761</a>)</li>
<li>Validate <code>client_secret</code> parameter using the regex provided by the Client-Server API, temporarily allowing <code>:</code> characters for older clients. The <code>:</code> character will be removed in a future release. (<a href="https://github.com/matrix-org/synapse/issues/6767">#6767</a>)</li>
<li>Fix persisting redaction events that have been redacted (or otherwise don't have a redacts key). (<a href="https://github.com/matrix-org/synapse/issues/6771">#6771</a>)</li>
<li>Fix outbound federation request metrics. (<a href="https://github.com/matrix-org/synapse/issues/6795">#6795</a>)</li>
<li>Fix bug where querying a remote user's device keys that weren't cached resulted in only returning a single device. (<a href="https://github.com/matrix-org/synapse/issues/6796">#6796</a>)</li>
<li>Fix race in federation sender worker that delayed sending of device updates. (<a href="https://github.com/matrix-org/synapse/issues/6799">#6799</a>, <a href="https://github.com/matrix-org/synapse/issues/6800">#6800</a>)</li>
<li>Fix bug where Synapse didn't invalidate cache of remote users' devices when Synapse left a room. (<a href="https://github.com/matrix-org/synapse/issues/6801">#6801</a>)</li>
<li>Fix waking up other workers when remote server is detected to have come back online. (<a href="https://github.com/matrix-org/synapse/issues/6811">#6811</a>)</li>
</ul>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Clarify documentation related to <code>user_dir</code> and <code>federation_reader</code> workers. (<a href="https://github.com/matrix-org/synapse/issues/6775">#6775</a>)</li>
</ul>
<h2 id="internal-changes-2">Internal Changes</h2>
<ul>
<li>Record room versions in the <code>rooms</code> table. (<a href="https://github.com/matrix-org/synapse/issues/6729">#6729</a>, <a href="https://github.com/matrix-org/synapse/issues/6788">#6788</a>, <a href="https://github.com/matrix-org/synapse/issues/6810">#6810</a>)</li>
<li>Propagate cache invalidates from workers to other workers. (<a href="https://github.com/matrix-org/synapse/issues/6748">#6748</a>)</li>
<li>Remove some unnecessary admin handler abstraction methods. (<a href="https://github.com/matrix-org/synapse/issues/6751">#6751</a>)</li>
<li>Add some debugging for media storage providers. (<a href="https://github.com/matrix-org/synapse/issues/6757">#6757</a>)</li>
<li>Detect unknown remote devices and mark cache as stale. (<a href="https://github.com/matrix-org/synapse/issues/6776">#6776</a>, <a href="https://github.com/matrix-org/synapse/issues/6819">#6819</a>)</li>
<li>Attempt to resync remote users' devices when detected as stale. (<a href="https://github.com/matrix-org/synapse/issues/6786">#6786</a>)</li>
<li>Delete current state from the database when server leaves a room. (<a href="https://github.com/matrix-org/synapse/issues/6792">#6792</a>)</li>
<li>When a client asks for a remote user's device keys check if the local cache for that user has been marked as potentially stale. (<a href="https://github.com/matrix-org/synapse/issues/6797">#6797</a>)</li>
<li>Add background update to clean out left rooms from current state. (<a href="https://github.com/matrix-org/synapse/issues/6802">#6802</a>, <a href="https://github.com/matrix-org/synapse/issues/6816">#6816</a>)</li>
<li>Refactoring work in preparation for changing the event redaction algorithm. (<a href="https://github.com/matrix-org/synapse/issues/6803">#6803</a>, <a href="https://github.com/matrix-org/synapse/issues/6805">#6805</a>, <a href="https://github.com/matrix-org/synapse/issues/6806">#6806</a>, <a href="https://github.com/matrix-org/synapse/issues/6807">#6807</a>, <a href="https://github.com/matrix-org/synapse/issues/6820">#6820</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;12&#x2F;24&#x2F;the-2019-matrix-holiday-update&#x2F;" title="The 2019 Matrix Holiday Update!">The 2019 Matrix Holiday Update!</a></h2>
                <span>
                    24.12.2019 00:00
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>Every year we do an annual wrap-up and retrospective of all the things happening in the Matrix core team - if you’re feeling particularly curious or bored you can check out the <a href="https://matrix.org/blog/2015/12/25/the-matrix-holiday-special/">2015</a>, <a href="https://matrix.org/blog/2016/12/26/the-matrix-holiday-special-2016-edition/">2016</a>, <a href="https://matrix.org/blog/2017/12/25/the-matrix-holiday-mini-special-2017-edition/">2017</a> and <a href="https://matrix.org/blog/2018/12/25/the-2018-matrix-holiday-special/">2018</a> editions for context.  The idea is to look at the bigger picture trends in Matrix outside of the weekly <a href="https://matrix.org/blog/category/this-week-in-matrix/">TWIM</a> posts to get an idea of the stuff which we made progress on, and the stuff which still remains.</p>
<p>That said, it’s hard to know where to start - Matrix accelerated more than ever before in 2019, and there’s been progress on pretty much all battlefronts.  So as a different format, let’s take the <a href="https://matrix.org/blog/2018/12/25/the-2018-matrix-holiday-special#2019">stuff we said we had planned for 2019</a> from the end of last year’s update and see what we actually achieved...</p>
<h4 id="2019-the-immediate-priorities">2019: the immediate priorities</h4>
<p>So, our immediate priorities for 2019 were:</p>
<ul>
<li><em>r0 spec releases across the board (aka Matrix 1.0)</em></li>
<li><em>Implementing them in Synapse</em></li>
</ul>
<p>✅ Well, unless you’ve been floating in a sensory deprivation tank for the last year, hopefully you spotted that Matrix (as a protocol) finally exited beta - starting off with the announcement at FOSDEM in February of the <a href="https://matrix.org/blog/2019/02/04/matrix-at-fosdem-2019/">first stable release of the Server-Server API</a>, alongside the Synapse 0.99.x series as we began the process of migrating to the 1.0 APIs.</p>
<p>Specifically this meant killing off self-signed certificates, adding .well-known server discovery and implementing room version semantics so we could upgrade the underlying room version algorithm to fix the residual flaws.  This culminated in June with the <a href="https://matrix.org/blog/2019/06/11/introducing-matrix-1-0-and-the-matrix-org-foundation/">official release of Matrix 1.0</a> - now including the remaining APIs and a stable release of Synapse 1.0.  The emphasis was on addressing all the main pre-1.0 design flaws rather than adding features or performance, but with 1.0 out the door at last we’ve been able to make progress there too.</p>
<ul>
<li><em>Landing the Riot redesign</em></li>
</ul>
<p>✅ The full redesign of Riot’s UI on Web/Desktop landed shortly after FOSDEM in Feb with <a href="https://medium.com/@RiotChat/the-big-1-0-68fa7c6050be">The Big 1.0</a>. Cosmetically we got most of the new look &amp; feel in place, and have had very positive feedback overall - although some of the UX thinkos of the old app remain and coming up on the radar for fixing.</p>
<ul>
<li><em>Finalising the Matrix.org Foundation</em> </li>
</ul>
<p>✅ This happened too, coincident with releasing Matrix 1.0 in June - read all about it at <a href="https://matrix.org/foundation">https://matrix.org/foundation</a>. So far the governance and legal infrastructure the Foundation provides has helped the project significantly, and while it was a mammoth task to organise, we’re very glad it’s here!  Huge thanks go out to Jon, Ross and Jutta for agreeing to join the foundation as Guardians - they have been excellent in patiently listening to the various dramas of the year and ensuring Matrix’s neutrality and that we keep an even keel.</p>
<ul>
<li><em>Landing all the new E2E encryption UX and features</em></li>
</ul>
<p>The good news on E2E encryption is that we’ve been making solid progress throughout the year - the bad news is that we are still yet to turn it on by default.  Progress updates for the various pieces of the puzzle are as follows:</p>
<ul>
<li>
<p>✅ The final UX is pretty much locked down (after several iterations as we try to tread the balance between trustworthiness and security) - here’s a <a href="https://www.figma.com/file/wwqBo5oAFfk8XKmtd2YaIs/Cross-signing">sneak preview</a> of what we’re aiming at.</p>
</li>
<li>
<p>🏗 Cross-signing is the single biggest remaining piece of work in progress - letting users attest to the trustworthiness of their own devices, so you only ever have to trust a given user once rather than trusting all their devices individually. We gave a <a href="https://youtu.be/C2eE7rCUKlE?t=2974">very early demo</a> of an experimental implementation back at FOSDEM in Feb, inspired by some of the initial spec proposal at <a href="https://github.com/uhoreg/matrix-doc/blob/cross-signing/proposals/1680-cross-signing.md">MSC1680</a> (MSC = Matrix Spec Change, our <a href="https://matrix.org/docs/spec/proposals">process for evolving Matrix</a>).</p>
<p>However, having played with it a bit, MSC1680 turned out to be too generic and complicated (it worked by the user signing a device with any other of their devices, building a twisted maze of which device vouched for which) - and we replaced it with <a href="https://github.com/matrix-org/matrix-doc/pull/1756">MSC1756</a>, which shifts the model to be the simpler “the user has a key, which they use to sign their devices”. However, this in turn requires more infrastructure - you need somewhere secure to store your signing key, which prompted <a href="https://github.com/uhoreg/matrix-doc/blob/ssss/proposals/1946-secure_server-side_storage.md">MSC1946</a> - Secure Secret Storage &amp; Sharing (SSSS): the ability to sync your signing key between devices by storing it (encrypted, of course) on the server.</p>
<p>Meanwhile, it also became obvious that the primitives for key verification needed to be improved too: introducing verification by emoji comparison (<a href="https://github.com/matrix-org/matrix-doc/issues/1267">MSC1267</a>) and QR codes (<a href="https://github.com/matrix-org/matrix-doc/issues/1543">MSC1543</a>), and switching key verification to be performed in the context of a DM (<a href="https://github.com/matrix-org/matrix-doc/pull/2241">MSC2241</a>) so that you can see your verification history, find verifications, and easily dip in and out of verifying users as needed.</p>
<p>Whilst everyone else was panicking about Matrix 1.0 and associated baggage, Uhoreg was off in the wilderness plugging his way through all of this - iterating on the design, speccing it and implementing it in synapse and matrix-js-sdk, complete with a test jig to demonstrate it all working (<a href="https://scitech.video/videos/watch/1c8a0262-dee9-4927-b9e9-9856a7f4d8bf">part 1</a> and <a href="https://scitech.video/videos/watch/d1ef04a8-397a-4570-a9a9-cef143ea637c">part 2</a>).  Over the last few months the rest of the team has joined him though, and we’ve been frantically working away implementing it all on both Riot/Web, iOS &amp; RiotX/Android.  For instance - here’s <a href="https://matrix.org/_matrix/media/r0/download/matrix.org/IoFfFRWTmRNTbNDzfmKFPvLq">verification happening in DM</a> between Riot/Web &amp; RiotX a few weeks ago, and here’s a very early (unskinned) cut of <a href="https://matrix.org/_matrix/media/r0/download/matrix.org/tAWxQKhrfiPxBvtAOQfMiGjW">verification</a> happening in Riot/Web’s RightPanel a few days ago.</p>
<p>We were hoping to get cross-signing ready for the end of 2019, but in practice we’re now sprinting to get it done by FOSDEM 2020 in Feb - not least because we have a main-stage talk proposed to tell everyone how we landed it and turned on E2E by default... ;)</p>
</li>
<li>
<p>✅ Support for non-E2E clients.  The last thing we want is to make it impossible to write a simple Matrix client, or to suddenly excommunicate (hah) all the existing Matrix bots &amp; bridges which haven’t implemented E2E.  To this end, poljar created <a href="https://github.com/matrix-org/pantalaimon">pantalaimon</a> - our very own Matrix daemon, which can sit in the background and offload all your E2EE from your Matrix client by acting as a transparent Matrix proxy which magically encrypts everything.  Built on matrix-nio and asyncio python3, We use it in production today for running various bots and it works excellently.</p>
</li>
<li>
<p>✅ Support for search in E2E rooms.  Hot off the heels of pantalaimon’s success, poljar also created <a href="https://github.com/matrix-org/seshat">seshat</a> - a native library for clientside indexing encrypted Matrix events written in Rust, powered by the <a href="https://github.com/tantivy-search/tantivy">tantivy</a> full-text search engine.  (pantalaimon also has support for indexing via tantivy, which involved contributing python bindings for tantivy, but we ended up going with Rust so we could embed it natively in as many Matrix clients as possible).  Seshat is particularly cool in that the indexes themselves are encrypted in on disk - and in future could even be synced between clients using <a href="https://github.com/uhoreg/matrix-doc/blob/ssss/proposals/1946-secure_server-side_storage.md">SSSS</a> so you don’t have to reindex your messages every time you log in on a new device.  Seshat is implemented behind a labs flag on Riot/Desktop and it will ship as soon Riot/Desktop’s build pipeline is fully updated to support native modules (which will also unlock other goodies, such as using faster/safer native E2E primitives, safer key storage, and Discord-style keyboard-shortcuts for VoIP).</p>
</li>
<li>
<p>🏗 Fixing “unable to decrypt” errors.  We’ve done big sprint over the last month or so to track down the final straggling causes of unable to decrypt errors.  Some of these are legitimate bugs (e.g. <a href="https://github.com/matrix-org/synapse/issues/6399">https://github.com/matrix-org/synapse/issues/6399</a>) - but many are artefacts of the current architecture: for instance, if the sender has no way to know your device was in the room when it encrypted a message, you won’t be able to decrypt.  We’re addressing this by improving better error messages and feedback so the user isn’t surprised by what’s going on (aiming for Jan) - and in future we’ll have to revisit E2E’s fundamentals to ensure that it’s impossible to receive a message without also receiving the key to decrypt it.</p>
</li>
<li>
<p>✅ Support for push notifications in E2E rooms.  This is kinda solved right now by having all clients get (silently) pushed whenever they receive a message in an E2E room with push enabled, and relying on the client to be woken up by the push in order to decrypt the message in order to display the push notification.  However, this is battery intensive, and we could probably do better - but this isn’t a blocker for going live.</p>
</li>
<li>
<p>🏗 Support for FilePanel and NotifPanel in E2E rooms.  Seshat should fix this by indexing all your messages (and so tracking whether they contain pushes or files, and populating up your local view of your file &amp; notif panels respectively) - just need to ensure it’s hooked up.</p>
</li>
</ul>
<p>...and that’s where things stand right now on E2E by default.  We’ll start turning it on by default for private rooms as soon as the UX has landed (probably starting first with new DMs and private rooms, prompting the user in case they want to opt out - and then migrating existing ones).  It’s worth noting that we have poured a <em>lot</em> of work into E2E encryption now - often to the detriment of the rest of Matrix; our rich featureset and decentralisation has combined to make this a tough nut to crack, but the end is in sight.  Thanks to all for your patience and support while we’ve been working through this.</p>
<p>That takes us to the end of the stuff we planned to prioritise in 2019 - but what about the more speculative medium-term stuff which was on the menu this time last year?</p>
<h4 id="2019-the-medium-term-priorities">2019: the medium-term priorities</h4>
<ul>
<li><em>Reworking and improving Communities/Groups.</em></li>
</ul>
<p>We have some really promising UX work and a fairly early spec proposal (<a href="https://github.com/matrix-org/matrix-doc/blob/matthew/msc1772/proposals/1772-groups-as-rooms.md">MSC1772</a>), but work in earnest hasn’t kicked off yet. It’s going to be one of the next big projects though. </p>
<ul>
<li><em>Reactions.</em></li>
</ul>
<p>✅ Riot now has Reactions! 🎉🎉🎉  The only remaining work is to finish the remaining rough edges of the spec proposal (<a href="https://github.com/matrix-org/matrix-doc/blob/matthew/msc1849/proposals/1849-aggregations.md">MSC1849</a>) and actually land them in the Matrix spec proper.</p>
<ul>
<li><em>E2E-encrypted Search</em></li>
</ul>
<p>✅ <a href="https://github.com/matrix-org/seshat">Seshat</a> exists! (see above)</p>
<ul>
<li><em>Filtering. (empowering users to filter out rooms &amp; content they're not interested in).</em></li>
</ul>
<p>✅ We’ve ended up thinking lots in 2019 about empowering users to filter content.  The main impetus has been to ensure that users and communities can filter out abuse (on their own terms), and also to start building infrastructure which can be used for folks to share their own filters.  Over the last few months, this has started to take concrete form - with the arrival of <a href="https://github.com/matrix-org/matrix-doc/blob/msc2313/proposals/2313-moderation-policy-rooms.md">MSC2313</a> “Moderation policies as rooms”, and <a href="https://github.com/matrix-org/mjolnir">Mjolnir</a> - a bot you can run to enforce moderation policies on your rooms.  It’s all quite early, but we expect a lot more work in this space over the coming year (and it’s wryly amusing that <a href="https://twitter.com/jack/status/1204766078468911106">Twitter has also woken up</a> to it being an interesting problem needing to be solved.)</p>
<ul>
<li><em>Extensible events</em> </li>
</ul>
<p>Sorry folks; no progress here since a flurry of spec work (<a href="https://github.com/matrix-org/matrix-doc/blob/matthew/msc1767/proposals/1767-extensible-events.md">MSC1767</a>) back in Jan 2019. The good news is that the spec proposal seems to be relatively well received. The bad news is that we haven’t had bandwidth to finish reviewing it, implementing it and migrating it anywhere. It blocks a bunch of really useful stuff in Matrix, and there are users willing to pay for it (via New Vector) - we’ll get to it as soon as we can.</p>
<ul>
<li><em>Editable messages.</em></li>
</ul>
<p>✅ These landed too and are a thing of joy!  Just need to merge <a href="https://github.com/matrix-org/matrix-doc/blob/matthew/msc1849/proposals/1849-aggregations.md">MSC1849</a>.</p>
<ul>
<li><em>Extensible Profiles (we've actually been experimenting with this already).</em></li>
</ul>
<p>Similar to Extensible Events, there was a flurry of spec work (<a href="https://github.com/matrix-org/matrix-doc/blob/matthew/msc1769/proposals/1769-extensible-profiles-as-rooms.md">MSC1769</a>) back in Jan, but little progress since.  This will also unlock a lot of really useful features - e.g. custom status, custom profile data, social timeline rooms etc.  We’ll likely get to it shortly after communities work.</p>
<ul>
<li><em>Threading.</em></li>
</ul>
<p>🏗 So we actually landed label-based threading (<a href="https://github.com/matrix-org/matrix-doc/blob/matthew/msc2326/proposals/2326-label-based-filtering.md">MSC2326</a>) in Synapse 1.6, but it’s not exposed in Riot yet (or elsewhere).  It doesn’t have quite the same semantics as Slack-style threading; the idea is to filter down your room based on which messages are tagged as part of a given topic.  However, it’s very powerful, and it’ll be fun to add it to Riot at some point in 2020.  Meanwhile, better-than-label-based-threading is also on the cards, although slightly lower priority than some of the other stuff in this section.</p>
<ul>
<li><em>Landing the Riot/Android rewrite</em></li>
</ul>
<p>🏗 As you probably know, RiotX is a full rewrite of Riot/Android in Kotlin using modern AndroidX and Jetpack idioms - and it entered beta <a href="https://medium.com/@RiotChat/introducing-the-riotx-beta-for-android-b17952e8f771">back in June</a>.  Since then we’ve been frantically working away on both playing catch-up with the old app… as well as implementing all the new stuff (reactions, edits, new E2E verification, cross-signing etc) which makes no sense to waste time adding in Riot/Android, but also pushes out the timeline on RiotX itself.</p>
<p>We’re currently sprinting to try to get RiotX ready for FOSDEM in February - hopefully users will have felt the app starting to really stabilise over the last few months (it even supports breadcrumbs now!)</p>
<ul>
<li><em>Considering whether to do a similar overhaul of Riot/iOS</em></li>
</ul>
<p>🏗 It’s cheating a bit, but Manu (the lead developer on Riot/iOS and delivery manager of Riot/Mobile in general) has been hacking on an entirely new client called <a href="https://github.com/manuroe/messagerie">Messagerie</a> in his spare time, using SwiftUI.  The idea of throwing away the whole UI layer and replacing it with the latest best practices sounds suspiciously like RiotX - it’ll be interesting to see how RiotX/iOS takes shape next year! </p>
<ul>
<li><em>Scaling synapse via sharding the master process</em></li>
</ul>
<p>We ended up bottlenecked on IO rather than CPU in 2019, and as a result we worked on splitting synapse’s database across multiple database instances on a per-table granularity.  However, the master process itself doesn’t shard yet; so we’re now bottlenecked on CPU and need to get on and do this asap to unlock further Synapse scalability for mega-monolithic-deployments like the Matrix.org homeserver. </p>
<ul>
<li><em>Bridge UI for discovery of users/rooms and bridge status</em> </li>
</ul>
<p>🏗 There’s been a bit of movement in the last few weeks on this, but nothing concrete yet. </p>
<ul>
<li><em>Bandwidth-efficient transports</em> </li>
</ul>
<p>✅ We finished the 100bps CoAP transport proof-of-concept for Matrix, demoed it at FOSDEM and <a href="https://matrix.org/blog/2019/03/12/breaking-the-100-bps-barrier-with-matrix-meshsim-coap-proxy">shipped it in March</a>. However, we haven’t progressed it much further; it really needs a corporate sponsor who wants to fund work to finish it off and bake it properly into Matrix. <strong>If you’re interested, please <a href="https://matrix.to/#/@matthew:matrix.org">get in touch</a>.</strong></p>
<ul>
<li><em>Bandwidth-efficient routing</em> </li>
</ul>
<p>🏗 We also did a bunch of related work on bandwidth-efficient routing, which sadly hasn’t been released yet.  However, it’s interesting to note that the <a href="https://dsn.tm.kit.edu/english/">Decentralized Systems and Network Services Research Group</a> at Karlsruhe Institute of Technology’s Institute of Telematics has been looking into this space too - c.f. their <a href="https://publikationen.bibliothek.kit.edu/1000100364">A Glimpse of the Matrix</a> paper, which ponders very similar problems. </p>
<ul>
<li><em>Getting Dendrite to production.</em> </li>
</ul>
<p>🏗 Dendrite work has been bubbling away in the background thanks to Anoa, Brendan, cnly (our GSoC dendrite contributor) and others.  Inevitably most of our bandwidth has gone into getting Synapse to 1.0 and making sure it’s fit for purpose, but we want and need to keep Dendrite alive for next-generation purposes - and in fact New Vector is hiring new people to work on it in 2020. </p>
<ul>
<li><em>Inline widgets (polls etc)</em></li>
</ul>
<p>🏗 We have an MSC (<a href="https://github.com/matrix-org/matrix-doc/pull/2192">MSC2192</a>), but not an implementation. </p>
<ul>
<li><em>Improving VoIP over Matrix.</em> </li>
</ul>
<p>Very little progress here, frustratingly.  Jitsi has been upgraded and conference calls should kick ass these days (let us know if they don’t), but 1:1 needs a lot of love.  Hopefully we’ll get to it in 2020. </p>
<ul>
<li><em>Adding more bridges, and improving the current ones.</em> </li>
</ul>
<p>Lots of bridging progress in 2020 - all new puppeting Slack support; huge fixes to the IRC bridge (including shifting to Postgres at last); Bifrost (the XMPP bridge) progressed too, and there’s been loads of community bridging work around WhatsApp, Discord and others. </p>
<ul>
<li><em>Account portability</em></li>
<li><em>Replacing MXIDs with public keys</em></li>
</ul>
<p>We’ve just started looking at implementing these seriously via <a href="https://github.com/matrix-org/matrix-doc/blob/rav/proposal/remove_mxids_from_events/proposals/1228-removing-mxids-from-events.md">MSC1228</a> (as of last week) - expect progress in 2020.</p>
<p>So that sums up progress on the medium term menu - as you can see, a bunch actually happened; a bunch made progress; a few didn’t happen at all.</p>
<h4 id="2019-the-longer-term-priorities">2019: the longer-term priorities</h4>
<p>Finally, on the longer term radar:</p>
<ul>
<li><em>Shared-code cross-platform client SDKs (e.g. sharing a native core library between matrix-{js,ios,android}-sdk)</em> </li>
</ul>
<p>No progress here.  Instead, all three main platforms have continued to write and maintain their own platform-specific SDKs for now.  <a href="https://github.com/matrix-org/seshat">Seshat</a> however will be the first piece of native rust code shared across all 3 platforms - let’s see how that goes first... </p>
<ul>
<li><em>Matrix daemons (e.g. running an always-on client as a background process in your OS which apps can connect to via a lightweight CS API)</em></li>
</ul>
<p>✅ <a href="https://github.com/matrix-org/pantalaimon">Pantalaimon</a> lives!</p>
<ul>
<li><em>Push notifications via Matrix (using a daemon-style architecture)</em> </li>
</ul>
<p>No progress here, unless you count the CoAP low-bandwidth work.  However, Bubu (also Riot/Android Fdroid maintainer) has been working on a project called <a href="https://bubu1.eu/openpush/">OpenPush</a> which looks to help in this space (albeit not built on Matrix, but could be used by Matrix).  There are a few other related projects.  If someone wants to build this on top of Matrix + CoAP please get in touch asap! </p>
<ul>
<li><em>Clientside homeservers (i.e. p2p matrix) - e.g. compiling Dendrite to WASM and running it in a service worker.</em></li>
</ul>
<p>🏗 Work is actually happening on this currently.  Dendrite has successfully compiled to WASM and runs, and we’ve had it (almost) talking HTTP tunnelled over libp2p as part of P2P Matrix experiments.  In 2020 we’re going to be investing a lot in P2P Matrix - to give users full control of their communication without even having to run a server, and also to simplify onboarding and account portability enormously.  We have a talk about this accepted for FOSDEM 2020 (<a href="https://fosdem.org/2020/schedule/event/dip_p2p_matrix/">The Path to P2P Matrix</a>) and we’re actively (frantically) hacking on Dendrite to make it happen - keep an eye out for how things develop!</p>
<ul>
<li><em>Experimenting with MLS for E2E Encryption</em></li>
</ul>
<p>🏗 Now that E2E-by-default has entered the “it works! let’s land it in Riot asap” phase, Uhoreg has had some time to start thinking about the longer term future of encryption in Matrix.  <a href="https://datatracker.ietf.org/wg/mls/charter/">MLS (Messaging Layer Security)</a> is the IETF’s initiative to define a standard mechanism for end-to-end-encrypted group chats, which has some major algorithmic improvements over Olm/Megolm and the Double Ratchet Algorithm as used by Signal.  The catch is that it doesn’t work at all well with decentralisation - however, we’ve been <a href="https://mailarchive.ietf.org/arch/msg/mls/MnLJkbJ_Mwe8Oz0Ll6delGJLPz4">working with them</a> to try to ensure MLS can work in a decentralised world.  More recently, uhoreg has had a chance to think a lot more about this and we’re working on a proposal for Decentralised MLS which builds on plain MLS while also giving the semantics needed for Matrix.  It’s all very experimental at this point (and the proof-of-concept implementation is written in <a href="https://julialang.org/">Julia</a>!) - but looks promising.  We’ll share more asap, and will certainly be investing more time in this in 2020.. </p>
<ul>
<li><em>Storing and querying more generic data structures in Matrix (e.g. object trees; scene graphs)</em> </li>
</ul>
<p>Sadly no progress here :( </p>
<ul>
<li><em>Alternate use cases for VR, IoT, etc.</em> </li>
</ul>
<p>...and none here either.</p>
<p>So, of all the myriad things on our radar for 2019 (as of Dec 2018), hopefully this gives some idea of where we hit the mark.</p>
<h4 id="2019-the-unpredictable-bits">2019: the unpredictable bits</h4>
<p>However, there’s also a tonne of other stuff which happened which wasn’t explicitly on the radar.  On the synapse side, we finished fully migrating from Python 2 to Python 3, and started using asyncio and all the latest Python 3 goodies!  We finally <a href="https://github.com/matrix-org/synapse/pull/6358">implemented configurable history retention</a> for servers and rooms! We even implemented <a href="https://github.com/matrix-org/synapse/pull/6409">self-destructing messages</a> in Synapse (not that Riot exposes them yet). And there has been loads of optimisation and performance work since 1.0 landed in June.</p>
<p>On the ops side, we overhauled all our ops processes and security after the Matrix.org <a href="https://matrix.org/blog/2019/05/08/post-mortem-and-remediations-for-apr-11-security-incident/">datacenter breach</a> in April, throwing away our legacy infrastructure and rebuilding it properly - and subsequently have been expanding our ops team from one dedicated ops person to four.  We also found ourselves having to do another emergency datacenter migration back in November when the old one was unable to reliably service IO for our database cluster. </p>
<p>We also spent a bunch time after shipping Matrix 1.0 working on tightening up Matrix’s privacy model - particularly around third party identity servers, integration managers, and making sure that folks self-hosting Matrix don’t accidentally depend on use 3rd party services without realising it.  If you missed out on the fun at the time, you can read all about it <a href="https://matrix.org/blog/2019/06/30/tightening-up-privacy-in-matrix/">here</a> and <a href="https://matrix.org/blog/2019/09/27/privacy-improvements-in-synapse-1-4-and-riot-1-4/">here</a>.  This ended up being way more work than we expected, but we’re very glad to have sorted it out now. </p>
<p>Meanwhile, mainstream uptake of Matrix has properly taken off, with the French Government launching Tchap (their fork of Riot), now with hundreds of thousands of daily active users.  The <a href="https://www.heise.de/newsticker/meldung/Open-Source-Bundeswehr-baut-eigene-verschluesselte-Messenger-App-4623404.html">German Government revealed today</a> that they are also formally trialling Matrix, starting with the Bundeswehr (Ministry of Defense); we’ve been helping them out with the deployment too. It is not an exaggeration to suggest that we could end up with an official cross-government Matrix network, publicly federated with the wider Internet, for self-hosted encrypted decentralised instant messaging.  In fact Ulrich Kelber, the Bundesdatenschutzbeauftragte (Federal Data Protection Commissioner) for Germany <a href="https://www.golem.de/news/whatsapp-matrix-oder-xmpp-bmi-sucht-einen-messenger-fuer-bundesbehoerden-1912-145326.html">pointed out</a>: “You could even set up a privacy-friendly messenger service in cooperation with France, which in the medium term could represent a real alternative to existing products on the market as a pan-European solution”. </p>
<p>Alongside all this, <a href="https://matrix.org/blog/2019/12/19/welcoming-mozilla-to-matrix/">Mozilla announced</a> they are replacing the Moznet IRC network with Matrix; <a href="https://matrix.org/blog/2019/02/20/welcome-to-matrix-kde/">KDE joined Matrix</a> in Feb, <a href="https://phabricator.wikimedia.org/T230531">Wikimedia</a> is getting set up on their server, and more and more massive players (including the largest in the world) keep getting in touch to find out how they can best get onboard Matrix - it’s incredibly exciting.  It also means that we were able to <a href="https://matrix.org/blog/2019/10/10/new-vector-raises-8-5-m-to-accelerate-matrix-riot-modular/">raise capital</a> to keep folks employed to work on Matrix fulltime via <a href="https://vector.im">New Vector</a> and scale up <a href="https://modular.im">Modular.im</a> as a paid hosting platform - which massively helps support core Matrix development.</p>
<h4 id="2020">2020</h4>
<p>All that remains now is to make some predictions for 2020.  Our main priorities are:</p>
<ul>
<li>
<p>Get E2E enabled for private rooms by default (see above). </p>
</li>
<li>
<p>Riot First-time User Experience (FTUE).  While we redesigned Riot’s UI in 2019, there are still far too many weird gotchas which trip over new users.  Starting in October we began a shift to completely change how Riot development works - transitioning the project to being led by the UX design team rather than the dev team, and ensuring that the design team considers the app holistically across all 3 platforms.  Above all else, our priority is to make it kick ass for normal non-technical mainstream users - not just for opensourcey wizards.  This is a tough ask, but we believe it’s literally make-or-break for the project in the long term if Matrix is ever to become as prevalent as Slack or WhatsApp, and we are throwing everything we have at it.  The second that E2E is on by default, the entirety of the Riot teams will be focusing on the mission to clear our <a href="https://github.com/vector-im/riot-web/issues?q=is%3Aopen+is%3Aissue+label%3Aproject%3Aftue">FTUE backlog</a>. </p>
</li>
<li>
<p>RiotX. We’re shipping RiotX on Android as fast as we can - currently users on Riot/Android are left high and dry and we need to do everything we can to finish RiotX and get them upgraded as rapidly as possible. </p>
</li>
<li>
<p>Communities.  Off the back of FTUE comes the importance of grouping rooms &amp; users together into communities in a much better way than we have today.  This will be up next. </p>
</li>
<li>
<p>Synapse: shard the master by user/room to avoid being it being bottlenecked on CPU.  We also need to apply smarter queue management on federation traffic to better reduce the memory footprint (and so eliminate complexity limits on small-footprint hosted servers!) - and we also desperately need to speed up joins. </p>
</li>
<li>
<p>Dendrite &amp; P2P Matrix: the plan currently is to use Dendrite as the basis for our P2P Matrix experiments.  In practice this means making it federate using <a href="https://github.com/matrix-org/matrix-doc/blob/rav/proposal/remove_mxids_from_events/proposals/1228-removing-mxids-from-events.md">MSC1228</a>-semantics (no point in wasting time implementing the ‘legacy’ key management), and then experiment with hooking it up to various P2P transports (e.g. our low-bandwidth CoAP transport) and discovery systems (e.g. mDNS; libp2p; etc).  How we go about actually getting it into production depends entirely on how well the experiment goes; we could evolve Matrix to be hybrid CS/P2P; we could treat it as a new protocol and bridge to it; who knows.  Watch this space...</p>
</li>
<li>
<p>MLS: figure out our plan for next-generation E2E - for better scaling, and better reliability, and what (if anything) we should do with <a href="https://datatracker.ietf.org/wg/mls/charter/">MLS</a>. </p>
</li>
<li>
<p>Bridges: loads of work on the horizon to put a better UX on Bridging.  Bridge stability has improved enormously over the last year (thanks Half-Shot!) but we need to transition from being robust but ugly to being robust and polished... </p>
</li>
<li>
<p>Spec: we need to work out how to go faster on reviewing MSCs (both our own and from the wider community).  While the governance process in general feels healthier than it’s ever been, empirically we’re not exactly burning through the MSC backlog - and this is in part that MSC work is squeezed in alongside the other dayjob stuff everyone’s working on. Finding the right balance between sculpting spec and sculpting code is tough, but we’re going to try to improve it in 2020. </p>
</li>
<li>
<p>Abuse / Reputation: we want to empower users to make their own minds up about what content they want to see and not see on Matrix (or what they want to host or not host on their servers / communities / rooms).  <a href="https://github.com/matrix-org/mjolnir">Mjolnir</a> is a good start, but we’ll be continuing to work on this throughout the year.</p>
</li>
</ul>
<p>Meanwhile, all the things listed above that we didn’t get to in 2019 are of course still options on the menu too.</p>
<p>So there you have it.  I’ve not even tried to talk about the amazing stuff that the wider Matrix community has been up to - whether that’s amazing new clients like <a href="https://dittochat.org/">Ditto</a> (React Native!) or <a href="https://github.com/kiliankoe/nio">Nio!</a> (SwiftUI), or new bridges like <a href="https://github.com/tulir/mautrix-facebook">mautrix-facebook</a> and <a href="https://github.com/tulir/mautrix-hangouts">mautrix-hangouts</a>, or even poljar’s secret rewrite of <a href="https://github.com/poljar/weechat-matrix-rs">weechat-matrix in Rust</a>; your best bet there is to skim through <a href="https://matrix.org/blog/category/this-week-in-matrix/">TWIM</a>.  Huge undying thanks go out though to everyone who builds on Matrix and keeps the ecosystem maturing and growing (especially while we’re scurrying around shoring up the foundations) - there’s simply no point in Matrix as a protocol without the vibrant community building on top.</p>
<p>All told, it’s been a bit of an epic year (both in terms of wins and fails), and all that remains is to thank <em>everyone</em> who continues to use Matrix (particularly our <a href="https://www.patreon.com/matrixdotorg">Patreon</a> supporters) for their ongoing support and for helping the project accelerate forwards.  More than ever before, the world needs free and open communication open to all; the age of proprietary communication silos may be coming to an end - consigned to live alongside AOL CDs and Compuserve IDs in the history books.  With your support, Matrix can provide a decent mainstream yet decentralised alternative - and we’ll do everything we can to make that happen in 2020.</p>
<p>Happy holidays!</p>
<p>Matthew, Amandine &amp; the whole Matrix.org team.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2019&#x2F;11&#x2F;09&#x2F;avoiding-unwelcome-visitors-on-private-matrix-servers&#x2F;" title="Avoiding unwelcome visitors on private Matrix servers">Avoiding unwelcome visitors on private Matrix servers</a></h2>
                <span>
                    09.11.2019 00:00
                    —
                    <a href="/category/privacy">
                        Privacy
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>Over the course of today we've been made aware of folks port-scanning the
general internet to discover private Matrix servers, looking for publicly
visible room directories, and then trying to join rooms listed in them.</p>
<p>If you are running a Matrix server that is intended to be private, you must correctly
configure your server to not expose its public room list to the general public -
and also ensure that any sensitive rooms are invite-only (especially if the
server is federated with the public Matrix network).</p>
<p>In Synapse, this means ensuring that the following options are set correctly in
your <code>homeserver.yaml</code>:</p>
<pre style="background-color:#1e1e1e;color:#dcdcdc;"><code><span># If set to &#39;false&#39;, requires authentication to access the server&#39;s public rooms
</span><span># directory through the client API. Defaults to &#39;true&#39;.
</span><span>#
</span><span>#allow_public_rooms_without_auth: false
</span><span>
</span><span># If set to &#39;false&#39;, forbids any other homeserver to fetch the server&#39;s public
</span><span># rooms directory via federation. Defaults to &#39;true&#39;.
</span><span>#
</span><span>#allow_public_rooms_over_federation: false
</span></code></pre>
<p><strong>For private servers, you will almost certainly want to explicitly set these to
<code>false</code></strong>, meaning that the server's &quot;public&quot; room directory is hidden from the
general internet and wider Matrix network.</p>
<p>You can test whether your room directory is visible to arbitrary Matrix clients
on the general internet by viewing a URL like
https://sandbox.modular.im/_matrix/client/r0/publicRooms (but for your server). 
If it gives a &quot;Missing access token&quot; error, you are okay.</p>
<p>You can test whether your room directory is visible to arbitrary Matrix servers
on the general internet by loading Riot (or similar) on another server, and
entering the target server's domain name into the room directory's server
selection box.  If you can't see any rooms, then are okay.</p>
<p>Relatedly, <strong>please ensure that any sensitive rooms are set to be &quot;invite only&quot;
and room history is not world visible</strong> - particularly if your server is
federated, or if it has public registration enabled.  This stops random
members of the public peeking into them (let alone joining them).</p>
<p>Relying on security-by-obscurity is a very bad idea: all it takes is for someone
to scan the whole internet for Matrix servers, and then trying to join (say)
#finance on each discovered domain (either by signing up on that
server or by trying to join over federation) to cause problems.</p>
<p>Finally, if you don't want the general public reading your room directory,
please also remember to turn off public registration on your homeserver.
Otherwise even with the changes above, if randoms can sign up on your server
to view &amp; join rooms then all bets are off.</p>
<p>We'll be rethinking the security model of room directories in future (e.g.
whether to default them to being only visible to registered users on the local
server, or whether to replace per-server directories with per-community
directories with finer grained access control, etc) - but until this is sorted,
please heed this advice.</p>
<p>If you have concerns about randoms having managed to discover or join rooms
which should have been private, please contact security@matrix.org.</p>

                
            </div>
        </article>
        
        <nav class="pagination">
    <div class="prev">
        
        <a href="&#x2F;category&#x2F;general&#x2F;page&#x2F;3&#x2F;">‹ Previous</a>
        
    </div>
    <span class="page-number">4 / 14</span>
    <div class="prev">
        
        <a href="&#x2F;category&#x2F;general&#x2F;page&#x2F;5&#x2F;">Next ›</a>
        
    </div>
</nav>

    </div>
</div>

    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;security-hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p>© 2022 The Matrix.org Foundation C.I.C.</p>
</footer>

</body>

</html>
