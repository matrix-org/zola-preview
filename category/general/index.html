<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - General</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/png" href="/assets/favicon.png" />
    <link rel="stylesheet" href="/style.css" />

    
<link rel="alternate" type="application/rss+xml" title="RSS" href="/category/general/atom.xml">
</head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo-white.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            ">
            Blog
        </a>
        
        
        
        <a href="&#x2F;docs&#x2F;" class="
            ">
            Documentation
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <input id="ecosystem-submenu-checkbox" type="checkbox" class="submenu-checkbox" aria-hidden="true"
                >
            <label for="ecosystem-submenu-checkbox" class="submenu-title">Ecosystem <div class="arrow">
                </div></label>

            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bots&#x2F;">Bots</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        
<div id="taxonomy-single">
    <div class="content">
        <header>
            <h1>General</h1>
            133 posts tagged with "General" <a href="/category">(See all Category)</a>
            
            <h2>
                <small><a href="/category/general/atom.xml">Atom Feed</a></small>
            </h2>
            
        </header>

        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2023&#x2F;03&#x2F;15&#x2F;the-dma-stakeholder-workshop-interoperability-between-messaging-services&#x2F;" title="The DMA Stakeholder Workshop: Interoperability between messaging services">The DMA Stakeholder Workshop: Interoperability between messaging services</a></h2>
                <span>
                    15.03.2023 00:00
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>A few weeks ago we found ourselves in Brussels to participate in the second <a href="https://competition-policy.ec.europa.eu/dma/dma-workshops_en">stakeholder workshop for the Digital Markets Act (DMA)</a>.</p>
<p>The <a href="https://commission.europa.eu/strategy-and-policy/priorities-2019-2024/europe-fit-digital-age/digital-markets-act-ensuring-fair-and-open-digital-markets_en">DMA</a> is new antitrust/competition regulation from Europe which came into force in November, whose objective is to make digital markets more competitive by forcing gatekeepers (i.e. large tech companies) to reconsider some of their anti-competitive or self-preferencing practices. Gatekeepers are defined as companies which have a clear position of influence in a given market (based on revenue / market cap / number of users thresholds), and “an entrenched and durable position”. The process for designating which companies count as gatekeepers will start in May 2023.</p>
<p>The DMA touches upon different key topics, from self-preferencing behaviour to app store management practices - but most importantly includes interoperability for “number-independent interpersonal communication services” (NIICS), otherwise known as chat and voice/video calling and conferencing services (social media was left out for now). </p>
<p><a href="https://competition-policy.ec.europa.eu/dma/dma-workshops/interoperability-workshop_en">This particular workshop</a> was focused on the latter: interoperability between messaging services, with the aim of getting the different stakeholders of the industry in the same place to discuss how the legislation could be implemented.  The whole idea is to figure out a practical way in which WhatsApp could interoperate with iMessage, Google Messages and others, creating an interoperable communication network where users are no longer locked into communication silos and pick their preferred service provider without compromising on who they can talk to. </p>
<p>About 900 people participated online, and around 80 people were present in person: the maximum the room could hold. It was particularly fun to see representatives from the whole industry turning up in person, including folks from XMPP, MIMI (the new IETF working group on messaging interoperability), MLS, us from Matrix obviously (alongside Matrix ecosystem representatives from Beeper and NeoChat!) - all together with the Body of European Regulators for Electronic Communications (<a href="https://www.berec.europa.eu/en/berec/what-is-berec">BEREC</a>), civil society representatives (like the Federation of German Consumer Organisations (<a href="https://VZBV.de">VZBV</a>) and European Digital Rights (<a href="https://edri.org">EDRi</a>)), mobile network operators, local network agencies, and obviously some of those who are likely to be designated as gatekeepers, such as Meta, Apple and Google.</p>
<h2 id="so-what-was-discussed">So what was discussed?</h2>
<p>All of the workshop proceeds were livestreamed and archived by European Commission’s <a href="https://webcast.ec.europa.eu/dma-workshop-2023-02-27">webcasting service</a> and <a href="https://commission.europa.eu/legal-notice_en#copyright-notice">released</a> under the terms of the Creative Commons Attribution 4.0 International (CC BY 4.0) licence, so we’ve taken the liberty of republishing them split up into chapters so that folks can quickly refer to the discussion.</p>
<h3 id="panel-1-introduction-to-horizontal-interoperability-between-messaging-services-goals-challenges-and-potential-solutions">Panel 1: Introduction to horizontal interoperability between messaging services: goals, challenges and potential solutions</h3>
<p>The first panel focused on setting up the scene and highlighting the challenges expected during the implementation phase, featuring <a href="https://www.soi.unitn.it/staff/simonetta-vezzoso/">Simonetta Vezzoso</a> (Professor of Economics at The University of Trento), <a href="https://www.linkedin.com/in/chiaracaccinelli">Chiara Caccinelli</a> (Co-chair - Digital Markets WG at <a href="https://www.berec.europa.eu/">BEREC</a>), <a href="https://www.vzbv.de/en/policy-work/experts">Suzanne Blohm</a> (Policy officer at <a href="https://www.vzbv.de/">Verbraucherzentrale Bundesverbands (VZBV)</a>) and <a href="https://www.linkedin.com/in/jan-penfrat">Jan Penfrat</a> (Senior Policy Advisor at <a href="https://edri.org/">EDRi</a>). There was a lot of emphasis around the risks of gatekeepers dragging their feet, or choosing the solution which makes it harder for SMEs or self-hosters to interoperate, as well as the challenge of introducing the new paradigm of interoperability for messaging without losing the usability aspect - see below for the full scope:</p>
<iframe width="1280" height="720" src="https://www.youtube.com/embed/yoKjXN3G8a8" title="DMA &amp; messaging services interoperability - Legal framework of article 7, tradeoff &amp; challenges" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<br/>
<ul>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=0s">00:00</a> Welcome to the second DMA stakeholder workshop about interoperability between messaging services</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=483s">08:03</a> Introduction of the panelists</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=566s">09:26</a> What is the Article 7 of the Digital Markets Act (Simonetta Vezzoso)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=1595s">26:35</a> Interoperability already exists in the EU, what can we learn from it (Chiara Caccinelli)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=2443s">40:43</a> End user perspective and behaviour, benefits of the DMA Article 7, Challenges (Suzanne Blohm)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=2970s">49:30</a> Benefits for end users, and an existing technical stack to build from (Jan Penfrat)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=3561s">59:21</a> What the UI could look like (Jan Penfrat)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=3787s">01:03:07</a> Question - Do users need an account on each network, or is it a true federation? (XMPP Foundation)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=3919s">01:05:19</a> Question - What rule do you see for Telcos and for messaging services they provide?</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=4207s">01:10:07</a> Question - Does the term &quot;user&quot; include people running their own server/service? (Open Source Initiative)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=4490s">01:14:50</a> Question - How to check the gatekeeper is not giving a suboptimal solution? (online question)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=4684s">01:18:04</a> Question - Does user consent limit the power of Article 7? (Viber)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=4956s">01:22:36</a> Question - Gatekeepers don't have an incentive to make appealing UIs for interoperability and might try to scare users away. Will it be addressed? (NLNet)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=5048s">01:24:08</a> Question - People usually dislike popups, how to strike the balance between warning and upsetting them? (online)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=5271s">01:27:51</a> Question - Have you been thinking about reputation models?</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=5393s">01:29:53</a> Question - Different apps use different E2EE protocols to differentiate. Could article 7 kill that differentiation? (online)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=5928s">01:38:48</a> Question - What will be the paradigm of non discrimination?</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=5590s">01:33:10</a> Question - What about interoperability of RCS and Apple iMessage? (Orange)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=5684s">01:34:44</a> Question - Do you take into account that there are not only company-run services, but also Open Source components? (Process One)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=5755s">01:35:55</a> Question - What are the implications for non European users? (Beeper)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=5965s">01:39:25</a> Question - Does the DMA only mandate interoperability for European users, even on a same platform? (XMPP)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=6036s">01:40:36</a> Question - Will the interoperability be opt-in or opt-out? (Matrix)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=6110s">01:41:50</a> Question - How avoid the standardisation to be taken over by commercial interests? (online)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=6223s">01:43:43</a> Question - What will the timing look like for the DMA? (Cisco)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=6493s">01:48:13</a> Question - What could be reasonable requirements for smaller services? (online)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=6540s">01:49:00</a> Question - Where should gatekeeper gather to start discussion how interoperability will look like in practice? (OpenXchange)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=6671s">01:51:11</a> Question - What about account portability, for users switching from one platform to another? (University of Rome)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=6893s">01:54:53</a> Question - Is contact information part of the data gatekeepers need to share? (XMPP)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=6972s">01:56:12</a> Closing</li>
</ul>
<h3 id="panel-2-exploring-the-technical-aspects-of-interoperability-part-1-end-to-end-encryption-security-of-the-service">Panel 2: Exploring the technical aspects of interoperability (Part 1): end-to-end encryption, security of the service</h3>
<p>Then, after a quick lunch, the second panel went into the nitty gritty of how end-to-end encrypted interoperable messaging (1:1 messaging is the first milestone to be delivered, hence the focus) could actually be implemented by the gatekeepers. The panel starred <a href="https://www.roeslpa.de/">Paul Rösler</a> from <a href="https://fau.de/">FAU Erlangen-Nürnberg</a>, who gave a great overview of end-to-end encryption in general, <a href="https://alissacooper.com/">Alissa Cooper</a> from Cisco who explained the merits of open interoperable protocols, <a href="https://educatedguesswork.org/about/">Eric Rescorla</a> from Mozilla explaining the merits of standardisation, yours truly from Matrix explaining and demonstrating how one can actually use a standardised open protocol to interoperate without sacrificing privacy (effectively fleshing out our <a href="https://matrix.org/blog/2022/03/29/how-do-you-implement-interoperability-in-a-dma-world">blog</a> <a href="https://matrix.org/blog/2022/03/25/interoperability-without-sacrificing-privacy-matrix-and-the-dma">posts</a> from last year) and then finally <a href="https://www.linkedin.com/in/stephen-hurley-24424231">Stephen Hurley</a> from Meta to explain how they are thinking about DMA obligations.</p>
<p>The panel ended up being a relatively exciting tour through the landscape of DMA practicalities, and it was a lot of fun to actually <a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3715s">demonstrate a minimum viable prototype of client-side bridging</a> thanks to Travis’s work packaging up standalone client-side bridges for <a href="https://github.com/matrix-org/dma-demo-app-bridge-whatsapp">WhatsApp</a> and <a href="https://github.com/matrix-org/dma-demo-app-bridge-googlechat">Google Chat</a> (strictly for demonstration illustrative purposes only). The slides (and demo) were sadly a bit fuzzy on the recording, but you can see our slides below and grab everyone’s presentations from the <a href="https://competition-policy.ec.europa.eu/document/download/c59e04bc-f96c-49d9-b161-ad9c24d82367_en?filename=20230227_dma_stakeholders_workshop_panelists_material_0.zip">European Commission website</a>:</p>
<iframe width="1280" height="720" src="/blog/img/matrix-dma-slides.pdf"></iframe>
<br/>
<p>When DMA first became headline news last year, there was a lot of <a href="https://www.theverge.com/2022/3/28/23000148/eu-dma-damage-whatsapp-encryption-privacy">very vocal concern</a> that it would somehow end up undermining end-to-end encryption (despite the legislation explicitly requiring that E2EE must be preserved when interoperating). Hopefully this session demonstrated that both the European Commission and the various panellists are dead serious about achieving interoperability without sacrificing privacy - whether that’s via the brute-force approach of client-side bridges, or the more sophisticated approach of client-side bridges which bridge to client-side APIs, or by incrementally or entirely adopting a true open standard protocol like Matrix, XMPP, or whatever MIMI comes up with.</p>
<p>You can see the whole panel split into the various sections below:</p>
<iframe width="1280" height="720" src="https://www.youtube.com/embed/FDnUJXzVn3s" title="DMA &amp; messaging services interoperability - End to end Encryption and Security" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<br/>
<ul>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=0s">00:00</a> Opening</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=83s">01:23</a> Introduction of the panellists</li>
<li><strong>Interoperable Messaging - Paul Rösler (FAU)</strong></li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=190s">03:10</a> Interoperable end-to-end (E2EE) encryption options (Paul Rösler)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=324s">05:24</a> Requirements for interoperable E2EE (Paul Rösler)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=562s">09:22</a> Options for interoperable E2EE (Paul Rösler)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=834s">13:54</a> Confidentiality, Privacy &amp; Abuse prevention (Paul Rösler)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=1147s">19:07</a> Group Messaging (Paul Rösler)</li>
<li><strong>DMA Stakeholder Workshop: Interoperability - Eric Rescorla (Mozilla)</strong></li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=1364s">22:44</a> Learning from QUIC (Mozilla)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=1454s">24:14</a> E2EE and interoperability (Mozilla)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=1550s">25:50</a> Key Establishment in a E2EE interoperable system (Mozilla)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=1636s">27:16</a> Message and media formats in a E2EE interoperable system (Mozilla)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=1710s">28:30</a> Identity in a E2EE interoperable system (Mozilla)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=1849s">30:49</a> Multiple gatekeeper scenarios (Mozilla)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=1901s">31:41</a> Suggested framework for interoperability (Mozilla)</li>
<li><strong>DMA Stakeholder Workshop: Interoperability - Alissa Cooper (Cisco)</strong></li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=2120s">35:20</a> Discussing how the UX of a DMA compliant product can look like (Cisco)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=2198s">36:38</a> The use case for enterprise interoperability (Cisco)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=1847s">30:47</a> Approaches to DMA Compliance (Cisco)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=2637s">43:57</a> Limits of the per-gatekeeper, in-house solution approach (Cisco)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=2899s">48:19</a> Strengths of the consolidated (standardised) solution (Cisco)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3000s">50:00</a> Implications &amp; requirements of the consolidated solution (Cisco)</li>
<li><strong>Implementing Interoperability for the DMA - Matthew Hodgson (Matrix)</strong></li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3123s">52:03</a> Implementing Interoperability in practice for the DMA (Matrix)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3180s">53:00</a> A practical path to full interoperability (Matrix)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3275s">54:35</a> Defining the problem we're solving (Matrix)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3315s">55:15</a> Approach 1 Client-side bridging using server-side APIs (Matrix)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3441s">57:21</a> Approach 2 Client-side bridging using client-side APIs (Matrix)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3528s">58:48</a> Approach 3 Polyglot app, using a 3rd party protocol à la iMessage (Matrix)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3606s">01:00:06</a> Approach 4 Using an open protocol (Matrix)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3642s">01:00:42</a> Pros &amp; Cons of each approach (Matrix)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3715s">01:01:55</a> DEMO of client-side bridging (Matrix)</li>
<li><strong>Meta's view on the DMA as seen from WhatsApp - Stephen Hurley (Meta)</strong></li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=4005s">01:06:45</a> Meta's view on the DMA as seen from WhatsApp (Meta)</li>
<li><strong>Questions</strong></li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=4632s">01:17:12</a> Matthew (Matrix) remind that not only the demo showed client-side bridging was possible, but iMessage has been doing it for years via SMS &amp; iMessage</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=4674s">01:17:54</a> Meta has two IM platforms (Instagram and Facebook) that are not E2EE. What is Meta going to do about those platforms? (Beeper)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=4725s">01:18:45</a> How to balance discoverability and privacy?</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=4864s">01:21:04</a> How to solve the problem of different E2EE protocols? (online)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=5088s">01:24:48</a> Do some of the panellists think the best option is not a single standardised protocol? (OpenXchange)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=5626s">01:33:46</a> Which measures by gatekeepers to preserve security integrity and privacy can be considered proportionate?</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=5798s">01:36:38</a> How many people have worked on the client-side demo?</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=5936s">01:38:56</a> Does it really matter that MLS is not &quot;done&quot;?</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=6450s">01:47:30</a> How will article 7 ensure private keys will never transit over the network? (online)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=6780s">01:53:00</a> What about interoperability of features like custom emojis, removing messages, etc? (online)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=7062s">01:57:42</a> What does the rest of the panel thinks about the guarantees they can provide when a message leaves a system? (XMPP)</li>
</ul>
<h3 id="panel-3-exploring-the-technical-aspects-of-interoperability-ii-data-collection-identification-of-users-quality-of-interoperable-services-system-management-integrity-of-the-service-prevention-of-misuse">Panel 3: Exploring the technical aspects of interoperability (II): data collection, identification of users, quality of interoperable services, system management, integrity of the service/prevention of misuse</h3>
<p>Finally, we launched into the third and final session of the day - a second technical panel to dig into questions of identity, usability, data privacy, consent and anti-abuse in a DMA world.  Relative to the second panel, there were more questions than answers here, as the panellists discussed whether users would need to consent or opt-in/opt-out of interoperability, and debated the various data privacy implications of DMA.  The panel starred Stephen Hurley from Meta again, <a href="https://www.linkedin.com/in/lucas-verney">Lucas Verney</a> from <a href="https://www.peren.gouv.fr">PEReN</a>, Markus Klein from <a href="https://www.bundesnetzagentur.de/">Bundesnetzagentur</a> and <a href="https://rohan.com/">Rohan Mahy</a> from <a href="https://wire.com">Wire</a> introducing the <a href="https://datatracker.ietf.org/group/mimi">MIMI working group</a> at IETF.</p>
<iframe width="1280" height="720" src="https://www.youtube.com/embed/ZtRmAaHUxWw" title="DMA &amp; messaging services interoperability - Metadata, cross-certification of users, and UI" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<br/>
<ul>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=0s">00:00</a> Opening and panellists introduction</li>
<li><strong>Meta / WhatsApp</strong></li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=141s">02:21</a> User Safety on WhatsApp</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=411s">06:51</a> Consenting to interoperability</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=476s">07:56</a> Objective criteria to assess whether a request is reasonable or not</li>
<li><strong>PEReN</strong></li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=540s">09:00</a> PEReN is a French government digital expertise hub</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=612s">10:12</a> Efficient design for effective interoperability</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=685s">11:25</a> Reconciliation identity between services</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=820s">13:40</a> Discoverability between platforms of different scales</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=987s">16:27</a> Should fancy features (e.g. emoji reactions) be interoperable?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=1042s">17:22</a> Quality of Service</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=1142s">19:02</a> Security goes beyond E2EE</li>
<li><strong>Bundesnetzagentur</strong></li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=1226s">20:26</a> Bundesnetzagentur views on the DMA</li>
<li><strong>Wire</strong></li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=1599s">26:39</a> Federation and Interoperability issues are similar</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=1690s">28:10</a> Standards-based interoperability and the MIMI working group</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=1758s">29:18</a> Identifiers, devices, handles</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=1850s">30:50</a> User introduction &amp; discovery</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=1890s">31:30</a> Messaging content</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=2046s">34:06</a> Why MIMI picked MLS for E2EE?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=2154s">35:54</a> Server to server transport mechanism</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=2198s">36:38</a> E2EE Cryptographic identity</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=2340s">39:00</a> MIMI's standardisation work provides a strong foundation for other features</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=2425s">40:25</a> Why is standardized interoperability beneficial?</li>
<li><strong>Questions</strong></li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=2670s">44:30</a> What about terms of service, minimum usage age enforcement etc?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=2883s">48:03</a> How can identity be maintained separately from networks? How will differing policies of services be respected?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=3146s">52:26</a> Does WhatsApp rely on the phone number as a primary identifier?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=3209s">53:29</a> Some systems like Telegram have pseudonymous IDs. How would that work with platforms relying on e.g. phone numbers?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=3342s">55:42</a> Should the service name be part of the identifier?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=3453s">57:33</a> Can the DMA improve how authentication is handled?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=3591s">59:51</a> What made the GDPR successful is the potential fines. What about the DMA?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=3828s">01:03:48</a> How can interoperability be designed to stop leaking contact lists?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=4155s">01:09:15</a> Are we doing cookie banners again?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=4557s">01:15:57</a> Should we think about some integration with eIDAS for more trustworthy identities?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=4788s">01:19:48</a> Are all the protocols like Matrix or MIMI free to use, or do they have a fee?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=4952s">01:22:32</a> Are there really concerns about the DMA and security?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=5260s">01:27:40</a> Does Meta expect to provide a EU-only and a global version of their messengers?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=5395s">01:29:55</a> The views expressed here regarding consent are concerning when it comes to self-hosting</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=5780s">01:36:20</a> Closing</li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>This was a fascinating opportunity to have a front-row seat at history being made, as the various key players finally got down to business on the practical implications of DMA interoperability.</p>
<p>We saw the full spectrum of options on the table, from Meta’s implications that they would simply open their existing API complete with the existing Double Ratchet Encryption, to the pragmatic approach of Matrix (“at first we’ll bridge, and then the players should gradually converge on an open standard”) to the more idealistic approach of MIMI (“everyone should natively adopt an entirely new open standard built on MLS”).  The next step is to establish a reference implementation and approach, and in the end it seems likely that the approach that works will be the one which the gatekeepers can actually practically adopt within the punchy timeframes built into the legislation:</p>
<p><img src="/blog/img/dma.jpg" alt="DMA timeline" /></p>
<p>You can also check out <a href="https://carlschwan.eu/2023/03/02/digital-market-act-workshop-in-brussels/">Carl Schwan’s writeup</a> (from NeoChat), as well as Eric Rescorla’s braindump on <a href="https://educatedguesswork.org/posts/dma-interop/">DMA interoperability</a> that accompanies his talk.</p>
<p>We live in interesting times, and it’s fascinating to see Matrix’s vision of interoperable communication being cemented into regulation by the EU.  Our view is that as long as the gatekeepers open their APIs and add support to model remote users in their systems, then at least the wider world can implement client-side bridges to crack the door of the gatekeepers open - and then as gatekeepers refresh their stacks and new players emerge, they’ll likely implement the common protocol (if it’s fit for purpose) rather than burn time reinventing the wheel on proprietary solutions.  Meanwhile, the DMA provides welcome encouragement to ensure that open protocols like Matrix can rise to the challenge and fill the gap - whether that’s <a href="https://spec.matrix.org">independently</a> or as <a href="https://datatracker.ietf.org/doc/draft-ralston-mimi-matrix-framework/">part of IETF’s MIMI</a> initiative. May the best solution win!</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2023&#x2F;01&#x2F;03&#x2F;matrix-community-year-in-review-2022&#x2F;" title="Matrix Community Year In Review 2022">Matrix Community Year In Review 2022</a></h2>
                <span>
                    03.01.2023 00:00
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/nico">
                        Nico
                    </a>
                </span>
                
            </header>
            <div>
                
                <blockquote>
<p>Note: This was originally posted on https://blog.neko.dev/posts/matrix-year-in-review-2022.html , which also includes some small info boxes about each projects, which got lost in the translation.</p>
</blockquote>
<p>As we send off 2022 with a bang, it makes sense to look back on what we did this year and where we want to go next year. In its holiday special post, the Matrix Foundation has been focusing on the core team's work. This post is focusing on the achievements of the community outside of the Matrix Foundation.</p>
<p>I tried to reach out to as many people I have seen do &quot;stuff&quot; on Matrix and have them write something they would see fitting for a year in review. Now, most people have better things to do between christmas and new years, so I hope you can excuse if some projects are missing. Also I probably forgot like half of the interesting people... HOWEVER! I hope you still enjoy what everyone wrote up. And don't forget to check out the official <a href="https://matrix.org/blog/2022/12/25/the-matrix-holiday-update-2022">Matrix Holiday Update 2022</a> and of course read you weekly <a href="https://matrix.org/blog/category/this-week-in-matrix">TWIM</a> to keep up to date with any cool projects you find.</p>
<h2>Nheko D-Bus API</h2>
<p>A D-Bus API for the Nheko Matrix client compatible with KRunner and Rofi.</p>
<p>LorenDB tells us</p><blockquote>
<p>As a dedicated user of all things KDE, I make heavy use of KRunner. Naturally, I wondered if KRunner could be extended to join Matrix. This idea led me to create a D-Bus API in nheko for use on Linux. While it currently only supports a few aspects of the full Matrix experience, this API allows external software to make use of some of nheko's functionality, including searching the room list, opening rooms, joining rooms, and creating DMs. Later, I also added support for setting status messages. Now you can write extensions for software such as <a href="https://github.com/LorenDB/nheko-krunner">KRunner</a> or <a href="https://mzte.de/git/LordMZTE/rofi-nheko">rofi</a>. Alternately, you could make a plugin for your favorite game that sets your status message to let your friends know that you are busy (although no known plugins of this sort exist).</p></blockquote>
<h2>Community Moderation Effort</h2>
<p>A collaborative effort to moderate Matrix communities and to fight spam.</p>
<p>Nico mentions</p><blockquote>
<p>Some of you might have heard of us, but we are a few moderators of very
different communities, who have banded together to fight spam and share the
burden of moderating our communities. Different opinions are very hard to align,
so we have one ban list we can agree on, that only includes the most annoying
spam reasons: automated spam, crypto advertisements, gore posting and similar
stuff. This actually works very well against spammers, that just join one room
after the other to send the same content.</p>
<p>You can subscribe to this ban list here:
<a href="https://matrix.to/#/%23community-moderation-effort-bl%3Aneko.dev">#community-moderation-effort-bl:neko.dev</a></p>
<p>We are sometimes internally discussing moderation rules, tooling and recent
events.  In the long term we hope to improve the tooling situation as well as
provide a second, stricter ban list, but we are also already very busy just
moderating our own little communities, so don't expect much progress.</p>
<p>If you have a community that has been troubled by organized spam recently, maybe
our ban list can help you. You might also be interested in contacting one of us
to join the effort, just be aware that we are very careful in accepting new
members. We hope you have a spam-free and enjoyable 2023!</p></blockquote>
<h2>Matrix Releasetracker</h2>
<p>Release tracker that posts updates into Matrix rooms. <a href="https://github.com/ananace/matrix-releasetracker" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>Ananace contributes</p><blockquote>
<p>The release tracking project that has been running basically non-stop since 2018 (barring a few periods of downtime due to complete database crashes), having tracked many millions of releases for <em>at least</em> five people from my personally hosted instance.</p>
<p>2022 saw the addition of plenty of additional release sources, as well as a complete refactor of the codebase to hopefully support even more sources going forwards. It now tracks loose repositories (signed tags, lightweight tags, and/or releases) on GitHub/GitLab/Gitea/plain git, as well as supporting the tracking of entire namespaces and user stars on GitHub/GitLab/Gitea.</p>
<p>2023 should hopefully see even more work roll in, with some code underway for tracking Docker images and Helm Chart updates, as well as rework of the bot component to have it offer more use.</p>
</blockquote>
<h2>Self-Host a Matrix Map Tile Server</h2>
<p>FluffyChat implemented location sharing in Matrix last year. More recently, Element announced support for it. Interesting in Element's announcement is not only the mechanism for sharing a location data point, but also how their matrix clients would display a little map to the recipient and how they would support the case where the data for this map display could be self-hosted. This is a blogpost/guide to show how this could be done. <a href="https://wrily.foad.me.uk/self-host-a-matrix-map-server" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>JulianF mentions</p><blockquote>
<p>I set up my own OpenStreetMap tiles server for secure location sharing with Matrix.</p>
<p>See <a href="https://wrily.foad.me.uk/self-host-a-matrix-map-server/" title="Self-Host a Matrix Map Tile Server">this guide on my blog</a> which explains why and how I did it, and the <a href="https://lab.trax.im/matrix/map-tile-server-ansible" title="Map Tile Server Ansible">Ansible role</a>, and the matrix discussion room <a href="https://matrix.to/#/#matrix-map-tile-server:foad.me.uk"><code>#matrix-map-tile-server:foad.me.uk</code></a>.</p>
</blockquote>
<h2>Matrix ClassDojo Bridge</h2>
<p>This bridges ClassDojo teacher-to-parent messaging facilities to matrix. <a href="https://lab.trax.im/matrix/cdj-to-matrix" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>JulianF mentions</p><blockquote>
<p>I began a project to bridge matrix to the teacher-parent messaging silo ClassDojo, which is popular especially in USA and UK schools.</p>
<p><a href="https://lab.trax.im/matrix/cdj-to-matrix">Matrix ClassDojo Bridge</a></p>
<p>I am motivated by my loathing of being coerced into putting my private communications in yet another silo where I am restricted to accessing my messages and photos through the company's own products which subject me to advertising and engagement tactics (&quot;Your child earned a point -- click to see what for!&quot;), where I cannot easily keep my own copy of my own data (&quot;Subscribe now to keep your memories!&quot;), and all the other typical down-sides of a Big Tech silo.</p>
<p>This scenario is of course exactly where Matrix shines. An ideal fit for a school's messaging needs, scrapping the silo business model, putting the organisation in control of its own data and policies.</p>
<p>In the first half of 2022 I got as far as being able to do an offline demo -- manually running the fetching and bridging stages, with the teacher and class names, story text and photos bridged in the to-matrix direction.</p>
<p>My work on this was generously sponsored by my wife.</p>
<p>Since then, the project has been on hold, seeking further funding.</p>
<p>My next step plan for the bridge, when I can get back to it, is to adjust the bridged output to the <a href="https://matrix.to/#/#social-matrix:carnot.cc">matrix-for-social-media</a> formats used in <a href="https://circu.li/">FUTO Circles</a> (previously &quot;Circuli&quot;) and <a href="https://app.minestrix.henri2h.fr/">MinesTRIX</a> to present a familiar and beautiful display.</p>
</blockquote>
<h2>Aine's update</h2>
<p>Aine, one of the people behind <a href="https://etke.cc/" >etke.cc</a> gives an update about what happened in the project this year as well as their contributions to <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy">matrix-docker-ansible-deploy</a>. <a href="https://etke.cc/" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>Aine contributes</p>
<blockquote>
<p>Ohh, I don't even know where to start and what include, to be honest 😁</p>
<p>The most notable changes were:</p>
<ul>
<li>etke.cc/scheduler brings control over maintenance service and running services to customers. It changed our internal workflows a lot</li>
<li>multilingual support of etke.cc - website, guides, order processing, support. Initially we had 3 supported languages (English, German, Russian) and then dropped Russian</li>
<li>a lot of new components in mdad, starting with cinny and Borg backup and finishing with postmoogle</li>
<li>we developed several new bots and matrix-related tools</li>
</ul>
<p>... Actually, a lot of things were done and much more is in progress, not sure if I can speak about upcoming changes</p>
<p>So, 2022 was awful, scary, heartbreaking (in a bad way), but it also was quite productive</p></blockquote>
<h2>Pauls Podcast (German tech podcast)</h2>
<p>A German tech podcast, that talks a lot about Matrix, but also a few other miscellaneous topics. <a href="https://chrpaul.de/podcast/" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>jaller94 shares</p><blockquote>
<p>In the beginning of the year I started a hobby podcast. Most episodes cover Matrix topics, e.g. the release of Matrix Spec v1.2, the FOSDEM 2022 and the Matrix Community Summit in Berlin.</p>
<p><a href="https://chrpaul.de/podcast/" target="_blank" rel="nofollow noopener noreferrer">https://chrpaul.de/podcast/</a></p>
</blockquote>
<h2>Matrix dev room at FrOSCon 2022</h2>
<p>Every year free and open source software is celebrated and talked about at the FroSCon conference near Bonn. There was a dev room dedicated to Matrix this year. <a href="https://matrix.to/#/#FrOSCon:fiksel.info" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>jaller94 tells us</p><blockquote>
<p>Every year free and open source software is celebrated and talked about at the FroSCon conference near Bonn.<br/>Thousands of enthusiasts meet on a university campus for one weekend to listen to presentations, talk in dev rooms and inform themselves at booths.<br/>One ecosystem and community not to miss is Matrix. We've had a dev room where plenty of developers, server admins and newcomers exchanged their ideas and wishes for the protocol, implementations and other aspects of Matrix.</p>
<p>Room link: <a href="https://matrix.to/#/#FrOSCon:fiksel.info" target="_blank" rel="nofollow noopener noreferrer">#FrOSCon:fiksel.info</a></p>
<p>Thanks to the speakers who represented Matrix on stage! Thanks to <a href="https://matrix.to/#/@oleg:fiksel.info">Oleg</a> for continually representing Matrix at FrOSCon each year! Thanks to <a href="https://matrix.to/#/@yan:datanauten.de">Yan</a> for joining me last minute and making the dev room 300% more awesome!</p>
</blockquote>
<h2>Bram's updates on Elm and activism</h2>
<p>A Matrix SDK in Elm. <a href="https://github.com/noordstar/matrix-axelm" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>Bram mentions</p><blockquote>
<h3>Experience as a digital activist</h3>
<p>At the Matrix Community Summit 2022, I gave a talk on the struggles as a digital activist if trying to explain concepts like Matrix to politicians. The talk went very well!</p>
<p>I was really impressed by the knowledge and passion that many of the attendees at the Matrix Community Summit displayed, and I feel grateful to have had the opportunity to learn from and such an engaged and informed group of people. I am confident that the insights and perspectives shared at the summit will be invaluable to my activism moving forward, and I hope to have the chance to work with many of you in the future as we continue to strive for a more just and equitable world.</p>
<h3>Implementing Matrix in Elm</h3>
<p>For the past year, I have been looking for ways to implement a Matrix SDK in Elm. Elm is a functional programming language that promises to compile to lightweight JavaScript that raises zero runtime exceptions. This has been quite a learning process and I'm hoping to release a beta version early 2023.</p>
<p>From the past year of trying to build a functional language library, I've learned that:</p>
<ul>
<li>The Matrix spec is surprisingly easy to implement in a functional programming language;</li>
<li>There are still a lot of ambiguities left in the Matrix spec that aren't that big of a deal for imperative programming languages, but can mess up your codebase if you're a functional programmer;</li>
<li>There appears to be a need for some single-use clients that are very good at doing a single thing. (Sending automated messages to multiple clients, moderating permissions across multiple rooms, auto-sending policies, exploring unknown access tokens).</li>
<li>A lot of SDK development still revolves heavily around Element and Synapse implementation. Some events weren't part of spec yet while already widely implemented because either of those two codebases supported it.</li>
<li>The Elm compiler is VERY strict and unforgiving, which can be annoying at times but creates some very robust results. My hope is that rolling out client implementations will be relatively quick and easy as soon as the SDK implementation is ready.</li>
</ul>
<p>Progress on the Elm SDK can be found over <a href="https://github.com/noordstar/matrix-axelm" target="_blank" rel="nofollow noopener noreferrer">here</a> but will be updated in TWIM as well. You can also view my side project of a custom event type directory over at <a href="https://matrix.directory" target="_blank" rel="nofollow noopener noreferrer">https://matrix.directory</a></p>
</blockquote>
<h2>Nico's delight initiative</h2>
<p>Random Matrix related updates from Nico.</p>
<p>Nico mentions</p><blockquote>
<p>Nobody enjoys encountering bugs on a platform they use. So one of my goals for 2022 was to fix some of the bugs I hear often about in the hope it improves the reputation Matrix has. This often involves projects or functionality I don't personally use, but that I can still contribute to. I think I made some progress on it. For example I fixed a bug that prevented all calls using Element Web on servers, that were not Synapse. Similarly I opened a pull request to Element Android repo, where users would get pinged by replying to a user whose userid starts with a room ping like @roomba (however that sadly isn't merged yet). I also made various fixes to Synapse, especially related to notifications.</p>
<p>More long term I tried to push dehydrated devices forward (partially because of my day job) by implementing the second iteration of it: <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3814">MSC3814: Shriveled Sessions</a> as well as writing MSCs to one day get rid of reply fallbacks (by deprecating it and with support of <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3664">MSC3664</a> allow for better control over notifications from replies. Similarly I pushed forward <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3266">MSC3266: Room Summaries</a> to improve the experience when joining rooms via knocking or restricted joins or just previewing rooms in general. (I implemented the federation parts of that MSC in Synapse as well as in several parts of Nheko).</p>
<p>My current work is on improving presence, since that has some fun edge cases. Fingers crossed that works out next year and I find a few more things to drive by fix. Do you have anything you have seen come up often? Maybe 2023 is the year to try to fix one of the bugs you encountered far too often? It is always easier to fix stuff, that has been annoying you, so why not try and make your own life on Matrix a little bit better? Most projects are pretty open to contributors and it also often teaches you some new skills, so there is nothing to lose but lots of time!</p></blockquote>
<h2>Valheim Matrix Bridge</h2>
<p>A Valheim (the game) to Matrix bridge. <a href="https://nheko.im/nheko-reborn/valheimmatrix" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>Nico mentions</p>
<blockquote>
<p>I built a Valheim Mod to bridge Matrix messages from and to Valheim, so that I didn't have to switch windows as often when playing with the other Nheko devs. You can find it here: <a href="https://nheko.im/nheko-reborn/valheimmatrix">https://nheko.im/nheko-reborn/valheimmatrix</a></p>
<img src="/blog/img/neko.dev_cltTmMvhoxagKJMNiPHdcLLB.png" style="display: inline-block"/>
</blockquote>
<h2>Postmoogle</h2>
<p>An Email to Matrix bridge. Postmoogle is an actual SMTP server that allows you to send and receive emails on your matrix server. It can't be used with arbitrary email providers, because it acts as an actual email provider itself, so you can use it to send emails from your apps and scripts as well. <a href="https://gitlab.com/etke.cc/postmoogle" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>Aine reports</p><blockquote>
<p>At <a href="https://etke.cc">etke.cc</a> we love matrix, but have to use email as well, especially for some notification things and communication with customers. Let's face it: email ecosystem is awful, there is no really usable and nice looking email clients that allow you to collaborate and use &quot;hivemind&quot; to work on emails, there is no simple backend implementations that will just work with simple configuration, and you have to dig into all that stuff on your own to understand how it works and configure it...</p>
<p>So, we already had experience in bringing stuff into matrix and we decided to do the same for email, that's how Postmoogle was born.</p>
<p>Of course, there was email2matrix, but it's too hard to configure and it's intended only to receive messages.</p>
<p>Our &quot;20 minutes adventure&quot; to develop it was a hell ride with several weeks of nearly full-time working on it even on weekends, and during that time we literally studied SMTP protocol using RFCs, Wikipedia and source code of other mail servers (shoutout to Maddy - you guys did amazing work!).</p>
<p>It was a tough fight, but the result is satisfying - you can get an email server that handles 99% of usual email cases and uses matrix as frontend.</p>
<p>So, what's the result?</p>
<ul>
<li>we use Postmoogle for customer support</li>
<li>we offer it to customers</li>
<li>we have cases when people ditched regular email service (like gmail) and use postmoogle as the only email account</li>
</ul>
<p>Of course, we have other ideas with it, but even now it's pretty satisfying results</p></blockquote>
<h2>Halcyon</h2>
<p>Halcyon is a python matrix library made with the goal of being very easy to use, and requiring no local databases. <a href="https://github.com/WesR/Halcyon" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>gen3 mentions</p><blockquote>
<p>Halcyon is a python matrix library made with the goal of being very easy to use, and requiring no local databases. 2022 brought a few key features that made it usable for general usage in unencrypted room (We reached milestone 2!).</p>
<ul>
<li>Query for room information, with automatic background updating in a local cache. (ex, get the room name, admin, moderators, etc)</li>
<li>Improved polling for reduced server usage and for connection with slow internet</li>
<li>Image sending functionality with automatic blurhash and thumbnail generation</li>
<li>More examples</li>
<li>More documentation!</li>
</ul>
<p>Come chat with us in  <a href="https://matrix.to/#/#halcyon:blackline.xyz" target="_blank" rel="nofollow noopener noreferrer">https://matrix.to/#/#halcyon:blackline.xyz</a><br/>Find the library here:  <a href="https://github.com/WesR/Halcyon" target="_blank" rel="nofollow noopener noreferrer">https://github.com/WesR/Halcyon</a></p>
</blockquote>
<h2>f0x' year of not-so-much Matrix</h2>
<p>f0x gives an update about their Matrix (and not-so-much Matrix) projects.</p>
<p>f0x mentions</p><blockquote>
<p>Looking back I realized I didn't do much with Matrix at all this year, besides actively using it as my main communication platform.<br/><a href="https://git.pixie.town/f0x/matrix-streamchat">matrix-streamchat</a> had some commits at the start of the year but got abandoned shortly after. I stopped streaming myself, and others I knew<br/>mostly used Owncast which had it's own chat, which got some neat ActivityPub integration soon after too.</p>
<p><a href="https://git.pixie.town/f0x/synapse-media-proxy">synapse-media-proxy</a> also had very little changes, but that's quite good, because it's been very solidly running in production for more than a year now,<br/>running all the Matrix media for <a href="https://pixie.town" target="_blank" rel="nofollow noopener noreferrer">https://pixie.town</a>.</p>
<p>There's some stuff on the ops-side; worked on a refactor of my NixOS modules for Synapse with workers (not quite working yet). Moved all my bridges to a <a href="https://git.pixie.town/f0x/nixos/src/branch/main/nodes/via">new NixOS host</a>. (Barely)<br/>maintained my <a href="https://git.pixie.town/f0x/matrix-appservice-irc">matrix-appservice-irc fork</a>, and got some nice <a href="https://git.pixie.town/f0x/gitea-registration-proxy">clickfarm-supplied Haiku's</a><br/>from a bot re-using an account because I still haven't gotten around to giving it it's own access token..</p>
<blockquote>
<p>Successful registration for jamessemith70 (jamessmithp70@gmail.com)<br/>5, Frigid winter night—<br/>7, even the thieves stay at home,<br/>5, except for those two</p>
</blockquote>
<p>In my non-Matrix time I've been working a lot on the frontend and settings interface for <a href="https://github.com/superseriousbusiness/gotosocial">GoToSocial</a>, <a href="https://git.pixie.town/f0x/fedifox/">FediFox</a> Masto-api client and Masto-api compatible alternative frontend <a href="https://git.pixie.town/f0x/fedifox-shield">FediFox Shield</a>. Article about the latter: <a href="https://cthu.lu/projects/fedifox-shield">https://cthu.lu/projects/fedifox-shield</a></p>
</blockquote>
<h2>Gwmngilfen's Matrix Year</h2>
<p>Gwmngilfen gives an update about their work on Matrix in 2022.</p>
<p>Gwmngilfen tells us</p><blockquote>
<p>While 2021 was a big year for me in Matrix, 2022 has been one of steady progress on various projects. Being a community architect, much of those projects are &quot;communities on Matrix&quot; rather than code, but hey! We need users 😀. So, here's what I've been up this year...</p>
<h3><a href="https://matrix.to/#/#space:ansible.com">#space:ansible.com</a></h3>
<p>Ansible started on it's Matrix journey <a href="https://emeraldreverie.org/2021/07/08/ansible_and_matrix">last year</a> but the arguments I made then have proven solid. The community has seen steady decline in the number of IRC users, but a steady rise in the number of Matrix users - enough to make a positive trend overall. As of last month, we're now at over 50% of unique MXIDs talking each day coming from Matrix vs IRC. That's a huge milestone to have reached in just over a year!</p>
<p>We also used Matrix as a key part of our message to the wider tech landscape as part of our Keynote at AnsibleFest. I don't want to make this too product-y, but you can check out that video <a href="https://youtu.be/J7YRaPzKw4A?t=1819">here</a> and also the interview my colleagues Adam and Carol <a href="https://www.youtube.com/watch?v=5EQjSaWRWyQ">here</a> (that's worth a look, Adam crowbars Matrix into almost every sentence 😁)</p>
<p>Steady progress isn't eye catching, but I'm so pleased that the move has been a positive one, and I hope it continues in 2023.</p>
<h3><a href="https://matrix.to/#/#rlang:matrix.org">#rlang:matrix.org</a></h3>
<p>Since part of my work involves doing data science, I've also been trying to boost the presence of the Rstats world on Matrix. The community there is small so far, but we're super supportive and trying to build out our presence. My eventual goal is to make it big enough to be worth setting up a bridge to the larger Slack R4DS community (R for Data Science), but we're not there yet. If you use R at all, come see us!</p>
<h3><a href="https://github.com/GregSutcliffe/ChatStat/">ChatStat for data on your Matrix Rooms</a></h3>
<p>The one Matrix project I did get done this year (although it hasn't been updated in ... a while) is an R library for producing reports on Matrix rooms. I use this for gathering data on the Ansible community regularly, and it comes in two parts. The first part is the API calls to get all the events for a set of rooms over a given time and arrange it in a nice rectangular format. The second part uses this tabular data to produce reports on when people talk, who talks the most, and so on. It's been very useful to me over the past few months to show how the trends I talk about above have developed.</p>
</blockquote>
<h2>Carolinacon in matrix</h2>
<p>CarolinaCon is a yearly cybersecurity conference hosted out of North Carolina. Since 2004 CarolinaCon has been host to talks ranging from BioHacking, to developing OpenBSD, to Web app security, and beyond. Over the years we have run a wide range of events, mostly in person. The past two years we decided to run the conference online. <a href="https://carolinacon.org/" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>gen3 mentions</p><blockquote>
<h3>whoami</h3>
<p>CarolinaCon is a yearly cybersecurity conference hosted out of North Carolina. Since 2004 CarolinaCon has been host to talks ranging from BioHacking, to developing OpenBSD, to Web app security, and beyond. Over the years we have run a wide range of events, mostly in person. The past two years we decided to run the conference online.</p>
<h3>How did we use matrix?</h3>
<p>We decided to run a homeserver bridged with our discord. We wanted to take careful consideration to users who have never used matrix before, and offer some background information to enable them to use it even if they were feeling unsure. Along with running our own homeserver and element instance, We also made a Space that users can join to automatically see all the rooms available for the conference. When a user creates an account on our homeserver, they are automatically placed in a few key rooms such as the Space, #CTF, #general, and #announcements. Check it out on <a href="https://carolinacon.org/coms.html" target="_blank" rel="nofollow noopener noreferrer">https://carolinacon.org/coms.html</a></p>
<p>We didn't want anyone to feel left out, so all rooms are mirrored. One challenge this faced was getting permissions to work properly with rooms such as #announcements. The usage of a Space was generally positive in terms of increasing room desirability in Matrix. It was also nice to be able to include the local 2600 room into our space, something that we couldn't do with Discord.</p>
<h3>Stats</h3>
<p>We already had a large userbase on discord, but still had good user interaction on both sides. 150 users interacted in the #general chat. Of those users, 113 were from discord. Of the 37 Matrix only users, we had 7 separate homeservers. Its really cool to see that people who where already on Matrix, decided to federate in. Almost all homeservers had more then one person join, which is good to see.</p>
<p>In the future as we go back to in an person conference, we will continue to run the an online portion. The community seemed to really enjoy it, and we consider it a success as we were able to increase our outreach to world wide. Check us out at <a href="https://carolinacon.org/" target="_blank" rel="nofollow noopener noreferrer">https://carolinacon.org/</a> , we would love to chat!</p>
</blockquote>
<h2>Google-free push notifications with UnifiedPush and Ntfy</h2>
<p>Using the <a href="https://unifiedpush.org/">UnifiedPush open standard</a>, ntfy enables self-hosted (Google-free) push notifications. <a href="https://wrily.foad.me.uk/unifiedpush-notifications-for-your-matrix-server-with-ntfy" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>JulianF reports</p><blockquote>
<p>In the interests of supporting Open Tech in general, I made a small contribution to <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy">matrix-docker-ansible-deploy</a>: it can now install the <a href="https://ntfy.sh/">ntfy</a> push notifications server for you.</p>
<p>To explain what it's for: Using the <a href="https://unifiedpush.org/">UnifiedPush open standard</a>, ntfy enables self-hosted (Google-free) push notifications. The notifications go from Matrix (and other) servers, to our self-hosted ntfy server, and then straight to our phone. Especially useful for users of <a href="https://wrily.foad.me.uk/all-i-want-for-christmas-is" title="A smart phone that doesn't own me">Google-free Android</a> phones, and others who want to reduce their dependence on big tech.</p>
<p>To set it up, see <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/docs/configuring-playbook-ntfy.md">Setting up the ntfy push notifications server</a> in the playbook docs.</p>
<p>Read about it on my blog: <a href="https://wrily.foad.me.uk/unifiedpush-notifications-for-your-matrix-server-with-ntfy">UnifiedPush notifications for your Matrix server with ntfy</a>.</p>
</blockquote>
<h2>Paul's updates and blog posts</h2>
<p>Paul shares what they did in 2022. <a href="https://paul.totterman.name/" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>Paul mentions</p><blockquote>
I haven't had much time, but I did write two tiny projects and small blog posts: <a href="https://paul.totterman.name/posts/matrix-menu-bot/">https://paul.totterman.name/posts/matrix-menu-bot/</a> &amp; <a href="https://paul.totterman.name/posts/remarkable-matrix/">https://paul.totterman.name/posts/remarkable-matrix/</a></blockquote>
<h2>Open Tech Will Save Us on PeerTube</h2>
<p>Hosting of the Open Tech Will Save Us talks on PeerTube. <a href="https://wrily.foad.me.uk/open-tech-will-save-us-on-peertube" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>JulianF mentions</p><blockquote>
<p><a href="https://wrily.foad.me.uk/open-tech-will-save-us-on-peertube" target="_blank" rel="nofollow noopener noreferrer">https://wrily.foad.me.uk/open-tech-will-save-us-on-peertube</a> -- I am publishing the Open Tech Will Save Us (OTWSU) talks on an Open Tech platform — namely on my own instance of Peertube. -- Thanks to Harald for doing it first. -- This article talks more about why, how, etc. </p>
</blockquote>
<h2>This Year in Trixnity</h2>
<p>Trixnity is a multiplatform Matrix SDK written in Kotlin. You can write clients, bots, appservices and servers with it. This SDK supports JVM (also Android), JS and Native as targets for most modules. Ktor is used for the HTTP client/server and kotlinx.serialization for the serialization/deserialization. <a href="https://gitlab.com/trixnity/trixnity/" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>Benedict mentions</p><blockquote>
<p>Trixnity made some huge steps towards a fully featured cross platform matrix SDK written in Kotlin.</p>
<p>Starting with version 1.0.0 in January I added support for cross signing, secrets and key backup.</p>
<p>Version 2.0.0 in April included a large refactoring. This allows you to share a lot code between server and client implementations of the Matrix APIs. For example you can now implement a server with Trixnity. Also Olm has been bundled into most release files, push rules are evaluated, there is a new better TimelineEvent retrieving API and many more. JS has been enabled for the last module, so Trixnity is now fully multiplatform capable. With v2.3.0 dependency injection has been added to Trixnity to make it even more configurable.</p>
<p>The next big release 3.0.0 was in November. We added support for realm as database backend (e. g. for iOS), allowed to exchange the MediaStore, calculate power levels and many more. Some APIs in trixnity-client has been purified, because I improved the StateFlowCache. The developer experience has increased even more with 3.1.0 in December. It adds a completely new Timeline abstraction.</p></blockquote>
<h2>Matrix Community Summit 2022 Berlin</h2>
<p>The Matrix Community Summit 2022 in Berlin was a conference entirely focused on Matrix. <a href="https://cfp.summit2022.matrixmeetup.de/matrix-summit-conference-2022/" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>jaller94 contributes</p><blockquote>
<p>Where do I even begin? This has been such a great and fun event.<br/>On the last days of August more than 60 Matrix enthusiasts from various countries met at c-base in Berlin.<br/>We started with a Barcamp day for attendees to discuss spontaneous topics.<br/>The highlight have been two days with 36 presentations and workshops on three stages.<br/>Check out the schedule, if you want to contact some of the speakers: <a href="https://cfp.summit2022.matrixmeetup.de/matrix-summit-conference-2022/schedule/" target="_blank" rel="nofollow noopener noreferrer">https://cfp.summit2022.matrixmeetup.de/matrix-summit-conference-2022/schedule/</a><br/>Thanks to all attendees for the great conversations we've had! Thanks to all presenters for a schedule full of Matrix knowledge! Thanks to the c-base hackerspace for hosting us! Thanks to the sponsors for paying for the food and drinks!</p>
<p>For those who missed this in-person event or wish to revive some of the memories, we're publishing interviews with some community members as a podcast.<br/>In total there are 2 English and 6 German episodes, the last one being published on Fri, 3rd Jan 2023.<br/><a href="https://anchor.fm/matrix-podcast0" target="_blank" rel="nofollow noopener noreferrer">https://anchor.fm/matrix-podcast0</a></p>
</blockquote>
<h2>Nheko</h2>
<p>The motivation behind the project is to provide a native desktop app for Matrix that feels more like a mainstream chat app (Element, Telegram etc) and less like an IRC client. <a href="https://nheko-reborn.github.io/" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>Nico reports</p><blockquote>
<p>What a year, eh? I don't know if as much happened in your lives as did in mine, but certainly stuff happened! And that certainly was the case for Nheko too! There have been plenty of new and returning faces. Before I go into more detail what happened with Nheko, I'd like to prefix it with a thank you to some specific people, who noticeably contributed to Nheko in the last year on a regular basis:</p>
<ul>
<li>LorenDB, who while causing us a lot of trouble by breaking stuff, also tackles many of the more annoying issues and brings a lot of creativity to problems and their solutions.</li>
<li>MaltE, who despite being usually busy, reworked most of our mobile UI and gave Nheko a pretty bubble mode.</li>
<li>q234rty, who seems to have a solution to every issue and even upstreamed some of those patches to the KDE Qt collection, so that some of the annoying Wayland bugs won't bother many users anymore.</li>
<li>Linerly, Priit and many of the other translators, who tirelessly keep our translations up to date, even if they have to re-translate whole paragraphs after I fixed a single comma...</li>
<li>And many of the other contributors and the community, who report and fix issues as well as just make the whole journey more enjoyable!</li>
</ul>
<p>Now with that out of the way, where are we going?</p>
<p>Nheko got plenty of new features, even though some of them I tried hard to avoid for a long time! For example you can now send confetti. I prefer to toggle that off, because I think it can be distracting, but it is undeniable, that it looks very fun and fun is very important!</p>
<p>Another one is threads. Nheko now supports them, but I would have liked for threads to work differently. Some features, like notification counts for each thread, we skip out on, since it seems very hard to support well. Instead we integrate threads into the timeline and you can filter them out. Ideally threads would behave like dynamic subrooms, with titles and listed below the room list entry, but that seems not doable with the current design of threads in the specification. So we chose a design, that is still useful, but doesn't run into such limitations.</p>
<p>Apart from that we really started investing into our communities support (which is how we call our UX for spaces). While showing communities as a filter is already useful, you can now also modify those filters. Nheko now shows you notification counts, suggests you to join the space for a community (if possible) and allows you to apply permission changes across the whole community.</p>
<p>Speaking of permissions, we invested a lot into improving our management and moderation tooling. With this you can now fine tune join rules for a room (with toggles for knocking, restricted joins and more), edit the permissions using a role-like interface, edit the addresses for a room, edit your sticker packs and more. You can also knock on rooms now, which is a way to request access to a room without it having to be public or manually messaging someone for an invite and we can now show policy lists.</p>
<p>Oh, one thing that definitely deserves a mention, we had our first official CVE! Now, you might think that is not worth celebrating, but it does feel like Nheko is growing up. Partially this is thanks to Github making it easy to file CVEs for security issues though. Who would have thought we ever would have our own CVE entry? We certainly need to improve our test coverage and hardening against such issues, though to be fair in this case I pretty much already wrote a comment about what the problem would be, but just didn't fix it properly... We however are also constantly improving our encryption in general, so hopefully it only becomes more secure from now on. Part of that is fallback keys, which make it easier to come back after a long period away.</p>
<p>Nheko now also evaluates notifications locally. This is especially great for encrypted rooms, since before the server mostly guessed what should notify or not. But it also means you get highlighted when mentioned now, which makes it much easier to find where you were notified. We also now have a line where you last left off reading the room, which is much more useful than I initially wanted to admit and I use it a lot. We also have experimental support for MSC3664, which allows us to hopefully eventually get rid of reply fallbacks, by evaluating the reply relation instead of relying on every message to include the name of who you replied to for highlight purposes...</p>
<p>We also improved performance, however as always anytime you do, you end up adding features, that slow you down again. However current Nheko should still start up significantly faster than 2021 Nheko.</p>
<p>Speaking of improvements, we have made a few for macOS this year. Apple Silicon is now natively supported, so Rosetta is no longer needed to run Nheko. This means improved battery life and performance! At least on Apple Silicon, launching Nheko on macOS should now be roughly as fast as Alt+Tab-ing to another window. Additionally, you can now reply to messages straight from the notification in the Notification Center.</p>
<p>One thing I didn't imagine we would ever have is a D-Bus API. This means you now can do some limited interactions with Nheko via the D-Bus API, like switching rooms using KRunner or Rofi! For FOSDEM we also added some support for widgets, because I wanted to be able to participate in the online FOSDEM without running a second client. This however is an incomplete experience, since... why run a browser in Nheko, if you have a perfectly capable browser client you can use for widgets? Nheko just shows you how to open a widget in a browser.</p>
<p>As already mentioned, we also significantly improved our support for the PinePhone. We now have a bubble layout, which looks better on mobile than the normal layout without bubbles. There has been significant work to make dialogs fit on mobile screens as well as allowing interaction using touch in almost all places. If you want to play with a PinePhone, definitely give Nheko a try and tell us, how you like it!</p>
<p>You might have noticed that we spent a lot of work on moderation tooling and that is probably something we will continue. I have a lot of ideas on how to integrate policy lists with spaces as well as using them to auto-decline invites, automatically ban people and more. How cool would it be if you could ban people community wide using a &quot;banned members&quot; editor in Nheko that is compatible with Mjolnir? And have permissions in spaces apply globally, maybe with some tweaks based on room types? There are a lot of cool ideas out there and we will certainly be experimenting with them.</p>
<p>Another topic will be building out our call support. I want to be able to use Nheko for my gaming sessions. Just drop into a voice chat room and talk to each other. Maybe do my work conference calls, including presentations as well or do remote help for my parents and grandparents over Matrix! We also really need to support calls on other platforms.</p>
<p>Which brings us on the last big goal: We do want to eventually switch to Qt6. We did have a branch testing out how difficult that would be and it was doable, but we were mostly blocked on GStreamer not supporting Qt6 yet. This is fixed in GStreamer 1.24, which should be out soon, so this is probably the time we can start looking into finalizing the port. Qt6 will fix A LOT of Wayland issues and give us a lot of new optimization opportunities. Maybe that is the year we can get below 100MB RAM usage on my ever growing account and make every room switch feel instant.</p>
<p>Well... this was a bit of a long one? Certainly it wasn't the work of one person. The Nheko community seems to just be constantly growing and there are so many people contributing, that it really makes me love open source! Thank you! All of you! It has been a great year (Nheko wise) and I hope 2023 becomes even greater! Have a great year!</p>
<img src="/blog/img/neko.dev_qiXeJLZOYzYGDltLQptSTZxb.png" style="display: inline-block;"/>
</blockquote>
<h2>Timo Kösters' year in Matrix</h2>
<p>Timo gives an update about Conduit and their year on Matrix. <a href="https://conduit.rs" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>Timo on Conduit ⚡️ tells us</p><blockquote>
<p>Hello everyone, I am the maintainer of the Conduit Matrix project and this year my goal was to make Conduit more reliable. I've released three major updates this year, going from v0.2 to v0.5:</p>
<p>For example, the admin room received a lot of love this year. It's a Conduit-specific way of controlling the Matrix server using a chat bot. Commands are parsed using <code>clap</code> and perform actions like creating or deactivating users, adding appservices or listing rooms.</p>
<p>Conduit now supports RocksDB as the database, which is better than the previous ones, but still has some problems. I have worked on a new database abstraction layer that would allow using PostgreSQL in the future.</p>
<p>I have also worked on all sorts of bug fixes. End-to-end encrypted chats work reliably, Server ACLs are respected, the user directory hides private users and so on.</p>
<p>These and many, many other fixes allow me to use Conduit for most of my Matrix interactions now and most of the issues I encounter are client and not server bugs, see <a href="https://conduit.rs/issues" target="_blank" rel="nofollow noopener noreferrer">https://conduit.rs/issues</a></p>
<p>My goal for 2023 is adding all the modern features we need to be competitive with Synapse, like threading, space exploration, registration tokens and so on.</p>
<p>I also want to contribute to the Matrix spec and implement my ideas in Conduit, for example changing state resolution to speed up room joining.</p>
<p>I can't promise to finish all of this next year. I will finish my Bachelor's degree next year and for now I'm a full time student working on these things in the remaining time.</p>
<p>Thanks to all my individual sponsors this year and to FUTO ( <a href="https://futo.org/" target="_blank" rel="nofollow noopener noreferrer">https://futo.org/</a> ) for making this worth it financially as well. <a href="https://liberapay.com/timokoesters" target="_blank" rel="nofollow noopener noreferrer">https://liberapay.com/timokoesters</a></p></blockquote>
<h2>Sticker/emoji pack collection</h2>
<p>Tastytea maintains a collection of MSC2545 sticker pack rooms and gives an update about how the experience has been so far. <a href="https://matrix.to/#/%23stickers-and-emojis%3Atastytea.de" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>tastytea mentions</p><blockquote>
<p>At the end of 2021 i made a room with a Blobcat emoji pack, and since i could
not find a place to announce it, i started <a href="https://matrix.to/#/%23stickers-and-emojis%3Atastytea.de">a space to collect rooms with
sticker/emoji packs</a>.
It began with 3 rooms and under 500 images, but with
<a href="https://github.com/matrix-org/matrix-spec-proposals/pull/2545">MSC2545</a> getting
implemented in more and more clients in 2022, the space quickly grew and we're
now at 7 rooms with more than 30 packs containing over 2000 stickers and emojis!
<img data-mx-emoticon height="32" src="/blog/img/pixie.town_i2OfzCDAFTltAQ1BlFLITwjx.png" alt="Blobcat tooting a party horn" style="height: 2em;"/></p>
<p>One thing i didn't anticipate was that people started to request new stickers
and sometimes submitted their own. We're not just collectors anymore but also
the prime source for Blobcats on Matrix!<sup>[citation needed]</sup>
If you have a sticker room too, please drop by our lobby and tell us
about it so we can list it and make it known to more people! Do you make your
own Blobcats or want to learn how to? Visit <a href="https://matrix.to/#/%23tastytea_emojis%3Atastytea.de">my
room</a>
so we can spread the blobby joy together! <img data-mx-emoticon height="32" src="/blog/img/pixie.town_A5gZTcUCMSFX0H2ag1kOVkgw.png" alt="Blobcat holding heart in its paws" style="height: 2em;"/></p></blockquote>
<h2>Meetups in Berlin</h2>
<p>Berlin has a vivid Matrix community with not only one, but two Matrix meetups.</p>
<p>jaller94 tells us</p><blockquote>
<p>Berlin has a vivid Matrix community with not only one, but two Matrix meetups.</p>
<p>Once a month, the Matrix User Meetup Berlin (MUMB) invites people to chat about Matrix and meet other users.<br/>In summer this exchange of ideas and starting points into Matrix was sometimes combined with food from the BBQ grill.<br/>For their upcoming events in 2023, check out the room <a href="https://matrix.to/#/#mumb:c-base.org">#mumb:c-base.org</a>. It takes place at c-base on the first Wednesday of a month.<br/>Thanks to the organiser <a href="https://matrix.to/#/@saces:c-base.org">saces</a> for bringing people together!</p>
<p>Furthermore, we have the Berliner Matrix Salon 🍷 (previously called Matrix Meetup Berlin, which made it hard to tell apart from the MUMB).<br/>In the first half of 2022 we had regular meetups for developers and server admins to talk about their Matrix projects. This meetup eventually led to the Matrix Community Summit in August.<br/>We still meet infrequently to discuss our projects and what public events we could host next. We'd love to host a series of presentations at various offices which also appeal to an audience outside the Matrix community (e.g. education, public sector and health care which have a growing Matrix adoption in Germany). Ping me or <a href="https://matrix.to/#/@yan:datanauten.de">Yan</a>, if you want to help by being a presenter, have access to an office or know of a particular audience in Berlin to bring Matrix to.<br/>The room is <a href="https://matrix.to/#/#matrix-berlin:matrix.org">#matrix-berlin:matrix.org</a>. Feel free to ask when we're meeting next.</p>
</blockquote>
<h2>Sailtrix</h2>
<p>Sailtrix is a Matrix client for SailfishOS. <a href="https://forum.sailfishos.org/t/sailtrix-matrix-client-supporting-end-to-end-encryption/7199" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>HengYeDev contributes</p><blockquote>
<p>The following major changes have been applied to Sailtrix in the year 2022, in no particular order:</p>
<ul>
<li>Basic emoji verification</li>
<li>SSO Login</li>
<li>Create room</li>
<li>Integration with Sailfish.Share API</li>
<li>Room searching UI</li>
<li>and numerous cosmetic improvements and bugfixes</li>
</ul>
</blockquote>
<h2>This year in NeoChat</h2>
<p>NeoChat is a client for Matrix, the decentralized communication protocol for instant messaging. It is a fork of Spectral, using KDE frameworks, most notably Kirigami, KConfig and KI18n. <a href="https://invent.kde.org/network/neochat" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>Tobias Fella mentions</p><blockquote>
<p>It's been an interesting year, that's for sure :)</p>
<p>Let's start with some statistics:</p>
<p>Some quick git magic shows 689 commits for this year so far; Roughly 200 of those were for translations.</p>
<p>On the topic of translations, NeoChat is currently (almost) fully translated into 17 languages, with 17 others being in progress.</p>
<p>One of the major areas of work this year - like last year - has been end-to-end-encryption, which, as of last week, is released in libQuotient and NeoChat. This means that you can now read new messages and verify your session with other devices. You won't yet be able to recover from (most) undecryptable messages, we're working on implementing those parts of the matrix specification.</p>
<p>NeoChat's user interface saw major improvements this year:</p>
<p>The message list has been improved to be less buggy, adapt better to different form-factors and the different appearance options NeoChat offers, like the &quot;compact&quot; message style.</p>
<p>The compact style also recently gained a sibling in the equivalent style for the room list, which makes the list more compact by not showing the last message of the room.</p>
<p>Input handling has been overhauled, as a result user mentions are now highlighted while writing a message, making them more reliable and appear less magic to the user.</p>
<p>More new features include basic support for room search, improved emoji and reaction handling (including better emoji data, search and a skin tone selector), basic developer tools, support for showing and responding to polls and an improved account switcher. One of my personal highlights is support for collapsing large amounts of state events, which makes low-activity rooms significantly more pleasant to use.</p>
<p>On the moderation side, we've implemented support for reporting messages to the homeserver administrators and improved the kicking and banning support.</p>
<p>Progress on the space support has unfortunately been slower than hoped, with the only result of the GSoC project being the space list that is shown at the top of the room list. Space support will be one of the areas to work on in 2023.</p>
<p>Plasma users have gained some nice integration points with their desktop: File uploads and downloads will now be shown in plasma's job tracker, there is now a D-Bus runner for opening rooms, and you can share messages with purpose-enabled apps.</p>
<p>Finally, we've been working on improving NeoChat's settings. Visually, the application and room settings have been ported to newer components that look significantly nicer, especially on mobile devices. We've also added settings for configuring room visibility, join rules and notifications and added support for configuring a proxy to use when connecting to a homeserver.</p>
<p>In terms of contributors, this year was better than last year, with several people becoming active in development and bug reporting. We're especially excited about having been able to add James Graham as a third maintainer for NeoChat after all his work, focusing mostly on NeoChat's front-end and settings.</p>
</blockquote>
<h2>imbev's year in Matrix</h2>
<p>imbev gives an update about what they have been up to this year.</p>
<p>imbev tells us</p><blockquote>
<p>This past year I have worked on several projects using Matrix:</p>
<ul>
<li><a href="https://gitlab.com/imbev/matrix-rss-bridge">matrix-rss-bridge</a>
<ul>
<li>This is a bot that can be configured to watch RSS/Atom feeds and relay to Matrix rooms. It is written in Python, configured with a single <code>config.toml</code>, and licensed under the GPLv3.</li>
<li>I don't actively work on it, however I will review and merge contributions that improve the project.</li>
</ul>
</li>
<li><a href="https://gitlab.com/imbev/matrix-debate-bot">matrix-debate-bot</a>
<ul>
<li>This is a bot that &quot;moderates&quot; discussion in Matrix rooms. It does nothing more than provide a signal every 2 minutes. Also in Python, interacted with via &quot;command&quot; messages, and licensed under the GPLv3.</li>
<li>Same thing as the previous project :)</li>
</ul>
</li>
<li><a href="https://gitlab.com/imbev/matrix-quicksetup">matrix-quicksetup</a>
<ul>
<li>This is a docker compose file and a few config files to help setup a Matrix homeserver and client. The homeserver setup is Conduit, and the client is Cinny. I don't advise that anyone use this in a serious deployment, but if you want to quickly test Matrix entirely on your local machine, this may be useful.</li>
<li>Same as previous</li>
</ul>
</li>
<li><a href="https://codeberg.org/imbev/simplematrixbotlib">simplematrixbotlib</a>
<ul>
<li>This is an easy to use bot library for the Matrix ecosystem written in Python. Having taken ownership of the project, I maintain the project with help from @kim:sosnowkadub.de, @moanos:hyteck.de, and others. Thank you for your contributions!</li>
<li>While I anticipate releasing version 3 of simplematrixbotlib, this next project has captured my focus recently.</li>
</ul>
</li>
<li><a href="https://codeberg.org/imbev/matrix-social">matrix-social</a>
<ul>
<li>matrix-social is a Matrix &quot;Social Media&quot; client. It is a webapp written in Rust using WASM, Yew, and the Matrix Rust SDK. Inspired by the design of Reddit, matrix-social will provide a similar experience, but based entirely upon Matrix. By providing seamless interoperability with Matrix chat clients, matrix-social will extend the Matrix ecosystem without dividing it. matrix-social currently lacks crucial features that will be added soon.</li>
<li>I actively develop matrix-social and will be doing so for the foreseeable future. At the moment, I am porting the styling from the Bulma CSS framework to TailwindCSS for greater control. If you'd like to try out the current state of matrix-social, <a href="https://imbev.codeberg.page/matrix-social/">https://imbev.codeberg.page/matrix-social/</a> is available. Join us in the Matrix room <a href="https://matrix.to/#/#matrix-social:matrix.org">#matrix-social:matrix.org</a> !</li>
</ul>
</li>
</ul>
</blockquote>
<h2>Kitsune's year in Matrix</h2>
<p>Kitsune, one of the Spec Core Team members and maintainer of the Quotient client for Matrix, gives an update about their work this year as well as some new projects.</p>
<p>kitsune mentions</p><blockquote>
<p>This year hasn't been very productive for me (not in Matrix at least) but a few things are worth a mention.</p>
<h3><a href="https://github.com/quotient-im">Quotient</a></h3>
<p>This year I finally got to diving into the (new) E2EE code for libQuotient that NeoChat fellows started writing back in 2021, and was quite happy to end up collaborating with <a href="https://matrix.to/#/@tobiasfella:kde.org">Tobias Fella</a> on making it even better, all the way to merging and releasing way overdue libQuotient 0.7.0. The best news for me in all this was not even getting E2EE to its first actually usable release but the fact that libQuotient is no more a one man show. And now that there's yet another libQuotient-based client (with much more solid traction than any client before), there's hope that the project will move on at a somewhat steadier pace.</p>
<h3>Spec Core Team</h3>
<p>I did my share of MSC reviews (much fewer than I'd like to) and carried on with my role of ensuring Element doesn't throw too much weight behind its contributions (although there are a few other people in SCT who seriously push for neutrality in things we work on; so that role is rather formal). One thing that I unfortunately did not find enough time to help with this year but I'm sure we'll make it happen in 2023 is to move our API definitions from Swagger (v2) to OpenAPI v3, ditching all the Swagger extensions we had to add - thanks to <a href="https://github.com/zecakeh">Kevin</a> for driving this home.</p>
<h3>CLUP.chat</h3>
<p>About a year ago I was contacted by folks who wanted to use Matrix as a backend to bridge WhatsApp, Signal and Telegram for scout (and other) communities in Germany and asked me to be their technical advisor. Less than a year later we went live (you can connect the groups <a href="https://clup.chat/">here</a>), soon after ran into rate-limiting issues <em>outside</em> of Matrix (centralised networks, heh...), did the homework, and now busy making the whole thing worth charging money for. The backend is almost entirely vanilla code for Synapse and Mautrix-based bridges, plus a small website and a non-Matrix bot to onboard people.</p>
</blockquote>
<h2>Jae's year of Matrix</h2>
<p>Jae gives an update about what they worked on this year.    <a href="From" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>Jae (Beep) shares</p><blockquote>
<p>Yet another year well spent on Matrix, which was a bit more <em>dynamic</em> than the previous ones.<br/>
From mitigating spam attacks to creating brand-new projects and also contributing to others, there's no shortage of news.</p>
<h3><a href="https://sr.ht/~jae/cert-monitor/">cert-monitor</a></h3>
<p><code>cert-monitor</code> is a small program made entirely in vanilla Python that checks the validity of your SSL certificates and warn you when they are about to expire.<br/>
The idea for it originated in a Matrix room in which the other administrator would usually forget to renew SSL (bringing down their homeserver).<br/>
The software can send notifications to e-mails and Matrix and other methods are in the works like NTFy (but a bit on stale since Matrix support was the main goal).</p>
<h3><a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3868">MSC3868: Room Contribution</a></h3>
<p>The MSC3868 (currently still a draft) is a spec proposal by me and Aminda to add a way for rooms to advertise easily official links like code repositories, ways to contribute to translations, donations and more but only showing to users inside the room.<br/>
The start of it is that we noticed that usually users don't even bother reading the topic/MOTD of the room, which renders putting links inside of it just about useless in most cases.<br/>
The proposal is still being refined, but the big lines are there already!</p>
<h3><a href="https://git.sr.ht/~jae/gh-bot">gh-bot</a></h3>
<p><code>gh-bot</code> is a small bot made to be used with the webhook function of various Git forges (namely GitHub, GitLab and Gitea/Forgejo).<br/>
The bot itself is pretty simple and will just output new commits, new stars and build statuses in all the rooms the bot is.</p>
<h3><a href="https://git.sr.ht/~jae/hsl-matrix-notifier">hsl-matrix-notifier</a></h3>
<p><code>hsl-matrix-notifier</code> has a bit of an exotic use case: it is made to track problems with the Helsinki public transports company and warn about potential disruptions.<br/>
For now, it is very basic and is still being worked on to have a better version (like if no news, it will still post old stuff when I would like in term something more like an RSS feed).<br/>
When I move, I'll probably spin off this bot to make a local version or even build something, so it can be configured by city.</p>
<hr/>
<p>In the end, this year has been a very dynamic one in the Matrix world, and I can't wait to see what is coming next.<br/>
For my part, I don't intend to stop there, and I have even more Matrix related projects, so stay tuned!<br/>
Oh also, I almost forgot, happy new year Matrixians, stay awesome!</p>
</blockquote>
<h2>Cinny</h2>
<p>Cinny is a Matrix client for instant messaging. Our main goal is to make the best UI/UX so that less technical folks can easily adopt Matrix. <a href="https://cinny.in" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>ajbura shares</p><blockquote>
<p>Cinny is a Matrix client for instant messaging. Our main goal is to make the best UI/UX so that less technical folks can easily adopt Matrix.<br/>2022 has been really productive year for Cinny, we have landed Full Spaces support, Room settings, Custom emojis and stickers, Session verification and cross-signing, and so many cool features.</p><p>Lately, we have been working on a design system for Cinny and it is almost ready to release. Our short-term goals for 2023 would be to incorporate the design system into Cinny, and convert the code to TypeScript both of which will greatly improve the developer and user experience.</p><p>You can join <a href="https://matrix.to/#/#cinny-space:matrix.org">Cinny space</a> to talk about it or browse <a href="https://cinny.in">https://cinny.in</a> </p>
<img src="/blog/img/matrix.org_nIQXMyDqrhZmlzaPlmcPHPKV.png" style="display: inline-block;"/>
</blockquote>
<h2>2022 year in Nyatrix</h2>
Nyaoori gives us an update about their various Matrix related projects.
<p>Nyaaori ⚛️ tells us</p><blockquote>
      <ul>
        <li>Initial workings on spec.cat
          <ul>
            <li>Intended to be a community-driven extension specification to allow for easier collaboration and client/server integration prior to submitting an MSC</li>
            <li>Would allow for finalising community things even if they get little to no attention from SCT</li>
            <li>Eventually will take over maintenance of Catalyst</li>
          </ul>
        </li>
        <li>Initial work on decentralised trust/moderation system
          <ul>
            <li>Should work on under any federated system, not just matrix</li>
            <li>Intended to reduce workload on moderators/admins</li>
            <li>Makes use of a web of trust system, with each user or server being their own center of trust</li>
          </ul>
        </li>
        <li>Catalyst (fork of conduit) progress
          <ul>
            <li>Cacophony
              <ul>
                <li checked="false">
                  <p>Implementation of Discord C2S inside a matrix homeserver</p>
                </li>
                <li checked="false">
                  <p>Marginally modified Discord web client can connect to it</p>
                </li>
              </ul>
            </li>
            <li>Partial Dendrite API support
              <ul>
                <li checked="false">
                  <p>Allows using TARDIS</p>
                </li>
              </ul>
            </li>
            <li>Room V10 support
              <ul>
                <li checked="false">
                  <p>=&gt; Upstreamed to Conduit</p>
                </li>
              </ul>
            </li>
            <li>Support for private read receipts
              <ul>
                <li checked="false">
                  <p>=&gt; Upstream in progress</p>
                </li>
                <li>Partial support for displaying space hierarchies</li>
              </ul>
            </li>
            <li>Backfill to other servers via S2S
              <ul>
                <li checked="false">
                  <p>=&gt; Upstream in progress</p>
                </li>
              </ul>
            </li>
            <li>Code refactor alongside Conduit</li>
            <li>Many minor bug fixes
              <ul>
                <li checked="false">
                  <p>=&gt; Most upstreamed</p>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li>Initial research into designing my own matrix client
          <ul>
            <li>Intended to be extensible</li>
            <li>Plugins/extensions should be installable via matrix itself</li>
            <li>Eventually will be spec.cat&apos;s reference client</li>
          </ul>
        </li>
      </ul>
</blockquote>
<h2>Ement</h2>
<p>Ement or ement.el is a Matrix client for GNU Emacs, the classic-yet-ever-new text editor and Lisp environment. <a href="https://github.com/alphapapa/ement.el" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>alphapapa contributes</p><blockquote>
<p>
<a href="https://github.com/alphapapa/ement.el">Ement</a> is a Matrix client for <a href="https://www.gnu.org/software/emacs/">GNU Emacs</a>, the classic-yet-ever-new text editor and Lisp environment.  After a couple of years of off-and-on development, 2022 saw the first versioned release, published to <a href="https://elpa.gnu.org/">GNU ELPA</a>, the official Emacs package repository (so it's installable into Emacs "out-of-the-box," without any additional configuration).
</p>
<p>
This development was enabled by the maturation and publishing of Ement's underlying HTTP library, <a href="https://github.com/alphapapa/plz.el">plz</a>, also to ELPA.  And another library, <a href="https://github.com/alphapapa/taxy.el">taxy</a>, used in Ement for organizing rooms into meaningful groups for the UI, was also released to ELPA.
</p>
<p>
Along the way, Ement gained useful features like a helpful command menu based on the <a href="https://github.com/magit/transient">Transient</a> library (the one used in <a href="https://magit.vc/">Magit</a>, the popular Emacs frontend to git), the ability to show and send images, files, and reactions, read receipts, room directories and searching, an improved notification system, fancy, configurable room grouping provided by <code>taxy</code>, and many other improvements and fixes.
</p>
<p>
As well, although Ement doesn't support E2EE natively, users have successfully used it via <a href="https://github.com/matrix-org/pantalaimon">Pantalaimon</a>, the E2EE proxy daemon, allowing Ement to be used with encrypted rooms.
</p>
<p>
Altogether, Ement now provides a stable, reliable client for Emacs users to "jack in" to the Matrix.  Users and interested parties are invited to join the chat room, <code>#ement.el:matrix.org</code>, where users help each other and announcements are made.
</p>
<p>
Looking forward to 2023, it's planned to improve support for newer versions of the client-server spec.  Sliding-sync support will be especially helpful for improving initial sync times, and the new event-to-timestamp endpoints will aid in searching room events and paging back in history by date.  As well, the next stable release of Emacs, version 29, will include native SQLite support, and the author looks forward to investigating how that might be helpful for Ement (e.g. caching events locally, similar to Element).
</p>
<p>
And as always, like Emacs, Ement is Free Software, so contributions are welcome.  Feel free to submit bug reports, feature requests, and other feedback on the repo's issue tracker and in the chat room.</p></blockquote>
<h2>Matrix Highlight</h2>
<p>Matrix Highlight is a web annotation tool based on Matrix. It allows you to select and highlight text on webpages, as well as comment on it. Because it's built on Matrix, you can keep this information hosted on your own hardware, and highlight pages together with other users. <a href="https://github.com/DanilaFe/matrix-highlight" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>Daniel mentions</p><blockquote>
<p>Matrix Highlight is a web annotation tool based on Matrix. It allows you to select and highlight text on webpages, as well as comment on it. Because it's built on Matrix, you can keep this information hosted on your own hardware, and highlight pages together with other users.</p>
<p>This year, Matrix Highlight switched to manifest V2. This is a browser extension version format supported by Firefox (Chrome too, but not for the web store). Now, you can highlight pages from Firefox! In addition to this, the project switched to using a shadow DOM for styling its UI elements, which makes it significantly less likely to be affected by the style and design of the webpage it's running on.</p>
<p>You can find Matrix Highlight on its <a href="https://github.com/DanilaFe/matrix-highlight">GitHub page</a> or read about it in the <a href="https://danilafe.com/blog/introducing_highlight/">introductory blog post</a>.</p></blockquote>
<h2>Populus-Viewer</h2>
<p>Populus-Viewer is a social annotation tool, powered by Matrix. It lets you attach Matrix chats to PDFs, images, videos, and audio files. <a href="https://opentower.github.io/populus-viewer/" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>gleachkr tells us</p><blockquote>
<p>Populus-Viewer is a social annotation tool, powered by Matrix. It lets you attach Matrix chats to PDFs, images, videos, and audio files.</p><p>It&#x27;s been a big year for populus! Since last January, we&#x27;ve seen huge improvements in usability, appearance, and Matrix feature support, that have taken populus from a fun experiment to a useful tool (though we&#x27;re still considering ourselves in beta). The topline item is that we&#x27;ve achieved our original goal of supporting matrix-powered social annotation of PDFs and audiovisual media. So what&#x27;s left to do?</p><p>Here are some ideas for the New Year.</p><ul><li>Let&#x27;s add support for annotating web files: HTML (out on the web) and WARC (web archives, stored as files on matrix).</li><li>Let&#x27;s add widget support for populus chats, so you can annotate your documents with all sorts of matrix-powered tools.</li><li>Let&#x27;s get moving on <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3775">the</a> <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3752">social</a> <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3592">annotation</a> <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3574">MSCs</a></li><li>Stickers?</li></ul><p>If you&#x27;d like to talk about any of these ideas, or add some of your own, come join us at: <a href="https://matrix.to/#/%23opentower%3Amatrix.org">#opentower:matrix.org</a></p></blockquote>
<!-- Stuff I forgot because I didn't tag it... -->
<h2>Aminda's matrix update</h2>
<p>Aminda (she/they 🏳️‍⚧️ MSC1769|MSC3189) reports</p><blockquote>
<p>so I have been doing</p>
<ul>
<li><a href="https://gitea.blesmrt.net/mikaela/gist/commits/branch/master/matrix">https://gitea.blesmrt.net/mikaela/gist/commits/branch/master/matrix</a></li>
<li><a href="https://git.piraattipuolue.fi/Pikaviestimet/Pikaviestimet/commits/branch/master/matrix">https://git.piraattipuolue.fi/Pikaviestimet/Pikaviestimet/commits/branch/master/matrix</a></li>
<li><a href="https://github.com/Mikaela/mikaela.github.io/commits/master/blog/_posts">https://github.com/Mikaela/mikaela.github.io/commits/master/blog/_posts</a></li>
<li><a href="https://github.com/Mikaela/mikaela.github.io/commits/master/pages/matrix.markdown">https://github.com/Mikaela/mikaela.github.io/commits/master/pages/matrix.markdown</a></li>
<li><a href="https://github.com/Mikaela/mikaela.github.io/commits/master/txt/matrix.txt">https://github.com/Mikaela/mikaela.github.io/commits/master/txt/matrix.txt</a></li>
</ul></blockquote>
<h2>matrix-docker-ansible-deploy</h2>
<p>Matrix (An open network for secure, decentralized communication) server setup using Ansible and Docker <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/" target="_blank" rel="nofollow noopener noreferrer">↗</a></p>
<p>Slavi tells us</p><blockquote>
<p>For <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/">matrix-docker-ansible-deploy</a>, 2022 started with <strong>breaking the <a href="https://github.com/matrix-org/synapse">Synapse</a> monopoly</strong> by <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#dendrite-support">adding support</a> for the <a href="https://github.com/matrix-org/dendrite">Dendrite</a> Matrix homeserver in early January. This required various internal changes so that the <a href="https://www.ansible.com/">Ansible</a> playbook would not be Synapse-centric anymore. This groundwork paved the way for continuing in this direction and we <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#conduit-support">added support</a> for <a href="https://conduit.rs/">Conduit</a> in August.</p>
<p>When it comes to the <code>matrix-docker-ansible-deploy</code> Ansible playbook, 2022 was the year of the non-Synapse homeserver implementation. In practice, none of these homeserver implementations seem ready for prime-time yet and there is no migration path when coming from Synapse. Having done our job of adding support for these alternative homeserver implementations, we can say that we're not getting in the way of future progress. It's time for the Dendrite developers to push harder (development-wise) and for the Synapse developers to take a well-deserved long (infinite) break, and we may get to see more people migrating away from Synapse in the next year(s).</p>
<p>Support for the following new <strong>bridges</strong> was added:</p>
<ul>
<li><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#postmoogle-email-bridge-support">Postmoogle</a> for bi-directional email bridging, which supersedes my old and simplistic <a href="https://github.com/devture/email2matrix">email2matrix</a> one-way bridge-bot</li>
<li><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#mautrix-discord-support">mautrix-discord</a></li>
<li><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#go-skype-bridge-bridging-support">go-skype-bridge</a></li>
<li><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#matrix-appservice-kakaotalk-support">matrix-appservice-kakaotalk</a></li>
</ul>
<p>Support for the following new <strong>bots</strong> was added:</p>
<ul>
<li><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#buscarron-bot-support">buscarron bot</a></li>
<li><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#honoroit-bot-support">Honoroit bot</a></li>
<li><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#matrix-registration-bot-support">matrix-registration-bot</a></li>
<li><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#matrix-hookshot-bridging-support">matrix-hookshot</a></li>
<li><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#maubot-support">maubot</a></li>
</ul>
<p>Support for the following new <strong>components and services</strong> was added:</p>
<ul>
<li><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#borg-backup-support">Borg backup</a></li>
<li><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#cactus-comments-support">Cactus Comments</a></li>
<li><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#cinny-support">Cinny</a> client support</li>
<li><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#ntfy-push-notifications-support">ntfy</a> notifications</li>
<li><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#matrix-ldap-registration-proxy-support">matrix-ldap-registration-proxy</a></li>
<li><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#matrix_encryption_disabler-support">matrix_encryption_disabler support</a></li>
<li><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#synapse-s3-storage-provider-support">synapse-s3-storage-provider</a> to stop the Synapse media store from being a scalability problem. This brought along <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#synapse-container-image-customization-support">another feature</a> - an easier way to customize the Synapse container image without having to fork and self-build all of it from scratch</li>
</ul>
<p>Besides these major user-visible changes, a lot of work also happened <strong>under the hood</strong>:</p>
<ul>
<li>
<p>we made <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#potential-backward-compatibility-break-major-improvements-to-synapse-workers">major improvements to Synapse workers</a> - adding support for stream writers and for running multiple workers of various kinds (federation senders, pushers, background task processing workers, etc.)</p>
</li>
<li>
<p>we <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#backward-compatibility-break-changing-how-reverse-proxying-to-synapse-works---now-via-a-matrix-synapse-reverse-proxy-companion-service">improved the compatibility of (Synapse + workers) with the rest of the playbook</a> by introducing a new <code>matrix-synapse-reverse-proxy-companion-service</code> service</p>
</li>
<li>
<p>we started <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#the-playbook-now-uses-external-roles-for-some-things">splitting various Ansible roles out of the Matrix playbook and into independent roles</a> (e.g. <code>matrix-postgres</code> -&gt; <a href="https://github.com/devture/com.devture.ansible.role.postgres">com.devture.ansible.role.postgres</a>), which could be included in other Ansible playbooks. In fact, these roles already power a few <strong>interesting other sibling playbooks</strong>:</p>
<ul>
<li><a href="https://github.com/spantaleev/gitea-docker-ansible-deploy">gitea-docker-ansible-deploy</a>, for deploying a <a href="https://gitea.io/">Gitea</a> (self-hosted <a href="https://git-scm.com/">Git</a> service) server</li>
<li><a href="https://github.com/spantaleev/nextcloud-docker-ansible-deploy">nextcloud-docker-ansible-deploy</a>, for deploying a <a href="https://nextcloud.com/">Nextcloud</a> groupware server</li>
<li><a href="https://github.com/spantaleev/vaultwarden-docker-ansible-deploy">vaultwarden-docker-ansible-deploy</a>, for deploying a <a href="https://github.com/dani-garcia/vaultwarden">Vaultwarden</a> password manager server (unofficial <a href="https://bitwarden.com/">Bitwarden</a> compatible server)</li>
</ul>
</li>
</ul>
<p>These sibling playbooks co-exist nicely with one another due to using <a href="https://traefik.io/">Traefik</a> for reverse-proxying, instead of trying to overtake the whole server by running their own <a href="https://nginx.org/">nginx</a> reverse-proxy. Hopefully soon, the Matrix playbook will follow suit and be powered by Traefik by default.</p>
<p>Last, but not least, to optimize our <a href="https://etke.cc/">etke.cc managed Matrix server hosting service</a>'s performance (but also individual Ansible playbook runs for people self-hosting by themselves using the playbook), we've <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#2x-5x-performance-improvements-in-playbook-runtime">improved playbook runtime 2-5x</a> by employing various Ansible tricks.</p>
</blockquote>
<h2>MTRNord's Journey of Matrix 2022</h2>
<p>MTRNord is known for starting way too many interesting projects. Definitely worth checking out!</p>
<p>MTRNord tells us</p><blockquote>
<p>Since I worked on so many projects this year, I am trying to group these here.</p>
<h3><a href="https://github.com/MTRNord/matrix-art/pull/121">Matrix-Art</a></h3>
<p>Matrix Art was meant to be a Deviantart or Art Station style image gallery using Matrix. This project, as many others of mine, is currently on ice.</p>
<p>It offered profiles, uploading images and comments using Spaces as FS.</p>
<p>You can see the latest version of it at <a href="https://github.com/MTRNord/matrix-art/pull/121">https://github.com/MTRNord/matrix-art/pull/121</a></p>
<h3><a href="https://github.com/MTRNord/matrix-moderation-widget">Matrix Moderation Widget for Mjolnir</a></h3>
<p>A widget made to be a companion to <a href="https://github.com/matrix-org/mjolnir">Mjolnir</a>. It offers a form input and lists to view the policy lists.</p>
<p>For 2023 this effort is going into the Moderation bot I am currently developing as part of the Matrix Spam ML project. While not being a widget, similar UX decisions are used.</p>
<h3><a href="https://github.com/MTRNord/matrix-fuzz">Matrix Fuzz</a></h3>
<p>A simple fuzzer written in rust to fuzz some endpoints of Synapse.<br/>A Fuzzer is essentially a bruteforce approach to finding bugs. Usually by sending pseudo random characters.</p>
<p>As part of running this, I found a few minor verification issues at Synapse:</p>
<ul>
<li>https://github.com/matrix-org/synapse/issues/13510</li>
<li>https://github.com/matrix-org/synapse/issues/13511</li>
<li>https://github.com/matrix-org/synapse/issues/13512</li>
<li>https://github.com/matrix-org/synapse/issues/13664</li>
</ul>
<p>For 2023 the goal is to fuzz more endpoints, especially within the rooms using fuzzed events.</p>
<h3><a href="https://github.com/MTRNord/mrsbfh">MRSBFH - Matrix-Rust-SDK-Bot-Framework-Helper</a></h3>
<p>In 2022, I also worked on further updating <a href="https://github.com/MTRNord/mrsbfh">https://github.com/MTRNord/mrsbfh</a> which is a command bot framework for the matrix-rust-sdk.</p>
<p>Since then, the SDK massively improved how you interact with the API. Due to this, there are no plans to further develop it as by now the SDK has a sufficient API interface.</p>
<h3><a href="https://github.com/MTRNord/generic-conference-bot/tree/MTRNord/Pretalx">Generic Conference Bot</a></h3>
<p>People likely know the Conference bot from FOSDEM. Back in February, I did work on making it possible to be used more generic without the hard-coded penta integration.</p>
<p>As a result, this branch was created: <a href="https://github.com/MTRNord/generic-conference-bot/tree/MTRNord/Pretalx">https://github.com/MTRNord/generic-conference-bot/tree/MTRNord/Pretalx</a> It offers a way to easily add new backends and adds a pretalx backend. Due to the changes it has, there is currently no way this is possible to upstream, but maybe it will help someone from the community.</p>
<h3><a href="https://github.com/MTRNord/matrix-spam-ml">Matrix Spam ML</a></h3>
<p>This project is mainly a project to experiment with using Machine Learning for Moderation as a warning system.</p>
<p>As part of this effort, there is currently an RNN model and a BERT model available. The trainingset is public.</p>
<p>For users, there is both an API endpoint for this available and a Matrix Mod Bot in progress.</p>
<p>You can find more about it at https://github.com/MTRNord/matrix-spam-ml or join the chat at <a href="https://matrix.to/#/#matrix-spam-ml:midnightthoughts.space">#matrix-spam-ml:midnightthoughts.space</a></p>
<h3><a href="https://gitlab.nordgedanken.dev/MTRNord/matrix-faq-rasa">Matrix Faq Rasa</a></h3>
<p>This is a RasaX based FAQ Bot project. The goal is to have a NLP based FAQ bot. It currently is very simple and not finished. The goal for 2023 is to continue working on this and getting it to a stable level where people can contribute to.</p>
<h3><a href="https://matrix.turbo.fish">Matrix.org Zola</a></h3>
<p>Last but not least, I did kick off the Zola rewrite of Matrix.org together with Thib and jplatte, and a small team of element devs and designers. Please note that this was initiated by the community and still is a community project.</p>
<p>The goal of this rewrite is to move away from Gatsby and rewrite and redesign matrix.org using the zola static page generator.<br/>We made great progress this year, but sadly it will take a bit longer before it can be deployed. :) If you want to watch progress, I suggest looking at things labeled with &quot;zola&quot; in <a href="https://github.com/matrix-org/matrix.org/">https://github.com/matrix-org/matrix.org/</a></p>
<h3><a href="https://miki.community">Miki - A Matrix Wiki</a></h3>
<p>Miki is a MediaWiki meant for Matrix. It isn't a bridge, but instead the goal is to document projects and history around Matrix. This project aims for 2023 to extend the data, while in 2022 the work was focused around infrastructure.</p>
</blockquote>
<p>That's all I know about so far. I hope you had a great year and that the next one will be even better. As you can see, the Matrix community is a riot of colors and seems to grow every year. I absolutely love it!</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2022&#x2F;10&#x2F;18&#x2F;testing-faster-remote-room-joins&#x2F;" title="Testing faster remote room joins">Testing faster remote room joins</a></h2>
                <span>
                    18.10.2022 13:35
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/richard-van-der-hoff">
                        Richard van der Hoff
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>As of <a href="https://matrix.org/blog/2022/10/17/synapse-1-69-released">Synapse 1.69</a>, we consider &quot;faster remote room joins&quot; to be ready for testing by server admins.</p>
<p>There are a number of caveats, which I'll come to, but first: this is an important step in a project which we've been working on for 9 months. Most people who use Matrix will be familiar with the pain of joining a large room over federation: typically you are just faced with a spinner, which is eventually replaced by a cryptic error. If you're lucky, the room eventually pops up in your room list of its own accord. The whole experience is <a href="https://github.com/matrix-org/synapse/issues/1211">one of the longest-standing open issues in Synapse</a>.</p>

                <p><a href="/blog/2022/10/18/testing-faster-remote-room-joins/#continue-reading">Continue reading…</a></p>
                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2022&#x2F;08&#x2F;15&#x2F;the-matrix-summer-special-2022&#x2F;" title="The Matrix Summer Special 2022">The Matrix Summer Special 2022</a></h2>
                <span>
                    15.08.2022 00:00
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>At the end of each year it’s been traditional to do a big review of everything that the Matrix core team got up to that year, and announcing our predictions for the next.  You can see the last edition in <a href="https://matrix.org/blog/2021/12/22/the-mega-matrix-holiday-special-2021">2021 here</a> - and if you’re feeling nostalgic you can head down memory lane with the <a href="https://matrix.org/blog/2020/12/25/the-matrix-holiday-special-2020">2020</a>, <a href="https://matrix.org/blog/2019/12/24/the-2019-matrix-holiday-update">2019</a>, <a href="https://matrix.org/blog/2018/12/25/the-2018-matrix-holiday-special">2018</a> ones etc too.</p>
<p>This year is turning out to be slightly different, however.  Our plans for 2022 are particularly ambitious: to force a step change in improving Matrix’s performance and usability so that we firmly transition from our historical “make it work” and “make it work right” phases into “<strong>making it fast</strong>”.  Specifically: to succeed, Matrix <strong>has</strong> to succeed in powering apps which punch their weight in terms of performance and usability against the proprietary centralised alternatives of WhatsApp, Discord, Slack and friends.</p>
<p>We’ve seen an absolute tonne of work happening on this so far this year… and somehow the end results all seem to be taking concrete shape at roughly the same time, despite summer traditionally being the quietest point of the year.  The progress is super exciting and we don’t want to wait until things are ready to enthuse about them, and so we thought it’d be fun to do a spontaneous Summer Special gala blog post so that everyone can follow along and see how things are going!</p>
<h2 id="making-it-fast">Making it fast</h2>
<p>We have always focused on first making Matrix “work right” before we make it “work fast” - sometimes to a fault.  After all: the longer you build on a given architecture the harder it becomes to swap it out down the line, and the core architecture of Matrix has remained essentially the same since we began in 2014 - frankly it’s amazing that the initial design has lasted for as long as it has.</p>
<p>Over the years we’ve done a lot of optimisation work on the core team implementations of that original architecture - whether that’s Synapse or matrix-{js,react,ios,android}-sdk and friends: for instance Synapse uses 5-10x less RAM than it used to (my personal federated server is only using 145MB of RAM atm! 🤯) and it continues to speed up in pretty much every new release (<a href="https://github.com/matrix-org/synapse/pull/13522">this PR</a> looks to give a 1000x speedup on calculating push notification actions, for instance!).  However, there are some places where Matrix’s architecture itself ends up being an embarrassingly slow bottleneck: most notably when rapidly syncing data to clients, and when joining rooms for the first time over federation.  We’re addressing these as follows…</p>
<h3 id="sliding-sync-aka-sync-v3">Sliding Sync (aka Sync v3)</h3>
<p>Historically, /sync always assumed that the client would typically want to know about all the conversations its user is in - much as an IRC client or XMPP client is aware of all your current conversations.  This provided some nice properties - such as automatically enabling perfect offline support, simplifying client and server development, and making features like “jump to room” and “tab complete” work instantly given the data is all client-side.  In the early days of Matrix, when nobody was yet a power user, this wasn’t really a problem - but as users join more conversations and join bigger rooms, it’s become one of Matrix’s biggest performance bottlenecks.  In practice, logging into a large account (~4000 rooms) can take ~10 minutes and hundreds of megabytes of network traffic, which is clearly ridiculous. Worse: if you go offline for a day or so, the incremental sync to catch back up can take minutes to calculate (and can even end up being worse than an initial sync).</p>
<p>To fix this, we started work on Sliding Sync (<a href="https://github.com/matrix-org/matrix-spec-proposals/blob/kegan/sync-v3/proposals/3575-sync.md">MSC3575</a>) in 2021: a complete reimagining of the /sync API used by Matrix clients to receive data from their homeserver.  In Sliding Sync, we only send the client the data it needs to render its UI.  Most importantly, we only tell it about the subset of rooms which it is visible in the scroll window of its room list (or that it needs to display notifications about).  As the user scrolls around the room list, they slide the window up and down - hence the name “sliding sync”.  Sliding Sync was originally called Sync v3, given it’s our 3rd iteration of the sync API - it got renamed Sliding Sync given the current sync API confusingly ended up with a prefix of /v3.</p>
<p><a href="https://matrix.org/blog/2021/12/22/the-mega-matrix-holiday-special-2021#sync-v3">Back in December</a> our work on Sliding Sync was still pretty early: we had the initial MSC, an experimental proxy that converted the existing sync v2 API into Sliding Sync, and a simple proof-of-concept web client to exercise it.  Since then, however, there has been spectacular progress:</p>
<ul>
<li>MSC3575 has undergone some <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575/commits/bea7323c0b03dbd46600ce8fe01218d55f0de083">big</a> <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575/commits/a0bf4027bcef278e43a570c6fa94f2b1bef3488b">iterations</a> as we converge on the optimal API shape.</li>
<li>The <a href="https://github.com/matrix-org/sliding-sync">sliding-sync</a> proxy has matured to be something which we’re now running in stealth against matrix.org for those dogfooding the API</li>
<li>We added the concept of extensions to split out how to sync particular classes of data (to avoid the API becoming a monolithic monster) - specifically:
<ul>
<li>Account Data</li>
<li>End-to-end Encryption</li>
<li>To-device messages</li>
<li>Ephemeral events (to be done)</li>
<li>Presence (to be done)</li>
</ul>
</li>
<li>We added support for spaces!</li>
<li>We implemented it in <a href="https://github.com/matrix-org/matrix-js-sdk/pull/2242">matrix-js-sdk</a> (which merged a few weeks ago!)</li>
<li>…and have a WIP implementation in <a href="https://github.com/matrix-org/matrix-rust-sdk/pull/728">matrix-rust-sdk</a> too.</li>
</ul>
<p>But most importantly, we’ve also been busy implementing Sliding Sync in Element Web itself so we can start using it for real.  Now, this is still a work in progress, but as of today it’s <em>just</em> getting to the point where one can experiment with it as a daily driver (although it’s definitely alpha and we’re still squishing bugs like crazy!) - and we can see just how well it really performs in real life.</p>
<p>For instance, here’s a video of my account (4055 rooms, redacted for privacy) logging in on an entirely fresh browser via Sliding Sync - the actual sync takes roughly 1 second (at 00:18 in the video).  And if we’d started the sync operation while the user is setting up E2E encryption, it would have completed in the background before they even got to the main screen, giving instant login(!).  Given my account typically takes ~10 minutes to initial sync (plus even more time for encryption to sync up), this is at least a real-life <strong>600x improvement</strong>.  Moreover, the sync response is only 20KB (a ~5000x improvement) - a huge win for low-bandwidth Matrix situations.</p>
<iframe src="https://www.youtube.com/embed/9dbM66tGK5s" title="Sliding Sync Demo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>Then, having logged in, the client subsequently launches pretty much instantly, <em>no matter how long you’ve been offline</em>. Total launch time is roughly 4 seconds, most of which is loading the app’s assets - which in turn could well be improved by progressively loading the app.  It could also be sped up even more if we cached state locally - currently the implementation simply reloads from the server every time the app launches rather than maintaining a local cache.</p>
<p>As you can see, this is palpably coming together, but there’s still a bunch of work to be done before we can encourage folks to try it, including:</p>
<ul>
<li>Switching the RoomList to be fully backed by sliding sync (currently the v2 roomlist is jury-rigged up to the sliding sync API, causing some flakey bugs such as duplicate rooms)</li>
<li>Spec and hook up typing / receipts / presence extensions</li>
<li>Hook up favourites, low_priority, knocked and historical rooms</li>
<li>Adding back in loading room members</li>
<li>Apply quality-of-service to to-device messages so we prioritise ones relevant to the current sliding window</li>
<li>Sync encrypted rooms in the background to search for notifications (and for indexing).</li>
<li>More local caching to speed up operations which now require checking the server (e.g. Ctrl/Cmd-K room switching)</li>
</ul>
<p>We also need to determine whether it’s viable to run the sliding-sync proxy against matrix.org for general production use, or whether we’ll need native support in Synapse before we can turn it on by default for everyone.  But these are good problems to have!!</p>
<h3 id="matrix-rust-sdk-and-element-x">matrix-rust-sdk and Element X</h3>
<p>Meanwhile, over in the land of Rust, we’ve been making huge progress in maturing and stabilising matrix-rust-sdk and exercising it in Element X: the codename for the next generation of native Element mobile apps.  Most excitingly, we literally just got the first (very alpha) cut of Sliding Sync working in matrix-rust-sdk and hooked up to Element X on iOS - you can see Ștefan’s demo from last week here:</p>
<iframe src="https://www.youtube.com/embed/6KHQSeJTXm0?start=459" title="Matrix Live S08E04 — Element Demos" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>matrix-rust-sdk itself is now getting a <a href="https://github.com/matrix-org/matrix-rust-sdk/releases">steady stream of releases</a> - including long-awaited official node bindings, providing excellent and performant encryption support via the <a href="https://matrix.org/blog/2022/05/16/independent-public-audit-of-vodozemac-a-native-rust-reference-implementation-of-matrix-end-to-end-encryption/">newly audited</a> vodozemac Rust implementation of Olm. It’s also great to see loads of major contributions to matrix-rust-sdk from across the wider Matrix community - particularly from Ruma, Fractal, Famedly and others - thank you!! As a result the SDK is shaping up to be much more healthy and heterogeneous than the original matrix-{js,ios,android}-sdk projects.</p>
<p>On Element X itself: matrix-rust-sdk is being used first on iOS in <a href="https://github.com/vector-im/element-x-ios">Element X iOS</a> - aiming first for launching a stable “barbecue” feature set (i.e. personal messaging) asap, followed by adding on “banquet” features (i.e. team collaboration) such as spaces and threads afterwards. We’ve shamelessly misappropriated the barbecue &amp; banquet terminology from Tobias Bernard’s excellent blog post “<a href="https://blogs.gnome.org/tbernard/2018/05/16/banquets-and-barbecues/">Banquets and Barbecues</a>” - although, ironically, unlike the post, our plan is still to have a single app which incrementally discloses the banquet functionality as the user’s barbecue starts to sprawl.  We’ve just published the brand new <a href="https://github.com/matrix-org/matrix-rust-sdk/projects/1">development roadmap</a> for Element X from the rust-sdk perspective on GitHub.  Above all else, the goal of Element X is to be the fastest mobile messenger out there in terms of launch and sync time, thanks to Sliding Sync.  Not just for Matrix - but the fastest messenger, full stop :D  Watch this space to see how we do!</p>
<p>Finally: Element is getting a major redesign of the core UI on both iOS and Android - both for today’s Element and Element X.  I’m not going to spoil the final result (which is looking <em>amazing</em>) given it’ll have a proper glossy launch in a few weeks, but you can get a rough idea based on the earlier design previewed by Amsha back in June:</p>
<iframe src="https://www.youtube.com/embed/oxfqQ0TrTXU?start=34" title="Matrix Live S07E22 — Element UI experiments, and customising Element Web with greasemonkey" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>In addition to the upcoming overall redesign, Element also landed a complete rework of the login and registration flows last week on iOS and Android - you can see all about it over on the <a href="https://element.io/blog/all-aboard-better-ftue-for-less-wtf/">Element blog</a>.</p>
<h3 id="fast-remote-joins">Fast Remote Joins</h3>
<p>In terms of performance, the other area that we’re reworking at the protocol level is room joins. </p>
<p>One of the most glaring shortcomings of Matrix happens when a new server admin excitedly decides to join the network, installs a homeserver, tries to join a large room like #matrix:matrix.org, and then looks on in horror as it takes 10+ minutes to join the room, promptly despairs of Matrix being slow and complains bitterly about it all over HN and Reddit :)</p>
<p>The reason for the current behaviour is that the Matrix rooms are replicated between the servers who participate in them - and in the initial design of the protocol we made that replication atomic. In other words, a new server joining a room picks a server from which to acquire the room (typically the one in the room’s alias), and gets sent a copy of all the state events (i.e. structural data) about the room, as well as the last 20 or so messages.  For a big room like Matrix HQ, this can be massive - right now, there are 79,969 state events in the room - and 126,510 auth_chain events (i.e. the events used to justify the existence of the state events).  The reason there are so many is typically that the act of a user joining or parting the room is described by a state event - and in the naive implementation, the server needs to know all current state events in the room (e.g. including parted users), in order to keep in sync with the other servers in the room and faithfully authorise each new event which they receive for that room.</p>
<p>However, each event is typically around 500 bytes in size, and so the act of joining a big room could require generating, transmitting, receiving, authenticating and storing up to 100MB of JSON 😱. This is why joining big rooms for the first time is so painfully slow.</p>
<p>Happily, there is an answer: much as Sliding Sync lets clients synchronise with the bare minimum of data required to render their UI, we’ve created <a href="https://github.com/matrix-org/matrix-spec-proposals/blob/rav/proposal/partial_state_on_join/proposals/3706-partial-state-in-send-join.md">MSC3706</a> (and its precursor <a href="https://github.com/matrix-org/matrix-spec-proposals/blob/matthew/msc2775/proposals/2775-lazy-loading-over-federation.md">MSC2775</a>) in order to rework the protocol to let servers receive the bare minimum of state needed to join a room in order to participate.  Practically speaking, we only really care about events relevant to the users who are currently participating in the room; the 40,000 other lurkers can be incrementally synced in the background so that our membership list is accurate - but it shouldn’t block us from being able to join or read (or peek) the room.  We already have membership lazyloading in the client-server API to support incrementally loaded membership data, after all.</p>
<p>The problem with this change is that Synapse was written from the outset to assume that each room’s state should be atomically complete: in other words, room state shouldn’t  incrementally load in the background.  So the work for Faster Joins has been an exercise in auditing the entirety of Synapse for this assumption, and generally reviewing and hardening the whole state management system.  This has been <a href="https://github.com/matrix-org/synapse/pulls?q=is%3Apr+%22faster+joins%22+is%3Aclosed+">loads of work</a> that has been going on since the end of last year - but the end is in sight: you can see the remaining issues <a href="https://github.com/matrix-org/synapse/milestone/8">here</a>.</p>
<p>As of right now, faster joins work (although aren’t enabled by default) - with the main proviso that you can’t speak in the room yet until the background sync has completed, and the new implementation has not yet been optimised.  However, thanks to all the preparation work, this should be relatively straightforward, so the end is in sight on this one too.</p>
<p>In terms of performance: right now, joining Matrix HQ via the unoptimised implementation of faster joins completes on a fresh server in roughly 30 seconds - so a <strong>~25x improvement</strong> over the ~12 minutes we’ve seen previously.  However, the really exciting news is that this only requires synchronising 45 state events and 107 auth_chain events to the new server - a <strong>~1400x improvement</strong>!  So there should be significant scope for further optimising the calculation of these 152 events, given 30 seconds to come up with 152 events is definitely on the high side.  In our ideal world, we’d be getting joins down to sub-second performance, no matter how big the room is - once again, watch this space to see how we do. </p>
<p>Finally, alongside faster remote joins, we’re also working on faster local joins.  This work overlaps a bit with the optimisation needed to speed up the faster remote join logic - given we are seeing relatively simple operations unexpectedly taking tens of seconds in both instances. Some of this is needing to batch database activity more intelligently, but we also have some unknown pauses which we’re currently tracking down.  Profiling is afoot, as well as copious Jaeger and OpenTracing instrumentation - the hunt is on!</p>
<h3 id="ratcheting-up-testing">Ratcheting up testing</h3>
<p>All the work above describes some pretty bold changes to speed up Matrix and improve usability - but in order to land these changes with confidence, avoiding regressions both now and in future, we have really levelled up our testing this year.</p>
<p>Looking at matrix-react-sdk as used by Element Web/Desktop: all PRs made to matrix-js-sdk must now pass 80% unit test coverage for new code (measured using <a href="https://sonarcloud.io/project/overview?id=matrix-js-sdk">Sonarqube</a>, enforced as a GitHub PR check). All matrix-react-sdk PRs must be accompanied by a mix of unit tests, end-to-end tests (via <a href="https://www.cypress.io/">Cypress</a>) and screenshot tests (via <a href="https://percy.io/">percy.io</a>). All regressions (in both nightly and stable) are retro’d to ensure fixed things stay fixed (usually via writing new tests), and we have converted <a href="https://arewetsyet.bit.ovh/">fully to typescript</a> for full type safety.</p>
<p>Concretely, since May, we’ve increased js-sdk unit test coverage by ~10% globally, increased react-sdk coverage by ~17%, and added ever more Cypress integration tests to cover the broad strokes.  Cypress now <a href="https://github.com/matrix-org/matrix-react-sdk/pull/9104">completely replaces</a> our old Puppeteer-based end-to-end tests, and Sliding Sync work in matrix-react-sdk is being extensively tested by Cypress from the outset (the Sliding Sync PR literally comes with a Cypress test suite).</p>
<p>In mobile land, the situation is more complex given our long-term strategy is to deprecate matrix-ios-sdk and matrix-android-sdk2 in favour of matrix-rust-sdk. matrix-rust-sdk has always had <a href="https://app.codecov.io/gh/matrix-org/matrix-rust-sdk">excellent coverage</a>, and in particular, adopting the crypto module in the current matrix-{js,ios,android}-sdk will represent a night and day improvement for quality (not to mention perf!). We’ll also be adopting <a href="https://github.com/vector-im/element-x-ios/pull/50">PR checks</a>, and screenshot testing for the mobile SDKs.</p>
<p>On the backend, we continue to build out test cases for our new integration tester <a href="https://github.com/matrix-org/complement">Complement</a> (in Golang), alongside the original <a href="https://github.com/matrix-org/sytest">sytest</a> integration test suite (in Perl). In particular, we can now test Synapse in worker mode. The intention with Complement is that it should be homeserver agnostic so that <em>any</em> homeserver implementation can benefit. Indeed the project was initiated by Kegan wearing his Dendrite hat. </p>
<p>Finally, we’ve had a huge breakthrough with true multi-client end-to-end testing in the form of Michael Kaye’s brand new <a href="https://github.com/matrix-org/trafficlight">Traffic Light</a> project. For the first time, we can fully test things like cross signing and verification and VoIP calls end-to-end across completely different platforms and different clients. It’s early days yet, but this really will be a game changer, especially for crypto and VoIP. </p>
<p>Next up, we will turn our attention to a performance testing framework so that we can reliably track performance improvements and regressions in an automated fashion - heavily inspired by Safari’s <a href="https://www.goodreads.com/quotes/9844796-don-was-the-one-who-figured-out-how-we-would">Page Load Test</a> approach. This will be essential as we build out new clients like Element X.</p>
<h2 id="a-whole-new-world">A whole new world</h2>
<p>All the stuff above is focused on improving the core performance and usability of Matrix - but in parallel we have also been making enormous progress on entirely new features and capabilities. The following isn’t a comprehensive list, but we wanted to highlight a few of the areas where new development is progressing at a terrifying rate…</p>
<h3 id="native-voip-conferencing">Native VoIP Conferencing</h3>
<p>2022 is turning out to be the year that Matrix finally gets fully native voice/video conferencing. After speccing <a href="https://github.com/matrix-org/matrix-spec-proposals/blob/matthew/group-voip/proposals/3401-group-voip.md">MSC3401</a> at the end of last year, <a href="https://element.io/blog/introducing-native-matrix-voip-with-element-call/">Element Call Beta 1</a> launched as a reference implementation back in March, followed by enabling E2EE, spatial audio and walkie-talkie mode in <a href="https://element.io/blog/element-call-beta-2-encryption-spatial-audio-walkie-talkie-mode-and-more/">Element Call Beta 2</a> in June.</p>
<p>However, the catch was that Element Call beta 1 and 2 only ever implemented “full mesh” conferencing - where every participant calls every other participant simultaneously, limiting the size of the conference to ~7 participants on typical hardware, and wasting lots of bandwidth (given you end up sending the same upstream multiple times over for all the other participants).  Element Call has been working surprisingly well in spite of this, but the design of MSC3401 was always to have “foci” (the plural of ‘focus’ - i.e. conference servers) to optionally sit alongside homeservers in order to aggregate the participating calls, a bit like this:</p>
<p><img src="/blog/img/2022-08-15-msc3401.jpg" alt="MSC3401 Architecture" /></p>
<p>With foci, clients only need to send their upstream to their local focus, rather than replicating it across all the other participants - and the focus can then fan it out to other foci or clients as required.  In fact, if no other clients are even watching your upstream, then your client can skip sending an upstream to its focus entirely!</p>
<p>Most importantly, foci are decentralised, just like Matrix: there is no single conference server as a single point of control or failure responsible for powering the group call - users connect to whichever focus is closest to them, and so you automatically get a standards-based heterogeneous network-split-resilient geographically distributed cascading conferencing system with end-to-end-encryption, powered by a potentially infinite number of different implementations.  To the best of our knowledge, this is the first time someone’s proposed an approach like this for decentralised group calling (watch out, Zoom, we’re coming for you!)</p>
<p>Now, the VoIP team have been busy polishing Element Call (e.g. chasing down end-to-end encryption edge cases and reliability), and also figuring out how to embed it into Element and other Matrix clients as a quick way to get excellent group VoIP (more on that later).  As a result, work on building out foci for scalable conferencing had to be pushed down the line.</p>
<p>But in the last few months this completely changed, thanks to an <strong>amazing</strong> open source contribution from Sean DuBois, project lead over at <a href="https://pion.ly/">Pion</a> - the excellent Golang WebRTC implementation.  Inspired by our <a href="https://2021.commcon.xyz/talks/extending-matrix-s-e2ee-calls-to-multiparty">initial talk</a> about MSC3401 at CommCon, Sean independently decided to see how hard it’d be to build a Selective Forwarding Unit (SFU) focus that implemented MSC3401 semantics using Pion - and published it at <a href="https://github.com/sean-der/sfu-to-sfu">https://github.com/sean-der/sfu-to-sfu</a> (subsequently donated to github.com/matrix-org).  In many ways this was a flag day for Matrix: it’s the first time that a core MSC from the core team has been first implemented from outside the core team (let alone outside the Matrix community!).  It’s the VoIP equivalent of Synapse starting off life as a community contribution rather than being written by the core team.</p>
<p>Either way: Sean’s SFU work has opened the floodgates to making native Matrix conferencing actually scale, with Šimon Brandner and I jumping in to <a href="https://github.com/matrix-org/matrix-js-sdk/pull/2423">implement SFU support</a> in matrix-js-sdk… and as of a few weeks ago we did the first ever SFU-powered Matrix call - which worked impressively well for 12 participants!</p>
<p><img src="/blog/img/2022-08-15-sfu.jpg" alt="12 person Element Call" /></p>
<p>Now, this isn’t released yet, and there is still work to be done, including:</p>
<ul>
<li>We actually need to select the subset of streams we care about from the focus</li>
<li>We need to support thumbnail streams as well as high-res streams</li>
<li>We need rate control to ensure clients on bad connections don’t get swamped</li>
<li>We need to hook up cascading between foci (although the SFU already supports it!)</li>
<li>We need E2EE via insertable streams</li>
<li>Faster signalling for switching between streams</li>
</ul>
<p>You can see the full todo list for basic and future features over on GitHub.  However, we’re making good progress thanks to Šimon’s work and Sean’s help - but with any luck beta 3 of Element Call might showcase SFU support!</p>
<p>Meanwhile it’s worth noting that Element Call is not the only MSC3401 implementation out there - the Hydrogen team has added native support to Hydrogen SDK too (skipping over the old 1:1 calling), so expect to see Element &lt;-&gt; Hydrogen calling in the near future. The Hydrogen implementation is also what powers Third Room (see below…)</p>
<h3 id="matryoshka-voip-embedding">Matryoshka VoIP Embedding</h3>
<p>Elsewhere on VoIP, we’ve also been hard at work figuring out how to embed Element Call into Matrix clients in general, starting with Element Web, iOS &amp; Android.  Given MSC3401 is effectively a superset of native 1:1 Matrix VoIP calling, we’d ideally like to replace the current 1:1-only VoIP implementation in Element with an embedded instance of Element Call (not least so we don’t have to maintain it in triplicate over Web/iOS/Android, and because WebRTC-in-a-webview really isn’t very different to native WebRTC).  To do this efficiently however, the embedded Element Call needs to share the same underlying Matrix client as the parent Element client (otherwise you end up wasting resources and devices and E2EE overhead between the two).  Effectively Element Call ends up needing to parasite off the parent’s client.  We call this approach “matryoshka embedding”, given it resembles nested Russian dolls. 🪆</p>
<p>In practice, we do this by extending the Widget API to let Matrix clients within the widget share the parent’s Matrix client for operations such as sending and receiving to-device messages and accessing TURN servers (c.f. <a href="https://github.com/matrix-org/matrix-spec-proposals/blob/travis/msc/widgets-send-recv-toDevice/proposals/3819-to-device-messages-for-widgets.md">MSC3819</a> and <a href="https://github.com/robintown/matrix-doc/blob/widget-turn-servers/proposals/3846-widget-turn-servers.md">MSC3846</a>).  This in turn has been <a href="https://github.com/matrix-org/matrix-widget-api/pull/57">implemented</a> in the matrix-widget-api helper library for widget implementers - and then a few days ago Robin demonstrated the world’s first ever matryoshka embedded Element Call call, looking like this:</p>
<p><img src="/blog/img/2022-08-15-matryoshka.jpg" alt="Matryoshka embedded Element Call" /></p>
<p>Note that the MSC3401 events are happening in the actual room where the widget has been added, sent by the right users from Element Web rather than from Element Call, and so are subject to all the normal Matrix access control and encryption semantics.  This is a <em>huge</em> step forwards from embedding Jitsi widgets, where the subsequent call membership and signalling happens in an entirely separate system (XMPP via Prosody, ironically) - instead: this is proper native Matrix calling at last.</p>
<p>Moreover, the same trick could be used to efficiently embed other exotic Matrix clients such as Third Room or <a href="https://github.com/toger5/TheBoard">TheBoard</a> - giving the user the choice either to use the app standalone or within the context of their existing Matrix client. Another approach could be to use OIDC scopes to transparently log the embedded client in using the parent’s identity; this has the advantage of no code changes being needed on the embedded client - but has the disadvantage that you needlessly end up running two Matrix clients for the same account side by side, and adding another device to your account, which isn’t ideal for a performance sensitive app like Element Call or Third Room.</p>
<p>Matryoshka embedding isn’t live yet, but between scalable calls via SFU and native Element Call in Element Web/iOS/Android, the future is looking incredibly exciting for native Matrix VoIP.  We hope to finish embedding Element Call in Element Web/iOS/Android in Sept/Oct - and if we get lucky perhaps the SFU will be ready too and then Element Call can exit beta!</p>
<p>Finally, we also added Video Rooms to Element Web - adding the user interface for an “always on” video room that you can hop into whenever you want.  You can read about it over on the <a href="https://element.io/blog/drop-in-drop-out-chats-with-video-rooms-and-a-new-search-experience/">Element blog</a> - the initial implementation uses Jitsi, but once Element Call and Matryoshka embedding is ready, we’ll switch over to using Element Call instead (and add Voice Rooms too!)</p>
<p><img src="/blog/img/2022-08-15-video-rooms.jpg" alt="Video Rooms" /></p>
<h3 id="third-room">Third Room</h3>
<p>Just as MSC3401 and Element Call natively adds decentralised voice/video conferences to boring old textual Matrix chatrooms, <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3815">MSC3815</a> and <a href="https://github.com/matrix-org/thirdroom/blob/main/README.md">Third Room</a> go the whole enchilada and adds a full decentralised 3D spatial collaboration environment into your Matrix room - letting you turn your Matrix rooms into a full blown interconnected virtual world.</p>
<p>I can’t overstate how exciting this is: one of the key origins of Matrix was back in Oct 2013 when Amandine and myself found ourselves in Berlin after TechCrunch Disrupt, debating why Second Life hadn’t been more successful - and wondering what you’d have to do to build an immersive 3D social environment which would be as positive and successful as a wildly popular chat network.  Our conclusion was that the first key ingredient you’d need would be a kick-ass open decentralised communication protocol to build it on - providing truly open communication primitives that anyone could build on, much like the open web… and that was what got us thinking about how to build Matrix.</p>
<p>Fast forward 9 years, and Third Room is making <em>spectacular</em> progress in building out this dream, thanks to the incredibly hard work of Robert, Nate and Ajay. The goal of Third Room is to be an open platform layered directly on Matrix for spatial collaboration of any kind: effectively a blank canvas to let folks create freeform collaborative 3D (and in future 2D, VR or AR) experiences, either by using existing assets or building their own user-generated content and functionality. Just like the open web itself, this unlocks a literally infinite range of possibilities, but some of the obvious uses include: spatial telepresence, social VR, 3D visualisation of GIS or weather data, 3D simulated environments, search and rescue and disaster response operations (imagine streaming LIDAR from a drone surveying hurricane devastation into Third Room, where you can then overlay and collaborate on GIS data in realtime), and of course 3D gaming in all its various forms.</p>
<p>Now, we’re hoping to give Third Room a proper launch in a few weeks, so I’m not going to spoil too much right now - but the final pieces which are currently coming together include:</p>
<ul>
<li>Finalising the initial version of <a href="https://github.com/matrix-org/thirdroom/tree/main/src/engine">Manifold</a>, the multi-threaded game engine which powers Third Room (built on <a href="https://threejs.org/">Three.JS</a>, <a href="https://github.com/NateTheGreatt/bitECS">bitECS</a> and <a href="https://rapier.rs/">Rapier</a>), using SharedArrayBuffers as triple-buffers to synchronise between the various threads.  See <a href="https://github.com/matrix-org/thirdroom/discussions/47#discussion-4033099">this update</a> for a bit more detail on how the engine works.</li>
<li>Finalising the Matrix client interface itself, powered by <a href="https://github.com/vector-im/hydrogen-web/blob/master/doc/SDK.md">Hydrogen SDK</a> in order to be as lightweight as possible</li>
<li>Adding in full spatial audio and game networking via MSC3401 and Hydrogen SDK (currently full mesh, but will go SFU as soon as SFUs land!)</li>
<li>Adding in animated avatars (currently using <a href="https://www.mixamo.com/">Mixamo</a> animations)</li>
<li>Adding in name tags and object labels</li>
<li>Adding in 3D Tile support in order to incrementally load 3D map tiles à la Google Earth</li>
<li>Building an asset pipeline from Unity and Blender through to the glTF assets which Third Room uses.</li>
<li>Initial framework for an in-world direct-manipulation <a href="https://twitter.com/matrixdotorg/status/1550534909089189888">editor</a></li>
<li>Lightmap support for beautiful high-performance static lighting and shadows</li>
<li>Full post-processing pipeline (bloom, depth-of-field, anti-aliasing etc)</li>
<li>Integrating with OIDC for login, registration, and account management (see OIDC below)</li>
</ul>
<p>As a quick teaser - here’s an example of a <a href="https://assetstore.unity.com/packages/3d/environments/sci-fi/3d-scifi-kit-vol-3-121447">Unity asset</a> exported into Third Room, showing off lightmaps (check out the light and shadows cast by the strip lighting inside, or the shadow on the ground outside).  Ignore the blurry HDR environment map of Venice in the background, which is just there to give the metals something to reflect.  Check out the stats on the right-hand side: on Robert’s M1 Macbook Pro we’re getting a solid 60fps at 2000x1244px, with 13.12ms of unused gametime available for every 16.67ms frame, despite already showing a relatively complicated asset!</p>
<iframe src="https://www.youtube.com/embed/xvjMyYxZbmM" title="Third Room prototype demo 1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>Meanwhile, here are some shots of Robert and Nate chasing each other around the UK City demo environment (also exported from <a href="https://assetstore.unity.com/packages/3d/environments/urban/city-builder-london-214943">Unity</a>), showing off blended Mixamo animations and throwing around crates thanks to the Rapier physics engine.</p>
<iframe src="https://www.youtube.com/embed/y2mU19QwZPg" title="Third Room prototype demo 2" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<iframe src="https://www.youtube.com/embed/QEt80wvO4yY" title="Third Room prototype demo 3" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<br/>
<p>And don't forget, it's just a Matrix client - with no infrastructure required other than a normal Matrix server:</p>
<p><img src="/blog/img/2022-08-15-thirdroom-overlay.jpg" alt="Third Room Overlay" /></p>
<p>As you can see, we are rapidly approaching the point where we’ll need support from technical artists to help create beautiful scenes and avatars and assets in order to make it all come to life - especially once the Blender and Unity pipelines, and/or the Third Room editor are finished. If you’re interested in getting involved come chat at <a href="https://matrix.to/#/#thirdroom:matrix.org">#thirdroom:matrix.org</a>!</p>
<h3 id="wysiwyg">WYSIWYG</h3>
<p>Back in the real world, a recent new project that we haven’t spoken about much yet is adding consistent WYSIWYG (What You See Is What You Get) editing to the message composer in matrix-{react,ios,android}-sdk as used by Element Web/iOS/Android - as well as publishing the resulting WYSIWYG editor for the greater glory of the wider ecosystem.</p>
<p>This is a bit of a contentious area, because we’ve tried several times over the years to add a rich text editor to matrix-react-sdk - firstly with the <a href="https://draftjs.org/">Draft.js</a> <a href="https://github.com/matrix-org/matrix-react-sdk/pull/292">implementation</a> by Aviral (which we abandoned after Facebook de-staffed Draft), and then later with a <a href="https://www.slatejs.org">Slate</a> <a href="https://github.com/matrix-org/matrix-react-sdk/pull/1890">implementation</a> by me (which we abandoned thanks to the maintenance burden of keeping up with Slate’s API changes).  Finally, burnt by the experience with third party solutions, Bruno wrote his own editor called <a href="https://github.com/matrix-org/matrix-react-sdk/blob/develop/docs/ciderEditor.md">CIDER</a>, which was a great success and is what Element Web uses today to author messages including ‘pills’ for structured rooms/users etc… but this deliberately didn’t provide full WYSIWYG functionality.  Meanwhile, Slack added WYSIWYG, forced it on, and <a href="https://quuxplusone.github.io/blog/2019/11/20/slack-rich-text-box/">screwed it up</a> - and apps like WhatsApp and Discord seem to get by fine without WYSIWYG. </p>
<p>However, given that users are now used to WYSIWYG in Teams and Slack, we’ve now decided to have another go at it, inspired by CIDER’s success - and with the novel twist that the heavy lifting of modelling and versioning the document and handling Unicode + CJK voodoo will be provided by a cross-platform native library written in Rust, ensuring that matrix-{react,ios,android}-sdk (and in future matrix-rust-sdk-based apps like Element X) all have precisely the same consistent semantics, and we don’t spend our lives fixing per-platform WYSIWYG bugs unless it really is a platform-specific issue with the user interface provided on that particular platform.</p>
<p>The project is fairly young but developing fast, and lives over at <a href="https://github.com/matrix-org/matrix-wysiwyg">https://github.com/matrix-org/matrix-wysiwyg</a> (better name suggestions welcome ;) - we’re aiming to get it into clients by the end of October.  The editor itself is not Matrix specific at all, so it’ll be interesting to see if other projects pick it up at all - and meanwhile, if we’ve done a good job, it’ll be interesting to see if this can be used to power Matrix-backed collaborative-editing solutions in future…</p>
<iframe src="https://www.youtube.com/embed/9_UhNBKUk7A" title="WYSIWYG teaser on Android" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p><strong>Update</strong>: we should have mentioned that the WYSIWYG editor project is being built out by staff at Element, who very kindly have been sponsored to work on it by one of Element's Big Public Sector Customers in order to get to parity with Teams.  Thank you!!</p>
<h3 id="are-we-oidc-yet">Are We OIDC Yet?</h3>
<p>On the other hand, a project we recently <a href="https://matrix.org/blog/2022/08/10/areweoidcyet-com-matrix-and-open-id-connect">yelled about</a> a lot is Matrix’s transition to Open ID Connect for standards-based authentication and account management.  We announced this at the <a href="https://matrix.org/blog/2021/12/22/the-mega-matrix-holiday-special-2021#openid-connect">end of the year</a> and the project has built up huge momentum subsequently, culminating with the release of <a href="https://areweoidcyet.com">https://areweoidcyet.com</a> last week to track the progress and remaining work.</p>
<p>Our plan is to use native OIDC in production for the first time to provide all the login, registration and account management for Third Room when it launches in a few weeks (using a branded Keycloak instance as the identity provider, for convenience).  After all, the last thing we wanted to do was to waste time building fiddly Matrix-specific login/registration UI in Third Room when we’re about to move to OIDC!  This will be an excellent case study to see how it works, and how it feels, and inform the rest of the great OIDC experiment and proposed migration.</p>
<h3 id="dendrite-p2p">Dendrite + P2P</h3>
<p>Meanwhile, the Next Generation team has continued to focus on their mission to make Dendrite as efficient and usable as possible. Within recent months, Dendrite has matured dramatically, with a considerable list of bugs fixed, performance significantly improved and new features added - push notifications, history visibility and presence to name a few notable additions.</p>
<p>Neil Alexander, Kegan and Till have continued to streamline the Dendrite architecture and to refactor areas of the codebase which have long needed attention, as well as moving from Kafka to NATS JetStream, an all-new caching model and some other fairly major architectural changes. We’ve also seen an increase of code contributions from the community and outside organisations, which is exciting, and the <a href="https://github.com/matrix-org/gomatrixserverlib">gomatrixserverlib</a> library which underpins much of Dendrite is also seeing more active development and attention thanks to its use in the <a href="https://github.com/matrix-org/complement">Complement</a> integration testing suite.</p>
<p>With the most recent <a href="https://github.com/matrix-org/dendrite/releases">0.9.3 release</a>, we are proud to announce that <strong>Dendrite now</strong> <strong>passes 90% of Client-Server API tests and 95% of Server-Server API tests</strong> and has support for all specced room versions in use today. We have a growing community of users who are (quite successfully) trialling using Dendrite homeservers day-to-day, as well as our own public <code>dendrite.matrix.org</code> homeserver, which is open to the public for registration for anyone who wants to experiment with Dendrite without running their own deployment.</p>
<p>Dendrite plays an important role in our future strategy as it is also the homeserver implementation used for embedded homeservers, P2P development and experimentation. In addition to being able to scale up, we have also successfully scaled down, with the Element P2P demos proving that an embedded Dendrite homeserver can run comfortably on an iOS or Android device.</p>
<p>Research on the <a href="https://github.com/matrix-org/pinecone/">Pinecone</a> overlay network for P2P Matrix has also continued, with Devon and Neil having experimented with a number of protocol iterations and spent considerable time bringing the <a href="https://github.com/matrix-org/pinecone/tree/main/cmd/pineconesim">Pinecone Simulator</a> up to scratch to help us to test our designs more rapidly. Our work in this area is helping us to form a better direction and strategy for P2P Matrix as a whole, which is moving more towards a hybridised model with the current Matrix federation — a little different to our original vision, but will hopefully result in a much smoother transition path for existing users whilst solving some potential scaling problems. The <a href="https://arewep2pyet.com">arewep2pyet.com</a> site is a living page which contains a high level overview of our goals and all the progress being made.</p>
<h2 id="what-s-left">What’s left?</h2>
<p>Comparing all of the above with the <a href="https://matrix.org/blog/2021/12/22/the-mega-matrix-holiday-special-2021#2022">predictions for 2022</a> section of the end-of-year blog post, we’re making very strong progress in a tonne of areas - and the list above isn’t comprehensive.  For instance, we haven’t called out all the work that the Trust &amp; Safety team are doing to roll out advanced moderation features by default to all communities - or the work that Eric has been doing to close the remaining gap between Gitter and Matrix by creating new static archives throughout Matrix.  Hydrogen has also been beavering away to provide a tiny but perfectly formed web client suitable for embedding, including the new embeddable Hydrogen SDK. We haven’t spoken about the work that the Cryptography team have been doing to adopt vodozemac and matrix-rust-sdk-crypto throughout matrix-{js,ios,android}-sdk, or improve encryption stability and security throughout.  We’ve also not spoken about the new initiative to fix long-term chronic bugs (outside of the work above) in general - or all the work being done around <a href="https://matrix.org/blog/2022/03/30/technical-faq-on-the-digital-markets-act">Digital Markets Act interoperability</a>…</p>
<p>Other things left on the menu for this year include getting Threads out of beta: we’ve had a bit of an adventure here figuring out how to get the right semantics for notification badges and unread state in rooms with threads (especially if you use a mix of clients which support and don’t support threads), and once that’s done we’ll be returning to Spaces (performance, group permissions etc).</p>
<h2 id="matrix-2-0">Matrix 2.0?</h2>
<p>Looking through this post (and congratulations if you’re still reading it at this point ;P), it really feels that Matrix is on the verge of shifting into a new phase.  Much as MacOS X started off as a promising but distinctly unoptimised operating system, and then subsequently got unrecognisably faster year by year (even on the same hardware!) as Apple diligently worked away optimising the kernel… similarly: we are now landing the architectural changes to completely transform how Matrix performs.</p>
<p>Between protocol changes like Sliding Sync, Faster Joins, native OIDC and native VoIP conferencing all landing at roughly the same time - and alongside new implementations like matrix-rust-sdk and vodozemac, let alone Third Room - it feels unquestionably like we have an unrecognisable step change on the horizon.  Our aim is to land as much of this as possible by the end of the year, and if we pull it off, I’m tempted to suggest we call the end result Matrix 2.0.</p>
<p>To the future! 🚀</p>
<p>Matthew, Amandine &amp; the whole core team.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2022&#x2F;08&#x2F;10&#x2F;areweoidcyet-com-matrix-and-open-id-connect&#x2F;" title="areweoidcyet.com - Matrix and OpenID Connect">areweoidcyet.com - Matrix and OpenID Connect</a></h2>
                <span>
                    10.08.2022 16:23
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/hugh-nimmo-smith">
                        Hugh Nimmo-Smith
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>TL;DR: we’ve just launched <a href="https://areweoidcyet.com">areweoidcyet.com</a> to track the project to adopt OpenID Connect (OIDC) as <em>the</em> authentication method used by Matrix. It has a load of useful resources (<a href="https://areweoidcyet.com/#faqs">FAQs</a>, <a href="https://areweoidcyet.com/#when">status</a> etc.) so do please check it out!</p>
<p>Hey folks,</p>
<p>As you may know, there is a <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3861">proposal</a> and project afoot to change the way authentication is done in Matrix…</p>
<p>Currently Matrix uses a <a href="https://spec.matrix.org/v1.3/client-server-api/#client-authentication">custom authentication protocol</a> baked into the Matrix spec. This poses a number of drawbacks. To overcome these drawbacks the project proposes migrating to use the industry standard authentication protocol OpenID Connect (OIDC) instead.</p>
<p>In terms of why this is a good idea: <a href="https://github.com/matrix-org/matrix-spec-proposals/blob/hughns/delegated-oidc-architecture/proposals/3861-delegated-oidc-architecture.md">MSC3861</a> has all the details - please check it out! </p>
<p>The bottom line is that Matrix should focus on being a decentralised communication protocol - <strong>not</strong> an authentication protocol… and by adopting a dedicated authentication protocol we can benefit from all sorts of goodies such as easy 2FA and MFA, passwordless-auth via WebAuthn, Login via QR-code, alternative CAPTCHAs and so much more.</p>
<p>In support of this the proposal extends to the Matrix.org Foundation joining the OpenID Foundation as a non-profit member to support the work that the OpenID Foundation is doing to build a robust and audited ecosystem for open authentication.</p>
<p>Whilst this project proposes a significant change to the Matrix ecosystem that would take some time to migrate to, we believe that it will better support the continued growth and adoption of Matrix in the years to come.</p>
<p>Today we are launching the <a href="https://areweoidcyet.com/">areweoidcyet.com</a> website which is packed with information and resources on the project:</p>
<ul>
<li>What? Why? When?</li>
<li>MSC proposals</li>
<li>Status of homeservers, clients, auth servers (OIDC Providers/OPs)</li>
<li>A client implementation guide</li>
<li>Links to the Matrix OIDC Playground environment where you can try out the latest progress</li>
</ul>
<p>Please do take a look and come join us at <a href="https://matrix.to/#/#matrix-auth:matrix.org">#matrix-auth:matrix.org</a>!</p>
<p>Best wishes,</p>
<p>Hugh &amp; Quentin</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2022&#x2F;05&#x2F;30&#x2F;welcoming-rocket-chat-to-matrix&#x2F;" title="Welcoming Rocket.Chat to Matrix!">Welcoming Rocket.Chat to Matrix!</a></h2>
                <span>
                    30.05.2022 19:04
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                <br>
                <small>Last update: 30.05.2022 16:16</small>
            </header>
            <div>
                
                <div style="text-align: center">
<img src="/blog/img/rocketchat.png" alt="Rocket.Chat ♥️ Matrix"/>
</div>
<p>Hi folks,</p>
<p>We just wanted to take a moment to welcome <a href="https://rocket.chat">Rocket.Chat</a> to Matrix, given the <a href="https://rocket.chat/press-releases/rocket-chat-leverages-matrix-protocol-for-decentralized-and-interoperable-communications">recent announcement</a> that they are switching to using Matrix for standards-based interoperable federation!  This is incredible news: Rocket.Chat is one of the leading open source collaboration platforms with <a href="https://rocket.chat/company/about-us">over 12 million users</a>, and they will all shortly have the option to natively interoperate with the wider Matrix network: the feature has already landed (in alpha) in <a href="https://github.com/RocketChat/Rocket.Chat/releases/tag/4.7.0">Rocket.Chat 4.7.0</a>!</p>
<p>We’d like to thank the whole Rocket.Chat team for putting their faith in Matrix and joining the network: the whole idea of Matrix is that by banding together, different independent organisations can build an open decentralised network which is far stronger and more vibrant than any closed communication platform.  The more organisations that join Matrix, the <a href="https://en.wikipedia.org/wiki/Metcalfe%27s_law">more useful and valuable</a> the network becomes for everyone, and the more momentum there is to further refine and improve the protocol.  Our intention is that Matrix will grow into a massive open ecosystem and industry, akin to the open Web itself… and that every organisation participating, be that Rocket.Chat, Element, Gitter, Beeper, Famedly or anyone else will benefit from being part of it. We are stronger together!</p>
<p>Rocket.Chat’s implementation follows the “<a href="https://matrix.org/blog/2020/12/07/gitter-now-speaks-matrix#how-do-you-make-an-existing-chat-system-talk-matrix">How do you make an existing chat system talk Matrix?</a>” approach we published based on our experiences of linking Gitter into Matrix. Looking at the initial <a href="https://github.com/RocketChat/Rocket.Chat/pull/23688">pull request</a>, the implementation lets Rocket.Chat act as a Matrix Application Service, effectively acting as a bridge to talk to an appropriate Matrix homeserver.  From chatting with the team, it sounds like next steps will involve adding in encryption via our upcoming <a href="https://github.com/matrix-org/matrix-rust-sdk/issues/699">matrix-sdk-crypto node bindings</a> - and then looking at ways to transparently embed a homeserver like Dendrite, sharing data as much as possible between RC and Matrix, so Rocket.Chat deployments can transparently sprout Matrix interoperability without having to run a separate homeserver.  Super exciting!</p>
<p>You can see a quick preview of a Rocket.Chat user chatting away with an Element user on matrix.org via Matrix here:</p>
<p><video style="width: 100%" src="/blog/img/164530391-e8b17ecd-a4d0-4ef8-a8b7-81230c1773d3.mp4" controls></video></p>
<p>So, exciting times ahead - needless to say we’ll be doing everything we can to support Rocket.Chat and ensure their Matrix integration is a success.  And at this rate, they might be distinctly ahead of the curve if they start shipping Dendrite!  Meanwhile, we have to wonder who will be next? Nextcloud? Mattermost? Place your bets… ;)</p>
<p>--Matthew</p>
<h3 id="update">Update</h3>
<p>Aaron from Rocket.Chat just published an <a href="https://geekgonecrazy.com/2022/05/30/rocketchat-and-the-matrix-protocol/">excellent guide &amp; video tour</a> for how to actually set up your Rocket.Chat instance with Dendrite to get talking Matrix!</p>
<div style="text-align: center">
<iframe src="https://www.youtube.com/embed/oQhIH8kql9I" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2022&#x2F;05&#x2F;16&#x2F;independent-public-audit-of-vodozemac-a-native-rust-reference-implementation-of-matrix-end-to-end-encryption&#x2F;" title="Independent public audit of Vodozemac, a native Rust reference implementation of Matrix end-to-end encryption">Independent public audit of Vodozemac, a native Rust reference implementation of Matrix end-to-end encryption</a></h2>
                <span>
                    16.05.2022 17:04
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                <br>
                <small>Last update: 16.05.2022 16:02</small>
            </header>
            <div>
                
                <p>Hi all,</p>
<p>It’s been <a href="https://matrix.org/blog/2016/11/21/matrixs-olm-end-to-end-encryption-security-assessment-released-and-implemented-cross-platform-on-riot-at-last">quite a while</a> since our last independent E2EE review, and so we’re incredibly proud to present an <a href="https://matrix.org/media/Least%20Authority%20-%20Matrix%20vodozemac%20Final%20Audit%20Report.pdf">entirely new independent security audit</a> of <a href="https://github.com/matrix-org/vodozemac">vodozemac</a>, our next generation native Rust implementation of Matrix’s <a href="https://gitlab.matrix.org/matrix-org/olm/blob/master/docs/olm.md">Olm</a> and <a href="https://gitlab.matrix.org/matrix-org/olm/blob/master/docs/megolm.md">Megolm</a> E2EE protocols.  The audit has been conducted by <a href="https://leastauthority.com/">Least Authority</a>, who specialise in <a href="https://leastauthority.com/security-consulting/published-audits/">comprehensive audits</a> of security-sensitive decentralized technologies - and we are very grateful to <a href="https://www.gematik.de/anwendungen/ti-messenger">gematik</a>, who kindly shared the costs of funding the audit as part of their <a href="https://matrix.org/blog/2021/07/21/germanys-national-healthcare-system-adopts-matrix">commitment to Matrix for healthcare in Germany</a>.</p>
<p>This audit was a bit of a whirlwind, as while we were clearly overdue an audit of Matrix’s E2EE implementations, we decided quite late in the day to focus on bringing vodozemac to auditable production quality rather than simply doing a refresh of the original <a href="https://matrix.org/blog/2016/11/21/matrixs-olm-end-to-end-encryption-security-assessment-released-and-implemented-cross-platform-on-riot-at-last">libolm audit</a>.  However, we got there in time, thanks to a monumental sprint from <a href="https://github.com/matrix-org/vodozemac/graphs/contributors">Damir and Denis</a> over Christmas.  The reason we went this route is that vodozemac is an enormous step change forwards in quality over <a href="https://gitlab.matrix.org/matrix-org/olm">libolm</a>, and vodozemac is now the reference Matrix E2EE implementation going forward.  Just as libolm went live with NCC’s security review back in 2016, similarly we’re kicking off the first stable release of vodozemac today with Least Authority’s audit.  In fact, vodozemac just shipped as the default E2EE library in <a href="https://github.com/matrix-org/matrix-rust-sdk/releases/tag/matrix-sdk-0.5.0">matrix-rust-sdk 0.5</a>, released at the end of last week!</p>
<p>The main advantages of vodozemac over libolm include:</p>
<ul>
<li>Native Rust - type, memory and thread safety is preserved both internally, and within the context of larger Rust programs (such as those building on matrix-rust-sdk).  This is particularly important given the <a href="https://matrix.org/blog/2021/06/14/adventures-in-fuzzing-libolm">memory bugs</a> which libolm sprouted, despite our best efforts to the contrary.</li>
<li>Performance - vodozemac benchmarks roughly 5-6x faster than libolm on typical hardware</li>
<li>Better primitives - vodozemac is built on the best practice cryptographic primitives from the Rust community, rather than the generic Brad Conte primitives used by libolm.</li>
</ul>
<p>Also, we’ve finally fixed one of the biggest problems with libolm - which was that the hardest bit of implementing E2EE in Matrix wasn’t necessarily the encryption protocol implementation itself, but how you glue it into your Matrix client’s SDK.  It turns out ~80% of the code and complexity needed to securely implement encryption ends up being in the SDK rather than the Olm implementation - and each client SDK ended up implementing its own independent state machine and glue for E2EE, leading to a needlessly large attack &amp; bug surface.</p>
<p>To address this problem, vodozemac is designed to plug into <a href="https://github.com/matrix-org/matrix-rust-sdk/tree/main/crates/matrix-sdk-crypto">matrix-sdk-crypto</a> - an SDK-independent Rust library which abstracts away the complexities and risks of implementing E2EE, designed to plug into existing SDKs in any language.  For instance, Element Android already <a href="https://github.com/vector-im/element-android/pull/3209">supports</a> delegating its encryption to matrix-sdk-crypto; Element iOS got this working too last week, and we’re <a href="https://github.com/Hywan/matrix-rust-sdk/commits/feat-crypto-wasm">hard at work</a> adding it to Element Web too.  (This set of projects is codenamed Element R).  Meanwhile, <a href="https://youtu.be/chsyOWKvne4">Element X</a> (the project to switch Element iOS and Element Android to use matrix-rust-sdk entirely) obviously benefits from it too, as matrix-rust-sdk now leans on matrix-sdk-crypto for its encryption.</p>
<p>Therefore we highly recommend that developers using libolm migrate over to vodozemac - ideally by switching to matrix-sdk-crypto as a way of managing the interface between Matrix and the E2EE implementation.  Vodozemac does also provides a similar API to libolm with <a href="https://github.com/matrix-org/vodozemac-bindings">bindings for JS and Python</a> (and C++ in progress) if you want to link directly against it - e.g. if you’re using libolm for something other than Matrix, for example XMPP, ActivityPub or Jitsi.  We’ll continue to support and maintain libolm for now though, at least until the majority of folks have switched to vodozemac.</p>
<p>In terms of the audit itself - we recommend <a href="https://matrix.org/media/Least%20Authority%20-%20Matrix%20vodozemac%20Final%20Audit%20Report.pdf">reading it yourself</a>, but the main takeaway is that Least Authority identified 10 valid concerns, of which we addressed 8 during the audit process. The remaining two are valid but lower priority, and we’ll fix them as part of our maintenance backlog.  All the issues identified are excellent valid points, and we’re very glad that Least Authority have added huge value here by highlighting some subtle gotchas which we’d missed.  (If you write Rust, you’ll particularly want to check out their zeroisation comments).</p>
<p>So: exciting times!  Vodozemac should be landing in a Matrix client near you in the near future - we’ll yell about it loudly once Element switches over.  In the meantime, if you have any questions, please head over to <a href="https://matrix.to/#/#e2ee:matrix.org">#e2ee:matrix.org</a>.</p>
<p>Thanks again to gematik for helping fund the audit, and to Least Authority for doing an excellent job - and being patient and accommodating beyond the call of duty when we suddenly switched the scope from libolm to vodozemac at the last minute ;)</p>
<p>Next up: we’re going to get the Rust matrix-sdk-crypto independently audited (once <a href="https://github.com/matrix-org/matrix-rust-sdk/milestone/1">this burndown</a> is complete) so that everyone using the matrix-sdk-crypto state machine for Matrix E2EE can have some independent reassurance too - a huge step forward from the wild west of E2EE SDK implementations today!</p>
<p>– Matthew</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2022&#x2F;03&#x2F;30&#x2F;technical-faq-on-the-digital-markets-act&#x2F;" title="Technical FAQ on the Digital Markets Act">Technical FAQ on the Digital Markets Act</a></h2>
                <span>
                    30.03.2022 14:13
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>We've been flooded with questions about the <a href="https://www.europarl.europa.eu/news/en/press-room/20220315IPR25504/">DMA</a>
since it was announced last week, and have spotted some of the
gatekeepers jumping to the wrong conclusions about what it might entail.
Just in case you don't want to wade through
yesterday's <a href="https://matrix.org/blog/2022/03/29/how-do-you-implement-interoperability-in-a-dma-world/">sprawling blog post</a>,
we've put together a quick FAQ to cover the most important points based on
our understanding.</p>
<h3 id="what-does-dma-mean-for-the-gatekeepers">What does DMA mean for the gatekeepers?</h3>
<p>The gatekeepers will have to open and document their existing APIs, so that
alternative clients and/or bridges can connect to their service. The DMA
requires that the APIs <em>must</em> expose the same level of privacy for remote
users as for local users. So, if their service is end-to-end-encrypted
(E2EE), the APIs must expose the same E2EE semantics (e.g. so that an
alternative client connecting would have to implement E2EE too). For
E2EE-capable APIs to work, the gatekeeper will likely have to model remote
users as if they were local in their system. In the short term (one year
horizon) this applies only to 1:1 chats and file transfers. In the long term
(three year horizon) this applies to group chats and voip calls/conferences
too.</p>
<h3 id="who-counts-as-a-gatekeeper">Who counts as a “gatekeeper”?</h3>
<p>The DMA defines any tech company worth over €75B or with over €7.5B of
turnover as a gatekeeper, who must open their communication APIs. This means
only the tech giants are in scope (e.g. as of today that includes Meta,
Apple, Google, Microsoft, Salesforce/Slack - not Signal, Telegram, Discord,
Twitter).</p>
<h3 id="does-this-mean-the-gatekeepers-are-being-forced-to-implement-an-open-standard-such-as-matrix-or-xmpp">Does this mean the gatekeepers are being forced to implement an open standard such as Matrix or XMPP?</h3>
<p>No. They can keep their existing implementations and APIs. For
interoperability with other service providers, they will need to use a
bridge (which could bridge via a common language such as Matrix or XMPP).</p>
<h3 id="are-bridges-secure">Are bridges secure?</h3>
<p>If the service lacks end-to-end-encryption (Slack, Teams, Google Chat,
non-secret chats on Facebook Messenger, Instagram, Google Messages etc) then
the bridge does not reduce security or privacy, beyond the fact that bridged
conversations by definition will be visible to the bridge and to the service
you are interoperating with.</p>
<p>If the service has E2EE (WhatsApp, iMessage, secret chats on Messenger) then
the bridge will necessarily have to decrypt (and reencrypt, where possible)
the data when passing it to the other service. This means the conversation is
no longer E2EE, and thus less secure (the bridge could be compromised and
inspect or reroute their messages) - and so gatekeepers must warn the user
that their conversation is leaving their platform and is no longer E2EE with
something like this:</p>
<div style="text-align: center">
<img src="/blog/img/2022-03-29-warning.jpg" width="430"/>
</div>
<br/>
<h3 id="why-is-the-dma-good">Why is the DMA good?</h3>
<p>The upside is that the user has the freedom to use an infinite number of
services (bots, virtual assistants, CRMs, translation services, etc) as well
as speak to any other user in the world, regardless what platform they use.</p>
<p>It also puts much-needed pressure on the gatekeepers to innovate and
differentiate rather than rely on their network effects to attract new
users - creating a much more vibrant, open, competitive marketplace for
users.</p>
<p>See &quot;<a href="https://matrix.org/blog/2022/03/29/how-do-you-implement-interoperability-in-a-dma-world#whats-driven-the-dma">What's driven the DMA?</a>&quot;
for more details.</p>
<h3 id="if-the-dma-requires-that-remote-users-have-the-same-security-as-local-users-how-can-bridges-work">If the DMA requires that remote users have the same security as local users, how can bridges work?</h3>
<p>The DMA requires that the <em>APIs</em> expose the same level of security as for
local users - ie E2EE must be exposed. If the users in a conversation choose
to use a bridge and thus reencrypt the messages, then it is their choice to
tradeoff encryption in favour of interoperability for a given conversation.</p>
<h3 id="does-this-undermine-the-gatekeepers-current-encryption">Does this undermine the gatekeepers’ current encryption?</h3>
<p>Absolutely not. Users talking to other users within the same E2EE-capable
gatekeeper will still be E2EE (assuming the gatekeeper doesn’t pull that rug
from under its users) - and in fact it gives the gatekeepers an excellent way
to advertise the selling point that E2EE is only guaranteed when you speak to
other users on the same platform.</p>
<h3 id="but-why-do-we-need-bridges-if-everyone-spoke-a-common-protocol-you-wouldn-t-ever-have-to-decrypt-messages-to-convert-them-between-protocols">But why do we need bridges? If everyone spoke a common protocol, you wouldn’t ever have to decrypt messages to convert them between protocols.</h3>
<p>Practically speaking, we don’t expect the gatekeepers to throw away their
existing stacks (or implement multihead messengers that also speak open
protocols). It’s true that if they natively spoke Matrix or XMPP then the
reencryption problem would go away, but it’s more realistic to focus on
opening the existing APIs than interpret the legislation as a mandate to
speak Matrix. Perhaps in future players will adopt Matrix of their own
volition.</p>
<h3 id="where-do-these-bridges-come-from">Where do these bridges come from?</h3>
<p>There is already a vibrant community of developers who build unofficial
bridges to the gatekeepers - eg Element, Beeper and hundreds of open source
developers in the Matrix and XMPP communities. Historically these bridges
have been hampered by having to use unofficial and private APIs, making them
a second class citizen - but with open documented APIs guaranteed by the DMA
we eagerly anticipate an explosion of high quality transparent bridges which
will be invisible to the end user.</p>
<h3 id="can-you-run-e2ee-bridges-clientside-to-make-them-safer">Can you run E2EE bridges clientside to make them safer?</h3>
<p>Maybe. For instance, current iMessage bridges work by running iMessage on a
local iPhone or Mac and then reencrypting the messages there for
interoperability. Given the messages are already exposed on the client
anyway, this means that E2EE is not broken - and avoids decrypting them on a
server. There is lots of development in this space currently, and with open
APIs guaranteed by DMA the pace should speed up significantly.</p>
<h3 id="how-can-you-tell-what-service-you-should-use-to-talk-to-a-given-remote-user">How can you tell what service you should use to talk to a given remote user?</h3>
<p>For 1:1 chats this is easy: you can simply ask the user which service they
want to use to talk to a given user, if that user is not already on that
service.</p>
<p>For group chats it is harder, and this is why the deadline for group chats is
years away. The problem is that you need a way to verify the identity of
arbitrary numbers of remote users on  different platforms - effectively
looking up their identity in a secure manner which stops services from
maliciously spoofing identities.</p>
<p>One possible way to solve this would be for users to explicitly link their
identity on one service with that on the gatekeeper’s service - eg “Alice on
AliceChat is talking in the same room as Bob on BobChat; Bob will be asked to
prove to AliceChat that he is the real Bob” - and so if AliceChat has already
validated Bob’s identity, then this can be used to spot him popping up on
other services. It also gives Bob a way to block themselves from ever being
unwittingly bridged to AliceChat.</p>
<p>There are many other approaches too - and the onus is on the industry to
figure out the best solution for decentralised identity in the next 3-4 years
in order to realise the most exciting benefits of the DMA.</p>
<hr />
<p>For a much deeper dive into the above, please check out our post at &quot;<a href="https://matrix.org/blog/2022/03/29/how-do-you-implement-interoperability-in-a-dma-world">How do you implement interoperability in a DMA world?</a>&quot;</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2022&#x2F;03&#x2F;29&#x2F;how-do-you-implement-interoperability-in-a-dma-world&#x2F;" title="How do you implement interoperability in a DMA world?">How do you implement interoperability in a DMA world?</a></h2>
                <span>
                    29.03.2022 17:57
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                <br>
                <small>Last update: 29.03.2022 09:23</small>
            </header>
            <div>
                
                <p>With last week’s revelation that the <a href="https://www.europarl.europa.eu/news/en/press-room/20220315IPR25504/deal-on-digital-markets-act-ensuring-fair-competition-and-more-choice-for-users">EU Digital Markets Act</a>
will require tech gatekeepers (companies valued at over $75B or with over
$7.5B of turnover) to open their communication APIs for the purposes of
interoperability, there’s been a lot of speculation on what this could mean
in practice, To try to ground the conversation a bit, we’ve had a go at
outlining some concrete proposals for how it could work.</p>
<p>However, before we jump in, we should review how the DMA has come to pass.</p>
<h3 id="what-s-driven-the-dma">What’s driven the DMA?</h3>
<p>Today’s gatekeepers all began with a great product, which got more and more
popular until it grew to such a size that one of the biggest reasons to use
the service is not necessarily the product any more, but the benefits of
being able to talk to a large network of users. This rapidly becomes
anti-competitive, however: the user becomes locked into the network and can’t
switch even if they want to.  Even when people have a <strong>really</strong> good reason
to move provider (e.g. <a href="https://www.theregister.com/2021/01/06/whatsapp_privacy_policy_demand/">WhatsApp’s terms of use changing</a> to
share user data with Facebook, <a href="https://blog.elcomsoft.com/2021/01/apple-scraps-end-to-end-encryption-of-icloud-backups/">Apple doing a 180 on end-to-end encrypting iCloud backups</a>,
or <a href="https://www.wired.co.uk/article/telegram-encryption-end-to-end-features">Telegram not actually being end-to-end encrypted</a>),
in practice <a href="https://medium.com/@carlagriggio/the-great-messaging-app-migration-that-didnt-really-happen-56af637bc5d8">hardly anything changes</a> -
because the users are socially obligated to keep using the service in order
to talk to the rest of the users on it.</p>
<p>As a result, it’s literally harmful to the users. Even if a new service
launches with a shiny new feature, there is enormous inertia that must be
overcome for users to switch, thanks to the pull of their existing network -
and even if they do, they’ll just end up with their conversations haphazardly
fragmented over multiple apps. This isn’t accepted for email; it isn’t
accepted for the phone network; it isn’t accepted on the Internet itself -
and it shouldn’t be accepted for messaging apps either.</p>
<p>Similarly: the closed networks of today’s gatekeepers put a completely
arbitrary limit on how users can extend and enrich their own conversations.
On email, if you want to use a fancy new client like Superhuman - you can. If
you want to hook up a digital assistant or translation service to help you
wrangle your email - you can.  If you want to hook up your emails to a CRM to
help you run your business - you can.  But with today’s gatekeepers, you have
literally no control: you’re completely at the mercy of the service
provider - and for something like WhatsApp or iMessage the options are
limited at best.</p>
<p>Finally - all the users’ conversation metadata for that service (who talks to
who, and when) ends up centralised in the gatekeepers’ databases, which then
become an incredibly valuable and sensitive treasure trove, at risk of abuse.
And if the service provider identifies users by phone number, the user is
forced to disclose their phone number (a deeply sensitive personal
identifier) to participate, whether they want to or not.  Meanwhile the user
is massively incentivised not to move away: effectively they are held hostage
by the pull of the service’s network of users.</p>
<p>So, the DMA exists as a strategy to improve the situation for users and
service providers alike by building a healthier dynamic ecosystem for
communication apps; encouraging products to win by producing the best quality
product rather than the biggest network. To quote Cédric O (Secretary of
State for the Digital Sector of France), the strategy of the legislation came
from Washington advice to address the anticompetitive behaviour of the
gatekeepers “not by breaking them up… but by breaking them open.”  By
requiring the gatekeepers to open their APIs, the door has at last been
opened to give users the option to pick whatever service they prefer to use,
to choose who they trust with their data and control their conversations as
they wish - without losing the ability to talk to their wider audience.</p>
<p>However, something as groundbreaking as this is never going to be completely
straightforward.  Of course while some basic use cases (i.e. non-E2EE chat)
are easy to implement, they initially may not have a UX as smooth as a closed
network which has ingested all your address book; and other use cases(eg E2EE
support) may require some compromises at first.  It’s up to the industry to
figure out how to make the most of that challenge, and how to do it in a way
which minimises the impact on privacy - especially for end-to-end encrypted
services.</p>
<h3 id="what-problems-need-to-be-solved">What problems need to be solved?</h3>
<p>We’ve <a href="https://matrix.org/blog/2022/03/25/interoperability-without-sacrificing-privacy-matrix-and-the-dma">already written about this</a>
from a Matrix perspective, but to recap - the main challenge is the trade-off
between interoperability and privacy for gatekeepers who provide end-to-end
encryption, which at a rough estimate means: WhatsApp, iMessage, secret chats
in Facebook Messenger, and Google Messages.  The problem is that even with
open APIs which correctly expose the end-to-end encrypted semantics (as DMA
requires), the point where you interoperate with a different system
inevitably means that you’ll have to re-encrypt the messages for that system,
unless they speak precisely the same protocol - and by definition you end up
trusting the different system to keep the messages safe.  Therefore this
increases the attack surface on the conversations, putting the end-to-end
encryption at risk.</p>
<p>Alex Stamos (ex-CISO at Facebook) said that “<a href="https://twitter.com/alexstamos/status/1507366543360897028">WhatsApp rolling out mandatory
end-to-end encryption was the largest improvement in communications privacy
in human history</a>” – and we agree.
Guaranteed end-to-end encrypted conversations on WhatsApp is amazing, and
should be protected at all costs. If users are talking to other users on
WhatsApp (or any set of users communicating within the same E2EE messenger),
E2EE should and must be maintained - and there is nothing in the DMA which says otherwise.</p>
<p>But what if the user consciously wants to prioritise interoperability over
encryption?  What if the user wants to hook their WhatsApp messages into a
CRM, or run them through a machine translation service, or try to start a
migration to an alternative service because they don’t trust Meta?  Should
privacy really come so spectacularly at the expense of user freedom?</p>
<p>We also have the problem of figuring out how to reference users on other
platforms.  Say that I want to talk to a user with a given phone number, but
they’re not on my platform - how do I locate them?  What if my platform only
knows about phone numbers, but you’re trying to talk to a user on a platform
which uses a different format for identifiers?</p>
<p>Finally, we have the problem of mitigating abuse: opening up APIs makes it
easier for bad actors to try to spam or phish or otherwise abuse users within
the gatekeepers. There are going to have to be changes in anti-abuse
services/software, and some signals that the gatekeeper platforms currently
use are going to go away or be less useful, but that doesn't mean the whole
thing is intractable. It will require changes and innovative thinking, but
we’ve been making steady progress (e.g. the work done by <a href="https://element.io/blog/moderation-needs-a-radical-change/">Element’s trust and
safety team</a>). Meanwhile, the
gatekeepers already have massive anti-abuse systems in place to handle the
billions of users within their walled gardens, and unofficial APIs are
already widespread: adding official APIs does not change the landscape
significantly (assuming interoperability is implemented in such a way that
the existing anti-abuse mechanisms still apply).</p>
<p>In the past, gatekeepers dismissed the effort of interop as not being
worthwhile - after all, the default course of action is to build a walled
garden, and having built one, the temptation is to try to trap as many users
as possible.  It was also not always clear that there were services worth
interoperating with (thanks to the chilling effects of the gatekeepers
themselves, in terms of stifling innovation for communication startups).
Nowadays this situation has fundamentally changed however: there is a vibrant
ecosystem of open communication startups out there, and a huge appetite to
build a vibrant open ecosystem for interoperable communication, but like the
open web itself.</p>
<h3 id="what-are-the-requirements">What are the requirements?</h3>
<p>Before going further in considering solutions, we need to review the actual
requirements of the DMA.  Our best understanding at this point is that the
DMA will mandate that:</p>
<ul>
<li>Gatekeepers will have to provide open and documented APIs to their services, on request, in order to facilitate interoperability (i.e. so that other services can communicate with their users).</li>
<li>These APIs must preserve the same level of end-to-end encryption (if any) to remote users as is available to local users.</li>
<li>This applies to 1:1 messaging and file transfer in the short term, and group messaging, file-transfer, 1:1 VoIP and group VoIP in the longer term.</li>
</ul>
<h3 id="so-what-could-this-actually-look-like">So, what could this actually look like?</h3>
<p>The DMA legislation deliberately doesn’t focus on implementation, instead
letting the industry figure out how this could actually work in practice.
There are many different possible approaches, and so from our point of view
as Matrix we’ve tried to sketch out some options to make the discussion more
concrete. Please note these are preliminary thoughts, and are far from
perfect - but hopefully useful as a starting point for discussion.</p>
<h4 id="finding-bob">Finding Bob</h4>
<p>Imagine that you have a user Alice on an existing gatekeeper, which we’ll call
AliceChat, who runs an E2EE messaging service which identifies users using
phone numbers.  Say that they want to start a 1-to-1 conversation with Bob,
who doesn’t use AliceChat, but Alice knows he is a keen user of BobChat.
Today, you’d have no choice but to send them an SMS and nag them to join
AliceChat (sucks to be them if they don’t want to use that service, or if
they’re unable to for whatever reason - e.g. their platform isn’t supported,
or their government has blocked access, etc), or join BobChat yourself.</p>
<div style="text-align: center">
<img src="/blog/img/2022-03-29-bob-invite.jpg" width="430"/>
<img src="/blog/img/2022-03-29-bob-invite-b.png" width="430"/>
</div>
<br/>
<p>However, imagine if instead the gatekeeper app had a user experience where the
app prompted you to talk to the user via a different platform instead.  It’d
be no different to your operating system prompting you to pick which app to
use to open a given file extension (rather than the OS vendor hardcoding it
to one of their own apps - another win for user rights <a href="https://en.wikipedia.org/wiki/Microsoft_Corp._v._Commission">led by the EU</a>!).</p>
<div style="text-align: center">
<img src="/blog/img/2022-03-29-bob-invite2.jpg" width="430"/>
</div>
<br/>
<p>Now, the simplest approach in the short term would be for each gatekeeper to
pre-provision a set of options of possible alternative networks.  (The DMA
says that, on request, other service providers can ask to have access to the
gatekeeper’s APIs for the purposes of interoperability, so the gatekeeper
knows who the alternative networks may be).  “Bob is not on AliceChat - do
you want to try to reach him instead on BobChat, CharlieChat, DaveChat
(etc)”.</p>
<p>Much like users can configure their preferred applications for file extensions
in an operating system today, users would also be able to add their own
preferred service providers - simply specifying their domain name.</p>
<h4 id="connecting-to-bob">Connecting to Bob</h4>
<p>Now, AliceChat itself needs to figure out how to query the remote service
provider to see if Bob actually exists there.  Given the DMA requires that
gatekeepers provide open APIs with the same level of security to remote users
as their local ones using today’s private APIs - and very deliberately
doesn’t mandate specific protocols for interoperability - they will need to
locate a bridge which can connect to the other system.</p>
<p>In this thought experiment, the bridge used would be up to the destination
provider.  For instance, bobchat.com could announce that AliceChat users
should connect to it via alicechat-bridge.bobchat.com using the AliceChat
protocol(or matrix-bridge.bobchat.com via Matrix or xmpp-bridge.bobchat.com
via XMPP) by a simple HTTP API or even a .well-known URL.  Users might also
be able to override the bridge used to connect to them (e.g. to point instead
at a client-side bridge), and could sign the advertisement to prove that it
hadn’t been tampered with.</p>
<p>AliceChat would then connect to the discovered bridge using AliceChat’s
vendor-specific newly opened API, and would then effectively treat Bob as if
they were a real AliceChat user and client to all intents and purposes.  In
other words, Bob would effectively be a “ghost user” on AliceChat, and
subject to all their existing anti-abuse mechanisms.</p>
<p>Meanwhile, the other side of the bridge converts through to whatever the
target system is - be that XMPP, Matrix, a different proprietary API, etc.
For Matrix, it’d be chatting away to a homeserver via the <a href="https://spec.matrix.org/latest/application-service-api/">Application Service
API</a> (using
<a href="https://docs.mau.fi/bridges/general/end-to-bridge-encryption.html">End-to-Bridge Encryption</a> via
<a href="https://github.com/matrix-org/matrix-spec-proposals/blob/travis/msc/otk-dl-appservice/proposals/3202-encrypted-appservices.md">MSC3202</a>).
It’s also worth noting that the target might not even be a bridge - it could
be a system which already natively speaks AliceChat’s end-to-end encrypted
API, thus preserving end-to-end encryption without any need to re-encrypt.
It’s also worth noting that while historically bridges have had a bad
reputation as being a second class (often a second class afterthought),
Matrix has shown that by considering them as a first class citizen and really
focusing on mapping the highest common denominator between services rather
than lowest common denominator, it’s possible for them to work transparently
in practice.  <a href="https://beeper.com">Beeper</a> is a great example of Matrix
bridging being used for real in the wild (rather amusingly they just
<a href="https://twitter.com/ericmigi/status/1507827177374445569">shipped emoji reactions for WhatsApp</a> on iOS via their
WhatsApp&lt;-&gt;Matrix bridge before WhatsApp themselves did…)</p>
<p>Architecturally, it could look like this:</p>
<p><img src="/blog/img/2022-03-29-alice-bob.jpg" alt="" /></p>
<p>Or, more likely (given a dedicated bridge between two proprietary services
would be a bit of a special case, and you’d have to solve the dilemma of who
hosts the bridge), both services could run a bridge to a common open standard
protocol like Matrix or XMPP instead (thus immediately enabling
interoperability with everyone else connected to that network):</p>
<p><img src="/blog/img/2022-03-29-alice-bob-bridged.jpg" alt="" /></p>
<p>Please note that while these examples show server-side bridges, in practice it
would be infinitely preferable to use client-side bridges when connecting to
E2EE services - meaning that decrypted message data would only ever be
exposed on the client (which obviously has access to the decrypted data
already).  Client-side bridges are currently complicated by OS limits on
background tasks and push notification semantics (on mobile, at least), but
one could envisage a scenario where you install a little stub AliceChat
client on your phone which auths you with AliceChat and then sits in the
background receiving messages and bridging them through to Matrix or XMPP,
like this:</p>
<p><img src="/blog/img/2022-03-29-alice-bob-clientside.jpg" alt="" /></p>
<p>Another possible architecture could be for the E2EE gatekeeper to expose their
open APIs on the clients, rather than the server.  DMA allows this, to the
best of our knowledge - and would allow other apps on the device to access
the message data locally (with appropriate authorisation, of course) - effectively
doing a form of realtime
<a href="https://en.wikipedia.org/wiki/Google_Data_Liberation_Front">data liberation</a>
from the closed service to an open system, looking something like this:</p>
<p><img src="/blog/img/2022-03-29-alice-bob-clientside-apis.jpg" alt="" /></p>
<p>Finally, it's worth noting that when peer-to-peer decentralised protocols
like <a href="https://matrix.org/blog/2020/06/02/introducing-p-2-p-matrix/">P2P Matrix</a>
enter production, clientside bridges could bridge directly into a local
communication server running on the handset - thus avoiding metadata being
exposed on Matrix or XMPP servers providing a common language between the
service providers.</p>
<h4 id="locating-users">Locating users</h4>
<p>Now, the above describes the simplest and most naive directory lookup system
imaginable - the problem of deciding which provider to use to connect to each
user is shouldered by the users.  This isn’t that unreasonable - after all,
users may have strong feelings about what providers to use to talk to a given
user.  Alice might be quite happy to talk to Bob via BobChat, but might be
very deliberately avoiding talking to him on DaveChat, for whatever ominous
reasons.</p>
<p>However, it’s likely in future we will also see other directory services
appear in order to map phone numbers (or other identities) to providers -
whether these piggyback on top of existing identity providers
(gatekeepers, DNS, telcos, SSO providers, governments) or are decentralised
through some other mechanism.  For instance, Bob could send AliceChat a
blinded proof that he authorises them to automatically route traffic to him
over at BobChat, with BobChat maintaining a matching proof that Bob is who he
claims to be (having gone through BobChat’s auth process) - and the proofs
could be linked using a temporary key such that Bob doesn’t even need to
maintain a long-term one. (Thanks to James Monaghan for suggesting this one!)</p>
<p>Another alternative to having the user decide where to find each other could
be to use a decentralised Keybase-style identity system to track verified
mappings of identities (phone numbers, email addresses etc) through to
service providers - perhaps something like <a href="https://idx.xyz/">IDX</a> might fit
the bill?  While this decentralised identity lookups have historically been a
hard problem, there is a <em>lot</em> of promising work happening in this space
currently and the future looks promising.</p>
<h4 id="talking-to-bob">Talking to Bob</h4>
<p>Meanwhile, Alice still needs to talk to Bob. As already discussed, unless
everyone speaks the same end-to-end encrypted protocol (be it Matrix,
WhatsApp or anything else), we inevitably have a trade-off here between
interoperability and privacy if Bob is not on the same system as Alice
(assuming AliceChat is end-to-end encrypted) - and we will need to clearly
warn Alice that the conversation is no longer end-to-end encrypted:</p>
<div style="text-align: center">
<img src="/blog/img/2022-03-29-warning.jpg" width="430"/>
</div>
<br/>
<p>To be clear: right now, today, if Bob were on AliceChat, he could be
copy-pasting all your messages into (say) Google Translate in a frantic
effort to workaround the fact that his closed E2EE chat platform has no way
to do machine translation.  However, in a DMA world, Bob could legitimately
loop a translation bot into the conversation… and Alice would be warned that
the conversation was no longer secure (given the data is now being bridged
over to Google).</p>
<p>This is a clear improvement in user experience and transparency.  Likewise, if
I’m talking to a bridged user today on one of these platforms, I have no way
of telling that they have chosen to prioritise interop over E2EE - which is
frankly terrifying.  If I’m talking to someone on WhatsApp today I blindly
assume that they are E2EE as they are on the same platform - and if they’re
using an unofficial app or bridge, I have no way to tell.  Whereas in a DMA
world, you would expect the gatekeeper to transparently expose it.</p>
<p>If anything, this is good news for the gatekeeper in that it consciously
advertises a big selling point for them: that for full E2EE, users need to
talk to other users in the same walled garden (unless of course the platform
speaks the same protocol).  No more need for bus shelter adverts to remind
everywhere that WhatsApp is E2EE - instead they can remind the user every
time they talk to someone outside the walled garden!</p>
<p>Just to spell it out: the DMA does not require or encourage any reduction in
end-to-end encryption for WhatsApp or similar: full end-to-end encryption
will still be there for users in the same platform, including through to
users on custom clients (assuming the gatekeeper doesn’t flex and turn it off
for other reasons).</p>
<p>Obviously, this flow only considers the simple case of Alice inviting Bob. The
flow is of course symmetrical for Bob inviting Alice; AliceChat will need to
advertise bridges which can be used to connect to its users.  As Bob pops up
from BobChat, the bridge would use AliceChat’s newly open APIs to provision a
user for him, authing him as per any other user (thus ensuring that AliceChat
doesn’t need to have trusted BobChat to have authenticated the user).  The
bridge then sends/receives messages on Bob’s behalf within AliceChat.</p>
<h4 id="group-communication">Group communication</h4>
<p>This is all very well for 1:1 chats - which are the initial scope of the DMA.
However, over the coming years, we expect group chats to also be in scope.
The good news is that the same general architecture works for group chats
too.  We need a better source of identity though: AliceChat can’t possibly
independently authenticate all the new users which might be joining via group
conversations on other servers (especially if they join indirectly via
another server).  This means adopting one of the decentralised identity
lookup approaches outlined earlier to determine whether Charlie on
CharlieChat is the real Charlie or an imposter.</p>
<p>Another problem which emerges with group chats which span multiple service
providers is that of indirect routing, especially if the links between the
providers use different protocols.  What if AliceChat has a direct bridge to
BobChat (a bit like AIM and ICQ both spoke OSCAR), BobChat and CharlieChat
are connected by Matrix bridges, and AliceChat and CharlieChat are connected
via XMPP bridges?  We need a way for the bridges to decide who forwards
traffic for each network, and who bridges the users for which network.  If
they were all on Matrix or XMPP this would happen automatically, but with
mixed protocols we’d probably have to extend the lookup protocol to establish
a spanning tree for each conversation to prevent forwarding loops.</p>
<p>Here’s a deliberately twisty example to illustrate the above thought experiment:</p>
<p><img src="/blog/img/2022-03-29-alice-bob-charlie.jpg" alt="" /></p>
<p>There is also a risk of bridge proliferation here - in the worst case, every
service would have to source bridges to directly connect to every other
service who came along, creating a nightmarish n-by-m problem.  But in
practice, we expect direct proprietary-to-proprietary bridges to be rare:
instead, we already have open standard communication protocols like Matrix
and XMPP which provide a common language between bridges - so in practice,
you could just end up in a world where each service has to find a
them-to-Matrix or them-to-XMPP bridge (which could be run by them, or
whatever trusted party they delegate to).</p>
<h3 id="conclusion">Conclusion</h3>
<p>A mesh of bridges which connect together the open APIs of proprietary vendors
by converting them into open standards may seem unwieldy at first - but it’s
precisely the sort of ductwork which links both phone networks and the
Internet together in practice.  As long as the bridging provides for highest
common denominator fidelity at the best impedance ratio, then it’s
conceptually no different to converting circuit switched phone calls to VoIP,
or wired to wireless Ethernet, or any of the other bridges which we take
entirely for granted in our lives thanks to their transparency.</p>
<p>Meanwhile, while this means a bit more user interface in the communication
apps in order to select networks and warn about trustedness, the benefits to
users are enormous as they put the user squarely back in control of their
conversations. And the UX will improve as the tech evolves.</p>
<p>The bottom line is, we should not be scared of interoperability, just because
we’ve grown used to a broken world where nothing can interconnect.  There are
tractable ways to solve it in a way that empowers and informs the user - and
the DMA has now given the industry the opportunity to demonstrate that it can
work.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2022&#x2F;03&#x2F;25&#x2F;interoperability-without-sacrificing-privacy-matrix-and-the-dma&#x2F;" title="Interoperability without sacrificing privacy: Matrix and the DMA">Interoperability without sacrificing privacy: Matrix and the DMA</a></h2>
                <span>
                    25.03.2022 22:39
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                <br>
                <small>Last update: 25.03.2022 18:01</small>
            </header>
            <div>
                
                <p>Yesterday the EU Parliament &amp; Council agreed on the contents of the Digital
Markets Act - new legislation from the EU intended to limit anticompetitive
behaviour from tech “gatekeepers”, i.e. big tech companies (those with market
share larger than €75B or with more than €7.5B a year of revenue).</p>
<p>This is absolutely landmark legislation, where the EU has decided not to break
the gatekeepers up in order to create a more competitive marketplace - but
instead to “break them open”.  This is unbelievably good news for the open
Internet, as it is obligating the gatekeepers to provide open APIs for their
communication services.  In other words: no longer will the tech giants be
able to arbitrarily lock their users inside their walled gardens - there will
be a legal requirement for them to expose APIs to other services.</p>
<p>While the formal outcomes of yesterday’s agreement haven’t been published yet
(beyond <a href="https://www.europarl.europa.eu/news/en/press-room/20220315IPR25504/deal-on-digital-markets-act-ensuring-fair-competition-and-more-choice-for-users">this press release</a>),
our understanding is that the DMA will mandate:</p>
<ul>
<li>Gatekeepers will have to provide open and documented APIs to their
services, on request, in order to facilitate interoperability (i.e. so
that other services can communicate with their users).</li>
<li>These APIs must preserve the same level of end-to-end encryption (if any)
to remote users as is available to local users.</li>
<li>This applies to 1:1 messaging and file transfer in the short term, and
group messaging, file-transfer, 1:1 VoIP and group VoIP in the longer
term.</li>
</ul>
<p>This is the best possible outcome imaginable for the open internet.  Never
again will a big tech company be able to hold their users hostage in a walled
garden, or arbitrarily close down or sabotage their APIs.</p>
<h3 id="so-what-s-the-catch">So, what’s the catch?</h3>
<p>Since the DMA announcement on Thursday, there’s been <a href="https://twitter.com/alexstamos/status/1507145126006587411">quite a lot</a>
of <a href="https://twitter.com/AlecMuffett/status/1507366934412734491">yelling</a> from some very
experienced voices that mandating interoperability via open APIs is going to
irrevocably undermine end-to-end encrypted messengers like WhatsApp.  This
seems to mainly be born out of a concern that the DMA is somehow trying to
subvert end-to-end encryption, despite the fact that the DMA explicitly
mandates that the APIs must expose the same level of security, including
end-to-end encryption, that local users are using. (N.B. Signal doesn’t
qualify as a gatekeeper, so none of this is relevant to Signal).</p>
<p>So, for WhatsApp, it means that the API would expose both the message-passing
interface as well as the key management APIs required to interoperate with
WhatsApp using your own end-to-end-encrypted WhatsApp client - E2EE would be
preserved.</p>
<p>However, this does mean that if you were to actively interoperate between
providers (e.g. if Matrix turned up and asked WhatsApp, post DMA, to expose
an API we could use to write bridges against), then that bridge would need to
convert between WhatsApp’s E2EE’d payloads and Matrix’s E2EE’d payloads.
(Even though both WhatsApp and Matrix use the Double Ratchet, the actual
payloads within the encryption are completely different and would need to be
converted).  Therefore such a bridge has to re-encrypt the traffic - which
means that the plaintext is exposed on the bridge, putting it at risk and
breaking the end-to-end encryption guarantee.</p>
<p>There are solutions to this, however:</p>
<ul>
<li>
<p>We could run the bridge somewhere relatively safe - e.g. the user’s client.
There’s a bunch of work going on already in Matrix to run clientside
bridges, so that your laptop or phone effectively maintains a connection
over to iMessage or WhatsApp or whatever as if it were logged in… but then
relays the messages into Matrix once re-encrypted.  By decentralising the
bridges and spreading them around the internet, you avoid them becoming a
single honeypot that bad actors might look to attack: instead it becomes
more a question of endpoint compromise (which is already a risk today).</p>
</li>
<li>
<p>The gatekeeper could switch to a decentralised end-to-end encrypted protocol
like Matrix to preserve end-to-end encryption throughout.  This is
obviously significant work on the gatekeeper’s side, but we shouldn’t rule
it out.  For instance, making the transition for a non-encrypted service is
impressively little work, as <a href="https://matrix.org/blog/2020/12/07/gitter-now-speaks-matrix#how-do-you-make-an-existing-chat-system-talk-matrix">we proved with Gitter</a>.
(We’d ideally need to figure out decentralised/federated identity-lookup
first though, to avoid switching from one centralised identity database
to another).</p>
</li>
<li>
<p>Worst case, we could flag to the user that their conversation is insecure
(the chat equivalent of a scary TLS certificate warning).  Honestly, this
is something communication apps (including Matrix-based ones!) should be
doing anyway: as a user you should be able to tell what 3rd parties
(bots, integrations etc) have been added to a given conversation.  Adding
this sort of semantic actually opens up a much richer set of communication
interactions, by giving the user the flexibility over who to trust with
their data, even if it breaks the platonic ideal of pure E2E encryption.</p>
</li>
</ul>
<p>On balance, we think that the benefits of mandating open APIs outweigh the
risks that someone is going to run a vulnerable large-scale bridge and
undermine everyone’s E2EE.  It’s better to have the option to be able to get
at your data in the first place than be held hostage in a walled garden.</p>
<h3 id="other-considerations">Other considerations</h3>
<p>One other complaint which has come up a bunch is around speed of innovation:
the idea that WhatsApp or similar would be seriously slowed down by having
to (effectively) maintain stable documented federation APIs, and figure out
how to do backwards compatibility for new features.  It’s true that this will
take a bit more effort (similar to how adding GDPR compliance takes some
effort), but the ends make it more than worth it.  Plus, if the rag-tag
Matrix ecosystem can do it, it doesn’t seem unreasonable to think that a
$600B company like Meta can figure it out too...</p>
<p>Another consideration is that it might make it too easy to build malicious 3rd
party clients - e.g. building your own &quot;special&quot; version of Signal which
connects to the official service, but deliberately or otherwise has security
flaws.  The fact is that we're already in this position though: there are
illicit alternative clients flying around all over the place, and the onus is
on the app stores to protect their users from installing malware.  This isn't
reason to throw the baby of interoperability out with the bathwater of
bootleg clients.</p>
<p>The final complaint is about moderation and abuse: while open APIs are good
news for consumer choice, they can also be used by spammers, phishers and
other miscreants to cause problems for the users within the gatekeeper.  Much
like a mediaeval citadel; opening up your walled garden means that both good
and bad people can turn up.  And much like real life, this is a solvable problem,
even if it’s unfortunate: the benefits of free trade massively outweigh the
downsides of having to police strangers more effectively.  Frankly,
moderation and anti-abuse approaches on the Internet today are infamously
broken, with centralised moderation by gatekeepers producing increasingly
erratic results.  By opening the walled gardens, we are forcing a much-needed
opportunity to review how to empower users and admins to filter unwanted
content on their own terms.  There’s a recent write-up of the proposed
approach for Matrix at
<a href="https://element.io/blog/moderation-needs-a-radical-change/">https://element.io/blog/moderation-needs-a-radical-change/</a>,
which outlines one strategy - but there are many others.  Honestly, having to improve
moderation tooling is a worthwhile price to pay for the benefits of open
APIs.</p>
<p>So, there you have it. Hopefully you’ll agree that the benefits here outweigh
the risks: without open APIs we wouldn't even have the <em>option</em> to talk about
interoperability.  We should be celebrating a new dawn for open access,
rather than fearing that the sky is falling and this is nefarious attempt to
undermine end-to-end encryption.</p>

                
            </div>
        </article>
        
        <nav class="pagination">
    <div class="prev">
        
    </div>
    <span class="page-number">1 / 14</span>
    <div class="prev">
        
        <a href="&#x2F;category&#x2F;general&#x2F;page&#x2F;2&#x2F;">Next ›</a>
        
    </div>
</nav>

    </div>
</div>

    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;security-hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="&#x2F;code"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p>© 2022 The Matrix.org Foundation C.I.C.</p>
</footer>

</body>

</html>
