<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - Blog</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/png" href="/assets/favicon.png" />
    <link rel="stylesheet" href="/style.css" />

    </head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            current">
            Blog
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <a href="&#x2F;docs&#x2F;" class="section ">
                Documentation
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                </div>
            </div>
        </div>
        
        
        
        
        
        <div class="section-wrap">
            <a href="&#x2F;ecosystem&#x2F;" class="section ">
                Ecosystem
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bots&#x2F;">Bots</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        <div class="content">
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2021&#x2F;05&#x2F;19&#x2F;how-the-uk-s-online-safety-bill-threatens-matrix&#x2F;" title="How the UK&#x27;s Online Safety Bill threatens Matrix">How the UK&#x27;s Online Safety Bill threatens Matrix</a></h1>
            <span>
                19.05.2021 15:47
                —
                <a href="/category/tech">
                    Tech
                </a>
                —
                <a href="/author/denise-almeida">
                    Denise Almeida
                </a>
            </span>
            <br>
            <small>Last update: 19.05.2021 14:48</small>
        </header>
        <div>
            <p>Last week the UK government published a <a href="https://www.gov.uk/government/publications/draft-online-safety-bill">draft of the proposed Online Safety
Bill,</a>
after having initially introduced <a href="https://www.gov.uk/government/consultations/online-harms-white-paper/public-feedback/online-harms-white-paper-initial-consultation-response">formal proposals for said bill in early
2020</a>.
With this post we aim to shed some light on its potential impacts and explain
why we think that this bill - despite having great intentions - may actually
be setting a dangerous precedent when it comes to our rights to privacy,
freedom of expression and self determination.</p>
<p>The proposed bill aims to provide a legal framework to address illegal and
harmful content online. This focus on “not illegal, but harmful” content is at
the centre of our concerns - it puts responsibility on organisations
themselves to arbitrarily decide what might be harmful, without any legal
backing. The bill itself does not actually provide a definition of harmful,
instead relying on service providers to assess and decide on this. This
requirement to identify what is “likely to be harmful” applies to all users,
children and adults. Our question here is - would you trust a service provider
to decide what might be harmful to you and your children, with zero input from
you as a user?</p>
<p>Additionally, the bill incentivises the use of privacy-invasive age
verification processes which come with their own set of problems. This
complete disregard of people’s right to privacy is a reflection of the
privileged perspectives of those in charge of the drafting of this bill, which
fails to acknowledge how <em>actually</em> harmful it would be for certain groups of
the population to have their real life identity associated with their online
identity.</p>
<p>Our view of the world, and of the internet, is largely different from the one
presented by this bill. Now, this categorically does not mean we don’t care
about online safety (it is quite literally our bread and butter) - we just
fundamentally disagree with the approach taken.</p>
<p>Whilst we sympathise with the government’s desire to show action in this space
and to do something about children’s safety (everyone’s safety really), we
cannot possibly agree with the methods.</p>
<p>Back in October of 2020 we presented <a href="https://matrix.org/blog/2020/10/19/combating-abuse-in-matrix-without-backdoors">our proposed approach to online safety</a> -
ironically also in response to a government proposal, albeit about encryption
backdoors. In it, we briefly discussed the dangers of absolute determinations
of morality from a single cultural perspective:</p>
<blockquote>
<a href="https://matrix.org/blog/2020/10/19/combating-abuse-in-matrix-without-backdoors">As uncomfortable as it may be, one man’s terrorist is another man’s freedom fighter, and different jurisdictions have different laws - and it’s not up to the Matrix.org Foundation to play God and adjudicate.</a>
</blockquote>
<p>We now find ourselves reading a piece of legislation that essentially demands
these determinations from tech companies. The beauty of the human experience
lies with its diversity and when we force technology companies to make calls
about what is right or wrong - or what is “likely to have adverse
psychological or physical impacts” on children - we end up in a dangerous
place of centralising and regulating relative morals. Worst of all, when the
consequence of getting it wrong is criminal liability for senior managers what
do we think will happen?</p>
<p>Regardless of how omnipresent it is in our daily lives, technology is still
not a solution for human problems. Forcing organisations to be judge and jury
of human morals for the sake of “free speech” will, ironically, have severe
consequences on free speech, as risk profiles will change for fear of
liability.</p>
<p>Forcing a “duty of care” responsibility on organisations which operate online
will not only drown small and medium sized companies in administrative tasks
and costs, it will further accentuate the existing monopolies by Big Tech.
Plainly, Big Tech can afford the regulatory burden - small start-ups can’t.
Future creators will have their wings clipped from the offset and we might
just miss out on new ideas and projects for fear of legal repercussions. This
is a threat to the technology sector, particularly those building on emerging
technologies like Matrix. In some ways, it is a threat to democracy and some
of the freedoms this bill claims to protect.</p>
<p>These are, quite frankly, steps towards an authoritarian dystopia. If Trust &amp;
Safety managers start censoring something as natural as a nipple on the off
chance it might cause “adverse psychological impacts” on children, whose
freedom of expression are we actually protecting here?</p>
<p>More specifically on the issue of content moderation: the <a href="https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/985283/Draft_Online_Safety_Bill_-_Impact_Assessment_Web_Accessible.pdf">impact assessment
provided by the government alongside this
bill</a>
predicts that the additional costs for companies directly related to the bill
will be in the billions, over the course of 10 years. The cost for the
government? £400k, in every proposed policy option. Our question is - why are
these responsibilities being placed on tech companies, when evidently this is
a societal problem?</p>
<p>We are not saying it is up to the government to single-handedly end the
existence of Child Sexual Abuse and Exploitation (CSAE) or extremist content
online. What we are saying is that it takes more than content filtering, risk
assessments and (faulty) age verification processes for it to end. More
funding for tech literacy organisations and schools, to give children (and
parents) the tools to stay safe is the first thing that comes to mind. Further
investment in law enforcement cyber units and the judicial system, improving
tech companies’ routes for abuse reporting and allowing the actual judges to
do the judging seems pretty sensible too. What is absolutely egregious is the
degradation of the digital rights of the majority, due to the wrongdoings of a
few.</p>
<p>Our goal with this post is not to be dramatic or alarmist. However, we want to
add our voices to the countless <a href="https://www.openrightsgroup.org/blog/online-abuse-why-management-liability-isnt-the-answer/">digital rights
campaigners</a>,
individuals and organisations that have been raising the alarm since the early
days of this bill. Just like with coercive control and abuse, the degradation
of our rights does not happen all at once. It is a slippery slope that starts
with something as (seemingly) innocuous as <a href="https://twitter.com/matthew_d_green/status/1392823038920564736">mandatory content scanning for
CSAE content and ends with authoritarian surveillance
infrastructure</a>.
It is our duty to put a stop to this before it even begins.</p>
<small style="display: block; text-align: right">
Twitter card image credit from <a href="https://film-grab.com/2010/10/04/brazil/#bwg644/39614">Brazil</a>, which feels all too familiar right now.
</small>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2021&#x2F;05&#x2F;17&#x2F;the-matrix-space-beta&#x2F;" title="The Matrix Space Beta!">The Matrix Space Beta!</a></h1>
            <span>
                17.05.2021 17:50
                —
                <a href="/category/tech">
                    Tech
                </a>
                —
                <a href="/author/matthew-hodgson">
                    Matthew Hodgson
                </a>
            </span>
            <br>
            <small>Last update: 17.05.2021 17:35</small>
        </header>
        <div>
            <p>Hi all,</p>
<p>As many know, over the years we've experimented with how to let users locate
and curate sets of users and rooms in Matrix. <a href="https://medium.com/@RiotChat/communities-aka-groups-are-here-announcing-riot-web-0-13-riot-ios-0-6-and-riot-android-0-7-4-933cb193a28e">Back in Nov
2017</a>
we added 'groups' (aka 'communities') as a custom mechanism for this -
introducing identifiers beginning with a + symbol to represent sets of rooms
and users, like <a href="https://matrix.to/#/+matrix:matrix.org">+matrix:matrix.org</a>.</p>
<p>However, it rapidly became obvious that Communities had some major
shortcomings.  They ended up being an extensive and entirely new API surface
(designed around letting you dynamically bridge the membership of a group
through to a single source of truth like LDAP) - while in practice groups
have enormous overlap with rooms: managing membership, inviting by email,
access control, power levels, names, topics, avatars, etc.  Meanwhile the
custom groups API re-invented the wheel for things like pushing updates
to the client (causing a whole suite of
<a href="https://github.com/vector-im/element-web/issues/5235">problems</a>).  So clients
and servers alike ended up reimplementing large chunks of similar
functionality for both rooms and groups.</p>
<p>And so almost before Communities were born, we started thinking about whether
it would make more sense to model them as a special type of room, rather than
being their own custom primitive.
<a href="https://github.com/matrix-org/matrix-doc/issues/1215">MSC1215</a> had the first
thoughts on this in 2017, and then a formal proposal emerged at
<a href="https://github.com/matrix-org/matrix-doc/pull/1772">MSC1772</a> in Jan 2019. We
started working on this in earnest at the end of 2020, and christened the new
way of handling groups of rooms and users as... Spaces!</p>
<p>Spaces work as follows:</p>
<ul>
<li>You can designate specific rooms as 'spaces', which contain other rooms.</li>
<li>You can have a nested hierarchy of spaces.</li>
<li>You can rapidly navigate around that hierarchy using the new 'space summary'
(aka space-nav) API - <a href="https://github.com/matrix-org/matrix-doc/blob/kegan/spaces-summary/proposals/2946-spaces-summary.md">MSC2946</a>.</li>
<li>Spaces can be shared with other people publicly, or invite-only, or private
for your own curation purposes.</li>
<li>Rooms can appear in multiple places in the hierarchy.</li>
<li>You can have 'secret' spaces where you group your own personal rooms and
spaces into an existing hierarchy.</li>
</ul>
<p>Today, we're ridiculously excited to be launching Space support as a beta in
matrix-react-sdk and matrix-android-sdk2 (and thus Element Web/Desktop and
Element Android) and Synapse
<a href="https://matrix.org/blog/2021/05/17/synapse-1-34-0-released">1.34.0</a> - so head
over to your nearest Element, make sure it's connected to the latest Synapse
(and that Synapse has Spaces enabled in its config) and find some Space to
explore! <a href="https://matrix.to/#/#community:matrix.org">#community:matrix.org</a>
might be a good start :)</p>
<p>The beta today gives us the bare essentials: and we haven't yet finished
space-based access controls such as setting powerlevels in rooms based on
space membership
(<a href="https://github.com/matrix-org/matrix-doc/blob/matthew/msc2962/proposals/2962-spaces-access-control.md">MSC2962</a>)
or limiting who can join a room based on their space membership
(<a href="https://github.com/matrix-org/matrix-doc/blob/clokep/restricted-rooms/proposals/3083-restricted-rooms.md">MSC3083</a>) -
but these will be coming asap.  We also need to figure out how to implement
Flair on top of Spaces rather than Communities.</p>
<p>This is also a bit of a turning point in Matrix's architecture: we are now
using rooms more and more as a generic way of modelling new features in
Matrix.  For instance, rooms could be used as a structured way of storing
files (<a href="https://github.com/matrix-org/matrix-doc/pull/3089">MSC3089</a>);
Reputation data
(<a href="https://github.com/matrix-org/matrix-doc/pull/2313">MSC2313</a>) is stored in
rooms; Threads can be stored in rooms
(<a href="https://github.com/matrix-org/matrix-doc/pull/2836">MSC2836</a>); Extensible
Profiles are proposed as rooms too
(<a href="https://github.com/matrix-org/matrix-doc/pull/1769">MSC1769</a>).  As such,
this pushes us towards ensuring rooms are as lightweight as possible in Matrix -
and that things like sync and changing profile scale independently of the
number of rooms you're in.  Spaces effectively gives us a way of creating a
global decentralised filesystem hierarchy on top of Matrix - grouping the
existing rooms of all flavours into an epic multiplayer tree of realtime data.
It's like USENET had a baby with the Web!</p>
<p>For lots more info from the Element perspective, head over to the <a href="https://element.io/blog/p/4ff44807-fe9a-4363-8521-9eab7efd4365/">Element
blog</a>. 
Finally, the point of the beta is to gather feedback and fix bugs - so please
go wild in Element reporting your first impressions and help us make Spaces as
awesome as they deserve to be!</p>
<p>Thanks for flying Matrix into Space;</p>
<p>Matthew &amp; the whole Spaces (and Matrix) team.</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2021&#x2F;05&#x2F;17&#x2F;synapse-1-34-0-released&#x2F;" title="Synapse 1.34.0 released">Synapse 1.34.0 released</a></h1>
            <span>
                17.05.2021 16:45
                —
                <a href="/category/releases">
                    Releases
                </a>
                —
                <a href="/author/dan-callahan">
                    Dan Callahan
                </a>
            </span>
            <br>
            <small>Last update: 17.05.2021 15:13</small>
        </header>
        <div>
            <p>Synapse 1.34.0 is now available, and it's loaded with new features and performance improvements.</p>
<blockquote>
<p><strong>Note:</strong> This release deprecates and replaces the <code>room_invite_state_types</code> configuration option. If you've customized that for your homeserver, please review the <a href="https://github.com/matrix-org/synapse/blob/v1.34.0/UPGRADE.rst#upgrading-to-v1340">Upgrade Notes</a>.</p>
<p>We've also marked the v1 room deletion Admin API as deprecated. Instead of sending a <code>POST</code> to a path ending in <code>/delete</code>, administrators are encourage to instead send an HTTP <code>DELETE</code> to <code>/_synapse/admin/v1/rooms/&lt;room_id&gt;</code>. Thanks to ThibF for implementing this (<a href="https://github.com/matrix-org/synapse/pull/9889">#9889</a>).</p>
</blockquote>
<h2 id="spaces">Spaces</h2>
<p>The highlight of this release is support for Spaces, now that <a href="https://github.com/matrix-org/matrix-doc/pull/1772">MSC1772: Matrix Spaces</a> has merged into the Matrix spec!</p>
<p>Synapse also has support for <a href="https://github.com/matrix-org/matrix-doc/pull/2946">MSC2946: Spaces Summary</a> and <a href="https://github.com/matrix-org/matrix-doc/pull/3083">MSC3083: Restricting room membership based on space membership</a>, but these are off by default as they're still under development. To enable these experimental MSCs, set <code>experimental_features: { spaces_enabled: true }</code> in your homeserver configuration. These <em>are</em> enabled on the matrix.org homeserver, and we encourage you to experiment with Spaces there and let us know in the <a href="https://matrix.to/#/#spaces-feedback:matrix.org">Spaces Feedback Room</a> if you encounter any issues.</p>
<h2 id="memory-and-caching">Memory and Caching</h2>
<p>Memory consumption and caching have been a major focus of the Synapse team this quarter, and we've made significant strides:</p>
<ul>
<li>Synapse has a new <code>gc_min_interval</code> <a href="https://github.com/matrix-org/synapse/blob/v1.34.0/docs/sample_config.yaml#L155-L163">configuration option</a> with reasonable defaults to prevent Python's garbage collector from running too frequently and thrashing when a large homeserver has its collection thresholds set too low.</li>
<li>Synapse will report <a href="https://github.com/matrix-org/synapse/pull/9882">memory allocation stats</a> to Prometheus when using jemalloc.</li>
<li>Synapse will also <a href="https://github.com/matrix-org/synapse/pull/9904">measure Redis cache response times</a> and report those to Prometheus.</li>
<li>For debugging, Synapse can <a href="https://github.com/matrix-org/synapse/pull/9881">optionally track</a> the memory use of each LruCache.</li>
</ul>
<p>We have a few more tricks up our sleeves; to learn more about how we're planning to improve the memory cost of joining large rooms, check out last week's <a href="https://www.youtube.com/watch?v=694VuhmVmfo">Matrix Live</a>.</p>
<h2 id="other-fixes-and-improvements">Other Fixes and Improvements</h2>
<p>We've also landed significant improvements to:</p>
<ul>
<li>Sending events when Redis is available (<a href="https://github.com/matrix-org/synapse/issues/9905">#9905</a>, <a href="https://github.com/matrix-org/synapse/issues/9950">#9950</a>, <a href="https://github.com/matrix-org/synapse/issues/9951">#9951</a>)</li>
<li>Joining large rooms when presence is enabled (<a href="https://github.com/matrix-org/synapse/issues/9910">#9910</a>, <a href="https://github.com/matrix-org/synapse/issues/9916">#9916</a>)</li>
<li>Backfilling history in large rooms (<a href="https://github.com/matrix-org/synapse/issues/9935">#9935</a>)</li>
</ul>
<p>...and fixed bugs that:</p>
<ul>
<li>Prevented cross-account <code>m.room_key_request</code> messages from being delivered (<a href="https://github.com/matrix-org/synapse/issues/9961">#9961</a>, <a href="https://github.com/matrix-org/synapse/issues/9965">#9965</a>)</li>
<li>Incorrectly applied room creation / invitation rate limits to users and app services which <em>should</em> have been exempt (<a href="https://github.com/matrix-org/synapse/issues/9968">#9968</a>)</li>
</ul>
<p>The health check on our Docker images now responds more quickly upon successful startup thanks to improvements by maquis196 (<a href="https://github.com/matrix-org/synapse/pull/9913">#9913</a>), and for especially privacy-conscious homeservers, device names can now be shielded over federation thanks to a contribution by aaronraimist (<a href="https://github.com/matrix-org/synapse/pull/9945">#9945</a>).</p>
<h2 id="new-access-token-format">New Access Token Format</h2>
<p>Inspired by <a href="https://github.blog/2021-04-05-behind-githubs-new-authentication-token-formats/">GitHub's new token format</a>, we've <a href="https://github.com/matrix-org/synapse/pull/5588">restructured Synapse's access token format</a> to follow the pattern:</p>
<pre style="background-color:#1e1e1e;color:#dcdcdc;"><code><span>syt_&lt;UnpaddedBase64MXIDLocalPart&gt;_&lt;20RandomLetters&gt;_&lt;CRC32&gt;
</span></code></pre>
<p>So a token for <code>@example:matrix.org</code> might look like:</p>
<pre style="background-color:#1e1e1e;color:#dcdcdc;"><code><span>syt_ZXhhbXBsZQ_KfJetOcLWEKCvYdKnQLV_0i3W80
</span></code></pre>
<p>Existing tokens remain valid; this is just for new tokens. We hope the new format reduces network overhead while also making it easier identify misplaced tokens in logs and repositories.</p>
<h2 id="everything-else">Everything Else</h2>
<p>See the <a href="https://github.com/matrix-org/synapse/blob/v1.34.0/UPGRADE.rst#upgrading-to-v1340">Upgrading Instructions</a> and <a href="https://github.com/matrix-org/synapse/blob/v1.34.0/CHANGES.md">Release Notes</a> for further information on this release.</p>
<p>Synapse is a Free and Open Source Software project, and we'd like to extend our thanks to everyone who contributed to this release, including <a href="https://github.com/aaronraimist">aaronraimist</a>, <a href="https://github.com/maquis196">maquis196</a>, and <a href="https://github.com/ThibF">ThibF</a>.</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2021&#x2F;05&#x2F;14&#x2F;this-week-in-matrix-2021-05-14&#x2F;" title="This Week in Matrix 2021-05-14">This Week in Matrix 2021-05-14</a></h1>
            <span>
                14.05.2021 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="matrix-live">Matrix Live 🎙</h2>
<p>This week Dan talks to Erik about the state of Synapse generally, and in particular the work Erik has been doing for performance.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/694VuhmVmfo" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>Plus! Bonus content, demos! Half-Shot on the MS Teams bridge work, and Hubert previews <em>MLS over Matrix</em>!</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/xn0fzyimycs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2 id="dept-of-spec-scroll">Dept of Spec 📜</h2>
<p><a href="https://matrix.to/#/@matthew:matrix.org">Matthew</a> reported:</p>
<blockquote>
<p>Some combination of me, Kegan, Bruno and neilalexander have been working on v3 of the CS /sync API. (Today's /sync API in matrix is v2; v1 was the old /events API).  We're not yet at the point of publishing a draft or MSC, but it's coming soon. It's really exciting work which flips Matrix around so that sync scales independently of the number of rooms you're in - and it's at last possible to write rich clients which only ever sync the bare minimum data needed to work: i.e. lazy loading eeeeeeeeverything.  Watch this space :)</p>
</blockquote>
<p><a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> told us:</p>
<blockquote>
<p>Here's your weekly spec update! The heart of Matrix is the specification - and this is modified by Matrix Spec Change (MSC) proposals. Learn more about how the process works at https://spec.matrix.org/unstable/proposals.</p>
<h4 id="msc-status">MSC Status</h4>
<p><strong>New MSCs:</strong></p>
<ul>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/3192">MSC3192: Batch state endpoint</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/3189">MSC3189: Per-room/per-space profile data</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/3184">MS3184: Challenges Messages</a></p>
</li>
</ul>
<p><strong>MSCs with proposed Final Comment Period:</strong></p>
<ul>
<li><em>No MSCs entered proposed FCP state this week.</em></li>
</ul>
<p><strong>MSCs in Final Comment Period:</strong></p>
<ul>
<li><em>No MSCs are in FCP.</em></li>
</ul>
<p><strong>Merged MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/3122">MSC3122: Deprecate starting verifications without requesting first</a></li>
</ul>
<h4 id="merged-spec-prs">Merged Spec PRs</h4>
<p>Here are all the actual MSC-related changes made to the raw Matrix spec this week!</p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/3179">Clarify that implementations can use stable prefixes once an MSC proposal has merged</a></li>
</ul>
<h4 id="spec-updates">Spec Updates</h4>
<p>There's been activity from the Spec Core Team on a number of different MSCs, such as <a href="https://github.com/matrix-org/matrix-doc/pull/3189">MSC3189</a> (per-room/space profile data). Additionally a <a href="https://github.com/matrix-org/matrix-doc/pull/3168">spec PR</a> for Matrix URI schemes has been getting feedback and is moving forward at a quick pace! There was also some feedback from the team on <a href="https://github.com/matrix-org/matrix-doc/pull/2448">MSC2448</a> (blurhashes) which I'll get around to answering shortly 🙂.</p>
<p>Otherwise I think this week was a bit implementation-heavy for the team (the Spec Core Team is a task in addition to our full-time jobs). Hopefully next week will grant us more of a breather.</p>
</blockquote>
<p><img src="/blog/img/2021-05-14-wdmML-stacked_area_chart.png" alt="2021-05-14-wdmML-stacked_area_chart.png" /></p>
<h2 id="dept-of-servers-europea">Dept of Servers 🏢</h2>
<h3 id="synapse">Synapse</h3>
<p><a href="https://matrix.to/#/@callahad:matrix.org">callahad</a> announced:</p>
<blockquote>
<p>Hello TWiMmers! The bulk of our update is in Matrix Live today, so go check out the video above ☝️ to hear about how we're reducing the amount of memory it takes to join large rooms, and why joins take so much memory in the first place.</p>
<p>Otherwise, we're mainly getting ready for the public debut of Spaces as a beta feature, but more on that next week... 😉</p>
<p>Oh, and before we go: please make sure your Synapse is up to date! We <a href="https://matrix.org/blog/2021/05/11/synapse-1-33-2-released">released 1.33.2</a> on Tuesday, which contains a low severity security fix.</p>
</blockquote>
<h2 id="homeserver-deployment-inbox-tray">Homeserver Deployment 📥️</h2>
<h3 id="kubernetes">Kubernetes</h3>
<p><a href="https://matrix.to/#/@ace:kittenface.studio">Ananace</a> offered:</p>
<blockquote>
<p>Another installation of the regularly scheduled Kubernetes <a href="https://gitlab.com/ananace/charts">Helm Chart</a> updates (and another bump of the deprecated <a href="https://github.com/ananace/matrix-synapse">Synapse image</a>). Now up to Synapse 1.33.2 and Element Web 1.7.27.</p>
</blockquote>
<h2 id="dept-of-bridges-bridge-at-night">Dept of Bridges 🌉</h2>
<h3 id="matrix-puppeteer-line">matrix-puppeteer-line</h3>
<p><a href="https://matrix.to/#/@fair:miscworks.net">Fair</a> told us:</p>
<blockquote>
<p><a href="https://src.miscworks.net/fair/matrix-puppeteer-line">matrix-puppeteer-line</a>: A bridge for LINE Messenger based on running LINE's Chrome extension in Puppeteer.</p>
<p>This week was spent on stability improvements &amp; bug fixes.</p>
<p><em>Calling for testers!</em>
The bridge is at a point where it's mostly usable, but it still has quite a few blindspots. If anyone is willing to try it out &amp; report issues, it would be a great help!</p>
<p>Discussion: <a href="https://matrix.to/#/#matrix-puppeteer-line:miscworks.net">Matrix-LINE Puppeteer bridge</a>
Issue page: https://src.miscworks.net/fair/matrix-puppeteer-line/issues</p>
<p>Shout-outs to <a href="https://matrix.to/#/@lecris:lecris.me">@lecris:lecris.me</a> for being an early tester &amp; having given a lot of useful feedback 🙂</p>
</blockquote>
<h3 id="gitter">Gitter</h3>
<p><a href="https://matrix.to/#/@madlittlemods:matrix.org">Eric Eastwood</a> reported:</p>
<blockquote>
<p>Last time, we updated you on starting DM conversations with Gitter users from Matrix. Now we have the other side of this complete! From Gitter, you can now start a one to one conversation with someone you see from Matrix 😀</p>
<p>Just hover over their avatar to bring up the user popover, then press the &quot;Chat privately&quot; button. 🗣</p>
</blockquote>
<p><img src="/blog/img/2021-05-14-VYQjI-chrome_2021-05-12_18-38-44.png" alt="2021-05-14-VYQjI-chrome_2021-05-12_18-38-44.png" /></p>
<h3 id="matrix-appservice-irc-0-26-0">matrix-appservice-irc 0.26.0</h3>
<p><a href="https://matrix.to/#/@Half-Shot:half-shot.uk">Half-Shot</a> reported:</p>
<blockquote>
<p>Goooooooood afternoon folks and happy Friday! This week we're announcing the <a href="https://github.com/matrix-org/matrix-appservice-irc/releases/tag/0.26.0">0.26.0</a> release of the matrix-appservice-irc bridge which contains precious goodies:</p>
<ul>
<li>
<p>You can now <strong>disable</strong> the kick behaviour of the bridge on Matrix users if you are running a personal bridge, so losing your IRC connection no longer results in a kick.</p>
</li>
<li>
<p>You can now remove bridges from rooms by using the admin room, so no need to use the provisioning API or modify the DB.</p>
</li>
<li>
<p>We've added a new feature to allow you to specify bridge options on a per room basis using room state. At the moment you can modify the limits of the automatic pastebin system but more features like reply formats are to come!</p>
</li>
</ul>
<p>As always please come tell us about it in <a href="https://matrix.to/#/#irc:matrix.org">#irc:matrix.org</a> and make sure to check out the <a href="https://matrix-org.github.io/matrix-appservice-irc">new docs</a> if you get a bit stuck.</p>
</blockquote>
<h2 id="dept-of-clients-iphone">Dept of Clients 📱</h2>
<h3 id="hydrogen">Hydrogen</h3>
<p>A minimal Matrix chat client, focused on performance, offline functionality, and broad browser support. https://github.com/vector-im/hydrogen-web/</p>
<p><a href="https://matrix.to/#/@bwindels:matrix.org">Bruno</a> said:</p>
<blockquote>
<p>Hydrogen can now leave rooms and forget archived rooms. URLs are now also clickable in the timeline. Get the full details in the <a href="https://github.com/vector-im/hydrogen-web/releases/tag/v0.1.49">release notes</a>!</p>
</blockquote>
<p><img src="/blog/img/2021-05-14-iIgrd-image.png" alt="2021-05-14-iIgrd-image.png" /></p>
<h3 id="element-clients">Element Clients</h3>
<p>Updates from the teams</p>
<p><strong>Web</strong></p>
<ul>
<li>Element Web 1.7.28 is up on staging, targeting Monday for release.
<ul>
<li>New spaces Beta (new way of grouping rooms and people)</li>
<li>Added support for slash commands working in edits</li>
</ul>
</li>
<li>On develop:
<ul>
<li>Voice messages are nearing completion - enable the labs flag and give it a go :)</li>
<li>Performance improvements to app startup time. Let us know if you run into any issues!</li>
</ul>
</li>
</ul>
<p><strong>iOS</strong></p>
<ul>
<li><a href="https://github.com/vector-im/element-ios/releases">1.3.7</a> is available on TestFlight. It should be on the App Store on Monday. Spaces are not yet available on Element-iOS but the app offers minimal support. The release contains a fix for background crashed due to PushKit</li>
<li>At the platform level, we are still improving stability and performance:
<ul>
<li>Decryption operations to be moved outside the main thread</li>
<li>More robust on initial sync</li>
<li>etc</li>
</ul>
</li>
</ul>
<p><strong>Android</strong></p>
<ul>
<li>1.1.7 is in open testing via playstore beta channel, Release candidate for Monday. Contains support for spaces beta, several improvements on attachment (video, compression…), as well as a bunch of bug fixes. All details here <a href="https://github.com/vector-im/element-android/releases/tag/v1.1.7">https://github.com/vector-im/element-android/releases/tag/v1.1.7</a></li>
</ul>
<p><strong>Delight</strong></p>
<ul>
<li>“Spaces are coming”  (<em>I had heard something about that - BP</em>)</li>
</ul>
<h2 id="dept-of-sdks-and-frameworks">Dept of SDKs and Frameworks 🧰</h2>
<h3 id="matrix-spring-boot-sdk-0-5-0">matrix-spring-boot-sdk 0.5.0</h3>
<p><a href="https://matrix.to/#/@benedict:imbitbu.de">Benedict</a> announced:</p>
<blockquote>
<p><a href="https://gitlab.com/benkuly/matrix-spring-boot-sdk">matrix-spring-boot-sdk</a> 0.5.0 is released and uses <a href="https://gitlab.com/benkuly/trixnity">Trixnity</a> now.</p>
</blockquote>
<h2 id="dept-of-services-rocket">Dept of Services 🚀</h2>
<h3 id="gomatrixhosting-v0-4-6-released">GoMatrixHosting v0.4.6 released!</h3>
<p><a href="https://matrix.to/#/@michael:perthchat.org">Michael</a> offered:</p>
<blockquote>
<p>https://github.com/spantaleev/matrix-docker-ansible-deploy/pull/1046/files</p>
<p>Just had a new release, GoMatrixHosting v0.4.6</p>
<pre style="background-color:#1e1e1e;color:#dcdcdc;"><code><span>
</span><span>* Add database purge section.
</span><span>
</span><span>* Add markdown copy of User manual.
</span><span>* Tweak compress state find rooms timeout.
</span><span>
</span><span>* Update compile AWX instructions for custom branding and radius fix.
</span></code></pre>
<p>Visit <a href="https://matrix.to/#/#general:gomatrixhosting.com">#general:gomatrixhosting.com</a> to join in the discussion.</p>
</blockquote>
<p><a href="https://www.gomatrixhosting.com/">GoMatrixHosting</a> offer a great way to get your own homeserver without needing to run it yourself. Check them out!</p>
<h2 id="matrix-in-the-news-newspaper">Matrix in the News 📰</h2>
<h3 id="matrix-was-featured-on-fedoramagazine-org">Matrix was featured on fedoramagazine.org</h3>
<p><a href="https://matrix.to/#/@farribeiro:matrix.org">farribeiro</a> shared:</p>
<blockquote>
<p>Fedora promoting the matrix https://fedoramagazine.org/access-freenode-using-matrix-clients/</p>
</blockquote>
<h2 id="final-thoughts-thought-balloon">Final Thoughts 💭</h2>
<p>From <em>Dept of Humour in <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> 😅</em>:</p>
<ul>
<li><a href="https://matrix.to/#/@airportline:matrix.org">R1 Airport</a>: Maybe I want to see if I can build some type of bridge between Matrix and CUPS.</li>
<li><a href="https://matrix.to/#/@hifi:vi.fi">hifi</a>:  the sad part is that would probably be more reliable than just printing directly</li>
</ul>
<h2 id="dept-of-ping-table-tennis-paddle-and-ball">Dept of Ping 🏓</h2>
<p>Here we reveal, rank, and applaud the homeservers with the lowest ping, as measured by <a href="https://github.com/maubot/echo">pingbot</a>, a <a href="https://github.com/maubot/maubot">maubot</a> that you can host on your own server.</p>
<h3 id="ping-maunium-net"><a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a></h3>
<p>Join <a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">neko.dev</td><td style="text-align: center">422</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">xirion.net</td><td style="text-align: center">471</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">matrix.kalleeen.fi</td><td style="text-align: center">507</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">t2bot.io</td><td style="text-align: center">516</td></tr>
<tr><td style="text-align: center">5</td><td style="text-align: center">alra.uk</td><td style="text-align: center">556</td></tr>
<tr><td style="text-align: center">6</td><td style="text-align: center">thomcat.rocks</td><td style="text-align: center">767</td></tr>
<tr><td style="text-align: center">7</td><td style="text-align: center">matrix.vgorcum.com</td><td style="text-align: center">800.5</td></tr>
<tr><td style="text-align: center">8</td><td style="text-align: center">matrix.2kgwf.fi</td><td style="text-align: center">817</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">nordgedanken.dev</td><td style="text-align: center">828.5</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">trolla.us</td><td style="text-align: center">878</td></tr>
</tbody></table>
<h3 id="ping-no-synapse-maunium-net"><a href="https://matrix.to/#/#ping-no-synapse:maunium.net">#ping-no-synapse:maunium.net</a></h3>
<p>Join <a href="https://matrix.to/#/#ping-no-synapse:maunium.net">#ping-no-synapse:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">dendrite01.fiksel.info</td><td style="text-align: center">810.5</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">dendrite.s3cr3t.me</td><td style="text-align: center">816</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">lankolol.de</td><td style="text-align: center">931</td></tr>
</tbody></table>
<h2 id="that-s-all-i-know-checkered-flag">That's all I know 🏁</h2>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2021&#x2F;05&#x2F;11&#x2F;synapse-1-33-2-released&#x2F;" title="Synapse 1.33.2 released">Synapse 1.33.2 released</a></h1>
            <span>
                11.05.2021 23:53
                —
                <a href="/category/releases">
                    Releases
                </a>
                —
                <a href="/author/dan-callahan">
                    Dan Callahan
                </a>
            </span>
            
        </header>
        <div>
            <p><a href="https://github.com/matrix-org/synapse/releases/tag/v1.33.2">Synapse 1.33.2</a> is now available.</p>
<p>This release fixes a denial of service issue (<a href="https://github.com/matrix-org/synapse/security/advisories/GHSA-x345-32rc-8h85">CVE-2021-29471</a>) where evaluating specially crafted push rules could lead to excessive CPU load. Server administrators are encouraged to upgrade.</p>
<p>To learn more about Synapse 1.33, see last week's <a href="/blog/2021/05/05/synapse-1-33-0-released">release announcement</a>.</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2021&#x2F;05&#x2F;07&#x2F;this-week-in-matrix-2021-05-07&#x2F;" title="This Week in Matrix 2021-05-07">This Week in Matrix 2021-05-07</a></h1>
            <span>
                07.05.2021 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="matrix-live">Matrix Live 🎙</h2>
<iframe width="560" height="315" src="https://www.youtube.com/embed/zw5CWCyIAMg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2 id="dept-of-status-of-matrix-face-with-th">Dept of <em>Status of Matrix</em> 🌡️</h2>
<h3 id="matrix-server-stats-bot">Matrix Server_Stats Bot</h3>
<p><a href="https://matrix.to/#/@mtrnord:nordgedanken.dev">MTRNord</a> announced:</p>
<blockquote>
<p>The first iteration of visually representing the data gathered by Server Stats Discoverer (traveler bot)  is now publicly available at https://serverstats.nordgedanken.dev/</p>
<p>It for now is only a graph of room relations but in the future is supposed to be extended for a server based graph as well as a Table to search your room within.</p>
<p>Be aware that the page is best viewed and used on desktop. Clicking a Room Node will open a new tab with the matrix.to link. If this fails this might be because of no canonical alias being available.</p>
<p>For the developers the data can be taken from https://serverstats.nordgedanken.dev/relations  The format currently is only available in the d3js format but in the future that API also will be extended for different usecases.</p>
<p>For any feedback like accessibility issues or other issues please reach out to me either via DM or in #server_stats:nordgedanken.dev </p>
</blockquote>
<p><img src="/blog/img/2021-05-07-jh7X9-image.png" alt="2021-05-07-jh7X9-image.png" /></p>
<h2 id="dept-of-spec-scroll">Dept of Spec 📜</h2>
<h3 id="spec">Spec</h3>
<p><a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> said:</p>
<blockquote>
<p>Here's your weekly spec update! The heart of Matrix is the specification - and this is modified by Matrix Spec Change (MSC) proposals. Learn more about how the process works at https://spec.matrix.org/unstable/proposals.</p>
<h4 id="msc-status">MSC Status</h4>
<p><strong>New MSCs:</strong></p>
<ul>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/3174">MSC3174: An error code for spam rejections</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/3173">[WIP] MSC3173: Expose stripped state events to any potential joiner</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/3160">MSC3160: Message timezone markup</a></p>
</li>
</ul>
<p><strong>MSCs with proposed Final Comment Period:</strong></p>
<ul>
<li><em>No MSCs entered proposed FCP state this week.</em></li>
</ul>
<p><strong>MSCs in Final Comment Period:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/3122">MSC3122: Deprecate starting verifications without requesting first</a> (merge)</li>
</ul>
<p><strong>Merged MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/1772">MSC1772: Matrix spaces</a></li>
</ul>
<p><strong>Closed MSCs:</strong></p>
<ul>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/3161">MSC3161: Printable tickets</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/3067">MSC3067: Prevent/remove legacy groups from being in the spec</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/issues/1214">Related Groups (i.e. flair)</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/issues/971">Add groups stuff to spec</a></p>
</li>
</ul>
<h4 id="merged-spec-prs">Merged Spec PRs</h4>
<p>Here are all the actual MSC-related changes to the raw Matrix spec that landed this week!</p>
<ul>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/3177">#3177 Remove group identifiers</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/3170">#3170 Remove v1 identity service API</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/3169">#3169 Downgrade identity server failure to FAIL_PROMPT instead of FAIL_ERROR</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/3167">#3167 Specify that email handling converts to lowercase first</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/3166">#3166 Spec device_id on whoami</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/3163">#3163 Describe social-sign-on (multiple SSO providers)</a></p>
</li>
</ul>
<h4 id="spec-updates">Spec Updates</h4>
<p>A reminder that <a href="https://matrix.to/#/#sct-office:matrix.org">#sct-office:matrix.org</a> is available to communicate directly with the Spec Core Team. A clarification from the last edition of TWIM is that this room is intended to be a low-traffic room solely for asking about the status of a/your MSC, rather than the Spec process or anything else. There is however <a href="https://matrix.to/#/#matrix-spec-process:matrix.org">#matrix-spec-process:matrix.org</a> for discussion of the Spec process, and <a href="https://matrix.to/#/#matrix-spec:matrix.org">#matrix-spec:matrix.org</a> for discussion of the Matrix spec and MSCs in general.</p>
<p>Otherwise the Spec Core Team has been doing a little bit of house-keeping. For those that have been living under a rock, <a href="https://github.com/matrix-org/matrix-doc/pull/1772">Spaces</a> is an upcoming feature intended to replace the old Groups/Community stuff with a much-improved implementation. And one that will actually make it into the spec! We've closed all old groups-related MSCs as they are now obsolete.</p>
<p>Additionally we've been giving some feedback on <a href="https://github.com/matrix-org/matrix-doc/pull/2946">MSC2946</a> (Spaces Summary) which is another part of the Spaces puzzle (and is still a blocker for the release of the feature), as well as <a href="https://github.com/matrix-org/matrix-doc/pull/3079">MSC3079</a> (Low Bandwidth CS API) which allows Matrix to operate on resource constrained devices and networks. Yours truly has also been making some PRs (<a href="https://github.com/matrix-org/matrix-doc/pull/3180">one</a>, <a href="https://github.com/matrix-org/matrix-doc/pull/3179">two</a>) to help clarify the Spec process.</p>
</blockquote>
<p><img src="/blog/img/2021-05-07-tEcUz-stacked_area_chart.png" alt="2021-05-07-tEcUz-stacked_area_chart.png" /></p>
<h2 id="dept-of-p2p-busts-in-silhouette">Dept of P2P 👥</h2>
<h3 id="pinecone">Pinecone</h3>
<p><a href="https://matrix.to/#/@neilalexander:matrix.org">Neil Alexander</a> reported:</p>
<blockquote>
<p>Yesterday we announced the source code release of Pinecone, our new peer-to-peer overlay network, which we are developing under the P2P Matrix banner. </p>
<p>If you missed it, we wrote a <a href="https://matrix.org/blog/2021/05/06/introducing-the-pinecone-overlay-network">blog post</a> that explains some of the juicy details. The source code is available on <a href="https://github.com/matrix-org/pinecone">GitHub</a>.</p>
<p>Join us in <a href="https://matrix.to/#/#p2p:matrix.org">#p2p:matrix.org</a> for the latest P2P developments!</p>
</blockquote>
<h2 id="dept-of-servers-europea">Dept of Servers 🏢</h2>
<h3 id="synapse">Synapse</h3>
<p>Synapse is a popular homeserver written in Python.</p>
<p><a href="https://matrix.to/#/@callahad:matrix.org">callahad</a> offered:</p>
<blockquote>
<p>It's a release! <a href="https://matrix.org/blog/2021/05/05/synapse-1-33-0-released">Synapse 1.33 is out</a>, and we plan to release a security patch for it on Tuesday, May 11th. This follows our <a href="https://github.com/matrix-org/synapse/discussions/9914">previous discussion</a> where we committed to trying to decouple routine security updates from our regular feature releases.</p>
<p>Read the release notes for details, but the big news is that we finally have experimental support for moving presence off of the main process. We're still testing it, but we hope it will allow instances that need presence to more easily scale out.</p>
<p>In <a href="https://matrix.org/blog/2021/04/30/this-week-in-matrix-2021-04-30#synapse">last week's TWiM</a> we shared a graph of Synapse's memory use when joining Matrix HQ for the first time. In particular, we saw a spike to 1.4 GB before settling at 800 MB.</p>
<p>In the week since producing that graph, we've managed to nearly eliminate the spike, halving it to 760 MB. After backfilling history, the room settles at around 650 MB:</p>
</blockquote>
<p><img src="/blog/img/2021-05-07-8eyfi-Screenshotfrom2021-05-0512-10-50.png" alt="2021-05-07-8eyfi-Screenshotfrom2021-05-0512-10-50.png" /></p>
<blockquote>
<p>These changes are still a work in progress, but we hope to get them merged into Synapse in time for the 1.35 release on June 1st.</p>
</blockquote>
<p>Additionally, <a href="https://matrix.to/#/@deepbluev7:neko.dev">Nico (@deepbluev7:neko.dev)</a> has a request:</p>
<blockquote>
<p>I wrote a patch for synapse, that reduces the size of almost empty incremental syncs by 50% (30% if you include http headers). If you are a client developer, you may want to test your client against a synapse with that patch applied, since it broke quite a few clients, that relied on synapse sending empty fields. While synapse sends empty fields, other server implementations, like conduit, don't, so fixing any issues here will help with portability across different server implementations too. With a bit of hope this patch can actually be applied in a few weeks to the official synapse, but it was backed out from the next RC because of the breakage. So if you can, please test your client, which you are developing, against the following PR and fix any issues you experience from it: https://github.com/matrix-org/synapse/pull/9919</p>
<p>Thank you!</p>
</blockquote>
<h2 id="homeserver-deployment-inbox-tray">Homeserver Deployment 📥️</h2>
<h3 id="kubernetes">Kubernetes</h3>
<p><a href="https://matrix.to/#/@ace:kittenface.studio">Ananace</a> said:</p>
<blockquote>
<p>The regular updates for my <a href="https://gitlab.com/ananace/charts">Helm charts</a> (and still deprecated <a href="https://github.com/ananace/matrix-synapse">Synapse image</a>) have been pushed, for Synapse 1.33.0/1 and the Matrix Media Repo 1.2.8. (technically last week, but it was after friday, so I'm throwing it in again)</p>
</blockquote>
<h2 id="dept-of-bridges-bridge-at-night">Dept of Bridges 🌉</h2>
<h3 id="mautrix-imessage-on-ios">mautrix-imessage on iOS</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> announced:</p>
<blockquote>
<p>The initial alpha version of <a href="https://gitlab.com/beeper/brooklyn">Brooklyn</a> is now public, which means you can now (try to) use <a href="https://github.com/tulir/mautrix-imessage">mautrix-imessage</a> on a jailbroken iOS device for iMessage bridging. Setup instructions are on docs.mau.fi: https://docs.mau.fi/bridges/go/imessage/ios/setup.html</p>
<p>Brooklyn was developed by ethanrdoesmc. It's an app/tweak that handles communicating with iMessage and runs mautrix-imessage as a subprocess for the Matrix side. The initial alpha supports basic text and media message bridging. Sending and receiving tapbacks, replies, read receipts and typing notifications will also be supported in the future.</p>
<p>Feedback is welcome in the mautrix-imessage room: <a href="https://matrix.to/#/#imessage:maunium.net">#imessage:maunium.net</a></p>
</blockquote>
<h3 id="heisenbridge">Heisenbridge</h3>
<p><a href="https://matrix.to/#/@hifi:vi.fi">hifi</a> told us:</p>
<blockquote>
<p><a href="https://github.com/hifi/heisenbridge/">Heisenbridge</a> the bouncer style Matrix IRC bridge has seen numerous updates in the past week:</p>
<ul>
<li>
<p>Identd implementation to get verified usernames on IRC</p>
</li>
<li>
<p>TLS support for IRC connections</p>
</li>
<li>
<p>IRC excess flood prevention with a buffer</p>
</li>
<li>
<p>Proper long message splitting from Matrix to IRC</p>
</li>
<li>
<p>Retry support for Matrix requests to work around homeserver downtime/restarts</p>
</li>
</ul>
<p>Minor fixes to ghosting issues and some other stuff. This will be the last big update for a while as it has mostly stabilized enough for daily use.</p>
<p>More testers are still welcome to get the remaining issues ironed out so if you need to connect to unbridged and unplumbed networks and run your own homeserver it would be an excellent time to try it out.</p>
<p>Thanks!</p>
</blockquote>
<h3 id="matrix-pstn-bridge">matrix-pstn-bridge</h3>
<p><a href="https://matrix.to/#/@kb1rd:kb1rd.net">KB1RD</a> reported:</p>
<blockquote>
<p>Experimental support for call bridging has landed. Now you can call phone numbers right from Matrix, with partial support for MSC2746. A few things to keep in mind:</p>
<ul>
<li>
<p>The bridge is still in alpha -- I wouldn't trust it for anything secure at the moment. I would love to hear feedback from tests, though!</p>
</li>
<li>
<p><strong>If you tried any of the earlier versions,</strong> you will need to re-run the <code>link</code> command since I made some breaking changes. Sorry.</p>
</li>
</ul>
<p>Just a reminder, the GH repo is <a href="https://github.com/KB1RD/matrix-pstn-bridge">here</a> and the Matrix room is <a href="https://matrix.to/#/#matrix-pstn-bridge:kb1rd.net">#matrix-pstn-bridge:kb1rd.net</a> . There's also a general VoIP bridging room at <a href="https://matrix.to/#/#matrix-voip-bridging:kb1rd.net">#matrix-voip-bridging:kb1rd.net</a>.</p>
</blockquote>
<h3 id="matrix-appservice-irc-has-a-new-release-candidate">matrix-appservice-irc has a new release candidate</h3>
<p><a href="https://matrix.to/#/@christianp:vector.modular.im">Christian</a> reported:</p>
<blockquote>
<p>The IRC bridge matrix-appservice-irc has a new release candidate. The upcoming version 0.26.0 will include many features and bug fixes. Here are three highlights:</p>
<ul>
<li>
<p>Allow third-party bridged users to change their nickname with the self-serve command <code>!irc nick anothername</code> (thanks vranki)</p>
</li>
<li>
<p>Allow room moderators and bridge admins to unlink rooms using the <code>!unlink</code> command</p>
</li>
<li>
<p>Add support for specifying the paste bin limit in room state with the <code>org.matrix.appservice-irc.config</code> event type.</p>
</li>
</ul>
<p>Please test it and flag any issues you have upgrading:</p>
<p>https://github.com/matrix-org/matrix-appservice-irc/releases/tag/v0.26.0-rc1</p>
</blockquote>
<h2 id="dept-of-clients-iphone">Dept of Clients 📱</h2>
<h3 id="fluffychat">FluffyChat</h3>
<p><a href="https://fluffychat.im">FluffyChat</a> is the cutest cross-platform matrix client. It is available for Android, iOS, Web and Desktop.</p>
<p><a href="https://matrix.to/#/@krille:janian.de">krille</a> announced:</p>
<blockquote>
<p>FluffyChat 0.30.0 has been released</p>
<p>In this release we have mostly focused on bugfixing and stability. We have switched to the new Flutter 2 framework and have done a lot of refactoring under the hood. The annoying freezing bug should now be fixed. Voice messages now have a new backend which should improve the sound quality and stability. There is now a more professional UI for editing aliases of a room. Users can now see a list of all aliases, add new aliases, delete them and mark one alias as the canonical (or main) alias. Some minor design changes and design fixes should improve the overall UX of the app exspecially on tablets.</p>
<p>Version 0.30.0 will be the first version with arm64 support. You can download binaries from the CI and we will try to publish it on Flathub. Together with the new Linux Desktop Notifications feature, this might be interesting for the Librem 5 or the PinePhone. Sadly I don't own one of these very interesting devices. If you have one, I would very like to see some screenshots of it! :-)</p>
</blockquote>
<p>Additionally, <a href="https://matrix.to/#/@shiny:shine.horse">Shine</a> told us:</p>
<blockquote>
<p>Fluffychat update: Native Fluffychat Linux build now works well on aarch64 devices!</p>
<p>If you want to try the binary from CI, keep in mind that GDK_GL=gles needs to be set to force it to use the OpenGL ES. Flatpak build on Flathub already has it set up and works out of the box.</p>
<p>Some distributions can have issues with input fields and virtual keyboard, making it look like the input is set up as right-to-left. To my understanding, it's an issue of certain older GTK versions with Flutter.</p>
</blockquote>
<p><img src="/blog/img/2021-05-07-El6cc-fluffychat_pinetab.jpg" alt="2021-05-07-El6cc-fluffychat_pinetab.jpg" /></p>
<p>Nice sticker</p>
<h3 id="nheko">Nheko</h3>
<p><a href="https://github.com/Nheko-Reborn/nheko">Nheko</a> is a desktop client using Qt, Boost.Asio and C++17. It supports E2EE and intends to be full featured and nice to look at</p>
<p><a href="https://matrix.to/#/@deepbluev7:neko.dev">Nico (@deepbluev7:neko.dev)</a> told us:</p>
<blockquote>
<p>Nheko now should stop showing you actions, that you can't do anyway, because that is confusing and useless. This includes the following and more:</p>
<ul>
<li>
<p>Invite members, if you have no invite permissions.</p>
</li>
<li>
<p>Delete messages, if you don't have redaction permissions.</p>
</li>
<li>
<p>Send a message, reply to one, edit one and more, if you can't even send the message!</p>
</li>
</ul>
<p>Tell us, if we missed something or we removed an action, that you actually have permissions to do!</p>
<p>Apart from that we also started working on some of the features for the next major release. That release will mostly focus on bringing End-to-End-Encryption out of beta. As a first step, Nheko now shows if a message was sent from a verified device or not. This has 3 different trust levels:</p>
<ul>
<li>
<p><strong>green</strong>: The message is from a device you verified. Either by device verification or cross signing.</p>
</li>
<li>
<p><strong>greyish</strong>: The message is from an unverified device, but that user has never rotated their master signing key and has cross-signed that device. As such we can probably assume, that this is a trusted device. For extra safety, you should of course verify that user, but if it is just an internet personality you will never meet, you trust you are speaking to the right party anyway and can't really verify them anyway, since you don't know how they look either! We don't want to prompt users with red warning signs in such cases, which will lead to them not doing verification properly, because they just want the red marks to go away. Many people are also not interested in the MITM aspects of E2EE. We think this is an okay tradeoff, but any feedback is welcome of course! This is basically Trust On First Use (TOFU), if you heard that term before.</p>
</li>
<li>
<p><strong>red</strong>: The device is not verified. This can have a few reasons. Either we verified the user, but they didn't verify that device. Or we didn't verify that user and they have changed their master key at some point. Or the signatures for that device are wrong, etc. If you see such a device, you should probably investigate, why that is the case.</p>
</li>
</ul>
<p>These are some biggish changes, so if you experience issues, tell us in <a href="https://matrix.to/#/#nheko:nheko.im">#nheko:nheko.im</a>!</p>
</blockquote>
<h3 id="fractal">Fractal</h3>
<p><a href="https://matrix.to/#/@afranke:matrix.org">Alexandre Franke</a> reported:</p>
<blockquote>
<p>Hot on the heels of <a href="https://matrix.org/blog/2021/04/23/this-week-in-matrix-2021-04-23#fractal">our previous announcement</a> and building on the fresh foundations of our rewrite, Julian got busy on room history. It now appears when a room is selected in the sidebar! To make that selection easier, room filtering in the sidebar <a href="https://gitlab.gnome.org/GNOME/fractal/-/merge_requests/726">has been implemented by new contributor Veli Tasali</a>. Once a room is selected and displayed, messages can even be sent to them! Sounds like we’re done and the client is ready… SHIP IT! Not really though, as it’s still very basic, but at least <a href="https://gitlab.gnome.org/GNOME/fractal/-/issues/720">the bare minimum to make it actually usable is now here</a>.</p>
</blockquote>
<iframe width="560" height="315" src="https://www.youtube.com/embed/lCQZoKDzsAI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<blockquote>
<p>As a nice bonus, we do <a href="https://gitlab.gnome.org/GNOME/fractal/-/merge_requests/730">lazy loading</a>, and <a href="https://gitlab.gnome.org/GNOME/fractal/-/merge_requests/737">rooms are now added to the sidebar in batch</a> on startup to ensure good performances. The sidebar also got some refinements from Kévin (<a href="https://gitlab.gnome.org/GNOME/fractal/-/merge_requests/732">!732</a> and <a href="https://gitlab.gnome.org/GNOME/fractal/-/merge_requests/736">!736</a>).</p>
<p>Finally Veli also helped us get <a href="https://gitlab.gnome.org/GNOME/fractal/-/merge_requests/722">the docs for fractal-next published</a>, lowering the barrier to entry for other new contributors. They are available at https://gnome.pages.gitlab.gnome.org/fractal/fractal/.</p>
<p>For further details, Julian published <a href="https://blogs.gnome.org/jsparber/2021/05/07/the-internals-of-fractal-next/">a technical overview of the internals of the new codebase</a>.</p>
</blockquote>
<h3 id="element-clients">Element Clients</h3>
<p>Updates provided by the teams</p>
<p><strong>Delight</strong></p>
<ul>
<li>We’ve been shepherding <a href="https://github.com/matrix-org/matrix-doc/pull/1772">MSC1772</a> into the spec which has now exited final comment period and merged!</li>
<li>Alongside, we’ve also been iterating on the Spaces implementations all round in preparation for wider testing soon, which has included
<ul>
<li>Iterating on filtering on Web to filter all Spaces</li>
<li>Iterating on logic for showing notification badges to avoid single DMs spawning multiple badges</li>
<li>Iterating on ‘Home’ to instead behave more like ‘All’</li>
<li>Iterating on implementations across the web, iOS, Android &amp; Synapse to use stable prefixes</li>
<li>&amp; lots of other small tweaks</li>
</ul>
</li>
</ul>
<p><strong>Web</strong></p>
<ul>
<li>Element Web 1.7.27-rc.1 on staging
<ul>
<li>Added localisation support to the desktop layer (for menu items etc.)</li>
<li>Fixed encrypted search indexing on Windows</li>
<li>Hardware media keys are now ignored, so they'll go to other apps as intended</li>
</ul>
</li>
<li>On develop
<ul>
<li>Calling architecture reworked to support multiple streams, please report any issues</li>
</ul>
</li>
<li>1.7.27 release planned for Monday </li>
</ul>
<p><strong>iOS</strong></p>
<ul>
<li><a href="https://github.com/vector-im/element-ios/releases">1.3.6</a> is in review for the App Store. We have polished and fixed several issues on 1:1 and group calls. The release contains fixes for several bugs and crashes.</li>
</ul>
<p>Very excited about the Spaces progress! Looks like everything that I found in recent testing is fixed!</p>
<h2 id="dept-of-sdks-and-frameworks">Dept of SDKs and Frameworks 🧰</h2>
<h3 id="trixnity-released">Trixnity released</h3>
<p><a href="https://matrix.to/#/@benedict:imbitbu.de">Benedict</a> announced:</p>
<blockquote>
<p><a href="https://github.com/benkuly/trixnity">Trixnity</a> finally got released this week. It's a Kotlin multiplatform Matrix SDK for high level access to Client-Server API and Appservice API. It has all (and some more) features from <a href="https://github.com/benkuly/matrix-spring-boot-sdk">matrix-spring-boot-sdk</a> which is based on Trixnity now (an update for that will be released soon). Trixnity can currently be used on JVM and JS as platform (Native is not working yet). It is also very customizable by adding custom room and state event types.</p>
</blockquote>
<h2 id="dept-of-interesting-projects">Dept of Interesting Projects 🛰️</h2>
<h3 id="cactus-comments-cactus">Cactus Comments 🌵</h3>
<p><a href="https://matrix.to/#/@asbjorn:olli.ng">Asbjørn</a> offered:</p>
<blockquote>
<p>Cactus Comments is a federated comment system for the open web built on Matrix.</p>
<p>We released the Cactus Comments Web Client v0.9.0!</p>
<p>This version introduces a display name field for guest users, so guest users finally have sensible names.</p>
<p>It also brings the option to use <a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes">HTML data attributes</a> for configuration.</p>
<ul>
<li>
<p>Comment sections can now be initialized using <code>data-*</code> attributes on the <code>script</code> tag (Thanks to @NicolaiSoeborg for !5).</p>
</li>
<li>
<p>Allow using strings for any config parameter, including booleans and numbers.</p>
</li>
<li>
<p>Users can now set a displayname when commenting as a guest.</p>
</li>
<li>
<p>Some styling improvements for text inputs.</p>
</li>
</ul>
<p><a href="https://latest.cactus.chat">/ipns/latest.cactus.chat</a> is updated to point to the latest release, so sites linking there should already be using the new version.</p>
<p>Come play with the demo: <a href="https://cactus.chat/demo">https://cactus.chat/demo</a></p>
<p>Join our Matrix room: <a href="https://matrix.to/#/#cactus:cactus.chat">#cactus:cactus.chat</a></p>
</blockquote>
<h3 id="phonehome-stats-viz">Phonehome stats viz</h3>
<p><a href="https://matrix.to/#/@matthew:matrix.org">Matthew</a> reported:</p>
<blockquote>
<p>I did a video a few months back trying to show the physical layout of Matrix over the years by looking at the phonehome stats and the number of active users per server (showing full-mesh edges between the top 100 servers, heatmapped by how busy the servers were at either end of the edge).  There was a bug in the phonehome stats during 2017, but it's still fairly cool...</p>
</blockquote>
<iframe width="560" height="315" src="https://www.youtube.com/embed/TnbT1Grbf9A" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2 id="dept-of-ping-table-tennis-paddle-and-ball">Dept of Ping 🏓</h2>
<p>Here we reveal, rank, and applaud the homeservers with the lowest ping, as measured by <a href="https://github.com/maubot/echo">pingbot</a>, a <a href="https://github.com/maubot/maubot">maubot</a> that you can host on your own server.</p>
<h3 id="ping-maunium-net"><a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a></h3>
<p>Join <a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">kapsi.fi</td><td style="text-align: center">611</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">queersin.space</td><td style="text-align: center">623.5</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">maescool.be</td><td style="text-align: center">678.5</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">chatcloud.net</td><td style="text-align: center">702.5</td></tr>
<tr><td style="text-align: center">5</td><td style="text-align: center">woefdram.nl</td><td style="text-align: center">743</td></tr>
<tr><td style="text-align: center">6</td><td style="text-align: center">matrix.sp-codes.de</td><td style="text-align: center">769.5</td></tr>
<tr><td style="text-align: center">7</td><td style="text-align: center">dodsorf.as</td><td style="text-align: center">788</td></tr>
<tr><td style="text-align: center">8</td><td style="text-align: center">wallace.sh</td><td style="text-align: center">803</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">kittenface.studio</td><td style="text-align: center">1180</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">dendrite.foxomy.com</td><td style="text-align: center">1320</td></tr>
</tbody></table>
<h3 id="ping-no-synapse-maunium-net"><a href="https://matrix.to/#/#ping-no-synapse:maunium.net">#ping-no-synapse:maunium.net</a></h3>
<p>Join <a href="https://matrix.to/#/#ping-no-synapse:maunium.net">#ping-no-synapse:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">dendrite.thomcat.rocks</td><td style="text-align: center">493</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">dendrite.s3cr3t.me</td><td style="text-align: center">625.5</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">dendrite01.fiksel.info</td><td style="text-align: center">1086</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">dendrite.foxomy.com</td><td style="text-align: center">1347</td></tr>
</tbody></table>
<h2 id="that-s-all-i-know-checkered-flag">That's all I know 🏁</h2>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2021&#x2F;05&#x2F;06&#x2F;introducing-the-pinecone-overlay-network&#x2F;" title="Introducing the Pinecone overlay network">Introducing the Pinecone overlay network</a></h1>
            <span>
                06.05.2021 00:00
                —
                <a href="/category/tech">
                    Tech
                </a>
                —
                <a href="/author/neil-alexander">
                    Neil Alexander
                </a>
            </span>
            
        </header>
        <div>
            <p>Since the end of 2019, we have spent quite a bit of time thinking about and exploring different technologies whilst building various demos for P2P Matrix.  Our mission for P2P Matrix is to evolve Matrix into a hybrid between today's server-oriented network and a pure P2P network - empowering users to have <strong>total</strong> autonomy and privacy over their data if they want (by storing it in P2P Matrix, by embedding their server into their Matrix client), while also letting users store their data in serverside nodes if they so desire.</p>
<p>The goal is to protect metadata much better (as users no longer have to depend on a server run by someone else to communicate), as well as drive new features such as account portability, multi-homed accounts, low-bandwidth Matrix and smarter federation transports - and provide support for internet-less mesh communication via Matrix which can also interoperate with the wider network.  You can read more about it in our <a href="https://matrix.org/blog/2020/06/02/introducing-p-2-p-matrix/">Introducing P2P Matrix</a> blog post from last summer, or watch our <a href="https://fosdem.org/2021/schedule/event/matrix_pinecones/">FOSDEM 2021 talk</a> where we previewed Pinecone.  It's important to note that this has been a small but important long-term project for Matrix, and has been progressing entirely outside our business-as-usual work of improving the core protocol and reference implementations.</p>
<p>As the project has progressed, we've built a variety of prototypes using existing libraries (<a href="https://github.com/libp2p/go-libp2p">go-libp2p</a>, <a href="https://github.com/libp2p/js-libp2p">js-libp2p</a> and <a href="https://github.com/yggdrasil-network/yggdrasil-go">Yggdrasil</a>), demonstrating what an early P2P Matrix might feel like if it were running on a mobile device, in the web browser and so on using such an overlay network. Each of these demos has taught us something new, and so in October 2020 we decided to take this knowledge to build an experimental new overlay network of our own.</p>
<p>Pinecone is designed to provide end-to-end encrypted communications between devices, regardless of how they are connected to one another, in a lightweight and self-arranging fashion. The routing protocol is a hybrid, taking inspiration from <a href="https://github.com/yggdrasil-network/yggdrasil-go">Yggdrasil</a> by building a global spanning tree, but rather than forwarding all traffic using the spanning tree topology, we use it as a bootstrap routing mechanism for a line/snake topology, ordered by their ed25519 public keys, which we have affectionately named SNEK (Sequentially Networked Edwards Key) routing.</p>
<p>Nodes seek out their closest keyspace neighbours on the network and paths are built between these pairs of nodes, similar to how a Chord DHT functions, populating the routing tables of intermediate nodes in the process. These paths are then used to forward traffic without having to perform up-front searches, allowing for very fast connection setups between overlay nodes. These paths are resilient to network topology changes and handle node mobility considerably better than any other name-independent routing scheme that we have seen — early results are very promising so far. We have also been experimenting with a combination of the μTP (Micro Transport Protocol) and TLS to provide stateful connection setup, congestion control and end-to-end encryption for all federation traffic carried over the Pinecone network.</p>
<p><img src="/blog/img/2021-05-06-pineconesim.png" alt="Pinecone simulator showing line/snake logical network topology" /></p>
<p>If Pinecone works out, our intention is to collaborate with the libp2p and IPFS team to incorporate Pinecone routing into libp2p (if they'll have us!) while incorporating their gossipsub routing to improve Matrix federation... and get the best of both worlds :)</p>
<p>Today we're releasing the source code for our current early implementation of Pinecone — you can <a href="https://github.com/matrix-org/pinecone">get it from GitHub</a> right now! It's very experimental still and not very well optimised yet, but it is the foundation of our latest mobile P2P Matrix demos, which support P2P Matrix over both <strong>Bluetooth Low Energy</strong> mesh networks, <strong>multicast DNS</strong> discovery within a LAN, and/or by routing through <strong>static Pinecone peers</strong> on the Internet:</p>
<ul>
<li>Android: https://appdistribution.firebase.dev/i/394600067ea8ba37</li>
<li>iOS: https://testflight.apple.com/join/Tgh2MEk6</li>
</ul>
<p>Building a routing overlay is only the first step in the journey towards P2P Matrix. We will also be looking closely in the coming months at improving the Matrix federation protocol to work well in mixed-connectivity scenarios (rather than the full mesh approach used today) as well as decentralised identities, hybrid deployments with existing homeservers and getting Dendrite (the Matrix homeserver which is embedded into the current P2P demos) more stable and feature-complete.</p>
<p>The long-term plan could look something like this:</p>
<p><img src="/blog/img/2021-05-06-pinecone.png" alt="Diagram showing possible P2P Matrix stack" /></p>
<p>Most discussion around P2P Matrix takes place in <a href="http://matrix.to/#/#p2p:matrix.org">#p2p:matrix.org</a>, so if you are interested in what's going on, please join us there!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2021&#x2F;05&#x2F;05&#x2F;synapse-1-33-0-released&#x2F;" title="Synapse 1.33.0 released">Synapse 1.33.0 released</a></h1>
            <span>
                05.05.2021 00:00
                —
                <a href="/category/releases">
                    Releases
                </a>
                —
                <a href="/author/dan-callahan">
                    Dan Callahan
                </a>
            </span>
            
        </header>
        <div>
            <p>Synapse 1.33.0 is out! Three main items of note:</p>
<ol>
<li>
<p>We plan to release <del>1.33.1</del> <ins>1.33.2</ins> with a <strong>low severity security fix</strong> on Tuesday next week, and we're interested in your thoughts on decoupling routine security fixes from normal releases. Please weigh in on <a href="https://github.com/matrix-org/synapse/discussions/9914">this discussion</a>.</p>
<p><em><strong>Note:</strong> We shipped 1.33.1 with a <a href="https://github.com/matrix-org/synapse/issues/9936">small dependency fix</a> when installing Synapse via <code>pip</code>. A security release is still planned for Tuesday, which will now be 1.33.2.</em></p>
</li>
<li>
<p>If you use Synapse's optional account revalidation feature (see <code>account_validity</code> in <a href="https://github.com/matrix-org/synapse/blob/v1.33.0/docs/sample_config.yaml#L1373-L1455">config.yaml</a>), you'll want to review the <a href="https://github.com/matrix-org/synapse/blob/v1.33.0/UPGRADE.rst#upgrading-to-v1330">upgrading instructions</a> as we've made a few small changes to the email templates it uses.</p>
</li>
<li>
<p>Synapse now has <em>very</em> experimental support for moving presence off of the main process. This has not yet been extensively validated, so please proceed with caution. We expect to get this to a point where we can confidently recommend it in the coming weeks.</p>
</li>
</ol>
<p>Otherwise, this is another release focused on internals. We're driving toward a goal of reducing excess memory consumption when joining large or complex rooms, and most of our effort (aside from the presence work) has been focused on measurement, instrumentation, and experimentation for that.</p>
<p>We did manage to <a href="https://github.com/matrix-org/synapse/pull/9825">slightly speed up room joins</a>, improve the <a href="https://github.com/matrix-org/synapse/pull/9821">performance of the user directory</a>, and refine our implementation of <a href="https://github.com/matrix-org/matrix-doc/pull/3083">MSC3083</a>. Additionally, thanks to work by ShadowJonathan, Synapse now passes all of <code>flake8-bugbear</code>'s <a href="https://github.com/PyCQA/flake8-bugbear">lints</a>.</p>
<p>See the <a href="https://github.com/matrix-org/synapse/blob/v1.33.0/UPGRADE.rst#upgrading-to-v1330">Upgrading Instructions</a> and <a href="https://github.com/matrix-org/synapse/blob/v1.33.0/CHANGES.md">Release Notes</a> for further information.</p>
<h3 id="thank-you">Thank You</h3>
<p>Synapse is a Free and Open Source Software project, and we'd like to extend our thanks to everyone who contributed to this release, including <a href="https://github.com/rkfg">rkfg</a>, and <a href="https://github.com/ShadowJonathan">ShadowJonathan</a>.</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2021&#x2F;04&#x2F;30&#x2F;this-week-in-matrix-2021-04-30&#x2F;" title="This Week in Matrix 2021-04-30">This Week in Matrix 2021-04-30</a></h1>
            <span>
                30.04.2021 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="matrix-live">Matrix Live 🎙</h2>
<iframe width="560" height="315" src="https://www.youtube.com/embed/SFkZz60RRfc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>Matthew presents the MSC process! <a href="/docs/DemystifyingMSCs.pdf">Get slides here</a>.</p>
<h2 id="dept-of-status-of-matrix-face-with-th">Dept of <em>Status of Matrix</em> 🌡️</h2>
<h3 id="university-of-innsbruck-featured-in-heise-de">University of Innsbruck featured in heise.de</h3>
<p><a href="https://matrix.to/#/@odanobunaga:matrix.org">Oda Nobunaga</a> said:</p>
<blockquote>
<p>The German IT platform Heise has conducted an interview with the university of Innsbruck which chose Matrix/Element over Microsoft Teams. Reasons: it's free, decentralized/federated, expandable and secure.</p>
<p>https://www.heise.de/news/Zusammenarbeit-MS-Teams-als-Lockangebot-in-eine-geschlossene-Microsoft-Umgebung-6030514.html</p>
</blockquote>
<p>&quot;free, decentralized/federated, expandable and secure&quot; sounds like a great set of reasons!</p>
<p>Heise article, naturally, is in German. Element have <a href="https://element.io/case-studies/university-of-innsbruck">some content in English discussing the deployment</a>, and <a href="https://element.io/blog/universal-universities/">how well-suited Matrix is for universities</a>. Finally, the best kind of feedback: an Innsbruck professor cheers the utility of federation:</p>
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">And the best thing: The federation across different institutions really works. I can still participate in project related chats with my former team <a href="https://twitter.com/ETH_en?ref_src=twsrc%5Etfw">@ETH_en</a> while seamlessly supporting lectures at <a href="https://twitter.com/uniinnsbruck?ref_src=twsrc%5Etfw">@uniinnsbruck</a>. All out of one tool, one login. <a href="https://t.co/6LXHcu7Jjf">pic.twitter.com/6LXHcu7Jjf</a></p>&mdash; Jan Beutel (@jan_beutel) <a href="https://twitter.com/jan_beutel/status/1388105012375588865?ref_src=twsrc%5Etfw">April 30, 2021</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> 
<h2 id="famedly-fellows-on-linux-lounge">Famedly Fellows on Linux Lounge</h2>
<p><a href="https://matrix.to/#/@deepbluev7:neko.dev">Nico</a> offered:</p>
<blockquote>
<p>Btw if anyone wanted to hear Krille and me live, we are live at the linux lounge now. It's in GERMAN! https://theradio.cc/blog/category/shownotes/linuxlounge/</p>
</blockquote>
<p>Exciting! Possibly. For the lucky few who can understand it anyway!</p>
<p><a href="https://matrix.to/#/@lazalatin:kif.rocks">Lazalatin</a> added:</p>
<blockquote>
<p>If anyone did miss the opportunity to listen to the live stream: Here you can find the recording, with show notes, as well: https://rec.theradio.cc/item/ll244/<br />
We were happy to have Krille and Nico with us. 🥳<br />
(website in german as well as the stream recording)</p>
</blockquote>
<p>:D</p>
<h2 id="dept-of-spec-scroll">Dept of Spec 📜</h2>
<h3 id="spec">Spec</h3>
<p><a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> offered:</p>
<blockquote>
<p>Here's your weekly spec update! The heart of Matrix is the specification - and this is modified by Matrix Spec Change (MSC) proposals. Learn more about how the process works at https://spec.matrix.org/unstable/proposals.</p>
<h4 id="msc-status">MSC Status</h4>
<p><strong>New MSCs:</strong></p>
<ul>
<li><em>There were no new MSCs created this week.</em></li>
</ul>
<p><strong>MSCs with proposed Final Comment Period:</strong></p>
<ul>
<li><em>No MSCs entered proposed FCP state this week.</em></li>
</ul>
<p><strong>MSCs in Final Comment Period:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/1772">MSC1772: Matrix spaces</a> (merge) (5 days remaining)</li>
</ul>
<p><strong>Merged MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2713">MSC2713: Remove deprecated v1 Identity Service API</a></li>
</ul>
<p><strong>Abandoned MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/3137">MSC3137:  Define space room type, subset of MSC1772</a></li>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2356">[WIP] MSC2356: Bulk /joined_members endpoint</a></li>
</ul>
<h4 id="spec-updates">Spec Updates</h4>
<p>We've opened up a new room for MSC authors to come and ask about the MSC process, as well as for review and feedback on their MSC ideas over at <a href="https://matrix.to/#/#sct-office:matrix.org">#sct-office:matrix.org</a>. If you're unsure what the next steps for your MSC are, or aren't sure whether an idea would make sense for inclusion in the Matrix Specification, then this room is the perfect place to ask about it. Come on by!</p>
<p>In terms of MSC work, Spaces remains one of the most active topics in the spec this week, with <a href="https://github.com/matrix-org/matrix-doc/pull/1772">MSC1772</a> finally reaching Final Comment Period! A lot of work went into writing and reviewing the MSC, as well as crafting the implementation - so congratulations to everyone involved! Of course, any concerns can still be raised over the next 5 days by anyone before the proposal is ultimately merged to the spec.</p>
<p>There are a number of changes being merged to the spec as we move swiftly towards the next major Spec release. Those that have merged this week are:</p>
<ul>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/3154">MSC2403: Knocking and MSC2998: Room Version 7</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/3151">MSC2874: Single SSSS</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/3149">MSC1544: Key verification using QR Codes</a></p>
</li>
</ul>
<p>Otherwise there's been a smattering of discussion and updates on various MSCs, such as <a href="https://github.com/matrix-org/matrix-doc/pull/2730">MSC2730</a> (verifiable forwarded events), <a href="https://github.com/matrix-org/matrix-doc/pull/2249">MSC2249</a> (requiring a user to be able to see an event to report it) and <a href="https://github.com/matrix-org/matrix-doc/pull/2516">MSC2516</a> (voice messages).</p>
<p>Thanks for reading!</p>
</blockquote>
<p>Also - knocking is now published to the unstable spec, check it out at: https://spec.matrix.org/unstable/client-server-api/#knocking-on-rooms</p>
<p><img src="/blog/img/2021-04-30-iLQCH-stacked_area_chart.png" alt="2021-04-30-iLQCH-stacked_area_chart.png" /></p>
<h2 id="dept-of-p2p-busts-in-silhouette">Dept of P2P 👥</h2>
<h3 id="p2p-matrix">P2P Matrix</h3>
<p><a href="https://matrix.to/#/@neilalexander:matrix.org">Neil Alexander</a> announced:</p>
<blockquote>
<p>We've just released the first public P2P Matrix demo using the experimental Pinecone protocol. There are builds available for Android right now and iOS is following shortly via Testflight as soon as it passes Apple's beta review:</p>
<ul>
<li>
<p>Android 10+: https://appdistribution.firebase.dev/i/394600067ea8ba37</p>
</li>
<li>
<p>iOS: https://testflight.apple.com/join/Tgh2MEk6 (wait for build 73!)</p>
</li>
</ul>
<p>If you enable the static peer in the peer-to-peer settings, you can join us in the <code>#beachparty:3bf0258d23c60952639cc4c69c71d1508a7d43a0475d9000ff900a1848411ec7</code> room!</p>
<p>The demo will attempt to connect to other devices using Bluetooth Low Energy, even if internet connectivity isn't available. Local connectivity over Wi-Fi is also supported. It's still very rough around the edges and there are lots of bugs, but feel free to give it a go!</p>
<p>Join <a href="https://matrix.to/#/#p2p:matrix.org">#p2p:matrix.org</a> for more chat and to provide feedback!</p>
</blockquote>
<h2 id="dept-of-servers-europea">Dept of Servers 🏢</h2>
<h3 id="conduit">Conduit</h3>
<p>Conduit is a Matrix homeserver written in Rust https://conduit.rs</p>
<p><a href="https://matrix.to/#/@timokoesters:fachschaften.org">timokoesters</a> said:</p>
<blockquote>
<ul>
<li>
<p>Feature: Implement /devices</p>
</li>
<li>
<p>Feature: Send invites over federation</p>
</li>
<li>
<p>Improvement: Verify signatures for incoming requests</p>
</li>
<li>
<p>Improvement: Room directory now loads a lot faster</p>
</li>
<li>
<p>Fix: Retrying transactions works correctly now</p>
</li>
</ul>
<p>We managed to work on a few features the last two weeks, but there are some very annoying issues with major Matrix clients:</p>
<ul>
<li>
<p><a href="https://gitlab.com/famedly/conduit/-/issues/79">E2EE does not work Element Android &lt;-&gt; Element Android</a></p>
</li>
<li>
<p><a href="https://gitlab.com/famedly/conduit/-/issues/81">Wrong room version warnings on Element Web</a></p>
</li>
<li>
<p><a href="https://github.com/vector-im/element-android/issues/3183">Cross signing unreliable on Conduit (but works with Fluffychat)</a></p>
</li>
</ul>
</blockquote>
<h3 id="synapse">Synapse</h3>
<p>Synapse is a popular homeserver written in Python.</p>
<p><a href="https://matrix.to/#/@callahad:matrix.org">callahad</a> said:</p>
<blockquote>
<p>We expect to release 1.33 on Tuesday; more on that next week. But generally speaking, much of our development focus has been on profiling the memory usage of small homeservers joining large, highly-federated rooms for the first time. For example, we see a graph like this when joining Matrix HQ:</p>
</blockquote>
<p><img src="/blog/img/2021-04-30-akzM5-Screenshotfrom2021-04-2918-33-43.png" alt="2021-04-30-akzM5-Screenshotfrom2021-04-2918-33-43.png" /></p>
<blockquote>
<p>At a first pass, we're aiming to significantly reduce the initial spikiness of that graph, and we <em>think</em> <a href="https://github.com/matrix-org/synapse/pull/9910">#9910</a> will help with the subsequent slow ramp up in memory.</p>
<p>We've also been discussing how to balance our relatively rapid release cadence with managing low severity security issues. If you have any thoughts, preferences, or relevant experiences to share, please <a href="https://github.com/matrix-org/synapse/discussions/9914">comment here</a>!</p>
</blockquote>
<h2 id="dept-of-bridges-bridge-at-night">Dept of Bridges 🌉</h2>
<h3 id="heisenbridge-announced">Heisenbridge announced</h3>
<p><a href="https://matrix.to/#/@hifi:vi.fi">hifi</a> said:</p>
<blockquote>
<p>Announcing a new bouncer style Matrix IRC bridge to <em>bridge</em> the gap between IRC and Matrix in a way that's easy to configure and manage by homeserver administrators for small scale deployment.</p>
<p>Meet Heisenbridge https://github.com/hifi/heisenbridge 🥳 (it's a Breaking Bad reference 🤦)</p>
<p>It's written in Python and started off as an experiment if it's possible to create a somewhat well performing stateless IRC bridge that's practically almost zero configuration. It quickly found a use case of being able to join !channels on IRCnet that hasn't been possible in the past.</p>
<p>Intended target audience are people who run their own homeserver and would like to transition from a combination like ssh+irssi to pure Matrix (with weechat-matrix, of course!) but still keep IRC close without losing the &quot;fine details&quot; of the protocol that happens when plumbing a room properly.</p>
<p>As the bridge is written by someone who doesn't really know Python help is much appreciated in the form of filing issues, sending pull requests or just discussing about it on Matrix to tell how you would like to use it!</p>
<p>Development and support in <a href="https://matrix.to/#/#heisenbridge:vi.fi">#heisenbridge:vi.fi</a></p>
<p>Thanks!</p>
</blockquote>
<h3 id="matrix-puppeteer-line-updated">matrix-puppeteer-line updated</h3>
<p><a href="https://matrix.to/#/@fair:miscworks.net">Fair</a> offered:</p>
<blockquote>
<p><a href="https://src.miscworks.net/fair/matrix-puppeteer-line/">matrix-puppeteer-line</a>: A bridge for LINE Messenger based on running LINE's Chrome extension in Puppeteer.</p>
<p>Updates:</p>
<ul>
<li>
<p>Inbound read receipts! But with a view caveats:</p>
<ul>
<li>
<p>Receipts are only fetched for the &quot;most recently active&quot; room.</p>
<ul>
<li>
<p>Example: if you send a message in room A, then room B, receipts will only be fetched for room B and not room A, until you (or someone else, from LINE) posts in room A.</p>
</li>
<li>
<p>This will be fixed in the next update. I have an idea for some Puppeteer trickery to get it working.</p>
</li>
</ul>
</li>
<li>
<p>Read receipts in group chats are bridged as annotations (reactions) instead of &quot;real&quot; read receipts, until all members of the chat have read a message.</p>
<ul>
<li>This is because LINE's read receipts for group chats don't tell show <em>who</em> read a message, but only <em>how many</em> people a message was read by.</li>
<li>To capture this in Matrix, instead of sending read receipts for a group chat message, the bridge puts a reaction of &quot;Read by #&quot; on it, with &quot;#&quot; matching how many people read the message so far. Once everyone in the chat has read a message, the reaction is removed and a &quot;real&quot; receipt is sent for all users.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Internal changes to message syncing that should hopefully make inbound messages more reliable, or the very least improve code maintenance. </p>
</li>
</ul>
<p>Discussion:</p>
<p><a href="https://matrix.to/#/#matrix-puppeteer-line:miscworks.net">#matrix-puppeteer-line:miscworks.net</a></p>
</blockquote>
<h2 id="dept-of-clients-iphone">Dept of Clients 📱</h2>
<h3 id="nheko">Nheko</h3>
<p><a href="https://github.com/Nheko-Reborn/nheko">Nheko</a> is a desktop client using Qt, Boost.Asio and C++17. It supports E2EE and intends to be full featured and nice to look at</p>
<p><a href="https://matrix.to/#/@deepbluev7:neko.dev">Nico (@deepbluev7:neko.dev)</a> offered:</p>
<blockquote>
<p>Hey there, it is your friendly neighborhood cat client! Pardon, chat client!</p>
<p>Jedi18 implemented forwarding of messages. Just select a message and press Alt-F or use the context menu to send a message to the room you select in the popup! This encrypts and decrypts messages and media appropriately, but be aware that sending an encrypted file to an unencrypted room uploads the file unencrypted. (In all other cases the media is not uploaded again.)</p>
<p>Furthermore matrix.to links are now rewritten to matrix:-URIs internally. This means joining rooms and such should now work the same across both of them. It also makes navigation to events work now and even has a shiny highlight effect now! You can also create links to events now from the context menu. These are generated as matrix.to links, since currently the onboarding experience should still be better. Once the next version of the matrix.to website gets deployed, you can even just click there to open the event in Nheko! (Instead of having to copy a <code>/join</code> command).</p>
<p>Since &quot;Copy link to event&quot; was confusing to people and AppAraat opened his present box, only to realize it did not contain &quot;Copy link location&quot;, we implemented that too as well as a copy action, to copy the event body for good measure. I hope everyone who got confused will forgive me!</p>
<p>Apart from that we also updated our screenshots on <a href="https://nheko-reborn.github.io/">https://nheko-reborn.github.io/</a> (and all AppStream based store pages) to be higher resolution and reflect the current design. Furthermore we fixed the login on conduit homeservers and that no rooms were shown, if the server didn't support the groups API.</p>
<p>That's all, and keep on c(h)atting! &lt;3</p>
</blockquote>
<p><img src="/blog/img/2021-04-30-zKbR8-nheko-message-fwd.png" alt="2021-04-30-zKbR8-nheko-message-fwd.png" /></p>
<h3 id="neochat">NeoChat</h3>
<p><a href="https://matrix.to/#/@carl:kde.org">Carl Schwan</a> told us:</p>
<blockquote>
<p>We rewrote the room managing code moving it from QML to C++ and unify how we manage rooms in NeoChat. This allowed us to support the matrix-URIs scheme, making it possible to open rooms and show user information when clicking on a matrix: link in your browser. Sverin Saji improved the look of the typing indicator and Jan Blackquill improved the keyboard navigation.</p>
</blockquote>
<p><img src="/blog/img/2021-04-30-JcL3Q-image.png" alt="2021-04-30-JcL3Q-image.png" /></p>
<h3 id="watch-the-matrix">Watch The Matrix</h3>
<p><img src="/blog/img/2021-04-30-boDeS-Icon.png" alt="2021-04-30-boDeS-Icon.png" /></p>
<p><a href="https://matrix.to/#/@doug:micdrop.uk">Doug</a> offered:</p>
<blockquote>
<p>This week I published the first public build on TestFlight:</p>
<p>https://testflight.apple.com/join/a06n3gN4</p>
<p>There are a few reports of issues when signing in which I'm looking into. A few other changes include:</p>
<ul>
<li>
<p>Round complications show [ ] instead of an empty icon (some have been disabled for now).</p>
</li>
<li>
<p>When signing in, the homeserver can be detected from the username.</p>
</li>
<li>
<p>Various performance and bug fixes for sync responses.</p>
</li>
<li>
<p>The app now has an icon and more purple accents.</p>
</li>
</ul>
<p>As requested by benpa after my last update, here's a video of it running on a device:</p>
</blockquote>
<iframe width="560" height="315" src="https://www.youtube.com/embed/GPGaefv1Gvw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p><em>/me doesn't need to buy an Apple Watch ... /me <strong>doesn't</strong> need to buy an Apple Watch</em></p>
<h3 id="element-clients">Element Clients</h3>
<p>Updates from the teams.</p>
<p><strong>Delight</strong></p>
<ul>
<li>We’ve been maturing and iterating on <a href="https://github.com/vector-im/element-web/issues/15930">MSC1772</a> in anticipating of wider testing of Spaces in the near future</li>
<li>On Web, we’ve been iterating on designs &amp; implementations for a beta, including tweaking filtering to display rooms from all Spaces</li>
<li>On Android, we’ve been doing the same, and have merged the initial Spaces implementation onto develop</li>
<li>On Synapse, we’ve been implementing restricting rooms based on the Space Summary API</li>
</ul>
<p><strong>Web</strong></p>
<ul>
<li>1.7.26 released on Monday
<ul>
<li>Added persistence of unsent messages across app restart</li>
<li>Improved room list filtering performance</li>
<li>Improved the image detail view</li>
</ul>
</li>
<li>On develop
<ul>
<li>Element Desktop is now <a href="https://translate.element.io/projects/element-desktop/element-desktop/">available for localisation</a> in Weblate</li>
</ul>
</li>
<li>In progress
<ul>
<li>Improving room join UX, ensuring you can get back to a room when it finally joins</li>
<li><a href="https://arewetsyet.bit.ovh/">Converting more files to TypeScript</a>, including key modules like EventTile and friends</li>
</ul>
</li>
</ul>
<p><strong>iOS</strong></p>
<ul>
<li>1.3.5 has been published to the App Store on Monday.</li>
<li>We have been polishing the new VoIP design this week. It should be merged into develop early next week and released in the App Store the week after.</li>
<li>We want to focus on code quality. We set up GitHub actions in our 3 repos. They run both unit tests and integration tests. We need to fix some of our 600+ tests in the SDK but we now have a CI able to complain about test failures.</li>
</ul>
<p><strong>Android</strong></p>
<ul>
<li>The Spaces have landed on Element Android, on the develop branch. We are working to stabilize the feature before the release in beta next week.</li>
<li>In parallel, we are working to stabilize the whole application, and provide a better support on Android 11.</li>
<li>Also it will be possible in the next release to compress video before sending, which is a very expected feature.</li>
</ul>
<h3 id="hydrogen">Hydrogen</h3>
<p>A minimal Matrix chat client, focused on performance, offline functionality, and broad browser support. https://github.com/vector-im/hydrogen-web/</p>
<p><a href="https://matrix.to/#/@bwindels:matrix.org">Bruno</a> said:</p>
<blockquote>
<p>Invites and other goodies have landed in <a href="https://github.com/vector-im/hydrogen-web/releases/tag/v0.1.46">0.1.46 &amp; 0.1.47</a>!</p>
</blockquote>
<p><img src="/blog/img/2021-04-30-dyAS7-Screenshot_20210428-143543.png" alt="2021-04-30-dyAS7-Screenshot_20210428-143543.png" /></p>
<p>If you spend any amount of time with Bruno, eventually the topic of sourdough will arise - now it's even sneaking into his updates!</p>
<h2 id="dept-of-voip-call-me-hand">Dept of VoIP 🤙</h2>
<h3 id="matrix-pstn-bridge">matrix-pstn-bridge</h3>
<p><a href="https://matrix.to/#/@kb1rd:kb1rd.net">KB1RD</a> told us:</p>
<blockquote>
<p>I announced this project last week. It's exactly what it sounds like: A puppetting bridge to puppet a telephone number from Matrix. It's currently pre-alpha and not ready for use on public-facing HSes.</p>
<p>Not too much has happened in the last week as I've been a bit busy. The main thing is that there's now a <a href="https://github.com/KB1RD/matrix-pstn-bridge/tree/voip-dev">dev branch where outbound voice calls work</a>. Other than the 2014 <a href="https://matrix.org/blog/2014/11/30/bridging-matrix-sip-via-verto">SIP experiment</a>, I think this is the first bridge to make voice calls work?</p>
<p>I hope having a reference VoIP bridge can help pave the way for more VoIP bridging. I'm already looking into how code can be generalized for other bridges. For example, I've opened an <a href="https://github.com/turt2live/matrix-bot-sdk/issues/112">issue in matrix-bot-sdk to add helper classes and stuff for VoIP support</a>. I'd be curious to see how other bridge builders think this could be accomplished. 👀</p>
<p>If you're interested in PSTN bridging specifically, there's a <a href="https://matrix.to/#/#matrix-pstn-bridge:kb1rd.net?via=kb1rd.net&amp;via=matrix.org&amp;via=t2bot.io">room for that</a>.</p>
<p>If you're interested in VoIP bridging in general, there's a <a href="https://matrix.to/#/#matrix-voip-bridging:kb1rd.net?via=kb1rd.net&amp;via=matrix.org&amp;via=jboi.nl">room for that, too</a></p>
</blockquote>
<h2 id="dept-of-services-rocket">Dept of Services 🚀</h2>
<h3 id="etke-cc-like-element-matrix-services-but-on-your-servers-under-your-control-and-without-restrictions">etke.cc - like Element Matrix Services, but on your servers, under your control and without restrictions</h3>
<p><a href="https://matrix.to/#/@aine:etke.cc">Aine</a> reported:</p>
<blockquote>
<p>Some context: I like how simple  EMS allows you to setup the Matrix homeserver, but it lacks any internal tuning or customization ability. Do you want more? OK, setup it yourself and try to stay normal while trying to configure coturn to properly run in docker cluster.  Because of that, I did a service where you can order initial setup and configuration of homeserver (yes, with coturn in docker cluster!) <strong>and</strong> with full control of customization and fine-tuning of manual configuration (website even has step-by-step guide how the process works).</p>
<p>It's based on the amazing spantaleev/matrix-docker-ansible-deploy with additional stuff like system security hardening and maintenance</p>
<p>Announcements: <a href="https://matrix.to/#/#announcements:etke.cc">#announcements:etke.cc</a> </p>
<p>Source: https://gitlab.com/rakshazi/matrix-ansible/ 
It contains basic security stuff like ufw and fail2ban, system maintenance like updating packages, cleanup of old logs and docker images, configuration of swap, some additions like absurdly simply healthcheck page and website deployment to base domain. Documentation may be found in readme files for each role</p>
</blockquote>
<h3 id="gomatrixhosting-v0-4-5-is-here">GoMatrixHosting v0.4.5 is here!</h3>
<p><a href="https://matrix.to/#/@michael:perthchat.org">Michael</a> said:</p>
<blockquote>
<p>GoMatrixHosting v0.4.5 is here!</p>
<p>https://gitlab.com/GoMatrixHosting</p>
<p>The FLOSS Matrix hosting system built on AWX, it enables you to manage multiple Matrix servers for many clients in both a commercial or non-commercial context. We are currently doing a free giveaway of on-premises server plans, if you're an experienced user or Matrix admin you can receive a free on-premises subscription and hopefully provide us with some feedback.</p>
<p>For more updates on this project visit our Matrix room: <a href="https://matrix.to/#/#general:gomatrixhosting.com">#general:gomatrixhosting.com</a></p>
</blockquote>
<p>GoMatrixHosting was previously Oasis Hosting - looks like they're making great progress improving their product, may be time to have another look.</p>
<h2 id="dept-of-interesting-projects">Dept of Interesting Projects 🛰️</h2>
<h3 id="matrix-stats-discoverer-bot-server-stats-nordgedanken-dev">Matrix_Stats Discoverer (bot) ( @server_stats:nordgedanken.dev )</h3>
<p><a href="https://matrix.to/#/@mtrnord:nordgedanken.dev">MTRNord</a> reported:</p>
<blockquote>
<p>Some of you might already have seen that bot show up in rooms. To clear up some confusion around it I will briefly explain what it does and what it is supposed to do:</p>
<h4 id="what-does-it-do">What does it do?</h4>
<p>The Bot is simply existing to do the same task as Matrix Traveler (bot) already did for years now. It joins rooms, listens for an alias, tries to join it.</p>
<p>The main difference between these 2 bots is that my bot also searches for aliases in old messages.</p>
<h4 id="what-does-it-save">What does it save?</h4>
<p>It only saves the relations between rooms. This means it knows which room was posted where. It doesn't know who posted it, when it was posted, why it was posted or any other content of messages.</p>
<p>However due to matrix' nature it does need to get the data once onto a synapse to read trough it. This means it has the data on my synapse. (Running in helsinki at hetzner).</p>
<h4 id="what-can-i-do-if-i-do-not-want-it">What can I do if I do not want it?</h4>
<p>The easiest way is to just ban it. It will fully forget that room.</p>
<p>Kicking works too but it might again join if it gets found again.</p>
<h4 id="where-is-the-source">Where is the source?</h4>
<p>The source code is available at https://git.nordgedanken.dev/MTRNord/server_stats/-/blob/main/src/bot/mod.rs</p>
<p>For further questions feel free to join #server_stats:nordgedanken.dev</p>
<p>Also note this bot is still very early in development which is why it does not respond to you yet on any commands. This will be added in the near future as well as a readme in the repository</p>
</blockquote>
<h2 id="dept-of-ping-table-tennis-paddle-and-ball">Dept of Ping 🏓</h2>
<p>Here we reveal, rank, and applaud the homeservers with the lowest ping, as measured by <a href="https://github.com/maubot/echo">pingbot</a>, a <a href="https://github.com/maubot/maubot">maubot</a> that you can host on your own server.</p>
<h3 id="ping-maunium-net"><a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a></h3>
<p>Join <a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">maunium.net</td><td style="text-align: center">670.5</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">matrix.org</td><td style="text-align: center">739.5</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">matrix.vgorcum.com</td><td style="text-align: center">1068</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">helsinki-systems.de</td><td style="text-align: center">1072</td></tr>
<tr><td style="text-align: center">5</td><td style="text-align: center">kif.rocks</td><td style="text-align: center">1085</td></tr>
<tr><td style="text-align: center">6</td><td style="text-align: center">dendrite.foxomy.com</td><td style="text-align: center">1092</td></tr>
<tr><td style="text-align: center">7</td><td style="text-align: center">kittenface.studio</td><td style="text-align: center">1549</td></tr>
<tr><td style="text-align: center">8</td><td style="text-align: center">thomcat.rocks</td><td style="text-align: center">1674</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">mailstation.de</td><td style="text-align: center">2011</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">chatcloud.net</td><td style="text-align: center">2311</td></tr>
</tbody></table>
<h3 id="ping-no-synapse-maunium-net"><a href="https://matrix.to/#/#ping-no-synapse:maunium.net">#ping-no-synapse:maunium.net</a></h3>
<p>Join <a href="https://matrix.to/#/#ping-no-synapse:maunium.net">#ping-no-synapse:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">dendrite.thomcat.rocks</td><td style="text-align: center">415</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">dendrite.foxomy.com</td><td style="text-align: center">557</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">dendrite.neilalexander.dev</td><td style="text-align: center">576</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">dendrite01.fiksel.info</td><td style="text-align: center">1086</td></tr>
</tbody></table>
<h2 id="that-s-all-i-know-checkered-flag">That's all I know 🏁</h2>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2021&#x2F;04&#x2F;23&#x2F;this-week-in-matrix-2021-04-23&#x2F;" title="This Week in Matrix 2021-04-23">This Week in Matrix 2021-04-23</a></h1>
            <span>
                23.04.2021 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="dept-of-status-of-matrix-face-with-th">Dept of <em>Status of Matrix</em> 🌡️</h2>
<h3 id="open-tech-will-save-us-news">Open Tech Will Save Us news</h3>
<p><a href="https://matrix.to/#/@neilj:matrix.org">Neil</a> announced:</p>
<blockquote>
<p>Folks, incredibly <a href="https://matrix.org/open-tech-will-save-us/">Open Tech Will Save Us</a>  is over a year old! Thanks to everyone who has made this possible, especially Ben. We’d like to figure out how to improve it and make it even better. If you have a few moments, please can take a look at this <a href="https://forms.gle/nvyf81zY8xm33ksQ6">survey</a> to share your thoughts? (Sorry it’s Google ...)</p>
</blockquote>
<h3 id="matrix-uri-scheme">Matrix URI scheme</h3>
<p><a href="https://matrix.to/#/@jboi:jboi.nl">Jonathan</a> noticed:</p>
<blockquote>
<p>The <code>matrix:</code> URI scheme has just been officially accepted (safelisted) into the HTML standard! 🚀</p>
<blockquote>
<p>https://github.com/whatwg/html/pull/6320</p>
</blockquote>
</blockquote>
<p><a href="https://matrix.to/#/@deepbluev7:neko.dev">Nico (@deepbluev7:neko.dev)</a> said:</p>
<blockquote>
<h4 id="what-is-the-matrix-uri-scheme">What is the Matrix URI scheme?</h4>
<p>You are probably familiar with <code>mailto:user@example.com</code> or <code>tel:+1-555-438-3732</code>. The former is usually used to open an email address in your mail client, while the latter is used for phone numbers. This allows applications to register themselves as a handler for it, like for example GMail or Thunderbird, and your browser and other applications can find them and tell them to open an editor or similar, with that identifier as the target. There are also a lot of other applications that have similar schemes like Telegram, Zoom and more.</p>
<p>In Matrix you have similar identifiers, most notably users (@user:example.org) and rooms (<a href="https://matrix.to/#/#room:example.org">#room:example.org</a>). The matrix URI scheme now allows you to open such identifiers in your favourite Matrix clients. You can now just click on matrix:u/user:example.org or matrix:r/room:example.org and start chatting with the user or join the room. (There is a bit more to it, you actually need an action after the identifier for it, otherwise it will just open the user profile or show the room, if you are joined to it, but that is the idea. For more details, check https://github.com/matrix-org/matrix-doc/blob/master/proposals/2312-matrix-uri.md )</p>
<p>As you can see the format of the matrix: scheme is a bit different that standard Matrix identifiers. This is mostly because they need to start with <code>scheme:</code>, where <code>scheme</code> is different depending on the application, but some characters are also treated differently in URIs, which is why the matrix scheme decided to avoid them where possible.</p>
<h4 id="what-does-it-mean-that-the-matrix-scheme-is-now-part-of-the-html-standard">What does it mean, that the matrix: scheme is now part of the HTML standard?</h4>
<p>In general desktop and mobile clients could already implement the Matrix scheme before, FluffyChat, Quaternion, gomuks and Nheko have even done so already. This means if you are using those clients, you can already use the Matrix scheme today!</p>
<p>On the web things are a bit more difficult though. Since you don't want arbitrary websites to intercept arbitrary schemes, schemes need to be safelisted in the HTML spec/browsers. So today web clients can't be registered to open matrix: URIs. But the first step is done now. The HTML spec now officially lists <code>matrix:</code> as a safelisted scheme.</p>
<h4 id="next-steps">Next steps</h4>
<p>For web clients like Element to be able to open matrix: URIs, a few more things need to happen.</p>
<ol>
<li>Browsers need to implement the HTML standard change and allow web apps to register the Matrix scheme.</li>
</ol>
<ul>
<li>Status in Firefox: https://bugzilla.mozilla.org/show_bug.cgi?id=1688030</li>
<li>Status in Chrome(ium): https://bugs.chromium.org/p/chromium/issues/detail?id=1169258</li>
</ul>
<ol start="2">
<li>Web clients need to actually implement handling <code>matrix:</code> URIs.</li>
</ol>
<ul>
<li>Tracking issue for Element: https://github.com/vector-im/element-web/issues/16875</li>
</ul>
<p>You may be wondering about matrix.to, which was used to share matrix identifiers before. In the long term matrix URIs will probably replace it. Watch the next few TWIMs to find out what happens and/or subscribe to the following issues: https://github.com/matrix-org/matrix.to/issues/191 https://github.com/matrix-org/matrix.to/issues/192</p>
<h4 id="closing-words">Closing words</h4>
<p>As you can see, this was a big step for Matrix as a whole. This of course couldn't have been possible without <a href="https://matrix.to/#/@kitsune:matrix.org">Alexey</a> writing such an awesome proposal and <a href="https://matrix.to/#/@mayeul:mayeul.net">MayeulC</a> pushing for the changes in browsers and the HTML standards. A lot of other people were also involved in implementing the scheme in their clients, sending the <a href="https://www.iana.org/assignments/uri-schemes/prov/matrix">RFC to IANA</a> or working on matrix.to, which was our solution until now and will probably bridge the gap into the future. The matrix scheme being in the HTML standard may look small, but a lot of stuff was blocked on it, that can now start making progress. Exciting, isn't it?</p>
</blockquote>
<p>And it gets better...</p>
<p><a href="https://matrix.to/#/@deepbluev7:neko.dev">Nico (@deepbluev7:neko.dev)</a> offered:</p>
<blockquote>
<p>MayeulC spotted, that Mozilla now safelisted the <code>matrix:</code> scheme in Firefox: https://bugzilla.mozilla.org/show_bug.cgi?id=1688030#c15</p>
<p>Expect this to land around Firefox 90 probably.</p>
<p>So we can check one more thing on our list. Apart from Chrome, we are now only waiting on webclients to implement it. This is moving faster than I expected!</p>
</blockquote>
<p>If this truly lands in a Firefox version in the near future I'll be very, very happy.</p>
<p><a href="https://matrix.to/#/@kitsune:matrix.org">kitsune</a> added:</p>
<blockquote>
<p>many thanks to MayeulC for making this happen.</p>
</blockquote>
<p>Thanks to everyone involved!</p>
<h2 id="dept-of-spec-scroll">Dept of Spec 📜</h2>
<h3 id="spec">Spec</h3>
<p><a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> told us:</p>
<blockquote>
<p>Here's your weekly spec update! The heart of Matrix is the specification - and this is modified by Matrix Spec Change (MSC) proposals. Learn more about how the process works at https://matrix.org/docs/spec/proposals.</p>
<h4 id="msc-status">MSC Status</h4>
<p><strong>Merged MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2241">MSC2241: Key verification in DMs</a></li>
</ul>
<p><strong>MSCs in Final Comment Period:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2713">MSC2713: Remove deprecated v1 Identity Service API</a> (merge)</li>
</ul>
<p><strong>New MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/3137">MSC3137:  Define space room type, subset of MSC1772</a></li>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/3131">MSC3131: Verifying with QR codes v2</a></li>
</ul>
<h4 id="spec-updates">Spec Updates</h4>
<p>Folks from the Matrix Core team continue to chip away at the various Spaces-related MSCs in order to further the initial implementation across all three Element clients. The Spec Core Team is cleaning up some deprecated APIs that have been hanging around for way too long now (Identity Service v1 APIs), as well as continuing to focus on getting various, implemented end-to-end encryption MSCs documented and into the spec.</p>
<p>We're also slowly inching towards a new release with a new <a href="https://github.com/matrix-org/matrix-doc/pull/2844">spec-wide versioning scheme</a>, as well as completing the move of the old documentation from matrix.org/docs/spec to spec.matrix.org. Slowly but surely.</p>
</blockquote>
<p><img src="/blog/img/2021-04-23-hRN19-stacked_area_chart.png" alt="2021-04-23-hRN19-stacked_area_chart.png" /></p>
<h2 id="dept-of-servers-europea">Dept of Servers 🏢</h2>
<h3 id="matrix-media-repo">matrix-media-repo</h3>
<p><a href="https://github.com/turt2live/matrix-media-repo">matrix-media-repo</a> is a highly customizable multi-domain media repository for Matrix</p>
<p><a href="https://github.com/turt2live">TravisR</a> said:</p>
<blockquote>
<p>v1.2.7 is out as a <strong>highly recommended security update</strong>. This release fixes a memory exhaustion issue regarding thumbnails, known as <a href="https://github.com/turt2live/matrix-media-repo/security/advisories/GHSA-j889-h476-hh9h">CVE-2021-29453</a>.</p>
<p>See https://github.com/turt2live/matrix-media-repo/releases/tag/v1.2.7 for more details, and visit #media-repo:t2bot.io on Matrix for questions and support.</p>
</blockquote>
<h3 id="synapse">Synapse</h3>
<p><a href="https://matrix.to/#/@callahad:matrix.org">callahad</a> announced:</p>
<blockquote>
<p><a href="https://matrix.org/blog/2021/04/22/synapse-1-32-2-released">Synapse 1.32 is out</a>! This release focused on internal cleanups and is our first release without support for Python 3.5, so nothing too groundbreaking, but we're pleased with the improvements we're making.</p>
<p>Unfortunately, we discovered a pair of issues late in the release, so we ended up with 1.32.2 rather than just 1.32.0, but we got there in the end. We'll adjust our processes for future releases to avoid repeating this issue.</p>
</blockquote>
<h2 id="homeserver-deployment-inbox-tray">Homeserver Deployment 📥️</h2>
<h3 id="kubernetes">Kubernetes</h3>
<p><a href="https://matrix.to/#/@ace:kittenface.studio">Ananace</a> told us:</p>
<blockquote>
<p>My regularly scheduled <a href="https://gitlab.com/ananace/charts">chart</a> updates for Synapse 1.3.1 (the deprecated image got a bump too) and matrix-media-repo 1.2.7 have been pushed.</p>
</blockquote>
<p>and then</p>
<blockquote>
<p>Got the Synapse 1.32.2 update up on my <a href="https://gitlab.com/ananace/charts">chart</a> too, replacing the pulled 1.32.1 version.</p>
</blockquote>
<h3 id="yunohost">YunoHost</h3>
<p><a href="https://matrix.to/#/@mamie:mamieserv.fr">Mamie</a> reported:</p>
<blockquote>
<p><a href="https://yunohost.org">YunoHost</a> is an operating system aiming for the simplest administration of a server, and therefore democratize self-hosting.</p>
<p><a href="https://github.com/YunoHost-Apps/synapse_ynh/tree/master">Synapse</a> integration had been updated to 1.31.0 (1.32.0 available in branch <code>testing</code>)</p>
<p><a href="https://github.com/YunoHost-Apps/element_ynh/tree/master">Element Web</a> integration had been updated to 1.7.24 (1.7.25 available in branch <code>testing</code>)</p>
</blockquote>
<h2 id="dept-of-bridges-bridge-at-night">Dept of Bridges 🌉</h2>
<h3 id="the-matrix-org-gitter-bridge-is-no-more-long-live-gitter-im">The matrix.org gitter bridge is no more, long live gitter.im!</h3>
<p><a href="https://matrix.to/#/@Half-Shot:half-shot.uk">Half-Shot</a> announced:</p>
<blockquote>
<p>Hello folks! Today at 17:41, we sunset the matrix.org gitter bridge after many years of active service. It started out as a <a href="https://github.com/matrix-org/matrix-appservice-gitter/commit/c641e6eb4916c1addbff5ba50d0bf0a5f2084690">tiny little project, forked from another gitter&lt;-&gt;IRC bridge</a> before eventually becoming part of the matrix-appservice-bridge family of bridges (thanks Leo for putting in the hard work there!). It never quite gained all the nice features that the IRC and Slack bridges enjoyed, in part due to it's dependence on the use of one bot account (serving as a relay). However, it was still the entrypoint for Matrix users into the likes of NeoVIM and Typescript and continued to run for several years.</p>
<p>Years later, <a href="https://matrix.org/blog/2020/12/07/gitter-now-speaks-matrix">gitter.im gained the ability to speak Matrix</a>,  so the old bridge can finally be laid to rest. Thanks to everyone that used and supported the bridge, and we hope you enjoy using the new one!</p>
<p>Thanks from the bridge team 🌉!</p>
</blockquote>
<h3 id="matrix-puppeteer-line">matrix-puppeteer-line</h3>
<p><a href="https://matrix.to/#/@fair:miscworks.net">Fair</a> announced:</p>
<blockquote>
<p><a href="https://src.miscworks.net/fair/matrix-puppeteer-line">matrix-puppeteer-line</a>: A bridge for LINE Messenger based on running LINE's Chrome extension in Puppeteer.</p>
<p>Updates:</p>
<ul>
<li>
<p>Improvements to inbound messages syncing. Messages shouldn't be posted out-of-order anymore, and backfilling shouldn't skip any chats.</p>
</li>
<li>
<p>Fixes to internal state. Deleting rooms with <code>clean-rooms</code> should work properly now.</p>
</li>
<li>
<p>Experimental work on inbound read receipts (in the <code>receipts-testing</code> branch)</p>
</li>
</ul>
<p>Discussion:</p>
<p><a href="https://matrix.to/#/#matrix-puppeteer-line:miscworks.net">#matrix-puppeteer-line:miscworks.net</a></p>
</blockquote>
<h2 id="dept-of-clients-iphone">Dept of Clients 📱</h2>
<h3 id="nheko">Nheko</h3>
<p><a href="https://github.com/Nheko-Reborn/nheko">Nheko</a> is a desktop client using Qt, Boost.Asio and C++17. It supports E2EE and intends to be full featured and nice to look at</p>
<p><a href="https://matrix.to/#/@deepbluev7:neko.dev">Nico (@deepbluev7:neko.dev)</a> reported:</p>
<blockquote>
<p>It's my pleasure to announce, that our testers didn't find the bugs I added and as such <a href="https://github.com/Nheko-Reborn/nheko/releases/tag/v0.8.2">version 0.8.2</a> is out now! The changes are too much to fit in a TWIM, so you can read the changelog here: https://github.com/Nheko-Reborn/nheko/blob/master/CHANGELOG.md</p>
<p>Thank you to all the contributors, that made this release possible! (Check the changelog! So many new faces!)</p>
<h4 id="highlights-from-this-release">Highlights from this release:</h4>
<ul>
<li>
<p>Edits ✏</p>
<ul>
<li>If you made a typo, just press the <code>Up</code> key and edit what you wrote.</li>
<li>Messages other users edited will get updated automatically and have a small pen symbol next to them.</li>
</ul>
</li>
<li>
<p>Privacy Screen 👁</p>
<ul>
<li>
<p>Blur your messages, when Nheko looses focus, which prevents others from
peeking at your messages.</p>
</li>
<li>
<p>You can configure the timeout of when this happens.</p>
</li>
</ul>
</li>
<li>
<p>Improved notifications ‼ (contributed by lorendb)</p>
<ul>
<li>
<p>No more breakage, because the message included a &gt; on KDE based DEs.</p>
</li>
<li>
<p>Render html and images where possible in the notification.</p>
</li>
<li>
<p>Render if a message is a reply or someone sent an emote message more nicely
where possible.</p>
</li>
<li>
<p>Encrypted notifications now show, that the content is encrypted instead of
being empty.</p>
</li>
</ul>
</li>
<li>
<p>Screenshare support in calls on X11 📺 (contributed by trilene)</p>
<ul>
<li>Share your screen in a call!</li>
<li>Select if your mouse cursor should be shown or not and if your webcam should be included.</li>
</ul>
</li>
<li>
<p>SEND MESSAGES AS RAINBOWS! 🌈 (contributed by LordMZTE)</p>
<ul>
<li>YES MESSAGES, EMOTES AND NOTICES!</li>
</ul>
</li>
</ul>
<p>I hope you'll have a wonderful time with this release and if you find any bugs, bug us in <a href="https://matrix.to/#/#nheko:nheko.im">#nheko:nheko.im</a> or open an issue on our <a href="https://github.com/Nheko-Reborn/nheko/issues">bug tracker</a>!</p>
</blockquote>
<h3 id="fractal">Fractal</h3>
<p><a href="https://matrix.to/#/@afranke:matrix.org">Alexandre Franke</a> offered:</p>
<blockquote>
<p>In keeping with our tradition of sending an update every two months, here’s what we’ve been up to since <a href="https://matrix.org/blog/2021/02/05/this-week-in-matrix-2021-02-05#fractal">the last one</a>.</p>
<p>Amongst a bunch of maintenance changes (dependency updates and the likes), we had a few ones that stand out:</p>
<ul>
<li>
<p><a href="https://gitlab.gnome.org/GNOME/fractal/-/merge_requests/695">Some views have been migrated to HdyStatusPage</a>. This provides a more homogeneous look across GNOME applications and help them fit better on smaller screens.</p>
</li>
<li>
<p>We noticed regressions around message replacement and removal (edit display and redactions) and we started fixing them.</p>
</li>
<li>
<p>Another regression made it impossible to join rooms by alias or id. This was fixed as well.</p>
</li>
<li>
<p>We updated information in a couple places and we now have clearer contributing guidelines.</p>
</li>
</ul>
<p>We rarely talk about new issues that are still open and tend to focus on fixed ones. We do have <a href="https://gitlab.gnome.org/GNOME/fractal/-/milestones/19">a milestone</a> with the remaining known blockers for our next version, 4.5, which we hope to be able to release Really Soon Now™.</p>
<p>But as interesting as all that is, it pales in comparison to our bigger announcement. We are rewriting Fractal! Julian, Alexandre and Thib have documented the thought process behind this decision and the work done so far. For more details, have a look at <a href="https://blogs.gnome.org/jsparber/2021/04/23/getting-fractal-up-to-speed/">Julian’s blog</a>. The summary is that even though such rewrites are usually frowned upon (for good reasons), two major technological shifts (from a homegrown backend to matrix-rust-sdk and from GTK3 to GTK4) made it an option that we needed to consider… and so we did! This should result in a cleaner codebase, easier to maintain in the long run, and improvements that we can share with the rest of the Matrix community.</p>
<p>The work for the rewrite currently happens in a <code>fractal-next</code> branch. So far, we have the basic boilerplate in place. The app launches, offers a basic login form, does initial sync and while the interface then looks very similar to stable Fractal, it will just load an unsorted list of rooms for now. Not very impressive on the visible side, but Julian has also been very busy contributing to matrix-rust-sdk.</p>
<p>Hopefully we’ll be able to break the aforementioned tradition and report more progress soon. Watch this space.</p>
</blockquote>
<h3 id="element-clients">Element Clients</h3>
<p><strong>Delight, a project to improve the Element experience</strong></p>
<ul>
<li>On Spaces, we’ve been continuing to implement <a href="https://github.com/matrix-org/matrix-doc/pull/3083">MSC3083</a> (Restricting room membership based on space membership) on the Web, Android &amp; Synapse, while also iterating on iOS.</li>
<li>Expect an announcement on more Spaces testing soon!</li>
</ul>
<p><strong>Web</strong></p>
<ul>
<li>1.7.26-rc.1 on staging
<ul>
<li>Added persistence of unsent messages across app restart</li>
<li>Improved room list filtering performance</li>
<li>Improved the image detail view</li>
</ul>
</li>
<li>1.7.26 planned for release on Monday</li>
</ul>
<p><strong>iOS</strong></p>
<ul>
<li>The new room screen UI has been released (1.3.4) on the App Store. It contains several improvements and bug fixes. One major bug fix is encryption keys that failed to be shared between the notification service and the app.</li>
<li>1.3.5 has been submitted to the app store. It contains another bug fix about encryption where the app failed to share new keys to all members of a room</li>
<li>Full story at: <a href="https://github.com/vector-im/element-ios/releases">https://github.com/vector-im/element-ios/releases</a> </li>
</ul>
<p><strong>Android</strong></p>
<ul>
<li>1.1.6 version has been released, fixing several issues reported with 1.1.5.</li>
</ul>
<h3 id="konheko">Konheko</h3>
<p><a href="https://matrix.to/#/@deepbluev7:neko.dev">Nico (@deepbluev7:neko.dev)</a> said:</p>
<blockquote>
<p>I released version 0.0.5 of my Sailfish client: https://openrepos.net/content/deepbluev7/konheko</p>
<p>It adds an about page and more importantly fixes a bug where closing the window would not relaunch the app via the task icon! Shout out to Rudi Timmermans, who made the about page and is now working on some further design improvements! Small release, since I was working on Nheko most of the time, but I hope I can add persistence and E2EE soon to it!</p>
</blockquote>
<p><img src="/blog/img/2021-04-23-AAetC-konheko-sailfish-on-floating-xperia.jpe" alt="2021-04-23-AAetC-konheko-sailfish-on-floating-xperia.jpe" /></p>
<p><a href="https://matrix.to/#/@bwindels:matrix.org">Bruno</a> commented:</p>
<blockquote>
<p>This would be an excellent screenshot to for a messenger app in some hacker movie</p>
</blockquote>
<p>Even in the movie they take a break to read TWIM!</p>
<h3 id="hydrogen">Hydrogen</h3>
<p>A minimal Matrix chat client, focused on performance, offline functionality, and broad browser support. https://github.com/vector-im/hydrogen-web/</p>
<p><a href="https://matrix.to/#/@bwindels:matrix.org">Bruno</a> offered:</p>
<blockquote>
<p>Working on invites and leaving rooms, almost ready, should be released early next week.</p>
</blockquote>
<h2 id="dept-of-sdks-and-frameworks">Dept of SDKs and Frameworks 🧰</h2>
<h3 id="libkazv-and-the-kazv-project">libkazv (and the Kazv Project)</h3>
<p><a href="https://matrix.to/#/@tusooa:tusooa.xyz">tusooa</a> told us:</p>
<blockquote>
<p><a href="https://lily.kazv.moe/kazv/libkazv">libkazv</a> is a sans-io C++ (gnu++17) client library built upon <a href="https://github.com/arximboldi/lager">lager</a>. Along with it there is <a href="https://lily.kazv.moe/kazv/kazv">kazv</a>, a kirigami/qml client, and a <a href="https://lily.kazv.moe/kazv/matrix-tencent-forward-bot">forward bot</a> between matrix and tencent qq. Talk to us on <a href="https://matrix.to/#/#kazv:tusooa.xyz">#kazv:tusooa.xyz</a> .</p>
<h4 id="updates">Updates</h4>
<p>In the past 2 week we (&quot;tusooa and her longcat,&quot; we hope someday we can</p>
<p>remove this annotation :P):</p>
<ol>
<li>Supported encrypted attachments. https://lily.kazv.moe/kazv/libkazv/-/merge_requests/5</li>
</ol>
</blockquote>
<h3 id="ruma">Ruma</h3>
<p><a href="https://www.ruma.io/">Ruma</a> is a set of Rust library crates around Matrix</p>
<p><a href="https://matrix.to/#/@jbecker:famedly.de">Johannes Becker</a> told us:</p>
<blockquote>
<p>After the last update Ruma 0.0.3 was released 🎉</p>
<p>But progress didn't stop there and more things happened:</p>
<ul>
<li>
<p><a href="https://github.com/DevinR528">@DevinR528</a> added <a href="https://github.com/ruma/ruma/pull/503">an Edu enum to represent EDUs from /federation/v1/send</a></p>
</li>
<li>
<p><a href="https://github.com/DevinR528">@DevinR528</a> added <a href="https://github.com/ruma/ruma/pull/516">code-gen for ephemeral event enum roomid accessor</a></p>
</li>
<li>
<p><a href="https://github.com/johannescpk">@johannescpk</a> added <a href="https://github.com/ruma/ruma/pull/514">conversion from <code>push_events::v1::IncomingRequest</code> to <code>sync_events::v1::Response</code></a></p>
</li>
<li>
<p><a href="https://github.com/johannescpk">@johannescpk</a> added <a href="https://github.com/ruma/ruma/pull/523">constructor for <code>push_events::v1::IncomingRequest</code></a></p>
</li>
<li>
<p><a href="https://github.com/jplatte">@jplatte</a> updated <a href="https://github.com/ruma/ruma/pull/530">CI to use GitHub actions instead of builds.sr.ht</a></p>
</li>
<li>
<p><a href="https://github.com/timokoesters">@timokoesters</a> fixed <a href="https://github.com/ruma/ruma/pull/527">the <code>verify_json</code> signature check algorithm</a></p>
</li>
<li>
<p><a href="https://github.com/johannescpk">@johannescpk</a> added <a href="https://github.com/ruma/ruma/pull/524/commits/7d845d0fa50c6bbb70387e92063cd1c892bf28f6">support for login type <code>m.login.application_service</code> on the <code>/register</code> endpoint</a></p>
</li>
<li>
<p><a href="https://github.com/johannescpk">@johannescpk</a>: added <a href="https://github.com/ruma/ruma/pull/524/commits/2d5af071015f92ede5d38926c7f9677df824d499">support for forcing access tokens to be sent even where they shouldn't be required</a></p>
</li>
<li>
<p><a href="https://github.com/jplatte">@jplatte</a> did lots of refactorings, reviewing of PRs and being helpful :D</p>
</li>
</ul>
</blockquote>
<h2 id="dept-of-interesting-projects">Dept of Interesting Projects 🛰️</h2>
<h3 id="cactus-comments-cactus">Cactus Comments 🌵</h3>
<p><a href="https://matrix.to/#/@asbjorn:olli.ng">Asbjørn</a> told us:</p>
<blockquote>
<p>Cactus Comments is a federated comment system for the open web built on Matrix.</p>
<p>We put out a blog post called <a href="https://cactus.chat/blog/mscs-were-excited-for/">MSCs We're Excited For</a>.</p>
<p>It's about some of the spec change proposals that we're keeping an eye on for Cactus Comments.</p>
<p>We also released Web Client v0.8.0!</p>
<p>This release brings some improvements to the <code>&quot;&lt;time&gt; ago&quot;</code> text, as well as the ability to let the client fetch more messages &quot;live&quot; (i.e. without reloading the page).  You can set a number of seconds in <code>updateInterval</code> to enable this, it is disabled by default.</p>
<ul>
<li>
<p>Make comment time a semantic <code>time</code> element (Thanks to @hectorjsmith for !4).</p>
</li>
<li>
<p>Add hover text to comment time (Thanks to @hectorjsmith for !4).</p>
</li>
<li>
<p>Show &quot;just now&quot; instead of negative seconds if message timestamp is ahead of the client's time</p>
</li>
<li>
<p>Add ability to fetch new messages periodically.</p>
</li>
<li>
<p>New config option: <code>updateInterval</code>, which controls how often to fetch new messages.</p>
</li>
<li>
<p>Change thumbnail size from 32x32 to 64x64.</p>
</li>
<li>
<p>Stylesheet: allow linebreaks in comments.</p>
</li>
</ul>
<p>/ipns/latest.cactus.chat is updated to point to the latest release, so sites linking there should already be using the new version.</p>
<p>Come play with the demo: <a href="https://cactus.chat/demo">https://cactus.chat/demo</a></p>
<p>Join our Matrix room: <a href="https://matrix.to/#/#cactus:cactus.chat">#cactus:cactus.chat</a></p>
</blockquote>
<h3 id="matrix-world-from-the-point-of-view-of-my-synapse">Matrix World from the point of view of my Synapse</h3>
<p><a href="https://matrix.to/#/@mtrnord:nordgedanken.dev">MTRNord</a> told us:</p>
<blockquote>
<p>https://grafana.nordgedanken.dev/d/HDVgeCXGk/matrix-server-stats?orgId=1&amp;refresh=15m&amp;var-server_name=All&amp;from=now-1h&amp;to=now  (Warning big dashboard)</p>
<p>This dashboard is a small experiment on what metadata you can get from matrix without any auth.</p>
<h4 id="how">How?</h4>
<p>It utilizes the synapse database to lookup alive and responding servers and on these currently just runs a query each 5m to check the version.</p>
<p>It allows a) to see the amount of servers and which servers my synapse at any point knows and b) to track the individual versions.</p>
<p>For my server at point of writing this results in 2348 Servers of which are 2269 running Synapse, 70 running Dendrite, 8 running Conduit and 1 running Construct.</p>
<h4 id="tech-used">Tech used</h4>
<p>Used under the hood is a small rust script doing all the heavy lifting of many thousand requests each five minutes (around 2-3 per server currently).</p>
<p>The data is cached mostly in RAM as well as being written to a influxdb oss 2.x which allows for the grafana integration.</p>
<h4 id="more-information">More information</h4>
<p>If you want to opt out feel free to block requests with the &quot;MTRNord/server_stats&quot; User-Agent.</p>
<p>You can find the source code at https://git.nordgedanken.dev/MTRNord/server_stats</p>
</blockquote>
<p>Very cool! Reminder to also check out this <a href="https://graph.settgast.org/d/z1nplqXik/matrix?orgId=1">set of graphs showing Synapse versions over time</a> from <a href="https://matrix.to/#/@chris:settgast.org">Chris</a>.</p>
<p>Warning!</p>
<p><a href="https://matrix.to/#/@timokoesters:fachschaften.org">Timo from Conduit</a> announced:</p>
<blockquote>
<p>writes a script to boost the number of conduit servers 😉</p>
</blockquote>
<h2 id="final-thoughts-thought-balloon">Final Thoughts 💭</h2>
<p>Several people shared this <em>spicy</em> article from fellow encrypted-messenger purveyors Signal: https://signal.org/blog/cellebrite-vulnerabilities/</p>
<h2 id="dept-of-ping-table-tennis-paddle-and-ball">Dept of Ping 🏓</h2>
<p>Here we reveal, rank, and applaud the homeservers with the lowest ping, as measured by <a href="https://github.com/maubot/echo">pingbot</a>, a <a href="https://github.com/maubot/maubot">maubot</a> that you can host on your own server.</p>
<h3 id="ping-maunium-net"><a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a></h3>
<p>Join <a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">hmko.net</td><td style="text-align: center">414</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">dendrite.thomcat.rocks</td><td style="text-align: center">867.5</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">matrix.kootstra.frl</td><td style="text-align: center">897.5</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">matrix.osl.frl</td><td style="text-align: center">1197.5</td></tr>
<tr><td style="text-align: center">5</td><td style="text-align: center">halogen.city</td><td style="text-align: center">1225.5</td></tr>
<tr><td style="text-align: center">6</td><td style="text-align: center">envs.net</td><td style="text-align: center">1371</td></tr>
<tr><td style="text-align: center">7</td><td style="text-align: center">thomcat.rocks</td><td style="text-align: center">1398</td></tr>
<tr><td style="text-align: center">8</td><td style="text-align: center">nordgedanken.dev</td><td style="text-align: center">1503.5</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">maescool.be</td><td style="text-align: center">1674</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">kittenface.studio</td><td style="text-align: center">2412</td></tr>
</tbody></table>
<h3 id="ping-no-synapse-maunium-net"><a href="https://matrix.to/#/#ping-no-synapse:maunium.net">#ping-no-synapse:maunium.net</a></h3>
<p>Join <a href="https://matrix.to/#/#ping-no-synapse:maunium.net">#ping-no-synapse:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">dendrite.foxomy.com</td><td style="text-align: center">445</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">dendrite01.fiksel.info</td><td style="text-align: center">719</td></tr>
</tbody></table>
<h2 id="that-s-all-i-know-checkered-flag">That's all I know 🏁</h2>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <nav class="pagination">
    <div class="prev">
        
        <a href="&#x2F;blog&#x2F;page&#x2F;8&#x2F;">‹ Previous</a>
        
    </div>
    <span class="page-number">9 / 57</span>
    <div class="prev">
        
        <a href="&#x2F;blog&#x2F;page&#x2F;10&#x2F;">Next ›</a>
        
    </div>
</nav>

</div>
    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="&#x2F;code"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p>© 2022 The Matrix.org Foundation C.I.C.</p>
</footer>

</body>

</html>
