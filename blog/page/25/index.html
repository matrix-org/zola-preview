<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - Blog</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/png" href="/assets/favicon.png" />
    <link rel="stylesheet" href="/style.css" />

    </head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            current">
            Blog
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <a href="&#x2F;docs&#x2F;" class="section ">
                Documentation
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    
                    
                    <a href="&#x2F;docs&#x2F;users&#x2F;">Users</a>
                    
                    
                    <a href="&#x2F;docs&#x2F;communities&#x2F;">Communities</a>
                    
                    
                    <a href="&#x2F;docs&#x2F;legacy&#x2F;">Legacy documentation</a>
                    
                </div>
            </div>
        </div>
        
        
        
        
        
        <div class="section-wrap">
            <a href="&#x2F;ecosystem&#x2F;" class="section ">
                Ecosystem
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bots&#x2F;">Bots</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        <div class="content">
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2020&#x2F;07&#x2F;03&#x2F;this-week-in-matrix-2020-07-03&#x2F;" title="This Week in Matrix 2020-07-03">This Week in Matrix 2020-07-03</a></h1>
            <span>
                03.07.2020 00:00
                ‚Äî
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                ‚Äî
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="matrix-live">Matrix Live üéô</h2>
<iframe width="560" height="315" src="https://www.youtube.com/embed/1FYCgcl_oJs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2 id="dept-of-status-of-matrix-face-with-th">Dept of <em>Status of Matrix</em> üå°Ô∏è</h2>
<h3 id="open-tech-will-save-us-4">Open Tech Will Save Us 4</h3>
<p>The next <a href="https://matrix.org/open-tech-will-save-us/">Open Tech Will Save Us</a> event will take place on Wednesday, that's 2020-07-08! Line-up is confirmed as:</p>
<ul>
<li><strong>Jay Graber</strong> (<a href="https://twitter.com/arcalinea">@arcalinea</a>, <a href="https://matrix.to/#/@arcalinea:matrix.org">@arcalinea:matrix.org</a>), creator of <a href="https://happening.net/">Happening</a> and <a href="https://medium.com/decentralized-web/decentralized-social-networks-e5a7a2603f53">all-around decentralisation fan</a> will summarize an overview of the decentralized social media ecosystem that they're working on.</li>
<li><strong>Ania M. Piotrowska</strong> (<a href="https://twitter.com/aniampiotrowska">@aniampiotrowska</a>), known for her work on <a href="https://nymtech.net/">Nym</a>, Loopix, and at UCL will present &quot;Building private future for the internet with the Nym mixnet&quot;.</li>
<li><strong>Burak Nehbit</strong> (<a href="https://twitter.com/nehbit">@nehbit</a>, <a href="https://matrix.to/#/@burak:tomesh.net">@burak:tomesh.net</a>) will give a deep dive into his work on <a href="https://getaether.net/">Aether P2P</a>.</li>
</ul>
<h2 id="dept-of-spec-scroll">Dept of Spec üìú</h2>
<p><a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> reported:</p>
<blockquote>
<p>Here's your weekly spec update! The heart of Matrix is the specification - and this is modified by Matrix Spec Change (MSC) proposals. Learn more about how the process works at <a href="https://matrix.org/docs/spec/proposals.">https://matrix.org/docs/spec/proposals.</a></p>
<h4 id="msc-status">MSC Status</h4>
<p><strong>Finished Final Comment Period:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2604">MSC2604: Accept device information for the login fallback endpoint</a></li>
</ul>
<p><strong>MSCs in Final Comment Period:</strong></p>
<ul>
<li><em>No MSCs are in FCP.</em></li>
</ul>
<p><strong>New MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2659">MSC2659: Application service ping endpoint</a></li>
</ul>
<h4 id="spec-core-team">Spec Core Team</h4>
<p>In terms of Spec Core Team MSC focus for this week, as last week we are sticking with &quot;implementation&quot; for now. We'll be back soon :)</p>
</blockquote>
<h2 id="dept-of-gsoc-mortar-board">Dept of GSoC üéìÔ∏è</h2>
<p>This week was the first evaluations, we'll have results to share next week.</p>
<h3 id="matrix-ircd-gsoc">matrix-ircd (GSOC)</h3>
<p><a href="https://matrix.to/#/@karlik:matrix.org">karlik</a> offered:</p>
<blockquote>
<p>for matrix-ircd:</p>
<ul>
<li>
<p>Removed <code>futures</code> 0.1 dependency &amp; move all modules to <code>futures</code> 0.3</p>
</li>
<li>
<p>Update all tests to use async / await</p>
</li>
<li>
<p>Begin merging updated <code>futures</code> to <code>async_await</code> branch</p>
</li>
</ul>
</blockquote>
<h3 id="go-neb">go-neb</h3>
<p>From <a href="https://matrix.to/#/@nikofil:matrix.org">nikofil</a>:</p>
<blockquote>
<ul>
<li>e2ee merged and some bugs fixed (pr #324)! You should be able to use neb normally in an encrypted room now, if that's not the case please let us know!</li>
<li>Added integration tests for both encrypted and unencrypted rooms to neb in order to catch things that might break some core functionality in a subtle way (issue #326)</li>
<li>Similarly, created a PR for mautrix-go for testing the Olm and Megolm session establishment and message encryption / decryption (pr #12)</li>
<li>Next up, working on a service for neb for testing the crypto functionality of other clients: neb will send messages to a room, rotate keys etc. and your client is supposed to respond!</li>
</ul>
</blockquote>
<h2 id="dept-of-servers-europea">Dept of Servers üè¢</h2>
<h3 id="dendrite-gomatrixserverlib">Dendrite / gomatrixserverlib</h3>
<p>Dendrite is a next-generation homeserver written in Go</p>
<p><a href="https://matrix.to/#/@neilalexander:matrix.org">Neil Alexander</a> said:</p>
<blockquote>
<p>This week has seen some new architectural changes and a number of bugs fixed:</p>
<ul>
<li>
<p>A new Current State Server component has been added, which tracks room state</p>
</li>
<li>
<p>The Public Rooms API has been deprecated in favour of the Current State Server</p>
</li>
<li>
<p>Event size limits are now honoured with the correct return code</p>
</li>
<li>
<p>Invites have seen some refactoring and retiring invites should work better now</p>
</li>
<li>
<p>The federation sender now persists unsent PDUs to the database and will automatically retry when Dendrite is restarted, making resend behaviour much more reliable (particularly in the P2P demos)</p>
</li>
<li>
<p>Some room checks in <code>/state</code> and <code>/state_ids</code> have been fixed</p>
</li>
<li>
<p>Some additional restrictions have been added to <code>/send</code> and we now return the correct error codes</p>
</li>
<li>
<p>A bug where current state was incorrectly used when getting missing/backfill events has been fixed</p>
</li>
<li>
<p>A bug where you couldn't rejoin a room that you created after wiping your database has been fixed</p>
</li>
</ul>
<p>Spec compliance:</p>
<ul>
<li>
<p>Client-Server APIs: 45%</p>
</li>
<li>
<p>Server-Server APIs: 50%</p>
</li>
</ul>
</blockquote>
<h3 id="conduit">Conduit</h3>
<p>Conduit is a Matrix homeserver written in Rust <a href="https://conduit.rs">https://conduit.rs</a></p>
<p><a href="https://matrix.to/#/@timo:koesters.xyz">timo</a> reported:</p>
<blockquote>
<p>This week I didn't have much time to work on Conduit, but together with @the0 we could implement both password changing and account deactivation!</p>
<p>With last week's key backup and cross-signing PR landing in master, here's a list of all major features still missing from Conduit:</p>
<ul>
<li>
<p>All of Federation</p>
</li>
<li>
<p>Appservices</p>
</li>
<li>
<p>Push Notifications</p>
</li>
<li>
<p>Notification settings</p>
</li>
<li>
<p>Message Search</p>
</li>
<li>
<p>Presence</p>
</li>
<li>
<p>Room Tagging</p>
</li>
</ul>
<p>Thanks to everyone who supports me on <a href="https://liberapay.com/timokoesters">Liberapay</a> or Bitcoin!</p>
</blockquote>
<h3 id="synapse">Synapse</h3>
<p><a href="https://matrix.to/#/@richvdh:sw1v.org">richvdh</a> reported:</p>
<blockquote>
<p>Synapse <a href="https://github.com/matrix-org/synapse/releases/tag/v1.15.2">1.15.2</a> shipped this week with some important security fixes - if you haven't already upgraded, please do asap! Meanwhile, we're also preparing a <a href="https://github.com/matrix-org/synapse/releases/tag/v1.16.0rc2">1.16 release</a> with the normal round of bugfixes and incremental improvements. </p>
<p>The big focus in the Synapse team continues to be on performance for larger Synapse instances, which is reflected in the support in 1.16 for running multiple media worker processes. We're working on giving other worker processes the same treatment, so expect more of the same in the weeks to come!</p>
</blockquote>
<h2 id="synapse-deployment-inbox-tray">Synapse Deployment üì•Ô∏è</h2>
<h3 id="kubernetes">Kubernetes</h3>
<p><a href="https://matrix.to/#/@ace:kittenface.studio">Ananace</a> announced:</p>
<blockquote>
<p>Just pushed the 1.15.2 tags for the K8s-optimized Synapse image.</p>
</blockquote>
<h3 id="docker-matrix">Docker matrix</h3>
<p><a href="https://matrix.to/#/@mathijs:matrix.vgorcum.com">Mathijs</a> offered:</p>
<blockquote>
<p>The avhost image including coturn, jemalloc, and mjolnir for synapse 1.15.2 was released at avhost/docker-matrix:v1.15.2, while the RCs images were released on my personal repo; mvgorcum/docker-matrix:v1.16.0rc1 and mvgorcum/docker-matrix:v1.16.0rc2</p>
</blockquote>
<h2 id="dept-of-bridges-bridge-at-night">Dept of Bridges üåâ</h2>
<h3 id="twilio-maubot-based-sms-bridge">Twilio &amp; Maubot based SMS bridge</h3>
<p><a href="https://matrix.to/#/@jeff:casavant.org">Jeff Casavant</a> offered:</p>
<blockquote>
<p>I wrote a very simple Twilio &amp; Maubot based SMS bridge recently which I've been running for long enough with no delivery errors that I'd consider it stable.  It's oriented towards bridging many individuals to single rooms via SMS.   You'll need to have a Maubot instance in order to run it.</p>
<p><a href="https://github.com/jeffcasavant/MaubotTwilio">https://github.com/jeffcasavant/MaubotTwilio</a></p>
</blockquote>
<h2 id="dept-of-clients-iphone">Dept of Clients üì±</h2>
<h3 id="syphon-new-client-announcement">Syphon - new client announcement</h3>
<p><a href="https://matrix.to/#/@usbfingers:matrix.org">usbfingers</a> offered:</p>
<blockquote>
<p>Hey TWIM ,</p>
<p>Tuesday, I did a soft announcement of open alpha for Syphon - a privacy centric matrix client</p>
<p>Source: <a href="https://github.com/syphon-org/syphon">https://github.com/syphon-org/syphon</a></p>
<p>Website: <a href="https://syphon.org">https://syphon.org</a></p>
<p>Features:</p>
<ul>
<li>
<p>no analytics.</p>
</li>
<li>
<p>no proprietary third party services</p>
<ul>
<li>iOS will have APNS opt-in, but will be made clear to the user</li>
</ul>
</li>
<li>
<p>all data is AES-256 encrypted at rest</p>
</li>
<li>
<p>E2EE for direct chats using <a href="https://gitlab.matrix.org/matrix-org/olm">Olm/Megolm</a></p>
<ul>
<li>group chats will be supported in the coming weeks</li>
</ul>
</li>
<li>
<p>all indicators of presence are opt-in only (typing indicators, read receipts, etc)</p>
</li>
<li>
<p>customize themes and colors throughout the app</p>
</li>
</ul>
<p>Please note there's still a lot of work to do and a lot of features missing that other clients have. It's <strong>not</strong> ready for everyday use.</p>
<p>Please let me know if you have any questions or would like to contribute!</p>
</blockquote>
<h3 id="riot-web">Riot Web</h3>
<p><a href="https://matrix.to/#/@jryans:matrix.org">Ryan</a> told us:</p>
<blockquote>
<p>This week we released 1.6.8, and the highlights include:</p>
<ul>
<li>
<p>Upgraded to Electron 9 for desktop builds, which should fix various Linux tray icon issues</p>
</li>
<li>
<p>Jump to first unread message improved to handle reactions and other non-message events</p>
</li>
<li>
<p>Desktop now shows a file saved message when downloading a file</p>
</li>
<li>
<p>Cross-signing setup flows reworked to simplify choosing a security phrase or key</p>
</li>
</ul>
</blockquote>
<h3 id="fractal">Fractal</h3>
<p><a href="https://matrix.to/#/@afranke:matrix.org">Alexandre Franke</a> announced:</p>
<blockquote>
<p><a href="https://matrix.org/blog/2020/02/28/this-week-in-matrix-2020-02-28#fractal">The previous Fractal update</a> was quite a while ago but we‚Äôve kept busy.</p>
<p>There has been a lot of under the hood work that users won‚Äôt notice and which we won‚Äôt delve into. In addition to them, we have a few nice things:</p>
<ul>
<li>
<p>Matrix API tokens are redacted in logs for better privacy when submitting bug reports.</p>
</li>
<li>
<p>A send button was added next the message entry. This is especially relevant for touch screens.</p>
</li>
<li>
<p>We are less noisy with typing notifications that we send out.</p>
</li>
<li>
<p>We support SOCKS proxies.</p>
</li>
<li>
<p>Notifications for non text messages have been tweaked.</p>
</li>
<li>
<p>We gained support for edited message display. They are replaced with the newer content and a little icon is shown next to them. Editing messages is not supported yet though.</p>
</li>
</ul>
</blockquote>
<p><img src="/blog/img/2020-07-03-ZFc9l-Captured%E2%80%99%C3%A9crande2020-07-0317-26-53.png" alt="2020-07-03-ZFc9l-Captured‚Äô√©crande2020-07-0317-26-53.png" /></p>
<h3 id="novachat-july-3-update">NovaChat July 3 update:</h3>
<p><a href="https://matrix.to/#/@eric:nova.chat">eric</a> told us:</p>
<blockquote>
<ul>
<li>
<p>Added icons for each chat network to room list</p>
</li>
<li>
<p>Got Twitter DM bridge working again</p>
</li>
<li>
<p>Improved search bar UI</p>
</li>
<li>
<p>On-boarded 30 new users!</p>
</li>
<li>
<p>Launched (accidentally) on <a href="https://news.ycombinator.com/item?id=23693371">Hacker News</a></p>
</li>
<li>
<p>Fixed a ton of reliability bugs in the 7 bridges we support (<a href="https://gitlab.com/nova/issues/-/issues?scope=all&amp;utf8=%E2%9C%93&amp;state=closed">changelog</a>)</p>
</li>
<li>
<p><strong>We are hiring (full-time or part-time) remote React developers to work on our (source available, still TBD on final license) <a href="https://gitlab.com/nova/nova-web">Riot fork</a></strong> Send me a DM if interested.</p>
</li>
</ul>
</blockquote>
<p><img src="/blog/img/2020-07-03-LUhRG-image.png" alt="2020-07-03-LUhRG-image.png" /></p>
<p><a href="https://nova.chat/">NovaChat</a> has been getting good coverage lately, <a href="https://twitter.com/nolimits/status/1277997805227958274">on Twitter</a> and <a href="https://news.ycombinator.com/item?id=23693371">Hacker News</a>.</p>
<h3 id="riotx-published-in-the-beta-channel-of-the-riot-android-app">RiotX published in the beta channel of the Riot-Android app</h3>
<p><a href="https://matrix.to/#/@benoit.marty:matrix.org">benoit</a> announced:</p>
<blockquote>
<p>RiotX is now published in the beta channel of the Riot-Android app: <a href="https://play.google.com/store/apps/details?id=im.vector.app">https://play.google.com/store/apps/details?id=im.vector.app</a>. You can get the last beta version by becoming a tester if you want to. There will be no more update of RiotX on the PlayStore. Current RiotX users should signout from RiotX and signin again on Riot-Android. Riot-Android users do not have to do that. The changelog can be read here <a href="https://github.com/vector-im/riotX-android/releases/tag/v0.91.3-beta.">https://github.com/vector-im/riotX-android/releases/tag/v0.91.3-beta.</a> And this week we are working on implementing what's remain on our list, and we are fixing as many bugs as we can before the great release.</p>
</blockquote>
<h3 id="riot-ios">Riot-iOS</h3>
<p><a href="https://matrix.to/#/@stevio:matrix.org">steve</a> offered:</p>
<blockquote>
<p>This week, we made some improvements for the cross-signing UX.</p>
<p>We started to work on the rebranding.
And we also made some small improvements in the display of some events in the timeline.</p>
</blockquote>
<h2 id="dept-of-ops">Dept of Ops üõ†</h2>
<h3 id="ma1sd-release-2-4-0">ma1sd release 2.4.0</h3>
<p><a href="https://matrix.to/#/@ma1uta:ru-matrix.org">ma1uta</a> offered:</p>
<blockquote>
<p>ma1sd release 2.4.0.</p>
<p>Changes:</p>
<ul>
<li>
<p>Enabled v2 API by default.</p>
</li>
<li>
<p>Added experimental support of the database connection pooling for postgresql</p>
</li>
<li>
<p>Added option to bind ma1sd to specified address.</p>
</li>
<li>
<p>Added error logging for LDAP authorization.</p>
</li>
<li>
<p>Added full request and response logs for debug.</p>
</li>
<li>
<p>Avoid including bridged user in directory lookups (https://github.com/ma1uta/ma1sd/pull/45)</p>
</li>
<li>
<p>Add experimental multi-platform buillds for amd64 and arm64 platforms.</p>
</li>
<li>
<p>remove warning about matrix-synapse-ldap3 (https://github.com/ma1uta/ma1sd/pull/50)</p>
</li>
</ul>
<p>Bugfixes:</p>
<ul>
<li>
<p><a href="https://github.com/ma1uta/ma1sd/issues/26">https://github.com/ma1uta/ma1sd/issues/26</a></p>
</li>
<li>
<p><a href="https://github.com/ma1uta/ma1sd/issues/29">https://github.com/ma1uta/ma1sd/issues/29</a> (partial)</p>
</li>
<li>
<p><a href="https://github.com/ma1uta/ma1sd/issues/22">https://github.com/ma1uta/ma1sd/issues/22</a></p>
</li>
<li>
<p><a href="https://github.com/ma1uta/ma1sd/issues/27">https://github.com/ma1uta/ma1sd/issues/27</a></p>
</li>
</ul>
<p>Downloads:</p>
<ul>
<li>
<p><a href="https://github.com/ma1uta/ma1sd/releases/tag/2.4.0">https://github.com/ma1uta/ma1sd/releases/tag/2.4.0</a></p>
</li>
<li>
<p>docker pull ma1uta/ma1sd:latest</p>
</li>
<li>
<p>docker pull ma1uta/ma1sd:2.4.0-arm64 (image for arm64)</p>
</li>
</ul>
</blockquote>
<h3 id="matrix-docker-ansible-deploy">matrix-docker-ansible-deploy</h3>
<p>This <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy">Ansible playbook</a> is meant to easily let you run your own Matrix homeserver.</p>
<p><a href="https://matrix.to/#/@slavi:devture.com">Slavi</a> said:</p>
<blockquote>
<p>it appears to be puppet week in <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy">matrix-docker-ansible-deploy</a>-land!</p>
<p>Thanks to various contributors (<a href="https://github.com/jdreichmann">Johanna Dorothea Reichmann</a>, <a href="https://github.com/tulir">Tulir Asokan</a> and <a href="https://github.com/izissise">Hugues Morisset</a>), the playbook has gained support for 4 new bridges: <a href="https://github.com/Sorunome/mx-puppet-instagram">mx-puppet-instagram</a> (<a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/docs/configuring-playbook-bridge-mx-puppet-instagram.md">see our docs</a>), <a href="https://github.com/Sorunome/mx-puppet-twitter">mx-puppet-twitter</a> (<a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/docs/configuring-playbook-bridge-mx-puppet-twitter.md">see our docs</a>), <a href="https://github.com/Sorunome/mx-puppet-discord">mx-puppet-discord</a> (<a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/docs/configuring-playbook-bridge-mx-puppet-discord.md">see our docs</a>) and <a href="https://github.com/icewind1991/mx-puppet-steam">mx-puppet-steam</a> (<a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/docs/configuring-playbook-bridge-mx-puppet-steam.md">see our docs</a>).</p>
<p>This brings the total number of bridges supported by the playbook to 15!</p>
</blockquote>
<h2 id="dept-of-bots-robot-face">Dept of Bots ü§ñ</h2>
<h3 id="matrix-reminder-bot-v0-1-0">matrix-reminder-bot v0.1.0</h3>
<p><a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> offered:</p>
<blockquote>
<p>The release, v0.1.0, of matrix-reminder-bot is out!  üéâ</p>
<p>I've eliminated most of the bad bugs that were present, so will be doing some feature development for a bit. As of now, the features of the bot are:</p>
<ul>
<li>
<p>Setting reminders</p>
</li>
<li>
<p>Have a reminder ping yourself or the whole room</p>
</li>
<li>
<p>Alarms which continue ringing until silenced</p>
</li>
<li>
<p>Support for end-to-end encrypted rooms</p>
</li>
<li>
<p>Postgres and SQLite support</p>
</li>
<li>
<p>Docker support</p>
</li>
</ul>
<p>Find it here: <a href="https://github.com/anoadragon453/matrix-reminder-bot/">https://github.com/anoadragon453/matrix-reminder-bot/</a> and join the discussion at <a href="https://matrix.to/#/#matrix-reminder-bot:matrix.org">#matrix-reminder-bot:matrix.org</a>!</p>
<p>Enjoy! ‚ù§Ô∏è</p>
</blockquote>
<h3 id="ipfs-bot">IPFS Bot</h3>
<p><a href="https://matrix.to/#/@mtrnord:nordgedanken.dev">MTRNord</a> offered:</p>
<blockquote>
<p>Did you ever have the issue that a media event sent from someone is too large for your HS and you don't want to fiddle with the link?</p>
<p>IPFS Bot might be a solution. Invite @ipfs:nordgedanken.dev or Check out <a href="https://github.com/MTRNord/matrix-ipfs-bot/">https://github.com/MTRNord/matrix-ipfs-bot/</a> to use the bot.</p>
<p>If you reply to any media event with <code>!ipfs</code> the bot will send you a link to the media stored on ipfs.</p>
<p>Known issues are:</p>
<ul>
<li>
<p>E2EE not yet working (It joins but can't yet decrypt the related event)</p>
</li>
<li>
<p>Error handling is basically not existent. Therefore crashes might happen until I sort this out.</p>
</li>
<li>
<p>It currently does very verbose logging. This will be removed when the bot is more stable</p>
</li>
<li>
<p>Images sent from RiotX sometimes seem to not play nice with ruma</p>
</li>
</ul>
<p>(Demo for the IPFS Bot): <a href="https://ipfs.nordgedanken.dev/ipfs/QmSfde3V4QL1Lv96Ar62qgnhaEtyi9jzPkKRCBMh4Wqm6F?filename=2020-06-27_16-41-09.mp4">https://ipfs.nordgedanken.dev/ipfs/QmSfde3V4QL1Lv96Ar62qgnhaEtyi9jzPkKRCBMh4Wqm6F?filename=2020-06-27_16-41-09.mp4</a></p>
</blockquote>
<p>We could include this video here, but it seems me appropriate to link to an actual IPFS location.</p>
<h3 id="cody-repl-for-your-matrix-chat-rooms">cody, REPL for your Matrix chat rooms</h3>
<p><a href="https://matrix.to/#/@carl:bordum.dk">carl</a> offered:</p>
<blockquote>
<p>Hello, I am announcing my first matrix bot - cody - that will evaluate code snippets in your Matrix rooms and return the result. Here is an example interaction:</p>
<pre style="background-color:#1e1e1e;color:#dcdcdc;"><code><span>
</span><span>user&gt; !py &quot;Hello world!&quot;
</span><span>cody&gt; &#39;Hello world!&#39;
</span><span>
</span><span>user&gt; !py list(range(10))
</span><span>cody&gt; [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
</span><span>
</span></code></pre>
<p>You can chat with him @cody:bordum.dk and view the source code at <a href="https://gitlab.com/carlbordum/matrix-cody">https://gitlab.com/carlbordum/matrix-cody</a></p>
<p>This initial release only supports Python, but the plan is to add support for more languages in the next few weeks. The repo might also be of interest to some of you as it has CI, CD to DockerHub, complete dev environment with cody, pantalaimon, synapse and riot using docker-compose, simple metrics and Grafana-dashboards-as-code.</p>
</blockquote>
<h2 id="dept-of-interesting-projects">Dept of Interesting Projects üõ∞Ô∏è</h2>
<h3 id="matrix-notepad-version-v0-2-2">Matrix Notepad Version <code>v0.2.2</code></h3>
<p><a href="https://matrix.to/#/@kb1rd:kb1rd.net">KB1RD</a> told us:</p>
<blockquote>
<blockquote>
<p>A real-time collaborative text editor using the Matrix protocol.</p>
</blockquote>
<p><a href="https://matrix-notepad.kb1rd.net/">matrix-notepad.kb1rd.net</a></p>
<p>Nope, it's not dead.</p>
<ul>
<li>
<p>New version of <code>logootish-js</code> with a completely new algorithm</p>
<ul>
<li>In particular, I should note that this new algorithm is tested extensively, so I think the bugs should be out</li>
</ul>
</li>
<li>
<p>Corresponding updates to internal event structure</p>
</li>
<li>
<p>Fixed UI &amp; CSS bugs</p>
</li>
<li>
<p>Improved UX for room title editor</p>
</li>
<li>
<p>Currently, conflicting text will be displayed, but conflicts will not be indicated in any way</p>
</li>
<li>
<p>I almost forgot to mention: The room list is now filtered using the typed rooms MSC (event ID <code>org.matrix.msc1840</code>). #test-document0:kb1rd.net is a room with that state event set.</p>
</li>
</ul>
<p>I also made a flame graph of the internal algorithm and I'm surprised by some of the results. The good thing is that I think there's quite a few ways to speed up the algorithm. Here it is:</p>
<p><a href="https://logootish-js.matrix-notepad.kb1rd.net/flamegraph/test/listmodel-nc.perf.js/flamegraph.html#%7B%22merged%22:false,%22nodeId%22:null,%22excludeTypes%22:%5B%22cpp%22,%22regexp%22,%22v8%22,%22native%22,%22init%22,%22core%22%5D%7D">https://logootish-js.matrix-notepad.kb1rd.net/flamegraph/test/listmodel-nc.perf.js/flamegraph.html#{%22merged%22:false,%22nodeId%22:null,%22excludeTypes%22:[%22cpp%22,%22regexp%22,%22v8%22,%22native%22,%22init%22,%22core%22]}</a></p>
</blockquote>
<p><img src="/blog/img/2020-07-03-SmuSp-image.png" alt="2020-07-03-SmuSp-image.png" /></p>
<h2 id="dept-of-ping-table-tennis-paddle-and-ball">Dept of Ping üèì</h2>
<p>Here we reveal, rank, and applaud the homeservers with the lowest ping, as measured by <a href="https://github.com/maubot/echo">pingbot</a>, a <a href="https://github.com/maubot/maubot">maubot</a> that you can host on your own server. Join <a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">fairydust.space</td><td style="text-align: center">385</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">talk.go7box.xyz</td><td style="text-align: center">502.5</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">gottliebtfreitag.de</td><td style="text-align: center">524</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">phys.ethz.ch</td><td style="text-align: center">552</td></tr>
<tr><td style="text-align: center">5</td><td style="text-align: center">eisfunke.com</td><td style="text-align: center">997</td></tr>
<tr><td style="text-align: center">6</td><td style="text-align: center">c.mau.dev</td><td style="text-align: center">1422</td></tr>
<tr><td style="text-align: center">7</td><td style="text-align: center">halogen.city</td><td style="text-align: center">1613</td></tr>
<tr><td style="text-align: center">8</td><td style="text-align: center">nzbr.de</td><td style="text-align: center">1722</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">asra.gr</td><td style="text-align: center">1774</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">utzutzutz.net</td><td style="text-align: center">1875</td></tr>
</tbody></table>
<h2 id="that-s-all-i-know-checkered-flag">That's all I know üèÅ</h2>
<p>See you <a href="https://www.bbc.co.uk/news/uk-politics-53281539">first thing tomorrow morning</a>, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2020&#x2F;07&#x2F;02&#x2F;synapse-1-15-2-released-with-security-fixes&#x2F;" title="Synapse 1.15.2 released with security fixes">Synapse 1.15.2 released with security fixes</a></h1>
            <span>
                02.07.2020 17:58
                ‚Äî
                <a href="/category/releases">
                    Releases
                </a>
                ‚Äî
                <a href="/author/richard-van-der-hoff">
                    Richard van der Hoff
                </a>
            </span>
            
        </header>
        <div>
            <p>Folks, today we are releasing Synapse 1.15.2, which is a security release which contains fixes to two separate problems. We are also putting out the second release candidate for the forthcoming Synapse 1.16, including the same fixes.</p>
<p>Firstly, we have fixed a bug in the implementation of the room state resolution algorithm which could cause users to be unexpectedly ejected from rooms (Synapse issue <a href="https://github.com/matrix-org/synapse/issues/7742">#7742</a>).</p>
<p>Secondly, we have improved the security of pages served as part of the Single-Sign-on login flows to prevent clickjacking attacks. Thank you to <a href="https://sandhose.fr/">Quentin Gliech</a> for reporting this.</p>
<p>We are not aware of either of these vulnerabilities being exploited in the wild, but we recommend that administrators upgrade as soon as possible. Those on Synapse 1.15.1 or earlier should upgrade to Synapse 1.15.2, while those who have already upgraded to Synapse 1.16.0rc1 should upgrade to 1.16.0rc2.</p>
<p>Get the new releases from any of the usual sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md. 1.15.2 is on github <a href="https://github.com/matrix-org/synapse/releases/tag/v1.15.2">here</a>, and 1.16.0rc2 is <a href="https://github.com/matrix-org/synapse/releases/tag/v1.16.0rc2">here</a>.</p>
<p>Changelog for 1.15.2 follows:</p>
<h2 id="synapse-1-15-2-2020-07-02">Synapse 1.15.2 (2020-07-02)</h2>
<p>Due to the two security issues highlighted below, server administrators are
encouraged to update Synapse. We are not aware of these vulnerabilities being
exploited in the wild.</p>
<h3 id="security-advisory">Security advisory</h3>
<ul>
<li>
<p>A malicious homeserver could force Synapse to reset the state in a room to a
small subset of the correct state. This affects all Synapse deployments which
federate with untrusted servers. (<a href="https://github.com/matrix-org/synapse/commit/96e9afe62500310977dc3cbc99a8d16d3d2fa15c">96e9afe6</a>)</p>
</li>
<li>
<p>HTML pages served via Synapse were vulnerable to clickjacking attacks. This
predominantly affects homeservers with single-sign-on enabled, but all server
administrators are encouraged to upgrade.  (<a href="https://github.com/matrix-org/synapse/commit/ea26e9a98b0541fc886a1cb826a38352b7599dbe">ea26e9a9</a>)</p>
<p>This was reported by <a href="https://sandhose.fr/">Quentin Gliech</a>.</p>
</li>
</ul>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2020&#x2F;06&#x2F;26&#x2F;this-week-in-matrix-2020-06-26&#x2F;" title="This Week in Matrix 2020-06-26">This Week in Matrix 2020-06-26</a></h1>
            <span>
                26.06.2020 00:00
                ‚Äî
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                ‚Äî
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="matrix-live">Matrix Live üéô</h2>
<p>It's demos this week!</p>
<ul>
<li>Riot X video calls (valere)</li>
<li>Room list (TravisR)</li>
<li>Notifications - (Michael (t3chguy) &amp; richvdh)</li>
<li>E2E Onboarding (Dave &amp; Nad)</li>
<li>Modular SAML support (ChristianP)</li>
</ul>
<iframe width="560" height="315" src="https://www.youtube.com/embed/40FiPUmT0gc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2 id="dept-of-status-of-matrix-face-with-th">Dept of <em>Status of Matrix</em> üå°</h2>
<h3 id="merch-returns">Merch Returns!</h3>
<p>Yes it's back! For the first time in months we are shipping branded IRL-items featuring Matrix branding. Head to <a href="https://shop.matrix.org/">The Shop</a> to stock-up.</p>
<h2 id="dept-of-spec-scroll">Dept of Spec üìú</h2>
<p><a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> announced:</p>
<blockquote>
<p>Here's your weekly spec update! The heart of Matrix is the specification - and this is modified by Matrix Spec Change (MSC) proposals. Learn more about how the process works at <a href="https://matrix.org/docs/spec/proposals.">https://matrix.org/docs/spec/proposals.</a></p>
<h4 id="msc-status">MSC Status</h4>
<p><strong>Merged MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2631">MSC2631: Add default_payload to PusherData</a></li>
</ul>
<p><strong>MSCs in Final Comment Period:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2604">MSC2604: Accept device information for the login fallback endpoint</a> (merge)</li>
</ul>
<p><strong>New MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2654">[WIP] MSC2654: Unread counts</a></li>
</ul>
<h4 id="spec-core-team">Spec Core Team</h4>
<p>In terms of Spec Core Team MSC focus for this week, unfortunately our three MSCs from last week ( <a href="https://github.com/matrix-org/matrix-doc/issues/2366">MSC2366</a> (verification flows), <a href="https://github.com/matrix-org/matrix-doc/issues/2403">MSC2403</a> (knocking), and <a href="https://github.com/matrix-org/matrix-doc/issues/2630">MSC2630</a> (SAS security)) are still pre-FCP. Most of the team has been quite busy with implementation for the past few weeks. Instead of advertising those 3 MSCs again, we're going to switch the focus to &quot;implementation&quot; for a bit until we're freed up again.</p>
<p>So the focus for this week is: MSC implementation work. However, this should not discourage any MSC authors from responding to MSC feedback in the meantime üôÇ</p>
</blockquote>
<p><img src="/blog/img/2020-06-26-MxzSP-plot.png" alt="2020-06-26-MxzSP-plot.png" /></p>
<h2 id="dept-of-gsoc-mortar-board">Dept of GSoC üéì</h2>
<h3 id="ruma-gsoc">Ruma GSoC</h3>
<p><a href="https://matrix.to/#/@devinr528:matrix.org">devinr528</a> reported:</p>
<blockquote>
<p>This week in the ruma/matrix Google Summer of Code project, ruma-events was made ready for use! After adding stripped and sync event generation to the <a href="https://github.com/ruma/ruma/commit/fdf87a38a219933ffe99b17baf87841a79702f28"><code>event_enum!</code> macro</a> there were only a few small tweaks needed to try it out in some dependent rust crates. I spent a few days converting <a href="https://github.com/matrix-org/matrix-rust-sdk/pull/63">matrix-rust-sdk</a> to use the ruma-monorepo. Since ruma is used on both client and server-side, I also opened a PR to update <a href="https://git.koesters.xyz/timo/conduit/pulls/133">Conduit</a>, a homeserver implementation written in Rust. To test that everything worked together, I updated <a href="https://github.com/DevinR528/rumatui/commit/1ae8776f9a59c297c8c9b2287f7c830ab67302b1">rumatui</a>, my command-line client written in rust.</p>
<p>Then I could test that Conduit sent, and matrix-rust-sdk received the new ruma events successfully. While updating, I felt the pain of not having accessor methods for the <code>Any*Event</code> enums to get at the event fields held within. I have opened a <a href="https://github.com/ruma/ruma/pull/97">pull request</a> to add the generation of these methods to the <code>event_enums!</code> macro. Hopefully, the Conduit and matrix-sdk PR's will be merged and the ruma monorepo can be tested in the wild!</p>
</blockquote>
<h3 id="matrix-ircd-gsoc">matrix-ircd GSOC</h3>
<p><a href="https://matrix.to/#/@karlik:matrix.org">karlik</a> told us:</p>
<blockquote>
<p>Moved matrix protocol, irc protocol, and bridge module to futures 0.3. Converted some utility functions to new futures, and updated the http implementation to use the standardized Hyper library instead of using a custom http implementation.</p>
</blockquote>
<h3 id="go-neb">go-neb</h3>
<p><a href="https://matrix.to/#/@nikofil:matrix.org">nikofil</a> said:</p>
<blockquote>
<ul>
<li>
<p>Created PR for enabling e2ee across all services! This required a few changes to how the bot client is initialised, as well as changes to all services to use the new functionality instead of directly sending messages to a room. <a href="https://github.com/matrix-org/go-neb/pull/324">https://github.com/matrix-org/go-neb/pull/324</a></p>
</li>
<li>
<p>Added code from another of tulir's projects to Mautrix to allow storing the crypto material (olm / megolm sessions, accounts etc.) in a SQL database, adding a second way besides using Gob storage. <a href="https://github.com/tulir/mautrix-go/pull/10">https://github.com/tulir/mautrix-go/pull/10</a></p>
</li>
<li>
<p>Future plans are to work on the library itself to add any features that might be missing.</p>
</li>
</ul>
</blockquote>
<h3 id="html-embeddable-chat-rooms">HTML embeddable chat rooms</h3>
<p><a href="https://matrix.to/#/@arnav-t:matrix.org">arnav-t</a> told us:</p>
<blockquote>
<p>This week I've worked on the following features for the project &quot;HTML embeddable chat rooms&quot; under GSoC '20:</p>
<h4 id="added-support-for-signing-in">Added support for signing-in</h4>
<h4 id="via-sign-in-popup">Via sign-in popup</h4>
<p>The user can enter their credentials into the modal dialogue box.</p>
<h4 id="via-postmessage-interface">Via <code>postMessage</code> interface</h4>
<pre data-lang="js" style="background-color:#1e1e1e;color:#dcdcdc;" class="language-js "><code class="language-js" data-lang="js"><span>
</span><span>iframe.contentWindow.postMessage({
</span><span>    cmd: </span><span style="color:#d69d85;">&#39;login&#39;</span><span>,
</span><span>
</span><span>    args: {
</span><span>        user: </span><span style="color:#d69d85;">&#39;username&#39;</span><span>,
</span><span>
</span><span>        passwd: </span><span style="color:#d69d85;">&#39;password&#39;
</span><span>    }
</span><span>
</span><span>}, origin);
</span></code></pre>
<p><em>Arguments:</em></p>
<p><code>args</code> (object):</p>
<ul>
<li>
<p><code>username</code> (string) - Username</p>
</li>
<li>
<p><code>passwd</code> (string) - Password</p>
</li>
</ul>
<p><em>Response:</em></p>
<pre data-lang="js" style="background-color:#1e1e1e;color:#dcdcdc;" class="language-js "><code class="language-js" data-lang="js"><span>{
</span><span>
</span><span>    status: </span><span style="color:#d69d85;">&#39;success&#39;</span><span>, 
</span><span>    message: </span><span style="color:#d69d85;">&#39;Attempting sign in...&#39;
</span><span>
</span><span>}
</span></code></pre>
<h4 id="added-support-for-default-avatars">Added support for default avatars</h4>
<p>Using the same design as Riot. However, I am just using flexbox and text instead of drawing on an HTML5 canvas. The HSL color is generated by hashing the user ID.</p>
<h4 id="quoting-and-replying">Quoting and replying</h4>
<p>Added on-hover buttons and reply popup above message composer similar to Riot web. Quoting prepends the message (quoted) to the message composer similar to Riot web and replying would also work similar to Riot web. It will be fully functional once markdown parsing is added.</p>
<h4 id="guest-access">Guest access</h4>
<p>The client now supports guest access. If no access token or user ID is provided in the configuration file, the client attempts to register a guest account on the home server. Room contents are viewed using <code>peekInRoom</code>.</p>
<p>If the guest attempts to send a message, only then <code>joinRoom</code> is called to avoid spam (each page load would lead to a guest joining the room).</p>
</blockquote>
<h3 id="nheko">Nheko</h3>
<p><a href="https://matrix.to/#/@crdy2k1:matrix.org">Chethan</a> told us:</p>
<blockquote>
<p>SAS Verification is completed and works !</p>
<p>Supports both Emoji and Decimal Verification
Only uses <strong>curve25519-hkdf-sha256</strong> as key_agreement protocol</p>
<p>Brand new UserProfile written entirely in qml.
<a href="https://github.com/Nheko-Reborn/nheko/pull/203">https://github.com/Nheko-Reborn/nheko/pull/203</a></p>
<h4 id="mtxclient">Mtxclient</h4>
<p>Updated with needed APIs for SAS verification.</p>
<p><a href="https://github.com/Nheko-Reborn/mtxclient/pull/32">https://github.com/Nheko-Reborn/mtxclient/pull/32</a></p>
</blockquote>
<iframe width="560" height="315" src="https://www.youtube.com/embed/KZ4krRplCtg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h3 id="opsdroid">Opsdroid</h3>
<p><a href="https://matrix.to/#/@tyagdit:matrix.org">tyagdit</a> reported:</p>
<blockquote>
<h4 id="port-to-matrix-nio">Port to Matrix-nio</h4>
<ul>
<li>
<p>The matrix connector is now using matrix-nio!</p>
</li>
<li>
<p>Bots can send and receive texts, images, files as before </p>
</li>
<li>
<p>No change in configuration required, just update opsdroid and run as before</p>
</li>
<li>
<p>Encryption is not yet implemented</p>
</li>
<li>
<p>You can check out the PR <a href="https://github.com/opsdroid/opsdroid/pull/1418">here</a> </p>
</li>
</ul>
<h4 id="enabling-e2ee">Enabling E2EE</h4>
<ul>
<li>
<p>Sending and receiving encrypted texts, edits, replies works just as normal messages</p>
</li>
<li>
<p>Images and files are being worked on</p>
</li>
<li>
<p>User shouldn't have to change much about their configuration to use encryption</p>
</li>
<li>
<p>Some testing is due</p>
</li>
<li>
<p>Check out the progress <a href="https://github.com/opsdroid/opsdroid/pull/1548">here</a></p>
</li>
</ul>
</blockquote>
<h2 id="dept-of-servers-europea">Dept of Servers üè¢</h2>
<h3 id="dendrite">Dendrite</h3>
<p>Dendrite is a next-generation homeserver written in Go</p>
<p><a href="https://matrix.to/#/@kegan:matrix.org">kegan</a> reported:</p>
<blockquote>
<p>This week has been mainly about testing to ensure that all the progress over the past few months is kept up-to-date and correct. We've also added a few features in order to get certain sytests working. To that end:</p>
<ul>
<li>
<p>Invites can now be declined over federation and they will be reflected in <code>/sync</code> responses.</p>
</li>
<li>
<p>Errors encountered when joining a room over federation are now sent back to the client.</p>
</li>
<li>
<p>Errors encountered when accepting an invite over federation are now sent back to the client.</p>
</li>
<li>
<p>Dendrite will now check server names meet the server name grammar in the specification.</p>
</li>
<li>
<p>A bug which caused <code>client-api-proxy</code> to not actually proxy correctly has been fixed, thanks @fantashley !</p>
</li>
<li>
<p><code>/send</code> now abides by the limits in the specification: 50 PDUs / 100 EDUs.</p>
</li>
<li>
<p>The docker-compose scripts now include <code>appservice_api</code>, thanks @fantashley !</p>
</li>
<li>
<p>Sending invites over federation will now fall back to v1 if v2 fails with a 404.</p>
</li>
<li>
<p>Dendrite now implements <code>room.timeline.limit</code> completely (in both in-line and stored filter formats).</p>
</li>
<li>
<p>Dendrite now sets the <code>limited</code> flag on <code>/sync</code> responses correctly.</p>
</li>
</ul>
<p>In addition, we now have support for collecting code coverage output from SyTest. This indicates we are testing roughly 70% of the Dendrite codebase. The remaining 30% are hard to reach via integration tests (e.g database failures, communication problems between internal APIs).</p>
<p>Spec compliance:</p>
<ul>
<li>
<p>Client-Server APIs: 45%, up from 40% last week</p>
</li>
<li>
<p>Server-Server APIs: 50%, up from 38% last week</p>
</li>
</ul>
<p>In total, we've made an additional 45 sytests pass this week.</p>
</blockquote>
<h3 id="mascarene">Mascarene</h3>
<p><a href="https://matrix.to/#/@nico:beerfactory.org">Nico</a> reported:</p>
<blockquote>
<p><a href="https://gitlab.com/mascarene/mascarene/-/releases/v0.2.0">Mascarene v0.2.0</a> has been released. </p>
<p>This version implements a minimal set of client API endpoints to work with Riot and allow user registration, </p>
<p>room creation, invitation and messages sending on the same running instance (no federation support).</p>
<p><a href="https://hub.docker.com/r/mascarene/mascarene-homeserver">Docker image</a> are also available. See <a href="https://gitlab.com/mascarene/mascarene/-/blob/master/docs/install.md">this documentation</a></p>
<p>for rough installation instructions.</p>
<p>Join us at <a href="https://matrix.to/#/#mascarene:beerfactory.org">#mascarene:beerfactory.org</a></p>
</blockquote>
<h3 id="conduit">Conduit</h3>
<p>Conduit is a Matrix homeserver written in Rust <a href="https://conduit.rs">https://conduit.rs</a></p>
<p><a href="https://matrix.to/#/@timo:koesters.xyz">timo</a> told us:</p>
<blockquote>
<p>This week I finished the cross-signing PR:</p>
</blockquote>
<iframe width="560" height="315" src="https://www.youtube.com/embed/lPAAxyg2UD4" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<blockquote>
<p>To try it out yourself, open Riot (preferably <a href="https://riot.im/develop)">https://riot.im/develop)</a> and join the <code>&lt;https://conduit.koesters.xyz:14004&gt;</code> homeserver.</p>
<p>Thanks to everyone who supports me on Liberapay or Bitcoin!</p>
</blockquote>
<h3 id="synapse">Synapse</h3>
<p><a href="https://matrix.to/#/@neilj:matrix.org">Neil</a> told us:</p>
<blockquote>
<p>This week we‚Äôve been working on further improvements to event persistence and ironed out a nasty bug where an unusually long state resolution could block the reactor overall and impact send times. We seem to have got to the bottom of this and m.org has improved a lot as of today.</p>
<p>More generally we‚Äôve been trying to characterise matrix.org performance so that we can continue to improve over the coming months. </p>
<p>We are going to focus on:-</p>
<ul>
<li>
<p>Client send event</p>
</li>
<li>
<p>Outbound Federation Latency</p>
</li>
<li>
<p>Inbound Federation Latency</p>
</li>
<li>
<p>Room joins</p>
</li>
</ul>
<p>As well as tracking the CS API generally.</p>
<p>We are using <a href="https://en.wikipedia.org/wiki/Apdex">apdex</a> with a satisfied limit of 250 ms and a tolerating limit of 1000 ms. By the end of the Summer we will aim to hit an apdex score of 0.9 for each area. </p>
<p>For instance here is Federation Send Event Apdex graphed overtime. You can see that we are averaging about ~0.8 currently, so plenty to keeping us busy! </p>
</blockquote>
<p><img src="/blog/img/2020-06-26-JR9Vx-Screenshot2020-06-26at17.51.57.png" alt="2020-06-26-JR9Vx-Screenshot2020-06-26at17.51.57.png" /></p>
<blockquote>
<p>Next up will be to work on Outbound Federation Latency</p>
<p>Aside from that we‚Äôve been working hard on the upcoming Notifications improvements. Mapping the push rules to the demands of the UI has been challenging and we‚Äôve been through several iterations. If you‚Äôd like to learn more take a look at Michael and Rich‚Äôs explanation in this week‚Äôs Matrix Live. Rich‚Äôs presentation has Sheltie pictures #justsayin‚Äô</p>
</blockquote>
<h2 id="dept-of-bridges-bridge-at-night">Dept of Bridges üåâ</h2>
<p>It's a Tulir kind of week.</p>
<h3 id="mautrix-whatsapp">mautrix-whatsapp</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> told us:</p>
<blockquote>
<p>The WhatsApp bridge got a bunch of improvements this week, such as:</p>
<ul>
<li>
<p>Matrix -&gt; WhatsApp gif bridging</p>
</li>
<li>
<p>Bridge status notices if your phone battery is low</p>
</li>
<li>
<p>A command to get group invite links and another command to join groups using invite links</p>
</li>
<li>
<p>Matrix &lt;-&gt; WhatsApp bridging of most membership changes</p>
</li>
</ul>
</blockquote>
<h3 id="mautrix-facebook">mautrix-facebook</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> reported:</p>
<blockquote>
<p>The Messenger bridge mostly got bugfixes, but also Matrix-&gt;Facebook bridging of all media and location messages</p>
</blockquote>
<h3 id="mautrix-telegram">mautrix-telegram</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> offered:</p>
<blockquote>
<p>The Telegram bridge now supports logging in by scanning a QR code, although it requires using the master branch of Telethon instead of a release. I also fixed bridging captions in file messages, so they're now bridged as separate messages like with images</p>
</blockquote>
<h3 id="half-shot-bridges-roundup">Half-Shot bridges roundup</h3>
<p><a href="https://matrix.to/#/@Half-Shot:half-shot.uk">Half-Shot</a> offered:</p>
<blockquote>
<p>Hey all, I've got several releases to talk about this week!</p>
<p>First, <code>matrix-appservice-slack</code> has been updated to <a href="https://github.com/matrix-org/matrix-appservice-slack/releases/tag/1.4.0">1.4.0</a> with several quality of life changes such as automatically setting the bot profile on startup, supporting logging out of slack accounts and adding a health checkpoint. There are also quite a few bugfixes so make sure you update.</p>
<p><code>matrix-appservice-irc</code> was also bumped to <a href="https://github.com/matrix-org/matrix-appservice-irc/releases/tag/0.18.0">0.18.0</a> with the headline features being Node 14.x support.</p>
<p>We've also shipped <a href="https://github.com/matrix-org/matrix-appservice-irc/releases/tag/0.19.0-rc1">0.19.0-rc1</a> which has stopped support for Node 10.x. Why? Because we're adding worker support to the bridge! This release starts to make use of the new(ish) <code>worker_threads</code> feature so that we can dish out processing to separate threads (running their own UV event loops, for node enthusiasts). The first thing to be workerized is metrics, so that metrics may still be reported should the bridge become saturated, but we plan to split out more work as things progress.</p>
<p>Finally <code>matrix-appservice-bridge</code> got a few fixes to support our new worker land, as well as being updated to support <code>matrix-js-sdk</code> 6.0.0. You can checkout the changes for <a href="https://github.com/matrix-org/matrix-appservice-bridge/releases/tag/1.13.1">1.13.1 here</a>.</p>
</blockquote>
<h2 id="dept-of-clients-iphone">Dept of Clients üì±</h2>
<h3 id="fluffychat">Fluffychat</h3>
<p><a href="https://matrix.to/#/@sorunome:sorunome.de">sorunome</a> offered:</p>
<blockquote>
<p>Fluffychat Version 0.15.0 is released, and should be available in the Play Store, on F-Droid and in IOS Testflight soon! This makes Fluffychat the first non-Riot matrix client that supports Cross-Signing.</p>
<h4 id="features">Features:</h4>
<ul>
<li>
<p>New room list app bar design</p>
</li>
<li>
<p>Chat app bar transparent</p>
</li>
<li>
<p>Implement web file picker</p>
</li>
<li>
<p>Minor design and UX improvements</p>
</li>
<li>
<p>Implement Cross Signing</p>
</li>
<li>
<p>Restore keys from online key backup</p>
</li>
<li>
<p>Added translations: Czech, Spanish, Slovakian</p>
</li>
</ul>
<h4 id="changes">Changes:</h4>
<ul>
<li>
<p>Show presences of users sharing a direct chat</p>
</li>
<li>
<p>Big refactoring</p>
</li>
</ul>
<h4 id="fixes">Fixes:</h4>
<ul>
<li>Various fixes, including e2ee fixes and olm session recovery</li>
</ul>
</blockquote>
<p><img src="/blog/img/2020-06-26-rN8uB-scaled_screenshot_20200619-173753_fluffychat.png.jpg" alt="2020-06-26-rN8uB-scaled_screenshot_20200619-173753_fluffychat.png.jpg" /></p>
<h3 id="pattle-version-0-18-0">Pattle: version 0.18.0</h3>
<p><a href="https://matrix.to/#/@wilko:pattle.im">Wilko</a> said:</p>
<blockquote>
<p>A new version has been released and will soon become available on Google Play, TestFlight and F-Droid!</p>
<h4 id="changes-1">Changes</h4>
<ul>
<li>
<p>You can now play videos!</p>
</li>
<li>
<p>The main public address (room alias) of chats are now shown in chat's details</p>
</li>
<li>
<p>The time of sending is now always show on the right side for images</p>
</li>
<li>
<p>Notifications are grouped nicer, there's now one notification for Pattle, grouped by chat</p>
</li>
<li>
<p>Fix sending an image crashing the app</p>
</li>
<li>
<p>Fix urls not being accounted for in time placement (<a href="https://pattle.dev/pattle/app/-/issues/132">#132</a>)</p>
</li>
<li>
<p>Fix chat input not scrolling</p>
</li>
<li>
<p>Fix multiple issues regarding showing notifications</p>
</li>
<li>
<p>F-Droid: All left-over proprietary code is now removed, thanks to Bubu for notifying me!</p>
</li>
</ul>
<h4 id="get-pattle">Get Pattle</h4>
<ul>
<li>
<p><strong>Android</strong></p>
<ul>
<li><strong><a href="https://f-droid.org/en/packages/im.pattle.app/">F-Droid</a></strong></li>
<li><strong><a href="https://play.google.com/store/apps/details?id=im.pattle.app">Google Play</a></strong></li>
</ul>
</li>
<li>
<p><strong><a href="https://testflight.apple.com/join/uTytydST">iOS (TestFlight)</a></strong></p>
</li>
</ul>
<h4 id="get-involved">Get involved</h4>
<ul>
<li>
<p><strong>Follow development</strong>: <a href="https://matrix.to/#/#app:pattle.im">#app:pattle.im</a></p>
</li>
<li>
<p><strong>Issues or suggestions</strong>: <a href="https://pattle.dev/pattle/app/issues">Post them here!</a></p>
</li>
<li>
<p><strong>Donate</strong>: If you want to support Pattle, <a href="https://liberapay.com/wilko/">you can donate!</a></p>
</li>
</ul>
</blockquote>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Nh-x4px_6v0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h3 id="mirage">Mirage</h3>
<p><a href="https://matrix.to/#/@miruka:privacytools.io">miruka*</a> reported:</p>
<blockquote>
<p>0.5.2 is now out:</p>
<h4 id="added">Added</h4>
<ul>
<li>
<p><strong>Sessions/device list</strong>: you can now inspect, rename and manually verify</p>
<p>your devices from the account settings page.
The interface is still work in progress, keyboard navigation and signing</p>
<p>out sessions will be added in a next version.</p>
</li>
<li>
<p>Re-add client-side unread/highlight room indicators.</p>
<p>If your account has push notifications disabled, which precise cross-client
counters depend on, the local indicators will be used as fallback.</p>
</li>
<li>
<p>Support the <code>MIRAGE_CACHE_DIR</code> environment variable to override where</p>
<p>files and thumbnails are downloaded</p>
</li>
<li>
<p>A bunch of theme additions, check the <a href="https://github.com/mirukana/mirage/releases/tag/v0.5.2">full log</a></p>
</li>
</ul>
<h4 id="changed">Changed</h4>
<ul>
<li>
<p>Overhauled account settings to match the design of other tabbed pages.</p>
<p>The horizontal layout design has been removed due to complicated code and 
being impossible to extend without breaking it.</p>
</li>
<li>
<p>The display name field in account settings is now colored, </p>
<p>preview your new display name's color as you type</p>
</li>
<li>
<p>For rooms without image avatars set, the room settings's avatar color now</p>
<p>responds to the name field as you type</p>
</li>
<li>
<p>Overhauled scrollbars:</p>
<ul>
<li>
<p>Now match the Mirage theme and much better visibility</p>
</li>
<li>
<p>No more right margin for the timeline's bar</p>
</li>
<li>
<p>Minimum height to prevent the bar from becoming impossible to grab</p>
</li>
</ul>
</li>
<li>
<p>Use brighter text for room names of rooms that have unread messages</p>
</li>
<li>
<p>Buttons, tabs, text fields and areas now have animated bottom borders </p>
<p>to represent keyboard focus instead of being highlighted like when hovered</p>
</li>
<li>
<p>Text fields and areas can now have rounded corners, following the theme</p>
</li>
<li>
<p>Tabbed pages (Sign In, Add Chat, etc) can now be swiped left and right</p>
</li>
<li>
<p>Popups can now be scrolled when their content is bigger than the</p>
<p>window's height</p>
</li>
<li>
<p>Replace most generic checkmark icons for apply buttons in popups</p>
</li>
<li>
<p>Pressing escape in forms will consistently trigger corresponding</p>
<p>cancel buttons</p>
</li>
</ul>
<h4 id="fixed">Fixed</h4>
<ul>
<li>Various fixes, see <a href="https://github.com/mirukana/mirage/releases/tag/v0.5.2">full changelog</a></li>
</ul>
</blockquote>
<p><img src="/blog/img/2020-06-26-KSsyD-sessions.png" alt="2020-06-26-KSsyD-sessions.png" /></p>
<h3 id="nheko-1">Nheko</h3>
<p><a href="https://github.com/Nheko-Reborn/nheko">Nheko</a> is a desktop client using Qt, Boost.Asio and C++17. It supports E2EE (with the notable exception being device verification for now) and intends to be full featured and nice to look at</p>
<p><a href="https://matrix.to/#/@deepbluev7:neko.dev">Nico (@deepbluev7:neko.dev)</a> offered:</p>
<blockquote>
<ul>
<li>
<p>Most of our time this week was spent trying out device verification with Chethan. It's fun and I could finally file bugs in Nheko against someone else!</p>
</li>
<li>
<p>We fixed some issues that should hopefully make text in the timeline less blurry again.</p>
</li>
<li>
<p>Fixed a bug which cause some clients like fluffychat to break in E2EE rooms (we accidentally sent a null relation when not replying...)</p>
</li>
<li>
<p>Fixed an issue, where Nheko didn't verify the format of html formatted messages correctly, causing it to render messages in a way which wasn't compliant to the spec.</p>
</li>
<li>
<p>Thanks to the work of a Pirate and his friends, current versions of Nheko should be available in backports for Debian Buster once again!</p>
</li>
</ul>
</blockquote>
<h3 id="riot-chat-for-nextcloud">Riot Chat for Nextcloud</h3>
<p><a href="https://matrix.to/#/@gary:garykim.dev">Gary Kim</a> announced:</p>
<blockquote>
<p><a href="https://github.com/gary-kim/riotchat/releases/tag/v0.5.0">Riot Chat for Nextcloud 0.5.0</a> The new version updated the Riot.im version to 1.6.6 and added the ability for admins to set their own custom config for Riot rather then using the settings interface in addition to a few bug fixes.</p>
<p>Riot Chat for Nextcloud allows individuals and organizations with a Nextcloud instance to easily set up and configure their own Riot instance with just a few clicks on a web interface without the need to write a config file.</p>
<p>Join the development Matrix room at <a href="https://matrix.to/#/#riotchatfornextcloud-general:garykim.dev">#riotchatfornextcloud-general:garykim.dev</a>. Check out the source code <a href="https://github.com/gary-kim/riotchat">here</a>.</p>
</blockquote>
<h3 id="riot-ios">Riot-iOS</h3>
<p><a href="https://matrix.to/#/@Manu:matrix.org">Manu</a> told us:</p>
<blockquote>
<p>This week, we completed UX for cross-signing and secure backup. We made associated settings but we still need to polish them.</p>
<p>Sygnal and the new push extension have been updated to match Apple requirement and our privacy concerns. Events content are no more sent anymore.
We started to implement the new room notifications settings UI.</p>
</blockquote>
<h3 id="riotx">RiotX</h3>
<p><a href="https://matrix.to/#/@benoit.marty:matrix.org">benoit</a> told us:</p>
<blockquote>
<p>This week we were mainly working on cross-signing, room settings, VoIP stabilization and performance improvement.</p>
</blockquote>
<h3 id="riot-android">Riot-Android</h3>
<p><a href="https://matrix.to/#/@benoit.marty:matrix.org">benoit</a> reported:</p>
<blockquote>
<p>We will publish at the beginning of next week a beta version of the migration to RiotX codebase on the beta channel of the PlayStore, to be able to ensure the migration works fine, before release it to production.</p>
</blockquote>
<h2 id="dept-of-sdks-and-frameworks">Dept of SDKs and Frameworks üß∞</h2>
<h3 id="matrix-dart-sdk-v0-33-0">Matrix Dart SDK: v0.33.0</h3>
<p><a href="https://matrix.to/#/@wilko:pattle.im">Wilko</a> told us:</p>
<blockquote>
<ul>
<li>
<p>Support custom events using <code>RawRoomEvent</code> and <code>RawStateEvent</code></p>
<p>Check the <a href="https://pub.dev/packages/matrix_sdk/versions/0.33.0+1#custom-events">README</a> for details.</p>
</li>
<li>
<p>Add ability to register using <code>Homeserver.register</code></p>
</li>
<li>
<p>Add <code>VideoMessageEvent</code></p>
</li>
<li>
<p>Add <code>Room.canonicalAlias</code> and <code>Room.alternativeAliases</code></p>
</li>
<li>
<p>Add <code>format</code> field to <code>TextMessage</code> (thank you <a href="https://matrix.to/#/@scappino:matrix.org">Cyril</a>!)</p>
</li>
<li>
<p>Remove <code>equatable</code> dependency</p>
</li>
</ul>
<p><a href="https://pub.dev/packages/matrix_sdk/">Get it on pub!</a></p>
</blockquote>
<h3 id="net-matrix-webhook">Net::Matrix::Webhook</h3>
<p><a href="https://matrix.to/#/@joepie91:pixie.town">joepie91</a> discovered this project, presented yesterday at Conference in the Cloud:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Fby5i2sDHCY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<blockquote>
<p>Net::Matrix::Webhook implements a webhook, so you can easily post messages to your matrix chat rooms via HTTP requests. It uses IO::Async to start a web server and connect as a client to matrix. It will then forward your messages.</p>
</blockquote>
<h3 id="matrix-scrape-emoji-translations-script-project">matrix_scrape_emoji_translations script project</h3>
<p><a href="https://matrix.to/#/@sorunome:sorunome.de">sorunome</a> announced:</p>
<blockquote>
<p>Soru wrote a quick program that scrapes riot-web, riot-x and riot-ios for translations of the emoji names for emoji verification and combines them all into an easily-readable json file, so that other client developers can use it. Since all three riot versions have a different set of translations, it might also be helpful for them. You can find the source code along with the outputted json files <a href="https://github.com/Sorunome/matrix_scrape_emoji_translations">here</a>.</p>
</blockquote>
<h2 id="dept-of-bots-robot-face">Dept of Bots ü§ñ</h2>
<h3 id="scandinavia-and-the-world-comic-bot">&quot;Scandinavia and the World&quot; comic bot</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> offered:</p>
<blockquote>
<p>To add to my existing xkcd and CommitStrip maubot plugins, there's now a similar plugin for <a href="https://satwcomic.com/">Scandinavia and the World</a> comics: <a href="https://github.com/maubot/satwcomic">https://github.com/maubot/satwcomic</a></p>
<p>Like the other bots, you can self-host it, use my instance (@satw:maunium.net) in your own room or simply join <a href="https://matrix.to/#/#satwcomic:maunium.net">#satwcomic:maunium.net</a> to automatically get the latest comics in Matrix.</p>
</blockquote>
<h3 id="matrix-webhooker">matrix-webhooker</h3>
<p><a href="https://matrix.to/#/@kinta:communia.org">kinta</a> announced:</p>
<blockquote>
<p>A bot that will allow to room administrators and moderators to generate room custom commands (in a similar way how telegram commands are thought).</p>
<p>When they are invoked it will post the message event object data and a predefined context object along with a token to a custom url. More information in: <a href="https://gitlab.com/communia/matrix-webhooker">https://gitlab.com/communia/matrix-webhooker</a></p>
</blockquote>
<h3 id="matrix-webhook">Matrix webhook</h3>
<p><a href="https://matrix.to/#/@kinta:communia.org">kinta</a> told us:</p>
<blockquote>
<p><a href="https://www.drupal.org/project/matrix_webhook">https://www.drupal.org/project/matrix_webhook</a></p>
<p>Drupal module to receive links shared from a matrix room.  Get links provided by a matrix bot in a room.
With this module one can get media from a matrix own bot to any drupal site. Once installed and bot is created through matrix-webhooker bot.
A  blog entry about it (in spanish) in <a href="https://planet.communia.org/content/enlaces-desde-matrix">https://planet.communia.org/content/enlaces-desde-matrix</a></p>
</blockquote>
<h2 id="dept-of-interesting-projects">Dept of Interesting Projects üõ∞</h2>
<h3 id="pollvis-new-poll-visualiser-project">Pollvis - new poll visualiser project</h3>
<p>We have a couple of conferences coming up who are planning to use Matrix as part of their offering, much as we do with <a href="https://matrix.org/open-tech-will-save-us/">Open Tech Will Save Us</a>. To help add some more features, I created an MVP &quot;poll visualiser&quot;, which watches a room and works in tandem with the <a href="https://github.com/babolivier/matrix-poll-bot">poll-bot</a> from Brendan Abolivier . This project is still at the beginning, but might be interesting to some! Find the code at <a href="https://github.com/benparsons/pollvis">https://github.com/benparsons/pollvis</a>.</p>
<h2 id="dept-of-ping-table-tennis-paddle-and-ball">Dept of Ping üèì</h2>
<p>Here we reveal, rank, and applaud the homeservers with the lowest ping, as measured by <a href="https://github.com/maubot/echo">pingbot</a>, a <a href="https://github.com/maubot/maubot">maubot</a> that you can host on your own server. Join <a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">fairydust.space</td><td style="text-align: center">331</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">services.pyrahex.com</td><td style="text-align: center">537</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">heitkoetter.net</td><td style="text-align: center">604</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">nitro.chat</td><td style="text-align: center">646.5</td></tr>
<tr><td style="text-align: center">5</td><td style="text-align: center">mchus.pro</td><td style="text-align: center">660</td></tr>
<tr><td style="text-align: center">6</td><td style="text-align: center">privacytools.io</td><td style="text-align: center">671</td></tr>
<tr><td style="text-align: center">7</td><td style="text-align: center">matrix.vgorcum.com</td><td style="text-align: center">727.5</td></tr>
<tr><td style="text-align: center">8</td><td style="text-align: center">eiselecloud.de</td><td style="text-align: center">740</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">aruiz.io</td><td style="text-align: center">855</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">neko.dev</td><td style="text-align: center">923.5</td></tr>
</tbody></table>
<h2 id="that-s-all-i-know-checkered-flag">That's all I know üèÅ</h2>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2020&#x2F;06&#x2F;19&#x2F;this-week-in-matrix-2020-06-19&#x2F;" title="This Week in Matrix 2020-06-19">This Week in Matrix 2020-06-19</a></h1>
            <span>
                19.06.2020 00:00
                ‚Äî
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                ‚Äî
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="matrix-live">Matrix Live üéô</h2>
<iframe width="560" height="315" src="https://www.youtube.com/embed/OC07UqYUnOE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2 id="dept-of-status-of-matrix-face-with-th">Dept of <em>Status of Matrix</em> üå°</h2>
<h3 id="matrix-merch-store-is-back">Matrix Merch Store is back</h3>
<p>Are you emerging from lockdown? Dazed and wondering what to wear? Need some apparel which says &quot;<em>I'm cool and I have great taste in decentralised communications protocols</em>&quot;? Then you should visit <a href="https://shop.matrix.org/">The Matrix Merch Store</a>!</p>
<p>T-Shirts, Hoodies, Zipped Hoodies and Stickers available now!</p>
<h3 id="matrix-decomposition-analysis-of-an-access-control-approach-on-transaction-based-dags-without-finality">Matrix Decomposition: Analysis of an Access Control Approach on Transaction-based DAGs without Finality</h3>
<p><a href="https://matrix.to/#/@florian:dsn.tm.kit.edu">Florian</a> told us:</p>
<blockquote>
<p><a href="https://dsn.tm.kit.edu/">We</a> published another scientific paper on Matrix, this time it is called <a href="https://doi.org/10.1145/3381991.3395399">Matrix Decomposition: Analysis of an Access Control Approach on Transaction-based DAGs without Finality</a>!
Its main topic is the question of how access control can work based on a structure that only provides a partial order on events and no consensus on the current state, i.e. the Matrix Event Graph. We found some concrete, non-critical security issues related to both incorrect specification  as well as divergent homeserver behaviour. While the last remaining mitigations found their way into Synapse 1.14.0, we provide ideas on structural solutions to avoid both problem classes in the future using formal verification.</p>
<p>The paper was published at the <a href="http://www.sacmat.org/2020/index.php">ACM Symposium on Access Control Models and Technologies(SACMAT)</a> last week.
My talk went well (üéâ), it was recording and is yet to be published by the conference.</p>
</blockquote>
<p>The paper was <a href="/blog/2020/06/16/matrix-decomposition-an-independent-academic-analysis-of-matrix-state-resolution">previously mentioned on the Matrix blog</a>.</p>
<h2 id="dept-of-spec-scroll">Dept of Spec üìú</h2>
<p><a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> reported:</p>
<blockquote>
<p>Here's your weekly spec update! The heart of Matrix is the specification - and this is modified by Matrix Spec Change (MSC) proposals. Learn more about how the process works at <a href="https://matrix.org/docs/spec/proposals.">https://matrix.org/docs/spec/proposals.</a></p>
<h4 id="msc-status">MSC Status</h4>
<p><strong>Merged MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2399">MSC2399: Reporting that decryption keys are withheld</a></li>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/1703">MSC1703: encrypting recovery keys for online megolm backups</a></li>
</ul>
<p><strong>MSCs in Final Comment Period:</strong></p>
<ul>
<li><em>No MSCs are in FCP.</em></li>
</ul>
<p><strong>New MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2644">MSC2644: matrix.to URI syntax v2</a></li>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2638">MSC2638: Ability for clients to request homeservers to resync device lists</a></li>
</ul>
<h4 id="spec-core-team">Spec Core Team</h4>
<p>In terms of Spec Core Team MSC focus for this week, the team has been spread a bit thin with other work. As such, we're still on the same three MSCs: <a href="https://github.com/matrix-org/matrix-doc/issues/2366">MSC2366</a> (verification flows), <a href="https://github.com/matrix-org/matrix-doc/issues/2403">MSC2403</a> (knocking), and <a href="https://github.com/matrix-org/matrix-doc/issues/2630">MSC2630</a> (SAS security). We're hoping this week will be more productive in terms of spec.</p>
</blockquote>
<p><img src="/blog/img/2020-06-19-qcjY2-plot.png" alt="2020-06-19-qcjY2-plot.png" /></p>
<h2 id="dept-of-servers-europea">Dept of Servers üè¢</h2>
<h3 id="dendrite-gomatrixserverlib">Dendrite / gomatrixserverlib</h3>
<p>Dendrite is a next-generation homeserver written in Go</p>
<p><a href="https://matrix.to/#/@neilalexander:matrix.org">Neil Alexander</a> announced:</p>
<blockquote>
<p>This week has seen a lot of work put into fixing broken tests and refactoring parts of the codebase.</p>
<ul>
<li>
<p>The media API has had quite a bit of attention this week and now media over federation works properly, as well as much better filename handling</p>
</li>
<li>
<p>A new user API component is now responsible for user accounts, devices, access tokens and account data</p>
</li>
<li>
<p>The server key API has been updated with more reliable validity checking and new tests</p>
</li>
<li>
<p>Logging into Dendrite using Riot iOS is now supported thanks to some minor tweaks/fixes</p>
</li>
<li>
<p>URL handling for version 3 rooms has been improved</p>
</li>
<li>
<p>A bug in the format of <code>/v1/send_join</code> has been fixed</p>
</li>
<li>
<p>The <code>/joined_members</code> response has now been fixed</p>
</li>
</ul>
<p>In addition to that, we've made good progress on embedding the Dendrite-powered Yggdrasil demo into Riot iOS, which we'll hopefully be demoing in a couple of weeks!</p>
<p>Spec compliance has improved:</p>
<ul>
<li>
<p>Client-Server APIs: 40%, up from 36% last week</p>
</li>
<li>
<p>Server-Server APIs: 38%, up from 35% last week</p>
</li>
</ul>
</blockquote>
<h3 id="synapse">Synapse</h3>
<p><a href="https://matrix.to/#/@neilj:matrix.org">Neil</a> offered:</p>
<blockquote>
<p>Highlights this week</p>
<ul>
<li>We released <a href="https://matrix.org/blog/2020/06/16/synapse-1-15-1-released">1.15.1</a>, this is a bug fix release, sorry if you were bitten.</li>
</ul>
<h4 id="changelog-in-full">Changelog in full</h4>
<p>Bugfixes</p>
<ul>
<li>
<p>Fix a bug introduced in v1.15.0 that would crash Synapse on start when using certain password auth providers. </p>
</li>
<li>
<p>Fix a bug introduced in v1.15.0 which meant that some 3PID management endpoints were not accessible on the correct URL.</p>
</li>
</ul>
<p>Outside of that</p>
<ul>
<li>
<p>Implemented unread message counts (MSC 2625) - This is part of the a more general notifications improvement project in conjunction with the Riot teams. The aim being to make Notifications easier to configure. We‚Äôve also been working on push rule definitions for the default behaviour. More on that next week.</p>
</li>
<li>
<p>Have the ability to shard the media repository worker. This means we can now run an arbitrary number in parallel, thereby improving upload reliability and performance, we are running this on Matrix.org. </p>
</li>
<li>
<p>Re-enabled Jaeger on matrix.org - previously we needed to switch it off due to the performance overhead, we needed a few tweaks but now it is working well and helping us to determine the cause of slow requests. It seems like the HTTP requests between the event creator  and event persister workers can sometimes be slow - we are not sure of the cause yet, we are working on it but it will mean further performance improvements to message sending.</p>
</li>
<li>
<p>Next up performance wise is working on sharding the federation sender to improve federation lag. We‚Äôll also try replacing simplejson with stdlib json which seems to be much faster at dumps nowadays.</p>
</li>
<li>
<p>Finally, we‚Äôve fixed a bug that meant that quarantining media would from time to time include quarantining sticker packs</p>
</li>
</ul>
<p>Other interesting bugs</p>
<p>We fixed a spec compliance bug in fetching remote media raised by our pals in Dendrite-land. We fixed a bug causing federation .well-known requests to fail due to not including the user-agent header. We removed references to six (thanks @ilmari) and finally, fixed a bug that caused stream id to go backwards on the replication stream.</p>
<p>Next week we‚Äôll continue to work on notifications and performance. You can track our progress here <a href="https://github.com/orgs/matrix-org/projects/8">https://github.com/orgs/matrix-org/projects/8</a></p>
</blockquote>
<h3 id="synapse-adoption-graphs">Synapse adoption graphs</h3>
<p><a href="https://matrix.to/#/@chris:settgast.org">Chris</a> said:</p>
<blockquote>
<p>Wondering how quick this weeks synapse release was adopted by homeserver admins? Head over to <a href="https://graph.settgast.org/">https://graph.settgast.org/</a> and see yourself that it only took a little over 2 days for 1.15.1 to become the most used synapse version. I plot hourly distribution of synapse versions there. (Disclaimer: Only collects stats for homeservers that my homeserver sees in any of its rooms, which are around 2000 at the moment)</p>
</blockquote>
<p>This is super cool! I love that this has been created, and also how well it reflects on homeserver admins! /me scurries to update to 1.15.1...</p>
<p>Asked to share the process, Chris sent:</p>
<blockquote>
<p>Its a horribly hacky python script, but I can at least share it here: <a href="https://gist.github.com/csett86/96190592390b2c3d8c12c020ce312723">https://gist.github.com/csett86/96190592390b2c3d8c12c020ce312723</a></p>
</blockquote>
<p>What version are you running?</p>
<h3 id="synapse-on-a-rockpro64">Synapse on a ROCKPro64</h3>
<p>How is Synapse performance these days? <a href="https://fosstodon.org/@PINE64/104349781501483464">PINE64 are running their instance</a> on their own <a href="https://www.pine64.org/rockpro64/">ROCKPro64</a> hardware.</p>
<h3 id="conduit">Conduit</h3>
<p>Conduit is a Matrix homeserver written in Rust <a href="https://conduit.rs">https://conduit.rs</a></p>
<p><a href="https://matrix.to/#/@timo:koesters.xyz">timo</a> announced:</p>
<blockquote>
<p>This week I worked on server-side key backups and cross-signing - the second most requested features (federation being the first one). Key backups are already working! Take a look:</p>
</blockquote>
<iframe width="560" height="315" src="https://www.youtube.com/embed/-1MbP3CC2Yk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<blockquote>
<p>Cross-signing <em>should</em> be working, but there is a bug where emoji verification gets stuck. I hope we can find the mistakes and finish the PR next week.</p>
<p>Thanks to everyone who supports me on <a href="https://liberapay.com/timokoesters">Liberapay</a> or (new!) Bitcoin!</p>
</blockquote>
<h2 id="synapse-deployment-inbox-tray">Synapse Deployment üì•</h2>
<h3 id="kubernetes">Kubernetes</h3>
<p><a href="https://matrix.to/#/@ace:kittenface.studio">Ananace</a> said:</p>
<blockquote>
<p>Just pushed 1.15.1 tags for the K8s-optimized Synapse image.</p>
</blockquote>
<h3 id="docker-matrix">Docker-matrix</h3>
<p><a href="https://matrix.to/#/@mathijs:matrix.vgorcum.com">Mathijs</a> announced:</p>
<blockquote>
<p>The image for synapse v1.15.1 including jemalloc and mjolnir anti-spam has been released to <a href="https://hub.docker.com/r/avhost/docker-matrix">avhost/docker-matrix:v1.15.1</a>.</p>
</blockquote>
<h2 id="dept-of-bridges-bridge-at-night">Dept of Bridges üåâ</h2>
<h3 id="matrix-ircd-gsoc-project">matrix-ircd, GSOC project</h3>
<p><a href="https://matrix.to/#/@karlik:matrix.org">karlik</a> offered:</p>
<blockquote>
<p>For <a href="https://github.com/matrix-org/matrix-ircd">matrix-ircd</a> google summer of code:</p>
<ul>
<li>
<p>Began moving the codebase to the more modern futures 0.3 (previously futures 0.1)</p>
</li>
<li>
<p>Introduced more modern async / await syntax for improved code clarity</p>
</li>
<li>
<p>Wrote some additional unit tests, doubling the overall test coverage to 32%</p>
</li>
<li>
<p>Updating the 2016 code to use rust 2018 idioms <a href="https://github.com/matrix-org/matrix-ircd/pull/64">PR # 64</a></p>
</li>
<li>
<p>Swapped repository to use stable rust (previously nightly) <a href="https://github.com/matrix-org/matrix-ircd/pull/65">PR #65</a></p>
</li>
</ul>
</blockquote>
<h3 id="mautrix-bridges">mautrix bridges</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> told us:</p>
<blockquote>
<p>To make the bridge info state events a bit more useful, all my bridges now include the room name and avatar URL in them. The events are also updated whenever the name or avatar changes, and there's a new option to re-send the event to all existing portals so old portals would get it too.</p>
</blockquote>
<h2 id="dept-of-clients-iphone">Dept of Clients üì±</h2>
<h3 id="riotx-version-0-22-0">RiotX: Version 0.22.0</h3>
<p><a href="https://matrix.to/#/@benoit.marty:matrix.org">benoit</a> said:</p>
<blockquote>
<p>RiotX: Version 0.22.0 has been released on Tuesday, it includes integration manager support, sending stickers, modifying power levels, and lots of other things! See <a href="https://github.com/vector-im/riotX-android/releases/tag/v0.22.0">https://github.com/vector-im/riotX-android/releases/tag/v0.22.0</a> for a complete list of the changes.</p>
<p>This week we've been working on audio and video calls (The PR is in review). We are also trying to improve the performance of the application. We are adding room settings, and we have started to work on the migration Riot-Android -&gt; RiotX.</p>
</blockquote>
<p>PS check out Valere trying the new features:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/cETevrezYWs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h3 id="arch-linux-aur-package-for-revolution-a-riot-fork-by-ponies-im">Arch Linux (AUR) package for Revolution - a Riot fork by ponies.im</h3>
<p><a href="https://matrix.to/#/@sharky:shark.pm">Sophie still alive</a> said:</p>
<blockquote>
<p>I made an Arch Linux (AUR) package for Revolution - a Riot fork by ponies.im: </p>
<ul>
<li>
<p><a href="https://aur.archlinux.org/packages/revolution-desktop-git/">https://aur.archlinux.org/packages/revolution-desktop-git/</a></p>
</li>
<li>
<p><a href="https://aur.archlinux.org/packages/revolution-web-git/">https://aur.archlinux.org/packages/revolution-web-git/</a></p>
</li>
<li>
<p>https://gitlab.eastcoast.hosting/ponies</p>
</li>
</ul>
</blockquote>
<h3 id="daydream">Daydream</h3>
<p><a href="https://matrix.to/#/@mtrnord:nordgedanken.dev">MTRNord</a> told us:</p>
<blockquote>
<p>Daydream is getting a new Design and the first page is ready at <a href="https://app.daydream.im/">https://app.daydream.im/</a></p>
<p>Additional changes are:</p>
<ul>
<li>
<p>Removed client side js (except what's needed to load wasm stuff)</p>
</li>
<li>
<p>Replaced loading animation with css only version</p>
</li>
<li>
<p>Replace icons with css only version</p>
</li>
<li>
<p>Add e2e tests</p>
</li>
<li>
<p>Add Basic Notifications</p>
</li>
</ul>
<p>Currently on top of the TODO list of Daydream is:</p>
<ul>
<li>
<p>Adding a wasm compatible (indexed db based) state store</p>
</li>
<li>
<p>Notifications</p>
</li>
</ul>
</blockquote>
<p><img src="/blog/img/2020-06-19-x8YxE-grafik.png" alt="2020-06-19-x8YxE-grafik.png" /></p>
<h3 id="rumatui-is-basically-usable">Rumatui is basically usable</h3>
<p>WIP Command line Matrix client using matrix-rust-sdk</p>
<p><a href="https://matrix.to/#/@devinr528:matrix.org">devinr528</a> told us:</p>
<blockquote>
<p>After some slow progress, <code>rumatui</code>, the rust command line chat client, is usable by anyone. You no longer need an account or have previously joined rooms. Registration and room search have been implemented! Using left/right arrow keys from the login screen will toggle to registration. Once registered hitting the left arrow will bring up the room search window. After typing your search term hit <code>Enter</code> and select the room to join by pressing <code>Ctrl-d</code>.</p>
<p>For the brave who would like to <a href="https://github.com/DevinR528/rumatui/tree/room-search">give it a try</a> <code>cargo install --git &lt;https://github.com/DevinR528/rumatui&gt; --branch room-search</code>.</p>
<h4 id="added-since-last-update">Added since last update</h4>
<ul>
<li>
<p>Room search is now available</p>
<ul>
<li>Public rooms can be joined from the room search window</li>
</ul>
</li>
<li>
<p>A user can register from the new register window</p>
<ul>
<li>This features complete User Interactive Authentication by opening a web browser</li>
</ul>
</li>
<li>
<p>Message edits are shown</p>
<ul>
<li>When markdown is part of the message they are properly formatted</li>
</ul>
</li>
<li>
<p>Reactions display under the respective message</p>
</li>
<li>
<p>Redaction events are handled for reactions (emoji) and messages</p>
</li>
</ul>
</blockquote>
<p>&quot;Basically usable&quot; is a standard we can all aspire to for our projects and endeavours.</p>
<h3 id="riot-ios">Riot-iOS</h3>
<p><a href="https://matrix.to/#/@Manu:matrix.org">Manu</a> told us:</p>
<blockquote>
<p>This week, we worked on the new UX for cross-signing and secure backup. In parallel, we continued to improve the new push implementation. We are very closed to complete the two features.</p>
</blockquote>
<h3 id="gomuks">gomuks</h3>
<p><a href="https://maunium.net/go/gomuks">gomuks</a> is a terminal based Matrix client written in Go. <a href="https://github.com/tulir/gomuks">Source on GitHub</a></p>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> announced:</p>
<blockquote>
<p>I added a command to add and remove local aliases for rooms. Changes to <code>alt_aliases</code> are also now rendered properly.</p>
</blockquote>
<h3 id="riot-web">Riot Web</h3>
<p><a href="https://matrix.to/#/@jryans:matrix.org">Ryan</a> offered:</p>
<blockquote>
<p>This week we had an off-cycle 1.6.5 release to fix registration on some homeservers when email validation is required. After that, we've made a 1.6.6 RC including:</p>
<ul>
<li>
<p>Added support for <a href="https://unicode.org/emoji/charts-13.0/emoji-released.html">new emoji</a> in Unicode 13</p>
</li>
<li>
<p>Emoji picker now supports searching by emoji characters (to find related ones) as well as text</p>
</li>
<li>
<p>Added a homeserver admin <code>.well-known</code> option to control default E2EE behaviour</p>
</li>
<li>
<p>Many more bug fixes and smaller improvements</p>
</li>
</ul>
</blockquote>
<h3 id="riot-web-themes">Riot Web Themes</h3>
<p><a href="https://matrix.to/#/@jo:catgirl.party">jo</a> offered:</p>
<blockquote>
<p>made a couple riot themes! Dracula and Dracula Flat</p>
<p><a href="https://raw.githubusercontent.com/aaronraimist/riot-web-themes/master/Dracula/Non-flat/Dracula.json">https://raw.githubusercontent.com/aaronraimist/riot-web-themes/master/Dracula/Non-flat/Dracula.json</a>
<a href="https://raw.githubusercontent.com/aaronraimist/riot-web-themes/master/Dracula/Flat/DraculaFlat.json">https://raw.githubusercontent.com/aaronraimist/riot-web-themes/master/Dracula/Flat/DraculaFlat.json</a></p>
</blockquote>
<p>Find images <a href="https://raw.githubusercontent.com/aaronraimist/riot-web-themes/master/Dracula/Non-flat/screenshot%20%2020-06-19%2014-09-11.png">here</a> and <a href="https://github.com/aaronraimist/riot-web-themes/blob/master/Dracula/Flat/screenshot%2020-06-16%2003-05-42.png">here</a></p>
<p>Go to <a href="https://github.com/aaronraimist/riot-web-themes">https://github.com/aaronraimist/riot-web-themes</a> to find out how to use these.</p>
<h3 id="nheko">Nheko</h3>
<p><a href="https://github.com/Nheko-Reborn/nheko">Nheko</a> is a desktop client using Qt, Boost.Asio and C++17. It supports E2EE (with the notable exception being device verification for now) and intends to be full featured and nice to look at</p>
<p><a href="https://matrix.to/#/@deepbluev7:neko.dev">Nico (@deepbluev7:neko.dev)</a> offered:</p>
<blockquote>
<ul>
<li>
<p>We released <a href="https://github.com/Nheko-Reborn/nheko/releases/tag/v0.7.2">0.7.2</a>, which was a bit more messy than we would have liked...</p>
</li>
<li>
<p>As with every release we are currently working through the new bug reports. :D</p>
</li>
<li>
<p>I started working on SSSS and online key backup support. For this I wrote my own base64 and base58 encoders. As a result of this we dropped libsodium as a dependency, which should make Nheko a bit easier to package or build. It's also fun to write base conversions, although 58 is a horrible base!</p>
</li>
</ul>
</blockquote>
<p>From the changelog:</p>
<ul>
<li>Reactions
<ul>
<li>React to a message with an emoji! üéâ</li>
<li>Reactions are shown below a message in a small bubble with a counter.</li>
<li>By clicking on that, others can add to the reaction count.</li>
<li>It may help you celebrating a new Nheko Release or react with a üëé to a failed build to express your frustration.</li>
<li>This uses a new emoji picker. The picker will be improved in the near future (better scrolling, sections, favorites, recently used or similar) and then probably replace the current picker.</li>
</ul>
</li>
<li>Support for tagging rooms [tag]
<ul>
<li>Assign custom tags to rooms from the context menu in the room list.</li>
<li>This allows filtering rooms via the group list. This puts you in a focus mode showing only the selected tags.</li>
<li>You can assign multiple tags to group rooms however you like.</li>
</ul>
</li>
<li>SSO Login
<ul>
<li>With this you can now login on servers, that only provide SSO.</li>
<li>Just enter any mxid on the server. Nheko will figure out that you need to use SSO and redirect your browser to the login page.</li>
<li>Complete the login in your browser and Nheko should automatically log you in.</li>
</ul>
</li>
<li>Presence
<ul>
<li>Shows online status of the people you are talking to.</li>
<li>You can define a custom status message to tell others what you are currently up to.</li>
<li>The status message appears next to the usernames in the timeline.</li>
<li>Your server needs to have presence enabled for this to work.</li>
</ul>
</li>
</ul>
<p>Wowow that's a lot this time!</p>
<h2 id="dept-of-sdks-and-frameworks">Dept of SDKs and Frameworks üß∞</h2>
<h3 id="quotient">quotient</h3>
<p><a href="https://matrix.to/#/@kitsune:matrix.org">kitsune</a> said:</p>
<blockquote>
<p>after a couple of setbacks that didn't let us to make the releases earlier, the Quotient project has finally made two new releases:</p>
<ul>
<li>
<p>GTAD (the piece of code magically producing readable C++ code from a Swagger API description) has achieved version 0.7 (https://github.com/KitsuneRal/gtad/releases/tag/v0.7.0) adding a few tricks in order to make...</p>
</li>
<li>
<p>...libQuotient 0.6 beta2 (https://github.com/quotient-im/libQuotient/releases/tag/0.6-beta2) rely entirely on the upstream matrix-doc specification, rather than a soft fork closely following the main sources! From now on it's &quot;upstream first&quot;, in a sense that the original matrix-doc will be used to build Quotient codebase. Let's see how often it breaks ;)
In other news from the last few weeks:</p>
</li>
<li>
<p>some housekeeping and deprecation work in the API has been done in preparation to getting User Interactive Authentication along the next (post-0.6) release cycle of libQuotient.</p>
</li>
<li>
<p>also thanks to the updated code generator, the CS API code has been optimised, consolidating more code in the header files and making data deserialisation lazy; this helped significantly reduce compilation times, and runtime performance also improved a bit.</p>
</li>
<li>
<p>the number of configurations tested by CI has been extended, allowing to chase down a few more bugs that managed to go under the radar before.</p>
</li>
<li>
<p>when used with new enough Qt, CBOR is used to cache data locally - entirely transparently for clients.</p>
</li>
</ul>
<p>Expect more news in the coming weeks, including continued work on matrix: URI proposal and its implementation in Quotient.</p>
</blockquote>
<h3 id="ruma-events-google-summer-of-code-project">ruma-events' Google Summer of Code project</h3>
<p><a href="https://matrix.to/#/@devinr528:matrix.org">devinr528</a> sent us this late entry!</p>
<blockquote>
<p>This week in ruma-events' Google Summer of Code project, after trying out the new <code>Any*Event</code> enums <a href="https://github.com/DevinR528/matrix-rust-sdk/pull/2"><code>matrix-rust-sdk</code></a>, we found a few big flaws. There was no easy way to go from <code>StateEvent&lt;AnyStateEventContent&gt;</code> to <code>StateEvent&lt;SpecificEventContent&gt;</code>, the other issue was one could create a <code>StateEvent</code> with differing <code>content</code> and <code>prev_content</code> fields using the <code>AnyStateEventContent</code> enum. The <a href="https://github.com/ruma/ruma/pull/68">0.22 ruma-events</a> will be similar to the existing API; each event type has a corresponding event enum variant.</p>
</blockquote>
<pre data-lang="rust" style="background-color:#1e1e1e;color:#dcdcdc;" class="language-rust "><code class="language-rust" data-lang="rust"><span style="color:#569cd6;">pub enum </span><span>AnyStateEvent {
</span><span>    RoomMember(StateEvent&lt;MemberEventContent&gt;),
</span><span>    RoomAliases(StateEvent&lt;RoomAliases&gt;),
</span><span>    </span><span style="color:#608b4e;">// ...
</span><span>}
</span></code></pre>
<blockquote>
<p>There were a few minor fixes during the week also. Unknown field deserialization is <a href="https://github.com/ruma/ruma/pull/57">fixed</a>, allowing deserialization of a JSON blob that has extra fields which are ignored. <a href="https://github.com/ruma/ruma/pull/59">Custom events</a> are now present in the <code>Any*EventContent</code> enums, although now they have to be moved up to be included in <code>Any*Event</code> enums. <a href="https://github.com/ruma/ruma/pull/52">Benchmarks</a> for deserialization have been added and used to increase performance.</p>
</blockquote>
<h3 id="mage-polyjuice-client">üßô Polyjuice Client</h3>
<p><a href="https://hex.pm/packages/polyjuice_client">Polyjuice Client</a> is a Matrix library for Elixir</p>
<p><a href="https://matrix.to/#/@hubert:uhoreg.ca">uhoreg</a> announced:</p>
<blockquote>
<p>Polyjuice Client, a Matrix library for Elixir, had <a href="https://hex.pm/packages/polyjuice_client/0.2.3">a new release</a>.  This release fixes syncs, which apparently were completely broken in the last release (whoops).  The wizarding community also welcomes a new contributor, Pierre de Lacroix.</p>
</blockquote>
<h2 id="dept-of-ops">Dept of Ops üõ†</h2>
<h3 id="gitea">Gitea</h3>
<p><a href="https://matrix.to/#/@s7evink:s3cr3t.me">s7evink</a> reported:</p>
<blockquote>
<p><a href="https://github.com/go-gitea/gitea/releases/tag/v1.12.0">Gitea 1.12.0</a> was finally released. It's now possible to send notifications (commits, pull requests, etc.) directly to Matrix using webhooks.</p>
</blockquote>
<h2 id="dept-of-internet-of-things-bulb">Dept of Internet of Things üí°</h2>
<h3 id="mozilla-webthings-matrix-adapter">Mozilla WebThings Matrix Adapter</h3>
<p><a href="https://matrix.to/#/@christianp:vector.modular.im">Christian</a> offered:</p>
<blockquote>
<p>I heard that you people like IoT?! With the Mozilla WebThings Matrix Adapter your Raspberry Pi sends you messages about your home. Want a log of when the front door has been opened? Need a low battery alert for your IoT devices? With the Mozilla IoT gateway and this adapter, you can send these events to a Matrix room of your choice!</p>
<p><a href="https://gitlab.com/webthings/matrix-adapter">https://gitlab.com/webthings/matrix-adapter</a></p>
</blockquote>
<h2 id="dept-of-bots-robot-face">Dept of Bots ü§ñ</h2>
<h3 id="alt-alias-maubot-plugin">Alt alias maubot plugin</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> announced:</p>
<blockquote>
<p>Ever since <code>m.room.aliases</code> was replaced with <code>alt_aliases</code>, there hasn't really been any way to find aliases on other servers, since most room admins don't bother finding and publishing alternate aliases. To help solve that problem, I made a maubot plugin to let users publish alternate aliases in rooms: <a href="https://github.com/maubot/altalias">https://github.com/maubot/altalias</a></p>
<p>By default it lets users publish aliases with the same localpart as any already published alias. If that behavior is sufficient, you can simply invite it to a room and give it permissions to send <code>m.room.canonical_alias</code> events. Alternatively, it can be configured to allow aliases that match specific regexes.</p>
<p>Once it's set up, users can create a local alias and use <code>!altalias publish &lt;their alias&gt;</code> to publish it. The bot will make sure the alias points to the right room, check that the localpart is allowed and then add it to <code>alt_aliases</code>.</p>
<p>I have it running at @alias:maunium.net and I've added it to all my rooms already. Other rooms are also free to use that instance.</p>
</blockquote>
<h3 id="go-neb-on-nixos">go-neb on NixOS</h3>
<p><a href="https://matrix.to/#/@maralorn:maralorn.de">maralorn</a> offered:</p>
<blockquote>
<p>As of <a href="https://github.com/NixOS/nixpkgs/pull/89327">https://github.com/NixOS/nixpkgs/pull/89327</a> a go-neb module was added to nixos and will soon be available on nixos-unstable and in the 20.09 release. You can use it to declaratively install and configure go-neb matrix bots on nixos. I use it for prometheus alertmanager alerts and it works really cool! Thx to hexa- who did most of the work on it.</p>
</blockquote>
<h3 id="opsdroid">Opsdroid</h3>
<p><a href="https://matrix.to/#/@cadair:cadair.com">Cadair</a> offered:</p>
<blockquote>
<p>opsdroid <a href="https://github.com/opsdroid/opsdroid/releases/tag/v0.19.0">0.19</a> has been released, not many matrix specific features in this release, just making it slightly easier to get a connector or database instance by name. However, this release paves the way for the merge of the pull request transitioning opsdroid to use the matrix-nio Python library, so the next release should be <em>packed</em> full of matrix stuff üòÄ</p>
</blockquote>
<h2 id="dept-of-ping-table-tennis-paddle-and-ball">Dept of Ping üèì</h2>
<p>Here we reveal, rank, and applaud the homeservers with the lowest ping, as measured by <a href="https://github.com/maubot/echo">pingbot</a>, a <a href="https://github.com/maubot/maubot">maubot</a> that you can host on your own server. Join <a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">fairydust.space</td><td style="text-align: center">384.5</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">maescool.be</td><td style="text-align: center">390</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">gottliebtfreitag.de</td><td style="text-align: center">453</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">construct.grin.hu</td><td style="text-align: center">610</td></tr>
<tr><td style="text-align: center">5</td><td style="text-align: center">aragon.sh</td><td style="text-align: center">639.5</td></tr>
<tr><td style="text-align: center">6</td><td style="text-align: center">privacytools.io</td><td style="text-align: center">670</td></tr>
<tr><td style="text-align: center">7</td><td style="text-align: center">matrix.vgorcum.com</td><td style="text-align: center">734</td></tr>
<tr><td style="text-align: center">8</td><td style="text-align: center">envs.net</td><td style="text-align: center">756</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">settgast.org</td><td style="text-align: center">865</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">intothecyber.space</td><td style="text-align: center">1005</td></tr>
</tbody></table>
<h2 id="that-s-all-i-know-checkered-flag">That's all I know üèÅ</h2>
<p>Thanks to Alexander and Nico for their help editing this edition.</p>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2020&#x2F;06&#x2F;16&#x2F;matrix-decomposition-an-independent-academic-analysis-of-matrix-state-resolution&#x2F;" title="Matrix Decomposition: an independent academic analysis of Matrix State Resolution">Matrix Decomposition: an independent academic analysis of Matrix State Resolution</a></h1>
            <span>
                16.06.2020 20:15
                ‚Äî
                <a href="/category/general">
                    General
                </a>
                ‚Äî
                <a href="/author/matthew-hodgson">
                    Matthew Hodgson
                </a>
            </span>
            <br>
            <small>Last update: 16.06.2020 19:09</small>
        </header>
        <div>
            <p>Hi all,</p>
<p>Regular readers of <a href="https://matrix.org/blog/category/this-week-in-matrix/">TWIM</a> may be familiar with the <a href="https://dsn.tm.kit.edu/english/index.php">Decentralized Systems and Network Services Research Group</a> at Karlsruhe Institute of Technology, who have been busy over the last few years analysing Matrix from an independent academic point of view.  The work started in 2018 with Florian Jacob‚Äôs <a href="https://dsn.tm.kit.edu/matrix/traveller/explained.html">DSN Traveler</a> spidering project, resulting in the <a href="https://publikationen.bibliothek.kit.edu/1000100364">Glimpse of the Matrix</a> paper analysing Matrix‚Äôs scale and room/server distribution (at least as it was back then).</p>
<p>Last week, they released an entirely new paper: <a href="https://dl.acm.org/doi/10.1145/3381991.3395399">Matrix Decomposition: Analysis of an Access Control Approach on Transaction-based DAGs without Finality</a> by Florian Jacob, Luca Becker, Jan Grash√∂fer and Hannes Hartenstein, presented at <a href="https://www.sacmat.org/2020/index.php">ACM SACMAT ‚Äò20</a>.</p>
<p>Now, the new paper is an absolutely fascinating deep dive analysis into <a href="https://github.com/matrix-org/matrix-doc/blob/master/proposals/1442-state-resolution.md">State Resolution v2</a> - the algorithm at the heart of Matrix which defines how servers merge together their potentially conflicting copies of a given room, such that everyone ends up eventually with a consistent view‚Ä¶ even in the face of bad actors. This means that Matrix effectively implements a decentralised access control system - ensuring that users stay banned, and only users with permission can ban, etc.  You can see the <a href="https://matrix.org/blog/img/SACMAT_2020_Talk_Matrix_Decomposition.pdf">slides</a> below, and read the <a href="https://dl.acm.org/doi/pdf/10.1145/3381991.3395399">full paper</a> here. The video of Florian‚Äôs talk from SACMAT should be published shortly.</p>
<br/>
<p><object data="https://matrix.org/blog/img/SACMAT_2020_Talk_Matrix_Decomposition.pdf" type="application/pdf" width="1024" height="768"></object></p>
<br/>
<p>To give some context from the Matrix side: designing and implementing State Resolution v2 back in 2018 was a bit of a mission. Our original v1 implementation had some bugs which meant that the result of the merge could unexpectedly favour historical state over the current state (so called ‚Äòstate resets‚Äô) - thus giving an attacker a way to maliciously revert the state of the room.  In v2 we thought much more carefully about the algorithm, considering state present in one version of the room but not the other as a conflict, separating and applying access control events from regular events, and adding additional ordering of the state in the room by considering events in the context of their authorisation chain (the ‚Äòauth DAG‚Äô).  The end result is that we feel confident in v2 State Res, and we haven‚Äôt seen any problems with it in the wild since we shipped it in July 2018.</p>
<p>However: state resolution is not intuitive at first - for instance, when you merge two versions of a room together, you treat the state events as unordered sets‚Ä¶ even though they are ordered in the context of the room DAG.  The reason is that state res needs to work even if you don‚Äôt have a copy of the whole room DAG (otherwise you‚Äôd have to download way too much data to participate in a large room).  Another example is the sequence in which orderings are then applied to the state events - and how that interacts with re-authorising those events, to stop malicious ones creeping in.  In the core team, we‚Äôve end up describing it several different ways to try to help folks understand: first Erik‚Äôs original <a href="https://github.com/matrix-org/matrix-doc/blob/erikj/state_res_msc/proposals/1442-state-resolution.md">MSC1442</a>, then uhoreg‚Äôs <a href="https://matrix.uhoreg.ca/stateres/reloaded.html">literary Haskell implementation</a>, then the terse reference version in <a href="https://matrix.org/docs/spec/rooms/v2">the Spec</a> itself, and most recently Neil Alexander‚Äôs <a href="https://matrix.org/docs/guides/implementing-stateres">State Resolution v2 for the Hopelessly Unmathematical</a>.</p>
<p>As a result we are <strong>very</strong> excited and happy that Florian and the DSN team have now published the first ever independent in-depth analysis of the algorithm, particularly in the context of decentralised access control (i.e. enforcing bans, power levels, etc).  We‚Äôre pleasantly surprised that apparently ‚ÄúTo the best of our knowledge, Matrix is the only system that implements access control based on an eventually consistent partial order without finality and without a consensus algorithm‚Äù.</p>
<p>Even better, the DSN team found some remaining thinkos in Synapse‚Äôs implementation and the Matrix specification, which could have caused resolution results to diverge from other implementations, specifically:</p>
<ol>
<li>we weren‚Äôt enforcing integers in JSON to be within range [-2<sup>53</sup>+1, 2<sup>53</sup>-1], fixed in <a href="https://github.com/matrix-org/synapse/pull/7381">https://github.com/matrix-org/synapse/pull/7381</a> and <a href="https://github.com/matrix-org/matrix-doc/blob/clokep/json-validation-room-ver/proposals/2540-stricter-event-validation.md">MSC2540</a></li>
<li>we forgot to include the notification field when authing power level events, fixed in  <a href="https://github.com/matrix-org/synapse/issues/7501">https://github.com/matrix-org/synapse/issues/7501</a> and <a href="https://github.com/lucavb/matrix-doc/blob/master/proposals/2209-auth-rules-other-keys-in-m.room.power.levels.md">MSC2209</a> (thanks to Luca from DSN for the MSC!)</li>
<li>we forgot to spec the limit that one should apply to the number of parents of an event in the DAG (fixed in <a href="https://github.com/matrix-org/matrix-doc/pull/2538">https://github.com/matrix-org/matrix-doc/pull/2538</a>)</li>
<li>we missed that moderators could set server ACLs which could let them undermine room admins (fixed in <a href="https://github.com/matrix-org/synapse/pull/6834">https://github.com/matrix-org/synapse/pull/6834</a>).</li>
</ol>
<p>All of these have now been fixed in Synapse and the latest versions of the spec (room v6), and we‚Äôd like to sincerely thank Florian and Luca for rapidly and responsibly disclosing the issues to us.  In other words: this research is directly improving Matrix, and it‚Äôs even more exciting that the stated future work for the DSN team is to work on a <a href="https://en.wikipedia.org/wiki/Formal_verification">formal verification</a> for the security of Matrix‚Äôs authorisation rules and state resolution.  This stuff is tough, as anyone who‚Äôs played with <a href="https://en.wikipedia.org/wiki/TLA%2B">TLA<sup>+</sup></a> will know, and we are incredibly glad that the research community is helping out to formalise and hopefully prove that State Res v2 is as good as we think it is.</p>
<p>We should stress that DSN‚Äôs work is completely independent of The Matrix.org Foundation or anyone else building on the protocol; we‚Äôre just writing about it here because we think it‚Äôs incredibly cool and deserves the attention of the whole Matrix ecosystem.</p>
<p>Thanks again to Florian and the team - we look forward to seeing what comes next!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2020&#x2F;06&#x2F;16&#x2F;synapse-1-15-1-released&#x2F;" title="Synapse 1.15.1 released">Synapse 1.15.1 released</a></h1>
            <span>
                16.06.2020 12:25
                ‚Äî
                <a href="/category/releases">
                    Releases
                </a>
                ‚Äî
                <a href="/author/neil-johnson">
                    Neil Johnson
                </a>
            </span>
            
        </header>
        <div>
            <p>Synapse 1.15.1 is a bug fix release to fix two bugs introduced in 1.15.0.</p>
<p>The first prevented users of certain clients (including Riot) to add or remove third party identifiers such as email addresses.</p>
<p>The second caused Synapse not to start when configured with certain password auth providers.</p>
<p>Sorry if you have been bitten!</p>
<p>Get 1.15.1 from <a href="https://github.com/matrix-org/synapse/releases/tag/v1.15.1">github</a> or any of the sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md.</p>
<p>Changelog since v1.15.0</p>
<h1 id="synapse-1-15-1-2020-06-16">Synapse 1.15.1 (2020-06-16)</h1>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix a bug introduced in v1.15.0 that would crash Synapse on start when using certain password auth providers. (<a href="https://github.com/matrix-org/synapse/issues/7684">#7684</a>)</li>
<li>Fix a bug introduced in v1.15.0 which meant that some 3PID management endpoints were not accessible on the correct URL. (<a href="https://github.com/matrix-org/synapse/issues/7685">#7685</a>)</li>
</ul>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2020&#x2F;06&#x2F;12&#x2F;this-week-in-matrix-2020-06-12&#x2F;" title="This Week in Matrix 2020-06-12">This Week in Matrix 2020-06-12</a></h1>
            <span>
                12.06.2020 00:00
                ‚Äî
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                ‚Äî
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="open-tech-will-save-us-3">Open Tech Will Save Us #3 üéô</h2>
<iframe width="560" height="315" src="https://www.youtube.com/embed/_fTREjXQCto" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>If you somehow missed this, please take a look!</p>
<ul>
<li>1:00 Rabble talking about Planetary and SSB</li>
<li>31:19 Annie on Ditto</li>
<li>1:10:20 Erik on Synapse Perf</li>
</ul>
<h2 id="dept-of-spec-scroll">Dept of Spec üìú</h2>
<h3 id="spec">Spec</h3>
<p><a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> announced:</p>
<blockquote>
<p>Here's your weekly spec update! The heart of Matrix is the specification - and this is modified by Matrix Spec Change (MSC) proposals. Learn more about how the process works at <a href="https://matrix.org/docs/spec/proposals.">https://matrix.org/docs/spec/proposals.</a></p>
<h4 id="msc-status">MSC Status</h4>
<p><strong>Merged MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2265">MSC2265: Proposal for mandating case folding when processing e-mail address localparts</a></li>
</ul>
<p><strong>MSCs in Final Comment Period:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2399">MSC2399: Reporting that decryption keys are withheld</a> (merge)</li>
</ul>
<p><strong>New MSCs:</strong></p>
<ul>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2631">MSC2631: Add fallback_content to PusherData</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2630">MSC2630: checking public keys in SAS verification</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2625">MSC2625: Add mark_unread push rule action</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2618">MSC2618: Helping others with mandatory implementation guides</a></p>
</li>
</ul>
<h4 id="spec-core-team">Spec Core Team</h4>
<p>In terms of Spec Core Team MSC focus for this week, we're sticking with the same three from last week: <a href="https://github.com/matrix-org/matrix-doc/issues/2366">MSC2366</a> (verification flows), <a href="https://github.com/matrix-org/matrix-doc/issues/2403">MSC2403</a> (knocking), and <a href="https://github.com/matrix-org/matrix-doc/issues/2630">MSC2630</a> (SAS security).</p>
<p>In possibly more exciting news, the Spec Core Team has decided to start separating the scattered casual implementation tips and notes in the spec out and putting them in a series of implementation guides! These will take the form of gitbook-style things, and will initially feature front-to-back implementation guides for a generic Matrix client and homeserver. For more details to provide feedback, check out the associated <a href="https://github.com/matrix-org/matrix-doc/issues/2618">MSC2618</a>!</p>
</blockquote>
<p><img src="/blog/img/2020-06-12-xdh7w-plot.png" alt="2020-06-12-xdh7w-plot.png" /></p>
<h2 id="dept-of-gsoc-mortar-board">Dept of GSoC üéì</h2>
<p>This is the second week of the coding phase of GSoC 2020. Find updates from the students below:</p>
<h3 id="gsoc-opsdroid">GSOC/Opsdroid</h3>
<p><a href="https://matrix.to/#/@tyagdit:matrix.org">tyagdit</a> told us:</p>
<blockquote>
<ul>
<li>
<p>The port from matrix-python-sdk to matrix-nio is almost completed. Sending and receiving most events works properly. Changes are expected be merged in a few days. This PR itself doesn't implement E2EE, that will be a different PR</p>
</li>
<li>
<p>Alongside that I've been working on implementing E2EE with nio which is partially done, sending and receiving messages works so far. some changes to the MatrixStore interaction and testing is left.</p>
</li>
</ul>
</blockquote>
<h3 id="nheko">Nheko</h3>
<p><a href="https://matrix.to/#/@crdy2k1:matrix.org">Chethan</a> told us:</p>
<blockquote>
<p>Device verification for Nheko</p>
<ul>
<li>Done
<ul>
<li>Adding Device List ( Although it already exists it is re-written in qml )</li>
<li>Detecting to_device device_verification messages</li>
<li>Part of the flow is done</li>
</ul>
</li>
<li>Yet to Complete
<ul>
<li>Complete the rest of the flow</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="go-neb">go-neb</h3>
<p><a href="https://matrix.to/#/@nikofil:matrix.org">nikofil</a> offered:</p>
<blockquote>
<ul>
<li>
<p>Implementing end-to-end encryption for go-neb turns out to be a lot easier than expected thanks to the <a href="https://github.com/tulir/mautrix">https://github.com/tulir/mautrix</a> library, which contains out of the box e2ee support!</p>
</li>
<li>
<p>The first week of GSoC was spent switching go-neb's usage of gomatrix for mautrix, which was easy as the latter is a fork of the former. This caused a pretty big PR that touched most of go-neb's files, although the changes were simple and easy to review. The PR was merged shortly after into go-neb.</p>
</li>
<li>
<p>During the second week, it was time to add some basic e2ee support to go-neb. This was complicated slightly due to the bot's ability to create multiple clients and its treatment of /sync responses, however in the end e2ee is now working.</p>
</li>
<li>
<p>The code is still of course a mess and session keys are often lost in the void. The code will be cleaned up and tested further next week, bugs will be (hopefully) fixed and another PR will be submitted to go-neb then to officially add e2ee support!</p>
</li>
<li>
<p>Code can be found at <a href="https://github.com/nikofil/go-neb/tree/e2ee">https://github.com/nikofil/go-neb/tree/e2ee</a> until it can be cleaned up</p>
</li>
</ul>
</blockquote>
<h3 id="html-embeddable-rooms">HTML-Embeddable rooms</h3>
<p>From <a href="https://matrix.to/#/@arnav-t:matrix.org">arnav-t</a>:</p>
<blockquote>
<p>Matrix has enormous potential to be used in many different use cases be it embedded chat rooms, comments section, chat boxes, etc. This project aims to fill that niche by providing an easy to use and easy to deploy client for users to embed on their webpages.<br />
The client would mesh well wherever it is embedded by providing a <code>postMessage</code> interface to allow the parent webpage to interact with the client and dynamically modify it whenever needed (For example:-  A comments section that is always the same theme as its parent webpage).</p>
<h4 id="features">Features</h4>
<p>As of now, the following features have been added (with more on the way)</p>
<ul>
<li>List of joined rooms that can be selected </li>
<li>Live room timeline events</li>
<li>Support for image-based messages</li>
<li>Message composer and ability to send messages to a room</li>
<li>Dark and light themes for the client</li>
<li>Changeable highlight colors</li>
<li>Toggleable room header, room timeline, and message composer components</li>
<li><code>postMessage</code> interface for sending commands from the parent window</li>
</ul>
<p>Currently, I'm working on adding more options to the <code>postMessage</code> interface as well as adding more interactivity to the client itself.</p>
</blockquote>
<p>Find out more on the project page: <a href="https://github.com/arnav-t/riot-embedded">https://github.com/arnav-t/riot-embedded</a>.</p>
<h3 id="ruma-matrix-gsoc-update">Ruma/Matrix GSoC update</h3>
<p>Ruma is a Rust project to create a comprehensive set of APIs for Matrix. Previously there was a Ruma homeserver project.</p>
<p><a href="https://matrix.to/#/@devinr528:matrix.org">devinr528</a> announced:</p>
<blockquote>
<p>This week in ruma-events' Google Summer of Code project, I was able to finish the macros needed to generate the event content enums and trait implementations required for events. I started by defining the <a href="https://github.com/ruma/ruma-events/pull/107">generic event structs</a> (state, message, etc.) and manually writing the <code>Serialize</code> and <code>Deserialize</code> implementations. Over the next few days, this was moved into a custom derive macro called <a href="https://github.com/ruma/ruma-events/pull/108"><code>Event</code></a>. The derive now implements all necessary traits with appropriate bounds, so a <code>StateEvent&lt;C&gt;</code> can not contain any ephemeral event content and so forth. I have removed the <a href="https://github.com/ruma/ruma-events/pull/111"><code>raw</code></a> mod and related <code>FromRaw</code> and <code>TryFromRaw</code> traits, moving the validation into the deserialization and constructor for the few types that needed it. On the <a href="https://github.com/ruma/ruma-events/pull/106">event content</a> side of things, a function like procedural macro was used to allow declaring the enum using Matrix event type identifiers.</p>
<pre data-lang="rust" style="background-color:#1e1e1e;color:#dcdcdc;" class="language-rust "><code class="language-rust" data-lang="rust"><span>event_content_enum! {
</span><span>
</span><span>    </span><span style="color:#608b4e;">/// Any message event.
</span><span>    name: AnyMessageEventContent,
</span><span>
</span><span>    events: [
</span><span>        </span><span style="color:#d69d85;">&quot;m.call.answer&quot;</span><span>,
</span><span>
</span><span>        </span><span style="color:#d69d85;">&quot;m.room.message&quot;</span><span>,
</span><span>        </span><span style="color:#608b4e;">// ...
</span><span>
</span><span>    ]
</span><span>}
</span><span>
</span><span style="color:#608b4e;">// Produces
</span><span style="color:#569cd6;">pub enum </span><span>AnyMessageEventContent {
</span><span>
</span><span>    CallAnswer(CallAnswerEventContent),
</span><span>    RoomMessage(MessageEventContent),
</span><span>
</span><span>}
</span></code></pre>
</blockquote>
<h2 id="dept-of-servers-europea">Dept of Servers üè¢</h2>
<h3 id="dendrite-gomatrixserverlib">Dendrite / gomatrixserverlib</h3>
<p>Dendrite is a next-generation homeserver written in Go</p>
<p><a href="https://matrix.to/#/@neilalexander:matrix.org">Neil Alexander</a> offered:</p>
<blockquote>
<p>Much of this week's work has been maintenance-related with refactoring, cleaning up etc.</p>
<ul>
<li>
<p>Key fetching/expiry behaviour has been fixed, improving the reliability of federation.</p>
</li>
<li>
<p>The monolith and component setup has now been refactored.</p>
</li>
<li>
<p>A number of unused internal APIs have now been removed.</p>
</li>
<li>
<p>Other internal roomserver APIs have been streamlined.</p>
</li>
</ul>
<p>We have also started building an <a href="https://yggdrasil-network.github.io">Yggdrasil</a>-powered P2P demo (as opposed to the previous demos built using libp2p) and even includes support for embedding Riot Web in the single binary. It's not very stable/usable yet but there will be more news on that to follow within the next couple of weeks.</p>
<p>We have also started building and releasing Docker images for Dendrite on <a href="https://hub.docker.com/r/matrixdotorg/dendrite">Docker Hub</a> for those who want to use Docker to test Dendrite deployment.</p>
<p>Spec compliance is unchanged from last week:</p>
<ul>
<li>
<p>Client-Server APIs: 36%</p>
</li>
<li>
<p>Server-Server APIs: 35%</p>
</li>
</ul>
</blockquote>
<h3 id="conduit">Conduit</h3>
<p>Conduit is a Matrix homeserver written in Rust <a href="https://conduit.rs">https://conduit.rs</a></p>
<p><a href="https://matrix.to/#/@timo:koesters.xyz">timo</a> reported:</p>
<blockquote>
<p>Welcome back! This week I focused my efforts on better error handling. My goal was that every problem would be forwarded to the client (e.g. InternalServerError response) and also be logged. Yesterday I merged the <a href="https://git.koesters.xyz/timo/conduit/pulls/116/files">giant PR this resulted in</a>. Hopefully this will make Conduit easier to debug in the future.</p>
<p>Here are some other things I finished this week:</p>
<ul>
<li>
<p>User-interactive authentication (e.g. you need to type your password again if you want to delete devices)</p>
</li>
<li>
<p>Config option to disable registration</p>
</li>
</ul>
<p>I also found the problem with Riot not showing notifications for new messages and created <a href="https://github.com/vector-im/riot-web/issues/14000">a bug report</a>. With a few tweaks, I managed to solve this on my account and now mentions, DMs and more play the notification sound (it also works on Riot X!). </p>
<p>@gnieto fixed a bug that prevented Riot from loading history when you join a room and @PublicByte implemented the /whoami endpoint.</p>
<p>Thanks to my supporters on <a href="https://liberapay.com/timokoesters">Liberapay</a>!</p>
</blockquote>
<h3 id="synapse">Synapse</h3>
<p><a href="https://matrix.to/#/@neilj:matrix.org">Neil</a> said:</p>
<blockquote>
<p>This week we shipped <a href="https://matrix.org/blog/2020/06/11/synapse-1-15-0-released">1.15.0</a>, edited highlights include:</p>
<p>Features</p>
<ul>
<li>
<p>Add admin APIs to allow server admins to manage users' devices. Contributed by @dklimpel. (<a href="https://github.com/matrix-org/synapse/issues/7481">#7481</a>)</p>
</li>
<li>
<p>Add an option to disable autojoining rooms for guest accounts. (<a href="https://github.com/matrix-org/synapse/issues/6637">#6637</a>)</p>
</li>
<li>
<p>For SAML authentication, add the ability to pass email addresses to be added to new users' accounts via SAML attributes. Contributed by Christopher Cooper. (<a href="https://github.com/matrix-org/synapse/issues/7385">#7385</a>)</p>
</li>
<li>
<p>Add support for generating thumbnails for WebP images. Previously, users would see an empty box instead of preview image. Contributed by @WGH-. (<a href="https://github.com/matrix-org/synapse/issues/7586">#7586</a>)</p>
</li>
<li>
<p>Support the standardized <code>m.login.sso</code> user-interactive authentication flow. (<a href="https://github.com/matrix-org/synapse/issues/7630">#7630</a>)</p>
</li>
</ul>
<p>Bugfixes</p>
<ul>
<li>
<p>Allow new users to be registered via the admin API even if the monthly active user limit has been reached. Contributed by @dklimpel. (<a href="https://github.com/matrix-org/synapse/issues/7263">#7263</a>)</p>
</li>
<li>
<p>Fix a bug in automatic user creation during first time login with <code>m.login.jwt</code>. Regression in v1.6.0. Contributed by @olof. (<a href="https://github.com/matrix-org/synapse/issues/7585">#7585</a>)</p>
</li>
<li>
<p>Fix a bug causing the cross-signing keys to be ignored when resyncing a device list. (<a href="https://github.com/matrix-org/synapse/issues/7594">#7594</a>)</p>
</li>
<li>
<p>Fix bug where returning rooms for a group would fail if it included a room that the server was not in. (<a href="https://github.com/matrix-org/synapse/issues/7599">#7599</a>)</p>
</li>
<li>
<p>Fix duplicate key violation when persisting read markers. (<a href="https://github.com/matrix-org/synapse/issues/7607">#7607</a>)</p>
</li>
<li>
<p>Prevent an entire iteration of the device list resync loop from failing if one server responds with a malformed result. (<a href="https://github.com/matrix-org/synapse/issues/7609">#7609</a>)</p>
</li>
<li>
<p>Pass device information through to the login endpoint when using the login fallback. (<a href="https://github.com/matrix-org/synapse/issues/7629">#7629</a>)</p>
</li>
<li>
<p>Advertise the <code>m.login.token</code> login flow when OpenID Connect is enabled. (<a href="https://github.com/matrix-org/synapse/issues/7631">#7631</a>)</p>
</li>
<li>
<p>Fix bug in account data replication stream. (<a href="https://github.com/matrix-org/synapse/issues/7656">#7656</a>)</p>
</li>
</ul>
<p>Internal Changes</p>
<ul>
<li>
<p>Improve query performance for fetching state from a PostgreSQL database. Contributed by @ilmari. (<a href="https://github.com/matrix-org/synapse/issues/7567">#7567</a>)</p>
</li>
<li>
<p>Speed up processing of federation stream RDATA rows. (<a href="https://github.com/matrix-org/synapse/issues/7584">#7584</a>)</p>
</li>
<li>
<p>Refactor <code>Ratelimiter</code> to limit the amount of expensive config value accesses. (<a href="https://github.com/matrix-org/synapse/issues/7595">#7595</a>)</p>
</li>
<li>
<p>Clean up exception handling in <code>SAML2ResponseResource</code>. (<a href="https://github.com/matrix-org/synapse/issues/7614">#7614</a>)</p>
</li>
<li>
<p>Check if the localpart of a Matrix ID is reserved for guest users earlier in the registration flow, as well as when responding to requests to <code>/register/available</code>. (<a href="https://github.com/matrix-org/synapse/issues/7625">#7625</a>)</p>
</li>
</ul>
<p>Aside from that we continue out push towards improving performance both in terms of sharding workers but also improving tools to manage disk space usage. Specifically this week and next we are looking at db tuning and sharding the media repo worker. We are also noticing that the typing handler is chewing more CPU than would be expected. It could be a good candidate for moving away from the master process.</p>
<p>More broadly we are changing the <a href="https://github.com/matrix-org/synapse/issues/5745">defaults for notifications</a> and making changes to support a more general overhaul of notifications.</p>
<p>Finally we are looking at how to not only delete messages after a certain time period, but also how to delete the associated media (which becomes difficult when considering e2e content along side long lived content such as avatars and sticker packs).</p>
<p>For more detail on what is coming next, take a look at our <a href="https://github.com/orgs/matrix-org/projects/8">public task board</a>.</p>
</blockquote>
<h2 id="synapse-deployment-inbox-tray">Synapse Deployment üì•</h2>
<h3 id="kubernetes">Kubernetes</h3>
<p><a href="https://matrix.to/#/@ace:kittenface.studio">Ananace</a> told us:</p>
<blockquote>
<p>Just pushed version 1.15.0 of the K8s-optimized Synapse images</p>
</blockquote>
<h2 id="dept-of-bridges-bridge-at-night">Dept of Bridges üåâ</h2>
<h3 id="mautrix-whatsapp">mautrix-whatsapp</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> told us:</p>
<blockquote>
<p>The WhatsApp bridge can now bridge location messages from WhatsApp to <code>m.location</code> on Matrix and contact messages as vCard files (until Matrix gets a native contact message type).</p>
<p>It also now encrypts media properly when bridging messages in encrypted rooms. I had apparently missed that when adding end-to-bridge encryption earlier.</p>
</blockquote>
<h3 id="mautrix-facebook">mautrix-facebook</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> said:</p>
<blockquote>
<p>mautrix-facebook got a few improvements and bugfixes:</p>
<ul>
<li>
<p>Added timestamp massaging </p>
</li>
<li>
<p>Added support for bridging video and file messages to Matrix</p>
</li>
<li>
<p>Fixed backfilling with SQLite (it didn't work due to the python timezone mess, fix contributed by erdnaxeli)</p>
</li>
<li>
<p>Improved options for automatic reconnecting. The bridge should now work fairly reliably when using all the auto-reconnect options and backfilling, it only breaks if facebook decides you've been hacked</p>
</li>
</ul>
</blockquote>
<h3 id="mautrix-bridges-in-general">mautrix bridges in general</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> said:</p>
<blockquote>
<p>Since <a href="https://github.com/matrix-org/matrix-doc/pull/2190">MSC2190</a> and the related Synapse PR aren't moving much, all my bridges now generate appservice registration files with the workaround. The workaround is needed to avoid patching synapse or using other hacks, and I decided to enable it by default as many people had problems related to having to apply it manually.</p>
<p>The WhatsApp, Facebook and Hangouts bridges now have an option to use double puppeting to disable notifications when backfilling. It can be useful if you want to copy chat history to Matrix, but don't want to be spammed with hundreds of notifications while it's happening.</p>
</blockquote>
<h3 id="nova-slack">Nova-slack</h3>
<p><a href="https://matrix.to/#/@eric:nova.chat">eric</a> offered:</p>
<blockquote>
<p>To get things ready for NovaChat launch, we added a bunch of new features to a fork of the mx-puppet-slack client that Sorunome created. You can try it out <a href="https://gitlab.com/nova/nova-slack">here</a>. We'll be pushing our changes upstream soon.</p>
<p><em>New features:</em></p>
<ul>
<li>
<p>message backfilling at room creation and reconnect</p>
</li>
<li>
<p>syncs read status to/from Slack.com</p>
</li>
<li>
<p>adds all users to bridged room during initial creation</p>
</li>
<li>
<p>automatically bridges all channels and DMs that you are part of during initial setup, so you don't have to wait for a message to arrive for it to appear in Matrix</p>
</li>
<li>
<p>tons of little reliability fixes</p>
</li>
</ul>
</blockquote>
<h3 id="matrix-sms-bridge">matrix-sms-bridge</h3>
<p><a href="https://matrix.to/#/@benedict:imbitbu.de">Benedict</a> announced:</p>
<blockquote>
<p>My <a href="https://github.com/benkuly/matrix-sms-bridge">matrix-sms-bridge</a> got an large update, which introduced an automated way to create and write messages to telephone numbers via commands in a bot room. See the <a href="https://github.com/benkuly/matrix-sms-bridge/blob/master/README.md#automated-room-creation">docs</a> for more information, how to use it.</p>
</blockquote>
<h2 id="dept-of-clients-iphone">Dept of Clients üì±</h2>
<h3 id="novachat-v0-1-1">NovaChat v0.1.1</h3>
<p><a href="https://matrix.to/#/@eric:nova.chat">eric</a> reported:</p>
<blockquote>
<p>Introducing <a href="https://nova.chat/">NovaChat</a> - a desktop chat client that supports 9+ different chat networks, built on top of Matrix. Think of it as a modern Adium/Trillian.</p>
<p><strong>How it works</strong></p>
<p>NovaChat is a system with three parts designed to work together:</p>
<ul>
<li>
<p>a new <a href="https://gitlab.com/nova/nova-web">desktop client</a>, based on Riot-web</p>
</li>
<li>
<p>a federating homeserver (nova.chat)</p>
</li>
<li>
<p>a set of Matrix bridges configured to run on a private server called a <a href="https://gitlab.com/nova/bridgebox">bridgebox</a></p>
</li>
</ul>
<p>Matrix bridges are awesome but generally require you to run own homeserver. NovaChat removes that restriction, without sacrificing security and privacy. Your remote chat network credentials never leave your bridgebox, and messages are encrypted* on the bridgebox before being sent to the NovaChat homeserver.</p>
<p>*Encryption is currently enabled on Telegram/FB/Hangouts/Whatsapp bridges, mx-puppet-bridges coming shortly)</p>
<p><em>Very rough system diagram:</em></p>
<p><code>&gt; NovaChat desktop client &lt;&gt; NovaChat homeserver &lt;&gt; bridgebox &lt;&gt; remote chat networks</code></p>
<p><strong>Features</strong></p>
<ul>
<li>
<p>Fancy new UI, heavily inspired by Telegram. See photo below or <a href="https://app.tella.tv/story/ckar1ock0000007mi7x5t3qdn">see it in action</a></p>
</li>
<li>
<p>Easy graphical bridge set up (no more fiddling with config files)</p>
</li>
<li>
<p>Reliable bridging, with delivery confirmations and bridge disconnect warnings</p>
</li>
<li>
<p>Includes 8 pre-configured bridges: Facebook/Whatsapp/Hangouts/Telegram/Slack/Instagram/Twitter/Skype. Planning to add more soon, or submit a PR!</p>
</li>
<li>
<p>Works on Mac OS, Linux and Windows</p>
</li>
</ul>
<p>You don't need to be technical to use NovaChat, it's designed to Just WorkTM. If you need help setting up a bridgebox, we are offering hosting and maintenance for USD $5 per month.</p>
<p>The vast majority of this software has been created by the talented tulir and dm0141. I personally am a terrible coder (you can tell which parts I did), but I do have experience building products and teams, and I'm excited to begin working in the Matrix universe. I wrote recently about how I believe Matrix is the <a href="https://medium.com/@ericmigi/the-universal-communication-bus-42dfb9a141ad">Universal Communication Bus</a>! Thanks goes to Sorunome for creating the mx-puppet-bridges!</p>
<p>We're developing the whole project in the open (though not all components are open source), check the <a href="https://gitlab.com/nova/issues/-/boards?scope=all&amp;utf8=%E2%9C%93&amp;state=opened">issue backlog</a> :)</p>
<p><strong>Want to help?</strong> We're hiring Matrix developer to work on the project with us. Send me a message if you're interested! Particularly looking for a React dev to help with frontend on nova-web.</p>
<p>NovaChat chat room: <a href="https://matrix.to/#/#novachat:nova.chat">#novachat:nova.chat</a></p>
</blockquote>
<p><img src="/blog/img/2020-06-12-5Fxzq-Screenshot-20200611230111-842x879.png" alt="2020-06-12-5Fxzq-Screenshot-20200611230111-842x879.png" /></p>
<h3 id="nheko-1">Nheko</h3>
<p><a href="https://github.com/Nheko-Reborn/nheko">Nheko</a> is a desktop client using Qt, Boost.Asio and C++17. It supports E2EE (with the notable exception being device verification for now) and intends to be full featured and nice to look at</p>
<p><a href="https://matrix.to/#/@red_sky:ocean.joedonofry.com">red_sky</a> announced:</p>
<blockquote>
<p>nheko 0.7.2 is ready for release. Here's the summary of changes:</p>
<h4 id="highlights">Highlights</h4>
<ul>
<li>
<p>Reactions</p>
<ul>
<li>
<p>React to a message with an emoji! üéâ</p>
</li>
<li>
<p>Reactions are shown below a message in a small bubble with a counter.</p>
</li>
<li>
<p>By clicking on that, others can add to the reaction count.</p>
</li>
<li>
<p>It may help you celebrating a new Nheko Release or react with a üëé to a failed build to express your frustration.</p>
</li>
<li>
<p>This uses a new emoji picker. The picker will be improved in the near future (better scrolling, sections, favorites, recently used or similar) and then probably replace the current picker.</p>
</li>
</ul>
</li>
<li>
<p>Support for tagging rooms <code>[tag]</code></p>
<ul>
<li>
<p>Assign custom tags to rooms from the context menu in the room list.</p>
</li>
<li>
<p>This allows filtering rooms via the group list. This puts you in a focus mode showing only the selected tags.</p>
</li>
<li>
<p>You can assign multiple tags to group rooms however you like.</p>
</li>
</ul>
</li>
<li>
<p>SSO Login</p>
<ul>
<li>
<p>With this you can now login on servers, that only provide SSO.</p>
</li>
<li>
<p>Just enter any mxid on the server. Nheko will figure out that you need to use SSO and redirect your browser to the login page.</p>
</li>
<li>
<p>Complete the login in your browser and Nheko should automatically log you in.</p>
</li>
</ul>
</li>
</ul>
<h4 id="features-1">Features</h4>
<ul>
<li>
<p>Support for showing users presence and status message as well as setting your own status message&quot;</p>
</li>
<li>
<p>Respect exif rotation of images</p>
</li>
<li>
<p>An italian translation (contributed by Lorenzo Ancora)</p>
</li>
<li>
<p>Optional alerts in your taskbar (contributed by z33ky)</p>
</li>
<li>
<p>Optional bigger emoji only messages in the timeline (contributed by lkito)</p>
</li>
<li>
<p>Optional hover feedback on messages (contributed by lkito)</p>
</li>
<li>
<p><code>/roomnick</code> to change your displayname in a single room.</p>
</li>
<li>
<p>Preliminary support for showing inline images.</p>
</li>
<li>
<p>Warn about unencrypted messages in encrypted rooms.</p>
</li>
</ul>
<h4 id="improvements">Improvements</h4>
<ul>
<li>
<p>perf: Use less CPU to sort the room list.</p>
</li>
<li>
<p>Limit size of replies. This currently looks a bit rough, but should improve in the future with a gradient or at some other transition.</p>
</li>
<li>
<p>perf: Only clean out old messages from the database every 500 syncs. (There is usually more than one sync every second)</p>
</li>
<li>
<p>Improve the login and register masks a bit with hints and validation.</p>
</li>
<li>
<p>Descriptions for settings (contributed by lkito)</p>
</li>
<li>
<p>A visual indicator, that nheko is fetching messages and improved scrolling (contributed by Lasath Fernando)</p>
</li>
</ul>
<h4 id="bugfixes">Bugfixes</h4>
<ul>
<li>
<p>Fix not being able to join rooms</p>
</li>
<li>
<p>Fix scale factor setting</p>
</li>
<li>
<p>Buildfixes against gcc10 and Qt5.15 (missing includes)</p>
</li>
<li>
<p>Settings now apply immediately again after changing them (only exception should be the scale factor)</p>
</li>
<li>
<p>Join messages should never have empty texts now</p>
</li>
<li>
<p>Timeline should now fail to render less often on platforms with native sibling windows.</p>
</li>
<li>
<p>Don't rescale images on every frame on highdpi screens.</p>
</li>
</ul>
</blockquote>
<h3 id="matrix-static-release-v0-3-0">Matrix-Static release v0.3.0</h3>
<p><a href="https://matrix.to/#/@x:riot.ovh">Michael (t3chguy)</a> reported:</p>
<blockquote>
<p>New Matrix-Static release v0.3.0</p>
<p>With improved support for media and tombstone events and a bunch of bug fixes!
<a href="https://github.com/matrix-org/matrix-static/releases">https://github.com/matrix-org/matrix-static/releases</a></p>
<p>Should be deployed to view.matrix.org shortly</p>
</blockquote>
<h3 id="arch-linux-package-of-radical-native">Arch Linux package of radical-native</h3>
<p><a href="https://matrix.to/#/@pwr22:shortestpath.dev">Peter Roberts</a> told us:</p>
<blockquote>
<p>I've made an Arch Linux package of <a href="https://aur.archlinux.org/packages/radical-native-bin/">radical-native</a>.</p>
</blockquote>
<h3 id="riot-x">Riot X</h3>
<p><a href="https://matrix.to/#/@valere35:matrix.org">valere</a> announced:</p>
<blockquote>
<ul>
<li>
<p>Several improvements on SSO login flow üîí</p>
</li>
<li>
<p>Support of power levels ‚ö°Ô∏è</p>
</li>
<li>
<p>Add remove favorites üåü</p>
</li>
<li>
<p>Multiple bugs and glitches fixes üêõ</p>
</li>
</ul>
<p>The team is currently actively working on:</p>
<ul>
<li>
<p>Voip 1:1 Calls üìû</p>
</li>
<li>
<p>Cross Signing bootstrap simplification üîë</p>
</li>
<li>
<p>Performances Improvement üî•</p>
</li>
<li>
<p>More room settings ‚öôÔ∏è</p>
</li>
</ul>
</blockquote>
<p><img src="/blog/img/2020-06-12-s3pmY-image.png" alt="2020-06-12-s3pmY-image.png" /></p>
<h3 id="riot-web">Riot Web</h3>
<p><a href="https://matrix.to/#/@jryans:matrix.org">Ryan</a> told us:</p>
<blockquote>
<p>There's been lots of work many fronts this week, including:</p>
<ul>
<li>
<p>Continued work on cross-signing bootstrapping robustness</p>
</li>
<li>
<p>New room list implementation in progress</p>
</li>
<li>
<p>Upgraded fonts for new emoji</p>
</li>
<li>
<p>A refreshed look for matrix.to is underway</p>
</li>
<li>
<p>The appearance tab is being tweaked and expanded</p>
</li>
<li>
<p>Read marker consistency improvements</p>
</li>
</ul>
<p>Most of this work is still in progress or has only landed on develop so far. Our next RC will happen next week.</p>
</blockquote>
<h3 id="riot-ios">Riot-iOS</h3>
<p><a href="https://matrix.to/#/@Manu:matrix.org">Manu</a> offered:</p>
<blockquote>
<p>This week, we continued to iterate on the implementation of the new push notification service thanks to user feedbacks. Those feedbacks also show that the app uses less battery.</p>
<p>On login, this is now possible to recover your cross-signing and your key backup from your recovery passphrase or key.</p>
</blockquote>
<h2 id="dept-of-sdks-and-frameworks">Dept of SDKs and Frameworks üß∞</h2>
<h3 id="libolm-3-1-5">libolm 3.1.5</h3>
<p><a href="https://matrix.to/#/@hubert:uhoreg.ca">uhoreg</a> told us:</p>
<blockquote>
<p><a href="https://gitlab.matrix.org/matrix-org/olm/-/releases/3.1.5">libolm 3.1.5</a> has been released.  It mainly collects the various build system and documentation fixes that have accumulated since the last release.  It also includes a new wasm build target (which apparently is used for running matrix-rust-sdk in the browser), as well as TypeScript definitions for the JavaScript bindings.</p>
</blockquote>
<h3 id="ruma">Ruma</h3>
<p>Ruma is a Rust project to create a comprehensive set of APIs for Matrix. Previously there was a Ruma homeserver project.</p>
<p><a href="https://matrix.to/#/@jplatte:matrix.org">jplatte</a> told us:</p>
<blockquote>
<p>Most of the work this past week was on ruma-events, for more on that see the GSoC section! Devin got far enough with that so we now know it all works out and can replace the previous ruma-events API. When that was clear, ruma-events was also merged into our new <a href="https://github.com/ruma/ruma">monorepo</a>; now the only remaining crate to be merged is ruma-client (where I'm also waiting for some pending changes).</p>
</blockquote>
<h2 id="dept-of-ops">Dept of Ops üõ†</h2>
<h3 id="matrix-helm-chart">Matrix Helm chart</h3>
<p>Kubernetes Helm chart for easily deploying a Matrix homeserver stack</p>
<p><a href="https://matrix.to/#/@david:typokign.com">Typo Kign</a> told us:</p>
<blockquote>
<p>Version 2 of my <a href="https://github.com/dacruz21/matrix-chart">Matrix Helm chart</a> is out! It now allows for running a federating homeserver without needing an external load balancer for the federation service, potentially lowering costs (depending on your cloud provider), and definitely reducing the headache of managing TLS certificates!</p>
<p><a href="https://github.com/dacruz21/matrix-chart">dacruz21/matrix-chart</a> is a Kubernetes Helm chart for easily deploying a Matrix homeserver stack, complete with Synapse, Riot, VoIP calls, bridges, and other backing services. It's ideal for anyone looking to run a large homeserver, or for corporate environments where security is paramount!</p>
</blockquote>
<h2 id="dept-of-internet-of-things-bulb">Dept of Internet of Things üí°</h2>
<h3 id="tuple-weather-station-example">Tuple Weather Station Example</h3>
<p><a href="https://matrix.to/#/@alexander:eiselecloud.de">Alexander Eisele</a> announced:</p>
<blockquote>
<p>This week I've programmed a small POC for a Matrix weather station.</p>
<p>It's build using a ESP8266 Microcontroller and a BME280 Sensor for temperature, humidity and barometric pressure.</p>
<p>The data is send over the Tuple Matrix &lt;-&gt; MQTT bridge.</p>
<p>Code: <a href="https://github.com/derEisele/tuple-weather-example">https://github.com/derEisele/tuple-weather-example</a></p>
<p>You can join this project on <a href="https://matrix.to/#/#tuple:eiselecloud.de">#tuple:eiselecloud.de</a>.</p>
</blockquote>
<p>I'm personally really excited about this project!</p>
<h2 id="dept-of-bots-robot-face">Dept of Bots ü§ñ</h2>
<h3 id="matrix-bot-for-redmine">Matrix bot for Redmine</h3>
<p><a href="https://matrix.to/#/@progserega:rsprim.ru">progserega</a> told us:</p>
<blockquote>
<p><a href="https://github.com/progserega/matrix_redmine_bot">https://github.com/progserega/matrix_redmine_bot</a></p>
<ol>
<li>
<p>Bot can create, accept (to user) new issues in Redmine from matrix</p>
</li>
<li>
<p>Bot can add comment or/and files to issue by it id</p>
</li>
<li>
<p>Bot can show messages (for user) from Redmine in matrix room</p>
</li>
</ol>
</blockquote>
<h2 id="dept-of-guides">Dept of Guides üß≠</h2>
<p><a href="https://matrix.to/#/@levans:safaradeg.net">Levans</a> said:</p>
<blockquote>
<p>Anyone running a federating instance of Synapse will likely have seen this: Synapse is database-hungry. It tends to take a lot of space. In this post, I'm documenting how I shrunk my homeserver database from 100GB to a little under 8GB, during a long maintenance cleanup. <a href="https://levans.fr/shrink-synapse-database.html">https://levans.fr/shrink-synapse-database.html</a></p>
</blockquote>
<p>Very pleased to see this, I have a feeling I'm going to be running it in the near future...</p>
<h2 id="new-public-rooms-stadium">New Public Rooms üèü</h2>
<h3 id="new-room-matrix-outreach">New room &quot;Matrix Outreach&quot;</h3>
<p><a href="https://matrix.to/#/@julian:foad.me.uk">JulianF</a> reported:</p>
<blockquote>
<p>There's a new room &quot;Matrix Outreach&quot; <a href="https://matrix.to/#/#matrix-outreach:matrix.org">#matrix-outreach:matrix.org</a> for folks interested in &quot;Helping each other explain and promote Matrix to the public: creating slogans, introduction leaflets, info-graphics, elevator pitch, Wikipedia articles, and so on.&quot;</p>
</blockquote>
<h2 id="dept-of-ping-table-tennis-paddle-and-ball">Dept of Ping üèì</h2>
<p>Here we reveal, rank, and applaud the homeservers with the lowest ping, as measured by <a href="https://github.com/maubot/echo">pingbot</a>, a <a href="https://github.com/maubot/maubot">maubot</a> that you can host on your own server. Join <a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">fairydust.space</td><td style="text-align: center">391</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">envs.net</td><td style="text-align: center">443.5</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">maunium.net</td><td style="text-align: center">506</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">tum.de</td><td style="text-align: center">603.5</td></tr>
<tr><td style="text-align: center">5</td><td style="text-align: center">neko.dev</td><td style="text-align: center">822</td></tr>
<tr><td style="text-align: center">6</td><td style="text-align: center">maclemon.at</td><td style="text-align: center">887</td></tr>
<tr><td style="text-align: center">7</td><td style="text-align: center">cyllos.me</td><td style="text-align: center">916</td></tr>
<tr><td style="text-align: center">8</td><td style="text-align: center">shortestpath.dev</td><td style="text-align: center">1072.5</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">settgast.org</td><td style="text-align: center">1079</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">maescool.be</td><td style="text-align: center">1324</td></tr>
</tbody></table>
<h2 id="that-s-all-i-know-checkered-flag">That's all I know üèÅ</h2>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2020&#x2F;06&#x2F;11&#x2F;synapse-1-15-0-released&#x2F;" title="Synapse 1.15.0 released">Synapse 1.15.0 released</a></h1>
            <span>
                11.06.2020 18:27
                ‚Äî
                <a href="/category/releases">
                    Releases
                </a>
                ‚Äî
                <a href="/author/neil-johnson">
                    Neil Johnson
                </a>
            </span>
            
        </header>
        <div>
            <p>Synapse 1.15.0 release day folks.</p>
<p>We continue our push to improve performance across the board. Factoring out event persistence into a separate worker pointed the way to a host of small but collectively important improvements. Expect further changes in coming releases.</p>
<p>Aside from that the admin API continues to grow (this time device management) and we have improved device list syncing to aid e2ee reliability.</p>
<p>We are receiving an increasing number of high quality PRs from the community, please keep them coming. Special thanks to <a href="https://github.com/cg505">cg505</a>, <a href="https://github.com/dklimpel">dklimpel</a>, <a href="https://github.com/WGH">WGH</a>, <a href="https://github.com/olof">olof</a> and <a href="https://github.com/ilmari">ilmari</a></p>
<p>Get 1.15.0 from <a href="https://github.com/matrix-org/synapse/releases/tag/v1.15.0">github</a> or any of the sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md.</p>
<p>Changelog since v1.14.0</p>
<h1 id="synapse-1-15-0-2020-06-11">Synapse 1.15.0 (2020-06-11)</h1>
<p>No significant changes.</p>
<h1 id="synapse-1-15-0rc1-2020-06-09">Synapse 1.15.0rc1 (2020-06-09)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Advertise support for Client-Server API r0.6.0 and remove related unstable feature flags. (<a href="https://github.com/matrix-org/synapse/issues/6585">#6585</a>)</li>
<li>Add an option to disable autojoining rooms for guest accounts. (<a href="https://github.com/matrix-org/synapse/issues/6637">#6637</a>)</li>
<li>For SAML authentication, add the ability to pass email addresses to be added to new users' accounts via SAML attributes. Contributed by Christopher Cooper. (<a href="https://github.com/matrix-org/synapse/issues/7385">#7385</a>)</li>
<li>Add admin APIs to allow server admins to manage users' devices. Contributed by @dklimpel. (<a href="https://github.com/matrix-org/synapse/issues/7481">#7481</a>)</li>
<li>Add support for generating thumbnails for WebP images. Previously, users would see an empty box instead of preview image. Contributed by @WGH-. (<a href="https://github.com/matrix-org/synapse/issues/7586">#7586</a>)</li>
<li>Support the standardized <code>m.login.sso</code> user-interactive authentication flow. (<a href="https://github.com/matrix-org/synapse/issues/7630">#7630</a>)</li>
</ul>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Allow new users to be registered via the admin API even if the monthly active user limit has been reached. Contributed by @dklimpel. (<a href="https://github.com/matrix-org/synapse/issues/7263">#7263</a>)</li>
<li>Fix email notifications not being enabled for new users when created via the Admin API. (<a href="https://github.com/matrix-org/synapse/issues/7267">#7267</a>)</li>
<li>Fix str placeholders in an instance of <code>PrepareDatabaseException</code>. Introduced in Synapse v1.8.0. (<a href="https://github.com/matrix-org/synapse/issues/7575">#7575</a>)</li>
<li>Fix a bug in automatic user creation during first time login with <code>m.login.jwt</code>. Regression in v1.6.0. Contributed by @olof. (<a href="https://github.com/matrix-org/synapse/issues/7585">#7585</a>)</li>
<li>Fix a bug causing the cross-signing keys to be ignored when resyncing a device list. (<a href="https://github.com/matrix-org/synapse/issues/7594">#7594</a>)</li>
<li>Fix metrics failing when there is a large number of active background processes. (<a href="https://github.com/matrix-org/synapse/issues/7597">#7597</a>)</li>
<li>Fix bug where returning rooms for a group would fail if it included a room that the server was not in. (<a href="https://github.com/matrix-org/synapse/issues/7599">#7599</a>)</li>
<li>Fix duplicate key violation when persisting read markers. (<a href="https://github.com/matrix-org/synapse/issues/7607">#7607</a>)</li>
<li>Prevent an entire iteration of the device list resync loop from failing if one server responds with a malformed result. (<a href="https://github.com/matrix-org/synapse/issues/7609">#7609</a>)</li>
<li>Fix exceptions when fetching events from a remote host fails. (<a href="https://github.com/matrix-org/synapse/issues/7622">#7622</a>)</li>
<li>Make <code>synctl restart</code> start synapse if it wasn't running. (<a href="https://github.com/matrix-org/synapse/issues/7624">#7624</a>)</li>
<li>Pass device information through to the login endpoint when using the login fallback. (<a href="https://github.com/matrix-org/synapse/issues/7629">#7629</a>)</li>
<li>Advertise the <code>m.login.token</code> login flow when OpenID Connect is enabled. (<a href="https://github.com/matrix-org/synapse/issues/7631">#7631</a>)</li>
<li>Fix bug in account data replication stream. (<a href="https://github.com/matrix-org/synapse/issues/7656">#7656</a>)</li>
</ul>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Update the OpenBSD installation instructions. (<a href="https://github.com/matrix-org/synapse/issues/7587">#7587</a>)</li>
<li>Advertise Python 3.8 support in <code>setup.py</code>. (<a href="https://github.com/matrix-org/synapse/issues/7602">#7602</a>)</li>
<li>Add a link to <code>#synapse:matrix.org</code> in the troubleshooting section of the README. (<a href="https://github.com/matrix-org/synapse/issues/7603">#7603</a>)</li>
<li>Clarifications to the admin api documentation. (<a href="https://github.com/matrix-org/synapse/issues/7647">#7647</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Convert the identity handler to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7561">#7561</a>)</li>
<li>Improve query performance for fetching state from a PostgreSQL database. Contributed by @ilmari. (<a href="https://github.com/matrix-org/synapse/issues/7567">#7567</a>)</li>
<li>Speed up processing of federation stream RDATA rows. (<a href="https://github.com/matrix-org/synapse/issues/7584">#7584</a>)</li>
<li>Add comment to systemd example to show postgresql dependency. (<a href="https://github.com/matrix-org/synapse/issues/7591">#7591</a>)</li>
<li>Refactor <code>Ratelimiter</code> to limit the amount of expensive config value accesses. (<a href="https://github.com/matrix-org/synapse/issues/7595">#7595</a>)</li>
<li>Convert groups handlers to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7600">#7600</a>)</li>
<li>Clean up exception handling in <code>SAML2ResponseResource</code>. (<a href="https://github.com/matrix-org/synapse/issues/7614">#7614</a>)</li>
<li>Check that all asynchronous tasks succeed and general cleanup of <code>MonthlyActiveUsersTestCase</code> and <code>TestMauLimit</code>. (<a href="https://github.com/matrix-org/synapse/issues/7619">#7619</a>)</li>
<li>Convert <code>get_user_id_by_threepid</code> to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7620">#7620</a>)</li>
<li>Switch to upstream <code>dh-virtualenv</code> rather than our fork for Debian package builds. (<a href="https://github.com/matrix-org/synapse/issues/7621">#7621</a>)</li>
<li>Update CI scripts to check the number in the newsfile fragment. (<a href="https://github.com/matrix-org/synapse/issues/7623">#7623</a>)</li>
<li>Check if the localpart of a Matrix ID is reserved for guest users earlier in the registration flow, as well as when responding to requests to <code>/register/available</code>. (<a href="https://github.com/matrix-org/synapse/issues/7625">#7625</a>)</li>
<li>Minor cleanups to OpenID Connect integration. (<a href="https://github.com/matrix-org/synapse/issues/7628">#7628</a>)</li>
<li>Attempt to fix flaky test: <code>PhoneHomeStatsTestCase.test_performance_100</code>. (<a href="https://github.com/matrix-org/synapse/issues/7634">#7634</a>)</li>
<li>Fix typos of <code>m.olm.curve25519-aes-sha2</code> and <code>m.megolm.v1.aes-sha2</code> in comments, test files. (<a href="https://github.com/matrix-org/synapse/issues/7637">#7637</a>)</li>
<li>Convert user directory, state deltas, and stats handlers to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7640">#7640</a>)</li>
<li>Remove some unused constants. (<a href="https://github.com/matrix-org/synapse/issues/7644">#7644</a>)</li>
<li>Fix type information on <code>assert_*_is_admin</code> methods. (<a href="https://github.com/matrix-org/synapse/issues/7645">#7645</a>)</li>
<li>Convert registration handler to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7649">#7649</a>)</li>
</ul>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2020&#x2F;06&#x2F;05&#x2F;this-week-in-matrix-2020-06-05&#x2F;" title="This Week in Matrix 2020-06-05">This Week in Matrix 2020-06-05</a></h1>
            <span>
                05.06.2020 00:00
                ‚Äî
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                ‚Äî
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="firstly-runner">Firstly... üèÉ‚Äç‚ôÄÔ∏è</h2>
<p>Make an entry in your calendar, don't just write it on your hand: <a href="https://matrix.org/open-tech-will-save-us/">Open Tech Will Save Us</a> is back for a third edition!<br />
<strong>Next Wednesday, 10th June 2020!</strong></p>
<h2 id="matrix-live">Matrix Live üéô</h2>
<iframe width="560" height="315" src="https://www.youtube.com/embed/zyUEvprkvjY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2 id="dept-of-spec-scroll">Dept of Spec üìú</h2>
<p><a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> reported:</p>
<blockquote>
<p>Here's your weekly spec update! The heart of Matrix is the specification - and this is modified by Matrix Spec Change (MSC) proposals. Learn more about how the process works at <a href="https://matrix.org/docs/spec/proposals.">https://matrix.org/docs/spec/proposals.</a></p>
<h4 id="msc-status">MSC Status</h4>
<p><strong>Merged MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/issues/1219">Proposal for storing megolm keys serverside</a></li>
</ul>
<p><strong>MSCs in Final Comment Period:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2265">MSC2265: Proposal for mandating case folding when processing e-mail address localparts</a> (merge)</li>
</ul>
<p><strong>New MSCs:</strong></p>
<ul>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2611">MSC2611: Remove m.login.token User-Interactive Authentication type from the specification</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2610">MSC2610: Remove m.login.oauth2 User-Interactive Authentication type from the specification</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2604">MSC2604: Accept device information for the login fallback endpoint</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2596">MSC2596: Proposal to always allow rescinding invites</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2589">MSC2589: Improve replies</a></p>
</li>
</ul>
<h4 id="spec-core-team">Spec Core Team</h4>
<p>In terms of Spec Core Team MSC focus for this week, we've still got <a href="https://github.com/matrix-org/matrix-doc/issues/2366">MSC2366</a> (verification flows) on our plate, but we're removing <a href="https://github.com/matrix-org/matrix-doc/issues/2399">MSC2399</a> (UISI messaging) as it just needs one more final tick. We're adding <a href="https://github.com/matrix-org/matrix-doc/issues/2403">MSC2403</a> (knocking) in its place.</p>
</blockquote>
<p><img src="/blog/img/2020-06-05-TmAIq-plot.png" alt="2020-06-05-TmAIq-plot.png" /></p>
<h2 id="dept-of-servers-europea">Dept of Servers üè¢</h2>
<h3 id="mascarene">Mascarene</h3>
<p><a href="https://matrix.to/#/@nico:beerfactory.org">Nico</a> said:</p>
<blockquote>
<p><a href="https://gitlab.com/mascarene/mascarene">Mascarene</a> is a quite new homeserver implementation project started a few months ago. Now it's time to introduce it.</p>
<p>Mascarene is written in <a href="https://www.scala-lang.org/">Scala</a>, runs on JVM and relies on <a href="https://akka.io/">Akka</a> actor model. Out of the box it provides features like efficient streaming I/O, clustering and live data distribution. Data are backed in a PostgreSQL database.</p>
<p>The project is in early stage but already provides a few endpoints which make Mascarene able to talk to Riot. </p>
<p>You can test it at <a href="https://snapshot.mascarene.org">https://snapshot.mascarene.org</a>. You should be able to register, login, create a room and talk to yourself.</p>
<p>Current work is focused on client API implementation; federation or e2ee will come later. </p>
<p>Contributions are welcome, join us on <a href="https://matrix.to/#/#mascarene:beerfactory.org">#mascarene:beerfactory.org</a></p>
</blockquote>
<h3 id="conduit">Conduit</h3>
<p>Conduit is a Matrix homeserver written in Rust <a href="https://conduit.rs">https://conduit.rs</a></p>
<p><a href="https://matrix.to/#/@timo:koesters.xyz">timo</a> told us:</p>
<blockquote>
<p>Welcome back! This week I went through the whole Client-Server API and wrote down everything that is still missing from Conduit. You can find issues for all of them in the <a href="https://git.koesters.xyz/timo/conduit/milestones">milestone for Conduit 1.0</a>. This should make it more easy for contributors to find something to work on and gives a lot more structure to the repo (maybe I also did it, because it's so satisfying to close issues and see the milestone percentage go up üòõ).</p>
<p>Some of the issues I could already close this week include:</p>
<ul>
<li>
<p>Implement redaction</p>
</li>
<li>
<p>Implement loading the message someone replied to (/context)</p>
</li>
<li>
<p>Fix bugs with notifications</p>
</li>
<li>
<p>Don't send typing events when nothing happened</p>
</li>
<li>
<p>Bundle typing events into one EDU</p>
</li>
<li>
<p>Don't send notification counts every /sync</p>
</li>
<li>
<p>Implement heroes</p>
</li>
</ul>
<p>As you can tell, a lot of work is starting to go into smaller improvements, which is a good thing, because it means most of the core work is already done!</p>
<p>Thanks to my supporters on <a href="https://liberapay.com/timokoesters">Liberapay</a> (Take a look, I improved it üôÇ).</p>
</blockquote>
<h3 id="synapse">Synapse</h3>
<p><a href="https://matrix.to/#/@neilj:matrix.org">Neil</a> told us:</p>
<blockquote>
<p>This week in Synapse land we have been focusing on bug fixes especially SSO and soft logout. </p>
<p>We also spent some time thinking about how to further improve performance for large scale deployments (like matrix.org). In short this will mean sharding contested workers such as the media repo worker, the federation sender and the federation reader. We also want to remove some more functionality from the master process because it is still sitting at about 80% and we‚Äôd like some more head room. We'd also like to fix up the state compressor so it can easily be run as a background progress to save on disk space, this will benefit all installations big and small. Finally we want to speed up joins over federation. Exciting times.</p>
<p>Next week, more of the same and we should start on some of the perf items. Also look out for changes to notification defaults.</p>
</blockquote>
<h3 id="dendrite-gomatrixserverlib">Dendrite / gomatrixserverlib</h3>
<p>Dendrite is a next-generation homeserver written in Go</p>
<p><a href="https://matrix.to/#/@neilalexander:matrix.org">Neil Alexander</a> offered:</p>
<blockquote>
<p>Updates:</p>
<ul>
<li>
<p>Room version 6 support has been added</p>
</li>
<li>
<p>Server signing keys which have passed their validity period are now re-requested and updated properly, increasing reliability of federation substantially</p>
</li>
<li>
<p>Federated room joins have been significantly sped up by requesting missing auth events inline when verifying room state, rather than repeating the entire verification for each missing event</p>
</li>
<li>
<p>Local send-to-device support has been added (federated send-to-device coming soon)</p>
</li>
<li>
<p>A lot of code clean-up has taken place (with more to come), including cleaning up the internal APIs and the component bases</p>
</li>
<li>
<p>Decoding of room version 3 event IDs in request URLs has been improved</p>
</li>
<li>
<p>Inbound federation requests now interrupt backoff intervals on outbound sends</p>
</li>
<li>
<p>A new internal API exists now for interrupting backoff intervals on the federation sender</p>
</li>
<li>
<p>The federated <code>/devices</code> endpoint now returns in the correct format</p>
</li>
<li>
<p>Public rooms are now sorted by their member count</p>
</li>
<li>
<p>Only our own aliases are stored in the public rooms directory now</p>
</li>
<li>
<p>gomatrixserverlib is now responsible for marking room versions as supported/stable</p>
</li>
<li>
<p>Spec-compliant transactions are now sent to the appservice component</p>
</li>
<li>
<p>File URIs for SQLite databases are now set up using common functions</p>
</li>
<li>
<p>Handling registration for a user that already exists has been fixed (thanks <a href="https://github.com/matrix-org/dendrite/pull/1076">S7evinK</a>!)</p>
</li>
<li>
<p>Dendrite can now be configured to use a HTTP proxy server for outbound HTTP (thanks <a href="https://github.com/matrix-org/dendrite/pull/1055">dr-bonez</a>!)</p>
</li>
</ul>
<p>Sytest compliance:</p>
<ul>
<li>
<p>Client-server APIs: 36%</p>
</li>
<li>
<p>Server-server APIs: 35%</p>
</li>
</ul>
<p>In other news, Kegan wrote a post on <a href="https://github.com/matrix-org/dendrite/wiki/How-p2p.riot.im-works">how p2p.riot.im works</a>, including Dendrite's journey to SQLite and WebAssembly!</p>
</blockquote>
<p>Additionally! You may have already read about <a href="https://matrix.org/blog/2020/06/02/introducing-p-2-p-matrix">v0.1.1 of the P2P Matrix demo</a> - this is a big update, with local storage, room alias handling, federation improvements and more! </p>
<h2 id="dept-of-bridges-bridge-at-night">Dept of Bridges üåâ</h2>
<h3 id="matrix-appservice-minecraft-bridge-now-in-beta">Matrix Appservice Minecraft bridge now in beta</h3>
<p><a href="https://matrix.to/#/@dhmf:dhdf.dev">Dylan</a> reported:</p>
<blockquote>
<p>My Matrix Appservice Minecraft bridge is now in beta</p>
<ul>
<li><a href="https://github.com/dhghf/matrix-appservice-minecraft">https://github.com/dhghf/matrix-appservice-minecraft</a></li>
</ul>
<p>Here is our Matrix room <a href="https://matrix.to/#/#minecraft:dhdf.dev">#minecraft:dhdf.dev</a></p>
</blockquote>
<p><img src="/blog/img/2020-06-05-FLroa-image.png" alt="2020-06-05-FLroa-image.png" /></p>
<p><img src="/blog/img/2020-06-05-0PFg--2020-06-02_04.12.42.png" alt="2020-06-05-0PFg--2020-06-02_04.12.42.png" /></p>
<p>More screenshots: <a href="https://github.com/dhghf/matrix-appservice-minecraft#screenshots">https://github.com/dhghf/matrix-appservice-minecraft#screenshots</a></p>
<h3 id="tuple">Tuple</h3>
<p><a href="https://matrix.to/#/@alexander:eiselecloud.de">Alexander Eisele</a> reported:</p>
<blockquote>
<p>Tuple is a very early simple matrix &lt;--&gt; mqtt bridge for IOT and other embedded devices.</p>
<p>It's my very first golang project, but it works(TM).</p>
<ul>
<li>
<p>Repo: <a href="https://gitlab.eiselecloud.de/matrix/tuple">https://gitlab.eiselecloud.de/matrix/tuple</a></p>
</li>
<li>
<p>Discussion/Testing: <a href="https://matrix.to/#/#tuple:eiselecloud.de">#tuple:eiselecloud.de</a></p>
</li>
</ul>
</blockquote>
<p>This is exciting! I would love to see more IoT-related projects!</p>
<h3 id="mautrix-hangouts">mautrix-hangouts</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> reported:</p>
<blockquote>
<p>mautrix-hangouts can also do backfilling now, both when creating portal and missed messages when connecting</p>
</blockquote>
<h3 id="mautrix-facebook">mautrix-facebook</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> told us:</p>
<blockquote>
<p>mautrix-facebook got support for backfilling history when creating portals and backfilling missed messages when connecting. There's also an option to periodically reconnect to potentially fix the bug where Facebook decides that you don't get messages anymore, but doesn't actually disconnect you.</p>
</blockquote>
<h3 id="mautrix-whatsapp">mautrix-whatsapp</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> said:</p>
<blockquote>
<p>I had apparently forgotten to implement bridge information in the whatsapp bridge when I implemented it in my other bridges, but that mistake is now corrected. I also fixed a bug with encryption where it would generate too many one-time keys and cause messages to be undecryptable. Finally, mautrix-whatsapp had its first release this week since it's working reasonably well now.</p>
</blockquote>
<h2 id="dept-of-clients-iphone">Dept of Clients üì±</h2>
<h3 id="radical-native">Radical Native</h3>
<p><a href="https://matrix.to/#/@stoically:matrix.org">stoic</a> reported:</p>
<blockquote>
<p>Eager to test the keytar feature (pickle key stored in OS secret storage) with Riot Web? Support landed in <a href="https://github.com/stoically/radical-native">radical-native v0.1beta13</a>, which uses <a href="https://github.com/stoically/keytar-rs">Rust keytar bindings</a> under the hood. Testing requires the latest and greatest of Riot Web, so riot.im/develop might be the place to see it in action</p>
</blockquote>
<p><img src="/blog/img/2020-06-05-nyIuw-image.png" alt="2020-06-05-nyIuw-image.png" /></p>
<p>Keytar support is a <a href="https://github.com/matrix-org/matrix-js-sdk/pull/1387">very very new feature</a>, <a href="https://matrix.to/#/@hubert:uhoreg.ca">uhoreg</a>, who has been <a href="https://github.com/vector-im/riot-desktop/pull/95">working on it in the shadows</a> and wasn't expecting to see it land yet, commented:</p>
<blockquote>
<p>üò≤</p>
</blockquote>
<h3 id="pattle-version-0-17-0">Pattle: version 0.17.0</h3>
<p>Pattle is a client written for Flutter using Dart</p>
<p><a href="https://matrix.to/#/@wilko:pattle.im">Wilko</a> offered:</p>
<blockquote>
<p>A new version has been made available and will become available on Google Play and TestFlight!</p>
<p>‚ö†Ô∏è If you're not logged out, it's recommend that you logout and additionally clear your data after installing the new version! ‚ö†Ô∏è</p>
<h4 id="changes">Changes</h4>
<ul>
<li>
<p>Added the ability to reply to messages!</p>
</li>
<li>
<p>You can now accept (and reject) invites!</p>
</li>
<li>
<p>You can now join and search channels!</p>
</li>
<li>
<p>Chat input has been redesigned!</p>
</li>
<li>
<p>Chat details has been somewhat redesigned</p>
</li>
<li>
<p>The group icon in the chat's details is now blurred and can be shown unblurred by scrolling to the top</p>
</li>
<li>
<p>Replies are now a maximum of 3 lines long</p>
</li>
<li>
<p>The current version is now shown in settings</p>
</li>
<li>
<p>Wait a bit after typing before checking the homeserver when logging in</p>
</li>
<li>
<p>Chat name change events are now shown</p>
</li>
<li>
<p>Chat icon change events are now shown</p>
</li>
<li>
<p>Errors are now reported to Sentry again!</p>
</li>
<li>
<p>You won't enter the app with empty chats if the initial load failed</p>
</li>
<li>
<p>Show date above chat creation event</p>
</li>
<li>
<p>Fix time sometimes being dark and not readable on image messages</p>
</li>
<li>
<p>Fix sender's name going outside of bubble</p>
</li>
<li>
<p>Sender is now in bold for chat description change event</p>
</li>
<li>
<p>More messages are now loaded if initially not enough are displayed</p>
</li>
<li>
<p>Show ripple effect on chat app bar when tapping</p>
</li>
<li>
<p>And more!</p>
</li>
</ul>
<h4 id="get-pattle">Get Pattle</h4>
<ul>
<li>
<p><strong>Android</strong></p>
<ul>
<li><strong><a href="https://f-droid.org/en/packages/im.pattle.app/">F-Droid</a></strong></li>
<li><strong><a href="https://play.google.com/store/apps/details?id=im.pattle.app">Google Play</a></strong></li>
</ul>
</li>
<li>
<p><strong><a href="https://testflight.apple.com/join/uTytydST">iOS (TestFlight)</a></strong></p>
</li>
</ul>
<h4 id="get-involved">Get involved</h4>
<ul>
<li>
<p><strong>Follow development</strong>: <a href="https://matrix.to/#/#app:pattle.im">#app:pattle.im</a></p>
</li>
<li>
<p><strong>Issues or suggestions</strong>: <a href="https://git.pattle.im/pattle/app/issues">Post them here!</a></p>
</li>
<li>
<p><strong>Donate</strong>: If you want to support Pattle, <a href="https://liberapay.com/wilko/">you can donate!</a></p>
</li>
</ul>
</blockquote>
<iframe width="560" height="315" src="https://www.youtube.com/embed/76LTTfVZgi0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h3 id="riotx-v0-21-0">RiotX v0.21.0</h3>
<p><a href="https://matrix.to/#/@benoit.marty:matrix.org">benoit</a> announced:</p>
<blockquote>
<p>RiotX v0.21.0 has been released on May 28th. It adds support to identity server configuration and e-mail/phone binding and unbinding. It's also now possible to switch between languages inside the app and to display the list of attachments (media and file) of a room. A new setting has been also added to hide redacted (deleted) events in the timeline. As Riot-Android SAS v2 is also included in this release. Also <code>formatted_body</code> for <code>m.notice</code> and <code>m.emote</code> are now taken into account.</p>
<p>This week we were still working on implementing VoIP (audio and video call). Support for integration manager, widgets and sending stickers has been merged to develop.
Many new features are coming soon, stay tuned!</p>
</blockquote>
<h3 id="riot-android-classic">Riot-Android classic</h3>
<p><a href="https://matrix.to/#/@benoit.marty:matrix.org">benoit</a> offered:</p>
<blockquote>
<p>Riot-Android: Version 0.9.12 has been released on May 20th. I forgot to mention it the TWIM of last week. It contains a fix for favorite rooms vanishing and also the SAS v2 implementation (new key agreement method).</p>
</blockquote>
<h3 id="mirage">Mirage</h3>
<p><a href="https://matrix.to/#/@miruka:privacytools.io">miruka</a> said:</p>
<blockquote>
<p>Mirage 0.5.1 has been released today:</p>
<ul>
<li>
<p>Persistent, cross-client, push rules-aware unread message counters</p>
</li>
<li>
<p>Read receipts are now sent to mark rooms as read</p>
</li>
<li>
<p>Basic room settings can now be edited and saved</p>
</li>
<li>
<p>More control over window alerts, e.g. only enabling them for messages mentioning you</p>
</li>
<li>
<p>Lots of bugfixes</p>
</li>
</ul>
<p><a href="https://github.com/mirukana/mirage/releases/tag/v0.5.1">Full changelog</a></p>
</blockquote>
<h3 id="riot-ios">Riot-iOS</h3>
<p><a href="https://matrix.to/#/@Manu:matrix.org">Manu</a> said:</p>
<blockquote>
<p>This week, we finalised our work around the iOS13 SDK. The coming public TestFlight (0.12.2) is the result of this work. It comes with a lot of changes including a full rewrite of the push handling codebase, trying to find solutions to make matrix e2ee compatible with iOS Notification Service Extension. Most of these changes are unfortunately invisible for end users. Please report any issues. Note this is safe to switch between this TF and 0.11.5.</p>
<p>In parallel, we started to implement the cross-signing bootstrap and the recovery management. The UX of this is going to be refined on Riot-Web and RiotX-Android. Riot-iOS will implement the refined UX directly.</p>
</blockquote>
<h3 id="riot-web">Riot Web</h3>
<p>A glossy Matrix collaboration client for the web. <a href="https://riot.im">https://riot.im</a></p>
<p><a href="https://matrix.to/#/@jryans:matrix.org">Ryan</a> told us:</p>
<blockquote>
<p>We had several Riot Web releases this week, first with 1.6.3:</p>
<ul>
<li>
<p>Security fix for auth handling in SSO deployments, thanks Quentin Gliech for responsible disclosure</p>
</li>
<li>
<p>Added more shortcuts to jump to read marker and upload a file</p>
</li>
<li>
<p>Fixed notification tray icon stability for desktop on Windows</p>
</li>
<li>
<p>Added an IRC style layout (currently available in labs only)</p>
</li>
<li>
<p>Added font scaling settings (currently available in labs only)</p>
</li>
<li>
<p>Fixed several bugs in the cross-signing bootstrap process</p>
</li>
<li>
<p>Converted older banner-style UI for updates etc. to newer toasts</p>
</li>
</ul>
<p>This was quickly followed by 1.6.4 to fix a few regressions with dismissing toasts, compact timeline layout, key backup, and tooltips on scroll.</p>
</blockquote>
<h2 id="dept-of-sdks-and-frameworks">Dept of SDKs and Frameworks üß∞</h2>
<h3 id="matrix-dart-sdk-version-0-32-0">Matrix Dart SDK: version 0.32.0</h3>
<p><a href="https://matrix.to/#/@wilko:pattle.im">Wilko</a> announced:</p>
<blockquote>
<ul>
<li><strong>Databases are now deleted as a migration strategy</strong></li>
</ul>
<p>This will be in effect until 1.0 (or a bit before). If needed, make a backup between every minor version bump.</p>
<ul>
<li>
<p>All members necessary to render the timeline are now loaded from the store</p>
</li>
<li>
<p><code>Room.myMembership</code> has been removed, use <code>Room.me.membership</code></p>
</li>
<li>
<p>Add <code>Rooms.enter</code> and <code>Room.join</code> to join rooms</p>
</li>
<li>
<p>Add <code>Room.leave</code> method</p>
</li>
<li>
<p>Add <code>PublicRooms</code></p>
</li>
<li>
<p>Add useful getters to <code>Member</code> like <code>isInvited</code> or <code>hasJoined</code></p>
</li>
<li>
<p>Remove <code>AliasesChangeEvent</code></p>
</li>
<li>
<p>Errors in the separate isolate are now added to the <code>updates</code> stream where possible, or thrown in the calling isolate</p>
</li>
<li>
<p>Fix profile API not working on servers where authorization is required</p>
</li>
<li>
<p>Add <code>MyUser.hasSynced</code></p>
</li>
<li>
<p>Fix <code>count</code> not being nullable in <code>MemberTimeline.load</code></p>
</li>
<li>
<p>More fixes and small changes!</p>
</li>
</ul>
<p>Get it on <a href="https://pub.dev/packages/matrix_sdk">pub</a>!</p>
</blockquote>
<h3 id="ruma">Ruma</h3>
<p>Ruma is a Rust project to create a comprehensive set of APIs for Matrix. Previously there was a Ruma homeserver project.</p>
<p><a href="https://matrix.to/#/@jplatte:matrix.org">jplatte</a> offered:</p>
<blockquote>
<p>This week,</p>
<ul>
<li>
<p>Devin, our GSoC student, <a href="https://www.ruma.io/news/gsoc-begins-2020/">started blogging</a> on ruma.io</p>
</li>
<li>
<p>We released <a href="https://github.com/ruma/ruma-identifiers/releases/tag/0.16.2">ruma-identifiers 0.16.2</a> and ruma-federation-api 0.0.2</p>
</li>
<li>
<p>We started updating ruma-events and ruma-client-api with the changes from version r0.6.1 of the client-server specification</p>
</li>
<li>
<p>We started moving all of our libraries into one <a href="https://github.com/ruma/ruma">monorepo</a>!</p>
<ul>
<li>
<p>As part of this, we introduced a kind of meta-library so you no longer have to keep the versions of the individual libraries in sync manually</p>
</li>
<li>
<p>We're hoping that this makes experiments across multiple libraries and the overall contribution process easier üôÇ</p>
</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="dept-of-interesting-projects">Dept of Interesting Projects üõ∞</h2>
<h3 id="safe-support-chat">Safe Support Chat</h3>
<p><a href="https://matrix.to/#/@brendan:abolivier.bzh">Brendan</a> said:</p>
<blockquote>
<p><a href="https://github.com/nomadic-labs/safesupport-chatbox">Safe Support Chat</a>, previously known as <a href="https://matrix.org/blog/category/this-week-in-matrix#ocrcc-embeddable-matrix-chatbox">OCRCC Chatbox</a>, now has a website with guides on how to set it up for organisations: <a href="https://www.safesupport.chat/">https://www.safesupport.chat/</a></p>
<p>For context, Safe Support Chat is an embeddable chatbox built on Matrix with cool features such as end-to-end encryption support to enable individuals to seek support with organisations that provide it. It was initially built for the <a href="http://www.ocrcc.ca/">OCRCC</a> (Ontario Coalition of Rape Crisis Centres) in order to allow survivors of sexual violence to communicate and seek help safely with OCRCC facilitators.</p>
<p>Kim Allen of Primal Glow Communications, one of the parties involved in Safe Support Chat's development, also recorded a podcast with Nomadic Labs about this project: <a href="https://podcast.nomadiclabs.ca/episodes/the-adventure-of-building-an-open-source-chatbox">https://podcast.nomadiclabs.ca/episodes/the-adventure-of-building-an-open-source-chatbox</a></p>
</blockquote>
<h2 id="dept-of-ops">Dept of Ops üõ†</h2>
<h3 id="matrix-docker-ansible-deploy">matrix-docker-ansible-deploy</h3>
<p>This <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy">Ansible playbook</a> is meant to easily let you run your own Matrix homeserver.</p>
<p><a href="https://matrix.to/#/@slavi:devture.com">Slavi</a> reported:</p>
<blockquote>
<p>Thanks to <a href="https://github.com/benkuly">benkuly</a>'s efforts, <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy">matrix-docker-ansible-deploy</a> now supports bridging to SMS (with one telephone number only) via <a href="https://github.com/benkuly/matrix-sms-bridge">matrix-sms-bridge</a>.</p>
<p>To learn more, see our <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/8d786713a6b8efb998a1313ca3fd1d9401e984cc/docs/configuring-playbook-matrix-bridge-sms.md">Setting up Matrix SMS bridging</a> docs page.</p>
</blockquote>
<h3 id="cli-federation-tester">CLI Federation Tester</h3>
<p><a href="https://matrix.to/#/@kai:matrix.chat-secure.de">Kai</a> reported:</p>
<blockquote>
<p>A new version of the terminal-based federation tester has been released. The current version 1.11 should now cover the entire server discovery process including scenarios with a .well-known configuration without a port, but with a DNS SRV entry. </p>
<p>The script relies on bash, curl, jq and openssl. It has been tested on linux but should also work on *bsd and macos.</p>
<p>The script can be downloaded here: </p>
<p><a href="https://matrix.to/#/#cli_federation-tester_de:matrix.chat-secure.de">#cli_federation-tester_de:matrix.chat-secure.de</a></p>
<p>(The message about the latest version will always be pinned)</p>
</blockquote>
<h3 id="flap">FLAP</h3>
<p><a href="https://matrix.to/#/@louis:chmn.me">Louis Chmn</a> announced:</p>
<blockquote>
<p>Hi, I've build FLAP to help other self-host multiple free software. FLAP can currently help you to easily setup Synapse, Riot, Nextcloud, SOGo and Jitsi all with SSO and low maintenance needs. Feel free to give it a try !</p>
<ul>
<li>
<p>Sources are here: <a href="https://gitlab.com/flap-box/flap">https://gitlab.com/flap-box/flap</a></p>
</li>
<li>
<p>If you need help setting things up, Matrix room is here: <a href="https://matrix.to/#/#flap-software:matrix.org">#flap-software:matrix.org</a></p>
</li>
</ul>
<p>For French companies, I am also offering managed paid hosting: <a href="https://www.flap.cloud">https://www.flap.cloud</a></p>
</blockquote>
<h2 id="dept-of-bots-robot-face">Dept of Bots ü§ñ</h2>
<h3 id="sparky-s-matrix-bot">sparky's Matrix Bot</h3>
<p><a href="https://matrix.to/#/@sparky:matrix.possumlodge.me">sparky</a> told us:</p>
<blockquote>
<p>Announcing Matrix Bot (name is a work in progress)</p>
<p>The first &quot;official&quot; release of matrix bot has been made and you can find the latest release source at <a href="https://github.com/sparky8251/matrix-bot/tree/v1.0.0">https://github.com/sparky8251/matrix-bot/tree/v1.0.0</a></p>
<p>It's flagship features are currently </p>
<ul>
<li>
<p>an imperial &lt;--&gt; metric unit converter for common conversational units</p>
</li>
<li>
<p>a configurable search and link for issues/pulls that responds to any message containing something in the format of <code>jf#123</code> or <code>jf #1234</code></p>
</li>
<li>
<p>a configurable general purpose URL linker that responds to messages containing things such as <code>docs@hwa</code> or <code>link @troubleshooting</code> (both sides of the @ are configurable)</p>
</li>
</ul>
<p>There are plans to enable group pings, get a help command that can be limited to function only in a specific room, and more in the works so be sure to check back soon!</p>
</blockquote>
<h3 id="matrix-reminder-bot">matrix-reminder-bot</h3>
<p><a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> reported:</p>
<blockquote>
<p><a href="https://github.com/anoadragon453/matrix-reminder-bot">matrix-reminder-bot</a> bot to remind you about things. Supports reminding an individual in a room or the whole room itself. Also supports setting alarms, which will continue to sound periodically until silenced.</p>
<p>Built with <a href="https://github.com/anoadragon453/nio-template">nio-template</a> and the excellent <a href="https://github.com/poljar/matrix-nio">matrix-nio</a> library.</p>
</blockquote>
<h2 id="dept-of-ping-table-tennis-paddle-and-ball">Dept of Ping üèì</h2>
<p>Here we reveal, rank, and applaud the homeservers with the lowest ping, as measured by <a href="https://github.com/maubot/echo">pingbot</a>, a <a href="https://github.com/maubot/maubot">maubot</a> that you can host on your own server. Join <a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">fairydust.space</td><td style="text-align: center">354</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">aragon.sh</td><td style="text-align: center">419</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">envs.net</td><td style="text-align: center">426</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">maunium.net</td><td style="text-align: center">456.5</td></tr>
<tr><td style="text-align: center">5</td><td style="text-align: center">maclemon.at</td><td style="text-align: center">559</td></tr>
<tr><td style="text-align: center">6</td><td style="text-align: center">matrix.vgorcum.com</td><td style="text-align: center">667.5</td></tr>
<tr><td style="text-align: center">7</td><td style="text-align: center">threatmodel.io</td><td style="text-align: center">695</td></tr>
<tr><td style="text-align: center">8</td><td style="text-align: center">gottliebtfreitag.de</td><td style="text-align: center">734</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">neko.dev</td><td style="text-align: center">818</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">nzbr.de</td><td style="text-align: center">892</td></tr>
</tbody></table>
<h2 id="final-thoughts-thought-balloon">Final Thoughts üí≠</h2>
<p>There are bounties to be had! <a href="https://www.wezm.net/v2/posts/2020/bounties/">AU$500 to support Emoji Reactions in Fractal</a>, for reference this is tracked <a href="https://gitlab.gnome.org/GNOME/fractal/-/issues/530">on the GNOME gitlab</a>.</p>
<p>We didn't hear from Spectral <em>too</em> recently, but there are <a href="https://gitlab.com/spectral-im/spectral/-/commits/qt5-15">signs of code being written</a>.</p>
<p>This week I've been chatting with conference organisers making really
interesting virtual event plans, and I'm bursting to share some of the Matrix
integration plans, hopefully more details coming soon.</p>
<p><a href="https://matrix.to/#/@elmussol:elsmussols.net">elmussol</a> said:</p>
<blockquote>
<p>For those who Hubzilla or Zap or ActivityPub or Friendica or Diaspora, there is now a Hubzilla forum for all things Matrix: <a href="https://elsmussols.net/channel/matrix">https://elsmussols.net/channel/matrix</a></p>
</blockquote>
<h2 id="that-s-all-i-know-checkered-flag">That's all I know üèÅ</h2>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2020&#x2F;06&#x2F;02&#x2F;introducing-p2p-matrix&#x2F;" title="Introducing P2P Matrix">Introducing P2P Matrix</a></h1>
            <span>
                02.06.2020 00:00
                ‚Äî
                <a href="/category/general">
                    General
                </a>
                ‚Äî
                <a href="/author/matthew-hodgson">
                    Matthew Hodgson
                </a>
            </span>
            
        </header>
        <div>
            <p>TL;DR: we shipped a major update (v0.1.1) to <a href="https://p2p.riot.im">https://p2p.riot.im</a> - fire up a desktop Chrome or Firefox in not-private-browsing mode and give it a go!</p>
<p>Hi folks,</p>
<p>As many know by now, a few of us have been working away since mid-December on experimenting with running Matrix in a peer-to-peer architecture - one where every user has absolute total autonomy and ownership of their conversations, because the only place their conversations exist is on the devices they own.</p>
<p>In some ways this is the logical end goal of Matrix: our aim has always been to empower users to have full control over their communication rather than being beholden to any given service provider, and in a P2P world we completely return power over secure communication to the people.</p>
<h3 id="why-p2p">Why P2P?</h3>
<p>P2P Matrix is about more than just letting users store their own conversations: it can also avoid dependencies on the Internet itself by working over local networks, mesh networks, or situations where the Internet has been cut off.  Even more interestingly, without homeservers, there is nowhere for metadata to accumulate about who is talking to who, and when - which is a legitimate complaint about today‚Äôs Matrix network, given the homeservers of all users in a given conversation necessarily have to store that conversation‚Äôs metadata.  P2P also lets us radically simplify signup for new users if they don‚Äôt have to pick a server to get going - and we avoid the unintentional centralisation of users piling onto public servers.</p>
<p>P2P also forces us to solve many of the hardest remaining problems in Matrix: e.g multi-homed accounts, given multi-device P2P requires your account to exist in multiple places. This in turn unlocks high availability and geo-redundancy for accounts on today‚Äôs Matrix network (imagine having a primary and backup homeserver that magically did the right thing!), as well as account portability, and thus also vhosting and load-balancing accounts between servers, and even improved GDPR compliance (for if your user IDs are ephemeral they are no longer personally identifying information baked into your Matrix rooms).  We‚Äôll also need better safety mechanisms to avoid folks exploiting the anonymous nature of the network for abuse, accelerating the work we‚Äôre already doing for today‚Äôs Matrix network.</p>
<p>The way we‚Äôve been approaching P2P is the ‚Äú<a href="https://twitter.com/Lucid00/status/1263974339294175232">hamfisted but genius</a>‚Äù approach of taking homeservers and running them on the client, alongside or within your Matrix client - meaning that there are literally <strong>no</strong> changes required for any Matrix client to talk P2P Matrix, and so P2P Matrix can instantly benefit from all the work which has gone into Riot and other apps.  As a result, P2P is also a huge motivator towards developing much smaller homeservers which can run efficiently clientside (e.g. Dendrite!) - which is of course great news for Matrix as a whole.  It also forces us to develop more scalable routing algorithms (as you don‚Äôt want your client to have to talk to every other device in a room every time it sends a message!) and also spurs development of low bandwidth Matrix transports (as you don‚Äôt want the additional chatter of talking to multiple peers to consume all your bandwidth).  Finally, it forces us to really ruggedize federation, given nodes are constantly appearing and disappearing, giving the federation much more of a stress test than we see with today‚Äôs relatively static homeservers.</p>
<h3 id="p2p-in-practice">P2P in Practice</h3>
<p>So, P2P has been acting as fuel for a lot of our longer term Matrix work over the last few months.  There have been three main experiments so far: at <a href="https://fosdem.org/2020/schedule/event/dip_p2p_matrix/">FOSDEM</a> we showed off running our next-gen Dendrite homeserver running clientside using HTTP over <a href="https://libp2p.io/">libp2p</a> as the transport.  We also highlighted Timoth√©e Floure‚Äôs <a href="https://www.epfl.ch/labs/dedis/wp-content/uploads/2020/01/presentation-2019-2-Timothee-Floure-Experimenting-with-Matrix-federation-over-Yggdrasil.pdf">project at EPFL</a> experimenting with Synapse talking P2P CoAP over yggdrasil as the transport via a proxy.</p>
<p>Most recently, however, we‚Äôve been experimenting with compiling Dendrite down to Web Assembly and running it embedded in Riot Web as a Service Worker, using HTTP over libp2p‚Äôs websocket transport (coordinated via a websocket rendezvous server).  Architecturally, it looks like this:</p>
<p><img src="/blog/img/p2p-diag.png" alt="P2P Architecture Diagram" /></p>
<p>Today, we‚Äôre shipping a major new alpha (v0.1.1) of this P2P demo up at <a href="https://p2p.riot.im">https://p2p.riot.im</a> (requires desktop Chrome or Firefox in non-private-browsing mode) - which hopefully should give a really usable and concrete taste of the shape of things to come.</p>
<p>The main features are:</p>
<ul>
<li>Your conversations are now persisted in your browser storage (via IndexedDB), meaning that as long as all the browsers participating in a given conversation don‚Äôt clear their local storage, rooms on the P2P network are here to stay!</li>
<li>Your room directory lists all the aliases for all the rooms published by active nodes on the network.  Moreover, we now automatically publish a local room alias whenever you join a public room, so that others will be able to discover that room via you, even if the server who originally created the alias has disappeared.</li>
<li>Lots and lots of federation improvements between the nodes - for instance, when a node comes online, others should now automatically detect and send scrollback to it.  Invites should work, and there should no longer be any unexpectedly redacted messages.</li>
</ul>
<p>Needless to say, all the code for this is open source under the Apache license, and if you‚Äôre feeling particularly adventurous you can embed your very own P2P Dendrite into Riot Web by using the Dockerfile at <a href="https://github.com/matrix-org/dendrite/blob/master/build/docker/DendriteJS.Dockerfile">https://github.com/matrix-org/dendrite/blob/master/build/docker/DendriteJS.Dockerfile</a> or following the instructions at  <a href="https://github.com/matrix-org/dendrite/blob/master/docs/p2p.md">https://github.com/matrix-org/dendrite/blob/master/docs/p2p.md</a>.</p>
<p>Please report bugs to <a href="https://github.com/matrix-org/dendrite/issues">https://github.com/matrix-org/dendrite/issues</a>!</p>
<p>Finally, please understand that the demo is very likely <strong>not</strong> what the final version of P2P Matrix will look like - this is just one step in a series of experiments as we investigate the best paths forward :)</p>
<h3 id="what-s-next">What‚Äôs next?</h3>
<p>For the current demo, there‚Äôs still lots of stuff remaining, including:</p>
<ul>
<li>More federation debugging (and hooking in <a href="https://github.com/matrix-org/tardis">tardis</a> and writing up everything we‚Äôve learned about implementing federation in Dendrite!)</li>
<li>Making the content repository work in-browser (gotta fill up those IndexedDBs with some GIFs!)</li>
<li>Hooking up E2E Encryption APIs in Dendrite (not that it buys us much in a pure P2P world)</li>
<li>WebRTC transports.  Turns out that service workers aren‚Äôt allowed to speak WebRTC, so we‚Äôll have to shim through to Riot to speak true peer-to-peer WebRTC data channels rather than relaying all the traffic through the websocket rendezvous server.</li>
<li>Decentralised accounts for multidevice support - reviewing <a href="https://github.com/matrix-org/matrix-doc/blob/rav/proposal/remove_mxids_from_events/proposals/1228-removing-mxids-from-events.md">MSC1228</a> and getting Dendrite supporting multihoming accounts!</li>
<li>Finishing all of Dendrite‚Äôs other remaining APIs.</li>
</ul>
<p>Beyond this, there are some bigger picture questions left to be answered in future experiments.</p>
<p>Firstly: we do not yet have a solution for ‚Äústore and forward‚Äù nodes which can relay messages on behalf of a room if all the participating devices are offline.  A first cut will be to run a P2P-capable homeserver server-side for this, but then metadata will start to accumulate server-side for the conversations it hosts.  A more interesting approach would be to use a store and forward system which obfuscates who is talking to who, such as a mixnet, and could even provide resistance to network traffic pattern analysis.  This is very much an open area of research, but one we are getting into :D</p>
<p>Secondly: we want to experiment more with other transports, and find out which works best for Matrix.  Libp2p has some really exciting new stuff in the form of <a href="https://blog.ipfs.io/2020-05-20-gossipsub-v1.1">Gossipsub v1.1</a> - a much smarter routing algorithm for pubsub traffic in libp2p, which David Dias gave us a <a href="https://youtu.be/APVp-20ATLk?t=3598">VIP tour</a> of at the first Open Tech Will Save Us meetup.  So we‚Äôll need to restructure our libp2p transport as pubsub to see how it works in practice.  Separately, we also want to play with hooking up <a href="https://yggdrasil-network.github.io/">Yggdrasil</a> (the encrypted overlay network) as a transport as a totally different approach - Yggdrasil will easily let us span different underlying network transports, but comes with different tradeoffs (e.g. no browser support yet).  We also want to take a look at the <a href="https://dat.foundation/">DAT</a> / <a href="https://github.com/hypercore-protocol/hypercore">hypercore</a> / <a href="https://github.com/hyperswarm/hyperswarm">hyperswarm</a> / <a href="https://cabal.chat/">Cabal</a> ecosystem to see if there‚Äôs a match :)</p>
<p>Thirdly and finally: we obviously want to unify the new P2P Matrix network with today‚Äôs federated one.  The ideal outcome here would be to have a hybrid model, where teams who want their users to have a dedicated homeserver (for availability, IT policies, etc) can continue to have one as they do today - but newbies who have just installed Riot would float around on P2P unless they decided to consciously put down roots on a server or two.  Best of all, it would let us turn off the matrix.org homeserver: the best public homeserver is one you run yourself on your own phone ;)  The approach we take for linking P2P and today‚Äôs Matrix will depend very much on the transport we select for P2P in the long run, but the likelihood is that today‚Äôs homeservers will sprout P2P gateways to link the networks.</p>
<h2 id="conclusion">Conclusion</h2>
<p>So, there you have it.  P2P Matrix exists, and is developing at an alarming speed - and pushing Dendrite development along with it.  Most excitingly, there have been no changes yet to the Matrix spec for P2P at all; we‚Äôve just swapped https for http-over-libp2p as the transport.  So <strong>all</strong> of the work we‚Äôve been doing making Dendrite work in a P2P world has directly translated into making Dendrite work on today‚Äôs Matrix too  You can now stand up a Dendrite and have it federate pretty reliably with the wider Matrix network, although we‚Äôre still rushing through implementing APIs (we‚Äôre up to 35% passing <a href="https://github.com/matrix-org/sytest">sytest</a> coverage - although that 35% does contain most of the important tests :)</p>
<p>Finally, in case you‚Äôre worried about why the Matrix core team is off chasing P2P dreams rather than improving Riot‚Äôs UX, or implementing Communities, or Extensible Profiles, or working through the MSC backlog etc... in practice only two people (ignoring Matthew) have been working on P2P - Neil Alexander (author of the original FOSDEM demo, Dendrite wrangler and Yggdrasil co-maintainer) and Kegan Dougal (of the original Matrix dev team, one of the original authors of Dendrite, and now wrangling the WASM P2P work too).  Huge thanks to Kegan &amp; Neil for pushing P2P forwards - and huge thanks to everyone else on the core team and the wider community for keeping today‚Äôs Matrix advancing too!</p>
<p>Hope this has given a tempting glimpse of the shape of things to come.  Honestly we never thought we‚Äôd get as far as P2P when we started Matrix back in 2014, but it‚Äôs really fun to be finally catching up with the future :D</p>
<p>-- Matthew</p>
<p>P.S. You can read more about this from Neil Alexander‚Äôs point of view <a href="https://neilalexander.dev/2020/06/02/thoughts-p2p-matrix.html">over at his blog</a> (including more thoughts on the potential Yggdrasil demo!)</p>
<p>P.P.S You can read the gory details of the P2P and WASM implementation from Kegan's point of view <a href="https://github.com/matrix-org/dendrite/wiki/How-p2p.riot.im-works">over at the Dendrite wiki</a>.</p>
<p>P.P.P.S Comments over at <a href="https://news.ycombinator.com/item?id=23393935">HN</a></p>

        </div>
    </article>
    
    <nav class="pagination">
    <div class="prev">
        
        <a href="&#x2F;blog&#x2F;page&#x2F;24&#x2F;">‚Äπ Previous</a>
        
    </div>
    <span class="page-number">25 / 64</span>
    <div class="prev">
        
        <a href="&#x2F;blog&#x2F;page&#x2F;26&#x2F;">Next ‚Ä∫</a>
        
    </div>
</nav>

</div>
    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;security-hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="&#x2F;code"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p>¬© 2022 The Matrix.org Foundation C.I.C.</p>
</footer>

</body>

</html>
