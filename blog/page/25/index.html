<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - Blog</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg" />
    <link rel="stylesheet" href="/style.css" />

    

<meta name="description" content="The Matrix.org Foundation blod is where the Matrix Foundation and Community
post updates on their activity. Every Friday evening they publish This Week In
Matrix, a digest of the past week activity.
">

</head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo-white.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            current">
            Blog
        </a>
        
        
        
        <a href="&#x2F;docs&#x2F;" class="
            ">
            Documentation
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <input id="ecosystem-submenu-checkbox" type="checkbox" class="submenu-checkbox" aria-hidden="true"
                >
            <label for="ecosystem-submenu-checkbox" class="submenu-title">Ecosystem <div class="arrow">
                </div></label>

            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;integrations&#x2F;">Integrations</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        <div class="content">
    
    <article class="post">
        <header>
            <h1><a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;2020&#x2F;10&#x2F;23&#x2F;this-week-in-matrix-2020-10-23&#x2F;" title="This Week in Matrix 2020-10-23">This Week in Matrix 2020-10-23</a></h1>
            <span>
                23.10.2020 00:00
                ‚Äî
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                ‚Äî
                
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
                
            </span>
            
        </header>
        <div>
            <h2 id="matrix-live">Matrix Live üéô</h2>
<iframe src="https://www.youtube.com/embed/CfV1dkMcMh0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2 id="dept-of-spec-scroll">Dept of Spec üìú</h2>
<p><a href="https://github.com/turt2live">TravisR</a> offered:</p>
<blockquote>
<p>Hello everyone, normally anoa would be doing this update but today you get me (TravisR) instead. Luckily anoa has left me a script to run, so here's hoping I haven't completely messed up this week's update üòÖ</p>
<p>Here's your weekly spec update! The heart of Matrix is the specification - and this is modified by Matrix Spec Change (MSC) proposals. Learn more about how the process works at <a href="https://matrix.org/docs/spec/proposals">https://matrix.org/docs/spec/proposals</a>.</p>
<h4 id="msc-status">MSC Status</h4>
<p><strong>Merged MSCs:</strong></p>
<ul>
<li><em>Nothing to report</em> üò¢</li>
</ul>
<p><strong>MSCs in Final Comment Period:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2758">MSC2758: Proposal for a common identifier grammar</a> (merge)</li>
</ul>
<p><strong>New MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2828">MSC2828: Proposal to restrict allowed user IDs over federation</a></li>
</ul>
<p><strong>Closed MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2773">MSC2773: Room kinds</a></li>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/1722">MSC1722: Support for displaying math(s) in messages</a></li>
</ul>
<h4 id="spec-core-team">Spec Core Team</h4>
<p>In terms of Spec Core Team MSC focus for this week, we're still focusing on the same MSCs from previous weeks to get widgets over the line. This includes <a href="https://github.com/matrix-org/matrix-doc/pull/2774">MSC2774</a> to have widgets aware of their widget ID, <a href="https://github.com/matrix-org/matrix-doc/pull/2765">MSC2765</a> so widgets can be pretty in clients like Element, and <a href="https://github.com/matrix-org/matrix-doc/pull/2790">MSC2790</a> to support a form of user input with widgets.</p>
<p>Normally there would be a graph here of our MSC progress, however my machine refuses to accept that line graphs are a real thing today. As a replacement, here's a <a href="https://climate.weather.gc.ca/climate_data/generate_chart_e.html?hlyRange=1997-12-02%7C2020-10-22&amp;dlyRange=1995-04-01%7C2020-10-22&amp;mlyRange=1995-04-01%7C2007-11-01&amp;StationID=27378&amp;Prov=AB&amp;urlExtension=_e.html&amp;searchType=stnProv&amp;optLimit=specDate&amp;StartYear=1840&amp;EndYear=2020&amp;selRowPerPage=25&amp;Line=46&amp;Month=10&amp;Day=22&amp;lstProvince=&amp;timeframe=2&amp;Year=2020&amp;type=bar&amp;MeasTypeID=snow">snowfall accumulation graph for Banff</a> as reported by Environment Canada.</p>
</blockquote>
<h2 id="dept-of-servers-europea">Dept of Servers üè¢</h2>
<h3 id="mauliasproxy">mauliasproxy</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> told us:</p>
<blockquote>
<p>I made a simple room alias proxy: <a href="https://mau.dev/tulir/mauliasproxy">https://mau.dev/tulir/mauliasproxy</a>. It can be used to create room aliases on custom domains without having to host an actual Matrix homeserver there. The proxy basically just responds to federation room alias queries using data from another homeserver (that data is fetched with the C-S API).</p>
</blockquote>
<h3 id="synapse">Synapse</h3>
<p><a href="https://matrix.to/#/@callahad:matrix.org">callahad</a> reported:
&gt;</p>
<blockquote>
<p>A new release candidate appears! <a href="https://github.com/matrix-org/synapse/releases/tag/v1.22.0rc1">Synapse 1.22.0rc1</a> was published yesterday and includes support for running background tasks in separate worker processes, as well as fixes to sharded event persisters which were first introduced in 1.21.0.</p>
<p>These changes significantly improved our client join <a href="https://en.wikipedia.org/wiki/Apdex">Apdex</a> score for matrix.org by making join performance both faster <em>and</em> less variable.</p>
</blockquote>
<p><img src="/blog/img/2020-10-23-q7nrn-twim-synapse-2020-10-23-sparkles.png" alt="2020-10-23-q7nrn-twim-synapse-2020-10-23-sparkles.png" /></p>
<blockquote>
<p>Synapse 1.22.0rc1 also includes support for a few experimental MSCs:</p>
<ul>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2732">MSC2732</a>: Supporting olm fallback keys</p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2697">MSC2697</a>: Supporting device dehydration</p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2409">MSC2409</a>: Allowing appservices to receive ephemeral events like read receipts, presence, and typing indicators.</p>
</li>
</ul>
<p>Lastly, the default room version is now <a href="https://matrix.org/docs/spec/rooms/v6">version 6</a>, per <a href="https://github.com/matrix-org/matrix-doc/pull/2788/">MSC2788</a>.</p>
<p>In the coming weeks we'll focusing on improving Synapse's resilience in smaller to medium-sized deployments, primarily through improvements to state resolution. Stay tuned!</p>
</blockquote>
<p>Thanks Dan!</p>
<blockquote>
<p>Today's update comes courtesy of Dan Callahan (@callahad:matrix.org), who joined Element on Monday as an engineering manager supporting the Synapse team. Dan previously worked in Developer Relations at Mozilla, and he's excited to help Matrix realize its ambitious vision for private, secure, and standards-based communication for all.</p>
</blockquote>
<h3 id="dendrite-gomatrixserverlib">Dendrite / gomatrixserverlib</h3>
<p>Dendrite is a next-generation homeserver written in Go</p>
<p><a href="https://matrix.to/#/@neilalexander:matrix.org">Neil Alexander</a> offered:</p>
<blockquote>
<p>This week we released <a href="https://github.com/matrix-org/dendrite/releases/tag/v0.2.0">v0.2.0</a> on Tuesday, a <a href="https://matrix.org/blog/2020/10/20/dendrite-0-2-0-released">reasonably big update</a> containing various improvements over the initial beta release, and then followed it up with a bug-fix <a href="https://github.com/matrix-org/dendrite/releases/tag/v0.2.1">v0.2.1</a> release on Thursday. </p>
<p>Thanks to everyone who has been running Dendrite and reporting their findings, and also to contributors who have been submitting pull requests!</p>
<p>Changes this week include:</p>
<ul>
<li>
<p>Dendrite no longer builds separate binaries for each polylith component, but instead has one multi-personality binary</p>
</li>
<li>
<p>Our Docker images have been simplified into two images: <a href="https://hub.docker.com/repository/docker/matrixdotorg/dendrite-monolith">dendrite-monolith</a> and <a href="https://hub.docker.com/repository/docker/matrixdotorg/dendrite-polylith">dendrite-polylith</a></p>
</li>
<li>
<p>Internal HTTP API calls are now made using H2C (HTTP/2) in polylith mode, which resolves some head-of-line issues with the connection pool</p>
</li>
<li>
<p>Forward extremities have been refactored, which should fix some cases where room state can end up corrupted</p>
</li>
<li>
<p>A couple of bugs when handling state rewrites have been fixed</p>
</li>
<li>
<p>The sync API no longer sends old state events to clients as if they were new</p>
</li>
<li>
<p>SQLite locking bugs around the latest events updater have been resolved</p>
</li>
<li>
<p>Notification levels are now parsed correctly in power level events (thanks to <a href="https://github.com/Pestdoktor">Pestdoktor</a>)</p>
</li>
<li>
<p>Invalid UTF-8 is now correctly rejected when making federation requests (thanks to <a href="https://github.com/Pestdoktor">Pestdoktor</a>)</p>
</li>
</ul>
<p>Spec compliance for v0.2.1:</p>
<ul>
<li>
<p>Client-server APIs: 57%, up from 56% last week</p>
</li>
<li>
<p>Server-server APIs: 81%, up from 80% last week</p>
</li>
</ul>
<p>As always, please feel free to join us in <a href="https://matrix.to/#/#dendrite:matrix.org">#dendrite:matrix.org</a> for general Dendrite chat, and <a href="https://matrix.to/#/#dendrite-dev:matrix.org">#dendrite-dev:matrix.org</a> if you are interested in contributing!</p>
</blockquote>
<h3 id="conduit">Conduit</h3>
<p><a href="https://matrix.to/#/@timo:conduit.rs">Timo</a> stepped in to tell us:</p>
<blockquote>
<p>This was another productive week:</p>
<ul>
<li>Improved thumbnailing algorithm (higher quality, less stored data, correct)</li>
<li>Allow unjoined users to read state of world readable rooms (this makes shields.io work with conduit)</li>
<li>Docs for cross compiling conduit</li>
<li>Fixed stuck / double-join over federation</li>
<li>Fixed random timeline reload bug</li>
<li>Welcome message in admin room</li>
<li>More frequent flushing</li>
</ul>
<p>Some WIP things:</p>
<ul>
<li>Provide Conduit binaries for most platforms to make setting up or updating a Conduit instance even easier</li>
<li>More reliable sending over federation</li>
<li>Bring all features of our Ruma fork upstream</li>
</ul>
<p>Thanks to everyone who supports me on <a href="https://liberapay.com/timokoesters">Liberapay</a> or Bitcoin!</p>
</blockquote>
<h2 id="homeserver-deployment-inbox-tray">Homeserver Deployment üì•Ô∏è</h2>
<h3 id="dendrite-docker-images">Dendrite docker images</h3>
<p>Dendrite is a next-generation homeserver written in Go</p>
<p><a href="https://matrix.to/#/@tr_slimey:an-atom-in.space">TR_SLimey</a> offered:</p>
<blockquote>
<p>I built some unofficial Dendrite docker images for Linux/ARM64, for those trying to run Dendrite on a Raspberry Pi, RockPro64 or others. They can be found here: <a href="https://hub.docker.com/r/trslimey/dendrite-monolith">https://hub.docker.com/r/trslimey/dendrite-monolith</a> &amp; <a href="https://hub.docker.com/r/trslimey/dendrite-polylith">https://hub.docker.com/r/trslimey/dendrite-polylith</a>.</p>
</blockquote>
<p><a href="https://matrix.to/#/@balaa:a.noteworthy.im">balaa</a> reported:</p>
<blockquote>
<p>Cool, we run Synapse on Pi0, Pi2 and Pi4 -- works reasonably well on each of them, i'm excited to try Dendrite</p>
</blockquote>
<p>Synapse running on a Pi zero..?</p>
<h2 id="dept-of-bridges-bridge-at-night">Dept of Bridges üåâ</h2>
<h3 id="gitter">Gitter</h3>
<p><a href="https://matrix.to/#/@madlittlemods:matrix.org">Eric Eastwood</a> announced:</p>
<blockquote>
<p>The <a href="https://gitlab.com/gitlab-org/gitter/webapp/-/merge_requests/2027">initial iteration of <code>virtualUsers</code></a> is in shape to merge(check out the flair üî•) and will probably deploy in a release next week. We've split the rest of the <code>virtualUser</code> work into <a href="https://gitlab.com/groups/gitlab-org/gitter/-/epics/10">follow-up issues</a> we can iterate on. We're working on adding <a href="https://gitlab.com/gitlab-org/gitter/webapp/-/issues/2615">room ban</a> and <a href="https://gitlab.com/gitlab-org/gitter/webapp/-/issues/2616">spam detection</a> support for <code>virtualUsers</code> to stop any bad actors. Then want to start on the actual Application Service bridge (Gitter &lt;-&gt; Matrix).</p>
</blockquote>
<p><img src="/blog/img/2020-10-23-REdrD-5b2mZhH.png" alt="2020-10-23-REdrD-5b2mZhH.png" /></p>
<blockquote>
<p>If you're curious about more of the details, you can track the greater <a href="https://gitlab.com/groups/gitlab-org/gitter/-/epics/10">GitLab epic</a>.</p>
</blockquote>
<h3 id="rainbow-bridge-at-night-bifrost-0-2-0-is-nearly-out">üåàüåâ Bifrost* 0.2.0 is (nearly) out</h3>
<p><a href="https://matrix.to/#/@Half-Shot:half-shot.uk">Half-Shot</a> offered:</p>
<blockquote>
<p>I couldn't really wait to talk about before we actually hit 0.2.0 so here is a sneak peek at what's happening. We've spent a ton of time working on ironing out the bugs and making the bridge more XMPP complaint. The major headlines are:</p>
<ul>
<li>
<p>Support Matrix -&gt; XMPP edits</p>
</li>
<li>
<p>Set XMPP user displayname in the room based on their nickname (thanks uhoreg for mucking in there)</p>
</li>
<li>
<p>Improve performance of Matrix -&gt; XMPP gateway messages and joining</p>
</li>
<li>
<p>Improve support for multiple devices for XMPP users connected to the gateway</p>
</li>
<li>
<p>maaaany bugfixes</p>
</li>
</ul>
<p>You can read about (and run!) the latest release over at <a href="https://github.com/matrix-org/matrix-bifrost/releases/tag/0.2.0-rc1">https://github.com/matrix-org/matrix-bifrost/releases/tag/0.2.0-rc1</a>.</p>
<p>Incidentally, if you've not yet, then try joining some rooms such as <code>#twim#matrix.org@matrix.org</code> from XMPP and see it live!</p>
<p>*rainbum, as Mathijs prefers</p>
</blockquote>
<h2 id="dept-of-clients-iphone">Dept of Clients üì±</h2>
<h3 id="hydrogen">Hydrogen</h3>
<p><a href="https://matrix.to/#/@bwindels:matrix.org">Bruno</a> said:</p>
<blockquote>
<p>Hydrogen gained a settings panel this week with a better session backup UX and your end-to-end device information, which should make the manual verification easier. Messages with multiple lines are also rendered as such now, which makes a big difference in usability. The app also works offline again after session backup broke that. Apart from that, several smaller fixes also landed.</p>
</blockquote>
<p><img src="/blog/img/2020-10-23-wMcAA-image.png" alt="2020-10-23-wMcAA-image.png" /></p>
<blockquote>
<p>Also, image decryption is well on it's way with a prototype working. üéâ</p>
</blockquote>
<h3 id="fractal">Fractal</h3>
<p><a href="https://matrix.to/#/@afranke:matrix.org">Alexandre Franke</a> reported:</p>
<blockquote>
<p>The <a href="https://matrix.org/blog/2020/10/09/this-week-in-matrix-2020-10-09#fractal">massive MR to switch to matrix-rust-sdk</a> is still being reviewed and help is still welcome. We have been working on other stuff as well. Actually, since <a href="https://matrix.org/blog/2020/08/07/this-week-in-matrix-2020-08-07#fractal">our last news piece for the release of 4.4</a>, quite a lot happened (around 60 commits) that we haven‚Äôt reported here yet:</p>
<ul>
<li>
<p>Users can now go to the room settings to <a href="https://gitlab.gnome.org/GNOME/fractal/-/commit/eebfc9fdd502cc7e2b54a11253f1ae0f1b455c84">toggle notifications for each room individually</a>.</p>
</li>
<li>
<p>Rounded corners around everything to match the latest upstream design tweaks (in Adwaita, the official GNOME theme).</p>
</li>
<li>
<p>Many maintenance changes: several dependencies have been updated, cleanups in various places, tightened flatpak permissions for better sandboxing‚Ä¶</p>
</li>
</ul>
<p>And that‚Äôs not all! <a href="https://gitlab.gnome.org/GNOME/fractal/-/merge_requests/642">Good progress has been made</a> towards rendering <code>formatted_body</code>. Hopefully that should be merged soon.</p>
</blockquote>
<p><img src="/blog/img/2020-10-23-yBL4B-image.png" alt="2020-10-23-yBL4B-image.png" /></p>
<h3 id="element-web">Element Web</h3>
<p><a href="https://matrix.to/#/@jryans:matrix.org">Ryan</a> offered:</p>
<blockquote>
<p>We released Element 1.7.10 on Tuesday with some high priority fixes:</p>
<ul>
<li>
<p>Several bugs fixed for both all widgets as well as a few specific to Jitsi call widgets</p>
</li>
<li>
<p>Widgets are now working again in Safari 13.1 (regressed by 1.7.9)</p>
</li>
</ul>
<p>Quite soon after that on Wednesday, Element Web 1.7.11-rc.1 made it's way to staging:</p>
<ul>
<li>
<p>Improved state management for voice / video calls</p>
</li>
<li>
<p>Revamped pinned widget UI to support resizing and more flexibility</p>
</li>
</ul>
</blockquote>
<h3 id="fluffychat">Fluffychat</h3>
<p><a href="https://matrix.to/#/@sorunome:sorunome.de">sorunome</a> told us:</p>
<blockquote>
<p>Fluffychat 0.20.0 is out! It should be available in fdroid, google play and on iOS soon!</p>
<h4 id="features">Features</h4>
<ul>
<li>
<p>Added translations: Arabic</p>
</li>
<li>
<p>Add ability to enable / disable emotes globally</p>
</li>
<li>
<p>Add ability to manage emote packs with different state keys</p>
</li>
<li>
<p>Add swipe to reply - Thanks @inexcode</p>
</li>
<li>
<p>Initial support for compiling to desktop</p>
</li>
<li>
<p>Initial snap metadata - Thanks @RAOF_47</p>
</li>
<li>
<p>Add latex parsing as per <a href="https://github.com/matrix-org/matrix-doc/pull/2191">MSC2191</a> - <code>$tex$</code> for inline and <code>$$</code> for blocks</p>
</li>
</ul>
<h4 id="changes">Changes</h4>
<ul>
<li>
<p>Re-scale images in a separate isolate to prevent the UI from freezing</p>
</li>
<li>
<p>URLs without https:// now linkify</p>
</li>
<li>
<p>Parse all URIs, not just URLs</p>
</li>
<li>
<p>emails will linkify now</p>
</li>
<li>
<p>Make sure login to dendrite is working properly</p>
</li>
</ul>
<h4 id="fixes">Fixes</h4>
<ul>
<li>
<p>Fix amoled / theme settings not always saving properly</p>
</li>
<li>
<p>Show device name in account information correctly</p>
</li>
<li>
<p>Fix tapping on aliases / room pills not always working</p>
</li>
<li>
<p>Link clicking in web not always working</p>
</li>
<li>
<p>Return message input field to previous state after editing message - Thanks @inexcode</p>
</li>
</ul>
</blockquote>
<p><img src="/blog/img/2020-10-23-ufb7O-img_20201023_180547.jpg" alt="2020-10-23-ufb7O-img_20201023_180547.jpg" /></p>
<p><a href="https://matrix.to/#/@mtrnord:nordgedanken.dev">MTRNord</a> added:</p>
<blockquote>
<p>perfect for university start. Finally I can write the thesis in the University matrix ;P</p>
</blockquote>
<h3 id="element-android">Element Android</h3>
<p><a href="https://matrix.to/#/@benoit.marty:matrix.org">benoit</a> offered:</p>
<blockquote>
<p>Element Android v1.0.9 is now available on the PlayStore. For the next release (1.0.10), we will optimize the performance (again!). We already have made some progress when sending a message to a room. We are now working on the crypto module and also we will probably upgrade the Realm database library, which seems more stable now. Besides that, we are still implementing the remaining features with the objective of getting a good feature parity with the other Element Matrix clients.</p>
</blockquote>
<h3 id="element-ios">Element-iOS</h3>
<p><a href="https://matrix.to/#/@Manu:matrix.org">Manu</a> reported:</p>
<blockquote>
<p>This week, we have been working to upgrade libs and tools to be compatible with Xcode 12.</p>
<p>We are making good progress to revive a kind of background sync so that a message appears quicker in the timeline when you tap on its notification. Authentication for widgets is still in progress.</p>
</blockquote>
<h3 id="nheko">Nheko</h3>
<p><a href="https://github.com/Nheko-Reborn/nheko">Nheko</a> is a desktop client using Qt, Boost.Asio and C++17. It supports E2EE (with the notable exception being device verification for now) and intends to be full featured and nice to look at</p>
<p><a href="https://matrix.to/#/@deepbluev7:neko.dev">Nico (@deepbluev7:neko.dev)</a> said:</p>
<blockquote>
<ul>
<li>
<p>Nheko now shows the filename of an image on hover. (Contributed by kamath_manu)</p>
</li>
<li>
<p>Nheko now shows the fontname in the font selection rendered using that font. This makes it easier to know, how the font will look, once you select it. (Contributed by lorendb)</p>
</li>
<li>
<p>Fixed a crash when closing Nheko. While this didn't really cause issues, since you were closing it anyway, it's just bad form to crash instead of exit properly.</p>
</li>
<li>
<p>Removed the membercache. Nheko used to load all members on startup and store them in memory. This made startup slower. Removing it sped up the start by a nice chunk and freed about 30MB of RAM on my system. One step closer to using reasonable amounts of RAM!</p>
</li>
<li>
<p>Fixed excessive clipping when rendering the timeline. This prevented all batching of text messages. Now it only clips the replied to message, which makes scrolling much smoother again!</p>
</li>
</ul>
<p>Finally, some controversial change, which is currently in master but may be reverted at some point: Nheko now automatically forwards keys to verified devices, when they request the keys, without prompting you. While that can be toggled off in the settings, it currently defaults to on. This weakens backward secrecy of e2ee a bit, but it makes it possible to recover from e2ee issues much more easily. Currently I'd argue, that it is an acceptable tradeoff. It is very hard to verify room membership of users at any point in time but the current one and room membership is not verified end to end in any way, so you need to trust the server to provide you with the correct memberlist or you just send keys to verified users. While Nheko still sends keys to all members of a room, when creating the session, it only forwards your own keys to trusted users without prompting you. Currently I think this is an acceptable tradeoff, as opening a popup with &quot;user x wants to have session y shared in room z&quot; is unlikely to be understood by anyone properly either. I'd be glad to hear your opinions though!</p>
<p>That's it for this week, but next week will be interesting too. Lorendb has been hacking on profile support, allowing you to run multiple login sessions of Nheko in separate windows and some other UI features.</p>
</blockquote>
<h2 id="dept-of-sdks-and-frameworks">Dept of SDKs and Frameworks üß∞</h2>
<h3 id="ruma">Ruma</h3>
<p><a href="https://matrix.to/#/@iinuwa:matrix.org">iinuwa</a> reported:</p>
<blockquote>
<p>In the past couple of weeks we implemented the last endpoint for the Federation</p>
<p>API. We are working on smoothing out some rough edges in the <code>ruma-federation-api</code>
crate, like a few that @Timo addressed this past week, so it will be a little while</p>
<p>before it's completely finished.</p>
<p>We've also created a milestone to track implementation of Identity Service API,</p>
<p>the last Matrix API we have to complete.</p>
<p>Finally, we've created a new Matrix room focused on Ruma development,</p>
<p><a href="https://matrix.to/#/#ruma-dev:matrix.org">#ruma-dev:matrix.org</a>, focusing the original room <a href="https://matrix.to/#/#ruma:matrix.org">#ruma:matrix.org</a> on Ruma
usage.</p>
</blockquote>
<h3 id="quotient">quotient</h3>
<p><a href="https://matrix.to/#/@kitsune:matrix.org">kitsune</a> told us:</p>
<blockquote>
<p><a href="https://github.com/quotient-im/libQuotient/releases/tag/0.6.2">Quotient 0.6.2</a> has been released, with a couple of minor bugfixes. This release is used as a foundation of <a href="https://github.com/quotient-im/Quaternion/releases/tag/0.0.9.5-beta1">Quaternion 0.0.9.5 beta</a> that's also getting out today - with support of (proper Matrix subset of) HTML, rich text user links (like pills, only lighter), initial Markdown support (if you build with fresh enough Qt), reactions (thanks to Karel Kosek @krkk), navigation to earlier events (thanks to Roland Pallai @rpallai) and quite a few other improvements. To make this release Quaternion had to gain its own basic HTML parser and Matrix-to-Qt-to-Matrix converter, which is likely to end up being a separate micro-library, in the hope that it will be useful for other Matrix projects building on Qt (even non-Quotient ones). A separate call to translators - quite a few strings got updated, so please head to <a href="https://app.lokalise.com/project/730769035bbc328c31e863.62506391/">Quaternion project at Lokalise</a> and push the numbers at least to 80%!</p>
</blockquote>
<h2 id="dept-of-events-and-talks">Dept of Events and Talks üó£Ô∏è</h2>
<p>Three talks this week!</p>
<h3 id="matrix-talk-at-open-source-summit-eu-virtual">Matrix talk at <a href="https://events.linuxfoundation.org/open-source-summit-europe/">Open Source Summit EU</a> (virtual)</h3>
<p><a href="https://matrix.to/#/@oleg:fiksel.info">Oleg</a> announced:</p>
<blockquote>
<p>If you are visiting the OSS EU next week - come to the <a href="https://sched.co/eCGN">Matrix talk</a>. üòâ</p>
<p>Or join us at <a href="https://matrix.to/#/#welcome:osseu2020.fiksel.info">#welcome:osseu2020.fiksel.info</a> !</p>
</blockquote>
<h3 id="dette-er-pa-utenlandsk">dette er p√• utenlandsk</h3>
<p><a href="https://matrix.to/#/@dandellion:dodsorf.as">dandellion</a> reported:</p>
<blockquote>
<p>In august I held an introduction to and demo of matrix talk during a conference hosted by my local makerspace.</p>
<p>This week the talk was uploaded! (Norwegian) <a href="https://www.youtube.com/watch?v=s9Xd0Wg_XqA">https://www.youtube.com/watch?v=s9Xd0Wg_XqA</a></p>
</blockquote>
<h3 id="astricon-plan-9-on-building-omnichannel-contact-centers-with-matrix-and-other-tech">AstriCon Plan (9) on building Omnichannel contact centers with Matrix (and other tech)</h3>
<p><a href="https://matrix.to/#/@matthew:matrix.org">Matthew</a> said:</p>
<blockquote>
<p>Jose Franco gave a great talk at AstriCon Plan (9) on building Omnichannel contact centers with Matrix, Asterisk, Kamailio and friends. You can see the video at <a href="https://youtu.be/7S6GZz8f91o?t=18558">https://youtu.be/7S6GZz8f91o?t=18558</a> and the talk details at <a href="https://astricon2020.sched.com/event/e0GA/blending-open-source-rtc-tools-to-build-an-omnichannel-contact-center">https://astricon2020.sched.com/event/e0GA/blending-open-source-rtc-tools-to-build-an-omnichannel-contact-center</a></p>
</blockquote>
<h2 id="dept-of-interesting-projects">Dept of Interesting Projects üõ∞Ô∏è</h2>
<h3 id="noteworthy-matrix-powered-distributed-overlay-networks-via-wireguard">Noteworthy (matrix powered distributed overlay networks via WireGuard)</h3>
<p><a href="https://matrix.to/#/@balaa:a.noteworthy.im">balaa</a> told us:</p>
<blockquote>
<p>hey TWIM peeps! we‚Äôve updated the README for our project Noteworthy (matrix powered distributed overlay networks via WireGuard) <a href="https://github.com/decentralabs/noteworthy">https://github.com/decentralabs/noteworthy</a> - join us over in <a href="https://matrix.to/#/#noteworthy:tincan.community">#noteworthy:tincan.community</a> with questions / comments!</p>
</blockquote>
<h2 id="dept-of-ping-table-tennis-paddle-and-ball">Dept of Ping üèì</h2>
<p>Here we reveal, rank, and applaud the homeservers with the lowest ping, as measured by <a href="https://github.com/maubot/echo">pingbot</a>, a <a href="https://github.com/maubot/maubot">maubot</a> that you can host on your own server. Join <a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">maescool.be</td><td style="text-align: center">528</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">chatcloud.net</td><td style="text-align: center">533.5</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">matrix.thedisco.zone</td><td style="text-align: center">654.5</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">pc.koesters.xyz:59003</td><td style="text-align: center">779</td></tr>
<tr><td style="text-align: center">5</td><td style="text-align: center">shortestpath.dev</td><td style="text-align: center">817.5</td></tr>
<tr><td style="text-align: center">6</td><td style="text-align: center">helderferreira.io</td><td style="text-align: center">851.5</td></tr>
<tr><td style="text-align: center">7</td><td style="text-align: center">aragon.sh</td><td style="text-align: center">898</td></tr>
<tr><td style="text-align: center">8</td><td style="text-align: center">pleasecuminside.me</td><td style="text-align: center">1176</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">dodsorf.as</td><td style="text-align: center">1253</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">envs.net</td><td style="text-align: center">1304.5</td></tr>
</tbody></table>
<h2 id="that-s-all-i-know-checkered-flag">That's all I know üèÅ</h2>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;2020&#x2F;10&#x2F;20&#x2F;dendrite-0-2-0-released&#x2F;" title="Dendrite 0.2.0 released">Dendrite 0.2.0 released</a></h1>
            <span>
                20.10.2020 19:35
                ‚Äî
                <a href="/category/releases">
                    Releases
                </a>
                ‚Äî
                
                <a href="/author/matthew-hodgson">
                    Matthew Hodgson
                </a>
                
            </span>
            
        </header>
        <div>
            <p>Hi all,</p>
<p>It's been over a week since our next-generation homeserver <a href="https://matrix.org/blog/2020/10/08/dendrite-is-entering-beta">Dendrite entered
beta</a>, and it's
been a wild rollercoaster ride as the team has been frantically zapping all
the initial teething issues that came up - mostly around room federation
getting 'stuck' due to needing to fix bugs in how room state is managed.  Huge
huge thanks to everyone who has spun up a Dendrite to experiment and report
bugs!</p>
<p>We're now in an impressively better place, and it's feeling way more stable now
(but please don't trust it with your data yet).  So we've skipped 0.1.x and jumped
straight to 0.2.0.</p>
<p>Now would be a great time for more intrepid explorers to try spinning up a
server from https://github.com/matrix-org/dendrite and see how it feels - the
more feedback the better.  And if you got scared off by weird bugs in 0.1.0,
now's the right time to try it again!</p>
<p>Full changelog follows:</p>
<h2 id="dendrite-0-2-0-2020-10-20">Dendrite 0.2.0 (2020-10-20)</h2>
<h3 id="important">Important</h3>
<ul>
<li>This release makes breaking changes for polylith deployments, since they now use the multi-personality binary rather than separate binary files
<ul>
<li>Users of polylith deployments should revise their setups to use the new binary - see the Features section below</li>
</ul>
</li>
<li>This release also makes breaking changes for Docker deployments, as are now publishing images to Docker Hub in separate repositories for monolith and polylith
<ul>
<li>New repositories are as follows: <a href="https://hub.docker.com/repository/docker/matrixdotorg/dendrite-monolith">matrixdotorg/dendrite-monolith</a> and <a href="https://hub.docker.com/repository/docker/matrixdotorg/dendrite-polylith">matrixdotorg/dendrite-polylith</a></li>
<li>The new <code>latest</code> tag will be updated with the latest release, and new versioned tags, e.g. <code>v0.2.0</code>, will preserve specific release versions</li>
<li><a href="https://github.com/matrix-org/dendrite/tree/master/build/docker">Sample Compose configs</a> have been updated - if you are running a Docker deployment, please review the changes</li>
<li>Images for the client API proxy and federation API proxy are no longer provided as they are unsupported - please use <a href="docs/nginx/">nginx</a> (or another reverse proxy) instead</li>
</ul>
</li>
</ul>
<h3 id="features">Features</h3>
<ul>
<li>Dendrite polylith deployments now use a special multi-personality binary, rather than separate binaries
<ul>
<li>This is cleaner, builds faster and simplifies deployment</li>
<li>The first command line argument states the component to run, e.g. <code>./dendrite-polylith-multi roomserver</code></li>
</ul>
</li>
<li>Database migrations are now run at startup</li>
<li>Invalid UTF-8 in requests is now rejected (contributed by <a href="https://github.com/Pestdoktor">Pestdoktor</a>)</li>
<li>Fully read markers are now implemented in the client API (contributed by <a href="https://github.com/Lesterpig">Lesterpig</a>)</li>
<li>Missing auth events are now retrieved from other servers in the room, rather than just the event origin</li>
<li><code>m.room.create</code> events are now validated properly when processing a <code>/send_join</code> response</li>
<li>The roomserver now implements <code>KindOld</code> for handling historic events without them becoming forward extremity candidates, i.e. for backfilled or missing events</li>
</ul>
<h3 id="fixes">Fixes</h3>
<ul>
<li>State resolution v2 performance has been improved dramatically when dealing with large state sets</li>
<li>The roomserver no longer processes outlier events if they are already known</li>
<li>A SQLite locking issue in the previous events updater has been fixed</li>
<li>The client API <code>/state</code> endpoint now correctly returns state after the leave event, if the user has left the room</li>
<li>The client API <code>/createRoom</code> endpoint now sends cumulative state to the roomserver for the initial room events</li>
<li>The federation API <code>/send</code> endpoint now correctly requests the entire room state from the roomserver when needed</li>
<li>Some internal HTTP API paths have been fixed in the user API (contributed by <a href="https://github.com/S7evinK">S7evinK</a>)</li>
<li>A race condition in the rate limiting code resulting in concurrent map writes has been fixed</li>
<li>Each component now correctly starts a consumer/producer connection in monolith mode (when using Kafka)</li>
<li>State resolution is no longer run for single trusted state snapshots that have been verified before</li>
<li>A crash when rolling back the transaction in the latest events updater has been fixed</li>
<li>Typing events are now ignored when the sender domain does not match the origin server</li>
<li>Duplicate redaction entries no longer result in database errors</li>
<li>Recursion has been removed from the code path for retrieving missing events</li>
<li><code>QueryMissingAuthPrevEvents</code> now returns events that have no associated state as if they are missing</li>
<li>Signing key fetchers no longer ignore keys for the local domain, if retrieving a key that is not known in the local config</li>
<li>Federation timeouts have been adjusted so we don't give up on remote requests so quickly</li>
<li><code>create-account</code> no longer relies on the device database (contributed by <a href="https://github.com/ThatNerdyPikachu">ThatNerdyPikachu</a>)</li>
</ul>
<h3 id="known-issues">Known issues</h3>
<ul>
<li>Old events can incorrectly appear in <code>/sync</code> as if they are new when retrieving missing events from federated servers, causing them to appear at the bottom of the timeline in clients</li>
<li>Memory can explode when catching up after a federation outage.</li>
</ul>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;2020&#x2F;10&#x2F;19&#x2F;combating-abuse-in-matrix-without-backdoors&#x2F;" title="Combating abuse in Matrix - without backdoors.">Combating abuse in Matrix - without backdoors.</a></h1>
            <span>
                19.10.2020 00:00
                ‚Äî
                <a href="/category/general">
                    General
                </a>
                ‚Äî
                
                <a href="/author/matthew-hodgson">
                    Matthew Hodgson
                </a>
                
            </span>
            
        </header>
        <div>
            <h3 id="update-nov-9th-2020">UPDATE: Nov 9th 2020</h3>
<p>Not only are UK/US/AU/NZ/CA/IN/JP considering mandating
backdoors, but it turns out that the Council of the European Union is working on it too, having created an advanced
<a href="https://files.orf.at/vietnam2/files/fm4/202045/783284_fh_st12143-re01en20_783284.pdf">Draft Council Resolution on Encryption</a>
as of Nov 6th, which could be approved by the Council as early as Nov 25th if it passes approval.  This doesn't directly
translate into EU legislation, but would set the direction for subsequent EU policy.</p>
<p>Even though the Draft Council Resolution does not explicitly call for backdoors, the language used...</p>
<blockquote>
<p>Competent authorities must be able to access data in a lawful and targeted manner</p>
</blockquote>
<p>...makes it quite clear that they are seeking the ability to break encryption on demand: i.e. a backdoor.</p>
<p>Please help us spread the word that backdoors are fundamentally flawed - read on for the rationale, and an alternative
approach to combatting online abuse.</p>
<hr />
<p>Hi all,</p>
<p>Last Sunday (Oct 11th 2020), the UK Government published an <a href="https://www.gov.uk/government/publications/international-statement-end-to-end-encryption-and-public-safety">international statement on end-to-end encryption and public safety</a>, co-signed by representatives from the US, Australia, New Zealand, Canada, India and Japan.  The statement is well written and well worth a read in full, but the central point is this:</p>
<blockquote>
<p>We call on technology companies to [...] enable law enforcement access to content in a readable and usable format where an authorisation is lawfully issued, is necessary and proportionate, and is subject to strong safeguards and oversight.</p>
</blockquote>
<p>In other words, this is an explicit request from seven of the biggest governments in the world to mandate a backdoor in end-to-end encrypted (E2EE) communication services: a backdoor to which the authorities have a secret key, letting them view communication on demand.  This is big news, and is of direct relevance to Matrix as an end-to-end encrypted communication protocol whose core team is currently centred in the UK.</p>
<p>Now, we sympathise with the authorities‚Äô predicament here: we utterly abhor child abuse, terrorism, fascism and similar - and we did not build Matrix to enable it.  However, trying to mitigate abuse with backdoors is, unfortunately, <strong>fundamentally flawed</strong>.</p>
<ul>
<li>
<p>Backdoors necessarily introduce a fatal weak point into encryption for <em>everyone</em>, which then becomes the ultimate high value target for attackers.  Anyone who can determine the secret needed to break the encryption will gain full access, and you can be absolutely sure <strong><a href="https://techcrunch.com/2016/07/27/security-experts-have-cloned-all-seven-tsa-master-keys/">the backdoor key will leak</a></strong> - whether that‚Äôs via intrusion, social engineering, brute-force attacks, or accident.  And even if you unilaterally trust your current government to be responsible with the keys to the backdoor, is it wise to unilaterally trust their successors?  Computer security is only ever a matter of degree, and the only safe way to keep a secret like this safe is for it not to exist in the first place.</p>
</li>
<li>
<p>End-to-end encryption is nowadays a completely ubiquitous technology; <strong>an attempt to legislate against it is like trying to turn back the tide</strong> or declare a branch of mathematics illegal.  Even if Matrix did compromise its encryption, users could easily use any number of other approaches to additionally secure their conversations - from PGP, to OTR, to using one-time pads, to sharing content in password-protected ZIP files.  Or they could just switch to a E2EE chat system operating from a jurisdiction without backdoors.</p>
</li>
<li>
<p>Governments protect their own data using end-to-end encryption, precisely because they do not want other governments being able to snoop on them.  So not only is it hypocritical for governments to argue for backdoors,** it immediately puts their own governmental data at risk of being compromised**.  Moreover, creating infrastructure for backdoors sets an incredibly bad precedent to the rest of the world - where less salubrious governments will inevitably use the same technology to the massive detriment of their citizens‚Äô human rights.</p>
</li>
<li>
<p>Finally, in Matrix‚Äôs specific case: Matrix is an encrypted decentralised open network powered by open source software, where anyone can run a server.  Even if the Matrix core team were obligated to add a backdoor, this would be visible to the wider world - and <strong>there would be no way to make the wider network adopt it</strong>.  It would just damage the credibility of the core team, push encryption development to other countries,  and the wider network would move on irrespectively.</p>
</li>
</ul>
<p>In short, we need to keep E2EE as it is so that it benefits the 99.9% of people who are good actors. If we enforce backdoors and undermine it, then the bad 0.1% percent simply will switch to non-backdoored systems while the 99.9% are left vulnerable.</p>
<p>We‚Äôre not alone in thinking this either: the GDPR (the world-leading regulation towards data protection and privacy) explicitly calls out robust encryption as a necessary information security measure. In fact, the risk of US governmental backdoors explicitly caused the <a href="http://curia.europa.eu/juris/document/document.jsf?docid=228677&amp;doclang=EN">European Court of Justice to invalidate the Privacy Shield</a> for EU-&gt;US data.  The position of the seven governments here (alongside <a href="https://ec.europa.eu/home-affairs/sites/homeaffairs/files/what-we-do/policies/european-agenda-security/20200724_com-2020-607-commission-communication_en.pdf">recent communications by the EU commissioner</a> on the ‚Äòproblem‚Äô of encryption) is a significant step back on the protection of the fundamental right of privacy.</p>
<p>So, how do we solve this predicament for Matrix?</p>
<p>Thankfully: <strong>there is another way.</strong></p>
<p>This statement from the seven governments aims to protect the general public from bad actors, but it clearly undermines the good ones.  What we <em>really</em> need is something that empowers users and administrators to identify and protect themselves from bad actors, without undermining privacy.</p>
<p>What if we had a standard way to let users themselves build up and share their own views of whether other users, messages, rooms, servers etc. are obnoxious or not?  What if you could visualise and choose which filters to apply to your view of Matrix?</p>
<p>Just like the Web, Email or the Internet as a whole, there is literally no way to unilaterally censor or block content in Matrix.  But what we <em>can</em> do is provide first-class infrastructure to let users (and room/community moderators and server admins) make up their own mind about who to trust, and what content to allow.  This would also provide a means for authorities to publish reputation data about illegal content, providing a privacy-respecting mechanism that admins/mods/users can use to keep illegal content away from their servers/clients.</p>
<p>The model we currently have in mind is:</p>
<ul>
<li>Anyone can gather reputation data about Matrix rooms / users / servers / communities / content, and publish it to as wide or narrow an audience as they like - providing their subjective score on whether something in Matrix is positive or negative in a given context.</li>
<li>This reputation data is published in a privacy preserving fashion - i.e. you can look up reputation data if you know the ID being queried, but the data is stored pseudonymised (e.g. indexed by a hashed ID).</li>
<li>Anyone can subscribe to reputation feeds and blend them together in order to inform how they filter their content.  The feeds might be their own data, or from their friends, or from trusted sources (e.g. a fact-checking company).  Their blended feed can be republished as their own.</li>
<li>To prevent users getting trapped in a factional filter bubble of their own devising, we‚Äôll provide UI to visualise and warn about the extent of their filtering - and make it easy and fun to shift their viewpoint as needed.</li>
<li>Admins running servers in particular jurisdictions then have the option to enforce whatever rules they need on their servers (e.g. they might want to subscribe to reputation feeds from a trusted source such as <a href="https://www.iwf.org.uk/">the IWF</a>, identifying child sexual abuse content, and use it to block it from their server).</li>
<li>This isn‚Äôt just about combating abuse - but the same system can also be used to empower users to filter out spam, propaganda, unwanted NSFW content, etc on their own terms.</li>
</ul>
<p>This forms a <em>relative</em> reputation system.  As uncomfortable as it may be, one man‚Äôs terrorist is another man‚Äôs freedom fighter, and different jurisdictions have different laws - and it‚Äôs not up to the Matrix.org Foundation to play God and adjudicate.  Each user/moderator/admin should be free to make up their own mind and decide which reputation feeds to align themselves with.  That is not to say that this system would help users locate extreme content - the privacy-preserving nature of the reputation data means that it‚Äôs only useful to filter <em>out</em> material which would otherwise already be visible to you - not to locate new content.</p>
<p>In terms of how this interacts with end-to-end-encryption and mitigating abuse: the reality is that the vast majority of abuse in public networks like Matrix, the Web or Email is visible from the public unencrypted domain. Abusive communities generally want to attract/recruit/groom users - and that means providing a public front door, which would be flagged by a reputation system such as the one proposed above.  Meanwhile, communities which are entirely private and entirely encrypted typically still have touch-points with the rest of the world - and even then, the chances are extremely high that they will avoid any hypothetical backdoored servers.  In short, investigating such communities requires traditional infiltration and surveillance by the authorities rather than an ineffective backdoor.</p>
<p>Now, this approach may sound completely sci-fi and implausibly overambitious (our speciality!) - but we‚Äôve actually started successfully building this already, having been refining the idea over the last few years.  <a href="https://github.com/matrix-org/matrix-doc/blob/msc2313/proposals/2313-moderation-policy-rooms.md">MSC2313</a> is a first cut at the idea of publishing and subscribing to reputation data - starting off with simple binary ban rules.  It‚Äôs been implemented and in production for over a year now, and is used to maintain shared banlists used by both matrix.org and mozilla.org communities.  The next step is to expand this to support a blendable continuum of reputation data (rather than just binary banlists), make it privacy preserving, and get working on the client UX for configuring and visualising them.</p>
<p>Finally: we are continuing to hire a dedicated Reputation Team to work full time on building this (kindly funded by Element).  This is a major investment in the future of Matrix, and frankly is spending money that we don‚Äôt really have - but it‚Äôs critical to the long-term success of the project, and perhaps the health of the Internet as a whole.  There‚Äôs nothing about a good relative reputation system which is particularly specific to Matrix, after all, and many other folks (decentralised and otherwise) are clearly in desperate need of one too. We are actively looking for funding to support this work, so if you‚Äôre feeling rich and philanthropic (or a government wanting to support a more enlightened approach) we would <em>love</em> to hear from you at <a href="mailto:funding@matrix.org">funding@matrix.org</a>!</p>
<p>Here‚Äôs to a world where users have excellent tools to protect themselves online - and a world where their safety is not compromised by encryption backdoors.</p>
<p>-- The Matrix.org Core Team</p>
<p>*Comments at <a href="https://news.ycombinator.com/item?id=24826951">HN</a>, <a href="https://lobste.rs/s/ntyvtw/combating_abuse_matrix_without">lobste.rs</a>, and <a href="https://www.reddit.com/r/linux/comments/je8s7x/combating_abuse_in_matrix_without_backdoors/">r/linux</a>, <a href="https://lwn.net/Articles/834710/">LWN</a></p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;2020&#x2F;10&#x2F;16&#x2F;this-week-in-matrix-2020-10-16&#x2F;" title="This Week in Matrix 2020-10-16">This Week in Matrix 2020-10-16</a></h1>
            <span>
                16.10.2020 00:00
                ‚Äî
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                ‚Äî
                
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
                
            </span>
            
        </header>
        <div>
            <h2 id="matrix-live">Matrix Live üéô</h2>
<iframe src="https://www.youtube.com/embed/xwsmdscTjJM" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>In which I chat with Kitsune about the work done to get a <a href="https://github.com/matrix-org/matrix-doc/pull/2312/">Matrix URI schema</a> agreed, and the state of the work.</p>
<p>See also, <a href="https://www.youtube.com/watch?v=xJ2Tjc1Aj0A">Open Tech Will Save Us #7</a> took place this week! Go watch.</p>
<h2 id="dept-of-status-of-matrix-face-with-th">Dept of <em>Status of Matrix</em> üå°Ô∏è</h2>
<h3 id="meta-counting">Meta-counting</h3>
<p>As a crude measure of growth, <a href="https://matrix.to/#/@matthew:matrix.org">Matthew</a> commented about <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a>:</p>
<blockquote>
<p>I love that this room has ~700 people in it, spread over ~350 servers :D</p>
</blockquote>
<p>That is something to love. Come join us in the room to share your news and see what's new from others.</p>
<h3 id="elokapina-extinction-rebellion-finland-migrates-to-matrix">Elokapina (Extinction Rebellion Finland) migrates to Matrix</h3>
<p><a href="https://matrix.to/#/@jaywink:elokapina.fi">kapina-jaywink</a> told us:</p>
<blockquote>
<p>In recent weeks the XR Finland community has been moving over from Wire to our own Matrix homeserver for encrypted secure chat. This was something that had been planned for a while but kicked off in recent weeks due to Wire suffering from serious encryption key delivery issues, causing messages for many to be unreadable in large groups. Currently we've migrated almost 300 rebels with more to come. Feedback has mostly been very positive, people generally like the Element clients ü§© One of the interesting changes has been a huge uptick in the amount of discussion, which can be taken as a good sign. The plan is to next start bridging to some of the international XR chapters, for example those on Mattermost, Telegram and Slack. And maybe get them over to Matrix too eventually ;)</p>
<p>To aid in community management, we've started creating <a href="https://github.com/elokapina/bubo">a bot called Bubo</a>. Right now it mostly helps with maintaining rooms and allowing mass invites, but more features to help the community cooperate are coming. We were planning to utilize (actual) communities so it has some functionality for those, but decided then to wait for the communities rewrite. It doesn't yet have any releases, will update in coming weeks as features are added and releases made.</p>
</blockquote>
<p><a href="https://matrix.to/#/@jaywink:elokapina.fi">kapina-jaywink</a> also</p>
<blockquote>
<p>wants to clarify that XR is a decentralized movement and this does not mean other chapters will adapt Matrix - but we can hope and for sure here in Finland we'll be spreading the good experiences to other chapters ;)</p>
</blockquote>
<h2 id="dept-of-spec-scroll">Dept of Spec üìú</h2>
<h3 id="new-spec-website">New Spec Website!</h3>
<p><a href="https://matrix.to/#/@wbamberg:matrix.org">wbamberg</a> told us:</p>
<blockquote>
<p>We're working on a new platform for the specification docs, aimed initially at improving navigation and general usability.</p>
<p>The initial demo site is at <a href="https://adoring-einstein-5ea514.netlify.app/spec/">https://adoring-einstein-5ea514.netlify.app/spec/</a> and the main tracking bug is at <a href="https://github.com/matrix-org/matrix-doc/issues/2822">https://github.com/matrix-org/matrix-doc/issues/2822</a></p>
</blockquote>
<h3 id="spec">Spec</h3>
<p><a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> reported:</p>
<blockquote>
<p>Here's your weekly spec update! The heart of Matrix is the specification - and this is modified by Matrix Spec Change (MSC) proposals. Learn more about how the process works at <a href="https://matrix.org/docs/spec/proposals">https://matrix.org/docs/spec/proposals</a>.</p>
<h4 id="msc-status">MSC Status</h4>
<p><strong>Merged MSCs:</strong></p>
<ul>
<li><em>No MSCs were merged this week.</em></li>
</ul>
<p><strong>MSCs in Final Comment Period:</strong></p>
<ul>
<li><em>No MSCs are in FCP.</em></li>
</ul>
<p><strong>New MSCs:</strong></p>
<ul>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2821">MSC2821: Testing Pushers</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2815">MSC2815: Proposal to allow room moderators to view redacted event content</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2813">MSC2813: Widget API error handling and validation</a></p>
</li>
</ul>
<h4 id="spec-core-team">Spec Core Team</h4>
<p>In terms of Spec Core Team MSC focus for this week, widgets are still the main focus: <a href="https://github.com/matrix-org/matrix-doc/issues/2774">MSC2774</a> (widget URL template param), <a href="https://github.com/matrix-org/matrix-doc/issues/2765">MSC2765</a> (widget avatars), and <a href="https://github.com/matrix-org/matrix-doc/issues/2790">MSC2790</a> (modal widgets).</p>
</blockquote>
<p><img src="/blog/img/2020-10-16-KA5Yo-stacked_area_chart.png" alt="2020-10-16-KA5Yo-stacked_area_chart.png" /></p>
<h2 id="dept-of-servers-europea">Dept of Servers üè¢</h2>
<h3 id="dendrite-gomatrixserverlib">Dendrite / gomatrixserverlib</h3>
<p>Dendrite is a next-generation homeserver written in Go</p>
<p><a href="https://matrix.to/#/@neilalexander:matrix.org">Neil Alexander</a> reported:</p>
<blockquote>
<p>We <a href="https://matrix.org/blog/2020/10/08/dendrite-is-entering-beta">released our first beta last week</a> and we've been busy taking feedback from the community and fixing problems as they have been reported to us. We will be cutting a v0.2.0 release candidate later today, which contains a significant number of important fixes and performance improvements.</p>
<p>We didn't publish a full changelog last week due to the beta announcement, therefore the following list includes changes from the last two weeks:</p>
<ul>
<li>
<p>Database migrations are now ran automatically at startup</p>
</li>
<li>
<p>State resolution v2 performance has been improved dramatically on large state sets, seen to be running up to 20x faster in some rooms</p>
</li>
<li>
<p>Dendrite no longer runs state resolution over single trusted state snapshots</p>
</li>
<li>
<p>Monolith deployments with Kafka now work again (each component sets up connections independently to avoid duplicate consumers)</p>
</li>
<li>
<p>Dendrite now correctly rejects invalid UTF-8 - thanks to <a href="https://github.com/Lesterpig">Lesterpig</a></p>
</li>
<li>
<p>Fully read markers are now handled - thanks to <a href="https://github.com/Lesterpig">Lesterpig</a></p>
</li>
<li>
<p>The <code>completed</code> field is now returned properly for user-interactive auth - thanks to <a href="https://github.com/Lesterpig">Lesterpig</a></p>
</li>
<li>
<p>The devices table now tracks last seen timestamps, IPs and user agents - thanks to <a href="https://github.com/S7evinK">S7evinK</a></p>
</li>
<li>
<p>A bug has been fixed in the reverse topological ordering algorithm which resulted in us giving up on inbound references after the first prev/auth event</p>
</li>
<li>
<p>A bug with concurrent map writes in the rate limiting in the client API has been fixed</p>
</li>
<li>
<p>Forward extremities and their previous events are now checked fully against the database</p>
</li>
<li>
<p>Typing events are now ignored if the sender domain doesn't match the origin</p>
</li>
<li>
<p>Duplicate redaction entries no longer result in database errors</p>
</li>
<li>
<p>Some bugs in <code>/send</code> have been fixed where the full room state wasn't requested properly before sending a new snapshot to the roomserver</p>
</li>
<li>
<p>The membership updaters now use database writers properly, which fixes some SQLite locking issues</p>
</li>
<li>
<p>The sync API no longer burns CPU processing unnecessary device key change notifications</p>
</li>
<li>
<p><code>QueryStateAfterEvents</code> now resolves state from multiple snapshots properly</p>
</li>
<li>
<p>Cumulative room state is now sent to the roomserver when creating rooms locally</p>
</li>
<li>
<p>Missing auth events will now be retrieved from multiple servers in the room if necessary</p>
</li>
<li>
<p>Federation requests now have variable timeouts, allowing us to wait much longer for a remote server to process certain tasks</p>
</li>
<li>
<p>The <code>/send</code> endpoint now returns 500 errors far less often, reducing the frequency that other servers back off from sending to Dendrite</p>
</li>
<li>
<p>Backfill no longer uses the request context for persisting events, which was resulting in us failing to store those events sometimes</p>
</li>
<li>
<p>Invite stripped state from the sync API now includes the stripped invite itself, so that Element Web can display who sent the invite properly</p>
</li>
<li>
<p>The signing key fetch mechanism no longer gives up if it is unable to fetch specific keys</p>
</li>
<li>
<p>Handling of invalid display name or avatar URLs in membership events has been improved</p>
</li>
</ul>
<p>Spec compliance has improved a little:</p>
<ul>
<li>
<p>Client-server APIs: 56%, same as last week</p>
</li>
<li>
<p>Server-server APIs: 80%, up from 79% last week</p>
</li>
</ul>
<p>As always, please feel free to join us in <a href="https://matrix.to/#/#dendrite:matrix.org">#dendrite:matrix.org</a> for general Dendrite chat, and <a href="https://matrix.to/#/#dendrite-dev:matrix.org">#dendrite-dev:matrix.org</a> if you are interested in contributing!</p>
</blockquote>
<p>Good grief that's a big update! For a video discussion of the status and future of Dendrite, check out <a href="https://www.youtube.com/watch?v=xJ2Tjc1Aj0A">Open Tech Will Save Us #7</a>.</p>
<p><a href="https://matrix.to/#/@matthew:matrix.org">Matthew</a> added:</p>
<blockquote>
<p>my personal dendrite is now in roughly the same set of rooms as my personal synapse. Dendrite is idling at 180MB of RAM, Synapse is idling at 1.8GB of RAM :)</p>
</blockquote>
<h3 id="conduit">Conduit</h3>
<p><a href="https://matrix.to/#/@timo:conduit.rs">Timo</a>:</p>
<blockquote>
<p>Hello everyone, this week we merged the federation branch into master. It's not ready to be used properly yet, but we're merging it as it seems stable enough for now. We also improved performance of the federation branch a lot by turning off debug logs.</p>
<p>Other news:</p>
<ul>
<li>I opened two issues on element-ios which currently break register and login support on Conduit, making it completely unusable. Hopefully they can be resolved soon (https://github.com/vector-im/element-ios/issues/3736, https://github.com/vector-im/element-ios/issues/3737)</li>
<li>I'm working on an MSC for threading. It's still WIP, but you can take a look here: https://demo.codimd.org/s/SykbuAUwP</li>
</ul>
<p>Thanks to everyone who supports me on <a href="https://liberapay.com/timokoesters">Liberapay</a> or Bitcoin!</p>
</blockquote>
<h3 id="synapse">Synapse</h3>
<p><a href="https://matrix.to/#/@neilj:matrix.org">Neil</a> offered:</p>
<blockquote>
<p><a href="https://dictionary.cambridge.org/dictionary/english/stonking">Stonking</a> week for Synapse as we landed sharded event persisters and deployed to matrix.org. This is the last significant component other than the main process to go through the sharding process and a major hurdle in horizontal scalability of Synapse.</p>
<p>Initial results look good with event persistence <a href="https://en.wikipedia.org/wiki/Apdex">apdex</a> improving, however we think there are still some significant performance improvements available through configuration and will continue to experiment.</p>
</blockquote>
<p><img src="/blog/img/2020-10-16-I-Plk-Screenshot2020-10-16at17.23.31.png" alt="2020-10-16-I-Plk-Screenshot2020-10-16at17.23.31.png" /></p>
<blockquote>
<p>We also moved off background processes from the main process. This is significant because it means that while the main process is not shardable it really doesn‚Äôt do anything anymore other than orchestration.</p>
<p>Again the initial impact looks very promising and we will continue to tune. Having moved the background processes away it also makes profiling the main process that much easier.</p>
</blockquote>
<p><img src="/blog/img/2020-10-16-fuKDh-main-cpu2.png" alt="2020-10-16-fuKDh-main-cpu2.png" /></p>
<blockquote>
<p>Aside from all of that we continue to progress room knocking put out a <a href="https://matrix.org/blog/2020/10/15/synapse-1-21-2-released-and-security-advisory">1.21.2</a>  - a bug fix release <strong>though please please ensure you are running at least Synapse &gt;= 1.21.0 since 1.21.0 contains a XSS security fix</strong>.</p>
<p>Next week we will carrying on tuning matrix.org and start to look at improving state resolution performance.</p>
</blockquote>
<h2 id="synapse-deployment-inbox-tray">Synapse Deployment üì•Ô∏è</h2>
<h3 id="kubernetes">Kubernetes</h3>
<p><a href="https://matrix.to/#/@ace:kittenface.studio">Ananace</a> told us:</p>
<blockquote>
<p>Just pushed the updated image tags and <a href="https://gitlab.com/ananace/charts">chart version</a> for my <a href="https://github.com/ananace/matrix-synapse">K8s-optimized Synapse image</a> for version 1.21.0, as well as a <a href="https://gitlab.com/ananace/charts">chart</a> update for element-web 1.7.9</p>
</blockquote>
<p>then later</p>
<blockquote>
<p>And to expand on my previous update, got Synapse 1.21.2 up on the chart and K8s-optimized image.</p>
</blockquote>
<h3 id="yunohost">YunoHost</h3>
<p><a href="https://matrix.to/#/@pierre:mamieserv.fr">Pierre</a> said:</p>
<blockquote>
<p><a href="https://yunohost.org">YunoHost</a> is an operating system aiming for the simplest administration of a server, and therefore democratize self-hosting.</p>
<p><a href="https://github.com/YunoHost-Apps/synapse_ynh/tree/master">Synapse</a> integration had been updated to 1.20.1 (1.21.0 available in branch <code>testing</code>)</p>
<p><a href="https://github.com/YunoHost-Apps/element_ynh/tree/master">Element Web</a> integration had been updated to 1.7.8 (1.7.9 available in branch <code>testing</code>)</p>
</blockquote>
<h2 id="dept-of-bridges-bridge-at-night">Dept of Bridges üåâ</h2>
<h3 id="bridges-increase-their-presence">Bridges increase their presence</h3>
<p><a href="https://matrix.to/#/@Half-Shot:half-shot.uk">Half-Shot</a> told us:</p>
<blockquote>
<p>Small bit of news I wanted to talk about from Bridge Island. My <a href="https://github.com/matrix-org/synapse/pull/8437">implementation</a> for <a href="https://github.com/matrix-org/matrix-doc/pull/2409">MSC2409</a> has been merged which means appservices / bridges can now listen in for incoming presence, typing and read receipt events! This means that the Slack bridge can now reliably send your typing status to Slack, and Bifrost can reliably bridge your everything to XMPP. The MSC is still in flux and could change, but for now this could really improve the native feeling of bridges :)</p>
<p>(Oh and I should mention anyone using matrix-appservice-bridge v2.2.0+ can use this behaviour for free)</p>
</blockquote>
<h3 id="mautrix-python-implements-half-shot-s-new-features">mautrix-python implements Half-Shot's new features</h3>
<p>Hot on his heels, <a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> announced:</p>
<blockquote>
<p>I've been adding support for the MSCs Half-Shot implemented in Synapse to my bridges:</p>
<ul>
<li>
<p>Enabling end-to-bridge encryption now uses appservice login (<a href="https://github.com/matrix-org/matrix-doc/pull/2778">MSC2778</a>), which means setting up the shared secret login module is no longer required for e2be.</p>
</li>
<li>
<p>mautrix-python has support for receiving ephemeral events via <a href="https://github.com/matrix-org/matrix-doc/pull/2409">MSC2409</a> in a branch, which will be merged once Synapse v1.22 is released. After it's merged, <code>/sync</code>ing with double puppets will no longer be necessary to bridge ephemeral events.</p>
</li>
</ul>
<p>Both of these will also be implemented in mautrix-go/whatsapp soon.</p>
<p>Now I just need Half-Shot to make synapse send to-device events to appservices, after which bridges won't need any hacky <code>/sync</code>ing at all.</p>
</blockquote>
<h2 id="dept-of-clients-iphone">Dept of Clients üì±</h2>
<h3 id="hydrogen">Hydrogen</h3>
<p><a href="https://matrix.to/#/@bwindels:matrix.org">Bruno</a> offered:</p>
<blockquote>
<p>Several releases this week (0.1.11 to 0.1.15) with lots of changes:</p>
<ul>
<li>
<p>url-based navigation has landed! All navigation in the app is now done through urls, meaning you can also bookmark any UI state (e.g. grid configurations).</p>
</li>
<li>
<p>fixed 2 memory leaks (exposed now because you can unload your session without refreshing the page)</p>
</li>
<li>
<p>fixed an issue with libolm running out of memory if you send a message to more than 44 devices (see issue #150).</p>
</li>
<li>
<p>some logical additions now we have url navigation: restoring the last url when opening the app with the default route, and a button to close your session and go back to the picker.</p>
</li>
<li>
<p>the app now blocks concurrent access to the same session from different tabs (it just closes the session in the non-active tab). This will prevent multiple syncs tripping over each other writing to indexeddb (e.g. ConstraintErrors and friends).</p>
</li>
<li>
<p>updates are announced in the app (for now through a confirm dialog, but will use an in app notification once we have it)</p>
</li>
<li>
<p>fixes updates not installing on iOS, by having an update prompt. To get this update on iOS though, you'll need to unpin the app, and pinning it again. You'll need to login again after this. All future updates should be installable through the update prompt once you have 0.1.15 though, you won't have to do this again normally.</p>
</li>
<li>
<p>uses the hydrogen icon when pinning on iOS</p>
</li>
</ul>
</blockquote>
<p>I really recommend hitting <a href="https://hydrogen.element.io/">https://hydrogen.element.io/</a> - what great progress!</p>
<h3 id="element-android">Element Android</h3>
<p><a href="https://matrix.to/#/@benoit.marty:matrix.org">benoit</a> reported:</p>
<blockquote>
<p>We are currently preparing the release of the version 1.0.9 of Element Android, which contain searching messages in clear rooms and a lots of other improvements and new features.</p>
<p>The SDK 1.0.9 will also be released, with an updated readme, and a brand new sample app, written by Ganfra. It will help developers to start using the new SDK and can be found here: <a href="https://github.com/matrix-org/matrix-android-sdk2-sample">https://github.com/matrix-org/matrix-android-sdk2-sample</a>. This sample app is able to let the user connects to an existing account on any homeserver with password login, display the room list, display a room timeline and send message to a room.
a brand new sample app</p>
</blockquote>
<p>YES! This is the best documentation</p>
<h3 id="element-ios">Element-iOS</h3>
<p><a href="https://matrix.to/#/@Manu:matrix.org">Manu</a> offered:</p>
<blockquote>
<p>This week, we released <a href="https://github.com/vector-im/element-ios/releases/tag/v1.0.16">1.0.16</a> on the App Store (and TestFlight).</p>
</blockquote>
<h3 id="konheko-sailfish-client">Konheko (Sailfish client)</h3>
<p><a href="https://matrix.to/#/@deepbluev7:neko.dev">Nico (@deepbluev7:neko.dev)</a> offered:</p>
<blockquote>
<p>I published the first preview of my Sailfish client called Konheko. While you can run Android applications on Sailfish, they usually are a subpar experience, since they really don't fit the platforms design and style and also usually don't properly send notifications.</p>
<p>So about a year ago I started working on a Matrix client for SailfishOS, but I never really made much progress. Well, last weekend I did, and so it can now send plain text messages as well as various forms of media messages, I made a basic application icon and I've been using it this week already (for unencrypted rooms).</p>
<p>It is still missing a lot of features, but if you want you can install it from <a href="https://openrepos.net/content/deepbluev7/konheko">OpenRepos</a>. Sources are available <a href="https://nheko.im/nheko-reborn/konheko">here</a>. Just be aware, that it currently stores all messages in RAM, so every restart will take forever to load your rooms and it may run out of RAM at some point. Storing messages in some database will come at some point. Also, a lot of menus may lead nowhere, since those are just placeholders for me atm.</p>
</blockquote>
<p><img src="/blog/img/2020-10-16-QApie-Bildschirmfoto_20201016_002.png" alt="2020-10-16-QApie-Bildschirmfoto_20201016_002.png" /></p>
<p><img src="/blog/img/2020-10-16-I5_7M-Bildschirmfoto_20201016_007.png" alt="2020-10-16-I5_7M-Bildschirmfoto_20201016_007.png" /></p>
<h3 id="schildichat-web-desktop">SchildiChat Web/Desktop</h3>
<p><a href="https://matrix.to/#/@spiritcroc:matrix.org">SpiritCroc</a> announced:</p>
<blockquote>
<p>Recently, I tweaked Element-web to feature a few changes similar to SchildiChat for Android.</p>
<p>For now, it's probably best seen rather as a proof-of-concept than a finished product, as there are still some layout bugs, and no settings available for the added features (I know some people prefer separate lists for direct and group chats).
I consider it usable though.</p>
<p>Particular changes compared to upstream Element-web include:</p>
<ul>
<li>
<p>A common section for groups and direct chats in the overview</p>
</li>
<li>
<p>Message bubbles</p>
</li>
<li>
<p>Bigger items in the room overview</p>
</li>
<li>
<p>A different dark theme, similar to SchildiChat for Android</p>
</li>
</ul>
<p>I don't know how much I will work on this in the future, but I figured it might be interesting to share either way. Maybe even someone with more web-development skills than me might want to help improving it :)</p>
<p>For further discussion, I have created <a href="https://matrix.to/#/#schildichat-web:matrix.org">#schildichat-web:matrix.org</a> .</p>
<p>The current version of SchildiChat-Desktop is available for Desktop <a href="https://github.com/SpiritCroc/schildichat-desktop/releases">here</a>, and I host the web variant <a href="https://schildiweb.spiritcroc.de/">here</a>.
If you want to build it yourself, check out <a href="https://github.com/SpiritCroc/schildichat-desktop">this repo</a>.</p>
</blockquote>
<p><img src="/blog/img/2020-10-16-oMUqR-1.png" alt="2020-10-16-oMUqR-1.png" /></p>
<h3 id="element-web">Element Web</h3>
<p><a href="https://matrix.to/#/@neilj:matrix.org">Neil</a> offered:</p>
<blockquote>
<p>Element 1.7.9 has landed, highlights include</p>
<ul>
<li>
<p>Many small fixes with edits and replies</p>
</li>
<li>
<p>Fixed a race during cross-signing key upload at registration time</p>
</li>
<li>
<p>Clarified when you have unsaved changes in profile settings</p>
</li>
</ul>
<p>Aside from that  has been pushing on with the widgets project. A picture says a thousand words, so here you go.</p>
</blockquote>
<p><img src="/blog/img/2020-10-16-wZher-image.png" alt="2020-10-16-wZher-image.png" /></p>
<blockquote>
<p>As you can see T3chguy was really pleased to have me interrupt him to take this picture. Expect the new design to merge next week. </p>
<p>Finally we will most likely ship a new release next week to fix some Jitsi bugs.</p>
</blockquote>
<h2 id="dept-of-ops">Dept of Ops üõ†</h2>
<h3 id="wake-on-lan-bot">Wake-on-LAN bot</h3>
<p><a href="https://matrix.to/#/@jan.christian:gruenhage.xyz">JCG</a> announced:</p>
<blockquote>
<p>I wrote a <a href="https://en.wikipedia.org/wiki/Wake-on-LAN">Wake-on-LAN</a> bot to wake up hosts by sending a matrix message. It is configurable with multiple hosts and has a list of users per host who are allowed to wake it up. It's using the matrix-rust-sdk, source is available over at <a href="https://git.jcg.re/jcgruenhage/matrix-wol">https://git.jcg.re/jcgruenhage/matrix-wol</a>, and if anyone has questions, feel free to join <a href="https://matrix.to/#/#matrix-wol:jcg.re">#matrix-wol:jcg.re</a>.</p>
</blockquote>
<p>When I asked what this is used for:</p>
<blockquote>
<p>I have stuff on my workstation that I need access to most of the time, but keeping it running uses too much power (but I did it anyway so far), this is so that I can suspend it when I leave but can still power it on when I need something from there on the got</p>
</blockquote>
<h2 id="dept-of-events-and-talks">Dept of Events and Talks üó£Ô∏è</h2>
<h3 id="talking-about-bridges-and-bots-in-matrix-german">Talking about Bridges and Bots in Matrix (German)</h3>
<p><a href="https://matrix.to/#/@oleg:fiksel.info">Oleg</a> announced:</p>
<blockquote>
<p>I was invited to the German Podcast MacMittwoch (no, it's not only about Macs) to talk about Bridges and Bots in Matrix. It was a very interesting and funny round.</p>
<p>Here is the recording:</p>
<ul>
<li><a href="https://macmittwoch.de/podcast/matrix_mit_bridges_und_bots">https://macmittwoch.de/podcast/matrix_mit_bridges_und_bots</a></li>
</ul>
</blockquote>
<h2 id="dept-of-interesting-projects">Dept of Interesting Projects üõ∞Ô∏è</h2>
<h3 id="matrix-emoji-upload">matrix-emoji-upload</h3>
<p><a href="https://matrix.to/#/@mewmew:blob.cat">mewmew</a> offered:</p>
<blockquote>
<p>This is a script I've created for use with <a href="https://github.com/matrix-org/matrix-doc/pull/2545/">MSC2545</a>. It allows easy uploading of emoji packs to Matrix rooms. Feel free to check it out <a href="https://git.blob.cat/mewmew/matrix-emoji-upload">on Gitea</a>, or join the project room <a href="https://matrix.to/#/#matrix-emoji-upload:blob.cat">#matrix-emoji-upload:blob.cat</a> if you have any questions/comments/issues.</p>
</blockquote>
<h3 id="n8n-io-support">n8n.io support</h3>
<p><a href="https://matrix.to/#/@matthew:matrix.org">Matthew</a> announced:</p>
<blockquote>
<p>n8n.io (FOSS extendable workflow automation) just added Matrix support! <a href="https://n8n.io/integrations/n8n-nodes-base.matrix">https://n8n.io/integrations/n8n-nodes-base.matrix</a> and <a href="https://github.com/n8n-io/n8n/pull/1046">https://github.com/n8n-io/n8n/pull/1046</a></p>
</blockquote>
<p>Exciting! Yet the saga that followed only adds to the excitement!</p>
<p>First <a href="https://matrix.to/#/@oleg:fiksel.info">Oleg</a> noticed a problem:</p>
<blockquote>
<p>Could it be that only matrix.org as HS currently is supported?</p>
<p>I'm getting <code>Matrix credentials are not valid!</code> and I see the request to matrix.org on a traffic capture.</p>
</blockquote>
<p><a href="https://matrix.to/#/@jaywink:federator.dev">jaywink</a> discovered the alarming truth:</p>
<blockquote>
<p>the original PR mentions mantrixorg indeed: <a href="https://github.com/n8n-io/n8n/pull/1024">https://github.com/n8n-io/n8n/pull/1024</a> .. sounds like PR time for someone :)</p>
</blockquote>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a>, like a coiled spring, provided a PR:</p>
<blockquote>
<p>well now it's a pull request <a href="https://github.com/n8n-io/n8n/pull/1065">https://github.com/n8n-io/n8n/pull/1065</a></p>
</blockquote>
<p>...</p>
<blockquote>
<p>oh nice it got merged already</p>
</blockquote>
<p><a href="https://matrix.to/#/@Faelar:matrix.org">Faelar</a> noticed:</p>
<blockquote>
<p>For those not following on github, n8n released a new version including the fix for homeserver</p>
</blockquote>
<p><a href="https://matrix.to/#/@oleg:fiksel.info">Oleg</a>, who brings us back to the start said:</p>
<blockquote>
<p>Just tested it.</p>
<p>It works! ü•≥</p>
</blockquote>
<p>Open Source!</p>
<h2 id="dept-of-ping-table-tennis-paddle-and-ball">Dept of Ping üèì</h2>
<p>Here we reveal, rank, and applaud the homeservers with the lowest ping, as measured by <a href="https://github.com/maubot/echo">pingbot</a>, a <a href="https://github.com/maubot/maubot">maubot</a> that you can host on your own server. Join <a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">imninja.net</td><td style="text-align: center">466.5</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">midov.pl</td><td style="text-align: center">531</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">mdpnd.ch</td><td style="text-align: center">540</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">chatcloud.net</td><td style="text-align: center">569</td></tr>
<tr><td style="text-align: center">5</td><td style="text-align: center">elcyb.org</td><td style="text-align: center">801</td></tr>
<tr><td style="text-align: center">6</td><td style="text-align: center">fab.network</td><td style="text-align: center">967</td></tr>
<tr><td style="text-align: center">7</td><td style="text-align: center">conduit.rs</td><td style="text-align: center">1168</td></tr>
<tr><td style="text-align: center">8</td><td style="text-align: center">envs.net</td><td style="text-align: center">1863.5</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">blob.cat</td><td style="text-align: center">2660</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">aragon.sh</td><td style="text-align: center">2743.5</td></tr>
</tbody></table>
<h2 id="that-s-all-i-know-checkered-flag">That's all I know üèÅ</h2>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;2020&#x2F;10&#x2F;15&#x2F;synapse-1-21-2-released-and-security-advisory&#x2F;" title="Synapse 1.21.2 released, and security advisory.">Synapse 1.21.2 released, and security advisory.</a></h1>
            <span>
                15.10.2020 17:25
                ‚Äî
                <a href="/category/releases">
                    Releases
                </a>
                ‚Äî
                
                <a href="/author/richard-van-der-hoff">
                    Richard van der Hoff
                </a>
                
            </span>
            <br>
            <small>Last update: 15.10.2020 17:16</small>
        </header>
        <div>
            <p>Hi folks,</p>
<p>Today we have released Synapse 1.21.2, which fixes a couple of minor bugs that crept into the previous release. Full details are below.</p>
<p>Separately, we are advising any administrators who have not yet upgraded to Synapse 1.21.0 or later to do so as soon as possible. Previous versions of Synapse were vulnerable to a cross-site-scripting (XSS) attack; the bug was fixed in Synapse 1.21.0 with <a href="https://github.com/matrix-org/synapse/pull/8444">PR #8444</a>.</p>
<p>The changelog for 1.21.2 is as follows:</p>
<h1 id="synapse-1-21-2-2020-10-15">Synapse 1.21.2 (2020-10-15)</h1>
<p>Debian packages and Docker images have been rebuilt using the latest versions of dependency libraries, including authlib 0.15.1. Please see bugfixes below.</p>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix rare bug where sending an event would fail due to a racey assertion. (<a href="https://github.com/matrix-org/synapse/issues/8530">#8530</a>)</li>
<li>An updated version of the authlib dependency is included in the Docker and Debian images to fix an issue using OpenID Connect. See <a href="https://github.com/matrix-org/synapse/issues/8534">#8534</a> for details.</li>
</ul>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;2020&#x2F;10&#x2F;13&#x2F;synapse-1-21-1-released&#x2F;" title="Synapse 1.21.1 released">Synapse 1.21.1 released</a></h1>
            <span>
                13.10.2020 00:00
                ‚Äî
                <a href="/category/releases">
                    Releases
                </a>
                ‚Äî
                
                <a href="/author/neil-johnson">
                    Neil Johnson
                </a>
                
            </span>
            
        </header>
        <div>
            <p>Synapse 1.21.1 has landed!</p>
<p>Highlights of 1.21.1 include:-</p>
<ul>
<li>
<p>Add experimental support for sharding event persister. (<a href="https://github.com/matrix-org/synapse/issues/8294">#8294</a>, <a href="https://github.com/matrix-org/synapse/issues/8387">#8387</a>, <a href="https://github.com/matrix-org/synapse/issues/8396">#8396</a>, <a href="https://github.com/matrix-org/synapse/issues/8419">#8419</a>)</p>
</li>
<li>
<p>Add experimental prometheus metric to track numbers of &quot;large&quot; rooms for state resolutiom. (<a href="https://github.com/matrix-org/synapse/issues/8425">#8425</a>)</p>
</li>
<li>
<p>Add prometheus metrics to track federation delays. (<a href="https://github.com/matrix-org/synapse/issues/8430">#8430</a>)</p>
</li>
<li>
<p>Fix messages not being sent over federation until an event is sent into the same room. (<a href="https://github.com/matrix-org/synapse/issues/8230">#8230</a>, <a href="https://github.com/matrix-org/synapse/issues/8247">#8247</a>, <a href="https://github.com/matrix-org/synapse/issues/8258">#8258</a>, <a href="https://github.com/matrix-org/synapse/issues/8272">#8272</a>, <a href="https://github.com/matrix-org/synapse/issues/8322">#8322</a>)</p>
</li>
</ul>
<p>We've also made some improvements to SSO and added new admin APIs.</p>
<p>Get the new releases from any of the usual sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md. 1.21.1 is on github <a href="https://github.com/matrix-org/synapse/releases/tag/v1.21.1">here</a></p>
<p>The changelog for 1.21.1 is as follows:</p>
<h1 id="synapse-1-21-1-2020-10-13">Synapse 1.21.1 (2020-10-13)</h1>
<p>This release fixes a regression in v1.21.0 that prevented debian packages from being built.</p>
<p>It is otherwise identical to v1.21.0.</p>
<h1 id="synapse-1-21-0-2020-10-12">Synapse 1.21.0 (2020-10-12)</h1>
<p>No significant changes since v1.21.0rc3.</p>
<p>As <a href="https://github.com/matrix-org/synapse/blob/release-v1.21.1/CHANGES.md#synapse-1200-2020-09-22">noted in v1.20.0</a>, a future release will drop support for accessing Synapse's <a href="https://github.com/matrix-org/synapse/tree/master/docs/admin_api">Admin API</a> under the <code>/_matrix/client/*</code> endpoint prefixes. At that point, the Admin API will only be accessible under <code>/_synapse/admin</code>.</p>
<h1 id="synapse-1-21-0rc3-2020-10-08">Synapse 1.21.0rc3 (2020-10-08)</h1>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix duplication of events on high traffic servers, caused by PostgreSQL <code>could not serialize access due to concurrent update</code> errors. (<a href="https://github.com/matrix-org/synapse/issues/8456">#8456</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Add Groovy Gorilla to the list of distributions we build <code>.deb</code>s for. (<a href="https://github.com/matrix-org/synapse/issues/8475">#8475</a>)</li>
</ul>
<h1 id="synapse-1-21-0rc2-2020-10-02">Synapse 1.21.0rc2 (2020-10-02)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Convert additional templates from inline HTML to Jinja2 templates. (<a href="https://github.com/matrix-org/synapse/issues/8444">#8444</a>)</li>
</ul>
<h2 id="bugfixes-1">Bugfixes</h2>
<ul>
<li>Fix a regression in v1.21.0rc1 which broke thumbnails of remote media. (<a href="https://github.com/matrix-org/synapse/issues/8438">#8438</a>)</li>
<li>Do not expose the experimental <code>uk.half-shot.msc2778.login.application_service</code> flow in the login API, which caused a compatibility problem with Element iOS. (<a href="https://github.com/matrix-org/synapse/issues/8440">#8440</a>)</li>
<li>Fix malformed log line in new federation &quot;catch up&quot; logic. (<a href="https://github.com/matrix-org/synapse/issues/8442">#8442</a>)</li>
<li>Fix DB query on startup for negative streams which caused long start up times. Introduced in <a href="https://github.com/matrix-org/synapse/issues/8374">#8374</a>. (<a href="https://github.com/matrix-org/synapse/issues/8447">#8447</a>)</li>
</ul>
<h1 id="synapse-1-21-0rc1-2020-10-01">Synapse 1.21.0rc1 (2020-10-01)</h1>
<h2 id="features-1">Features</h2>
<ul>
<li>Require the user to confirm that their password should be reset after clicking the email confirmation link. (<a href="https://github.com/matrix-org/synapse/issues/8004">#8004</a>)</li>
<li>Add an admin API <code>GET /_synapse/admin/v1/event_reports</code> to read entries of table <code>event_reports</code>. Contributed by @dklimpel. (<a href="https://github.com/matrix-org/synapse/issues/8217">#8217</a>)</li>
<li>Consolidate the SSO error template across all configuration. (<a href="https://github.com/matrix-org/synapse/issues/8248">#8248</a>, <a href="https://github.com/matrix-org/synapse/issues/8405">#8405</a>)</li>
<li>Add a configuration option to specify a whitelist of domains that a user can be redirected to after validating their email or phone number. (<a href="https://github.com/matrix-org/synapse/issues/8275">#8275</a>, <a href="https://github.com/matrix-org/synapse/issues/8417">#8417</a>)</li>
<li>Add experimental support for sharding event persister. (<a href="https://github.com/matrix-org/synapse/issues/8294">#8294</a>, <a href="https://github.com/matrix-org/synapse/issues/8387">#8387</a>, <a href="https://github.com/matrix-org/synapse/issues/8396">#8396</a>, <a href="https://github.com/matrix-org/synapse/issues/8419">#8419</a>)</li>
<li>Add the room topic and avatar to the room details admin API. (<a href="https://github.com/matrix-org/synapse/issues/8305">#8305</a>)</li>
<li>Add an admin API for querying rooms where a user is a member. Contributed by @dklimpel. (<a href="https://github.com/matrix-org/synapse/issues/8306">#8306</a>)</li>
<li>Add <code>uk.half-shot.msc2778.login.application_service</code> login type to allow appservices to login. (<a href="https://github.com/matrix-org/synapse/issues/8320">#8320</a>)</li>
<li>Add a configuration option that allows existing users to log in with OpenID Connect. Contributed by @BBBSnowball and @OmmyZhang. (<a href="https://github.com/matrix-org/synapse/issues/8345">#8345</a>)</li>
<li>Add prometheus metrics for replication requests. (<a href="https://github.com/matrix-org/synapse/issues/8406">#8406</a>)</li>
<li>Support passing additional single sign-on parameters to the client. (<a href="https://github.com/matrix-org/synapse/issues/8413">#8413</a>)</li>
<li>Add experimental reporting of metrics on expensive rooms for state-resolution. (<a href="https://github.com/matrix-org/synapse/issues/8420">#8420</a>)</li>
<li>Add experimental prometheus metric to track numbers of &quot;large&quot; rooms for state resolutiom. (<a href="https://github.com/matrix-org/synapse/issues/8425">#8425</a>)</li>
<li>Add prometheus metrics to track federation delays. (<a href="https://github.com/matrix-org/synapse/issues/8430">#8430</a>)</li>
</ul>
<h2 id="bugfixes-2">Bugfixes</h2>
<ul>
<li>Fix a bug in the media repository where remote thumbnails with the same size but different crop methods would overwrite each other. Contributed by @deepbluev7. (<a href="https://github.com/matrix-org/synapse/issues/7124">#7124</a>)</li>
<li>Fix inconsistent handling of non-existent push rules, and stop tracking the <code>enabled</code> state of removed push rules. (<a href="https://github.com/matrix-org/synapse/issues/7796">#7796</a>)</li>
<li>Fix a longstanding bug when storing a media file with an empty <code>upload_name</code>. (<a href="https://github.com/matrix-org/synapse/issues/7905">#7905</a>)</li>
<li>Fix messages not being sent over federation until an event is sent into the same room. (<a href="https://github.com/matrix-org/synapse/issues/8230">#8230</a>, <a href="https://github.com/matrix-org/synapse/issues/8247">#8247</a>, <a href="https://github.com/matrix-org/synapse/issues/8258">#8258</a>, <a href="https://github.com/matrix-org/synapse/issues/8272">#8272</a>, <a href="https://github.com/matrix-org/synapse/issues/8322">#8322</a>)</li>
<li>Fix a longstanding bug where files that could not be thumbnailed would result in an Internal Server Error. (<a href="https://github.com/matrix-org/synapse/issues/8236">#8236</a>, <a href="https://github.com/matrix-org/synapse/issues/8435">#8435</a>)</li>
<li>Upgrade minimum version of <code>canonicaljson</code> to version 1.4.0, to fix an unicode encoding issue. (<a href="https://github.com/matrix-org/synapse/issues/8262">#8262</a>)</li>
<li>Fix longstanding bug which could lead to incomplete database upgrades on SQLite. (<a href="https://github.com/matrix-org/synapse/issues/8265">#8265</a>)</li>
<li>Fix stack overflow when stderr is redirected to the logging system, and the logging system encounters an error. (<a href="https://github.com/matrix-org/synapse/issues/8268">#8268</a>)</li>
<li>Fix a bug which cause the logging system to report errors, if <code>DEBUG</code> was enabled and no <code>context</code> filter was applied. (<a href="https://github.com/matrix-org/synapse/issues/8278">#8278</a>)</li>
<li>Fix edge case where push could get delayed for a user until a later event was pushed. (<a href="https://github.com/matrix-org/synapse/issues/8287">#8287</a>)</li>
<li>Fix fetching malformed events from remote servers. (<a href="https://github.com/matrix-org/synapse/issues/8324">#8324</a>)</li>
<li>Fix <code>UnboundLocalError</code> from occurring when appservices send a malformed register request. (<a href="https://github.com/matrix-org/synapse/issues/8329">#8329</a>)</li>
<li>Don't send push notifications to expired user accounts. (<a href="https://github.com/matrix-org/synapse/issues/8353">#8353</a>)</li>
<li>Fix a regression in v1.19.0 with reactivating users through the admin API. (<a href="https://github.com/matrix-org/synapse/issues/8362">#8362</a>)</li>
<li>Fix a bug where during device registration the length of the device name wasn't limited. (<a href="https://github.com/matrix-org/synapse/issues/8364">#8364</a>)</li>
<li>Include <code>guest_access</code> in the fields that are checked for null bytes when updating <code>room_stats_state</code>. Broke in v1.7.2. (<a href="https://github.com/matrix-org/synapse/issues/8373">#8373</a>)</li>
<li>Fix theoretical race condition where events are not sent down <code>/sync</code> if the synchrotron worker is restarted without restarting other workers. (<a href="https://github.com/matrix-org/synapse/issues/8374">#8374</a>)</li>
<li>Fix a bug which could cause errors in rooms with malformed membership events, on servers using sqlite. (<a href="https://github.com/matrix-org/synapse/issues/8385">#8385</a>)</li>
<li>Fix &quot;Re-starting finished log context&quot; warning when receiving an event we already had over federation. (<a href="https://github.com/matrix-org/synapse/issues/8398">#8398</a>)</li>
<li>Fix incorrect handling of timeouts on outgoing HTTP requests. (<a href="https://github.com/matrix-org/synapse/issues/8400">#8400</a>)</li>
<li>Fix a regression in v1.20.0 in the <code>synapse_port_db</code> script regarding the <code>ui_auth_sessions_ips</code> table. (<a href="https://github.com/matrix-org/synapse/issues/8410">#8410</a>)</li>
<li>Remove unnecessary 3PID registration check when resetting password via an email address. Bug introduced in v0.34.0rc2. (<a href="https://github.com/matrix-org/synapse/issues/8414">#8414</a>)</li>
</ul>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Add <code>/_synapse/client</code> to the reverse proxy documentation. (<a href="https://github.com/matrix-org/synapse/issues/8227">#8227</a>)</li>
<li>Add note to the reverse proxy settings documentation about disabling Apache's mod_security2. Contributed by Julian Fietkau (@jfietkau). (<a href="https://github.com/matrix-org/synapse/issues/8375">#8375</a>)</li>
<li>Improve description of <code>server_name</code> config option in <code>homserver.yaml</code>. (<a href="https://github.com/matrix-org/synapse/issues/8415">#8415</a>)</li>
</ul>
<h2 id="deprecations-and-removals">Deprecations and Removals</h2>
<ul>
<li>Drop support for <code>prometheus_client</code> older than 0.4.0. (<a href="https://github.com/matrix-org/synapse/issues/8426">#8426</a>)</li>
</ul>
<h2 id="internal-changes-1">Internal Changes</h2>
<ul>
<li>Fix tests on distros which disable TLSv1.0. Contributed by @danc86. (<a href="https://github.com/matrix-org/synapse/issues/8208">#8208</a>)</li>
<li>Simplify the distributor code to avoid unnecessary work. (<a href="https://github.com/matrix-org/synapse/issues/8216">#8216</a>)</li>
<li>Remove the <code>populate_stats_process_rooms_2</code> background job and restore functionality to <code>populate_stats_process_rooms</code>. (<a href="https://github.com/matrix-org/synapse/issues/8243">#8243</a>)</li>
<li>Clean up type hints for <code>PaginationConfig</code>. (<a href="https://github.com/matrix-org/synapse/issues/8250">#8250</a>, <a href="https://github.com/matrix-org/synapse/issues/8282">#8282</a>)</li>
<li>Track the latest event for every destination and room for catch-up after federation outage. (<a href="https://github.com/matrix-org/synapse/issues/8256">#8256</a>)</li>
<li>Fix non-user visible bug in implementation of <code>MultiWriterIdGenerator.get_current_token_for_writer</code>. (<a href="https://github.com/matrix-org/synapse/issues/8257">#8257</a>)</li>
<li>Switch to the JSON implementation from the standard library. (<a href="https://github.com/matrix-org/synapse/issues/8259">#8259</a>)</li>
<li>Add type hints to <code>synapse.util.async_helpers</code>. (<a href="https://github.com/matrix-org/synapse/issues/8260">#8260</a>)</li>
<li>Simplify tests that mock asynchronous functions. (<a href="https://github.com/matrix-org/synapse/issues/8261">#8261</a>)</li>
<li>Add type hints to <code>StreamToken</code> and <code>RoomStreamToken</code> classes. (<a href="https://github.com/matrix-org/synapse/issues/8279">#8279</a>)</li>
<li>Change <code>StreamToken.room_key</code> to be a <code>RoomStreamToken</code> instance. (<a href="https://github.com/matrix-org/synapse/issues/8281">#8281</a>)</li>
<li>Refactor notifier code to correctly use the max event stream position. (<a href="https://github.com/matrix-org/synapse/issues/8288">#8288</a>)</li>
<li>Use slotted classes where possible. (<a href="https://github.com/matrix-org/synapse/issues/8296">#8296</a>)</li>
<li>Support testing the local Synapse checkout against the <a href="https://github.com/matrix-org/complement/">Complement homeserver test suite</a>. (<a href="https://github.com/matrix-org/synapse/issues/8317">#8317</a>)</li>
<li>Update outdated usages of <code>metaclass</code> to python 3 syntax. (<a href="https://github.com/matrix-org/synapse/issues/8326">#8326</a>)</li>
<li>Move lint-related dependencies to package-extra field, update CONTRIBUTING.md to utilise this. (<a href="https://github.com/matrix-org/synapse/issues/8330">#8330</a>, <a href="https://github.com/matrix-org/synapse/issues/8377">#8377</a>)</li>
<li>Use the <code>admin_patterns</code> helper in additional locations. (<a href="https://github.com/matrix-org/synapse/issues/8331">#8331</a>)</li>
<li>Fix test logging to allow braces in log output. (<a href="https://github.com/matrix-org/synapse/issues/8335">#8335</a>)</li>
<li>Remove <code>__future__</code> imports related to Python 2 compatibility. (<a href="https://github.com/matrix-org/synapse/issues/8337">#8337</a>)</li>
<li>Simplify <code>super()</code> calls to Python 3 syntax. (<a href="https://github.com/matrix-org/synapse/issues/8344">#8344</a>)</li>
<li>Fix bad merge from <code>release-v1.20.0</code> branch to <code>develop</code>. (<a href="https://github.com/matrix-org/synapse/issues/8354">#8354</a>)</li>
<li>Factor out a <code>_send_dummy_event_for_room</code> method. (<a href="https://github.com/matrix-org/synapse/issues/8370">#8370</a>)</li>
<li>Improve logging of state resolution. (<a href="https://github.com/matrix-org/synapse/issues/8371">#8371</a>)</li>
<li>Add type annotations to <code>SimpleHttpClient</code>. (<a href="https://github.com/matrix-org/synapse/issues/8372">#8372</a>)</li>
<li>Refactor ID generators to use <code>async with</code> syntax. (<a href="https://github.com/matrix-org/synapse/issues/8383">#8383</a>)</li>
<li>Add <code>EventStreamPosition</code> type. (<a href="https://github.com/matrix-org/synapse/issues/8388">#8388</a>)</li>
<li>Create a mechanism for marking tests &quot;logcontext clean&quot;. (<a href="https://github.com/matrix-org/synapse/issues/8399">#8399</a>)</li>
<li>A pair of tiny cleanups in the federation request code. (<a href="https://github.com/matrix-org/synapse/issues/8401">#8401</a>)</li>
<li>Add checks on startup that PostgreSQL sequences are consistent with their associated tables. (<a href="https://github.com/matrix-org/synapse/issues/8402">#8402</a>)</li>
<li>Do not include appservice users when calculating the total MAU for a server. (<a href="https://github.com/matrix-org/synapse/issues/8404">#8404</a>)</li>
<li>Typing fixes for <code>synapse.handlers.federation</code>. (<a href="https://github.com/matrix-org/synapse/issues/8422">#8422</a>)</li>
<li>Various refactors to simplify stream token handling. (<a href="https://github.com/matrix-org/synapse/issues/8423">#8423</a>)</li>
<li>Make stream token serializing/deserializing async. (<a href="https://github.com/matrix-org/synapse/issues/8427">#8427</a>)</li>
</ul>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;2020&#x2F;10&#x2F;09&#x2F;this-week-in-matrix-2020-10-09&#x2F;" title="This Week in Matrix 2020-10-09">This Week in Matrix 2020-10-09</a></h1>
            <span>
                10.10.2020 00:28
                ‚Äî
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                ‚Äî
                
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
                
            </span>
            <br>
            <small>Last update: 09.10.2020 20:29</small>
        </header>
        <div>
            <h2 id="matrix-live">Matrix Live üéô</h2>
<iframe src="https://www.youtube.com/embed/DOHTmJFrvbM" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2 id="dept-of-status-of-matrix-face-with-th">Dept of <em>Status of Matrix</em> üå°Ô∏è</h2>
<h3 id="matrix-in-use-at-ietf-and-teamspeak">Matrix in use at IETF and TeamSpeak</h3>
<p><a href="https://matrix.to/#/@matthew:matrix.org">Matthew</a> said:</p>
<blockquote>
<p>IETF is trialling Matrix as a replacement to Slack and a complement to XMPP: <a href="https://mailarchive.ietf.org/arch/msg/tools-discuss/cUd9P35cj-nGsaioZ9HmMLmf1G4/">https://mailarchive.ietf.org/arch/msg/tools-discuss/cUd9P35cj-nGsaioZ9HmMLmf1G4/</a></p>
</blockquote>
<p>ALSO</p>
<p><a href="https://matrix.to/#/@matthew:matrix.org">Matthew</a> commented:</p>
<blockquote>
<p>looks like teamspeak is using Matrix (a Matrix endpoint was previously noticed at https://tschat-1.teamspeak.com/)</p>
</blockquote>
<p><a href="https://matrix.to/#/@deepbluev7:neko.dev">Nico (@deepbluev7:neko.dev)</a> offered:</p>
<blockquote>
<p>More info here: <a href="https://community.teamspeak.com/t/teamspeak-development-status-update/11419/36">https://community.teamspeak.com/t/teamspeak-development-status-update/11419/36</a></p>
</blockquote>
<h2 id="dept-of-spec-scroll">Dept of Spec üìú</h2>
<p><a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> told us:</p>
<blockquote>
<p>Here's your weekly spec update! The heart of Matrix is the specification - and this is modified by Matrix Spec Change (MSC) proposals. Learn more about how the process works at <a href="https://matrix.org/docs/spec/proposals">https://matrix.org/docs/spec/proposals</a></p>
<h4 id="msc-status">MSC Status</h4>
<p><strong>Merged MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2788">MSC2788: Room version 6 as the default room version</a></li>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2414">MSC2414: Make reason and score parameters optional for reporting content</a></li>
</ul>
<p><strong>MSCs in Final Comment Period:</strong></p>
<ul>
<li><em>No MSCs are in FCP.</em></li>
</ul>
<p><strong>New MSCs:</strong></p>
<ul>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2812">[WIP] MSC2812: Role-based power/permissions</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2810">MSC2810: Consistent globs specification</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2802">[WIP] MSC2802: Flip The Table for Full Room Abstraction</a></p>
</li>
</ul>
<h4 id="spec-core-team">Spec Core Team</h4>
<p>In terms of Spec Core Team MSC focus for this week, we're going to be keeping the same three MSCs as last week, as their review is still a work in progress. As a reminder, those are <a href="https://github.com/matrix-org/matrix-doc/issues/2774">MSC2774</a> (widget URL template parameters), <a href="https://github.com/matrix-org/matrix-doc/issues/2765">MSC2765</a> (widget avatars), and <a href="https://github.com/matrix-org/matrix-doc/issues/2790">MSC2790</a> (modal widgets).</p>
</blockquote>
<p><img src="/blog/img/2020-10-09--3RtA-stacked_area_chart.png" alt="2020-10-09--3RtA-stacked_area_chart.png" /></p>
<h2 id="dept-of-servers-europea">Dept of Servers üè¢</h2>
<h3 id="dendrite-goes-beta">Dendrite goes beta</h3>
<p>Dendrite is a next-generation homeserver written in Go</p>
<p><a href="https://matrix.to/#/@kegan:matrix.org">kegan</a> told us:</p>
<blockquote>
<p>Dendrite <a href="https://matrix.org/blog/2020/10/08/dendrite-is-entering-beta">has officially entered beta</a>!</p>
<p>It aims to be an efficient, reliable and scalable alternative to Synapse.</p>
<p>We encourage early adopters to try it out starting with v0.1.0 in Monolith/Postgres mode.</p>
<p>Dendrite supports a large amount of the Matrix spec including:</p>
<ul>
<li>
<p>All room versions</p>
</li>
<li>
<p>E2E encryption (but not cross-signing)</p>
</li>
<li>
<p>Federation</p>
</li>
<li>
<p>and many others!</p>
</li>
</ul>
<p>We'll be hard at work in the coming weeks ironing out any issues that crop up as Dendrite enters the global</p>
<p>federation of Matrix servers. At present, Dendrite has not been optimised for memory/CPU usage, nor does it
fully support sharding, so there is still much scope to improve the already impressive resource usage whilst</p>
<p>heading towards 100% spec compliance.</p>
<p>Spec compliance:</p>
<ul>
<li>
<p>Client-Server APIs: 56%, same as last week</p>
</li>
<li>
<p>Server-Server APIs: 77%, same as last week</p>
</li>
</ul>
</blockquote>
<p><a href="https://matrix.to/#/@rumpelsepp:hackbrettl.de">stefan</a> announced:</p>
<blockquote>
<p>I created an <a href="https://aur.archlinux.org/packages/dendrite/">AUR package</a> for dendrite. So it is easy to get it running on Arch Linux.</p>
</blockquote>
<h3 id="conduit">Conduit</h3>
<p>Conduit is a Matrix homeserver written in Rust <a href="https://conduit.rs">https://conduit.rs</a></p>
<p><a href="https://matrix.to/#/@timo:koesters.xyz">timo</a> told us:</p>
<blockquote>
<p>This week I worked on a new feature: the Admin Room. This is a room that is automatically created for the first user of a new homeserver. This room will be used to send warnings to server admins in the future and can be used to control Conduit (like querying information, running cleanup, banning servers, hiding public rooms or restarting Conduit). Power levels can be used to control who in the room has access to which commands. The admin room will work over federation, so it's easy to help someone fix his server.</p>
<p>Other news:</p>
<ul>
<li>
<p>Federation is now disabled by default and can be enabled in the config</p>
</li>
<li>
<p>Bug with typing notifications is fixed</p>
</li>
</ul>
<p>Thanks to everyone who supports me on <a href="https://liberapay.com/timokoesters">Liberapay</a> or Bitcoin!</p>
</blockquote>
<h2 id="synapse">Synapse</h2>
<p><a href="https://matrix.to/#/@neilj:matrix.org">Neil</a> told us:</p>
<blockquote>
<p>This week we put out <a href="https://github.com/matrix-org/synapse/releases/tag/v1.21.0rc3">v1.21.0rc3</a>, which fixes a duplicate messages bug. We expect the full release to go out early next week.</p>
<p>After a long and sometimes painful journey we plan to run sharded event persisters on matrix.org from Monday. All being well we will start running background processes on their own worker to free up the main process.
These two projects combined should noticeably improve performance of matrix.org and any large scale deployments.</p>
<p>Aside from that we are continuing to work on room knocking as a feature and have been considering ways to reduce load attributable to state resolution.</p>
<p>We will also dust off the notifications project.</p>
</blockquote>
<h2 id="dept-of-bridges-bridge-at-night">Dept of Bridges üåâ</h2>
<h3 id="gitter">Gitter</h3>
<p><a href="https://matrix.to/#/@madlittlemods:matrix.org">Eric Eastwood</a> told us:</p>
<blockquote>
<p>The native Gitter &lt;-&gt; Matrix bridge is underway and we're working on <a href="https://gitlab.com/gitlab-org/gitter/webapp/-/merge_requests/2027">virtual users</a> which is the first piece to making the bridge feel native. You can see what this will look like in this ominous and exciting tweet: <a href="https://twitter.com/gitchat/status/1314252991705292800">https://twitter.com/gitchat/status/1314252991705292800</a></p>
<p>There is also a <a href="https://gitlab.com/groups/gitlab-org/gitter/-/epics/10#note_426385967">GitLab epic</a> you can track which breaks down some of the tasks and holds more details of what we're thinking of for the bridge.</p>
</blockquote>
<h3 id="rainbow-once-more-into-the-bifrost">üåà Once more into the Bifrost</h3>
<p><a href="https://matrix.to/#/@Half-Shot:half-shot.uk">Half-Shot</a> announced:</p>
<blockquote>
<p>Asgardians rejoice, for Bifrost development resumed this week! We've worked extremely hard this week to improve general gateway performance, edge case bugs and basically plowing on with the project. A 0.2.0 release will shortly be due with the new changes, and matrix.org is already running the latest and greatest. You can checkout the project over at <a href="https://github.com/matrix-org/matrix-bifrost">https://github.com/matrix-org/matrix-bifrost</a></p>
</blockquote>
<h2 id="dept-of-clients-iphone">Dept of Clients üì±</h2>
<h3 id="fractal">Fractal</h3>
<p><a href="https://matrix.to/#/@afranke:matrix.org">Alexandre Franke</a> reported:</p>
<blockquote>
<p>Former Fractal GSoC intern Alejandro Dominguez üòéÔ∏è got his <a href="https://gitlab.gnome.org/GNOME/fractal/-/merge_requests/626">Integrate matrix-sdk (I)</a> merge request in ‚ÄúReady for review‚Äù state. That‚Äôs a +3910/-5439, 38 commits diff‚ÄºÔ∏è poljar, who is the main contributor of matrix-rust-sdk, already had a look and provided some insights, but given üò±Ô∏è the sheer size of the changeset, the moar üëÄÔ∏è we can get on it the better.</p>
</blockquote>
<h3 id="fluffychat">fluffychat</h3>
<p><a href="https://matrix.to/#/@krille:janian.de">krille</a> offered:</p>
<blockquote>
<p>FluffyChat now runs on native Linux desktop (x86).</p>
<p>You can download Linux tarballs from the CI and run them on any system which has sqlite3 installed (which all distros may have). If you have libolm3 installed, you can also use e2ee.
Oh and by the way. Its NOT electron or any html5 stuff! Its a native Linux app.
We are working on packaging solutions like snap and Flatpak. üòä</p>
</blockquote>
<h3 id="vtx">Vtx</h3>
<p><a href="https://matrix.to/#/@craftedcart:matrix.org">CraftedCart</a> offered:</p>
<blockquote>
<p>I've started to make a Matrix client over the past few weeks, just as a hobby project for now, using Qt and a 'lil C++20! :D</p>
<p>There's not a whole lot to show right now - currently we've got password login, and a simple timeline that can show plain text or <code>m.image</code> thumbnails.</p>
<p>Source code's up at <a href="https://gitlab.com/CraftedCart/vtx">https://gitlab.com/CraftedCart/vtx</a></p>
</blockquote>
<p><img src="/blog/img/2020-10-09-TATmq-vtx_main.png" alt="2020-10-09-TATmq-vtx_main.png" /></p>
<h3 id="nheko">Nheko</h3>
<p><a href="https://github.com/Nheko-Reborn/nheko">Nheko</a> is a desktop client using Qt, Boost.Asio and C++17. It supports E2EE (with the notable exception being device verification for now) and intends to be full featured and nice to look at</p>
<p><a href="https://matrix.to/#/@deepbluev7:neko.dev">Nico (@deepbluev7:neko.dev)</a> reported:</p>
<blockquote>
<p>This week we finally cleaned up the remaining parts of Chethans GSoC work and merged it. This means Nheko now has partial support for cross-signing. You can either start the verification from another client or when viewing the profile of a user. There are a few things still missing though:</p>
<ul>
<li>
<p>Nheko does not use the verification status at all at the moment. So while you can verify your master key and let others verify your master key, from Nhekos perspective there is not much benefit yet. You will however show up with a green checkmark in other clients.</p>
</li>
<li>
<p>While nheko supports verifying your own master key and after that will also let others verify your master key, it does not yet download the self and user signing keys. This means you won't be able to upload cross-signing signatures for your own devices and other users master keys yet. I'll see if I can implement in the next weeks or so (since literally only the private key download or sharing is missing).</p>
</li>
<li>
<p>Nheko can't bootstrap cross-signing yet. This means you need to bootstrap it from Element or another client once. That will probably take a bit until this is complete.</p>
</li>
<li>
<p>The UX is still WIP. Currently it shows a lot of unnecessary buttons, that are a bit confusing as well as not enough green checkmarks, so that needs some work.</p>
</li>
</ul>
<p>Other things that happened in the mean time or are work in progress:</p>
<ul>
<li>
<p>Decryption errors should be reduced by a bit now. This is still work in progress though. With device trust landed now, we should be able to do automatic key requests, sharing and key backup soon.</p>
</li>
<li>
<p>Lurkki is currently cleaning up the design of the built in video player.</p>
</li>
<li>
<p>manu_kamath is improving the design when showing images at the same time.</p>
</li>
<li>
<p>LorenDB has been updating our screenshots and working on an Esperanto translation.</p>
</li>
<li>
<p>trilene has been ever busy improving edge cases around the Voip support in Nheko.</p>
</li>
</ul>
<p>So far Hacktoberfest seems to be going well with quite a few people trying to clean up some of the rougher edges in Nheko. If you are using Nheko and think some things could be better, why not try to fix it yourself? October is the perfect time for that!</p>
<p>Featurework of this cycle is also slowly nearing its end. Once cross-signing, voip and the new event store are stable, we plan to improve the UX a bit more as well as some other annoyances and maybe we can do a new release then! A nice and spooky Hacktober everyone!</p>
</blockquote>
<p><a href="https://matrix.to/#/@davebloggt:kif.rocks">David Mehren</a> told us:</p>
<blockquote>
<p>I just built <code>nheko-git 0.7.2.r2021.517a126a-1</code> from the AUR and cross-signing works</p>
</blockquote>
<h3 id="element-web">Element Web</h3>
<p><a href="https://matrix.to/#/@neilj:matrix.org">Neil</a> offered:</p>
<blockquote>
<p>This week we put out 1.7.9-rc.1 which is available at¬†<a href="https://staging.element.io">https://staging.element.io</a></p>
<p>Highlights include</p>
<ul>
<li>
<p>Many small fixes with edits and replies</p>
</li>
<li>
<p>Fixed a race during cross-signing key upload at registration time</p>
</li>
<li>
<p>Clarified when you have unsaved changes in profile settings</p>
</li>
</ul>
<p>Finally, the improved widget support is looking very exciting. Here is a design grab to give you an idea of what to expect. Note this is not a real Element screen shot, the base functionality is there, but the look and feel of the final version is subject to change.</p>
</blockquote>
<p><img src="/blog/img/2020-10-09-oANj9-widgets.png" alt="2020-10-09-oANj9-widgets.png" /></p>
<p><a href="https://matrix.to/#/@x:riot.ovh">Michael (t3chguy)</a> added:</p>
<blockquote>
<p>Element Web is currently transitioning the codebase over to TypeScript - track our progress at <a href="http://arewetsyet.bit.ovh/">http://arewetsyet.bit.ovh/</a></p>
</blockquote>
<h3 id="hydrogen">Hydrogen</h3>
<p><a href="https://matrix.to/#/@bwindels:matrix.org">Bruno</a> told us:</p>
<blockquote>
<p>This week, Hydrogen gained better caching (and a little over-eager on Safari), room list filtering, a grid layout to show up to 6 rooms simultaneously (see screenshot) and work is well on its way for url-based navigation within the app.</p>
</blockquote>
<p><img src="/blog/img/2020-10-09-taU-L-hydrogen-grid.png" alt="2020-10-09-taU-L-hydrogen-grid.png" /></p>
<blockquote>
<p>also adding the screenshot on iOS that I didn't get in last week, showing the full range of display formats supported üôÇ</p>
</blockquote>
<p><img src="/blog/img/2020-10-09-OJHmu-hydrogen-ios.jpg" alt="2020-10-09-OJHmu-hydrogen-ios.jpg" /></p>
<blockquote>
<p>The app also received some visual polish, thanks to Nad, our designer.</p>
</blockquote>
<h3 id="element-ios">Element-iOS</h3>
<p><a href="https://matrix.to/#/@Manu:matrix.org">Manu</a> offered:</p>
<blockquote>
<p>We blocked the last week release (1.0.14) because of 2 issues: <a href="https://github.com/vector-im/element-ios/issues/3721">Unable to decrypt errors</a> and <a href="https://github.com/vector-im/element-ios/issues/3672#issuecomment-703510893">timeline not updating when coming from a notification</a>.</p>
<p><a href="https://github.com/vector-im/element-ios/releases/tag/v1.0.15">1.0.15</a> fixes those issues and more. The release should be available in TF soon. Hopefully, we will be able to publish it on the App Store on Monday</p>
</blockquote>
<h2 id="dept-of-voip-call-me-hand">Dept of VoIP ü§ô</h2>
<h3 id="matrix-voip-tester">Matrix VoIP Tester</h3>
<p><a href="https://matrix.to/#/@reivilibre:librepush.net">reivilibre</a> said:</p>
<blockquote>
<p><a href="https://github.com/matrix-org/voip-tester/pull/18">https://github.com/matrix-org/voip-tester/pull/18</a> (updated demo: <a href="https://test.voip.librepush.net">https://test.voip.librepush.net</a>)</p>
<p>This week, I have improved the scoring rubric, so that the verdict given to you by the tester more accurately reflects the likelihood of connection establishment.</p>
<p>I have also added more hints on what the verdicts mean.</p>
<p>Finally, I have added workarounds to support Chromium browsers that decided to break their WebRTC API so that they could pedantically rename <code>ip</code> to <code>address</code>. In any case, it now seems to be on par with Firefox.</p>
<p>The VoIP tester is now roughly 'usable' but please note that IPv6 support is totally untested (I don't have IPv6) ‚Äî it is also suspected that some browsers won't try IPv6 anyway.</p>
<p>There are also some more features on the wish list, such as screenshot safety and extra help when things go wrong.</p>
<p>For discussion, feel free to join <a href="https://matrix.to/#/#voip-tester:librepush.net">#voip-tester:librepush.net</a> .</p>
</blockquote>
<h2 id="dept-of-encryption-closed-lock-with-key">Dept of Encryption üîê</h2>
<h3 id="olm-lizard">Olm ü¶é</h3>
<p><a href="https://matrix.to/#/@hubert:uhoreg.ca">uhoreg</a> reported:</p>
<blockquote>
<p>Versions 3.2.0 and 3.2.1 of libolm have been released.  3.2.0 supports fallback keys (<a href="https://github.com/matrix-org/matrix-doc/pull/2732">MSC2732</a>) in the C library and the JavaScript binding, and includes several JavaScript/TypeScript fixes and improvements.  3.2.1 was just a fix to the TypeScript definition file.</p>
</blockquote>
<h2 id="dept-of-sdks-and-frameworks">Dept of SDKs and Frameworks üß∞</h2>
<h3 id="ruma">Ruma</h3>
<p>Ruma is a Rust project to create a comprehensive set of APIs for Matrix. Previously there was a Ruma homeserver project.</p>
<p><a href="https://matrix.to/#/@jplatte:matrix.org">jplatte</a> said:</p>
<blockquote>
<p>This week, q-b <a href="https://github.com/ruma/ruma/pull/289">implemented</a> moderation policy events, bringing us to full compatibility with r0.6.1 of the client-server API. iinuwa <a href="https://github.com/ruma/ruma/pull/288">added</a> the only endpoint we were missing from the appservice API. Additionally, I <a href="https://github.com/ruma/ruma/pull/286">improved</a> Ruma's JSON canonicalization, making it both simpler and more efficient.</p>
<p>Due to <a href="https://github.com/ruma/ruma/issues/215">two</a> <a href="https://github.com/ruma/ruma/issues/171">issues</a> regarding future-compatibility, we're still a while away from our next set of releases, but we're working on it!</p>
</blockquote>
<h3 id="new-library-objmatrix-objective-c">New library: ObjMatrix (Objective-C)</h3>
<p><a href="https://mtrix.to/#/@js:nil.im">js</a> introduced it with:</p>
<blockquote>
<p><a href="https://fossil.nil.im/objmatrix">ObjMatrix</a> (<a href="https://github.com/ObjFW/ObjMatrix">GitHub</a>) is a new Matrix client library written in modern Objective-C for <a href="https://objfw.nil.im/">ObjFW</a>. Because it uses ObjFW, it is not limited to Apple platforms, and instead is <a href="https://objfw.nil.im/doc/trunk/PLATFORMS.md">extremely portable</a> and should run on basically everything.</p>
<p>This is currently in its very early stages and is intended to be suitable to develop bots and clients with very soon. Being suitable to develop bridges with it is another goal for later.</p>
<p>Since ObjFW also works on platforms that are usually hard to support or port software to (e.g. <a href="https://www.morphos-team.net/">MorphOS</a>), this will hopefully also bring clients for these less mainstream operating systems. I'm especially hopeful about MorphOS here, since ObjFW already runs quite well there (parts of it are included with the OS even!), and hardware on which MorphOS runs on is usually not powerful enough to run Element Web. And eventually, I will want to have a Matrix client on my Amiga, too üòâ (which this should enable).</p>
<p>This currently does not have a decicated Matrix room yet, so all discussions about it currently happen in <a href="https://matrix.to/#/#objfw:nil.im">#objfw:nil.im</a>. So please feel free to join there and follow along development. And contributions are of course <em>very</em> welcome!</p>
</blockquote>
<h2 id="dept-of-ops">Dept of Ops üõ†</h2>
<h3 id="famedly-matrix-ansible-collection">famedly.matrix ansible collection</h3>
<p><a href="https://matrix.to/#/@jan.christian:gruenhage.xyz">JCG</a> told us:</p>
<blockquote>
<p>the <code>famedly.matrix</code> ansible collection has seen a release v0.2.0. Highlights since the last TWIM mention:</p>
<ul>
<li>
<p><strong>synapse_register</strong>: a new module for registering users using synapse's admin API.</p>
</li>
<li>
<p><strong>matrix_member</strong>: another new module, for inviting/kicking/banning people to/from rooms.</p>
</li>
<li>
<p>updates to synapse and element have been merged into their roles</p>
</li>
<li>
<p>support deploying release candidates of synapse and element</p>
</li>
</ul>
</blockquote>
<h2 id="dept-of-guides">Dept of Guides üß≠</h2>
<h3 id="noteworthy-hub-guide">Noteworthy Hub Guide</h3>
<p><a href="https://matrix.to/#/@balaa:a.noteworthy.im">balaa</a> told us:</p>
<blockquote>
<p>We‚Äôve put together a write up on how to deploy a Noteworthy Hub (transparent TLS proxy) in order to make it easy to run a federation capable matrix home server behind a firewall or NAT: <a href="https://noteworthy.tech/hub">https://noteworthy.tech/hub</a></p>
</blockquote>
<h2 id="dept-of-ping-table-tennis-paddle-and-ball">Dept of Ping üèì</h2>
<p>Here we reveal, rank, and applaud the homeservers with the lowest ping, as measured by <a href="https://github.com/maubot/echo">pingbot</a>, a <a href="https://github.com/maubot/maubot">maubot</a> that you can host on your own server. Join <a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">helderferreira.io</td><td style="text-align: center">487</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">heitkoetter.net</td><td style="text-align: center">627</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">asra.gr</td><td style="text-align: center">802</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">conduit.rs</td><td style="text-align: center">1178</td></tr>
<tr><td style="text-align: center">5</td><td style="text-align: center">matrix.thedisco.zone</td><td style="text-align: center">1275.5</td></tr>
<tr><td style="text-align: center">6</td><td style="text-align: center">shortestpath.dev</td><td style="text-align: center">1803</td></tr>
<tr><td style="text-align: center">7</td><td style="text-align: center">lelux.net</td><td style="text-align: center">2419</td></tr>
<tr><td style="text-align: center">8</td><td style="text-align: center">elcyb.org</td><td style="text-align: center">2685</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">test.zemos.net</td><td style="text-align: center">2800</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">blob.cat</td><td style="text-align: center">2882</td></tr>
</tbody></table>
<h2 id="that-s-all-i-know-checkered-flag">That's all I know üèÅ</h2>
<p>Thanks anoa for TCB* the last two weeks! Was fun to be the one to read TWIM for myself. :D</p>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>
<p>* Taking Care of Business</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;2020&#x2F;10&#x2F;08&#x2F;dendrite-is-entering-beta&#x2F;" title="Dendrite is entering Beta!">Dendrite is entering Beta!</a></h1>
            <span>
                08.10.2020 00:00
                ‚Äî
                <a href="/category/releases">
                    Releases
                </a>
                ‚Äî
                
                <a href="/author/matthew-hodgson">
                    Matthew Hodgson
                </a>
                
            </span>
            
        </header>
        <div>
            <p>Hi all,</p>
<p>We‚Äôre very excited to announce that Dendrite, the next-generation Matrix homeserver from the core Matrix team, is at last exiting alpha development and entering beta testing!</p>
<p>The path we‚Äôve taken to get here has been quite a curious one, and it‚Äôs worth recapping to give context on why it‚Äôs taken reality a little while to catch up with the dream. :)</p>
<p>The Dendrite project has its roots in 2016 as <a href="https://github.com/matrix-org/dendron">Dendron</a>: an attempt to write a next-generation homeserver in Golang rather than Python, in order to benefit from Go‚Äôs stronger typing, ease of profiling (no twisted stack-shredding via deferredInlineCallbacks), multithreading and faster GC performance.  The idea for Dendron was to do a <a href="https://martinfowler.com/bliki/StranglerFigApplication.html">strangler pattern</a> rewrite of Synapse - where we‚Äôd insert Dendron in front of Synapse as a load balancer, and incrementally replace Synapse‚Äôs API endpoints with ones implemented by Dendron.</p>
<p>However, as the project started to progress, it became clear that this was going to end up with many of Synapse‚Äôs architectural choices being baked into the project - particularly the DB schema and data flow architecture, such that the new endpoints could interoperate with the existing Python ones.  We got as far as putting Dendron live on matrix.org and moving some of the login/registration APIs over to it‚Ä¶ but then work fizzled out due to Synapse demanding more urgent attention as traffic grew on Matrix.org, combined with concerns about whether Dendron was the right approach in general.</p>
<p>So, towards the end of 2016 (after the rush to launch <del>Vector</del> <del>Riot</del> Element that summer), we went back to the drawing board to devise Dendrite‚Äî‚ÄúDendron done right!‚Äù‚Äîas opposed to Dendron, which in retrospect was Dendrite done wrong. ;) The new vision was:</p>
<ul>
<li>Build a massively horizontally scalable architecture, such that large Matrix deployments like matrix.org and big government deployments could run smoothly without the constant scalability headaches we were seeing at the time with Synapse</li>
<li>Do so by splitting the server into well-defined microservice components, each of which could independently horizontally scale, each with its own DB (if desired)</li>
<li>Connect the components together with a set of append-only logs via <a href="https://kafka.apache.org/">Kafka</a> or similar, easily letting components shard and maintain their databases from the logs, allowing rolling upgrades, possibly schema upgrades, and all sorts of other niceties.  The logs effectively become a primary source of truth rather than putting all the onus on a massive monolithic ever-growing database</li>
</ul>
<p>Rather than Dendron‚Äôs top-down approach, instead Dendrite started bottom-up with the very hardest bit: <a href="https://github.com/matrix-org/gomatrixserverlib">gomatrixserverlib</a>, a standalone Go library implementing the state resolution algorithms and performing federation requests (such that it might also someday be used as a general purpose way to add Matrix federation support to an existing Go codebase).</p>
<p>Then we started building out the various components to implement the various services, starting with the roomserver (the service which models the history and state of one or more rooms in the server), then the syncserver (the service which implements the /sync API to let clients receive messages), etc. We even implemented a simplified in-memory version of Kafka named <a href="https://github.com/matrix-org/naffka">naffka</a>‚Äîuseful for glueing together the microservice components when running them all within a single binary.</p>
<p>Things were looking pretty positive by the summer of 2017: we had the server sending/receiving messages, federating with Synapse, and looking tantalisingly close:</p>
<blockquote>
<p lang="en" dir="ltr">We just sent the first ever synapse-&gt;dendrite federated traffic, including full dendrite media API (thumbnailing, fed, etc)!!! :D :D :D <a href="https://t.co/sBcM2jMAr6">pic.twitter.com/sBcM2jMAr6</a></p>&mdash; Matrix (@matrixdotorg) <a href="https://twitter.com/matrixdotorg/status/872861579141947392?ref_src=twsrc%5Etfw">June 8, 2017</a>
</blockquote>
<p>However, we then hit three fairly major obstacles:</p>
<ul>
<li><a href="https://matrix.org/blog/2017/07/07/a-call-to-arms-supporting-matrix">Matrix lost its funding</a></li>
<li>In the ensuing uncertainty, the two lead developers (Mjark &amp; Kegan) went to work elsewhere</li>
<li>Meanwhile, Matrix uptake was starting to explode and Synapse was failing to scale to handle the traffic on matrix.org (and elsewhere)</li>
</ul>
<p>At first, having formed what would become New Vector (now Element) to keep the rest of the core team hired, we pushed to see if we could get Dendrite finished fast enough to replace Synapse, with Erik &amp; richvdh jumping over from Synapse to pick up the remaining work.  However, it became clear that we urgently needed a quicker solution to address all the overloaded Synapses out there, and so they swung back to focus on improving Synapse (taking inspiration from some of the design of Dendrite - e.g. offloading endpoints onto worker processes connected via replication streams, and using <a href="https://opentracing.io/">OpenTracing</a> to debug traffic as it flows over the various services).</p>
<p>At this point, Dendrite maintenance was in effect valiantly taken over by the community, with Brendan and later Anoa keeping the ball going in 2017, joined by APWhitehat in GSoC 2018 and cnly in GSoC 2019.  The fact that Dendrite is now here today is thanks in no small part to their work to keep the project alive in its ‚Äúwilderness years‚Äù between Sept 2017 and Dec 2019.</p>
<p>Meanwhile, it became clear that we were overdue getting Matrix itself out of beta - and the last thing we wanted to do was to split and dilute the implementation work of Matrix 1.0 over both Synapse and Dendrite - so we consciously made the decision to focus all our effort on Synapse for solving the remaining bugs and challenges.</p>
<p>Then, in July 2019, <a href="https://matrix.org/blog/2019/06/11/introducing-matrix-1-0-and-the-matrix-org-foundation">Matrix and Synapse exited beta</a>, and we finally started to see light at the end of the tunnel.  In October we started dusting off Dendrite again - looking to use it as a relatively simple and flexible codebase for <a href="https://youtu.be/eA0KnTt4O7E?t=1423">experimenting with Peer-to-Peer Matrix</a>, not least because being Go it can compile to WebAssembly and run clientside, and because even though Dendrite was originally built with massive deployments in mind, it turns out the elastic scaling means it can also scale down pretty small too‚Äîas a part of the <a href="http://testflight.apple.com/join/Tgh2MEk6">iOS P2P demo</a>, we‚Äôve even ran full Dendrite homeservers on iPhones embedded into Element iOS! :)</p>
<p>In Dec 2019, we finally got to the point where Element could fund full-time dedicated development on Dendrite once again, with Neil Alexander joining the project and focusing fulltime on getting Dendrite out of alpha and getting it working for P2P and embedded usage (adding libp2p as a federation transport, and adding SQLite support) - and in Jan 2020 we got Dendrite <a href="https://archive.fosdem.org/2020/schedule/event/dip_p2p_matrix/">successfully running clientside in a WASM service worker</a> (just in time for FOSDEM!). Then, in Feb 2020, Kegan returned to the project to work fulltime on Dendrite - and the race began in earnest to get Dendrite ready for beta!</p>
<p>Here‚Äôs a pretty picture courtesy of GitHub to visualise the progress:</p>
<p><img src="/blog/img/2020-10-08-dendrite-contributors.png" alt="020-10-08-dendrite-contributors.png" /></p>
<p>Throughout 2020 there‚Äôs been a huge amount of stabilisation work and polish:</p>
<ul>
<li>Refactoring much of Dendrite‚Äôs foundation to make the codebase more maintainable</li>
<li>Created all-new user server, key server, signing key server microservices</li>
<li>Moving some work from existing microservices (ultimately superseding the former currentstateserver, publicroomsapi and typingserver microservices altogether)</li>
<li>Developing new testing infrastructure:
<ul>
<li><a href="https://github.com/matrix-org/complement">Complement</a> - our brand new Golang Matrix integration test harness</li>
<li><a href="https://github.com/matrix-org/dendrite/blob/master/are-we-synapse-yet.py">Are We Synapse Yet</a> - an aggregator which parses sytest/complement output to compare how close Dendrite is to passing</li>
</ul>
</li>
<li>All the Matrix 1.0 work - particularly state res v2 &amp; room version support</li>
<li>Making it work with more P2P transports for <a href="https://matrix.org/blog/2020/06/02/introducing-p-2-p-matrix/">all the exciting P2P experiments</a></li>
<li>Supporting backfill and fetching missing events</li>
<li>Fixing up SQLite support to make it work as a first class citizen (with shared storage code where we can!)</li>
<li>Supporting both sending and rejecting invites (even over federation)</li>
<li>E2E encryption support (one-time keys, device lists, send-to-device support)</li>
<li>Improved federation sender logic (resend retries, backoffs, blacklisting, metrics, resetting backoffs when receiving transactions)</li>
<li>Handling both inbound and outbound redactions</li>
<li>User interactive authentication (and implemented on various ‚Äòsudo‚Äô endpoints e.g. deleting devices and changing passwords)</li>
<li>Respecting server ACLs</li>
<li>Rejecting / soft-failing events properly</li>
<li>Support for database schema upgrades</li>
</ul>
<p>... which brings us at last to the present day (Oct 2020), as we declare Dendrite sufficiently stable that we consider it ready for beta testing!</p>
<p>In practice, this means **Dendrite is now ready for experimentation by adventurous Matrix sysadmins. It is <em>NOT</em> ready for production usage yet, but we need folks to test it and help us iron out the remaining bugs!  **Please do not trust it with sensitive data yet, and we don‚Äôt recommend trying to run it at scale yet as we haven‚Äôt done any serious optimisation work yet.</p>
<p>That said, we do provide the following guarantees:</p>
<ul>
<li>We‚Äôre providing versioned releases from here on in, beginning with <a href="https://github.com/matrix-org/dendrite/releases/tag/v0.1.0">0.1.0</a></li>
<li>We don‚Äôt expect any major breaking changes to the config or architecture before 1.0</li>
<li>Ready for early adopters to try running Dendrite without experiencing ~daily breaking churn</li>
<li>The database schema is now stable and will upgrade itself going forwards - your database should now be here to stay! (assuming we don‚Äôt hit any nasty data loss bugs during beta)</li>
</ul>
<p>In terms of comparison with Synapse, the main things you should get excited about are:</p>
<ul>
<li>Dendrite aims to provide an <strong>efficient</strong>, <strong>reliable</strong> and <strong>scalable</strong> alternative to Synapse:
<ul>
<li>Efficient: A small memory footprint with better baseline performance than an out-of-the-box Synapse</li>
<li>Reliable: Implements the Matrix specification as written, using the <a href="https://github.com/matrix-org/sytest">same test suite</a> as Synapse as well as a <a href="https://github.com/matrix-org/complement">brand new Go test suite</a></li>
<li>Scalable: can run on multiple machines and eventually scale to massive homeserver deployments</li>
</ul>
</li>
<li>This means significantly less memory usage than Synapse (depends on joined rooms, often between 50MB - 400MB resident memory) - although we haven‚Äôt tuned this at all yet!</li>
<li>All-new database model, where every microservice instance has its own database tables, letting them scale arbitrarily wide</li>
<li>The ability to efficiently use all your available CPU cores without needing to split into separate processes, thanks to Go and our extensive use of goroutines.  No more Python global interpreter lock! :)</li>
<li>Future experimental MSCs are likely to land in Dendrite before Synapse (e.g <a href="https://github.com/matrix-org/matrix-doc/blob/matthew/msc2753/proposals/2753-peeking-via-sync-v2.md">MSC2753 Peeking via /sync</a> and <a href="https://github.com/matrix-org/matrix-doc/blob/matthew/msc2444/proposals/2444-peeking-over-federation-peek-api.md">MSC2444 Peeking over Federation</a> are already being prototyped (<a href="https://github.com/matrix-org/dendrite/pull/1370">#1370</a> and <a href="https://github.com/matrix-org/dendrite/pull/1391">#1391</a>) in Dendrite rather than Synapse!)</li>
</ul>
<p>The provisos you should know about however are:</p>
<ul>
<li>We‚Äôre not feature complete yet: sytest reports 56% CS API coverage and 77% Federation coverage. <strong>NB: these are always going to be underestimates of how much Dendrite actually performs due to how the tests are spread out, in actuality it‚Äôs likely more 70% CS, 95% Fed.</strong></li>
<li>No read receipts, membership lazy-loading, presence, push notifications, search, event context, key backups, cross-signing. See changelog for full limitations.</li>
<li>Not battle-tested in the wild by many people (there are probably only ~10 dendrites on the open network today!) - so there‚Äôs likely to be a broad spectrum of bugs at first.</li>
<li>Clients that require more exotic features, like lazy loading, may not behave properly yet</li>
<li>Please <strong>use Postgres rather than SQLite wherever possible</strong>‚Äîit‚Äôs faster and has fewer issues regarding concurrency (some requests on SQLite Dendrites may 500 with ‚Äòdatabase is locked‚Äô - though we‚Äôve worked hard to eliminate most of these)</li>
<li>Dendrite can run in either ‚Äúmonolith‚Äù or ‚Äúpolylith‚Äù mode. In monolith, all the microservices are linked into a single binary - and <strong>we recommend running in this configuration wherever possible</strong> for now. Monolith mode is <em>extremely</em> capable as it is and has fewer moving parts for things to go wrong and will be the right choice for the majority of beta deployments!</li>
<li>Whilst Dendrite is nearly 100% federation compatible, there may still be situations where it will split-brain and disagree with the current room state that Synapse has calculated. We expect these issues to resolve as we get more user feedback.</li>
</ul>
<p>Architecture-wise, this is what Dendrite looks like under the hood today:</p>
<p><img src="/blog/img/2020-10-08-dendrite-arch.svg" alt="2020-10-08-dendrite-arch.svg" /></p>
<p>To get up and running, please install Go and head on over to the Get Started guide at <a href="https://github.com/matrix-org/dendrite#get-started">https://github.com/matrix-org/dendrite#get-started</a> to join the fun :)</p>
<p>In terms of where we‚Äôre going next:</p>
<ul>
<li>Read receipts. It‚Äôs a major missing feature and impacts UX significantly.</li>
<li>100% Federation coverage (according to sytest). It‚Äôs crucial that Dendrite instances play nicely with other servers. This will be the best metric we have for asserting that we are just as capable as Synapse at the fed level.</li>
<li>Optimisation‚Äî<strong>Dendrite has not been optimised yet for speed or resource utilisation!</strong>
<ul>
<li>We plan to add benchmarks which will stress test different microservices in the presence of many different scaling factors (number of users, number of rooms, size of room, number of devices per user, number of sync requests, etc). This will hopefully allow us to identify early on bottlenecks and slow algorithms</li>
<li>Good old fashioned pprof with known slow scenarios to see what‚Äôs consuming CPU/memory and fixing issues ad-hoc (which we‚Äôve already done a bit of pre-beta). This may involve adding additional in-memory caches, with a healthy respect for the complexities it may introduce (which Synapse has been bitten by)</li>
</ul>
</li>
<li>We plan to add first class feature flag support for experimental MSCs‚Äîexperimentation is one thing which makes Dendrite notably different from Synapse, and supporting it more thoroughly going forwards will be important. This may mean adding additional hooks; potentially a dedicated microservice to cleanly separate experiments, we don‚Äôt know yet</li>
<li>P2P work will continue with vigour now we have a working, featureful, and relatively stable HS to embed and play with</li>
</ul>
<p>Longer term, it‚Äôs pretty hard to say right now when we expect to exit beta (it took Synapse 5 years to exit beta, after all ;) - but obviously we‚Äôll need Dendrite to have parity with Synapse and have no known serious bugs.</p>
<p>Finally: you‚Äôre probably wondering what this means for Synapse.  Synapse is here to stay - with tens of thousands of deployments around the world serving tens of millions of users.  The majority of the core team is still focused on improving and optimising Synapse, and we‚Äôll be keeping improving it for the foreseeable.</p>
<p>However, we‚Äôll certainly be experimenting with new stuff on Dendrite first - whether that‚Äôs P2P, portable accounts, new-style communities, peeking etc.  We expect Synapse to be the stable long-term-supported solution, while Dendrite (particularly while in beta) will be the more unstable and experimental platform. In the longer term we‚Äôll provide ways of migrating from Synapse to Dendrite however (probably via portable accounts), and perhaps in future new deployments may choose to use Dendrite - a bit like you might choose to use nginx rather than Apache for a new web server these days. But this will be a long transition‚Äîmeanwhile we expect to see more and more next-generation homeservers like <a href="http://conduit.rs/">Conduit</a>, <a href="https://gitlab.com/mascarene/mascarene">Mascarene</a> or <a href="https://github.com/matrix-construct/construct">Construct</a> coming of age too.</p>
<p>So, there you have it. If you‚Äôre an intrepid sysadmin please spin up a Dendrite and start filing bugs! :)</p>
<p>‚Äî Matthew, Neil Alexander, Kegan and the whole Matrix team.</p>
<p>Here‚Äôs the official changelog:</p>
<h3 id="client-server-api-features">Client-Server API Features</h3>
<h4 id="account-registration-and-management">Account registration and management</h4>
<ul>
<li>Registration: By password only.</li>
<li>Login: By password only. No fallback.</li>
<li>Logout: Yes.</li>
<li>Change password: Yes.</li>
<li>Link email/msisdn to account: No.</li>
<li>Deactivate account: Yes.</li>
<li>Check if username is available: Yes.</li>
<li>Account data: Yes.</li>
<li>OpenID: No.</li>
</ul>
<h4 id="rooms">Rooms</h4>
<ul>
<li>Room creation: Yes, including presets.</li>
<li>Joining rooms: Yes, including by alias or <code>?server_name=</code>.</li>
<li>Event sending: Yes, including transaction IDs.</li>
<li>Aliases: Yes.</li>
<li>Published room directory: Yes.</li>
<li>Kicking users: Yes.</li>
<li>Banning users: Yes.</li>
<li>Inviting users: Yes, but not third-party invites.</li>
<li>Forgetting rooms: No.</li>
<li>Room versions: All (v1 - v6)</li>
<li>Tagging: Yes.</li>
</ul>
<h4 id="user-management">User management</h4>
<ul>
<li>User directory: Basic support.</li>
<li>Ignoring users: No.</li>
<li>Groups/Communities: No.</li>
</ul>
<h4 id="device-management">Device management</h4>
<ul>
<li>Creating devices: Yes.</li>
<li>Deleting devices: Yes.</li>
<li>Send-to-device messaging: Yes.</li>
</ul>
<h4 id="sync">Sync</h4>
<ul>
<li>Filters: Timeline limit only. Rest unimplemented.</li>
<li>Deprecated <code>/events</code> and <code>/initialSync</code>: No.</li>
</ul>
<h4 id="room-events">Room events</h4>
<ul>
<li>Typing: Yes.</li>
<li>Receipts: No.</li>
<li>Read Markers: No.</li>
<li>Presence: No.</li>
<li>Content repository (attachments): Yes.</li>
<li>History visibility: No, defaults to <code>joined</code>.</li>
<li>Push notifications: No.</li>
<li>Event context: No.</li>
<li>Reporting content: No.</li>
</ul>
<h4 id="end-to-end-encryption">End-to-End Encryption</h4>
<ul>
<li>Uploading device keys: Yes.</li>
<li>Downloading device keys: Yes.</li>
<li>Claiming one-time keys: Yes.</li>
<li>Querying key changes: Yes.</li>
<li>Cross-Signing: No.</li>
</ul>
<h4 id="misc">Misc</h4>
<ul>
<li>Server-side search: No.</li>
<li>Guest access: Partial.</li>
<li>Room previews: No, partial support for Peeking via MSC2753.</li>
<li>Third-Party networks: No.</li>
<li>Server notices: No.</li>
<li>Policy lists: No.</li>
</ul>
<h3 id="federation-features">Federation Features</h3>
<ul>
<li>Querying keys (incl. notary): Yes.</li>
<li>Server ACLs: Yes.</li>
<li>Sending transactions: Yes.</li>
<li>Joining rooms: Yes.</li>
<li>Inviting to rooms: Yes, but not third-party invites.</li>
<li>Leaving rooms: Yes.</li>
<li>Content repository: Yes.</li>
<li>Backfilling / get_missing_events: Yes.</li>
<li>Retrieving state of the room (<code>/state</code> and <code>/state_ids</code>): Yes.</li>
<li>Public rooms: Yes.</li>
<li>Querying profile data: Yes.</li>
<li>Device management: Yes.</li>
<li>Send-to-Device messaging: Yes.</li>
<li>Querying/Claiming E2E Keys: Yes.</li>
<li>Typing: Yes.</li>
<li>Presence: No.</li>
<li>Receipts: No.</li>
<li>OpenID: No.</li>
</ul>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;2020&#x2F;10&#x2F;02&#x2F;this-week-in-matrix-2020-10-02&#x2F;" title="This Week in Matrix 2020-10-02">This Week in Matrix 2020-10-02</a></h1>
            <span>
                02.10.2020 00:00
                ‚Äî
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                ‚Äî
                
                <a href="/author/andrew-morgan">
                    Andrew Morgan
                </a>
                
            </span>
            
        </header>
        <div>
            <h2 id="matrix-live">Matrix Live üéô</h2>
<iframe src="https://www.youtube.com/embed/J7aNMUg3pvA" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>Don't forget that Matrix Live is also available in podcast form. Search for &quot;Matrix Live&quot; wherever you get your podcasts.</p>
<h2 id="dept-of-status-of-matrix-face-with-th">Dept of <em>Status of Matrix</em> üå°Ô∏è</h2>
<h3 id="gitter-enters-the-matrix">Gitter Enters the Matrix</h3>
<p><a href="https://matrix.to/#/@Half-Shot:half-shot.uk">Half-Shot</a> reported:</p>
<blockquote>
<p>Gitter is joining the Matrix ecosystem!</p>
</blockquote>
<p>It's true! Element has acquired Gitter from GitLab and will be implementing
Gitter's current chat features in Matrix, before rebuilding Gitter as a Matrix
client! Before all that however, the first step is to build a proper, modern
bridge between the two networks, replacing the old one that's been around for
years.</p>
<p>The full spectrum of news is:</p>
<ul>
<li><a href="https://matrix.org/blog/2020/09/30/welcoming-gitter-to-matrix">The Matrix.org blog post</a></li>
<li><a href="https://element.io/blog/gitter-is-joining-element/">The Element blog post</a></li>
<li><a href="https://about.gitlab.com/blog/2020/09/30/gitter-moves-to-element">The Gitter blog post</a></li>
<li><a href="https://techcrunch.com/2020/09/30/element-acquires-gitter-to-get-more-developers-on-board-with-the-open-matrix-messaging-protocol/">Techcrunch article</a></li>
<li><a href="https://changelog.com/podcast/414">ChangeLog Podcast episode w/ Matthew Hodgson from Matrix and Sytse &quot;Sid&quot; Sijbrandij from GitLab</a></li>
</ul>
<p>And if you'd like to chat with your fellow Matrix and Gitter users, there's a
bridged room already set up at
<a href="https://matrix.to/#/#gitter:matrix.org">#gitter:matrix.org</a>!</p>
<p>Welcome to the community, Gitter! üéâ</p>
<h2 id="dept-of-spec-scroll">Dept of Spec üìú</h2>
<p><a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> reported:</p>
<blockquote>
<h3 id="spec">Spec</h3>
</blockquote>
<blockquote>
<p>Here's your weekly spec update! The heart of Matrix is the specification - and this is modified by Matrix Spec Change (MSC) proposals. Learn more about how the process works at <a href="https://matrix.org/docs/spec/proposals.">https://matrix.org/docs/spec/proposals.</a></p>
<h2 id="msc-status">MSC Status</h2>
<p><strong>Merged MSCs:</strong></p>
<ul>
<li><em>No MSCs were merged this week.</em></li>
</ul>
<p><strong>MSCs in Final Comment Period:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2788">MSC2788: Room version 6 as the default room version</a> (merge)</li>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2414">MSC2414: Make reason and score parameters optional for reporting content</a> (merge)</li>
</ul>
<p><strong>New MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2801">MSC2801: Make it explicit that event bodies are untrusted data</a></li>
</ul>
<h2 id="spec-core-team">Spec Core Team</h2>
<p>In terms of Spec Core Team MSC focus for this week, after dropping off <a href="https://github.com/matrix-org/matrix-doc/pull/2414">MSC2414</a> in the FCP bucket, we're heading back for another big swing at widgets. <a href="https://github.com/matrix-org/matrix-doc/pull/2774">MSC2774</a> (widget ID URL parameter), <a href="https://github.com/matrix-org/matrix-doc/pull/2765">MSC2765</a> (widget avatars) and <a href="https://github.com/matrix-org/matrix-doc/pull/2790">MSC2790</a> (modal widgets) are the focus for this week üôÇ</p>
<p><img src="/blog/img/2020-10-02-BQKH9-stacked_area_chart.png" alt="2020-10-02-BQKH9-stacked_area_chart.png" /></p>
</blockquote>
<h3 id="matrix-uris">Matrix URIs</h3>
<p><a href="https://matrix.to/#/@kitsune:matrix.org">kitsune</a> told us:</p>
<blockquote>
<p>being totally shook up about the Gitter announcement for a good part of the week, I completed the work on <a href="https://github.com/matrix-org/matrix-doc/issues/2312">MSC2312</a> (it's about Matrix URIs, ICYMI) and it hopefully won't be long before it becomes the actual standard to share Matrix coordinates in popular web browsers. Ok, who am I kidding - before Matrix clients get on with adoption.</p>
</blockquote>
<p>This will allow people to post links to Matrix rooms/messages/users and when clicked will open right in your favourite Matrix client. Super convenient and great for adoption!</p>
<h2 id="dept-of-p2p-busts-in-silhouette">Dept of P2P üë•</h2>
<h3 id="ios-p2p-demo">iOS P2P Demo</h3>
<p>Dendrite is a next-generation homeserver written in Go. It is currently serving as the basis for peer-to-peer Matrix experiments</p>
<p><a href="https://matrix.to/#/@neilalexander:matrix.org">Neil Alexander</a> announced:</p>
<blockquote>
<p>Build 38 of the iOS P2P Demo, as built using Element iOS and Dendrite, has been submitted to TestFlight and will hopefully be available for testers shortly (pending Apple approval)! It features lots of updates in the Dendrite backend which should hopefully make it more reliable.</p>
<p>If you have an iPhone or iPad and enjoy things that sometimes work, <a href="https://testflight.apple.com/join/Tgh2MEk6">join the TestFlight here</a>!</p>
</blockquote>
<h2 id="dept-of-servers-europea">Dept of Servers üè¢</h2>
<h3 id="synapse">Synapse</h3>
<p><a href="https://matrix.to/#/@neilj:matrix.org">Neil</a> reported:</p>
<blockquote>
<p>This week we put out a new release candidate -<a href="https://github.com/matrix-org/synapse/releases/tag/v1.21.0rc2">1.21.0rc2</a></p>
<p>Highlights include </p>
<ul>
<li>
<p>Add experimental support for sharding event persister. (<a href="https://github.com/matrix-org/synapse/issues/8294">#8294</a>, <a href="https://github.com/matrix-org/synapse/issues/8387">#8387</a>, <a href="https://github.com/matrix-org/synapse/issues/8396">#8396</a>, <a href="https://github.com/matrix-org/synapse/issues/8419">#8419</a>)</p>
</li>
<li>
<p>Add experimental prometheus metric to track numbers of &quot;large&quot; rooms for state resolutiom. (<a href="https://github.com/matrix-org/synapse/issues/8425">#8425</a>)</p>
</li>
<li>
<p>Add prometheus metrics to track federation delays. (<a href="https://github.com/matrix-org/synapse/issues/8430">#8430</a>)</p>
</li>
<li>
<p>Fix messages not being sent over federation until an event is sent into the same room. (<a href="https://github.com/matrix-org/synapse/issues/8230">#8230</a>, <a href="https://github.com/matrix-org/synapse/issues/8247">#8247</a>, <a href="https://github.com/matrix-org/synapse/issues/8258">#8258</a>, <a href="https://github.com/matrix-org/synapse/issues/8272">#8272</a>, <a href="https://github.com/matrix-org/synapse/issues/8322">#8322</a>)</p>
</li>
<li>
<p>Fix a regression in v1.21.0rc1 which broke thumbnails of remote media. <a href="https://github.com/matrix-org/synapse/pull/8438">#8438</a></p>
</li>
</ul>
<p>Aside from that we are working on moving background processes away from the main process, actually getting the event persister sharding onto matrix.org and trying to improve Synapse stability generally.</p>
</blockquote>
<h3 id="dendrite-gomatrixserverlib">Dendrite / gomatrixserverlib</h3>
<p>Dendrite is a next-generation homeserver written in Go</p>
<p><a href="https://matrix.to/#/@neilalexander:matrix.org">Neil Alexander</a> said:</p>
<blockquote>
<p>Dendrite is nearing beta! Today we will be cutting a candidate 0.1.0rc1 version after a week of hunting and fixing bugs. We are on track to release version 0.1.0 next week, at which point we will be inviting people to try installing and using Dendrite!</p>
<p>Changes this week include:</p>
<ul>
<li>
<p>Initial sync is fixed after a bug caused us to fall back on incremental sync</p>
</li>
<li>
<p>The <code>Content-Type</code> HTTP header is now handled properly when MIME-formatted</p>
</li>
<li>
<p>Internal API calls over HTTP in polylith mode now use their own HTTP client with higher timeouts</p>
</li>
<li>
<p>Dendrite now tries harder to find missing auth events, using fetcher workers</p>
</li>
<li>
<p>Dendrite no longer falls back on <code>/state</code> unnecessarily, which was the cause of a major memory leak and high CPU usage</p>
</li>
<li>
<p>Federation HTTP calls now include the <code>User-Agent</code> header</p>
</li>
<li>
<p>The event <code>depth</code> field is now ignored in the federation API</p>
</li>
<li>
<p>We now report the password change capability properly (thanks <a href="https://github.com/bn4t">bn4t</a>!)</p>
</li>
<li>
<p>Registration flows now include the <code>completed</code> field after a failure (thanks <a href="https://github.com/Lesterpig">Lesterpig</a>!)</p>
</li>
<li>
<p>A bug in the previous event updater in the roomserver has been fixed</p>
</li>
<li>
<p>A bug where we didn't check our own old verify keys when verifying event signatures is fixed</p>
</li>
<li>
<p>A bug where we didn't handle event ID domains being different to the event origin in earlier room versions has been fixed</p>
</li>
<li>
<p>TLS fingerprints have been removed</p>
</li>
</ul>
<p>Spec compliance is unchanged:</p>
<ul>
<li>
<p>Client-Server APIs: 56%, same as last week</p>
</li>
<li>
<p>Server-Server APIs: 77%, same as last week</p>
</li>
</ul>
<p>Recently, we updated some of our documentation and created a whole new set of <a href="https://github.com/matrix-org/dendrite/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22">easy first issues</a> and <a href="https://github.com/matrix-org/dendrite/issues?q=is%3Aissue+is%3Aopen+label%3Ahelp-wanted">medium to hard issues</a> for contributors.</p>
<p>If contributing to Dendrite sounds like something you would be interested in, please take a look at these issues and join us in <a href="https://matrix.to/#/#dendrite-dev:matrix.org">#dendrite-dev:matrix.org</a>! There's also <a href="https://matrix.to/#/#dendrite:matrix.org">#dendrite:matrix.org</a> for general Dendrite chat and updates and <a href="https://matrix.to/#/#dendrite-alerts:matrix.org">#dendrite-alerts:matrix.org</a> for release notifications and important alerts.</p>
</blockquote>
<h3 id="conduit">Conduit</h3>
<p>Conduit is a Matrix homeserver written in Rust <a href="https://conduit.rs">https://conduit.rs</a></p>
<p><a href="https://matrix.to/#/@timo:koesters.xyz">timo</a> reported:</p>
<blockquote>
<ul>
<li>
<p>Fix bug leading to many requests at the same time due to error in waiting code</p>
</li>
<li>
<p>Implement /query/profile over federation</p>
</li>
<li>
<p>Start work on /invite over federation</p>
</li>
</ul>
<p>Thanks to everyone who supports me on <a href="https://liberapay.com/timokoesters">Liberapay</a> or Bitcoin!</p>
</blockquote>
<h3 id="the-construct">The Construct</h3>
<p><a href="https://matrix.to/#/@jason:zemos.net">Jason</a> reported:</p>
<blockquote>
<p>This week in Matrix Construct supports aarch64 (ARMv8) architectures. The experience has been phenomenal, with performance exceeding all expectations. Last week I wrote about all new vector code inside Construct using SSE through AVX-512 hardware acceleration in servers; that same code is now accelerated by SVE (Scalable Vector Extensions) on ARM architectures when you compile with clang.</p>
<p>This result is important: ARM virtual machines are offered at a significantly lower price compared to x86 from the same vendor. The systems are cheaper, require less power, but generally perform worse. The trick is to optimize the software for the weaker hardware. The benefit allows, for example, Matrix server hosts running Construct to make th eir profit margin from the lower TCO, getting more out of every computing cycle.</p>
<p>Construct is available at <a href="https://github.com/matrix-construct/construct">https://github.com/matrix-construct/construct</a> and don't forget to idle and idle <a href="https://matrix.to/#/#construct:zemos.net">#construct:zemos.net</a>.</p>
</blockquote>
<h2 id="synapse-deployment-inbox-tray">Synapse Deployment üì•Ô∏è</h2>
<h3 id="yunohost">YunoHost</h3>
<p><a href="https://matrix.to/#/@pierre:mamieserv.fr">Pierre</a> announced:</p>
<blockquote>
<p><a href="https://yunohost.org">YunoHost</a> is an operating system aiming for the simplest administration of a server, and therefore democratize self-hosting.</p>
<p><a href="https://github.com/YunoHost-Apps/synapse_ynh/tree/master">Synapse</a> integration had been updated to 1.19.3 (1.20.1 available in branch <code>testing</code>)</p>
<p><a href="https://github.com/YunoHost-Apps/element_ynh/tree/master">Element Web</a> integration had been updated to 1.7.7 (1.7.8 available in branch <code>testing</code>)</p>
</blockquote>
<h2 id="dept-of-bridges-bridge-at-night">Dept of Bridges üåâ</h2>
<h3 id="mautrix-signal">mautrix-signal</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> said:</p>
<blockquote>
<p>I made a Signal bridge using <a href="https://gitlab.com/thefinn93/signald">signald</a>.</p>
<p>Currently it supports bridging messages, reactions and signal read receipts. End-to-bridge encryption also exists (mautrix-python does all the work there). The bridge can be linked as a secondary device and possibly even registered as the main device, but I didn't actually test registering yet. Setup instructions are currently somewhat non-existent, but it's mostly the same as my other bridges plus signald as a separate daemon.</p>
<p>The repo is <a href="https://github.com/tulir/mautrix-signal">https://github.com/tulir/mautrix-signal</a> and the room is <a href="https://matrix.to/#/#signal:maunium.net">#signal:maunium.net</a></p>
</blockquote>
<p>He then popped up again a few days later to say:</p>
<blockquote>
<p>After the initial announcement earlier this week, I implemented a few of the missing features like media bridging, and even added setup instructions.</p>
</blockquote>
<p>The speed at which Tulir writes bridges scares me sometimes.</p>
<h3 id="mx-puppet-discord">mx-puppet-discord</h3>
<p><a href="https://github.com/matrix-discord/mx-puppet-discord">mx-puppet-discord</a> is a (double)puppeting and relay bridge for discord, based on mx-puppet-bridge</p>
<p><a href="https://matrix.to/#/@sorunome:sorunome.de">sorunome</a> said:</p>
<blockquote>
<p>mx-puppet-discord got updated to the newest discord.js version, meaning you have to update if you want to continue to operate it, due to discord having changed their gateway url!</p>
</blockquote>
<blockquote>
<p>mx-puppet-discord now also supports the intent stuff, so be sure to update by 7th oct</p>
</blockquote>
<p><strong>If you run mx-puppet-discord (like I do), make sure to update by October 7th or it will stop working!</strong></p>
<h3 id="bridges-do-hackertoberfest">Bridges do Hackertoberfest</h3>
<p><a href="https://matrix.to/#/@Half-Shot:half-shot.uk">Half-Shot</a> reported:</p>
<blockquote>
<p>Hey folks, I wanted to give another shoutout to say that we are still accepting PRs as part of <a href="https://hacktoberfest.digitalocean.com/">hacktoberfest</a>. Contributing 4 PRs will get you a T-Shirt (sadly not a Matrix one). Obviously, please ensure your PRs are meaningful (no copyright adjustments, typo fixes).</p>
<p>You can work on any issue, but we've highlighted some issues that would be perfect for newcomers over at <a href="https://github.com/matrix-org/matrix-appservice-bridge/issues?q=is%3Aopen+is%3Aissue+label%3Ahacktoberfest">https://github.com/matrix-org/matrix-appservice-bridge/issues?q=is%3Aopen+is%3Aissue+label%3Ahacktoberfest</a> and <a href="https://github.com/matrix-org/matrix-appservice-slack/issues?q=is%3Aopen+is%3Aissue+label%3Ahacktoberfest">https://github.com/matrix-org/matrix-appservice-slack/issues?q=is%3Aopen+is%3Aissue+label%3Ahacktoberfest</a></p>
</blockquote>
<p><a href="https://matrix.to/#/@cadair:cadair.com">Cadair</a> reported:</p>
<blockquote>
<p>In the hope of expanding the number of people contributing to the matrix-appservice-slack repo I have spent a chunk of my morning improving the issue descriptions and labelling up issues. If you are interested in fixing a little annoyance with the slack bridge or just fancy writing some typescript see the <a href="https://github.com/matrix-org/matrix-appservice-slack/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22">good first issue</a> label on the repo.</p>
</blockquote>
<h3 id="matrix-appservice-slack-1-6-0-rocks-the-block">matrix-appservice-slack 1.6.0 rocks the block</h3>
<p><a href="https://matrix.to/#/@Half-Shot:half-shot.uk">Half-Shot</a> reported:</p>
<blockquote>
<p>The matrix.org team are delighted to bring you the latest in Slack bridging technology. Do not let the</p>
<p>minor version bump fool you, this release is packed with the good stuff. The headline feature is that
our phase 1 encryption feature has landed and is free for users to experiment with. Head over to the</p>
<p><a href="https://matrix-appservice-slack.readthedocs.io/en/stable/bridge-encryption/">docs</a> to see how to
set this up.</p>
<p>There have been other notable changes, such as:</p>
<ul>
<li>
<p>New configuration options to allow or deny some channels from being bridged.</p>
</li>
<li>
<p>Support removing <em>reactions</em> from Slack and Matrix messages.</p>
</li>
<li>
<p>Add onboarding message for new users when puppeting is enabled, to encourage them to puppet.</p>
</li>
<li>
<p>Improved feature documentation</p>
</li>
</ul>
<p>(and many many bugfixes)</p>
<p>You can read the release information over at <a href="https://github.com/matrix-org/matrix-appservice-slack/releases">https://github.com/matrix-org/matrix-appservice-slack/releases</a></p>
</blockquote>
<p>Looking forward to seeing all the new Hacktoberfest contributors! üéÉ</p>
<h2 id="dept-of-clients-iphone">Dept of Clients üì±</h2>
<h3 id="fluffychat">fluffychat</h3>
<p><a href="https://matrix.to/#/@sorunome:sorunome.de">sorunome</a> offered:</p>
<blockquote>
<p>Fluffychat 0.19.1 has been released!</p>
<h4 id="features">Features</h4>
<ul>
<li>
<p>Implemented ignore list</p>
</li>
<li>
<p>Jump to events in timeline: When tapping on a reply and when tapping a matrix.to link</p>
</li>
<li>
<p>Display messages with up to 10 emotes or emoji bigger</p>
</li>
<li>
<p>New design for the chat list and message bubbles</p>
</li>
<li>
<p>Implement reactions</p>
</li>
<li>
<p>Implement password change</p>
</li>
<li>
<p>Implement deactivate user account</p>
</li>
</ul>
<h4 id="fixes">Fixes</h4>
<ul>
<li>
<p>Timeline randomly resorting while more history is being fetched</p>
</li>
<li>
<p>Automatically request history if the &quot;load more&quot; button is on the screen</p>
</li>
</ul>
</blockquote>
<h3 id="hydrogen">Hydrogen</h3>
<p><a href="https://matrix.to/#/@bwindels:matrix.org">Bruno</a> said:</p>
<blockquote>
<p>More browser compatibility work this week, making Hydrogen run IE11 on Windows 7, and on Safari on macOS and iOS (still with some caveats). Also fixed several bugs:</p>
<ul>
<li>
<p>fix for unable to open session after a synapse bug manifested itself</p>
</li>
<li>
<p>prevent the app locking up when you start the app with previously unsent messages</p>
</li>
<li>
<p>fix sync errors being reported as &quot;null&quot; in the banner</p>
</li>
<li>
<p>handle timeout during initial sync (important for large accounts) (although I have seen 1 report that this still isn't fixed, please report if you can't login with a large account)</p>
</li>
</ul>
</blockquote>
<h3 id="schildichat-for-android">SchildiChat for Android</h3>
<p><a href="https://matrix.to/#/@spiritcroc:matrix.org">SpiritCroc</a> said:</p>
<blockquote>
<p>SchildiChat's codebase has been updated to Element 1.0.8!</p>
<p>Furthermore, there have been a few design updates:</p>
<ul>
<li>
<p>Media items (pictures, videos, stickers) are no longer displayed in message bubbles</p>
</li>
<li>
<p>Bigger stickers</p>
</li>
<li>
<p>Avatars are now hidden in direct chats (when using dual-side message bubbles)</p>
</li>
</ul>
<p>Finally, Schildi doesn't crash anymore if somebody sends an empty message.</p>
</blockquote>
<p>SpiritCroc also mentioned some relevant links!</p>
<blockquote>
<ul>
<li>
<p>website: <a href="https://spiritcroc.de/schildichat-android">https://spiritcroc.de/schildichat-android</a></p>
</li>
<li>
<p>repo: <a href="https://github.com/SpiritCroc/SchildiChat-android">https://github.com/SpiritCroc/SchildiChat-android</a></p>
</li>
<li>
<p>room: <a href="https://matrix.to/#/#schildichat-android:matrix.org">#schildichat-android:matrix.org</a></p>
</li>
</ul>
</blockquote>
<h3 id="element-ios">Element-iOS</h3>
<p><a href="https://matrix.to/#/@Manu:matrix.org">Manu</a> announced:</p>
<blockquote>
<p>1.0.14 is in on the release path. It has:</p>
<ul>
<li>
<p>Room: Differentiate wordings for DMs</p>
</li>
<li>
<p>Room: New room details screen</p>
</li>
<li>
<p>Add Estonian support</p>
</li>
<li>
<p>Polishment in several areas and many bug fixes</p>
</li>
</ul>
<p>Full changelog:</p>
<p><a href="https://github.com/vector-im/element-ios/releases/tag/v1.0.14">https://github.com/vector-im/element-ios/releases/tag/v1.0.14</a>
<a href="https://github.com/vector-im/element-ios/releases/tag/v1.0.13">https://github.com/vector-im/element-ios/releases/tag/v1.0.13</a></p>
</blockquote>
<h3 id="element-web">Element Web</h3>
<p><a href="https://matrix.to/#/@neilj:matrix.org">Neil</a> announced:</p>
<blockquote>
<p>This week released <a href="https://github.com/vector-im/element-web/releases/tag/v1.7.8">v1.7.8</a></p>
<p>Highlights include</p>
<ul>
<li>
<p>Secure Backup has been moved out of the registration flow to a toast when you first encounter an E2EE room, which simplifies the new user experience</p>
</li>
<li>
<p>Added options to hide various UI features when hosting a custom Element</p>
</li>
</ul>
<p>Aside from that we continue to improve on widget support for resizable widgets, modal widgets and generally making widgets better.</p>
<p>We are also continuing to work on instrumenting the app, improving mobile support for matrix.to and making jitsi calling more reliable.</p>
</blockquote>
<h3 id="element-android">Element Android</h3>
<p><a href="https://matrix.to/#/@benoit.marty:matrix.org">benoit</a> told us:</p>
<blockquote>
<p>Element Android: Version 1.0.8 is now available on the stores, it fixes issues with verification and PIN code among other issues (see <a href="https://github.com/vector-im/element-android/releases/tag/v1.0.8">https://github.com/vector-im/element-android/releases/tag/v1.0.8</a> for more details). Now we are working on improving performance when sending messages to rooms, and also improving global UX, especially of the home (rooms list). Search messages (in clear rooms for the moment) is coming soon, and it will be also possible to filter the room members list.</p>
<p>We will also spend some time on the new Android SDK, https://github.com/matrix-org/matrix-android-sdk2, which is for the moment a quick extract of what we have in Element Android. We have to take care of it as a real product now: document it properly, set up CI, export Javadoc, develop a sample app, etc.</p>
</blockquote>
<h3 id="element-for-nextcloud">Element for Nextcloud</h3>
<p><a href="https://matrix.to/#/@gary:garykim.dev">Gary Kim</a> reported:</p>
<blockquote>
<p><a href="https://github.com/gary-kim/riotchat">Element for Nextcloud</a> v0.6.11 has been released this week. The new version comes with various bug fixes, dependency upgrades, and an upgrade to Element Web v1.7.8. The version is also compatible with Nextcloud 20 which is being released soon.</p>
</blockquote>
<h2 id="dept-of-sdks-and-frameworks">Dept of SDKs and Frameworks üß∞</h2>
<h3 id="ruma">Ruma</h3>
<p><a href="https://matrix.to/#/@iinuwa:matrix.org">iinuwa</a> told us:</p>
<blockquote>
<p>Over the past couple of weeks, we've received PRs for all of the remaining federation endpoints, and all but one have already been merged!</p>
<p>Now that the end is in sight, we're turning our focus elsewhere. We're working on cleaning up and fixing a few bugs in our event signing code and soon will create tracking issues for filling out the Identity Service API.</p>
</blockquote>
<h2 id="dept-of-services-rocket">Dept of Services üöÄ</h2>
<h3 id="t2bot-io">t2bot.io</h3>
<p><a href="https://github.com/turt2live">TravisR</a> reported:</p>
<blockquote>
<p>t2bot.io has crossed 1M monthly active users</p>
<p>All of these users are Telegram/Discord users that have been brought into Matrix over the last 30 days. This doesn't appear to be a temporary spike either: over the last 8 weeks t2bot.io has been hovering at 900-950 thousand monthly active users, up from 600-700 thousand. Record-setting traffic levels have also been achieved, with matrix.org being able to keep up for the first time in a long while.</p>
<p>Overall it's a good sign to see so many communities making the jump to Matrix and sticking around ‚ù§Ô∏è</p>
</blockquote>
<p><img src="/blog/img/2020-10-02-uDiMG-image.png" alt="2020-10-02-uDiMG-image.png" /></p>
<h2 id="dept-of-bots-robot-face">Dept of Bots ü§ñ</h2>
<h3 id="zabbix-matrix">zabbix-matrix</h3>
<p><a href="https://matrix.to/#/@progserega:rsprim.ru">progserega</a> told us:</p>
<blockquote>
<p>I added zabbix-bot to my zabbix-matrix repo, which can get information about current problems from zabbix-server and send it to matrix user. <a href="https://github.com/progserega/matrix_zabbix">https://github.com/progserega/matrix_zabbix</a></p>
<p>In our company we use it for get current situation and <a href="https://github.com/progserega/im_sender_service">https://github.com/progserega/im_sender_service</a> for sending events from zabbix.</p>
</blockquote>
<p>I've found that having your systems reporting in a room while you chat around
it can be really productive. Props to supporting yet another monitoring platform!</p>
<h2 id="dept-of-interesting-projects">Dept of Interesting Projects üõ∞Ô∏è</h2>
<h3 id="jitsi-e2ee-calls-using-olm">Jitsi E2EE Calls using Olm</h3>
<p>While 1-1 calls benefit from end-to-end encryption due to WebRTC, Jitsi group calls have always only benefitted from transport encryption.</p>
<p>A while ago <a href="https://jitsi.org/blog/e2ee/">Jitsi announced</a> that they were adding E2EE to Jitsi. But did you know that it's using Matrix's Olm encryption under the hood? It's currently available as an experimental feature on <a href="https://meet.jit.si">https://meet.jit.si</a>!</p>
<h2 id="dept-of-ping-table-tennis-paddle-and-ball">Dept of Ping üèì</h2>
<p>Here we reveal, rank, and applaud the homeservers with the lowest ping, as measured by <a href="https://github.com/maubot/echo">pingbot</a>, a <a href="https://github.com/maubot/maubot">maubot</a> that you can host on your own server. Join <a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">fairydust.space</td><td style="text-align: center">368</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">blob.cat</td><td style="text-align: center">543</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">nuclearlimes.co.uk</td><td style="text-align: center">580</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">nuclearlemons.uk</td><td style="text-align: center">889</td></tr>
<tr><td style="text-align: center">5</td><td style="text-align: center">conduit.rs</td><td style="text-align: center">912.5</td></tr>
<tr><td style="text-align: center">6</td><td style="text-align: center">mailstation.de</td><td style="text-align: center">1075</td></tr>
<tr><td style="text-align: center">7</td><td style="text-align: center">matrix.org</td><td style="text-align: center">1092</td></tr>
<tr><td style="text-align: center">8</td><td style="text-align: center">test.zemos.net</td><td style="text-align: center">1123</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">shortestpath.dev</td><td style="text-align: center">1251.5</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">chatcloud.net</td><td style="text-align: center">1338.5</td></tr>
</tbody></table>
<p>We also now have a room where the ping bots are only hosted on non-Synapse
servers! See the scoreboard below.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">conduit.rs</td><td style="text-align: center">104</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">settgast.org</td><td style="text-align: center">154</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">construct.grin.hu</td><td style="text-align: center">182</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">blob.cat</td><td style="text-align: center">209</td></tr>
<tr><td style="text-align: center">5</td><td style="text-align: center">grin.hu</td><td style="text-align: center">324.5</td></tr>
<tr><td style="text-align: center">6</td><td style="text-align: center">dendrite.neilalexander.dev</td><td style="text-align: center">367</td></tr>
<tr><td style="text-align: center">7</td><td style="text-align: center">test.zemos.net</td><td style="text-align: center">379</td></tr>
<tr><td style="text-align: center">8</td><td style="text-align: center">maunium.net</td><td style="text-align: center">448.5</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">conduit.nordgedanken.dev</td><td style="text-align: center">476</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">inferiorlattice.com</td><td style="text-align: center">592</td></tr>
</tbody></table>
<h2 id="final-thoughts-thought-balloon">Final Thoughts üí≠</h2>
<h3 id="xkcd-2365">XKCD 2365</h3>
<p><a href="https://matrix.to/#/@afranke:matrix.org">Alexandre Franke</a> told us:</p>
<blockquote>
<p>XKCD made <a href="https://xkcd.com/2365/">another strip about messaging systems</a> and I‚Äôm outraged to see that Matrix has been left out of it.</p>
</blockquote>
<p>Not to worry though, we've fixed it up!</p>
<p><img src="/blog/img/2020-10-02-xkcd.png" alt="2020-10-02-xkcd.png" /></p>
<h3 id="twim-authorship">TWIM authorship</h3>
<p>I hope you enjoyed this week and last's TWIM editions! Benpa will return next
week for more of your regularly scheduled programming. Ciao!</p>
<h2 id="that-s-all-i-know-checkered-flag">That's all I know üèÅ</h2>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;2020&#x2F;09&#x2F;30&#x2F;welcoming-gitter-to-matrix&#x2F;" title="Welcoming Gitter to Matrix!">Welcoming Gitter to Matrix!</a></h1>
            <span>
                30.09.2020 16:28
                ‚Äî
                <a href="/category/general">
                    General
                </a>
                ‚Äî
                
                <a href="/author/matthew-hodgson">
                    Matthew Hodgson
                </a>
                
            </span>
            <br>
            <small>Last update: 30.09.2020 14:58</small>
        </header>
        <div>
            <p><img src="/blog/img/2020-09-30-gitter.png" alt="Gitter ‚ô•Ô∏è Matrix" /></p>
<p>Hi all,</p>
<p>We are ridiculously excited to announce that <a href="https://gitter.im">Gitter</a> is joining the Matrix ecosystem and will become the first major existing chat platform to switch to natively speaking Matrix!</p>
<p>If you‚Äôre reading this from the Gitter community and have no idea what Matrix is: we‚Äôre an open source project that provides an open protocol for secure, decentralised communication - effectively the missing real-time communication layer of the open Web.  The open Matrix network has more than 20M users on it and is growing fast (adding another 1.7M or so with the arrival of Gitter!)</p>
<p>Gitter is easily one of the best developer community chat systems out there, used by the communities of some massive projects (<a href="https://gitter.im/nodejs/home">Node</a>, <a href="https://gitter.im/Microsoft/TypeScript">TypeScript</a>, <a href="https://gitter.im/angular/home">Angular</a>, <a href="https://gitter.im/scala/home">Scala</a> etc) and is a custodian of huge archives of knowledge via their chat logs. Gitter is unique in specifically focusing on developers: their tagline is literally ‚ÄúWhere developers come to talk‚Äù (unlike Slack, which has barely any community features - or Discord, with its ban on unofficial clients, where developers are a bit of an afterthought relative to the gamers). With Gitter natively joining Matrix, we‚Äôre super excited to see the global developer community converging on the open Matrix network - and Gitter‚Äôs community rooms should see a huge new lease of life as they‚Äôre properly made natively available to the wider network as first class citizens :)</p>
<p>We‚Äôve always had a bit of a crush on Gitter ever since we ended up opposite each other in the exhibition hall at TechCrunch Disrupt Europe 2014 - particularly when they demoed us not only their sexy webapp but also their official IRC server bridge at irc.gitter.im :D  Over the years we‚Äôve been gently nudging them to consider fully embracing Matrix, but perhaps understandably they‚Äôve been busy focusing on their own stuff. However, earlier this year, our friends at GitLab (who acquired Gitter in 2017) reached out to explore the opportunity of Gitter becoming a core part of Matrix rather than a non-core project at GitLab‚Ä¶ and we‚Äôve jumped on that opportunity to bring Gitter fully into Matrix.</p>
<p>In practice, the way this is happening is that Element (the company founded by the Matrix core team to fund Matrix development) is acquiring Gitter from GitLab, with a combined Gitter and Element dev team focusing on giving Gitter a new life in Matrix!  You can read about it from the Element angle over on <a href="https://element.io/blog/gitter-is-joining-element/">the Element blog</a>.</p>
<p>Practically speaking, we have a pretty interesting plan here, which we‚Äôd like to be very transparent about given it‚Äôs a little unusual:</p>
<p>At first, Gitter will keep running as it always has - needless to say, we will be doing everything we can to delight the Gitter community and keep the service in good shape.</p>
<p>Then we‚Äôre going to build out native Matrix connectivity - running a dedicated Matrix homeserver on gitter.im with a new bridge direct into the heart of Gitter; letting all Gitter rooms be available to Matrix directly as (say) #angular_angular:gitter.im, and bridging all the historical conversations into Matrix via <a href="https://github.com/matrix-org/matrix-doc/blob/matthew/msc2716/proposals/2716-importing-history-into-existing-rooms.md">MSC2716</a> or similar. We will of course do this entirely as open source, just as Gitter itself is open source thanks to GitLab releasing it under the MIT license in 2017. The plan is to comprehensively document our progress as the flagship worked example case study of ‚Äúhow do you make an existing chat system talk Matrix.‚Äù</p>
<p>This will of course replace the old and creaky <a href="https://github.com/matrix-org/matrix-appservice-gitter">matrix-appservice-gitter</a> bridge we‚Äôve been running since 2016. Gitter users will also be able to talk to other users elsewhere in the open Matrix network - e.g. DMing them, and (possibly) joining arbitrary Matrix rooms. Effectively, <strong>Gitter will have become a Matrix client</strong>.</p>
<p>Now we come to the interesting bit. Gitter has some <em>really</em> nice features which are sorely lacking in Element today:</p>
<ul>
<li>Instant live room peeking (less than a second to load the webapp into a live-view of a massive room with 20K users!!)</li>
<li>Seamless onboarding thanks to using GitLab &amp; GitHub for accounts</li>
<li>Curated hierarchical room directory</li>
<li>Magical creation of rooms on demand for every GitLab and GitHub project ever</li>
<li>GitLab/GitHub activity as a first-class citizen in a room‚Äôs side-panel</li>
<li>Excellent search-engine-friendly static content and archives</li>
<li>KaTeX support for Maths communities</li>
<li>Threads!</li>
</ul>
<p>...and we promise to do everything in our power to preserve and honour these features at all costs and continue to give the Gitter community the experience they‚Äôve come to know and love.</p>
<p><strong>However</strong>: in the medium/long term, it‚Äôs simply not going to be efficient for the combined Element/Gitter team to split our efforts maintaining two high-profile Matrix clients. Our plan is instead to merge Gitter‚Äôs features into Element (or next generations of Element) itself and then - if and only if Element has achieved parity with Gitter based on the above list - we expect to upgrade the deployment on gitter.im to a Gitter-customised version of Element. The inevitable side-effect is that we‚Äôll be adding new features to Element rather than Gitter going forwards.</p>
<p>In practice, the main outcome in the end should be Element having benefited massively from levelling up with Gitter - and Gitter benefiting massively from all the goodies which Element and Matrix brings, including:</p>
<ul>
<li>E2E Encryption</li>
<li>Reactions</li>
<li>Constantly improving native iOS &amp; Android clients (which should be a welcome alternative to Gitter‚Äôs natives ones, which are <a href="https://gitlab.com/gitlab-org/gitter/webapp/-/issues/2281">already being deprecated</a>)</li>
<li>VoIP and conferencing</li>
<li>All the alternative clients, bots, bridges and servers in Matrix</li>
<li>The full open standard Matrix API</li>
<li>Widgets (embedding webapps into rooms!)</li>
<li>...and of course participation in the wider decentralised Matrix network.</li>
</ul>
<p>So, there you have it. It‚Äôs a new era for Gitter - and we look forward to reinvigorating Gitter‚Äôs communities over the coming months. We hope Gitter users will be blown away by the features arriving from Matrix‚Ä¶ and we hope that Element users will be ecstatic with the performance and polish work that Gitter-parity will drive us towards. Imagine having guest access in Element that can launch and load a massive room in less than a second!</p>
<p>Finally, we would like to explicitly reassure the Gitter community again that we love and understand Gitter (it was one of the very first ever bridges we wrote for Matrix, for instance) - and we will be doing everything we can to not screw up our responsibility in looking after it. Please, please let us know if you have any concerns or if we ever fall short on this.</p>
<p>Any questions, come talk to us on <a href="https://matrix.to/#/#gitter:matrix.org">#gitter:matrix.org</a> - which is bridged with <a href="https://gitter.im/matrix-org/gitter">https://gitter.im/matrix-org/gitter</a>.  Exciting times ahead!</p>
<p>- Matthew, Amandine, and the whole Matrix, Element and Gitter teams.</p>
<div style="text-align: center">
    <img src="/blog/img/2020-09-30-gitter-photo.jpg" width="480" alt="Matthew & Amandine being dorky"/>
    <br/>
    <i><small>Matthew and Amandine model 2014-vintage Matrix & Gitter swag in celebration :D</small></i>
</div>
<h2 id="bonus-update-the-changelog-interview">Bonus update - The Changelog Interview!</h2>
<p>Sid Sijbrandij (CEO at GitLab) and Matthew had a chance to sit down with <a href="https://changelog.com">The Changelog</a> to talk about Gitter's Big Adventure - so tune in to hear the story first hand!  Warning: contains non-ironic use of the word &quot;synergy&quot; :D</p>
<br/>
<div style="text-align: center">
<a rel="noopener" href="https://cdn.changelog.com/uploads/podcast/414/the-changelog-414.mp3">
    <img src="https://matrix.org/blog/img/2020-09-30-gitter-changelog.png" alt="Changelog podcast 414"/>
</a>
<p><a href="https://changelog.com/podcast/414">The Changelog 414: Gitter's Big Adventure</a> - Listen on <a href="https://changelog.com/">Changelog.com</a></p>
</div>

        </div>
    </article>
    
    <nav class="pagination">
    <div class="prev">
        
        <a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;page&#x2F;24&#x2F;">‚Äπ Previous</a>
        
    </div>
    <span class="page-number">25 / 68</span>
    <div class="prev">
        
        <a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;page&#x2F;26&#x2F;">Next ‚Ä∫</a>
        
    </div>
</nav>

</div>
    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;security-hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p><a href="/legal/copyright-notice">Copyright Notice</a></p>
</footer>

</body>

</html>
