<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - Blog</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/png" href="/assets/favicon.png" />
    <link rel="stylesheet" href="/style.css" />

    </head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo-white.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            current">
            Blog
        </a>
        
        
        
        
        
        <details  class="section-wrap mobile">
            <summary class="section ">
                Documentation
                <div class="arrow"></div>
            </summary>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    
                    
                    <a href="&#x2F;docs&#x2F;chat_basics&#x2F;">Chat basics</a>
                    
                    
                    <a href="&#x2F;docs&#x2F;communities&#x2F;">Communities</a>
                    
                    
                    <a href="&#x2F;docs&#x2F;technical&#x2F;">Technical docs</a>
                    
                    
                    <a href="&#x2F;docs&#x2F;legacy&#x2F;">Legacy documentation</a>
                    
                </div>
            </div>
        </details>
        <div class="section-wrap desktop">
            <a href="&#x2F;docs&#x2F;" class="section ">
                Documentation
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    
                    
                    <a href="&#x2F;docs&#x2F;chat_basics&#x2F;">Chat basics</a>
                    
                    
                    <a href="&#x2F;docs&#x2F;communities&#x2F;">Communities</a>
                    
                    
                    <a href="&#x2F;docs&#x2F;technical&#x2F;">Technical docs</a>
                    
                    
                    <a href="&#x2F;docs&#x2F;legacy&#x2F;">Legacy documentation</a>
                    
                </div>
            </div>
        </div>
        
        
        
        
        
        <details  class="section-wrap mobile">
            <summary class="section ">
                Ecosystem
                <div class="arrow"></div>
            </summary>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bots&#x2F;">Bots</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                    
                </div>
            </div>
        </details>
        <div class="section-wrap desktop">
            <a href="&#x2F;ecosystem&#x2F;" class="section ">
                Ecosystem
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bots&#x2F;">Bots</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        <div class="content">
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2020&#x2F;08&#x2F;17&#x2F;synapse-1-19-0-released&#x2F;" title="Synapse 1.19.0 released">Synapse 1.19.0 released</a></h1>
            <span>
                17.08.2020 00:00
                —
                <a href="/category/releases">
                    Releases
                </a>
                —
                <a href="/author/neil-johnson">
                    Neil Johnson
                </a>
            </span>
            
        </header>
        <div>
            <p>Synapse 1.19.0 is here and ready for action.</p>
<p>1.19.0 contains lots of async/await changes, 27 separate PRs to be precise(thanks Patrick). These changes will provide some level of performance improvement, but the real value to us is that it will improve our ability to profile Synapse more effectively.</p>
<p>It also features improved logging performance, this is in part to reduce IO but also to reduce the total amount logged. We’d be really interested to get some feedback on if the changes help. You may also want to take a look at our new logging defaults to see if they would help reduce total disk space usage.</p>
<p>Some admins will rejoice that we have added a <code>/health</code> end point to every configured HTTP listener which should make it easier to monitor multi-worker installs.</p>
<p>Finally 1.19.0 contains improvements to the Admin API allowing the admin to optionally purge rooms on deletion.</p>
<p>Get the new releases from any of the usual sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md. 1.19.0 is on github <a href="https://github.com/matrix-org/synapse/releases/tag/v1.19.0">here</a>.</p>
<p>Changelog for 1.19.0 follows:</p>
<h1 id="synapse-1-19-0-2020-08-17">Synapse 1.19.0 (2020-08-17)</h1>
<p>No significant changes since 1.19.0rc1.</p>
<h2 id="removal-warning">Removal warning</h2>
<p>As outlined in the <a href="https://github.com/matrix-org/synapse/releases/tag/v1.18.0">previous release</a>, we are no longer publishing Docker images with the <code>-py3</code> tag suffix. On top of that, we have also removed the <code>latest-py3</code> tag. Please see <a href="https://github.com/matrix-org/synapse/blob/develop/UPGRADE.rst#upgrading-to-v1180">the announcement in the upgrade notes for 1.18.0</a>.</p>
<h1 id="synapse-1-19-0rc1-2020-08-13">Synapse 1.19.0rc1 (2020-08-13)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Add option to allow server admins to join rooms which fail complexity checks. Contributed by @lugino-emeritus. (<a href="https://github.com/matrix-org/synapse/issues/7902">#7902</a>)</li>
<li>Add an option to purge room or not with delete room admin endpoint (<code>POST /_synapse/admin/v1/rooms/&lt;room_id&gt;/delete</code>). Contributed by @dklimpel. (<a href="https://github.com/matrix-org/synapse/issues/7964">#7964</a>)</li>
<li>Add rate limiting to users joining rooms. (<a href="https://github.com/matrix-org/synapse/issues/8008">#8008</a>)</li>
<li>Add a <code>/health</code> endpoint to every configured HTTP listener that can be used as a health check endpoint by load balancers. (<a href="https://github.com/matrix-org/synapse/issues/8048">#8048</a>)</li>
<li>Allow login to be blocked based on the values of SAML attributes. (<a href="https://github.com/matrix-org/synapse/issues/8052">#8052</a>)</li>
<li>Allow guest access to the <code>GET /_matrix/client/r0/rooms/{room_id}/members</code> endpoint, according to MSC2689. Contributed by Awesome Technologies Innovationslabor GmbH. (<a href="https://github.com/matrix-org/synapse/issues/7314">#7314</a>)</li>
</ul>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix a bug introduced in Synapse v1.7.2 which caused inaccurate membership counts in the room directory. (<a href="https://github.com/matrix-org/synapse/issues/7977">#7977</a>)</li>
<li>Fix a long standing bug: 'Duplicate key value violates unique constraint &quot;event_relations_id&quot;' when message retention is configured. (<a href="https://github.com/matrix-org/synapse/issues/7978">#7978</a>)</li>
<li>Fix &quot;no create event in auth events&quot; when trying to reject invitation after inviter leaves. Bug introduced in Synapse v1.10.0. (<a href="https://github.com/matrix-org/synapse/issues/7980">#7980</a>)</li>
<li>Fix various comments and minor discrepancies in server notices code. (<a href="https://github.com/matrix-org/synapse/issues/7996">#7996</a>)</li>
<li>Fix a long standing bug where HTTP HEAD requests resulted in a 400 error. (<a href="https://github.com/matrix-org/synapse/issues/7999">#7999</a>)</li>
<li>Fix a long-standing bug which caused two copies of some log lines to be written when synctl was used along with a MemoryHandler logger. (<a href="https://github.com/matrix-org/synapse/issues/8011">#8011</a>, <a href="https://github.com/matrix-org/synapse/issues/8012">#8012</a>)</li>
</ul>
<h2 id="updates-to-the-docker-image">Updates to the Docker image</h2>
<ul>
<li>We no longer publish Docker images with the <code>-py3</code> tag suffix, as <a href="https://github.com/matrix-org/synapse/blob/develop/UPGRADE.rst#upgrading-to-v1180">announced in the upgrade notes</a>. (<a href="https://github.com/matrix-org/synapse/issues/8056">#8056</a>)</li>
</ul>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Document how to set up a client .well-known file and fix several pieces of outdated documentation. (<a href="https://github.com/matrix-org/synapse/issues/7899">#7899</a>)</li>
<li>Improve workers docs. (<a href="https://github.com/matrix-org/synapse/issues/7990">#7990</a>, <a href="https://github.com/matrix-org/synapse/issues/8000">#8000</a>)</li>
<li>Fix typo in <code>docs/workers.md</code>. (<a href="https://github.com/matrix-org/synapse/issues/7992">#7992</a>)</li>
<li>Add documentation for how to undo a room shutdown. (<a href="https://github.com/matrix-org/synapse/issues/7998">#7998</a>, <a href="https://github.com/matrix-org/synapse/issues/8010">#8010</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Reduce the amount of whitespace in JSON stored and sent in responses. Contributed by David Vo. (<a href="https://github.com/matrix-org/synapse/issues/7372">#7372</a>)</li>
<li>Switch to the JSON implementation from the standard library and bump the minimum version of the canonicaljson library to 1.2.0. (<a href="https://github.com/matrix-org/synapse/issues/7936">#7936</a>, <a href="https://github.com/matrix-org/synapse/issues/7979">#7979</a>)</li>
<li>Convert various parts of the codebase to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7947">#7947</a>, <a href="https://github.com/matrix-org/synapse/issues/7948">#7948</a>, <a href="https://github.com/matrix-org/synapse/issues/7949">#7949</a>, <a href="https://github.com/matrix-org/synapse/issues/7951">#7951</a>, <a href="https://github.com/matrix-org/synapse/issues/7963">#7963</a>, <a href="https://github.com/matrix-org/synapse/issues/7973">#7973</a>, <a href="https://github.com/matrix-org/synapse/issues/7975">#7975</a>, <a href="https://github.com/matrix-org/synapse/issues/7976">#7976</a>, <a href="https://github.com/matrix-org/synapse/issues/7981">#7981</a>, <a href="https://github.com/matrix-org/synapse/issues/7987">#7987</a>, <a href="https://github.com/matrix-org/synapse/issues/7989">#7989</a>, <a href="https://github.com/matrix-org/synapse/issues/8003">#8003</a>, <a href="https://github.com/matrix-org/synapse/issues/8014">#8014</a>, <a href="https://github.com/matrix-org/synapse/issues/8016">#8016</a>, <a href="https://github.com/matrix-org/synapse/issues/8027">#8027</a>, <a href="https://github.com/matrix-org/synapse/issues/8031">#8031</a>, <a href="https://github.com/matrix-org/synapse/issues/8032">#8032</a>, <a href="https://github.com/matrix-org/synapse/issues/8035">#8035</a>, <a href="https://github.com/matrix-org/synapse/issues/8042">#8042</a>, <a href="https://github.com/matrix-org/synapse/issues/8044">#8044</a>, <a href="https://github.com/matrix-org/synapse/issues/8045">#8045</a>, <a href="https://github.com/matrix-org/synapse/issues/8061">#8061</a>, <a href="https://github.com/matrix-org/synapse/issues/8062">#8062</a>, <a href="https://github.com/matrix-org/synapse/issues/8063">#8063</a>, <a href="https://github.com/matrix-org/synapse/issues/8066">#8066</a>, <a href="https://github.com/matrix-org/synapse/issues/8069">#8069</a>, <a href="https://github.com/matrix-org/synapse/issues/8070">#8070</a>)</li>
<li>Move some database-related log lines from the default logger to the database/transaction loggers. (<a href="https://github.com/matrix-org/synapse/issues/7952">#7952</a>)</li>
<li>Add a script to detect source code files using non-unix line terminators. (<a href="https://github.com/matrix-org/synapse/issues/7965">#7965</a>, <a href="https://github.com/matrix-org/synapse/issues/7970">#7970</a>)</li>
<li>Log the SAML session ID during creation. (<a href="https://github.com/matrix-org/synapse/issues/7971">#7971</a>)</li>
<li>Implement new experimental push rules for some users. (<a href="https://github.com/matrix-org/synapse/issues/7997">#7997</a>)</li>
<li>Remove redundant and unreliable signature check for v1 Identity Service lookup responses. (<a href="https://github.com/matrix-org/synapse/issues/8001">#8001</a>)</li>
<li>Improve the performance of the register endpoint. (<a href="https://github.com/matrix-org/synapse/issues/8009">#8009</a>)</li>
<li>Reduce less useful output in the newsfragment CI step. Add a link to the changelog section of the contributing guide on error. (<a href="https://github.com/matrix-org/synapse/issues/8024">#8024</a>)</li>
<li>Rename storage layer objects to be more sensible. (<a href="https://github.com/matrix-org/synapse/issues/8033">#8033</a>)</li>
<li>Change the default log config to reduce disk I/O and storage for new servers. (<a href="https://github.com/matrix-org/synapse/issues/8040">#8040</a>)</li>
<li>Add an assertion on <code>prev_events</code> in <code>create_new_client_event</code>. (<a href="https://github.com/matrix-org/synapse/issues/8041">#8041</a>)</li>
<li>Add a comment to <code>ServerContextFactory</code> about the use of <code>SSLv23_METHOD</code>. (<a href="https://github.com/matrix-org/synapse/issues/8043">#8043</a>)</li>
<li>Log <code>OPTIONS</code> requests at <code>DEBUG</code> rather than <code>INFO</code> level to reduce amount logged at <code>INFO</code>. (<a href="https://github.com/matrix-org/synapse/issues/8049">#8049</a>)</li>
<li>Reduce amount of outbound request logging at <code>INFO</code> level. (<a href="https://github.com/matrix-org/synapse/issues/8050">#8050</a>)</li>
<li>It is no longer necessary to explicitly define <code>filters</code> in the logging configuration. (Continuing to do so is redundant but harmless.) (<a href="https://github.com/matrix-org/synapse/issues/8051">#8051</a>)</li>
<li>Add and improve type hints. (<a href="https://github.com/matrix-org/synapse/issues/8058">#8058</a>, <a href="https://github.com/matrix-org/synapse/issues/8064">#8064</a>, <a href="https://github.com/matrix-org/synapse/issues/8060">#8060</a>, <a href="https://github.com/matrix-org/synapse/issues/8067">#8067</a>)</li>
</ul>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2020&#x2F;08&#x2F;14&#x2F;this-week-in-matrix-2020-08-14&#x2F;" title="This Week in Matrix 2020-08-14">This Week in Matrix 2020-08-14</a></h1>
            <span>
                14.08.2020 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="matrix-live">Matrix Live 🎙</h2>
<p>No new Matrix Live this week, we have Open Tech Will Save Us #5:</p>
<iframe
  width="560"
  height="315"
  src="https://www.youtube.com/embed/tJ8tthkVAOQ"
  frameborder="0"
  allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
  allowfullscreen
></iframe>
<p>Also, I recommend Matrix Live from last week, with <a href="https://youtu.be/cIOKD9xM3F0">Timo and Matthew discussing Conduit/Rust/Homeserver dev</a>. Conduit is absolutely motoring, as you will read below.</p>
<h2 id="dept-of-status-of-matrix-face-with-th">Dept of <em>Status of Matrix</em> 🌡️</h2>
<h3 id="linkoping-university-has-now-soft-launched-matrix">Linköping University has now soft-launched Matrix</h3>
<p><a href="https://matrix.to/#/@aleol57:liu.se">Alexander Olofsson</a> said:</p>
<blockquote>
<p>In <em>completely unrelated</em> news to my earlier K8s updates, Linköping University has now soft-launched Matrix for use both internally - and hopefully with other universities and institutions in the future.</p>
</blockquote>
<p>Se the k8s updates from <em>Ananace</em> below. Is this the first .se university offering Matrix? Also, great hostname!</p>
<h2 id="dept-of-spec-scroll">Dept of Spec 📜</h2>
<h3 id="sas-emoji-translations">SAS Emoji Translations</h3>
<p><a href="https://github.com/turt2live">TravisR</a> said:</p>
<blockquote>
<p>We've finally opened up <a href="https://translate.riot.im/projects/matrix-doc/sas-emoji-v1">https://translate.riot.im/projects/matrix-doc/sas-emoji-v1</a> to translate the emoji used by clients to ensure that users are securely verifying each other. The idea is that clients should always have a consistent name for these emoji, even if developed by completely different teams. If your client supports encryption verification and has translations, please transition to using matrix-doc for your translations: <a href="https://github.com/matrix-org/matrix-doc/pull/2728">https://github.com/matrix-org/matrix-doc/pull/2728</a> has some details, and <a href="https://matrix.to/#/#matrix-spec:matrix.org">#matrix-spec:matrix.org</a> would love to help out.</p>
</blockquote>
<p><img src="/blog/img/2020-08-14-Ly4te-image.png" alt="2020-08-14-Ly4te-image.png" /></p>
<h3 id="spec">Spec</h3>
<p><a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> said:</p>
<blockquote>
<p>Here's your weekly spec update! The heart of Matrix is the specification - and this is modified by Matrix Spec Change (MSC) proposals. Learn more about how the process works at <a href="https://matrix.org/docs/spec/proposals">https://matrix.org/docs/spec/proposals</a>.</p>
<h4 id="msc-status">MSC Status</h4>
<p><strong>Merged MSCs:</strong></p>
<ul>
<li><em>No MSCs were merged this week.</em></li>
</ul>
<p><strong>MSCs in Final Comment Period:</strong></p>
<ul>
<li><em>No MSCs are in FCP.</em></li>
</ul>
<p><strong>New MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2730">MSC2730: Verifiable forwarded events</a></li>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2723">MSC2723: Forwarded message metadata</a></li>
</ul>
<h4 id="spec-core-team">Spec Core Team</h4>
<p>Some of the team was on holiday last week, hence the noticeable lack of progress 😇 In terms of Spec Core Team MSC focus for this week, we're keeping on with the same two as last week: <a href="https://github.com/matrix-org/matrix-doc/issues/2674">MSC2674</a> (aggregations pt1: relationships) and <a href="https://github.com/matrix-org/matrix-doc/issues/1544">MSC1544</a> (QR code verification).</p>
</blockquote>
<p><img src="/blog/img/2020-08-14-i2G3v-stacked_area_chart.png" alt="2020-08-14-i2G3v-stacked_area_chart.png" /></p>
<h2 id="dept-of-gsoc-mortar-board">Dept of GSoC 🎓️</h2>
<h3 id="opsdroid-gsoc">Opsdroid(GSoC)</h3>
<p><a href="https://matrix.to/#/@tyagdit:matrix.org">tyagdit</a> announced:</p>
<blockquote>
<h4 id="matrix-database">Matrix database</h4>
<ul>
<li>
<p>The port to nio is complete and most of the functionality has been worked out</p>
</li>
<li>
<p>Encryption support is being worked on</p>
</li>
<li>
<p>The module now has a <code>delete</code> method</p>
</li>
<li>
<p>Some testing is remaining</p>
</li>
<li>
<p>Check out the progress <a href="https://github.com/opsdroid/opsdroid/pull/1587">here</a></p>
</li>
</ul>
<h4 id="end-to-end-encryption-with-matrix">End to End Encryption with matrix</h4>
<ul>
<li>
<p>Opsdroid will soon get a new release with the new connector</p>
</li>
<li>
<p>For now it can be used through the <a href="https://github.com/opsdroid/opsdroid">master branch</a> of opsdroid</p>
</li>
</ul>
</blockquote>
<h2 id="dept-of-servers-europea">Dept of Servers 🏢</h2>
<h3 id="synapse">Synapse</h3>
<p><a href="https://matrix.to/#/@neilj:matrix.org">Neil</a> reported:</p>
<blockquote>
<p>We have <a href="https://github.com/matrix-org/synapse/releases/tag/v1.19.0rc1">a new RC out</a>, edited highlights include</p>
<ul>
<li>
<p><em>lots</em> of async/await changes, 27 separate PRs (thanks Patrick)</p>
</li>
<li>
<p>improved logging performance, this is in part to reduce IO but also to reduce the total amount logged. We’d be really interested to get some feedback on if the changes help. You may also want to take a look at our new logging defaults to see if they would help reduce total disk space usage.</p>
</li>
<li>
<p>Further improvements to the Admin API allowing admin to optionally purge rooms on deletion.</p>
</li>
</ul>
<p>Expect 1.19.0 to land early next week.</p>
<p>Aside from that Erik has been continuing with sharding the event persister, this is a big job, so we’re still a little way off having something to ship, but I’ll keep you updated.</p>
<p>Big news this week, after spending a good chunk of time trying to rework notifications to make the UX more intuitive, we have decided that the best (and only) way forward is to completely rethink how the push rules work. Rich is currently redesigning the whole thing, and once done we’ll resume on the client side.</p>
<p>Having spent much of the past 3 months trying to improve the performance of large scale instances we will soon start looking at improving the out of the box experience for smaller installs and are in the early stages of thinking about what that might look like. I’ll update more over time, but the two obvious use cases to target are</p>
<ul>
<li>Federating instance, with 1-5 users, resource constrained.</li>
<li>Federating instance with a few hundred users.</li>
</ul>
<p>Our (relatively small) changes to logging in 1.19.0 are the first signs of this shift. We still need to ship event persistence sharding and also move more functionality from the main process (dependent on async/await), but once done it clears the way for new projects.</p>
</blockquote>
<p><img src="/blog/img/2020-08-14-2cR_s-image.png" alt="2020-08-14-2cR_s-image.png" /></p>
<p><a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> brought it to our attention that this graph looks like a &quot;ocean-beach waterline dropoff&quot;.</p>
<h3 id="conduit">Conduit</h3>
<p>Conduit is a Matrix homeserver written in Rust <a href="https://conduit.rs">https://conduit.rs</a></p>
<p><a href="https://matrix.to/#/@timo:koesters.xyz">timo</a> reported:</p>
<blockquote>
<p>This week I worked a bit on federation! Last week we were able to query room directories over federation; This week I looked into what's needed to join one of those rooms:</p>
<ul>
<li>
<p>Resolve room aliases over federation</p>
</li>
<li>
<p>Send make_join request when a user tries to join an unknown room</p>
</li>
<li>
<p>Use make_join response to create send_join request (insert origin, origin_server_ts and add hashes and signatures)</p>
</li>
</ul>
<p>After implementing all those things, I could actually see Conduit's join event on Synapse!</p>
</blockquote>
<p><img src="/blog/img/2020-08-14-bRuiV-Screenshot_20200814_125755.png" alt="2020-08-14-bRuiV-Screenshot_20200814_125755.png" /></p>
<blockquote>
<p>Of course a lot more work is needed to make this really work,</p>
<p>like creating the room on the Conduit side and sending and receiving federation
transactions, but this is a start.</p>
<p>Other news:</p>
<ul>
<li>
<p>Docker support (thanks to @weasy, @valkum and @paul)</p>
</li>
<li>
<p>Room upgrade support (almost done, thanks to @Faelar)</p>
</li>
</ul>
<p>Thanks to everyone who supports me on <a href="https://liberapay.com/timokoesters">Liberapay</a> or Bitcoin!</p>
</blockquote>
<h3 id="dendrite-gomatrixserverlib">Dendrite / gomatrixserverlib</h3>
<p>Dendrite is a next-generation homeserver written in Go</p>
<p><a href="https://matrix.to/#/@neilalexander:matrix.org">Neil Alexander</a> told us:</p>
<blockquote>
<p>This week we've been closing off some of the remaining tasks for end-to-end encryption and working on tasks from our <a href="https://github.com/matrix-org/dendrite/milestone/8">beta milestone task list</a>.</p>
<p>Changes this week include:</p>
<ul>
<li>
<p>New format for the Dendrite configuration file, which is correctly broken up into configuration per-component</p>
</li>
<li>
<p>Support for server ACLs has been added</p>
</li>
<li>
<p>Significant refactoring of the HTTP routing and API setup to improve flexibility and separation of internal and external APIs</p>
</li>
<li>
<p>A number of improvements to device list handling</p>
</li>
<li>
<p>Key updates are now sent when handling device display name changes</p>
</li>
<li>
<p>Deleted devices are now propagated correctly over federation</p>
</li>
</ul>
<p>Spec compliance is improving:</p>
<ul>
<li>
<p>Client-Server APIs: 54%, up from 51% last week</p>
</li>
<li>
<p>Server-Server APIs: 70%, up from 54% last week</p>
</li>
</ul>
<p>As always, feel free to join us in <a href="https://matrix.to/#/#dendrite:matrix.org">#dendrite:matrix.org</a> for the latest!</p>
</blockquote>
<p>I'm enjoying the close rivalry and progress happening in Dendrite and Conduit right now!</p>
<h3 id="sytest">Sytest</h3>
<p><a href="https://matrix.to/#/@neilalexander:matrix.org">Neil Alexander</a> reported:</p>
<blockquote>
<p>Sytest has now been updated to allow skipping tests for endpoints that have been deprecated in the spec. This may be useful if you are writing a homeserver and have no plans to implement deprecated endpoints, e.g. <code>/initialSync</code> or <code>/events</code>.</p>
<p>Use the command line parameter <code>--exclude-deprecated</code> when starting Sytest to skip these tests!</p>
</blockquote>
<h2 id="synapse-deployment-inbox-tray">Synapse Deployment 📥️</h2>
<h3 id="yunohost">YunoHost</h3>
<p><a href="https://matrix.to/#/@pierre:mamieserv.fr">Pierre</a> reported:</p>
<blockquote>
<p><a href="https://yunohost.org">YunoHost</a> is an operating system aiming for the simplest administration of a server, and therefore democratize self-hosting.</p>
<p><a href="https://github.com/YunoHost-Apps/synapse_ynh/tree/master">Synapse</a> integration had been updated to 1.18.0</p>
<p><a href="https://github.com/YunoHost-Apps/element_ynh/tree/master">Element Web</a> integration had been updated to 1.7.3</p>
</blockquote>
<h3 id="kubernetes">Kubernetes</h3>
<p><a href="https://matrix.to/#/@ace:kittenface.studio">Ananace</a> reported:</p>
<blockquote>
<p>Just pushed some WIP (v0.1) <a href="https://gitlab.com/ananace/charts">charts</a> for both Synapse and the matrix-media-repo project, written with Redis, workers/sharding, PVC constraints, and other large deployment thoughts in mind.</p>
<p>Note that these charts - the Synapse one in particular - basically require you to have a fully featured cluster, with a regex-capable ingress, automated cert manager, and RBAC. They do not require you to have a ReadWriteMany capable storage class though, even when using workers.</p>
</blockquote>
<p>and then:</p>
<blockquote>
<p>To expand on my earlier TWIM, the <a href="https://gitlab.com/ananace/charts">charts for Synapse, media-repo, and now element-web</a> are all being used in production now so they are also respectively receiving their 1.0's</p>
</blockquote>
<h2 id="dept-of-clients-iphone">Dept of Clients 📱</h2>
<h3 id="nheko">Nheko</h3>
<p><a href="https://github.com/Nheko-Reborn/nheko">Nheko</a> is a desktop client using Qt, Boost.Asio and C++17. It supports E2EE (with the notable exception being device verification for now) and intends to be full featured and nice to look at</p>
<p><a href="https://matrix.to/#/@deepbluev7:neko.dev">Nico (@deepbluev7:neko.dev)</a> said:</p>
<blockquote>
<p>So, we've been silent for a bit, but that doesn't mean we haven't been busy, so I have a little bit of a bigger announcement to make today:</p>
<p>Trilene implemented voice call support in Nheko! We just merged this and you can try it out now!</p>
<p>Some caveats apply at the moment, but will be resolved in the near future:</p>
<ul>
<li>
<p>Currently you will need to have a patched version of GStreamer. The current releases of GStreamer have a <a href="https://gitlab.freedesktop.org/gstreamer/gst-plugins-bad/-/issues/831">bug</a> when your turnserver uses a password, that contains a ':'. Since this is the default for coturn, I'm guessing this affects everyone.</p>
</li>
<li>
<p>You will need to build Nheko yourself. Currently we do not have GStreamer available in our CI pipeline, so we disabled support for voice calls in those builds (apart from the flatpak build, but that also needs some further validation and a new GStreamer release). We will release proper builds with VOIP support once GStreamer is actually released and available with the fixes we need.</p>
</li>
<li>
<p>There are still some other issues, when relying on a turnserver to connect a call. We will fix them one at a time.</p>
</li>
</ul>
<p>Big shoutout to trilene for implementing all of this! I can finally call people from Nheko, which is super awesome!</p>
<p>This was the first of the bigger features, that have been cooking for a while, in the near future we should also finish the new event store, which reduced memory usage and provides some kind of offline support, and Chethan will probably finish the first iteration of cross-signing soon too. After that we'll focus on the smaller features again. ;-)</p>
</blockquote>
<p>BIG update! Looking forward to trying out voice calls. ☎️ Maybe we'll be calling Nico for Matrix Live soon..?</p>
<h3 id="element-android">Element-Android</h3>
<p><a href="https://matrix.to/#/@benoit.marty:matrix.org">benoit</a> said:</p>
<blockquote>
<p>We are still fixing issues following the Element release. We are also working to add Jitsi conference call support.</p>
<p>We have exported a first beta version of the SDK from Element Android. It is available here: <a href="https://github.com/matrix-org/matrix-android-sdk2">https://github.com/matrix-org/matrix-android-sdk2</a> and can be integrated in any Android app as a regular gradle dependency. We will update the SDK after each release of Element Android.</p>
</blockquote>
<h3 id="schildichat-for-android">SchildiChat for Android</h3>
<p><a href="https://matrix.to/#/@spiritcroc:matrix.org">SpiritCroc</a> said:</p>
<blockquote>
<p><a href="https://github.com/SpiritCroc/SchildiChat-android">SchildiChat</a> version 1.0.4-sc.12 should be up in the <a href="https://play.google.com/store/apps/details?id=de.spiritcroc.riotx">Play Store</a> soon.</p>
<p>It includes following changes since the last TWIM:</p>
<ul>
<li>
<p>The single-list overview screen is now optional. If you prefer the tabbed layout for separating direct messages and rooms, as known from Element for Android, but still want SchildiChat's message bubbles, you can get that combination now too!</p>
</li>
<li>
<p>Push notifications have been enabled for the Play Store variant</p>
</li>
<li>
<p>Some theme fixes for old Android versions</p>
</li>
</ul>
</blockquote>
<h3 id="hydrogen">Hydrogen</h3>
<p><a href="https://matrix.to/#/@bwindels:matrix.org">Bruno</a> told us:</p>
<blockquote>
<p>Some regular readers might remember, in the past I've put a few entries here about a side-project called <a href="https://github.com/bwindels/brawl-chat/">Brawl</a>. Two weeks ago, we took Brawl and started building a new client on top of it code-named Hydrogen.</p>
<p>As the name implies, Hydrogen tries to be the lightest Element. It is written entirely in vanilla javascript (no React, no Webpack) for complete control, structured as an MVVM app, leveraging the raw performance of indexeddb. On huge accounts where Element-web uses up to 1GB of heap memory, Hydrogen sips away with a mere 15mb. It is very early days though, and Hydrogen has very little features: you can receive and send unencrypted messages and that's it.</p>
<p>Hydrogen also aims to support a wider range of browsers, from IE11 (particularly for orgs with locked-down machines) all the way to a fully featured PWA that works well on mobile. We should also be able to easily add progressive loading, which <a href="https://github.com/vector-im/element-web/issues/2498">proved hard in the past</a>.</p>
<p>Another goal is to make it easy to embed parts of the app (like the room view) into another app or website. It could also be really nice to have a place to play and experiment with new tech for element proper - much as Dendrite has influenced Synapse.</p>
<p>As mentioned, it's early days, and lots of things are missing or broken, so <strong>please don't file any issues yet</strong>. Feel free to play around with it at <a href="https://hydrogen.element.io/">https://hydrogen.element.io/</a> though!</p>
</blockquote>
<p><img src="/blog/img/2020-08-14-hydrogen.png" alt="Hydrogen" /></p>
<p>Find the repo here: <a href="https://github.com/vector-im/hydrogen-web/">https://github.com/vector-im/hydrogen-web/</a>.</p>
<h3 id="element-ios">Element-iOS</h3>
<p><a href="https://matrix.to/#/@igulek:matrix.org">ismailgulek</a> offered:</p>
<blockquote>
<p>This week, we've completed some of the tasks from the sprint: <a href="https://github.com/vector-im/element-ios/milestone/38.">https://github.com/vector-im/element-ios/milestone/38.</a></p>
<p>As a highlight, we've released a new TF with PushKit &amp; CallKit back.</p>
</blockquote>
<h2 id="dept-of-sdks-and-frameworks">Dept of SDKs and Frameworks 🧰</h2>
<h3 id="ruma">Ruma</h3>
<p>Ruma is a Rust project to create a comprehensive set of APIs for Matrix. Previously there was a Ruma homeserver project.</p>
<p><a href="https://matrix.to/#/@iinuwa:matrix.org">iinuwa</a> announced:</p>
<blockquote>
<p>Lots of exciting things happened in Ruma this week:</p>
<ul>
<li>We have officially implemented over half (18/31) of the Federation API endpoints!</li>
</ul>
<p>Special thanks to @agraven and @q-b!</p>
<ul>
<li>
<p>We've added the only new endpoint from r0.6.1 of the C2S spec.</p>
</li>
<li>
<p>We have begun work on adding support for borrowed types for requests. This
should reduce the memory allocations required for clients to send requests to</p>
</li>
</ul>
<p>a server.</p>
<ul>
<li>Exported some macros to make creating custom endpoints and events that</li>
</ul>
<p>much easier.</p>
<h4 id="new-contributors">New Contributors</h4>
<p>This week, we have gotten help from a few new contributors:</p>
<ul>
<li>
<p><a href="https://github.com/agraven">@agraven</a></p>
</li>
<li>
<p><a href="https://github.com/lieuwex">@lieuwex</a></p>
</li>
<li>
<p><a href="https://github.com/q-b">@q-b</a></p>
</li>
</ul>
<p>Thanks for your help!</p>
<p>If you're interested in contributing, join the party on
<a href="https://github.com/ruma/ruma">GitHub</a> or</p>
<p><a href="https://matrix.to/#/#ruma:matrix.org">#ruma:matrix.org</a>!</p>
</blockquote>
<p>Great to see new contributors here.</p>
<h2 id="dept-of-ops">Dept of Ops 🛠</h2>
<h3 id="support-for-ansible-collections-from-famedly">Support for Ansible collections from Famedly</h3>
<p><a href="https://matrix.to/#/@jan.christian:gruenhage.xyz">JCG</a> told us:</p>
<blockquote>
<p>There's news from ansible land! Ansible recently introduced a new packaging format, the &quot;collection&quot;, and we've now started moving our ansible content into collections. This means the matrix modules I twim'ed a few months back are now easier to install than ever before, and the synapse/element roles are included in there as well (thanks to <a href="https://matrix.to/#/@madonius:entropia.de">madonius</a> for the contributions there). The roles have been regularly updated for a while now, and the element role isn't even called riot anymore! You can get the collection on <a href="https://galaxy.ansible.com/famedly/matrix">Ansible Galaxy</a>, with the source being available over on <a href="https://gitlab.com/famedly/ansible/collections/matrix">GitLab</a>. In case of any questions, feel free to hop over into <a href="https://matrix.to/#/#ansible:famedly.de">#ansible:famedly.de</a></p>
</blockquote>
<p>If <em>Ansible</em> were a film franchise &quot;Ansible: The Collection&quot; would be the long awaited boxset.</p>
<h2 id="dept-of-bots-robot-face">Dept of Bots 🤖</h2>
<h3 id="cody">Cody</h3>
<p><a href="https://matrix.to/#/@carl:bordum.dk">carl</a> said:</p>
<blockquote>
<p>cody - the REPL for your matrix room - received support for unit conversions this week. This is done by implementing GNU units as a language.</p>
<p>Chat with cody: <a href="https://matrix.to/#/@cody:bordum.dk">@cody:bordum.dk</a></p>
<p>Join our cody room: <a href="https://matrix.to/#/#cody:bordum.dk">#cody:bordum.dk</a>
Read the source: <a href="https://gitlab.com/carlbordum/matrix-cody/">https://gitlab.com/carlbordum/matrix-cody/</a></p>
</blockquote>
<p><img src="/blog/img/2020-08-14-cody.png" alt="2020-08-14-cody.png" /></p>
<p>Seems to work well!</p>
<h3 id="opsdroid">Opsdroid</h3>
<p><a href="https://matrix.to/#/@cadair:cadair.com">Cadair</a> reported:</p>
<blockquote>
<p><a href="https://github.com/opsdroid/opsdroid">opsdroid</a> is getting close to a release with the matrix connector rewritten to use the matrix-nio library. If you are feeling brave and want to help us iron out any bugs before the release, please install the master branch and test it out for your matrix bots. Please report any issues on the GitHub issue tracker or come talk in <a href="https://matrix.to/#/#opsdroid-developers:matrix.org">#opsdroid-developers:matrix.org</a>. Hopefully, a release with this and lots of other goodies will be coming in a couple of weeks.</p>
</blockquote>
<h2 id="dept-of-interesting-projects">Dept of Interesting Projects 🛰️</h2>
<h3 id="privee">Privee</h3>
<p><a href="https://matrix.to/#/@terry_hello:matrix.org">terry_hello</a> said:</p>
<blockquote>
<p>Hi All,</p>
<p>I’ve created a compact and portable home server based on Matrix protocol, it’s a piece of hardware which is easy to use and set up. I’m working on a new client APP similar to other typical messenger GUI, but this server we named it ‘Privee’ supports any messenger developed with Matrix protocol. I’ve launched a campaign on Kickstarter this week, please come and support us! Thank you!
<a href="https://www.kickstarter.com/projects/privee/privee?ref=beibnw">https://www.kickstarter.com/projects/privee/privee?ref=beibnw</a></p>
</blockquote>
<p>Privee is an <em>interesting project</em> alright! The project creators are based in Hong Kong, and are working from a desire to have more control over their communications. The plan is to run homeservers on a small computer physically located with the user, similar to plans outlined by <a href="https://nova.chat/">NovaChat</a>.</p>
<p>This is an early-stage project (hence starting on KickStarter.) While exciting and ambitious, I encourage everyone to do their own research! Learn more and chat with terry_hello (who has done a good job handling questions already!) in <a href="https://matrix.to/#/#Privee:matrix.org">#Privee:matrix.org</a>.</p>
<h2 id="dept-of-ping-table-tennis-paddle-and-ball">Dept of Ping 🏓</h2>
<p>Here we reveal, rank, and applaud the homeservers with the lowest ping, as measured by <a href="https://github.com/maubot/echo">pingbot</a>, a <a href="https://github.com/maubot/maubot">maubot</a> that you can host on your own server. Join <a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">helderferreira.io</td><td style="text-align: center">470</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">maescool.be</td><td style="text-align: center">486.5</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">matrix.vgorcum.com</td><td style="text-align: center">570.5</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">mchus.pro</td><td style="text-align: center">730</td></tr>
<tr><td style="text-align: center">5</td><td style="text-align: center">envs.net</td><td style="text-align: center">770</td></tr>
<tr><td style="text-align: center">6</td><td style="text-align: center">maunium.net</td><td style="text-align: center">983</td></tr>
<tr><td style="text-align: center">7</td><td style="text-align: center">matrix.org</td><td style="text-align: center">1261</td></tr>
<tr><td style="text-align: center">8</td><td style="text-align: center">acmelabs.space</td><td style="text-align: center">1282.5</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">chatserver.ca</td><td style="text-align: center">1387</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">productionservers.net</td><td style="text-align: center">1433.5</td></tr>
</tbody></table>
<h2 id="that-s-all-i-know-checkered-flag">That's all I know 🏁</h2>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2020&#x2F;08&#x2F;07&#x2F;this-week-in-matrix-2020-08-07&#x2F;" title="This Week in Matrix 2020-08-07">This Week in Matrix 2020-08-07</a></h1>
            <span>
                07.08.2020 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="matrix-live">Matrix Live 🎙</h2>
<iframe src="https://www.youtube.com/embed/cIOKD9xM3F0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2 id="dept-of-spec-scroll">Dept of Spec 📜</h2>
<p>Here's your weekly spec update! The heart of Matrix is the specification - and this is modified by Matrix Spec Change (MSC) proposals. Learn more about how the process works at https://matrix.org/docs/spec/proposals.</p>
<h3 id="msc-status">MSC Status</h3>
<p><strong>Merged MSCs:</strong></p>
<ul>
<li><em>No MSCs were merged this week.</em></li>
</ul>
<p><strong>MSCs in Final Comment Period:</strong></p>
<ul>
<li><em>No MSCs are in FCP.</em></li>
</ul>
<p><strong>New MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2716">MSC2716: Incrementally importing history into existing rooms</a></li>
</ul>
<p><img src="/blog/img/2020-08-07-stacked_area_chart.png" alt="" /></p>
<h2 id="dept-of-gsoc-mortar-board">Dept of GSoC 🎓️</h2>
<h3 id="go-neb">go-neb</h3>
<p><a href="https://matrix.to/#/@nikofil:matrix.org">nikofil</a> reported:</p>
<blockquote>
<ul>
<li>
<p>Handle SAS verification by adding an endpoint where the decimal SAS code generated by another device can be sent. If this code matches with go-neb's generated code, the verification succeeds and the device is marked as trusted.</p>
</li>
<li>
<p>Add a cryptotest service which can be used for other clients to test their functionalities related to e2ee. This currently includes a challenge / response, key forwarding functions (key request / key forward) and SAS verification. SSSS and cross-signing are planned for the future. (PR is under review)</p>
</li>
</ul>
</blockquote>
<h2 id="dept-of-p2p-busts-in-silhouette">Dept of P2P 👥</h2>
<h3 id="ios-p2p-demo">iOS P2P Demo</h3>
<p>Dendrite is a next-generation homeserver written in Go</p>
<p><a href="https://matrix.to/#/@neilalexander:matrix.org">Neil Alexander</a> said:</p>
<blockquote>
<p>The Element P2P demo on iOS has seen a number of updates in the last week - now at build 31 - which contains a number of fixes:</p>
<ul>
<li>
<p>QUIC session setup is now far more reliable</p>
</li>
<li>
<p>QUIC sessions are now reset when the node's network coordinates change</p>
</li>
<li>
<p>The federation sender now wakes up properly on incoming QUIC sessions</p>
</li>
<li>
<p>Network coordinates are now cached for remote federated nodes, reducing the number of DHT searches and speeding up resuming federation</p>
</li>
<li>
<p>HTTP pools are disabled, which reduces head-of-line blocking problems on stalled sessions</p>
</li>
<li>
<p>A number of timeouts have been lowered</p>
</li>
<li>
<p>Dendrite has been updated to the latest version</p>
</li>
</ul>
<p>If you have an iPhone or iPad and want to play with the demo, <a href="https://testflight.apple.com/join/Tgh2MEk6">grab the public TestFlight</a>!</p>
</blockquote>
<h2 id="dept-of-servers-europea">Dept of Servers 🏢</h2>
<h3 id="matrix-media-repo-v1-2-0">matrix-media-repo v1.2.0</h3>
<p><a href="https://github.com/turt2live/matrix-media-repo">matrix-media-repo</a> is a highly customizable multi-domain media repository for Matrix</p>
<p><a href="https://github.com/turt2live">TravisR</a> told us:</p>
<blockquote>
<p><a href="https://github.com/turt2live/matrix-media-repo/releases/tag/v1.2.0">v1.2.0</a> is out now, with a bunch of bug fixes and some added features:</p>
<ul>
<li>
<p>Thumbnail support for apng and webp images (thanks Sorunome!) </p>
</li>
<li>
<p>Experimental (but pretty stable) support for Redis as a cache - instructions <a href="https://github.com/turt2live/matrix-media-repo/blob/v1.2.0/docs/redis.md">here</a></p>
</li>
<li>
<p>Optional oEmbed support for things like previewing tweets - turn it on <a href="https://github.com/turt2live/matrix-media-repo/blob/v1.2.0/config.sample.yaml#L343-L346">here</a></p>
</li>
<li>
<p>Dynamic thumbnail support</p>
</li>
<li>
<p>Per-user quotas</p>
</li>
</ul>
<p>v1.2.0 is also much faster at file uploads, however some areas of matrix-media-repo can still be improved - general performance work is planned for the next release.</p>
<p><a href="https://github.com/turt2live/matrix-media-repo/tree/v1.2.0#matrix-media-repo">Learn more about matrix-media-repo</a>.</p>
</blockquote>
<h3 id="dendrite-gomatrixserverlib">Dendrite / gomatrixserverlib</h3>
<p>Dendrite is a next-generation homeserver written in Go</p>
<p><a href="https://matrix.to/#/@neilalexander:matrix.org">Neil Alexander</a> announced:</p>
<blockquote>
<p>We are happy to announce the <a href="https://github.com/matrix-org/dendrite/milestone/8">beta milestone</a> for our first versioned release of Dendrite, which we anticipate to land in the next few weeks. Once these issues are cleared, we'll have made the big breaking changes that we want to make and will have a migration mechanism in place for database schema upgrades.</p>
<p>This will make life significantly easier for anyone who wants to start experimenting with and running their own Dendrite homeservers without unexpected breakages. More updates to follow soon - join us in <a href="https://matrix.to/#/#dendrite:matrix.org">#dendrite:matrix.org</a> for the latest!</p>
<p>This week, Dendrite's end-to-end encryption support has also been mostly rounded off with the exception of a few minor bugs and edge-cases.</p>
<p>Changes this week include:</p>
<ul>
<li>
<p>TLS certificate verification is now enabled by default</p>
</li>
<li>
<p>A new <code>federation_disable_tls_validation</code> config option has been added to override the above</p>
</li>
<li>
<p>Added support for processing inbound device lists from federation</p>
</li>
<li>
<p>Local device list changes are now sent outbound over federation</p>
</li>
<li>
<p>One-time key counts are now sent in <code>/sync</code></p>
</li>
<li>
<p>Direct server signing key fetches are now limited to 15 seconds</p>
</li>
<li>
<p>State events that fail signature checks on federated room joins are now properly ignored</p>
</li>
<li>
<p>A number of SQLite database lock bugs have been fixed using <code>TransactionWriter</code></p>
</li>
<li>
<p>A bug when finding joined hosts in the federation sender in SQLite mode has been fixed</p>
</li>
<li>
<p>Logging levels have been adjusted in a number of areas</p>
</li>
</ul>
<p>Spec compliance:</p>
<ul>
<li>
<p>Client-Server APIs: 51%, same as last week</p>
</li>
<li>
<p>Server-Server APIs: 54%, up from 53% last week</p>
</li>
</ul>
</blockquote>
<p>Asked whether this progress means that matrix.org would be running on Dendrite next year, Neil said he was <em>certain</em> that it would <em>definitely</em> be ready:</p>
<blockquote>
<p>Anything is possible</p>
</blockquote>
<h3 id="conduit">Conduit</h3>
<p>Conduit is a Matrix homeserver written in Rust <a href="https://conduit.rs">https://conduit.rs</a></p>
<p><a href="https://matrix.to/#/@timo:koesters.xyz">timo</a> reported:</p>
<blockquote>
<ul>
<li>
<p>Improve long polling when user is invited (thanks @gnieto)</p>
</li>
<li>
<p>Documentation and code cleanup</p>
</li>
<li>
<p>Getting initial server_server code back into shape</p>
</li>
</ul>
<p>Thanks to everyone who supports me on <a href="https://liberapay.com/timokoesters">Liberapay</a> or Bitcoin!</p>
</blockquote>
<p>Oh and btw look at Matrix Live this week!</p>
<h3 id="synapse">Synapse</h3>
<p><a href="https://matrix.to/#/@clokep:matrix.org">Patrick</a> offered:</p>
<blockquote>
<p>This week in Synapse land we continued with our performance push making further progress on the async/await-athon. We will move into the storage layer this coming week which will leave the caching layer and a few other bits outstanding. Separate work continued to get the event persister into a shardable state. The first step being to replace the event stream token with its own type and then threading that through the code base.</p>
<p>We have also continued to improve on our push capabilities and released a new version of Sygnal (<a href="https://github.com/matrix-org/sygnal/releases/tag/v0.8.2">0.8.2</a>) with support for pushing to iOS devices via Firebase.</p>
<p>We are also very close to getting a workable version of the new push rules. The idea is to test it out in the wild before getting it enshrined in the spec.</p>
<p>Next week will see a continued focus on sharding and async/awaiting, more notifications work, logging improvements, and a host of bug fixes!</p>
</blockquote>
<h2 id="dept-of-bridges-bridge-at-night">Dept of Bridges 🌉</h2>
<h3 id="maubot-rss-plugin">maubot rss plugin</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> reported:</p>
<blockquote>
<p>I released <a href="https://github.com/maubot/rss/releases/tag/v0.2.0">v0.2.0</a> of the maubot RSS plugin. The most recent addition is support for JSON feeds, <del>stolen from</del> <em>inspired by</em> FantasyCookie17's <a href="https://gitlab.com/FantasyCookie17/jsonfeed-bot/">jsonfeed-bot</a>.</p>
<p>Other changes since v0.1.0:</p>
<ul>
<li>Per-feed toggle to send posts as <code>m.text</code> instead of <code>m.notice</code></li>
<li>Automatically moving subscriptions across room upgrades</li>
<li>Some fixes for handling weird feeds</li>
</ul>
<p><a href="https://github.com/maubot/rss">maubot/rss</a> is a maubot plugin that posts feed updates to Matrix rooms. It supports RSS/Atom/JSON feeds, customizing message templates per-feed/room, and more.</p>
</blockquote>
<h3 id="mautrix-bridges">mautrix bridges</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> reported:</p>
<blockquote>
<p>All my bridges now have options for automatic e2ee key sharing in portal rooms. Currently they don't have verification support (other than manually marking as verified in the database), so enabling key sharing isn't entirely secure yet. I'll probably invent some sort of web verification interface after nikofil adds cross-signing to mautrix-go.</p>
<p>This also means mautrix-python now supports sending and responding to key requests. I'll port the interactive verification and future cross-signing code from mautrix-go to mautrix-python at some point too.</p>
</blockquote>
<h2 id="dept-of-clients-iphone">Dept of Clients 📱</h2>
<h3 id="fractal">Fractal</h3>
<p><a href="https://matrix.to/#/@afranke:matrix.org">Alexandre Franke</a> offered:</p>
<blockquote>
<p>4.4.0 is out as promised last week! Get it off <a href="https://www.flathub.org/apps/details/org.gnome.Fractal">Flathub</a> now.</p>
<p>After we announced our intention to release, we discovered a regression that prevented joining new rooms because there was a mixup between room aliases and room id during a switch from internal structures to ruma-identifiers. Luckily we managed to fix it in time and make the release as intended.</p>
<h4 id="full-changelog-since-4-2-2">Full changelog since 4.2.2</h4>
<h4 id="new-features">New features</h4>
<ul>
<li>
<p>Videos now have a preview directly in history</p>
</li>
<li>
<p>New videos player: click on a preview to open it</p>
</li>
<li>
<p>Improved audio file support, with a nicer presentation and seeking</p>
</li>
<li>
<p>Redacted messages are removed from history</p>
</li>
<li>
<p>Edited messages are replaced with their new content and show a small icon</p>
</li>
<li>
<p>Translations have been updated</p>
</li>
<li>
<p>Spellcheck language is saved per room</p>
</li>
<li>
<p>New swipe-back gesture to go back from room to room list in narrow view</p>
</li>
<li>
<p>New swipe left and right gesture to navigate through media in media view</p>
</li>
<li>
<p>SOCKS proxy are now also supported</p>
</li>
</ul>
<h4 id="bugfixes">Bugfixes</h4>
<ul>
<li>
<p>Thumbnail for pasted images have been fixed</p>
</li>
<li>
<p>File type detection for uploads is more reliable</p>
</li>
<li>
<p>Typing notifications are now only sent when text is actually typed in the message input</p>
</li>
</ul>
<h4 id="under-the-hood">Under the hood</h4>
<ul>
<li>
<p>Code refactor is still going</p>
</li>
<li>
<p>Some improvements to logging, including access token removal for privacy</p>
</li>
</ul>
</blockquote>
<h3 id="element-android">Element Android</h3>
<p><a href="https://matrix.to/#/@valere35:matrix.org">valere</a> told us:</p>
<blockquote>
<p>Sorry we missed last week TWIM!</p>
<ul>
<li>Element Android 1.0.4 🚀 has been released to the store, it contains several bug fixes, and is adding back some moderators functionality (see list of banned users for a room + actions)</li>
</ul>
<p>The team has been mainly working on stabilisation + refactoring of the current code base.</p>
<p>We are also trying to give more visibility on what is coming next:</p>
<ul>
<li>
<p>Pin code protection 🔓 (merged on develop)</p>
</li>
<li>
<p>Improvement of big media upload</p>
</li>
<li>
<p>Cancelling send, retries, better upload progress...</p>
</li>
<li>
<p>Call fixes and improvement</p>
</li>
<li>
<p>Improve fdroid polling for notification</p>
</li>
</ul>
<p>The team is partially off, expect some delays in handling of issues and PR reviews</p>
</blockquote>
<h3 id="schildichat-android">SchildiChat Android</h3>
<p><a href="https://matrix.to/#/@spiritcroc:matrix.org">SpiritCroc</a> reported:</p>
<blockquote>
<p><a href="https://github.com/SpiritCroc/SchildiChat-android">SchildiChat</a> is a new fork of Element for Android (previously RiotX), which features some UI changes, to make it more comfortable to use for people who are used to other common instant messengers.</p>
<p>The most important changes are the following:</p>
<ul>
<li>
<p>The overview screen lists all chats in one list instead of the tabbed layout in Element</p>
</li>
<li>
<p>Message bubbles (optional)</p>
</li>
<li>
<p>Theme choice based on the system-wide dark/light theme on recent Android versions</p>
</li>
</ul>
<p>It is now available on <a href="https://play.google.com/store/apps/details?id=de.spiritcroc.riotx">Google Play</a>, it might appear on F-Droid too in the future.</p>
</blockquote>
<p><a href="https://matrix.to/#/#schildichat-android:matrix.org">#schildichat-android:matrix.org</a> is the place to find out more.</p>
<h3 id="new-appimage-for-the-element-desktop-matrix-client">New AppImage for the Element Desktop Matrix Client</h3>
<p><a href="https://matrix.to/#/@srevinsaju:matrix.org">srevinsaju</a> told us:</p>
<blockquote>
<p>As per <a href="https://github.com/vector-im/element-web/issues/4766#issuecomment-668170110">this issue comment</a>, I was asked to inform this channel of the new AppImage for the Element Desktop Matrix Client. 🎉. Interested users may get them on <a href="https://appimage.github.io/element">appimage.github.io</a> or on my <a href="https://github.com/srevinsaju/element-appimage/releases">releases page</a>, offering Continuous builds (refreshed every day) for stable and beta builds 😃</p>
</blockquote>
<h3 id="indiechat-announced">IndieChat announced</h3>
<p><a href="https://matrix.to/#/@indiechat:matrix.org">indiechat</a> announced:</p>
<blockquote>
<p>Hello, World! <strong>[IndieChat]</strong>, a new Android matrix client is in Play Store:  <a href="https://play.google.com/store/apps/details?id=chat.indie.cam">https://play.google.com/store/apps/details?id=chat.indie.cam</a></p>
</blockquote>
<p>This is forked from FluffyChat:</p>
<blockquote>
<p>I have changed the archive feature. Added a splash screen. Further simplified settings. Login times work  faster compared to FC. I am connecting it to my Jitsi instance. which operates p2p and is completely analytics free. Message notifications are analytics free. It will eventually be an extension to a videocall app developed by myself. It adds variety to the ecosystem. It strictly follows license rules, credits the developers and links to their wonderful work. And it is a great thing to do in my spare time ☺️</p>
</blockquote>
<h3 id="element-ios">Element-iOS</h3>
<p><a href="https://matrix.to/#/@Manu:matrix.org">Manu</a> said:</p>
<blockquote>
<p>This week, we started a new sprint to finalise remaining rebranding and iOS13 SDK issues. Note that have a plan to make CallKit and PushKit back!</p>
<p>In parallel, we have finished to setup the CI for the 3 iOS projects.</p>
</blockquote>
<h2 id="dept-of-encryption-closed-lock-with-key">Dept of Encryption 🔐</h2>
<h3 id="device-dehydration">Device dehydration</h3>
<p><a href="https://matrix.to/#/@hubert:uhoreg.ca">uhoreg</a> told us:</p>
<blockquote>
<p>I missed out on demo day last week because my demo wasn't ready yet.  But I recorded a video, so here is what you would have seen if I had managed to finish on time: <a href="https://scitech.video/videos/watch/4aad91c3-30bb-479f-8437-a517354594db">https://scitech.video/videos/watch/4aad91c3-30bb-479f-8437-a517354594db</a></p>
</blockquote>
<h2 id="dept-of-sdks-and-frameworks">Dept of SDKs and Frameworks 🧰</h2>
<h3 id="matrixbz">matrixbz</h3>
<p><a href="https://matrix.to/#/@patrick:tincan.community">patrick</a> announced:</p>
<blockquote>
<h4 id="simple-matrix-bots-with-matrix-nio">simple matrix bots with <a href="https://github.com/poljar/matrix-nio">matrix-nio</a></h4>
<p>Hey all! I built yet another bot library. matrixbz was built with the intention of making it easy to draft matrix bots. Check out the <a href="https://github.com/decentralabs/matrixbz">github</a> - I've added some examples where you can build a bot in ~10 lines of python code. matrixbz features:</p>
<ul>
<li>
<p><strong>Auth</strong> - you can specify user(s) who are authorized to call commands. bot only accepts invites from those users.</p>
</li>
<li>
<p><strong>Cache</strong> - you can cache results for particular command invocations.</p>
</li>
</ul>
<p>Check out the <a href="https://pypi.org/project/matrixbz/">package</a>.</p>
</blockquote>
<h3 id="ruma">Ruma</h3>
<p><a href="https://matrix.to/#/@iinuwa:matrix.org">iinuwa</a> reported:</p>
<blockquote>
<p>We have released version 0.0.1 of the <code>ruma</code> crate! Thanks to all of our contributors!</p>
<p>Besides that and continuing to refine <code>ruma-events</code>, here are some other highlights over the past couple weeks:</p>
<ul>
<li>
<p>Implemented a few more endpoints implemented on <code>ruma-federation-api</code></p>
</li>
<li>
<p>Added helper macros for creating identifier types</p>
</li>
</ul>
</blockquote>
<h2 id="dept-of-bots-robot-face">Dept of Bots 🤖</h2>
<h3 id="hemppa">Hemppa</h3>
<p><a href="https://matrix.to/#/@cos:hacklab.fi">Cos</a> told us:</p>
<blockquote>
<p>Hemppa the bot is a general use bot that has lot of modules for various uses and super easy API to create more. Hemppa received support for Mastodon. Now you can login to your Mastodon account and send toots via Matrix. Next major feature would be to subscribe to hashtags and users and get notifications to Matrix rooms. <a href="https://github.com/vranki/hemppa#mastodon">https://github.com/vranki/hemppa#mastodon</a></p>
</blockquote>
<h3 id="hopeless-the-hope-conference-bot">HOPEless, the HOPE conference bot</h3>
<p><a href="https://matrix.to/#/@valka:fairydust.space">valka</a> said:</p>
<blockquote>
<p>The <a href="https://hope.net/">Hackers on Planet Earth</a> conference went almost entirely self-hosted this year due to not being able to hold an in-person event, and used Matrix to go virtual! <a href="https://github.com/gracchus163/hopeless">hopeless</a> was the robot-heart of the conference, providing community+room ACLs for attendees. The bot also has a bunch of other features including:</p>
<ul>
<li>
<p>configured admins sending notices to rooms</p>
</li>
<li>
<p>ability to manually and programmatically schedule announcements for scheduled events happening, like workshops or talks</p>
</li>
<li>
<p>the ability for users to re-join rooms and generate invites for themselves as necessary</p>
</li>
<li>
<p>admin commands for inviting attendees and presenters without tickets</p>
</li>
<li>
<p>an attempt to be friendly and solve people's common problems without a real person having to assist (surprisingly effective!)</p>
</li>
</ul>
<p>Many thanks to the <a href="https://github.com/anoadragon453/nio-template">nio-template</a> for existing, otherwise this wouldn't have been possible!</p>
</blockquote>
<p><a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> (nio-template) creator responded:</p>
<blockquote>
<p>Wonderful! I plan to give it some more love soon, including some docker magic to make it easier to run.</p>
<p>If you ever have any feedback about improving it, feel free to post it in <a href="https://matrix.to/#/#nio-template:amorgan.xyz">#nio-template:amorgan.xyz</a> :)</p>
</blockquote>
<h3 id="matrix-diskstation-bot">matrix-diskstation-bot</h3>
<p><a href="https://matrix.to/#/@kb1rd:kb1rd.net">KB1RD</a> said:</p>
<blockquote>
<p>This is just a stupid simple bot based on <a href="https://github.com/turt2live/matrix-bot-sdk-bot-template">T r a v i s R's matrix-bot-sdk-bot-template</a> that forwards alerts from a Synology DiskStation NAS to Matrix room(s).</p>
<p>It's on <a href="https://github.com/KB1RD/matrix-diskstation-bot">GitHub</a> and <a href="https://hub.docker.com/r/kb1rdweb/matrix-diskstation-bot">Docker Hub</a></p>
</blockquote>
<h2 id="dept-of-ping-table-tennis-paddle-and-ball">Dept of Ping 🏓</h2>
<p>Here we reveal, rank, and applaud the homeservers with the lowest ping, as measured by <a href="https://github.com/maubot/echo">pingbot</a>, a <a href="https://github.com/maubot/maubot">maubot</a> that you can host on your own server. Join <a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">fairydust.space</td><td style="text-align: center">426</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">privacytools.io</td><td style="text-align: center">438</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">saferutar.com</td><td style="text-align: center">487</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">maunium.net</td><td style="text-align: center">534</td></tr>
<tr><td style="text-align: center">5</td><td style="text-align: center">heitkoetter.net</td><td style="text-align: center">570</td></tr>
<tr><td style="text-align: center">6</td><td style="text-align: center">chatcloud.net</td><td style="text-align: center">640</td></tr>
<tr><td style="text-align: center">7</td><td style="text-align: center">encom.eu.org</td><td style="text-align: center">658.5</td></tr>
<tr><td style="text-align: center">8</td><td style="text-align: center">envs.net</td><td style="text-align: center">697</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">matrix.vgorcum.com</td><td style="text-align: center">847</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">neko.dev</td><td style="text-align: center">879</td></tr>
</tbody></table>
<h2 id="that-s-all-i-know-checkered-flag">That's all I know 🏁</h2>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2020&#x2F;07&#x2F;31&#x2F;this-week-in-matrix-2020-07-31&#x2F;" title="This Week in Matrix 2020-07-31">This Week in Matrix 2020-07-31</a></h1>
            <span>
                31.07.2020 20:51
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            <br>
            <small>Last update: 31.07.2020 20:24</small>
        </header>
        <div>
            <h2 id="matrix-live">Matrix Live 🎙</h2>
<iframe src="https://www.youtube.com/embed/Ac6YcTUvnA8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2 id="dept-of-status-of-matrix-face-with-th">Dept of <em>Status of Matrix</em> 🌡️</h2>
<p><a href="https://www.zdnet.com/article/open-source-is-behind-this-massive-messaging-and-collaboration-project-for-500000-people/">Matrix is being used in the &quot;world's biggest messaging and collaboration&quot; deployment</a>.</p>
<blockquote>
<p>[Matrix will] be rolled out by the German education system to provide collaboration tools for half a million seats in the states of Schleswig-Holstein and Hamburg</p>
</blockquote>
<p>Casual 500,000 user deployment, very nice!</p>
<h2 id="dept-of-spec-scroll">Dept of Spec 📜</h2>
<p><a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> announced:</p>
<blockquote>
<p>Here's your weekly spec update! The heart of Matrix is the specification - and this is modified by Matrix Spec Change (MSC) proposals. Learn more about how the process works at <a href="https://matrix.org/docs/spec/proposals.">https://matrix.org/docs/spec/proposals.</a></p>
<h4 id="msc-status">MSC Status</h4>
<p><strong>Finished FCP:</strong></p>
<ul>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2689">MSC2689: Fix E2EE for guests</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2663">MSC2663: Errors for dealing with non-existent push rules</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2611">MSC2611: Remove m.login.token User-Interactive Authentication type from the specification</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2610">MSC2610: Remove m.login.oauth2 User-Interactive Authentication type from the specification</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2579">MSC2579: Improved tagging support</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/1849">MSC1849: Proposal for m.relates_to aggregations</a></p>
</li>
</ul>
<p><strong>MSCs in Final Comment Period:</strong></p>
<ul>
<li><em>No MSCs are in FCP.</em></li>
</ul>
<p><strong>New MSCs:</strong></p>
<ul>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2713">MSC2713: Remove deprecated v1 Identity Service API</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2706">[WIP] MSC2706: IPFS as a media repository for Matrix</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2705">MSC2705: Animated thumbnails for media (and thumbnail content-type requirements)</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2704">MSC2704: Explicitly allow alternative origins in MXC URIs and specify deduplication requirements on uploads</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2703">MSC2703: Media ID grammar</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2702">MSC2702: Specifying semantics for Content-Disposition on media</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2701">MSC2701: Clarifying Content-Type usage in the media repo</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2700">MSC2700: Thumbnail requirements for the media repo</a></p>
</li>
</ul>
<h4 id="spec-core-team">Spec Core Team</h4>
<p>In terms of Spec Core Team MSC focus for this week, we'll be continuing on with <a href="https://github.com/matrix-org/matrix-doc/issues/2674">MSC2674</a> (aggregations pt1: relationships) and adding <a href="https://github.com/matrix-org/matrix-doc/issues/1544">MSC1544</a> (QR code verification) on top.</p>
</blockquote>
<p><img src="/blog/img/2020-07-31-3hFLP-stacked_area_chart.png" alt="2020-07-31-3hFLP-stacked_area_chart.png" /></p>
<h2 id="dept-of-gsoc-mortar-board">Dept of GSoC 🎓️</h2>
<h3 id="karlik">karlik</h3>
<p><a href="https://matrix.to/#/@karlik:matrix.org">karlik</a> announced:</p>
<blockquote>
<p>for matrix-ircd</p>
<ul>
<li>
<p>Merged update for total move to async / await into development branch, (hopefully) soon to be merged to master</p>
</li>
<li>
<p>Made single-threaded project thread-safe for easily scaling up to potentially many threads</p>
</li>
<li>
<p>Added additional logging for tls and non-tls connections for more clear debugging</p>
</li>
</ul>
</blockquote>
<h2 id="dept-of-servers-europea">Dept of Servers 🏢</h2>
<h3 id="e2e-dendrite">E2E Dendrite</h3>
<p>Dendrite is a next-generation homeserver written in Go</p>
<p><a href="https://matrix.to/#/@kegan:matrix.org">kegan</a> reported:</p>
<blockquote>
<p>E2E Dendrite work is progressing, and we're making a lot of breaking changes ahead of our first stable release which you can expect in the coming weeks.</p>
<p>As for the changes this week:</p>
<ul>
<li>
<p>Add a bare bones user directory. This is mainly to benefit the iOS Yggdrasil demo.</p>
</li>
<li>
<p>The <code>dendrite-config.yaml</code> configuration format has been overhauled. It's still in review but expect big changes here!</p>
</li>
<li>
<p>Fixed a bug with SQLite when handling large rooms (thanks @HenrikSolver!)</p>
</li>
<li>
<p>Device lists now work locally, with federation support to come.</p>
</li>
</ul>
<p>Spec compliance is up from last week:</p>
<ul>
<li>Client-Server APIs: 51%, up from 49%.</li>
<li>Federation APIs: remains at 53%.</li>
</ul>
</blockquote>
<h3 id="conduit">Conduit</h3>
<p>Conduit is a Matrix homeserver written in Rust <a href="https://conduit.rs">https://conduit.rs</a></p>
<p><a href="https://matrix.to/#/@timo:koesters.xyz">timo</a> announced:</p>
<blockquote>
<p>Welcome back! This week was very productive:</p>
<ul>
<li>
<p>Ignore users (thanks @devinr528)</p>
</li>
<li>
<p>Long polling (faster and more efficient /sync)</p>
</li>
<li>
<p>Fix and improve presence</p>
</li>
<li>
<p>Room tagging (thanks @gnieto)</p>
</li>
<li>
<p>/publicRooms pagination</p>
</li>
<li>
<p>Refactor endpoints into modules</p>
</li>
<li>
<p>Export endpoints as a library (useful for p2p!)</p>
</li>
<li>
<p>Config options to set the maximum upload size or disable encryption</p>
</li>
<li>
<p>and more!</p>
</li>
</ul>
<p>Thanks to everyone who supports me on <a href="https://liberapay.com/timokoesters">Liberapay</a> or Bitcoin!</p>
</blockquote>
<h3 id="synapse">Synapse</h3>
<p><a href="https://matrix.to/#/@neilj:matrix.org">Neil</a> offered:</p>
<blockquote>
<p>This week we shipped <a href="https://matrix.org/blog/2020/07/30/synapse-1-18-0-released">1.18.0</a> which contained support for our worker sharding performance projects that you’ve been hearing about recently.</p>
<p>We also shipped a security and feature release of <a href="https://github.com/matrix-org/sygnal/releases">Sygnal</a> (actually two each…). The main new feature being the ability to run behind an HTTP proxy which is useful in environments that mandate that all traffic go through a proxy.</p>
<p>Aside from that week we continued our async/await-athon and Patrick provided a visual update</p>
</blockquote>
<p><img src="/blog/img/2020-07-31-m2KRg-image.png" alt="2020-07-31-m2KRg-image.png" /></p>
<blockquote>
<p>We’ve been documenting worker support and diving into sharding the event persisters. This is not a small job since it means every other part of the code base that assumes an integer stream id will need to be updated to be aware of multiple stream ids from multiple persisters.</p>
<p>Over in feature land we’ve been working on the notifications project and most of the backend support is done. The project will mean more intuitive defaults as well as a much better client UX in configuring notification settings.</p>
<p>Finally special thanks to <a href="https://github.com/aaronraimist">Aaron Raimist</a> for a bumper <a href="https://github.com/matrix-org/synapse/pull/7899">docs PR</a></p>
</blockquote>
<h2 id="synapse-deployment-inbox-tray">Synapse Deployment 📥️</h2>
<h3 id="kubernetes">Kubernetes</h3>
<p><a href="https://matrix.to/#/@ace:kittenface.studio">Ananace</a> offered:</p>
<blockquote>
<p>Just pushed the 1.18.0 K8s-optimized Synapse images, now only doing the debian-based version as like upstream - though still including jemalloc. So <code>latest</code>/<code>v1.18.0</code> and <code>*-debian</code> will be the same in this version and going forwards. Additionally, the <code>*-debian</code> tags will only remain for a release or two more before disappearing, as they're now superfluous.</p>
</blockquote>
<h2 id="dept-of-bridges-bridge-at-night">Dept of Bridges 🌉</h2>
<h3 id="mautrix-telegram">mautrix-telegram</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> offered:</p>
<blockquote>
<p>I finally added automatic backfilling options to mautrix-telegram. Like my other bridges, it can backfill old messages when creating portals and missed messages when restarting, and it can disable notifications in the room while backfilling.</p>
<p>I also added bridging for your own read receipts, so if you read a message with another Telegram client, the bridge will mark it as read on your Matrix account with double puppeting.</p>
</blockquote>
<h2 id="dept-of-clients-iphone">Dept of Clients 📱</h2>
<h3 id="novachat">NovaChat</h3>
<p><a href="https://matrix.to/#/@eric:nova.chat">eric</a> reported:</p>
<blockquote>
<p><a href="https://nova.chat">NovaChat</a> is a new Matrix-based desktop client that aggregates all your chat networks into one app</p>
<h4 id="july-31-updates">July 31 Updates:</h4>
<ul>
<li>
<p>New room list design, featuring collapsible 'clusters' (see gif)</p>
</li>
<li>
<p>Enabled encrypted room search (thanks <a href="https://matrix.to/#/#seshat:matrix.org">#seshat:matrix.org</a>!)</p>
</li>
<li>
<p>Added [mautrix-twitter]( <a href="https://github.com/tulir/mautrix-twitter)">https://github.com/tulir/mautrix-twitter)</a></p>
</li>
<li>
<p>Worked around FB Messenger bridge 'forced-logout issue' by routing traffic through proxy on Raspberry Pi at each users home</p>
</li>
</ul>
<h4 id="in-the-works">In the works...</h4>
<ul>
<li>
<p>Create new clusters of chats in room list, using tags </p>
</li>
<li>
<p>iMessage bridge, using jailbroken iDevice </p>
</li>
<li>
<p>Android Messages bridge</p>
</li>
</ul>
<p>Adding new users weekly. Sign up for the <a href="https://nova.chat">NovaChat beta</a>. Or send me a DM @eric:nova.chat</p>
</blockquote>
<p><img src="/blog/img/2020-07-31-yJ-jJ-NovaChat-Newroomlist.gif" alt="2020-07-31-yJ-jJ-NovaChat-Newroomlist.gif" /></p>
<h3 id="gomuks">gomuks</h3>
<p><a href="https://maunium.net/go/gomuks">gomuks</a> is a terminal based Matrix client written in Go. <a href="https://github.com/tulir/gomuks">Source on GitHub</a></p>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> told us:</p>
<blockquote>
<p>gomuks can now do interactive verification for e2ee. Most of it is thanks to nikofil's <a href="https://github.com/tulir/mautrix-go/pull/16">SAS verification PR</a> to mautrix-go, I just made a UI for using it. Currently gomuks can only send verification requests, but I'll add some interface for accepting incoming requests soon.</p>
<p>Related to verification, there are some new commands for verifying/unverifying/blacklisting devices and viewing device lists. There's also a toggle to disable sending messages to unverified devices.</p>
</blockquote>
<p>This is super exciting, raises gomuks to the level of a daily driver IMO.</p>
<h3 id="fractal">Fractal</h3>
<p><a href="https://matrix.to/#/@afranke:matrix.org">Alexandre Franke</a> announced:</p>
<blockquote>
<p>We will release version 4.4 next Friday. Now is a good time to test the <a href="https://wiki.gnome.org/Apps/Nightly">nightly</a> version and check if it doesn’t break anything with your homeserver compared to 4.2.<br />
The changelog has been sparsely given in previous TWIMs, but you could have a look at <a href="https://gitlab.gnome.org/GNOME/fractal/-/commit/463e6bc9988e2d8fffbfc38058f8d0b12cd074d7">https://gitlab.gnome.org/GNOME/fractal/-/commit/463e6bc9988e2d8fffbfc38058f8d0b12cd074d7</a></p>
</blockquote>
<h3 id="element-ios-previously-riot-ios">Element-iOS, previously Riot-iOS</h3>
<p><a href="https://matrix.to/#/@Manu:matrix.org">Manu</a> announced:</p>
<blockquote>
<p>We released 1.0.2 this week to the AppStore and on TestFlight. It's mainly a bug fix release after the Element rebranding.</p>
</blockquote>
<h2 id="dept-of-sdks-and-frameworks">Dept of SDKs and Frameworks 🧰</h2>
<h3 id="mautrix-go">mautrix-go</h3>
<p><a href="https://matrix.to/#/@nikofil:matrix.org">nikofil</a> offered:</p>
<blockquote>
<p>SAS verification support has been merged! Support for it should also be landing in go-neb soon, both for verifying with the bot's device and for testing with go-neb's client testing service. Next up, looking at SSSS and eventually cross-verification support.</p>
</blockquote>
<h2 id="dept-of-ops">Dept of Ops 🛠</h2>
<h3 id="yunohost">YunoHost</h3>
<p><a href="https://matrix.to/#/@pierre:matrix.mamieserv.fr">Pierre</a> told us:</p>
<blockquote>
<p><a href="https://yunohost.org">YunoHost</a> is an operating system aiming for the simplest administration of a server, and therefore democratize self-hosting.</p>
<p><a href="https://github.com/YunoHost-Apps/synapse_ynh/tree/master">Synapse</a> integration had been updated to 1.15.2 (1.17.0 available in branch <code>testing</code>)</p>
<p><a href="https://github.com/YunoHost-Apps/riot_ynh/tree/master">Riot Web</a> integration had been updated to 1.6.8 (Element 1.7.1 available in branch <code>element</code>)</p>
</blockquote>
<h2 id="final-thoughts-thought-balloon">Final Thoughts 💭</h2>
<p><a href="https://matrix.to/#/@tobi:im.kabi.tk">Tobi</a> said:</p>
<blockquote>
<p>We, some German Synapse admins, have created a survey about the usage of Matrix-Synapse for private statistic purpose (results will be published alike). As suggested in <a href="https://matrix.to/#/#synapse:matrix.org">#synapse:matrix.org</a>, this could also be a topic for &quot;TWIM&quot;.</p>
</blockquote>
<p>Find the survey at <a href="http://go.kabi.tk/MatrixQuestionnaire2020">http://go.kabi.tk/MatrixQuestionnaire2020</a>.</p>
<h2 id="dept-of-ping-table-tennis-paddle-and-ball">Dept of Ping 🏓</h2>
<p>Here we reveal, rank, and applaud the homeservers with the lowest ping, as measured by <a href="https://github.com/maubot/echo">pingbot</a>, a <a href="https://github.com/maubot/maubot">maubot</a> that you can host on your own server. Join <a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">kleinhirn.net</td><td style="text-align: center">366</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">fairydust.space</td><td style="text-align: center">383</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">tchncs.de</td><td style="text-align: center">394.5</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">mjdsystems.ca</td><td style="text-align: center">506</td></tr>
<tr><td style="text-align: center">5</td><td style="text-align: center">matrix.org</td><td style="text-align: center">587</td></tr>
<tr><td style="text-align: center">6</td><td style="text-align: center">nobelium.no</td><td style="text-align: center">753.5</td></tr>
<tr><td style="text-align: center">7</td><td style="text-align: center">pixie.town</td><td style="text-align: center">761</td></tr>
<tr><td style="text-align: center">8</td><td style="text-align: center">matrix.linux.pizza</td><td style="text-align: center">1111</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">uraziel.de</td><td style="text-align: center">1230.5</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">yyyyyyy.ml</td><td style="text-align: center">1314</td></tr>
</tbody></table>
<h2 id="that-s-all-i-know-checkered-flag">That's all I know 🏁</h2>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2020&#x2F;07&#x2F;30&#x2F;synapse-1-18-0-released&#x2F;" title="Synapse 1.18.0 released">Synapse 1.18.0 released</a></h1>
            <span>
                30.07.2020 18:34
                —
                <a href="/category/releases">
                    Releases
                </a>
                —
                <a href="/author/neil-johnson">
                    Neil Johnson
                </a>
            </span>
            
        </header>
        <div>
            <p>Synapse 1.18.0 has landed.</p>
<p>The most important thing to know about 1.18.0 is that it contains support for sharding multiple workers. Specifically this means being able to run multiple federation senders, multiple client readers to handle registration and multiple push workers. This will be important for anyone running a large scale install of Synapse. You can read more about how to benefit from these changes in <a href="https://github.com/matrix-org/synapse/blob/develop/docs/workers.md">docs/workers.md</a>. In the same spirit we also moved typing notifications from the main process.</p>
<p>Aside from that, we have new admin API support to list the users in a room, support for oEmbed for media previews (you can unfurl tweets again!) and a general slew of federation bug fixes.</p>
<p>Get the new releases from any of the usual sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md. 1.18.0 is on github <a href="https://github.com/matrix-org/synapse/releases/tag/v1.18.0">here</a>.</p>
<p>Changelog for 1.18.0 follows:</p>
<h1 id="synapse-1-18-0-2020-07-30">Synapse 1.18.0 (2020-07-30)</h1>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Update worker docs with latest enhancements. (<a href="https://github.com/matrix-org/synapse/issues/7969">#7969</a>)</li>
</ul>
<h1 id="synapse-1-18-0rc2-2020-07-28">Synapse 1.18.0rc2 (2020-07-28)</h1>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix an <code>AssertionError</code> exception introduced in v1.18.0rc1. (<a href="https://github.com/matrix-org/synapse/issues/7876">#7876</a>)</li>
<li>Fix experimental support for moving typing off master when worker is restarted, which is broken in v1.18.0rc1. (<a href="https://github.com/matrix-org/synapse/issues/7967">#7967</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Further optimise queueing of inbound replication commands. (<a href="https://github.com/matrix-org/synapse/issues/7876">#7876</a>)</li>
</ul>
<h1 id="synapse-1-18-0rc1-2020-07-27">Synapse 1.18.0rc1 (2020-07-27)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Include room states on invite events that are sent to application services. Contributed by @Sorunome. (<a href="https://github.com/matrix-org/synapse/issues/6455">#6455</a>)</li>
<li>Add delete room admin endpoint (<code>POST /_synapse/admin/v1/rooms/&lt;room_id&gt;/delete</code>). Contributed by @dklimpel. (<a href="https://github.com/matrix-org/synapse/issues/7613">#7613</a>, <a href="https://github.com/matrix-org/synapse/issues/7953">#7953</a>)</li>
<li>Add experimental support for running multiple federation sender processes. (<a href="https://github.com/matrix-org/synapse/issues/7798">#7798</a>)</li>
<li>Add the option to validate the <code>iss</code> and <code>aud</code> claims for JWT logins. (<a href="https://github.com/matrix-org/synapse/issues/7827">#7827</a>)</li>
<li>Add support for handling registration requests across multiple client reader workers. (<a href="https://github.com/matrix-org/synapse/issues/7830">#7830</a>)</li>
<li>Add an admin API to list the users in a room. Contributed by Awesome Technologies Innovationslabor GmbH. (<a href="https://github.com/matrix-org/synapse/issues/7842">#7842</a>)</li>
<li>Allow email subjects to be customised through Synapse's configuration. (<a href="https://github.com/matrix-org/synapse/issues/7846">#7846</a>)</li>
<li>Add the ability to re-activate an account from the admin API. (<a href="https://github.com/matrix-org/synapse/issues/7847">#7847</a>, <a href="https://github.com/matrix-org/synapse/issues/7908">#7908</a>)</li>
<li>Add experimental support for running multiple pusher workers. (<a href="https://github.com/matrix-org/synapse/issues/7855">#7855</a>)</li>
<li>Add experimental support for moving typing off master. (<a href="https://github.com/matrix-org/synapse/issues/7869">#7869</a>, <a href="https://github.com/matrix-org/synapse/issues/7959">#7959</a>)</li>
<li>Report CPU metrics to prometheus for time spent processing replication commands. (<a href="https://github.com/matrix-org/synapse/issues/7879">#7879</a>)</li>
<li>Support oEmbed for media previews. (<a href="https://github.com/matrix-org/synapse/issues/7920">#7920</a>)</li>
<li>Abort federation requests where the client disconnects before the ratelimiter expires. (<a href="https://github.com/matrix-org/synapse/issues/7930">#7930</a>)</li>
<li>Cache responses to <code>/_matrix/federation/v1/state_ids</code> to reduce duplicated work. (<a href="https://github.com/matrix-org/synapse/issues/7931">#7931</a>)</li>
</ul>
<h2 id="bugfixes-1">Bugfixes</h2>
<ul>
<li>Fix detection of out of sync remote device lists when receiving events from remote users. (<a href="https://github.com/matrix-org/synapse/issues/7815">#7815</a>)</li>
<li>Fix bug where Synapse fails to process an incoming event over federation if the server is missing too much of the event's auth chain. (<a href="https://github.com/matrix-org/synapse/issues/7817">#7817</a>)</li>
<li>Fix a bug causing Synapse to misinterpret the value <code>off</code> for <code>encryption_enabled_by_default_for_room_type</code> in its configuration file(s) if that value isn't surrounded by quotes. This bug was introduced in v1.16.0. (<a href="https://github.com/matrix-org/synapse/issues/7822">#7822</a>)</li>
<li>Fix bug where we did not always pass in <code>app_name</code> or <code>server_name</code> to email templates, including e.g. for registration emails. (<a href="https://github.com/matrix-org/synapse/issues/7829">#7829</a>)</li>
<li>Errors which occur while using the non-standard JWT login now return the proper error: <code>403 Forbidden</code> with an error code of <code>M_FORBIDDEN</code>. (<a href="https://github.com/matrix-org/synapse/issues/7844">#7844</a>)</li>
<li>Fix &quot;AttributeError: 'str' object has no attribute 'get'&quot; error message when applying per-room message retention policies. The bug was introduced in Synapse 1.7.0. (<a href="https://github.com/matrix-org/synapse/issues/7850">#7850</a>)</li>
<li>Fix a bug introduced in Synapse 1.10.0 which could cause a &quot;no create event in auth events&quot; error during room creation. (<a href="https://github.com/matrix-org/synapse/issues/7854">#7854</a>)</li>
<li>Fix a bug which allowed empty rooms to be rejoined over federation. (<a href="https://github.com/matrix-org/synapse/issues/7859">#7859</a>)</li>
<li>Fix 'Unable to find a suitable guest user ID' error when using multiple client_reader workers. (<a href="https://github.com/matrix-org/synapse/issues/7866">#7866</a>)</li>
<li>Fix a long standing bug where the tracing of async functions with opentracing was broken. (<a href="https://github.com/matrix-org/synapse/issues/7872">#7872</a>, <a href="https://github.com/matrix-org/synapse/issues/7961">#7961</a>)</li>
<li>Fix &quot;TypeError in <code>synapse.notifier</code>&quot; exceptions. (<a href="https://github.com/matrix-org/synapse/issues/7880">#7880</a>)</li>
<li>Fix deprecation warning due to invalid escape sequences. (<a href="https://github.com/matrix-org/synapse/issues/7895">#7895</a>)</li>
</ul>
<h2 id="updates-to-the-docker-image">Updates to the Docker image</h2>
<ul>
<li>Base docker image on Debian Buster rather than Alpine Linux. Contributed by @maquis196. (<a href="https://github.com/matrix-org/synapse/issues/7839">#7839</a>)</li>
</ul>
<h2 id="improved-documentation-1">Improved Documentation</h2>
<ul>
<li>Provide instructions on using <code>register_new_matrix_user</code> via docker. (<a href="https://github.com/matrix-org/synapse/issues/7885">#7885</a>)</li>
<li>Change the sample config postgres user section to use <code>synapse_user</code> instead of <code>synapse</code> to align with the documentation. (<a href="https://github.com/matrix-org/synapse/issues/7889">#7889</a>)</li>
<li>Reorder database paragraphs to promote postgres over sqlite. (<a href="https://github.com/matrix-org/synapse/issues/7933">#7933</a>)</li>
<li>Update the dates of ACME v1's end of life in <a href="https://github.com/matrix-org/synapse/blob/master/docs/ACME.md"><code>ACME.md</code></a>. (<a href="https://github.com/matrix-org/synapse/issues/7934">#7934</a>)</li>
</ul>
<h2 id="deprecations-and-removals">Deprecations and Removals</h2>
<ul>
<li>Remove unused <code>synapse_replication_tcp_resource_invalidate_cache</code> prometheus metric. (<a href="https://github.com/matrix-org/synapse/issues/7878">#7878</a>)</li>
<li>Remove Ubuntu Eoan from the list of <code>.deb</code> packages that we build as it is now end-of-life. Contributed by @gary-kim. (<a href="https://github.com/matrix-org/synapse/issues/7888">#7888</a>)</li>
</ul>
<h2 id="internal-changes-1">Internal Changes</h2>
<ul>
<li>Switch parts of the codebase from <code>simplejson</code> to the standard library <code>json</code>. (<a href="https://github.com/matrix-org/synapse/issues/7802">#7802</a>)</li>
<li>Add type hints to the http server code and remove an unused parameter. (<a href="https://github.com/matrix-org/synapse/issues/7813">#7813</a>)</li>
<li>Add type hints to synapse.api.errors module. (<a href="https://github.com/matrix-org/synapse/issues/7820">#7820</a>)</li>
<li>Ensure that calls to <code>json.dumps</code> are compatible with the standard library json. (<a href="https://github.com/matrix-org/synapse/issues/7836">#7836</a>)</li>
<li>Remove redundant <code>retry_on_integrity_error</code> wrapper for event persistence code. (<a href="https://github.com/matrix-org/synapse/issues/7848">#7848</a>)</li>
<li>Consistently use <code>db_to_json</code> to convert from database values to JSON objects. (<a href="https://github.com/matrix-org/synapse/issues/7849">#7849</a>)</li>
<li>Convert various parts of the codebase to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7851">#7851</a>, <a href="https://github.com/matrix-org/synapse/issues/7860">#7860</a>, <a href="https://github.com/matrix-org/synapse/issues/7868">#7868</a>, <a href="https://github.com/matrix-org/synapse/issues/7871">#7871</a>, <a href="https://github.com/matrix-org/synapse/issues/7873">#7873</a>, <a href="https://github.com/matrix-org/synapse/issues/7874">#7874</a>, <a href="https://github.com/matrix-org/synapse/issues/7884">#7884</a>, <a href="https://github.com/matrix-org/synapse/issues/7912">#7912</a>, <a href="https://github.com/matrix-org/synapse/issues/7935">#7935</a>, <a href="https://github.com/matrix-org/synapse/issues/7939">#7939</a>, <a href="https://github.com/matrix-org/synapse/issues/7942">#7942</a>, <a href="https://github.com/matrix-org/synapse/issues/7944">#7944</a>)</li>
<li>Add support for handling registration requests across multiple client reader workers. (<a href="https://github.com/matrix-org/synapse/issues/7853">#7853</a>)</li>
<li>Small performance improvement in typing processing. (<a href="https://github.com/matrix-org/synapse/issues/7856">#7856</a>)</li>
<li>The default value of <code>filter_timeline_limit</code> was changed from -1 (no limit) to 100. (<a href="https://github.com/matrix-org/synapse/issues/7858">#7858</a>)</li>
<li>Optimise queueing of inbound replication commands. (<a href="https://github.com/matrix-org/synapse/issues/7861">#7861</a>)</li>
<li>Add some type annotations to <code>HomeServer</code> and <code>BaseHandler</code>. (<a href="https://github.com/matrix-org/synapse/issues/7870">#7870</a>)</li>
<li>Clean up <code>PreserveLoggingContext</code>. (<a href="https://github.com/matrix-org/synapse/issues/7877">#7877</a>)</li>
<li>Change &quot;unknown room version&quot; logging from 'error' to 'warning'. (<a href="https://github.com/matrix-org/synapse/issues/7881">#7881</a>)</li>
<li>Stop using <code>device_max_stream_id</code> table and just use <code>device_inbox.stream_id</code>. (<a href="https://github.com/matrix-org/synapse/issues/7882">#7882</a>)</li>
<li>Return an empty body for OPTIONS requests. (<a href="https://github.com/matrix-org/synapse/issues/7886">#7886</a>)</li>
<li>Fix typo in generated config file. Contributed by @ThiefMaster. (<a href="https://github.com/matrix-org/synapse/issues/7890">#7890</a>)</li>
<li>Import ABC from <code>collections.abc</code> for Python 3.10 compatibility. (<a href="https://github.com/matrix-org/synapse/issues/7892">#7892</a>)</li>
<li>Remove unused functions <code>time_function</code>, <code>trace_function</code>, <code>get_previous_frames</code>
and <code>get_previous_frame</code> from <code>synapse.logging.utils</code> module. (<a href="https://github.com/matrix-org/synapse/issues/7897">#7897</a>)</li>
<li>Lint the <code>contrib/</code> directory in CI and linting scripts, add <code>synctl</code> to the linting script for consistency with CI. (<a href="https://github.com/matrix-org/synapse/issues/7914">#7914</a>)</li>
<li>Use Element CSS and logo in notification emails when app name is Element. (<a href="https://github.com/matrix-org/synapse/issues/7919">#7919</a>)</li>
<li>Optimisation to /sync handling: skip serializing the response if the client has already disconnected. (<a href="https://github.com/matrix-org/synapse/issues/7927">#7927</a>)</li>
<li>When a client disconnects, don't log it as 'Error processing request'. (<a href="https://github.com/matrix-org/synapse/issues/7928">#7928</a>)</li>
<li>Add debugging to <code>/sync</code> response generation (disabled by default). (<a href="https://github.com/matrix-org/synapse/issues/7929">#7929</a>)</li>
<li>Update comments that refer to Deferreds for async functions. (<a href="https://github.com/matrix-org/synapse/issues/7945">#7945</a>)</li>
<li>Simplify error handling in federation handler. (<a href="https://github.com/matrix-org/synapse/issues/7950">#7950</a>)</li>
</ul>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2020&#x2F;07&#x2F;24&#x2F;this-week-in-matrix-2020-07-24&#x2F;" title="This Week in Matrix 2020-07-24">This Week in Matrix 2020-07-24</a></h1>
            <span>
                24.07.2020 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="matrix-live">Matrix Live 🎙</h2>
<iframe src="https://www.youtube.com/embed/FWcx3OJHLGc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h2 id="dept-of-status-of-matrix-face-with-th">Dept of <em>Status of Matrix</em> 🌡️</h2>
<h3 id="new-guide-for-client-e2ee-implementation-including-cross-signing">New guide for client e2ee implementation, including cross-signing</h3>
<p>Thanks and congratulations to Sorunome this week for releasing a new guide: <a href="https://matrix.org/docs/guides/implementing-more-advanced-e-2-ee-features-such-as-cross-signing">Implementing more advanced e2ee features, such as cross-signing</a>. This is a hugely detailed guide detailing the necessary steps to enable Cross-Signing and verification. Thanks as well to uhoreg and poljar for their work in reviewing the text!</p>
<h3 id="new-masters-thesis-written-on-matrix">New Masters Thesis written on Matrix</h3>
<p><a href="https://matrix.to/#/@jsparber:gnome.org">Julian Sparber</a> announced:</p>
<blockquote>
<p>I wrote a master thesis that tries to create e2e encryption based on Ethereum on top of Matrix. It may not solve all problems but it's an interesting experiment</p>
<p><a href="https://blogs.gnome.org/jsparber/2020/07/20/i-finished-my-masters-degree/">https://blogs.gnome.org/jsparber/2020/07/20/i-finished-my-masters-degree/</a></p>
</blockquote>
<p>I didn't get to look at this yet but it's exciting!</p>
<h2 id="dept-of-spec-scroll">Dept of Spec 📜</h2>
<p><a href="https://matrix.to/#/@kitsune:matrix.org">kitsune</a> (guess who's back!?) said:</p>
<blockquote>
<p>I have put the long-awaited MSC2312 out of WIP - this is about matrix: URIs in case you haven't heard - and it's already in active discussion at <a href="https://matrix.to/#/#uri-scheme-proposal:matrix.org">#uri-scheme-proposal:matrix.org</a>! Join the fun to make it the most awesome! The upcoming Quotient 0.6 has an implementation of those so adventurous Quaternion users can start experimenting right away.</p>
</blockquote>
<h3 id="spec">Spec</h3>
<p><a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> reported:</p>
<blockquote>
<p>Here's your weekly spec update! The heart of Matrix is the specification - and this is modified by Matrix Spec Change (MSC) proposals. Learn more about how the process works at <a href="https://matrix.org/docs/spec/proposals">https://matrix.org/docs/spec/proposals</a>.</p>
<h4 id="msc-status">MSC Status</h4>
<p><strong>Abandoned MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2579">MSC2579: Improved tagging support</a></li>
</ul>
<p><strong>MSCs in Final Comment Period:</strong></p>
<ul>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2689">MSC2689: Fix E2EE for guests</a> (merge)</p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2663">MSC2663: Errors for dealing with non-existent push rules</a> (merge)</p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2611">MSC2611: Remove m.login.token User-Interactive Authentication type from the specification</a> (merge)</p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2610">MSC2610: Remove m.login.oauth2 User-Interactive Authentication type from the specification</a> (merge)</p>
</li>
</ul>
<p><strong>New MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2695">MSC2695: Get event by ID over federation</a></li>
</ul>
<h4 id="spec-core-team">Spec Core Team</h4>
<p>In terms of Spec Core Team MSC focus, we've reduced last week's list of 5 MSCs down to one, <a href="https://github.com/matrix-org/matrix-doc/issues/2674">MSC2674</a> (aggregations part 1: relationships). Next week, we're going to focus entirely on that MSC to make some headway on finally getting aggregations into the spec.</p>
</blockquote>
<p><img src="/blog/img/2020-07-24-oRVoi-stacked_area_chart.png" alt="2020-07-24-oRVoi-stacked_area_chart.png" /></p>
<h2 id="dept-of-gsoc-mortar-board">Dept of GSoC 🎓️</h2>
<h3 id="html-embeddable-matrix-client">HTML embeddable Matrix client</h3>
<p><a href="https://matrix.to/#/@arnav-t:matrix.org">arnav-t</a> announced:</p>
<blockquote>
<p>For the GSoC project HTML embeddable Matrix client this week:</p>
<ul>
<li>
<p>Added status bar for connection errors</p>
</li>
<li>
<p>Added support for displaying typing notifications</p>
</li>
</ul>
</blockquote>
<h2 id="dept-of-p2p-busts-in-silhouette">Dept of P2P 👥</h2>
<h3 id="p2p-dendrite">P2P / Dendrite</h3>
<p>Dendrite is a next-generation homeserver written in Go</p>
<p><a href="https://matrix.to/#/@kegan:matrix.org">kegan</a> announced:</p>
<blockquote>
<p>The P2P Yggdrasil iOS demo has seen some improvements:</p>
<ul>
<li>
<p>Federation sender blacklists are now persisted which is important as the iOS app will be frequently terminated.</p>
</li>
<li>
<p>SQLite3 now uses <code>TransactionWriters</code> in more places to reduce the amount of 'database is locked' issues.</p>
</li>
<li>
<p>Federation sender has had much of its storage code refactored and de-duplicated.</p>
</li>
</ul>
<p>In addition, there has been much work getting Dendrite to support E2E rooms, which it now mostly does.</p>
<p>You can create and join E2E rooms and have a conversation locally, though there's issues with it over federation. In addition,
Dendrite currently lacks device lists so adding new devices may result in unable-to-decrypt errors:</p>
<ul>
<li>
<p>Send-to-device events now work over federation.</p>
</li>
<li>
<p>Device key uploads and querying now work both locally and over federation.</p>
</li>
<li>
<p>One-time key uploads and claiming now work both locally and over federation.</p>
</li>
</ul>
<p>Spec compliance is up from last week:</p>
<ul>
<li>Client Server APIs: 49%, up from 48%.</li>
<li>Federation APIs: 53%, up from 51%.</li>
</ul>
</blockquote>
<p>Doesn't it feel like we'll be using Dendrite in the wild really soon now?</p>
<h2 id="dept-of-servers-europea">Dept of Servers 🏢</h2>
<h3 id="conduit">Conduit</h3>
<p>Conduit is a Matrix homeserver written in Rust <a href="https://conduit.rs">https://conduit.rs</a></p>
<p><a href="https://matrix.to/#/@timo:koesters.xyz">timo</a> offered:</p>
<blockquote>
<p>Another quiet week. Next week should be more exciting again.</p>
<ul>
<li>
<p>Moved to stable rust (rocket now compiles on stable!)</p>
</li>
<li>
<p>Implement /joined_rooms (thanks @aura)</p>
</li>
<li>
<p>Add max_request_size config option to set the maximum size for file uploads and other requests (thanks @CapsizeGlimmer)</p>
</li>
</ul>
</blockquote>
<h3 id="synapse">Synapse</h3>
<p><a href="https://matrix.to/#/@neilj:matrix.org">Neil</a> said:</p>
<blockquote>
<p>This week we continued on our async/await athon, you can track progress <a href="https://patrick.cloke.us/areweasyncyet/">here</a>, expect steady progress over the coming weeks.</p>
<p>We dusted off the notifications project working with our pals in the Element client teams to ensure that the push rule defaults make sense. On the flip side we made further improvements to Sygnal and will merge the ability to have it sit behind a proxy rsn. </p>
<p>We are also trying to figure out how media retention limits should work in Synapse.</p>
<p>Up next is to continue our performance push. We need to spend time between pulling things off the master process as well sharding the event persister. We will continue with notifications and maybe finally squash <a href="https://github.com/matrix-org/synapse/issues/2528">https://github.com/matrix-org/synapse/issues/2528</a></p>
</blockquote>
<h2 id="dept-of-bridges-bridge-at-night">Dept of Bridges 🌉</h2>
<h3 id="introducing-matrix-figma">Introducing matrix-figma</h3>
<p><a href="https://matrix.to/#/@Half-Shot:half-shot.uk">Half-Shot</a> reported:</p>
<blockquote>
<p>Hello people. It's been a while since I've talked about a new bridge...or actually any bridges. Fear not, now you can hear both! Today I'm announcing the birth of another project <code>matrix-figma</code>.  <a href="https://www.figma.com">Figma</a> is an online collaborative design tool. It was created to scratch an itch with the Element design team, who wanted to see comments appear in their Matrix rooms in realtime when someone commented on a Figma file.</p>
<p>The bridge works by first joining it to an &quot;admin room&quot;, which functions as a permitted user list. The bot can then be invited to any other room so long as the invitee is in that admin room, and can then ask the bot to start directing comment notifications into the room.</p>
<p>The room uses room state to hold configuration, so you can host the bot as a docker container anywhere without the need for any support files!</p>
<p>I can announce that the bridge is now functional for simple use cases such as these, with more interesting functionality in the future.</p>
<p>Please check out <a href="https://github.com/Half-Shot/matrix-figma">https://github.com/Half-Shot/matrix-figma</a> to see if the bridge is right for you :)</p>
</blockquote>
<h3 id="slack-matrix-migration">slack-matrix-migration</h3>
<p><a href="https://matrix.to/#/@rda:phys.ethz.ch">Sven</a> offered:</p>
<blockquote>
<p>I opened a <a href="https://github.com/Awesome-Technologies/slack-matrix-migration/pull/5">PR</a> for <a href="https://github.com/Awesome-Technologies/slack-matrix-migration">https://github.com/Awesome-Technologies/slack-matrix-migration</a>, which makes it compatible with recent <a href="https://github.com/matrix-org/synapse">Synapse</a> versions and adds new config options allowing to effectively import a Slack workspace history to an existing homeserver via federation.</p>
<p>This Python project was initially intended for a full migration from Slack to a new Matrix homeserver and allows reusing the imported user accounts. We have some research groups using Slack that would like to import their Slack workspace history to our Matrix homeserver. This PR allows to import a (free) Slack export to a fresh and empty Synapse instance that is federated with our main homeserver. We do not need a full &quot;migration&quot;: we kick all imported users and invite the existing Matrix users from our homeserver.</p>
<p>Two groups already imported the history and switched to Matrix, one more is in queue and probably more to come.</p>
</blockquote>
<p>This is a really, really exciting development, and the context for which Sven is expecting to use it is BIG, I can't wait til we can share more about it!</p>
<h3 id="mautrix-twitter">mautrix-twitter</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> said:</p>
<blockquote>
<p>The Twitter DM bridge I announced last week mostly works now. It does text and reaction bridging in both directions, twitter-&gt;matrix media bridging, end-to-bridge encryption and backfilling. I also added support for it in <a href="https://github.com/tulir/mautrix-manager">mautrix-manager</a> for web-based login.</p>
</blockquote>
<p>If it mostly works, I guess it's time to mostly start trying it out!</p>
<h2 id="dept-of-clients-iphone">Dept of Clients 📱</h2>
<h3 id="fluffychat">Fluffychat</h3>
<p><a href="https://matrix.to/#/@sorunome:sorunome.de">sorunome</a> offered:</p>
<blockquote>
<p>Fluffy 0.16.0 has been released! It is already available on F-Droid, Google Play and IOS Testflight will follow. You can also try it out in the webbrowser. Visit <a href="https://fluffychat.im">https://fluffychat.im</a></p>
<h4 id="features">Features</h4>
<ul>
<li>
<p>Implement web notifications</p>
</li>
<li>
<p>Implement a connection status header	</p>
</li>
</ul>
<h4 id="changes">Changes</h4>
<ul>
<li>
<p>Switch out database engine for faster performance</p>
</li>
<li>
<p>Greatly improve startup time</p>
</li>
<li>
<p>Added languages: Galician, Croatian, Japanese, Russian, Ukrainian - Thanks a lot to all the weblate users!</p>
</li>
<li>
<p>Only show the microg toast once, if you have play services disabled</p>
</li>
<li>
<p>Homeserver URL input now strips trailing whitespace and slash - Thanks @Katerina</p>
</li>
<li>
<p>Also use prev_content to determine profile of a user: This allows the username and avatar of people who left a group to still be displayed</p>
</li>
</ul>
<h4 id="fixes">Fixes:</h4>
<ul>
<li>
<p>Fix not being able to initiate key verification properly</p>
</li>
<li>
<p>Fix message sending being weird on slow networks</p>
</li>
<li>
<p>Fix a few HTML rendering bugs</p>
</li>
<li>
<p>Various other fixes</p>
</li>
<li>
<p>Fix the 12h clock showing 00:15am, instead of 12:15am	- Thanks @not_chicken</p>
</li>
<li>
<p>Fix an issue with replies and invalid HTML</p>
</li>
<li>
<p>Fix messages getting lost when retrieving chat history</p>
</li>
<li>
<p>Fix a bug where an incorrect string encoding from the server is assumed</p>
</li>
<li>
<p>Fix a bug where people couldn't log in if they had email notifications enabled</p>
</li>
</ul>
</blockquote>
<h3 id="mirage">Mirage</h3>
<p><a href="https://matrix.to/#/@miruka:privacytools.io">miruka</a> reported:</p>
<blockquote>
<p>0.6.0 is out today:</p>
<h4 id="added">Added</h4>
<ul>
<li>
<p><strong>Room member profiles</strong>:</p>
<ul>
<li>
<p>Can be accessed by clicking on a user in the room's right pane, or focusing
the filter field and navigating with up/down/enter/escape</p>
</li>
<li>
<p>Includes large avatar, display name, user ID, <strong>presence info</strong>,</p>
<p><strong>power level control</strong> and <strong>E2E sessions list</strong></p>
</li>
</ul>
</li>
<li>
<p><strong>E2E Verification</strong>:</p>
<ul>
<li>
<p>Sessions for room members can now be (manually) verified from
their profile</p>
</li>
<li>
<p>Sessions for different accounts within the same client will automatically</p>
<p>verify each others based on session keys</p>
</li>
<li>
<p>Verifying a session will automatically verify it for all connected accounts,</p>
<p>as long as the session keys are identical</p>
</li>
</ul>
</li>
<li>
<p><strong>Presence</strong>:</p>
<ul>
<li>
<p>Added presence (online, unavailable, invisible, offline) and status
message control to the accounts context menu in the room list</p>
</li>
<li>
<p>Added <code>togglePresence{Unavailable,Invisible,Offline}</code> keybinds bound by </p>
<p>default to <code>Ctrl+Alt+{A/U,I,O}</code></p>
</li>
<li>
<p>Added <code>openPresenceMenu</code> keybind to open the current account's context</p>
<p>menu, <code>Alt+P</code> by default</p>
</li>
<li>
<p>The room member list is now sorted by power level, then presence, then name</p>
</li>
<li>
<p>The room member list will display presence orbs and last seen time for</p>
<p>members if the server supports it. Last seen times for offline members
are also automatically retrieved as needed.</p>
</li>
<li>
<p>Set logged in accounts offline when closing Mirage</p>
</li>
<li>
<p>Linux/X11 specific: Add auto-away feature configurable by the</p>
<p><code>beUnavailableAfterSecondsIdle</code> setting (default 600 for 10mn),
can be disabled by setting it to <code>-1</code>.</p>
</li>
</ul>
</li>
<li>
<p><strong>Session sign out</strong>: you can now sign out your other sessions from the </p>
<p>account settings. This currently only supports password authentication.</p>
</li>
<li>
<p><strong>Pasting images</strong> via Ctrl+V or composer context menu, shows a preview of</p>
<p>the image before uploading</p>
</li>
<li>
<p>Added basic keyboard navigation for account settings session list</p>
</li>
<li>
<p>Add a verified devices indicator to encrypted room headers</p>
</li>
<li>
<p>Add experimental support for rendering of inline images and custom emotes in</p>
<p>messages</p>
</li>
<li>
<p>Add <code>kineticScrollingMaxSpeed</code> and <code>kineticScrollingDeceleration</code> settings</p>
</li>
<li>
<p>When highlighting accounts, rooms or members in lists </p>
<p>(focus filter field and use up/down), the highlighted item's context menu
can now be accessed with the keyboard Menu key</p>
</li>
<li>
<p>Support for Menu key when keyboard-navigating messages in the timeline</p>
</li>
<li>
<p>Add context menus to text field and areas</p>
</li>
<li>
<p>Add a button to quickly expand the room pane when collapsed and focus</p>
<p>the filter field</p>
</li>
<li>
<p>Clicking on the current tab button for the room pane now fully hides it,</p>
<p>this can also be toggled with the new <code>toggleHideRoomPane</code> keybind 
(default Ctrl+Alt+R)</p>
</li>
</ul>
<h4 id="changed">Changed</h4>
<ul>
<li>
<p>When panes are smaller than their default width due to user resizing or</p>
<p>window size constraints, focusing certain elements will auto-expand them
until the focus is lost: filter fields, member profile and room settings</p>
</li>
<li>
<p>Reduced the default kinetic scrolling speed, which was hardcoded to an</p>
<p>aggressive <code>4000</code> before.
This can be restored with the <code>kineticScrollingMaxSpeed</code> setting.</p>
</li>
<li>
<p>Improve key verification popup texts and make the session details copiable</p>
</li>
<li>
<p>Power levels/room permission change events will now show a line of text or</p>
<p>table containing the details of what exactly changed </p>
</li>
<li>
<p>Messages containing tables will no longer be width-limited</p>
</li>
<li>
<p>Using the <code>sendFileFromPathInClipboard</code> keybind (default Alt+Shift+S)</p>
<p>now shows a preview of the file if it's an image and asks for confirmation</p>
</li>
<li>
<p>Image messages now show spinners when loading the thumbnail</p>
</li>
<li>
<p>Clicking on a GIF message will now open it externally like other images</p>
<p>instead of pausing it. A dedicated play/pause button is now displayed in 
the corner.</p>
</li>
</ul>
<p>And more: <a href="https://github.com/mirukana/mirage/releases/tag/v0.6.0">full changelog</a></p>
</blockquote>
<h3 id="riot-ios-no-sorry-element-ios">Riot-iOS, no sorry, Element-iOS</h3>
<p><a href="https://matrix.to/#/@Manu:matrix.org">Manu</a> offered:</p>
<blockquote>
<p>Last week, we forgot to announce that we renamed the Riot-iOS app to Element but this is not a surprise anymore. The app version is now 1.0.0. This change came with a lot of UI tweaks like new icons and new colors.</p>
<p>Since then, we made bug fixes we will release soon. This week, we also worked on PIN protection for the app, including support of Touch ID and Face ID.</p>
</blockquote>
<h3 id="element-android">Element Android</h3>
<p><a href="https://matrix.to/#/@ganfra:matrix.org">Francis</a> offered:</p>
<blockquote>
<p>This week has been focused on bug fixing, there will be a release next week. We also started to work on PIN protection for the app.</p>
</blockquote>
<h3 id="quotient">quotient</h3>
<p><a href="https://matrix.to/#/@kitsune:matrix.org">kitsune</a> offered:</p>
<blockquote>
<p>Quotient 0.6 released! The release notes are somewhat long, since it's been 4 months since the last stable version update, and more than a year since the 0.5 release - thanking two heroes of this release, and giving a nod to the original Quaternion author who happened to contribute using an inverted time machine. Read here: <a href="https://github.com/quotient-im/libQuotient/releases/tag/0.6.0">https://github.com/quotient-im/libQuotient/releases/tag/0.6.0</a></p>
</blockquote>
<p>Big news - first release in a year. Do take a look at the full notes, they're very readable. In particular, they call out contributions from Black Hat, Alexey Andreyev and the original project creator, Felix Rohrbach aka @fxrh.</p>
<h2 id="dept-of-sdks-and-frameworks">Dept of SDKs and Frameworks 🧰</h2>
<h3 id="ruma">ruma</h3>
<p>Ruma is a Rust project to create a comprehensive set of APIs for Matrix. Previously there was a Ruma homeserver project.</p>
<p><a href="https://matrix.to/#/@jplatte:matrix.org">jplatte</a> said:</p>
<blockquote>
<p>We weren't in TWIM for a while, but that doesn't mean no progress! Apart from Devin's constant work on ruma-events, there was also some movement in ruma-identifiers and ruma-client-api, with the former seeing a new release, <a href="https://github.com/ruma/ruma/releases/tag/ruma-identifiers-0.17.0">0.17.0</a>.</p>
<p>We're planning to do more releases next week, and hopefully a 0.1 release of the ruma crate that provides a simpler entry point by re-exporting everything else, in one of the weeks after that. Stay tuned!</p>
</blockquote>
<h2 id="dept-of-ops">Dept of Ops 🛠</h2>
<h3 id="matrix-docker-ansible-deploy">matrix-docker-ansible-deploy</h3>
<p>This <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy">Ansible playbook</a> is meant to easily let you run your own Matrix homeserver.</p>
<p><a href="https://matrix.to/#/@slavi:devture.com">Slavi</a> said:</p>
<blockquote>
<p><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy">matrix-docker-ansible-deploy</a> just gained support for its first bot - <a href="https://github.com/anoadragon453/matrix-reminder-bot">matrix-reminder-bot</a>.</p>
<p>See our <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/docs/configuring-playbook-bot-matrix-reminder-bot.md">Setting up matrix-reminder-bot</a> documentation to get started.</p>
</blockquote>
<p>Then, another report:</p>
<blockquote>
<p><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy">matrix-docker-ansible-deploy</a> has gained support for <a href="https://github.com/Awesome-Technologies/synapse-admin">synapse-admin</a>.</p>
<p>See our <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/docs/configuring-playbook-synapse-admin.md">Setting up Synapse Admin</a> documentation to get started.</p>
</blockquote>
<h2 id="dept-of-bots-robot-face">Dept of Bots 🤖</h2>
<h3 id="matrix-wug">matrix-wug</h3>
<p><a href="https://matrix.to/#/@dandellion:dodsorf.as">dandellion</a> said:</p>
<blockquote>
<p>It's been a while since it's come up, but <a href="https://github.com/dali99/matrix-wug">matrix-wug</a> is a bot capable of transcribing characters writable via normal keyboards to scripts from other languages/notation systems</p>
<p>It supports: x-sampa, z-sampa, proto-indo-european, Inuktitut, and Iñupiatun.</p>
<p>Now it also supports hiragana! The romanization system is something like <a href="https://en.wikipedia.org/wiki/W%C4%81puro_r%C5%8Dmaji">Wāpuro rōmaji</a>, but sticks to Nihon-shiki when in doubt.</p>
<p>I want this transcription to be forgiving, so if you find it not transcribing something in a way you'd expect it to, feel free to DM me!</p>
<p>To use it use the <code>hi</code> key with a delimiter like <code>/x/</code> or <code>[]</code></p>
<p>hi/konnichiwa maatorikusu!/</p>
<p>vøgg is also behind pantalaimon now so it now works in encrypted rooms 😀</p>
</blockquote>
<p>If you need to convert swiggles into a different type of swiggle, dandellion has you covered here.</p>
<h3 id="jitsi-token-service">Jitsi Token Service</h3>
<p><a href="https://matrix.to/#/@kinta:communia.org">kinta</a> reported:</p>
<blockquote>
<p><a href="https://gitlab.com/communia/matrix-jitsi-token-service">https://gitlab.com/communia/matrix-jitsi-token-service</a></p>
<p>This bot is not about adapting the current jitsi integration provided by Element IM as widget.</p>
<p>If you have a configured jitsi server to be authenticated with jwt tokens as in <a href="https://github.com/jitsi/lib-jitsi-meet/blob/master/doc/tokens.md">https://github.com/jitsi/lib-jitsi-meet/blob/master/doc/tokens.md</a> , this bot will assist you when claiming for a jwt instead of going to jwt.io each time.
You'll need to create a user and invite you in each room where you want to create a jitsi room url respecting the matrix power levels in the room.</p>
<p>When the service is running invite the bot and send message <code>!jitsi-jwt</code> </p>
<p>If you are a moderator in the room (alias you have enough power levels to redact messages), then you will get a direct message from bot with the url to jitsi
room with the jwt get parameter.</p>
</blockquote>
<h3 id="cody-0-7-0">cody 0.7.0</h3>
<p><a href="https://matrix.to/#/@carl:bordum.dk">carl</a> told us:</p>
<blockquote>
<p>New cody release. @cody:bordum.dk is a chat bot that works as a REPL for your matrix rooms. This week I worked on metrics. I host a Grafana instance with anonymous access allowed, so codys charts are now embedded the <a href="https://matrix.to/#/#cody:bordum.dk">#cody:bordum.dk</a> chat room.</p>
</blockquote>
<h3 id="announcing-the-very-first-release-of-smythbot">Announcing The Very First Release of sMythbot</h3>
<p><a href="https://matrix.to/#/@ssorbom:matrix.org">ssorbom</a> told us:</p>
<blockquote>
<p>I am proud to announce the very first release of sMythbot, the Matrix chatbot designed to control your Myth Tv DVR remotely. This release should be considered a tech preview. I welcome feedback and Bug reports. More information on installation and setup is available in the project wiki.</p>
<p>It currently supports the following commands</p>
<ul>
<li>
<p><code>!smythbot help</code>: Display this message </p>
</li>
<li>
<p><code>!smythbot set mythbackend address</code>: Sets the Myth Tv backend address to use for this room.</p>
</li>
<li>
<p><code>!smythbot set mythbacked port</code>: Sets the Myth Tv backend port to use for this room. </p>
</li>
<li>
<p><code>!smythbot view mythbackend address</code>: Allows you to view the Myth Tv backend address set for this room </p>
</li>
<li>
<p><code>!smythbot view mythbackend port</code>: Allows you to view the Myth Tv backend port set for this room </p>
</li>
<li>
<p><code>!smythbot view mythbackend info</code>: Allows you to view various pieces of information for the Myth Tv backend connected to this room. It will not work if the address and port are not set.</p>
</li>
<li>
<p><code>!smythbot display upcoming recordings</code>: Displays the upcoming recordings on your Myth Tv Backend.</p>
</li>
<li>
<p><code>!smythbot display recorded programs</code>: Displays the recordings from the default recording group that are stored on your Myth Tv Backend.</p>
</li>
</ul>
<p>You can find out more information at <a href="https://github.com/shsorbom/sMythbot">my Github Page</a></p>
</blockquote>
<p>I <em>love</em> a project designed to scratch the author's own itch!</p>
<h2 id="dept-of-interesting-projects">Dept of Interesting Projects 🛰️</h2>
<h3 id="noteworthy-elements-for-mobile-web">Noteworthy Elements for Mobile Web</h3>
<p><a href="https://matrix.to/#/@balaa:a.noteworthy.im">balaa</a> said:</p>
<blockquote>
<p>The team behind <a href="https://noteworthy.tech">Noteworthy</a> (Matrix over WireGuard overlay networks) has started work on bringing better mobile web support for Element (riot-web).</p>
<p><a href="https://github.com/decentralabs/noteworthy-element">Noteworthy Elements</a> is a lightweight shim powered by the <a href="https://ionicframework.com">Ionic Framework</a> thats goal is to bring first-class support for Element running on mobile devices.</p>
<h4 id="what-we-have-so-far">What we have so far</h4>
<ul>
<li>
<p>Usable version of Element wrapped in native iOS / Android app</p>
</li>
<li>
<p>Ability to run multiple instances of Element in a native iOS / Android app (ie connect to multiple home servers simultaneously)</p>
</li>
</ul>
<p>Our initial experimentation has been positive and our goal is to make Element the best mobile client for Matrix with minimal fuss. With minimal changes to Element's codebase our goal is to land (significantly better) support for mobile web in upstream Element. Join us over at <a href="https://matrix.to/#/#noteworthy:tincan.community">#noteworthy:tincan.community</a> to get involved!</p>
</blockquote>
<p><img src="/blog/img/2020-07-24-fH9Fl-ScreenShot2020-07-23at5.04.31PM.png" alt="2020-07-24-fH9Fl-ScreenShot2020-07-23at5.04.31PM.png" /></p>
<h3 id="trust-based-moderation-using-distributed-chat-systems-for-transitive-trust-propagation">Trust-based Moderation Using Distributed Chat Systems for Transitive Trust Propagation</h3>
<p><a href="https://matrix.to/#/@florian:dsn.tm.kit.edu">Florian</a> said:</p>
<blockquote>
<p>I just stumbled over the master thesis <a href="https://lup.lub.lu.se/student-papers/search/publication/9020253">TrustNet: Trust-based Moderation Using Distributed Chat Systems for Transitive Trust Propagation</a>. While it is mainly targeted at systems like Secure Scuttlebut and Cabal, I think it is also of interest for the people thinking about trust-based moderation for Matrix.</p>
</blockquote>
<h2 id="dept-of-ping-table-tennis-paddle-and-ball">Dept of Ping 🏓</h2>
<p>Here we reveal, rank, and applaud the homeservers with the lowest ping, as measured by <a href="https://github.com/maubot/echo">pingbot</a>, a <a href="https://github.com/maubot/maubot">maubot</a> that you can host on your own server. Join <a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">fairydust.space</td><td style="text-align: center">309</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">bardiharborow.com</td><td style="text-align: center">545</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">nicoll.xyz</td><td style="text-align: center">647.5</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">grant.org</td><td style="text-align: center">667.5</td></tr>
<tr><td style="text-align: center">5</td><td style="text-align: center">elsmussols.net</td><td style="text-align: center">694</td></tr>
<tr><td style="text-align: center">6</td><td style="text-align: center">heitkoetter.net</td><td style="text-align: center">871.5</td></tr>
<tr><td style="text-align: center">7</td><td style="text-align: center">ragon.xyz</td><td style="text-align: center">876</td></tr>
<tr><td style="text-align: center">8</td><td style="text-align: center">acmelabs.space</td><td style="text-align: center">906.5</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">opensuse.org</td><td style="text-align: center">915.5</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">matrix.vgorcum.com</td><td style="text-align: center">1017</td></tr>
</tbody></table>
<h2 id="that-s-all-i-know-checkered-flag">That's all I know 🏁</h2>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2020&#x2F;07&#x2F;17&#x2F;this-week-in-matrix-2020-07-17&#x2F;" title="This Week in Matrix 2020-07-17">This Week in Matrix 2020-07-17</a></h1>
            <span>
                17.07.2020 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="matrix-live">Matrix Live 🎙</h2>
<iframe src="https://www.youtube.com/embed/4ZY_q_jyHzo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>Let's hear from Christian about working on his dream projects, his thoughts on bridging, hosting, and the importance and nature of chatbots and assistants.</p>
<h2 id="dept-of-status-of-matrix-face-with-th">Dept of <em>Status of Matrix</em> 🌡️</h2>
<h3 id="element">&quot;Element&quot;</h3>
<p>This week was the announcement of the much-awaited rebrand: <a href="https://element.io/blog/welcome-to-element/">Riot is now Element</a>. In fact, three brands are coalescing into one: Riot and New Vector will be referred to as Element, while the SaaS platform known as Modular.im is now <a href="https://element.io/matrix-services">Element Matrix Services</a>.</p>
<p>Note that <strong>Matrix</strong> is <em>not</em> involved in this change. Matrix is still Matrix, don't worry about that!</p>
<h3 id="commcon-virtual-2020-with-added-matrix">CommCon Virtual 2020, with added Matrix</h3>
<p>CommCon is an event dedicated to Real-Time Communications. In 2020 they made the difficult decision to go online-only, but had a fear of missing out on the &quot;hallway-track&quot; that is so important to industry events. Their solution was to include a live chat to run alongside their streamed talks! </p>
<p>Matrix was a natural choice for the crowd, but they wanted a way to encourage viewers to join the correct room from their own Matrix clients. To do this, they used the GSOC project from arnav-t - an HTML Embedded client - to present a live scrolling-view of the chat. You can see the result at <a href="https://2020.commcon.xyz/live/">https://2020.commcon.xyz/live/</a>.</p>
<h2 id="dept-of-spec-scroll">Dept of Spec 📜</h2>
<p><a href="https://matrix.to/#/@hubert:uhoreg.ca">uhoreg</a> said:</p>
<blockquote>
<p>anoa is away this week, so no pretty graph, I'm afraid. <em>(this is intolerable - BP)</em></p>
<h4 id="msc-status">MSC status</h4>
<p><strong>Merged MSCs</strong></p>
<ul>
<li><em>No MSCs were merged this week.</em></li>
</ul>
<p><strong>MSCs in Final Comment Period:</strong></p>
<ul>
<li><em>No MSCs in Final Comment Period this week.</em></li>
</ul>
<p><strong>New MSCs:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2689">MSC2689: Fix E2EE for guests</a></li>
</ul>
<h4 id="spec-core-team">Spec Core Team</h4>
<p>This week, the Spec Core Team will be focusing on <a href="https://github.com/matrix-org/matrix-doc/pull/2610">MSC2610</a> (Removing <code>m.login.oauth2</code> from User-Interactive Authentication), <a href="https://github.com/matrix-org/matrix-doc/pull/2611">MSC2611</a> (Removing <code>m.login.token</code> from User-Interactive Authentication), <a href="https://github.com/matrix-org/matrix-doc/pull/2663">MSC2663</a> (Errors for dealing with non-existent push rules), <a href="https://github.com/matrix-org/matrix-doc/pull/2674">MSC2674</a> (Event Relationships), and <a href="https://github.com/matrix-org/matrix-doc/pull/2689">MSC2689</a> (Fix E2EE for guests).</p>
</blockquote>
<h2 id="dept-of-gsoc-mortar-board">Dept of GSoC 🎓️</h2>
<h3 id="ruma-matrix-gsoc-update">Ruma/Matrix GSoC update</h3>
<p>Ruma is a Rust project to create a comprehensive set of APIs for Matrix. Previously there was a Ruma homeserver project.</p>
<p><a href="https://matrix.to/#/@devinr528:matrix.org">devinr528</a> reported:</p>
<blockquote>
<h4 id="the-end-is-nigh">The End is Nigh</h4>
<p>This week in the ruma/matrix Google Summer of Code project, I worked on refactoring both <code>ruma-api</code> and <code>ruma-events</code>. After moving some of the larger chunks of the <code>ruma_api_macro::api::Api::to_tokens</code> method to helper functions, I spent time removing repetition from the <a href="https://github.com/ruma/ruma/pull/109">Request/Response</a> code generated by the <code>ruma_api!</code> macro. For <code>ruma-events</code>, the <a href="https://github.com/ruma/ruma/pull/121">input parsing</a> was changed to only allow valid names for the <code>Any*Event</code> enums. Altering the input parsing had the added benefit of replacing all of the string comparison and manipulation with strongly typed comparison and manipulation.</p>
<p>The final few issues to be resolved before the next crates.io release for <code>ruma-events</code> can happen are related to redacted events. Support for <a href="https://github.com/ruma/ruma/pull/114">redacted events</a> was added to the <code>Any*Event</code> enums, they now have redacted variants of each event kind. A few follow-up PR's have been merged to fully integrate redacted events into <code>ruma-events</code>, fixing specific event <a href="https://github.com/ruma/ruma/pull/128">deserialization issues</a> and splitting the <a href="https://github.com/ruma/ruma/pull/135">UnsignedData</a> struct into <code>Unsigned</code> and <code>RedactedUnsigned</code>.</p>
</blockquote>
<h3 id="html-embeddable-matrix">HTML Embeddable Matrix</h3>
<p><a href="https://matrix.to/#/@arnav-t:matrix.org">arnav-t</a> reported:</p>
<blockquote>
<p>This week for the GSoC project of HTML Embeddable Matrix Client:</p>
<ul>
<li>
<p>Added a read receipts menu for messages.</p>
</li>
<li>
<p>Minor bug fixes</p>
</li>
<li>
<p>Automatic hyperlinking of URLs in pipeline</p>
</li>
</ul>
</blockquote>
<p>See above for details of this project being used in the wild!</p>
<h3 id="mautrix-go">mautrix-go</h3>
<p><a href="https://matrix.to/#/@nikofil:matrix.org">nikofil</a> announced:</p>
<blockquote>
<ul>
<li>
<p>Added the capabilities to request room keys from other devices, as well as share room keys with other devices that requested them</p>
</li>
<li>
<p>Currently working on device verification using SAS, will then work on key export / import</p>
</li>
</ul>
<h4 id="neb">neb</h4>
<ul>
<li>Updated to latest mautrix version with some minor fixes, most notably using m.encryption event parameters</li>
</ul>
</blockquote>
<h3 id="opsdroid-gsoc">Opsdroid(GSoC)</h3>
<p><a href="https://matrix.to/#/@tyagdit:matrix.org">tyagdit</a> said:</p>
<blockquote>
<h4 id="end-to-end-encryption-with-matrix">End to End Encryption with matrix</h4>
<ul>
<li>
<p>The new connector has been fully implemented!</p>
</li>
<li>
<p>Device verification has been put on hold for the time being</p>
</li>
<li>
<p>No extra configuration is required</p>
</li>
<li>
<p>Check out all the changes <a href="https://github.com/opsdroid/opsdroid/pull/1548">here</a></p>
</li>
</ul>
<h4 id="matrix-database">Matrix database</h4>
<ul>
<li>
<p>Work has begun on porting the <a href="https://github.com/SolarDrew/database-matrix">matrix database</a> module to matrix-nio and integrating it into opsdroid core</p>
</li>
<li>
<p>It uses matrix rooms as databases</p>
</li>
<li>
<p>Users can store key value pairs as state events in a room</p>
</li>
<li>
<p>Also works with encrypted rooms to allow for encrypted storage</p>
</li>
</ul>
</blockquote>
<h3 id="matrix-ircd-gsoc">matrix-ircd GSOC</h3>
<p><a href="https://matrix.to/#/@karlik:matrix.org">karlik</a> announced:</p>
<blockquote>
<p>for matrix-ircd:</p>
<ul>
<li>
<p>Merge in futures 0.3 support for matrix and http modules</p>
</li>
<li>
<p>Opened pull request for updating tests, irc module, and bridge module to futures 0.3 &amp; remove several futures dependencies</p>
</li>
<li>
<p>updating several packages TLS packages to their more modern counterparts</p>
</li>
</ul>
</blockquote>
<h2 id="dept-of-servers-europea">Dept of Servers 🏢</h2>
<h3 id="matrix-media-repo">matrix-media-repo</h3>
<p><a href="https://github.com/turt2live/matrix-media-repo">matrix-media-repo</a> is a highly customizable multi-domain media repository for Matrix</p>
<p><a href="https://github.com/turt2live">TravisR</a> said:</p>
<blockquote>
<p>matrix-media-repo has just released <a href="https://github.com/turt2live/matrix-media-repo/releases/tag/v1.1.3">v1.1.3</a> with several improvements and bug fixes - please give it a go, and get support in #media-repo:t2bot.io</p>
</blockquote>
<h3 id="conduit">Conduit</h3>
<p>Conduit is a Matrix homeserver written in Rust <a href="https://conduit.rs">https://conduit.rs</a></p>
<p><a href="https://matrix.to/#/@timo:koesters.xyz">timo</a> told us:</p>
<blockquote>
<ul>
<li>
<p>@the0 finished /event</p>
</li>
<li>
<p>I rebased Jamie's WIP appservice branch</p>
</li>
<li>
<p>I wrote some documentation for our database: <a href="https://git.koesters.xyz/timo/conduit/wiki/Database">https://git.koesters.xyz/timo/conduit/wiki/Database</a></p>
</li>
</ul>
<p>I also investigated why so many sytests fail and created this issue: <a href="https://github.com/matrix-org/sytest/issues/913">https://github.com/matrix-org/sytest/issues/913</a>
Apparently Sytest did not expect a server to optimize their /sync responses as much as Conduit does :P.</p>
<p>Note: The official Conduit server is now reachable at &quot;<a href="https://conduit.koesters.xyz">https://conduit.koesters.xyz</a>&quot;.
Thanks to everyone who supports me on <a href="https://liberapay.com/timokoesters">Liberapay</a> or Bitcoin!</p>
</blockquote>
<h3 id="synapse">Synapse</h3>
<p><a href="https://matrix.to/#/@neilj:matrix.org">Neil</a> said:</p>
<blockquote>
<p>A big week for matrix.org performance.</p>
<p>Hot on the heels of shipping shardable federation readers last week, this week we shipped shardable federation senders. There is still plenty of work to do, but together these changes has made a massive difference to federation lag overall and hopefully those of you not on matrix.org are noticing the difference when you talk to matrix.org users. </p>
<p>This graph shows the impact to outbound federation lag.</p>
</blockquote>
<p><img src="/blog/img/2020-07-17-01oi5-Screenshot2020-07-17at14.39.02.png" alt="2020-07-17-01oi5-Screenshot2020-07-17at14.39.02.png" /></p>
<blockquote>
<p>Aside from that we also shipped shardable push and frontend proxy workers as both were starting to max out on CPU as well as a shardable client reader, allowing us to shard registration which was especially important this week :) </p>
<p>Finally we moved typing notifications from the master process and optimised incoming replication queuing to buy us a little more head room.</p>
<p>Next steps are to revisit where all the remaining cycles are going on the master process. To help us profile we are migrating to async/await semantics and Patrick produced this natty <a href="https://patrick.cloke.us/areweasyncyet/">graph</a> to track progress.</p>
</blockquote>
<p><img src="/blog/img/2020-07-17-Uqa2y-Screenshot2020-07-17at14.38.44.png" alt="2020-07-17-Uqa2y-Screenshot2020-07-17at14.38.44.png" /></p>
<blockquote>
<p>Outside of performance we shipped a bug fix to prevent large initial syncs taking out the synchrotrons. The admin api sprouted an end point to list room members (thanks <a href="https://github.com/awesome-michael">awesome-michael</a>and the ability to reactivate previously deactivated users. </p>
<p>Coming up we’ll dust off the notifications project which has been put on hold while Riot transmogrified into Element and we’ll continue with chipping away at the master process.</p>
</blockquote>
<h2 id="synapse-deployment-inbox-tray">Synapse Deployment 📥️</h2>
<h3 id="kubernetes">Kubernetes</h3>
<p><a href="https://matrix.to/#/@ace:kittenface.studio">Ananace</a> said:</p>
<blockquote>
<p>And another bump of the K8s-optimized Synapse images, this time to 1.17.0</p>
</blockquote>
<h3 id="synapse-adoption-graphs">Synapse adoption graphs</h3>
<p>We only featured this <a href="https://matrix.org/blog/2020/06/19/this-week-in-matrix-2020-06-19#synapse-adoption-graphs">a month ago</a>, but I want to call attention again to this awesome <a href="https://graph.settgast.org/">Synapse version adoption tracking</a> project from Chris . I wanted to know how quickly Synapse 1.17.0 would be the most deployed version (~36 hours), and the answer is right there!</p>
<h2 id="dept-of-bridges-bridge-at-night">Dept of Bridges 🌉</h2>
<h3 id="mautrix-twitter">mautrix-twitter</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> announced:</p>
<blockquote>
<p>I started working on a Twitter DM bridge that uses the internal API instead of the complicated official one. It should be easier to set up than bridges using the official API, since there won't be a need to get API keys and forward webhooks. The main risk is that Twitter doesn't like people using the internal API and starts blocking users like Facebook does, but hopefully that doesn't happen.</p>
<p>So far I've only made a simple library for the API, but the bridge should be usable by the next TWIM. The bridge and API library are at <a href="https://github.com/tulir/mautrix-twitter">https://github.com/tulir/mautrix-twitter</a> and there's a discussion room at <a href="https://matrix.to/#/#twitter:maunium.net">#twitter:maunium.net</a>.</p>
</blockquote>
<h2 id="dept-of-clients-iphone">Dept of Clients 📱</h2>
<h3 id="element-android-1-0-0">Element Android 1.0.0</h3>
<p><a href="https://matrix.to/#/@benoit.marty:matrix.org">benoit</a> announced:</p>
<blockquote>
<p>Element Android 1.0.0 is out! Download or upgrade it from the PlayStore at <a href="https://play.google.com/store/apps/details?id=im.vector.app">https://play.google.com/store/apps/details?id=im.vector.app</a> or download it from the F-Droid store at <a href="https://f-droid.org/packages/im.vector.app/">https://f-droid.org/packages/im.vector.app/</a></p>
<ul>
<li>
<p>PlayStore users: Element should come as a regular upgrade of the application Riot-Android, and the upgrade will update your previous account and data, without the need to log in again.</p>
</li>
<li>
<p>F-Droid users: Element is a new app, you have to install it and log in again.</p>
</li>
<li>
<p>RiotX: RiotX will disappear from the PlayStore (it was only a beta application). We will provide a very last update to inform users to install Element Android</p>
</li>
</ul>
<p>Please report any issues at <a href="https://github.com/vector-im/riotX-android">https://github.com/vector-im/riotX-android</a> (which will probably be renamed soon), because Element Android is actually RiotX code!
Thanks for all the contributors of RiotX, we still have lots to do to make the app even better and full featured.</p>
</blockquote>
<h3 id="radical">Radical</h3>
<p><a href="https://matrix.to/#/@david:vovo.id.au">Davo</a> announced:</p>
<blockquote>
<p>After seeing all the Element room avatars, I thought to myself, &quot;you know what, <a href="https://matrix.to/#/#radical-webext:matrix.org">#radical-webext:matrix.org</a> needs a new icon&quot;… so I sat down and combined a couple of icons. The result:</p>
<p><img src="/blog/img/2020-07-17-YLTltytvozBklQAuKpgoelGR.png" alt="Radical icon" /></p>
<p><a href="https://github.com/stoically/radical">Radical</a> also quickly (as always) got <a href="https://github.com/stoically/radical/releases">updates</a> when Element 1.7.0 and 1.7.1 were released. Huge thank you to stoic for making Radical in the first place.</p>
</blockquote>
<h3 id="element-f-droid-repos">Element F-Droid repos</h3>
<p><a href="https://matrix.to/#/@krombel:msg-net.de">krombel</a> announced:</p>
<blockquote>
<p>I updated my F-Droid repos which are containing the dev builds to reflect the latest naming change to Element.</p>
<p>The people who formerly used my repos for getting the dev repo of Riot-Android should update to the new repo. It wont be updated to get Element</p>
<p>As always you can grab the F-Droid or GPlay flavor and you can pick the repo which reflects your flavor on <a href="https://fdroid.krombel.de">https://fdroid.krombel.de</a></p>
<p>Note: As &quot;the new repo&quot; is internally the same repo as the one of RiotX (and Riot.imX) the people who already used that don't need to update their packet source. They will get the updates to Element via the old repo urls.</p>
<p>Feel free to use it 🙂</p>
</blockquote>
<p><img src="/blog/img/2020-07-17-izu7P-Screenshot_20200717-182645__01.jpg" alt="2020-07-17-izu7P-Screenshot_20200717-182645__01.jpg" /></p>
<h2 id="dept-of-sdks-and-frameworks">Dept of SDKs and Frameworks 🧰</h2>
<h3 id="maubot">maubot</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> announced:</p>
<blockquote>
<p>As promised last week, maubot now supports end-to-end encryption. It's a bit bare at the moment, so you need to manually insert the device ID into the database for it to start working, but other than that it works. Plugins don't need to be changed at all, the framework will handle everything.</p>
<p>While I was adding e2ee to maubot, I also improved mautrix-python's crypto stuff so that it's easier to use it directly as a client library with e2ee. Some day I might even add docs :D</p>
</blockquote>
<h3 id="matrix-appservice-cr">matrix-appservice-cr</h3>
<p><a href="https://matrix.to/#/@redplateaus:matrix.lifeispayne.com">Chris Vincent</a> reported:</p>
<blockquote>
<p>Related to my previous update here, I've just published an initial version of a Matrix Client-Server client library for the Crystal programming language: <a href="https://github.com/cvincent/matrix-client-cr">https://github.com/cvincent/matrix-client-cr</a></p>
</blockquote>
<p>Is this the first time we've seen tooling for Crystal?</p>
<h2 id="dept-of-ops">Dept of Ops 🛠</h2>
<h3 id="matrix-docker-ansible-deploy">matrix-docker-ansible-deploy</h3>
<p>This <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy">Ansible playbook</a> is meant to easily let you run your own Matrix homeserver.</p>
<p><a href="https://matrix.to/#/@slavi:devture.com">Slavi</a> announced:</p>
<blockquote>
<p><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy">matrix-docker-ansible-deploy</a> is now ready to help you with the <a href="https://element.io/blog/welcome-to-element/">Riot -&gt; Element</a> transition.</p>
<p>We have a few ways to handle the migration depending on how much change and breakage you're willing to tolerate. See our <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/docs/configuring-playbook-riot-web.md#migrating-to-element">Migrating to Element</a> documentation page.</p>
</blockquote>
<p>Incredibly thorough migration paths here!</p>
<h2 id="dept-of-bots-robot-face">Dept of Bots 🤖</h2>
<h3 id="matrix-alertmanager-bot-v0-3-0">Matrix-Alertmanager bot v0.3.0</h3>
<p><a href="https://matrix.to/#/@jaywink:federator.dev">jaywink</a> offered:</p>
<blockquote>
<p>Matrix-Alertmanager bot has a new release of v0.3.0. Highlights are compatibility with AWS Lambda, better error handling if message fails to send and the ability to do a <code>@room</code> mention on firing alerts. Find it <a href="https://git.feneas.org/jaywink/matrix-alertmanager">here</a>.</p>
</blockquote>
<h3 id="cody-0-6-0">cody 0.6.0</h3>
<p><a href="https://matrix.to/#/@carl:bordum.dk">carl</a> reported:</p>
<blockquote>
<p>REPL for your matrix rooms</p>
<p>This week, we got support for javascript (nodejs) with <code>!js</code>. The code</p>
<p>complexity was considerably reduced, which should make adding new languages
much easier in the future. All Python sub-dependencies are now pinned, making</p>
<p>cody builds even more reproducible.</p>
<p>Chat with cody: @cody:bordum.dk</p>
<p>Read the source: <a href="https://gitlab.com/carlbordum/matrix-cody">https://gitlab.com/carlbordum/matrix-cody</a></p>
</blockquote>
<h2 id="dept-of-interesting-projects">Dept of Interesting Projects 🛰️</h2>
<h3 id="noteworthy-matrix-over-wireguard-overlay-networks">Noteworthy (Matrix over Wireguard overlay networks)</h3>
<p><a href="https://matrix.to/#/@balaa:a.noteworthy.im">balaa</a> said:</p>
<blockquote>
<p>Noteworthy team (patrick and myself) have open sourced both components (spoke &amp; hub) of Noteworthy (Matrix over Wireguard overlay networks -- <a href="https://github.com/decentralabs/noteworthy">https://github.com/decentralabs/noteworthy</a>) we are actively welcoming testers/contributors and working with a handful of projects on incorporating our deployment model over in <a href="https://matrix.to/#/#noteworthy:tincan.community">#noteworthy:tincan.community</a> -- it is also the fastest way (less than a minute) to deploy your own home server! Also, working on incorporating Noteworthy into the popular ansible deployment repo to enable users who don't have access to a publicly accessible to deploy their own home servers.</p>
</blockquote>
<h2 id="dept-of-ping-table-tennis-paddle-and-ball">Dept of Ping 🏓</h2>
<p>Here we reveal, rank, and applaud the homeservers with the lowest ping, as measured by <a href="https://github.com/maubot/echo">pingbot</a>, a <a href="https://github.com/maubot/maubot">maubot</a> that you can host on your own server. Join <a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">fairydust.space</td><td style="text-align: center">390</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">exp.farm</td><td style="text-align: center">555.5</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">matrix.vgorcum.com</td><td style="text-align: center">768</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">tchncs.de</td><td style="text-align: center">810.5</td></tr>
<tr><td style="text-align: center">5</td><td style="text-align: center">settgast.org</td><td style="text-align: center">1026</td></tr>
<tr><td style="text-align: center">6</td><td style="text-align: center">moritzdietz.com</td><td style="text-align: center">1046</td></tr>
<tr><td style="text-align: center">7</td><td style="text-align: center">ragon.xyz</td><td style="text-align: center">1288</td></tr>
<tr><td style="text-align: center">8</td><td style="text-align: center">aragon.sh</td><td style="text-align: center">1383</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">elcyb.org</td><td style="text-align: center">1755.5</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">kapsi.fi</td><td style="text-align: center">2034</td></tr>
</tbody></table>
<h2 id="that-s-all-i-know-checkered-flag">That's all I know 🏁</h2>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2020&#x2F;07&#x2F;13&#x2F;synapse-1-17-0-released&#x2F;" title="Synapse 1.17.0 released">Synapse 1.17.0 released</a></h1>
            <span>
                13.07.2020 16:38
                —
                <a href="/category/releases">
                    Releases
                </a>
                —
                <a href="/author/neil-johnson">
                    Neil Johnson
                </a>
            </span>
            <br>
            <small>Last update: 13.07.2020 16:21</small>
        </header>
        <div>
            <p>Synapse 1.17.0 is here!</p>
<p>Hot on the heels of Synapse 1.16.1, 1.17.0 is a bug fix release most notably containing a fix for <a href="https://github.com/matrix-org/synapse/issues/2181">'stuck invites'</a> which happen when we are unable to reject a room invite received over federation.</p>
<p>Get the new releases from any of the usual sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md. 1.17.0 is on github <a href="https://github.com/matrix-org/synapse/releases/tag/v1.17.0">here</a>.</p>
<p>Changelog for 1.17.0 follows:</p>
<h1 id="synapse-1-17-0-2020-07-13">Synapse 1.17.0 (2020-07-13)</h1>
<p>Synapse 1.17.0 is identical to 1.17.0rc1, with the addition of the fix that was included in <a href="https://github.com/matrix-org/synapse/releases/v1.16.1">1.16.1</a>.</p>
<h1 id="synapse-1-17-0rc1-2020-07-09">Synapse 1.17.0rc1 (2020-07-09)</h1>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix inconsistent handling of upper and lower case in email addresses when used as identifiers for login, etc. Contributed by @dklimpel. (<a href="https://github.com/matrix-org/synapse/issues/7021">#7021</a>)</li>
<li>Fix &quot;Tried to close a non-active scope!&quot; error messages when opentracing is enabled. (<a href="https://github.com/matrix-org/synapse/issues/7732">#7732</a>)</li>
<li>Fix incorrect error message when database CTYPE was set incorrectly. (<a href="https://github.com/matrix-org/synapse/issues/7760">#7760</a>)</li>
<li>Fix to not ignore <code>set_tweak</code> actions in Push Rules that have no <code>value</code>, as permitted by the specification. (<a href="https://github.com/matrix-org/synapse/issues/7766">#7766</a>)</li>
<li>Fix synctl to handle empty config files correctly. Contributed by @kotovalexarian. (<a href="https://github.com/matrix-org/synapse/issues/7779">#7779</a>)</li>
<li>Fixes a long standing bug in worker mode where worker information was saved in the devices table instead of the original IP address and user agent. (<a href="https://github.com/matrix-org/synapse/issues/7797">#7797</a>)</li>
<li>Fix 'stuck invites' which happen when we are unable to reject a room invite received over federation. (<a href="https://github.com/matrix-org/synapse/issues/7804">#7804</a>, <a href="https://github.com/matrix-org/synapse/issues/7809">#7809</a>, <a href="https://github.com/matrix-org/synapse/issues/7810">#7810</a>)</li>
</ul>
<h2 id="updates-to-the-docker-image">Updates to the Docker image</h2>
<ul>
<li>Include libwebp in the Docker file to properly handle webp image uploads. (<a href="https://github.com/matrix-org/synapse/issues/7791">#7791</a>)</li>
</ul>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Improve the documentation of the non-standard JSON web token login type. (<a href="https://github.com/matrix-org/synapse/issues/7776">#7776</a>)</li>
<li>Update doc links for caddy. Contributed by Nicolai Søborg. (<a href="https://github.com/matrix-org/synapse/issues/7789">#7789</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Refactor getting replication updates from database. (<a href="https://github.com/matrix-org/synapse/issues/7740">#7740</a>)</li>
<li>Send push notifications with a high or low priority depending upon whether they may generate user-observable effects. (<a href="https://github.com/matrix-org/synapse/issues/7765">#7765</a>)</li>
<li>Use symbolic names for replication stream names. (<a href="https://github.com/matrix-org/synapse/issues/7768">#7768</a>)</li>
<li>Add early returns to <code>_check_for_soft_fail</code>. (<a href="https://github.com/matrix-org/synapse/issues/7769">#7769</a>)</li>
<li>Fix up <code>synapse.handlers.federation</code> to pass mypy. (<a href="https://github.com/matrix-org/synapse/issues/7770">#7770</a>)</li>
<li>Convert the appserver handler to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7775">#7775</a>)</li>
<li>Allow to use higher versions of prometheus_client &lt;0.9.0 which are expected to introduce no breaking changes. Contributed by Oliver Kurz. (<a href="https://github.com/matrix-org/synapse/issues/7780">#7780</a>)</li>
<li>Update linting scripts and codebase to be compatible with <code>isort</code> v5. (<a href="https://github.com/matrix-org/synapse/issues/7786">#7786</a>)</li>
<li>Stop populating unused table <code>local_invites</code>. (<a href="https://github.com/matrix-org/synapse/issues/7793">#7793</a>)</li>
<li>Ensure that strings (not bytes) are passed into JSON serialization. (<a href="https://github.com/matrix-org/synapse/issues/7799">#7799</a>)</li>
<li>Switch from simplejson to the standard library json. (<a href="https://github.com/matrix-org/synapse/issues/7800">#7800</a>)</li>
<li>Add <code>signing_key</code> property to <code>HomeServer</code> to save code duplication. (<a href="https://github.com/matrix-org/synapse/issues/7805">#7805</a>)</li>
<li>Improve stacktraces from exceptions in background processes. (<a href="https://github.com/matrix-org/synapse/issues/7808">#7808</a>)</li>
<li>Fix various spelling errors in comments and log lines. (<a href="https://github.com/matrix-org/synapse/issues/7811">#7811</a>)</li>
</ul>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2020&#x2F;07&#x2F;10&#x2F;this-week-in-matrix-2020-07-10&#x2F;" title="This Week in Matrix 2020-07-10">This Week in Matrix 2020-07-10</a></h1>
            <span>
                10.07.2020 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="matrix-live">Matrix Live 🎙</h2>
<p>This week it's Open Tech Will Save Us!</p>
<iframe src="https://www.youtube.com/embed/_2DQ_iYZi5U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<ul>
<li><strong>Jay Graber</strong> (<a href="https://twitter.com/arcalinea">@arcalinea</a>, <a href="https://matrix.to/#/@arcalinea:matrix.org">@arcalinea:matrix.org</a>), creator of <a href="https://happening.net/">Happening</a> and <a href="https://medium.com/decentralized-web/decentralized-social-networks-e5a7a2603f53">all-around decentralisation fan</a> gave an overview of the decentralized social media ecosystem.</li>
<li><strong>Ania M. Piotrowska</strong> (<a href="https://twitter.com/aniampiotrowska">@aniampiotrowska</a>), known for her work on <a href="https://nymtech.net/">Nym</a>, Loopix, and at UCL presented &quot;Building private future for the internet with the Nym mixnet&quot;.</li>
<li><strong>Burak Nehbit</strong> (<a href="https://twitter.com/nehbit">@nehbit</a>, <a href="https://matrix.to/#/@burak:tomesh.net">@burak:tomesh.net</a>) gave a deep dive into his work on <a href="https://getaether.net/">Aether P2P</a>.</li>
</ul>
<h2 id="dept-of-spec-scroll">Dept of Spec 📜</h2>
<p><a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> reported:</p>
<blockquote>
<p>Here's your weekly spec update! The heart of Matrix is the specification - and this is modified by Matrix Spec Change (MSC) proposals. Learn more about how the process works at <a href="https://matrix.org/docs/spec/proposals.">https://matrix.org/docs/spec/proposals.</a></p>
<h4 id="msc-status">MSC Status</h4>
<p><strong>Merged MSCs:</strong></p>
<ul>
<li><em>No MSCs were merged this week.</em></li>
</ul>
<p><strong>MSCs in Final Comment Period:</strong></p>
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2630">MSC2630: checking public keys in SAS verification</a> (merge)</li>
</ul>
<p><strong>New MSCs:</strong></p>
<ul>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2677">MSC2677: Annotations and reactions</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2676">MSC2676: Message editing</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2675">MSC2675: Serverside aggregations of message relationships</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2674">MSC2674: Event Relationships</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2673">MSC2673: Notification Levels</a></p>
</li>
<li>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/2666">MSC2666: Get rooms in common with another user</a></p>
</li>
</ul>
<p>Note that a majority of those new MSCs are split out from <a href="https://github.com/matrix-org/matrix-doc/pull/1849">MSC1849</a> (the aggregations MSC) to make it easier to review 🙂</p>
<h4 id="spec-core-team">Spec Core Team</h4>
<p>In terms of Spec Core Team MSC focus for this week, we're sticking to implementation work. anoa did have some time this week to make the graphs more useful though:</p>
</blockquote>
<p><img src="/blog/img/2020-07-10-FFL8i-image.png" alt="2020-07-10-FFL8i-image.png" /></p>
<p>Check out that graph!</p>
<h2 id="dept-of-gsoc-mortar-board">Dept of GSoC 🎓️</h2>
<h3 id="html-embeddable-client-gsoc-project">HTML embeddable client GSoC project</h3>
<p><a href="https://matrix.to/#/@arnav-t:matrix.org">arnav-t</a> told us:</p>
<blockquote>
<p>This week for my HTML embeddable client GSoC project:</p>
<ul>
<li>
<p>Added full markdown support and made replying and quoting fully functional</p>
</li>
<li>
<p>Added a lot more configuration options to the client, including a read-only mode</p>
</li>
<li>
<p>Fixed some bugs</p>
</li>
</ul>
</blockquote>
<h3 id="go-neb">go-neb</h3>
<p><a href="https://matrix.to/#/@nikofil:matrix.org">nikofil</a> said:</p>
<blockquote>
<ul>
<li>
<p>work is still being done on the bot's functionality to test different crypto functionalities of other Matrix clients when thrown in a room with them</p>
</li>
<li>
<p>slight improvements to mautrix-go (sql store can now store multiple Olm accounts and their sessions, key rotation params taken from encryption event, other minor things)</p>
</li>
<li>
<p>add some simple instructions to the readme for enabling e2ee for neb as well as integrate these mautrix changes (PR #330)</p>
</li>
<li>
<p><code>room_key_request</code>s will probably be the next thing to be developed for mautrix-go</p>
</li>
</ul>
</blockquote>
<h3 id="nheko-gsoc">Nheko (GSoC)</h3>
<p><a href="https://github.com/Nheko-Reborn/nheko">Nheko</a> is a desktop client using Qt, Boost.Asio and C++17. It supports E2EE (with the notable exception being device verification for now) and intends to be full featured and nice to look at</p>
<p><a href="https://matrix.to/#/@crdy2k1:matrix.org">Chethan</a> said:</p>
<blockquote>
<ul>
<li>
<p>Added user cache which stores the encrypted user keys and updates them on sync</p>
</li>
<li>
<p>Added Verification Cache which stores verified devices of a user</p>
</li>
<li>
<p>Showing Verification Status of a device on Userprofile</p>
</li>
</ul>
</blockquote>
<h2 id="dept-of-p2p-busts-in-silhouette">Dept of P2P 👥</h2>
<h3 id="riot-ios-p2p-demo">Riot iOS P2P Demo</h3>
<p><a href="https://matrix.to/#/@neilalexander:matrix.org">Neil Alexander</a> announced:</p>
<blockquote>
<p>Over the last couple of weeks I have been working on the next P2P demo, using <a href="https://yggdrasil-network.github.io/">Yggdrasil</a> as the transport instead of <a href="https://libp2p.io/">libp2p</a>. Although libp2p is arguably more featureful in many ways, Yggdrasil does have one major benefit in that it provides full overlay routing. Participants in the network can carry traffic on behalf of other participants, resulting in something much closer to a true mesh network.</p>
<p>The mad science doesn't end there however. I've also built a custom Riot iOS build that includes the full Dendrite P2P demo (yes, that's a homeserver running locally on your phone). If you have an iPhone or iPad, it's available in <a href="https://testflight.apple.com/join/Tgh2MEk6">public TestFlight right now</a> and you can play with it!</p>
<p>The demo still is very experimental and has a number of bugs still (including but not limited to messages occasionally taking a while to deliver, the app crashing when going into the background sometimes etc.) but we'll be improving it further in the coming weeks and it's quite fun to play with, particularly if you can do so with other people nearby.</p>
<p>Thanks to the same technology that powers AirDrop, the demo will automatically find and connect to other nearby devices running the demo and build up a network automatically - even if you are not on the same Wi-Fi network (or indeed connected to Wi-Fi at all)! If you don't have any other nearby peers to test with then fear not - you can still configure a public static peer in the app settings and join the wider network that way.</p>
<p>With any luck the room directory will even work too, showing published rooms from other nearby devices. If not, try joining <code>#beachparty:b5ae50589e50991dd9dd7d59c5c5f7a4521e8da5b603b7f57076272abc58b374</code> from within the app.</p>
<p>Questions, comments or feedback? Join us in <code>#p2p:matrix.org</code>!</p>
</blockquote>
<h2 id="dept-of-servers-europea">Dept of Servers 🏢</h2>
<h3 id="a-new-way-to-test-homeservers-complement">A new way to test homeservers - <a href="https://github.com/matrix-org/complement">Complement</a></h3>
<p><a href="https://matrix.to/#/@kegan:matrix.org">kegan</a> reported:</p>
<blockquote>
<p>Many of you know that I work on a Go homeserver called <strong>Dendrite</strong>, and so I've had to get familiar with <strong>SyTest</strong>: a black-box homeserver integration testing project. Unfortunately SyTest has a number of problems: from the dialect of perl, lack of documentation for federation bits, the inability to run a single test, and so on. Having a solid black-box integration testing project is crucial for the ecosystem to ensure spec compliance (and hence compatibility between server implementations) and for making all servers more stable and reliable.</p>
<p>As a side project I've been working on a modern Go rewrite called <strong>Complement</strong> which is now ready for a bit more exposure. It currently only has a handful of SyTests converted but I hope to rapidly expand the number in the coming weeks. Complement makes heavy use of Docker to agnostically run homeservers, and already includes a Dockerfile for configuring a Dendrite instance. To try it out, clone the repo and run:</p>
<pre style="background-color:#1e1e1e;color:#dcdcdc;"><code><span>(cd dockerfiles &amp;&amp; docker build -t complement-dendrite -f Dendrite.Dockerfile .)
</span><span>
</span><span>COMPLEMENT_BASE_IMAGE=complement-dendrite:latest go test -v ./tests
</span></code></pre>
<p>If you're interested in learning more and maybe adding some tests check out <a href="https://github.com/matrix-org/complement/blob/master/ONBOARDING.md">ONBOARDING.md</a>.</p>
<p>My overall hope is that Complement will lower the barrier to entry when adding tests by so much that it encourages any bugfix/feature in any homeserver implementation to result in a new test. This will benefit everyone and create a feedback loop which will make Matrix even more reliable.</p>
</blockquote>
<p>Asked about Sytest and SyTS, Kegan added:</p>
<blockquote>
<p>Complement currently implements the same tests as sytest, so tests which pass sytest will pass complement (though that will diverge as complement will guard against more race conditions by default). There's about 9 different kinds of tests currently testing CS-API and Federation (outbound to a dummy server and inbound via a federation client)</p>
<p>The problem with SyTS was that the test tooling around it ultimately wasn't expressive enough. I was using Jest and kept finding myself fighting it by bumping up against issues like <a href="https://github.com/facebook/jest/pull/8751">https://github.com/facebook/jest/pull/8751</a> and the multi-process parallelisation stuff was too opaque. The assertion helper functions also lacked context because they rely on behavioural testing names like <code>describe(&quot;foo&quot;) { it(&quot;should say bar&quot;) { ... }</code> etc so when your assertion fails (eg wrong value for a JSON key using assert equals) it just says unhelpfully &quot;foo != bar&quot; where what I really want is to know what it actually does say then, and other contextual info around the object (maybe the key name was typod). When I realised that the assertion lib didn't have this and I'd need to add it, coupled with parallelisation concerns and head-desking against Jest, I found myself wishing I just used something else. I stuck with it though and then realised that all the federation stuff (signature checking, canonical JSON, etc) would need to re-implemented when I knew I had working code in Go. Both of these things combined and I thought &quot;you know what, I'm just going to do this in Go&quot; but you'll note that the architecture is identical, so SyTS lives on as an early prototype for Complement ;)</p>
</blockquote>
<p>Find out more in the room: <a href="https://matrix.to/#/#complement:matrix.org">#complement:matrix.org</a>.</p>
<h3 id="dendrite-gomatrixserverlib">Dendrite / gomatrixserverlib</h3>
<p>Dendrite is a next-generation homeserver written in Go</p>
<p><a href="https://matrix.to/#/@neilalexander:matrix.org">Neil Alexander</a> told us:</p>
<blockquote>
<p>While I've been busy distracted with the P2P demo, Kegan has been on a mission to implement some new features. Changes this week include:</p>
<ul>
<li>
<p>Redaction is now mostly implemented</p>
</li>
<li>
<p>User-interactive authentication is now implemented</p>
</li>
<li>
<p>Device lists in the client API are now implemented</p>
</li>
<li>
<p>Media APIs are now available on both <code>/r0</code> and <code>/v1</code> endpoints which makes Riot iOS a bit happier</p>
</li>
<li>
<p>Some federation sender bugs have been fixed</p>
</li>
<li>
<p>Some database locks in the federation sender in SQLite mode have been fixed</p>
</li>
</ul>
<p>Spec compliance has improved a bit:</p>
<ul>
<li>
<p>Client-Server APIs: 48%, up from 45% last week</p>
</li>
<li>
<p>Server-Server APIs: 51%, up from 50% last week</p>
</li>
</ul>
</blockquote>
<h3 id="conduit">Conduit</h3>
<p>Conduit is a Matrix homeserver written in Rust <a href="https://conduit.rs">https://conduit.rs</a></p>
<p><a href="https://matrix.to/#/@timo:koesters.xyz">timo</a> said:</p>
<blockquote>
<p>Conduit</p>
<p>Hi everyone, here are some things we worked on this week:</p>
<ul>
<li>
<p>Work on to-device sending improvements</p>
</li>
<li>
<p>Work on room tags (thanks to @gnieto)</p>
</li>
<li>
<p>Merged /logout/all endpoint (thanks to @CapsizeGlimmer)</p>
</li>
<li>
<p>Work on /joined_members (thanks to @CapsizeGlimmer)</p>
</li>
</ul>
<p>Last week we had a list of major features still missing. Here's a list of what already works:</p>
<p>Registering, logging in, creating rooms, room visibility, join rules, basic permission management, public room list, inviting, creating DMs, e2e encryption, key backups, device verification, cross signing, notifications, uploading media/files (also user/room avatars), lower-resolution media thumbnails, voip calls and a few other thing's I'm forgetting right now.
So it's useable for non-federating chats already.</p>
<p>Thanks to everyone who supports me on <a href="https://liberapay.com/timokoesters">Liberapay</a> or Bitcoin!</p>
</blockquote>
<h3 id="synapse">Synapse</h3>
<p><a href="https://matrix.to/#/@neilj:matrix.org">Neil</a> reported:</p>
<blockquote>
<p>In Synapse land this week, we shipped <a href="https://matrix.org/blog/2020/07/08/synapse-1-16-0-released">1.16.0</a> and err <a href="https://github.com/matrix-org/synapse/releases/tag/v1.16.1">1.16.1</a>. </p>
<p>Lifting from the blog post, the highlights are:-</p>
<ul>
<li>
<p>An important performance fix to improve room state resolution.</p>
</li>
<li>
<p>An option to enable e2e by default for new rooms.</p>
</li>
<li>
<p>Ability to run multiple media repo workers side by side.</p>
</li>
<li>
<p>Ability to mark specific content as being safe from quarantine.</p>
</li>
<li>
<p>Bug fixes to make migrating from SQLite to Postgres more reliable - if you are running sqlite for anything other than evaluation purposes then please migrate!</p>
</li>
</ul>
<p>We also put out a <a href="https://github.com/matrix-org/synapse/releases/tag/v1.17.0rc1">release candidate</a> for 1.17.0 which all being well we’ll release on Monday. 1.17.0 is really a bug fix release the most notable being finally squashing a long standing bug that caused <a href="https://github.com/matrix-org/synapse/issues/2181">locally rejected invites to get ‘stuck’ client side</a>.</p>
<p>Continuing our matrix.org performance theme, having now got the CS API largely into a good state of responsiveness, we are looking at federation lag. Today we shipped a sharded Federation Reader to matrix.org which has reduced the average lag from seconds to milliseconds. We are just running two currently and are still tuning as we figure out how to get the best from it. Initial impressions seem promising. Watch this space. </p>
</blockquote>
<p><img src="/blog/img/2020-07-10-qiwpr-Screenshot2020-07-10at16.02.39.png" alt="2020-07-10-qiwpr-Screenshot2020-07-10at16.02.39.png" /></p>
<blockquote>
<p>We also have a <a href="https://github.com/matrix-org/synapse/pull/7798">PR out for review</a> to shard the Federation Sender, which will have much the same effect in the other direction. </p>
<p>Once we have sending messages via the Client-Server API, much reduced federation lag and a sharded Pusher we’ll take a look at room joins.</p>
</blockquote>
<h2 id="synapse-deployment-inbox-tray">Synapse Deployment 📥️</h2>
<h3 id="dacruz21-matrix-chart">dacruz21/matrix-chart</h3>
<p><a href="https://matrix.to/#/@david:typokign.com">Typo Kign</a> reported:</p>
<blockquote>
<p>v2.3.0 of <a href="https://hub.helm.sh/charts/dacruz21/matrix">dacruz21/matrix-chart</a> has been published with Synapse 1.16.</p>
</blockquote>
<h3 id="kubernetes">Kubernetes</h3>
<blockquote>
<p>Just pushed the 1.16 K8s-optimized Synapse image tags, this time done from a tablet in a server room between moving a bunch of hardware.</p>
</blockquote>
<h3 id="new-wireguard-based-deployment">New WireGuard-based deployment</h3>
<p><a href="https://matrix.to/#/@balaa:pi2.noteworthy.im">balaa</a> announced:</p>
<blockquote>
<p>Hi everyone, my friend Patrick and I have been working on making Matrix more accessible in the context of personal overlay networks powered by WireGuard. We’ve built a 1-click deployment solution for Synapse &amp; Riot based on docker. The interesting part is that it gives you public addressability via a distributed proxy service that we have been developing. We are free and open source and welcoming contributors and testers ASAP! We are imagining an ecosystem for building collaborative intranets and see them as foundational to a freer, more equitable internet. Please join us at <a href="https://matrix.to/#/#noteworthy:tincan.community">#noteworthy:tincan.community</a> See <a href="https://www.patrickdlg.com/personal-messaging/">https://www.patrickdlg.com/personal-messaging/</a> and <a href="https://noteworthy.tech/start/">https://noteworthy.tech/start/</a></p>
</blockquote>
<h2 id="dept-of-bridges-bridge-at-night">Dept of Bridges 🌉</h2>
<h3 id="mautrix-whatsapp">mautrix-whatsapp</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> announced:</p>
<blockquote>
<p>mautrix-whatsapp got some bugfixes and improvements:</p>
<ul>
<li>
<p>You can now create private chat portals by inviting a WhatsApp ghost user (e.g. from a group chat)</p>
</li>
<li>
<p>WhatsApp users in groups are now synced to Matrix properly, including kicking users who left the group without the bridge noticing</p>
</li>
</ul>
</blockquote>
<h3 id="matrix-sms-bridge">matrix-sms-bridge</h3>
<p><a href="https://matrix.to/#/@benedict:imbitbu.de">Benedict</a> offered:</p>
<blockquote>
<p>I fixed some bugs in <a href="https://github.com/benkuly/matrix-sms-bridge">matrix-sms-bridge</a> and added a feature that allows delayed sending of sms messages with the <code>sms send</code> command. It runs very fast and stable in my production environment.</p>
</blockquote>
<h2 id="dept-of-clients-iphone">Dept of Clients 📱</h2>
<h3 id="nheko">Nheko</h3>
<p><a href="https://github.com/Nheko-Reborn/nheko">Nheko</a> is a desktop client using Qt, Boost.Asio and C++17. It supports E2EE (with the notable exception being device verification for now) and intends to be full featured and nice to look at</p>
<p><a href="https://matrix.to/#/@deepbluev7:neko.dev">Nico (@deepbluev7:neko.dev)</a> reported:</p>
<blockquote>
<p>Not much to talk about currently, since I'm breaking my Nheko to replace the entire event store at this moment, but I have some heads up on an annoying bug that I fixed on my branch:</p>
<p>Sometimes we had a weird issue, where Nheko wouldn't load the language the user set on their system. This was especially annoying when I wanted to test a specific language, like Japanese, and I couldn't figure out the right LANG* variables to set the language to Japanese in Nheko. Turns out, this was a bug in Nheko and you wouldn't have guessed so, when looking at the examples in the Qt documentation. Anyway, KDAB wrote a nice blogpost explaining this issue: <a href="https://www.kdab.com/fixing-a-common-antipattern-when-loading-translations-in-qt/">https://www.kdab.com/fixing-a-common-antipattern-when-loading-translations-in-qt/</a></p>
<p>If you are a Qt developer, you may want to check your applications, if you are also affected.</p>
</blockquote>
<h3 id="riot-ios">Riot-iOS</h3>
<p><a href="https://matrix.to/#/@stevio:matrix.org">steve</a> offered:</p>
<blockquote>
<p>This week, we worked on the rebranding.</p>
</blockquote>
<h3 id="riotx-riot-android">RiotX / Riot-Android</h3>
<p><a href="https://matrix.to/#/@benoit.marty:matrix.org">benoit</a> announced:</p>
<blockquote>
<p>We will release a beta (0.91.5) of Riot-Android this evening, including all the recent changes and lots of fixes. We are still working to prepare the great release!</p>
</blockquote>
<h3 id="daydream">Daydream</h3>
<p><a href="https://matrix.to/#/@mtrnord:nordgedanken.dev">MTRNord</a> told us:</p>
<blockquote>
<p>While not much is happening on the master branch some things happened on the Redesign branch:</p>
<ul>
<li>
<p>Daydream does the sync now on a worker which is similar to using a thread</p>
</li>
<li>
<p>jplatte made a PR for optimizing multiple Parts of the Code which significantly improved the overall Daydream performance ( <a href="https://github.com/daydream-mx/Daydream/pull/22">https://github.com/daydream-mx/Daydream/pull/22</a> )</p>
</li>
<li>
<p>Some rework of the Login logic happened to prepare for well-known support</p>
</li>
</ul>
</blockquote>
<h2 id="dept-of-sdks-and-frameworks">Dept of SDKs and Frameworks 🧰</h2>
<h3 id="mautrix-python">mautrix-python</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">Tulir</a> offered:</p>
<blockquote>
<p>When I initially implemented end-to-bridge encryption in mautrix-python, I used matrix-nio in a slightly hacky way to get it done quickly. It worked fine in some cases, but also caused some undecryptable messages. I tried switching to using matrix-nio's crypto module directly, but the sans-I/O design made that difficult: there were too many parts that needed to be hooked up to the actual I/O and I wasn't able to find them all. In the end, I just decided to implement the basic e2ee stuff directly in mautrix-python the same way it's implemented in mautrix-go.</p>
<p>All my bridges based on mautrix-python (Telegram, Facebook and Hangouts) have been switched to use the new crypto stuff. After a few initial bugs that are already fixed, it seems to work better than the old system. I'll probably add native e2ee to maubot soon too, which is my last main project that's still missing e2ee.</p>
</blockquote>
<h2 id="dept-of-internet-of-things-bulb">Dept of Internet of Things 💡</h2>
<h3 id="mozilla-iot-matrix-adapter-0-3">Mozilla IoT Matrix Adapter 0.3</h3>
<p><a href="https://matrix.to/#/@christianp:vector.modular.im">Christian</a> reported:</p>
<blockquote>
<p>The <a href="https://gitlab.com/webthings/matrix-adapter">Mozilla IoT Matrix Adapter</a> can send posts based on events in your home.</p>
<p>Version 0.3 brings the ability to use room aliases instead of internal room ids.
Furthermore, you can configure it to accept invites and follow room upgrades.</p>
</blockquote>
<p>Due to utter negligence and malpractice by myself, we missed the update for this project last week. Of course, 0.2 is now superseded by 0.3, but here is the 0.2 update anyway:</p>
<blockquote>
<p>Released <a href="https://gitlab.com/webthings/matrix-adapter/-/releases/v0.2.0">v0.2.0 of the Mozilla IoT Matrix adapter</a>. It's now possible to post in multiple rooms (still one per post).</p>
</blockquote>
<h2 id="dept-of-bots-robot-face">Dept of Bots 🤖</h2>
<h3 id="cat-disruptor-7000">Cat Disruptor 7000</h3>
<p><a href="https://matrix.to/#/@stephen:m.scd31.com">Stephen D</a> told us:</p>
<blockquote>
<p>I wrote a pretty simple Matrix bot in Rust which is loosely based on Cat Disruptor 6000. It will react with 🐈️ to any message containing the string &quot;cat&quot; *. Since it is a small project, I hope it can be used as an example for other people interested in writing Matrix bots in Rust. It implements several important features (crypto/device store, auto-accepting invites, crafting custom events, etc.) You can host it yourself, or you can try it out by inviting the user &quot;@catdisruptor:m.scd31.com&quot; to your room! <a href="https://git.scd31.com/stephen/cat-disruptor-7000">https://git.scd31.com/stephen/cat-disruptor-7000</a></p>
<p>* Cat Disruptor 6000 does not do this (it is used for disrupting monologues with cat pictures). However, many instances of Cat Disruptor 6000 also include a separate bot, which is what Cat Disruptor 7000 is mimicking.</p>
</blockquote>
<h3 id="matrix-imposter-bot">matrix-imposter-bot</h3>
<p><a href="https://matrix.to/#/@mr_johnson22:matrix.org">mr_johnson22</a> said:</p>
<blockquote>
<p><strong>matrix-imposter-bot</strong> - <em>A bot that uses your account to repeat other people's messages. This gives relay-bot capabilities to puppet-only bridges.</em></p>
<p>Updates:</p>
<ul>
<li>
<p>Can be much more easily deployed with a production-level WSGI server. It comes with <a href="https://docs.pylonsproject.org/projects/waitress/en/stable/index.html">waitress</a> but it's possible to use any other server.</p>
</li>
<li>
<p>Member join/leave/rename now post messages</p>
</li>
<li>
<p>Shuts down when receiving a term/exit/quit signal, instead of hanging</p>
</li>
</ul>
<p>For more details, see <a href="https://github.com/mrjohnson22/matrix-imposter-bot">https://github.com/mrjohnson22/matrix-imposter-bot</a></p>
</blockquote>
<h2 id="dept-of-interesting-projects">Dept of Interesting Projects 🛰️</h2>
<h3 id="cody">cody</h3>
<p><a href="https://matrix.to/#/@carl:bordum.dk">carl</a> offered:</p>
<blockquote>
<p>cody is a REPL for your matrix chat rooms.</p>
<p>This week, the big new feature was support for Ruby with the message prefix <code>!rb</code>.</p>
<p>Chat with cody: @cody:bordum.dk</p>
<p>Read the source: <a href="https://gitlab.com/carlbordum/matrix-cody">https://gitlab.com/carlbordum/matrix-cody</a></p>
</blockquote>
<h2 id="dept-of-jobs-moneybag">Dept of Jobs 💰️</h2>
<h3 id="famedly-is-recruiting">Famedly is recruiting</h3>
<p><a href="https://matrix.to/#/@sorunome:sorunome.de">sorunome</a> announced:</p>
<blockquote>
<p>Heya, we (<a href="https://famedly.com">famedly</a>) are looking for about 2-3 more flutter developers. We are a german startup which works on revolutionizing communication in the medical area. We build on top of matrix, so having some matrix-knowledge would be very beneficial.</p>
<p>You might have seen us previously in TWIM with projects such as <a href="https://gitlab.com/famedly/bridges/famedly-email-bridge">famedly-email-bridge</a> or the <a href="https://gitlab.com/famedly/famedlysdk/">famedly dart SDK</a>.</p>
<p>While we are based in Berlin we do allow remote work, and communication in english is fine, too.</p>
<p>If you are interested or have more questions, please message <a href="https://matrix.to/#/@larodar:famedly.de">Niklas Zender</a>.</p>
</blockquote>
<h2 id="dept-of-ping-table-tennis-paddle-and-ball">Dept of Ping 🏓</h2>
<p>Here we reveal, rank, and applaud the homeservers with the lowest ping, as measured by <a href="https://github.com/maubot/echo">pingbot</a>, a <a href="https://github.com/maubot/maubot">maubot</a> that you can host on your own server. Join <a href="https://matrix.to/#/#ping:maunium.net">#ping:maunium.net</a> to experience the fun live, and to find out how to add YOUR server to the game.</p>
<table><thead><tr><th style="text-align: center">Rank</th><th style="text-align: center">Hostname</th><th style="text-align: center">Median MS</th></tr></thead><tbody>
<tr><td style="text-align: center">1</td><td style="text-align: center">fairydust.space</td><td style="text-align: center">334</td></tr>
<tr><td style="text-align: center">2</td><td style="text-align: center">matrix.vgorcum.com</td><td style="text-align: center">637.5</td></tr>
<tr><td style="text-align: center">3</td><td style="text-align: center">lossy.network</td><td style="text-align: center">657</td></tr>
<tr><td style="text-align: center">4</td><td style="text-align: center">asra.gr</td><td style="text-align: center">795</td></tr>
<tr><td style="text-align: center">5</td><td style="text-align: center">swag.industries</td><td style="text-align: center">1407.5</td></tr>
<tr><td style="text-align: center">6</td><td style="text-align: center">lo.hn</td><td style="text-align: center">1481</td></tr>
<tr><td style="text-align: center">7</td><td style="text-align: center">finallycoffee.eu</td><td style="text-align: center">1804</td></tr>
<tr><td style="text-align: center">8</td><td style="text-align: center">nzbr.de</td><td style="text-align: center">1885.5</td></tr>
<tr><td style="text-align: center">9</td><td style="text-align: center">halogen.city</td><td style="text-align: center">2275</td></tr>
<tr><td style="text-align: center">10</td><td style="text-align: center">utzutzutz.net</td><td style="text-align: center">2462.5</td></tr>
</tbody></table>
<h2 id="that-s-all-i-know-checkered-flag">That's all I know 🏁</h2>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2020&#x2F;07&#x2F;08&#x2F;synapse-1-16-0-released&#x2F;" title="Synapse 1.16.0 released">Synapse 1.16.0 released</a></h1>
            <span>
                08.07.2020 19:18
                —
                <a href="/category/releases">
                    Releases
                </a>
                —
                <a href="/author/neil-johnson">
                    Neil Johnson
                </a>
            </span>
            <br>
            <small>Last update: 08.07.2020 14:45</small>
        </header>
        <div>
            <p>Synapse 1.16.0 is here!</p>
<p>Notable additions in 1.16.0 include:-</p>
<ul>
<li>An important performance fix to improve room state resolution.</li>
<li>An option to enable e2e by default for new rooms.</li>
<li>Ability to run multiple media repo workers side by side.</li>
<li>Ability to mark specific content as being safe from quarantine.</li>
<li>Bug fixes to make migrating from SQLite to Postgres more reliable - if you are running sqlite for anything other than evaluation purposes then please migrate!</li>
</ul>
<p>Note, we have deprecated the <code>m.login.jwt</code> login method in favour of <code>org.matrix.login.jwt</code> see the changelog for more details.</p>
<p>Enjoy!</p>
<p>Get the new releases from any of the usual sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md. 1.16.0 is on github <a href="https://github.com/matrix-org/synapse/releases/tag/v1.16.0">here</a>.</p>
<p>Changelog for 1.16.0 follows:</p>
<h1 id="synapse-1-16-0-2020-07-08">Synapse 1.16.0 (2020-07-08)</h1>
<p>No significant changes since 1.16.0rc2.</p>
<p>Note that this release deprecates the <code>m.login.jwt</code> login method, renaming it to <code>org.matrix.login.jwt</code>, as <code>m.login.jwt</code> is not part of the Matrix spec. Otherwise the behaviour is identical. Synapse will accept both names for now, but this may change in a future release.</p>
<h1 id="synapse-1-16-0rc2-2020-07-02">Synapse 1.16.0rc2 (2020-07-02)</h1>
<p>Synapse 1.16.0rc2 includes the security fixes released with Synapse 1.15.2.
Please see the <a href="https://github.com/matrix-org/synapse/releases/tag/v1.15.2">1.15.2 release notes</a> for more details.</p>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Update postgres image in example <code>docker-compose.yaml</code> to tag <code>12-alpine</code>. (<a href="https://github.com/matrix-org/synapse/issues/7696">#7696</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Add some metrics for inbound and outbound federation latencies: <code>synapse_federation_server_pdu_process_time</code> and <code>synapse_event_processing_lag_by_event</code>. (<a href="https://github.com/matrix-org/synapse/issues/7771">#7771</a>)</li>
</ul>
<h1 id="synapse-1-16-0rc1-2020-07-01">Synapse 1.16.0rc1 (2020-07-01)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Add an option to enable encryption by default for new rooms. (<a href="https://github.com/matrix-org/synapse/issues/7639">#7639</a>)</li>
<li>Add support for running multiple media repository workers. See <a href="https://github.com/matrix-org/synapse/blob/release-v1.16.0/docs/workers.md">docs/workers.md</a> for instructions. (<a href="https://github.com/matrix-org/synapse/issues/7706">#7706</a>)</li>
<li>Media can now be marked as safe from quarantined. (<a href="https://github.com/matrix-org/synapse/issues/7718">#7718</a>)</li>
<li>Expand the configuration options for auto-join rooms. (<a href="https://github.com/matrix-org/synapse/issues/7763">#7763</a>)</li>
</ul>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Remove <code>user_id</code> from the response to <code>GET /_matrix/client/r0/presence/{userId}/status</code> to match the specification. (<a href="https://github.com/matrix-org/synapse/issues/7606">#7606</a>)</li>
<li>In worker mode, ensure that replicated data has not already been received. (<a href="https://github.com/matrix-org/synapse/issues/7648">#7648</a>)</li>
<li>Fix intermittent exception during startup, introduced in Synapse 1.14.0. (<a href="https://github.com/matrix-org/synapse/issues/7663">#7663</a>)</li>
<li>Include a user-agent for federation and well-known requests. (<a href="https://github.com/matrix-org/synapse/issues/7677">#7677</a>)</li>
<li>Accept the proper field (<code>phone</code>) for the <code>m.id.phone</code> identifier type. The legacy field of <code>number</code> is still accepted as a fallback. Bug introduced in v0.20.0. (<a href="https://github.com/matrix-org/synapse/issues/7687">#7687</a>)</li>
<li>Fix &quot;Starting db txn 'get_completed_ui_auth_stages' from sentinel context&quot; warning. The bug was introduced in 1.13.0. (<a href="https://github.com/matrix-org/synapse/issues/7688">#7688</a>)</li>
<li>Compare the URI and method during user interactive authentication (instead of the URI twice). Bug introduced in 1.13.0. (<a href="https://github.com/matrix-org/synapse/issues/7689">#7689</a>)</li>
<li>Fix a long standing bug where the response to the <code>GET room_keys/version</code> endpoint had the incorrect type for the <code>etag</code> field. (<a href="https://github.com/matrix-org/synapse/issues/7691">#7691</a>)</li>
<li>Fix logged error during device resync in opentracing. Broke in v1.14.0. (<a href="https://github.com/matrix-org/synapse/issues/7698">#7698</a>)</li>
<li>Do not break push rule evaluation when receiving an event with a non-string body. This is a long-standing bug. (<a href="https://github.com/matrix-org/synapse/issues/7701">#7701</a>)</li>
<li>Fixs a long standing bug which resulted in an exception: &quot;TypeError: argument of type 'ObservableDeferred' is not iterable&quot;. (<a href="https://github.com/matrix-org/synapse/issues/7708">#7708</a>)</li>
<li>The <code>synapse_port_db</code> script no longer fails when the <code>ui_auth_sessions</code> table is non-empty. This bug has existed since v1.13.0. (<a href="https://github.com/matrix-org/synapse/issues/7711">#7711</a>)</li>
<li>Synapse will now fetch media from the proper specified URL (using the r0 prefix instead of the unspecified v1). (<a href="https://github.com/matrix-org/synapse/issues/7714">#7714</a>)</li>
<li>Fix the tables ignored by <code>synapse_port_db</code> to be in sync the current database schema. (<a href="https://github.com/matrix-org/synapse/issues/7717">#7717</a>)</li>
<li>Fix missing <code>Content-Length</code> on HTTP responses from the metrics handler. (<a href="https://github.com/matrix-org/synapse/issues/7730">#7730</a>)</li>
<li>Fix large state resolutions from stalling Synapse for seconds at a time. (<a href="https://github.com/matrix-org/synapse/issues/7735">#7735</a>, <a href="https://github.com/matrix-org/synapse/issues/7746">#7746</a>)</li>
</ul>
<h2 id="improved-documentation-1">Improved Documentation</h2>
<ul>
<li>Spelling correction in sample_config.yaml. (<a href="https://github.com/matrix-org/synapse/issues/7652">#7652</a>)</li>
<li>Added instructions for how to use Keycloak via OpenID Connect to authenticate with Synapse. (<a href="https://github.com/matrix-org/synapse/issues/7659">#7659</a>)</li>
<li>Corrected misspelling of PostgreSQL. (<a href="https://github.com/matrix-org/synapse/issues/7724">#7724</a>)</li>
</ul>
<h2 id="deprecations-and-removals">Deprecations and Removals</h2>
<ul>
<li>Deprecate <code>m.login.jwt</code> login method in favour of <code>org.matrix.login.jwt</code>, as <code>m.login.jwt</code> is not part of the Matrix spec. (<a href="https://github.com/matrix-org/synapse/issues/7675">#7675</a>)</li>
</ul>
<h2 id="internal-changes-1">Internal Changes</h2>
<ul>
<li>Refactor getting replication updates from database. (<a href="https://github.com/matrix-org/synapse/issues/7636">#7636</a>)</li>
<li>Clean-up the login fallback code. (<a href="https://github.com/matrix-org/synapse/issues/7657">#7657</a>)</li>
<li>Increase the default SAML session expiry time to 15 minutes. (<a href="https://github.com/matrix-org/synapse/issues/7664">#7664</a>)</li>
<li>Convert the device message and pagination handlers to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7678">#7678</a>)</li>
<li>Convert typing handler to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7679">#7679</a>)</li>
<li>Require <code>parameterized</code> package version to be at least 0.7.0. (<a href="https://github.com/matrix-org/synapse/issues/7680">#7680</a>)</li>
<li>Refactor handling of <code>listeners</code> configuration settings. (<a href="https://github.com/matrix-org/synapse/issues/7681">#7681</a>)</li>
<li>Replace uses of <code>six.iterkeys</code>/<code>iteritems</code>/<code>itervalues</code> with <code>keys()</code>/<code>items()</code>/<code>values()</code>. (<a href="https://github.com/matrix-org/synapse/issues/7692">#7692</a>)</li>
<li>Add support for using <code>rust-python-jaeger-reporter</code> library to reduce jaeger tracing overhead. (<a href="https://github.com/matrix-org/synapse/issues/7697">#7697</a>)</li>
<li>Make Tox actions work on Debian 10. (<a href="https://github.com/matrix-org/synapse/issues/7703">#7703</a>)</li>
<li>Replace all remaining uses of <code>six</code> with native Python 3 equivalents. Contributed by @ilmari. (<a href="https://github.com/matrix-org/synapse/issues/7704">#7704</a>)</li>
<li>Fix broken link in sample config. (<a href="https://github.com/matrix-org/synapse/issues/7712">#7712</a>)</li>
<li>Speed up state res v2 across large state differences. (<a href="https://github.com/matrix-org/synapse/issues/7725">#7725</a>)</li>
<li>Convert directory handler to async/await. (<a href="https://github.com/matrix-org/synapse/issues/7727">#7727</a>)</li>
<li>Move <code>flake8</code> to the end of <code>scripts-dev/lint.sh</code> as it takes the longest and could cause the script to exit early. (<a href="https://github.com/matrix-org/synapse/issues/7738">#7738</a>)</li>
<li>Explain the &quot;test&quot; conditional requirement for dependencies is not all of the modules necessary to run the unit tests. (<a href="https://github.com/matrix-org/synapse/issues/7751">#7751</a>)</li>
<li>Add some metrics for inbound and outbound federation latencies: <code>synapse_federation_server_pdu_process_time</code> and <code>synapse_event_processing_lag_by_event</code>. (<a href="https://github.com/matrix-org/synapse/issues/7755">#7755</a>)</li>
</ul>

        </div>
    </article>
    
    <nav class="pagination">
    <div class="prev">
        
        <a href="&#x2F;blog&#x2F;page&#x2F;23&#x2F;">‹ Previous</a>
        
    </div>
    <span class="page-number">24 / 64</span>
    <div class="prev">
        
        <a href="&#x2F;blog&#x2F;page&#x2F;25&#x2F;">Next ›</a>
        
    </div>
</nav>

</div>
    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;security-hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="&#x2F;code"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p>© 2022 The Matrix.org Foundation C.I.C.</p>
</footer>

</body>

</html>
