<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - Blog</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/png" href="/assets/favicon.png" />
    <link rel="stylesheet" href="/style.css" />

    </head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo-white.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            current">
            Blog
        </a>
        
        
        
        
        
        <details  class="section-wrap mobile">
            <summary class="section ">
                Documentation
                <div class="arrow"></div>
            </summary>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    
                    
                    <a href="&#x2F;docs&#x2F;users&#x2F;">Users</a>
                    
                    
                    <a href="&#x2F;docs&#x2F;communities&#x2F;">Communities</a>
                    
                    
                    <a href="&#x2F;docs&#x2F;developers&#x2F;">Developers</a>
                    
                    
                    <a href="&#x2F;docs&#x2F;legacy&#x2F;">Legacy documentation</a>
                    
                </div>
            </div>
        </details>
        <div class="section-wrap desktop">
            <a href="&#x2F;docs&#x2F;" class="section ">
                Documentation
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    
                    
                    <a href="&#x2F;docs&#x2F;users&#x2F;">Users</a>
                    
                    
                    <a href="&#x2F;docs&#x2F;communities&#x2F;">Communities</a>
                    
                    
                    <a href="&#x2F;docs&#x2F;developers&#x2F;">Developers</a>
                    
                    
                    <a href="&#x2F;docs&#x2F;legacy&#x2F;">Legacy documentation</a>
                    
                </div>
            </div>
        </div>
        
        
        
        
        
        <details  class="section-wrap mobile">
            <summary class="section ">
                Ecosystem
                <div class="arrow"></div>
            </summary>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bots&#x2F;">Bots</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                    
                </div>
            </div>
        </details>
        <div class="section-wrap desktop">
            <a href="&#x2F;ecosystem&#x2F;" class="section ">
                Ecosystem
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bots&#x2F;">Bots</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        <div class="content">
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2018&#x2F;05&#x2F;04&#x2F;this-week-in-matrix-2018-05-04&#x2F;" title="This Week In Matrix – 2018-05-04">This Week In Matrix – 2018-05-04</a></h1>
            <span>
                04.05.2018 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="project-updates">Project Updates</h2>
<h3 id="clients">Clients</h3>
<h4 id="nheko">nheko</h4>
<p><a href="https://github.com/mujx/nheko">nheko</a>, Qt desktop client announced release v0.4.0. From their own changelog:</p>
<ul>
 	<li>Basic member list</li>
 	<li>Basic room settings menu</li>
 	<li>Support for displaying stickers</li>
 	<li>Fuzzy search for rooms</li>
</ul>
<a href="https://github.com/mujx/nheko/releases/tag/v0.4.0">https://github.com/mujx/nheko/releases/tag/v0.4.0</a> for more information.
<p><a href="https://matrix.to/#/@mujx:matrix.org">mujx</a> - <a href="https://github.com/mujx/nheko">https://github.com/mujx/nheko</a> - <a href="https://matrix.to/#/#nheko:matrix.org">#nheko:matrix.org</a></p>
<h4 id="fractal">Fractal</h4>
<p><a href="https://gitlab.gnome.org/World/fractal">Fractal</a> have released <a href="https://gitlab.gnome.org/World/fractal/commit/eed332822a7a16f9da07374623da2195838b7cd8">v0.1.28</a> - couple of new features plus fixes.</p>
<p>Fractal of course have their in-person meeting coming up soon, and are looking forward to GSoCers getting onboard.</p>
<p><a href="https://gitlab.gnome.org/World/fractal">https://gitlab.gnome.org/World/fractal</a> - <a href="https://matrix.to/#/#fractal-gtk:matrix.org">#fractal-gtk:matrix.org</a></p>
<h4 id="neo">neo</h4>
<p><a href="https://matrix.to/#/@f0x:matrix.org">f0x</a> is keeping the pace up on <a href="https://github.com/f0x52/neo/">neo</a>. New version (<a href="https://github.com/f0x52/neo/releases/tag/alpha0.03">alpha0.03</a>), <a href="https://neo.lain.haus/">new website</a>!</p>
<p>Rollup of changes since last week includes</p>
<ul>
 	<li>settings menu</li>
 	<li>mentions</li>
 	<li>unread counts</li>
 	<li>room invite handling</li>
 	<li>video thumbnails</li>
</ul>
and a lot more.
<p><a href="https://matrix.to/#/@f0x:matrix.org">f0x</a> - <a href="https://github.com/f0x52/neo/">https://github.com/f0x52/neo/</a> - <a href="https://matrix.to/#/#neo_client:matrix.org">#neo_client:matrix.org</a></p>
<h4 id="gomuks">gomuks</h4>
<p>Ever modest, <a href="https://matrix.to/#/@tulir:maunium.net">tulir</a> has been tearing through issues and fixes over on <a href="https://github.com/tulir/gomuks">gomuks</a>. I'm quite excited to have a matrix-native console client getting up to speed so fast.</p>
<p><a href="https://matrix.to/#/@tulir:maunium.net">tulir</a> - <a href="https://github.com/tulir/gomuks">https://github.com/tulir/gomuks</a> - <a href="https://matrix.to/#/#gomuks:maunium.net">#gomuks:maunium.net</a></p>
<h4 id="journal">Journal</h4>
<p>One of the riot developers, <a href="https://matrix.to/#/@lb:ldbco.de">luke</a> has a fun side-project called <em><a href="https://journal.ldbco.de/#/journal/journal:ldbco.de">Journal</a></em>, this being a blogging platform built on matrix.</p>
<p>Says Luke:</p>
<blockquote>
<p>The big news this week being that I'm going to redesign the interface to focus on the personal blog use-case, optimising for easy setup and easy blog post sharing.
And hopefully push a 1.0 release that I'd be happy to use as my own personal blog.</p>
</blockquote>
<p>Worth noting that the linked project page (<a href="https://journal.ldbco.de/#/journal/journal:ldbco.de">Journal</a>) is <em>itself</em> a blog using journal (the url might give you a hint of this!)</p>
<p><a href="https://matrix.to/#/@lb:ldbco.de">luke</a> - <a href="https://journal.ldbco.de/#/journal/journal:ldbco.de">https://journal.ldbco.de/#/journal/journal:ldbco.de</a></p>
<h3 id="bridges-and-other-projects">Bridges and other projects</h3>
<h4 id="synapse-diaspora-auth">synapse-diaspora-auth</h4>
<p><a href="https://matrix.to/#/@noteness:poddery.com">Po Shamil</a> reports an update for <a href="https://git.fosscommunity.in/necessary129/synapse-diaspora-auth">synapse-diaspora-auth</a>. New documentation on how to integrate with mxisd, plus email syncing from diaspora.</p>
<p><a href="https://matrix.to/#/@noteness:poddery.com">Po Shamil</a> - <a href="https://git.fosscommunity.in/necessary129/synapse-diaspora-auth">https://git.fosscommunity.in/necessary129/synapse-diaspora-auth</a></p>
<h4 id="matrix-appservice-discord">matrix-appservice-discord</h4>
<p><a href="https://github.com/Half-Shot/matrix-appservice-discord">matrix-appservice-discord</a> is now at <a href="https://github.com/Half-Shot/matrix-appservice-discord/releases/tag/v0.2.0-rc1">v0.2.0-rc1</a>.</p>
<p>There are several changes moving this project along, but checking out the change list I can see there were a bunch of contributors to thank, (<a href="https://github.com/eeeeeta">eeeeeta</a>, <a href="https://github.com/Sorunome">Sorunome</a>, <a href="https://github.com/turt2live">TravisR</a>), which is super-cool to see.</p>
<p><a href="https://matrix.to/#/@Half-Shot:half-shot.uk">Half-Shot</a> - <a href="https://github.com/Half-Shot/matrix-appservice-discord">https://github.com/Half-Shot/matrix-appservice-discord</a></p>
<h4 id="gtad">GTAD</h4>
<p>This week <a href="https://matrix.to/#/@kitsune:matrix.org">kitsune</a> has been focused on 'GTAD (Generate Things from API Description)', which is a code generator for C++, taking API description in Swagger/OpenAPI as it's source. Now at version 0.5, apparently GTAD</p>
<blockquote>
<p>can generate correct buildable (and runnable) code to convert data structures used in CS API between JSON and C++ - for the entirety of CS API calls. That basically means that libqmatrixclient gains (so far low-level) C++ CS API for all calls in <a href="/docs/spec/client_server/unstable.html">The Spec</a> and will follow updates to it.</p>
</blockquote>
<p>This is super-exciting, especially as we are going to see discussion and progress on the spec...</p>
<p><a href="https://matrix.to/#/@kitsune:matrix.org">kitsune</a> - <a href="https://github.com/KitsuneRal/gtad/commits/master">https://github.com/KitsuneRal/gtad/commits/master</a></p>
<h4 id="riot-web">Riot/Web</h4>
<ul>
 	<li>We shipped 0.14.2 as an incremental release</li>
 	<li>Jitsi by default on the horizon…</li>
 	<li>Trying to work our way through the regressions which keep stacking up</li>
 	<li>Lots of work on improved UTs for Groups and Replies; discussion about flux stuff</li>
 	<li>Next up is E2E verification (at last).</li>
</ul>
<h4 id="riot-mobile">Riot/Mobile</h4>
<ul>
 	<li>Replies</li>
 	<li>Sticker sending</li>
 	<li>Android is now Kotlin enabled!</li>
</ul>
<h4 id="synapse">Synapse</h4>
<ul>
 	<li>Handling abuse of the depth parameter; short-term fix deployed and longer term coming along shortly.</li>
 	<li>This destroyed progress on the algorithmic perf improvements.</li>
 	<li>Half-Shot PRs for negotiating size limits</li>
 	<li>Amber is inbound!</li>
</ul>
<h4 id="dendrite">Dendrite</h4>
<ul>
 	<li>We're behind on PRs - sorry Thibaut :(</li>
</ul>
<h4 id="matrix-org-ops">Matrix.org Ops</h4>
<ul>
 	<li>Ansible stuff is being refactored based on our experiences trying to use it in the wild
status.matrix.org is coming soon!</li>
</ul>
<h4 id="spec">Spec</h4>
<ul>
 	<li>Loads of work happening to build the Spec Proposals website, tracking workflow for all the proposals in flux and putting them into a formal RFC-style process. It should help community participation in the spec process massively whilst we finalise the longer term governance model for Matrix.org</li>
 	<li>Also looking at publishing formal roadmaps for Synapse, Dendrite and Riot (at last!) - we have them internally these days but need to just chuck them up on the web and maintain them.</li>
 	<li>Finally, GDPR work is in full swing.</li>
</ul>
<h2 id="new-ish-rooms">New(ish) Rooms</h2>
<p>This section is scraped manually from #newrooms:matrix.org, though there has not been much activity there this week. Meanwhile, there are a couple of rooms suggested by <a href="https://matrix.to/#/@Creak:matrix.org">Creak</a> which deserve some love:</p>
<ul>
 	<li><a href="https://matrix.to/#/#music-discovery:matrix.org">#music-discovery:matrix.org</a>, a place to discuss new music, and</li>
 	<li><a href="https://matrix.to/#/#unity3d:matrix.org">#unity3d:matrix.org</a>, a place for unity3d fans</li>
</ul>
<h2 id="before-we-go">Before we go</h2>
<h3 id="new-core-team-member">New Core team member</h3>
<p>Amber Brown of the <a href="https://twistedmatrix.com/trac/">Twisted project</a> will be joining the Matrix core team in a few weeks. She'll be focusing on Synapse implementation work, and will bring a lot of Python experience with her. Having someone working full time on synapse will increase others bandwidth for homeserver and spec work.</p>
<h3 id="matrix-live">Matrix Live</h3>
<p>Matrix Live is now available, where among other things you can see this blog post being written!</p>
<iframe src="https://www.youtube.com/embed/mjVexIiI9hw" width="560" height="315" frameBorder="0" allowFullScreen="allowfullscreen"></iframe>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2018&#x2F;05&#x2F;01&#x2F;security-update-synapse-0-28-1&#x2F;" title="SECURITY UPDATE: Synapse 0.28.1">SECURITY UPDATE: Synapse 0.28.1</a></h1>
            <span>
                01.05.2018 00:00
                —
                <a href="/category/tech">
                    Tech
                </a>
                —
                <a href="/author/matthew-hodgson">
                    Matthew Hodgson
                </a>
            </span>
            
        </header>
        <div>
            <p>Hi all,</p>
<p>Many people will have noticed disruption in #matrix:matrix.org and #matrix-dev:matrix.org on Sunday, when a validation bug in Synapse was exploited which allowed a malicious event to be inserted into the room with 'depth' value that made the rooms temporarily unusable. Whilst a transient workaround was found at the time (thanks to /dev/ponies, kythyria and Po Shamil for the workaround and to Half-Shot for working on a proposed fix), we're doing an urgent release of Synapse 0.28.1 to provide a temporary solution which will mitigate the attack across all rooms in upgraded servers and un-break affected ones.  Meanwhile we have a full long-term fix on the horizon (hopefully) later this week.</p>
<p><strong>This vulnerability has already been exploited in the wild; please upgrade as soon as possible.</strong></p>
<p>Synapse 0.28.1 is available from <a href="https://github.com/matrix-org/synapse/releases/tag/v0.28.1">https://github.com/matrix-org/synapse/releases/tag/v0.28.1</a> as normal.</p>
<p>The 'depth' parameter is used primarily as a way for servers to signal the intended cosmetic order of their events within a room (particularly when the room's message graph has gaps in it due to the server being offline, or due to users backfilling old disconnected chunks of conversation). This means that affected rooms may experience message ordering problems until a full long-term fix is provided, which we're working on currently (and tentatively involves no longer trusting 'depth' information from servers).  For full details you can see the proposal documents for the <a href="https://docs.google.com/document/d/1I3fi2S-XnpO45qrpCsowZv8P8dHcNZ4fsBsbOW7KABI/edit#">temporary fix in 0.28.1</a> and the options for the<a href="https://docs.google.com/document/d/16ofbjluy8ZKYL6nt7WLHG4GqSodJUWLUxHhI6xPEjr4/edit#"> imminent long-term fix</a>.</p>
<p>We'd like to acknowledge jzk for identifying the vulnerability, and Max Dor for providing feedback on the fixes.</p>
<p>As a general reminder, Synapse is still beta (as is the Matrix spec) and the federation API particularly is still being debugged and refined and is pre-r0.0.0. For the benefit of the whole community, please disclose vulnerabilities and exploits responsibly by emailing security@ or DMing someone from +matrix:matrix.org. Thanks.</p>
<h2 id="changes-in-synapse-v0-28-1-2018-05-01">Changes in synapse v0.28.1 (2018-05-01)</h2>
<p><strong>SECURITY UPDATE</strong></p>
<ul>
 	<li>Clamp the allowed values of event depth received over federation to be [0, 2^63 - 1]. This mitigates an attack where malicious events injected with depth = 2^63 - 1 render rooms unusable. Depth is used to determine the cosmetic ordering of events within a room, and so the ordering of events in such a room will default to using stream_ordering rather than depth (topological_ordering). This is a temporary solution to mitigate abuse in the wild, whilst a long solution is being implemented to improve how the depth parameter is used.Full details at <a href="https://docs.google.com/document/d/1I3fi2S-XnpO45qrpCsowZv8P8dHcNZ4fsBsbOW7KABI" rel="nofollow">https://docs.google.com/document/d/1I3fi2S-XnpO45qrpCsowZv8P8dHcNZ4fsBsbOW7KABI</a></li>
 	<li>Pin Twisted to &lt;18.4 until we stop using the private _OpenSSLECCurve API.</li>
</ul>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2018&#x2F;04&#x2F;27&#x2F;synapse-0-28-0-released&#x2F;" title="Synapse 0.28.0 Released!">Synapse 0.28.0 Released!</a></h1>
            <span>
                27.04.2018 00:00
                —
                <a href="/category/releases">
                    Releases
                </a>
                —
                <a href="/author/neil-johnson">
                    Neil Johnson
                </a>
            </span>
            
        </header>
        <div>
            <p>Well now, today sees the release of Synapse 0.28.0!</p>
<p>This release is particularly exciting as it's a major bump mainly thanks to lots and lots of contributions from the wider community - including support for running Synapse on PyPy (thanks Valodim) and lots of progress towards official Python3 support (thanks notafile)!! However, almost all the changes are under the hood (and some are quite major), so this is more a performance, bugfix and synapse internals release rather than adding many new APIs or features</p>
<p>As always, you can get it from <a href="https://github.com/matrix-org/synapse/releases/tag/v0.28.0">https://github.com/matrix-org/synapse/releases/tag/v0.28.0</a> and thanks to everyone who tested the release candidates.</p>
<h3 id="changes-in-synapse-v0-28-0-2018-04-26">Changes in synapse v0.28.0 (2018-04-26)</h3>
<p>Bug Fixes:</p>
<ul>
 	<li>Fix quarantine media admin API and search reindex (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3130" data-error-text="Failed to load issue title" data-id="317646661" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3130">#3130</a>)</li>
 	<li>Fix media admin APIs (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3134" data-error-text="Failed to load issue title" data-id="317969752" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3134">#3134</a>)</li>
</ul>
<h3 id="changes-in-synapse-v0-28-0-rc1-2018-04-24">Changes in synapse v0.28.0-rc1 (2018-04-24)</h3>
<p>Minor performance improvement to federation sending and bug fixes.</p>
<p>(Note: This release does not include state resolutions discussed in matrix live)</p>
<p>Features:</p>
<ul>
 	<li>Add metrics for event processing lag (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3090" data-error-text="Failed to load issue title" data-id="313326931" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3090">#3090</a>)</li>
 	<li>Add metrics for ResponseCache (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3092" data-error-text="Failed to load issue title" data-id="313664599" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3092">#3092</a>)</li>
</ul>
Changes:
<ul>
 	<li>Synapse on PyPy (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2760" data-error-text="Failed to load issue title" data-id="286622617" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2760">#2760</a>) Thanks to <a class="user-mention" href="https://github.com/Valodim" data-hovercard-user-id="27813" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self">@Valodim</a>!</li>
 	<li>move handling of auto_join_rooms to RegisterHandler (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2996" data-error-text="Failed to load issue title" data-id="305218362" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2996">#2996</a>) Thanks to <a class="user-mention" href="https://github.com/krombel" data-hovercard-user-id="11167142" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self">@krombel</a>!</li>
 	<li>Improve handling of SRV records for federation connections (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3016" data-error-text="Failed to load issue title" data-id="306884886" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3016">#3016</a>) Thanks to <a class="user-mention" href="https://github.com/silkeh" data-hovercard-user-id="5798032" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self">@silkeh</a>!</li>
 	<li>Document the behaviour of ResponseCache (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3059" data-error-text="Failed to load issue title" data-id="311125652" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3059">#3059</a>)</li>
 	<li>Preparation for py3 (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3061" data-error-text="Failed to load issue title" data-id="311182479" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3061">#3061</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3073" data-error-text="Failed to load issue title" data-id="312120046" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3073">#3073</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3074" data-error-text="Failed to load issue title" data-id="312126869" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3074">#3074</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3075" data-error-text="Failed to load issue title" data-id="312144464" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3075">#3075</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3103" data-error-text="Failed to load issue title" data-id="314439691" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3103">#3103</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3104" data-error-text="Failed to load issue title" data-id="314439972" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3104">#3104</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3106" data-error-text="Failed to load issue title" data-id="314440233" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3106">#3106</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3107" data-error-text="Failed to load issue title" data-id="314440492" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3107">#3107</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3109" data-error-text="Failed to load issue title" data-id="314459327" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3109">#3109</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3110" data-error-text="Failed to load issue title" data-id="314459750" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3110">#3110</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self">@NotAFile</a>!</li>
 	<li>update prometheus dashboard to use new metric names (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3069" data-error-text="Failed to load issue title" data-id="311770477" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3069">#3069</a>) Thanks to <a class="user-mention" href="https://github.com/krombel" data-hovercard-user-id="11167142" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self">@krombel</a>!</li>
 	<li>use python3-compatible prints (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3074" data-error-text="Failed to load issue title" data-id="312126869" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3074">#3074</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self">@NotAFile</a>!</li>
 	<li>Send federation events concurrently (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3078" data-error-text="Failed to load issue title" data-id="312485229" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3078">#3078</a>)</li>
 	<li>Limit concurrent event sends for a room (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3079" data-error-text="Failed to load issue title" data-id="312488812" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3079">#3079</a>)</li>
 	<li>Improve R30 stat definition (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3086" data-error-text="Failed to load issue title" data-id="313004914" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3086">#3086</a>)</li>
 	<li>Send events to ASes concurrently (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3088" data-error-text="Failed to load issue title" data-id="313232647" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3088">#3088</a>)</li>
 	<li>Refactor ResponseCache usage (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3093" data-error-text="Failed to load issue title" data-id="313696664" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3093">#3093</a>)</li>
 	<li>Clarify that SRV may not point to a CNAME (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3100" data-error-text="Failed to load issue title" data-id="314327149" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3100">#3100</a>) Thanks to <a class="user-mention" href="https://github.com/silkeh" data-hovercard-user-id="5798032" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self">@silkeh</a>!</li>
 	<li>Use str(e) instead of e.message (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3103" data-error-text="Failed to load issue title" data-id="314439691" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3103">#3103</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self">@NotAFile</a>!</li>
 	<li>Use six.itervalues in some places (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3106" data-error-text="Failed to load issue title" data-id="314440233" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3106">#3106</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self">@NotAFile</a>!</li>
 	<li>Refactor store.have_events (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3117" data-error-text="Failed to load issue title" data-id="315159849" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3117">#3117</a>)</li>
</ul>
Bug Fixes:
<ul>
 	<li>Return 401 for invalid access_token on logout (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2938" data-error-text="Failed to load issue title" data-id="301972886" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2938">#2938</a>) Thanks to <a class="user-mention" href="https://github.com/dklug" data-hovercard-user-id="8633205" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self">@dklug</a>!</li>
 	<li>Return a 404 rather than a 500 on rejoining empty rooms (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3080" data-error-text="Failed to load issue title" data-id="312501677" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3080">#3080</a>)</li>
 	<li>fix federation_domain_whitelist (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3099" data-error-text="Failed to load issue title" data-id="314137025" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3099">#3099</a>)</li>
 	<li>Avoid creating events with huge numbers of prev_events (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3113" data-error-text="Failed to load issue title" data-id="314753743" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3113">#3113</a>)</li>
 	<li>Reject events which have lots of prev_events (PR <a class="issue-link js-issue-link tooltipped tooltipped-ne" href="https://github.com/matrix-org/synapse/pull/3118" data-error-text="Failed to load issue title" data-id="315273891" data-permission-text="Issue title is private">#3118</a>)</li>
</ul>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2018&#x2F;04&#x2F;27&#x2F;this-week-in-matrix-2018-04-27&#x2F;" title="This Week In Matrix – 2018-04-27">This Week In Matrix – 2018-04-27</a></h1>
            <span>
                27.04.2018 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="big-news">Big News</h2>
<h4 id="gsoc-students">GSoC students</h4>
<p>Google Summer of Code acceptees were announced, and we're really excited to have FIVE Matrix-related projects to look forward to!</p>
<p>Three of the students will be mentored by matrix.org folk, and two more will work on Fractal under the GNOME org.</p>
<ul>
<li>Valentin D. (Zil0) will work on <a href="https://summerofcode.withgoogle.com/projects/#5468043765874688">adding E2E to matrix-python-sdk</a>, mentored by RichVDH </li>
<li>Badrul Chowdhury will <a href="https://summerofcode.withgoogle.com/projects/#5936132521459712">develop an alternative to GCM/FCM on Android and APNS on iOS</a> that provides the homeserver with facilities to push notifications, mentored by David Baker</li>
<li>APwhitehat will work on <a href="https://summerofcode.withgoogle.com/projects/#6239747115057152">Dendrite (Federation and Sync Server APIs)</a>, mentored by erikj</li>
<li>Eisha CHEN-YEN-SU will work on a <a href="https://summerofcode.withgoogle.com/projects/#5159367150665728">new UI for Fractal</a>, mentored by Daniel García Moreno</li>
<li>Julian Sparber will work on <a href="https://summerofcode.withgoogle.com/projects/#5646994115133440">Fractal UI improvements and some features like a user account settings and a spell checker</a>. Mentored by Daniel García Moreno</li>
</ul>
<h4 id="fractal-hackfest-2018">Fractal Hackfest 2018</h4>
<p><a href="https://wiki.gnome.org/Hackfests/Fractal2018">Fractal Hackfest 2018</a> will take place next month in Strasbourg, hosted by Epitech. They'll be planning a roadmap for the year, and working on their current focus areas.</p>
<p><a href="https://wiki.gnome.org/Hackfests/Fractal2018">https://wiki.gnome.org/Hackfests/Fractal2018</a></p>
<h4 id="coverage-of-french-matrix-adoption">Coverage of French Matrix adoption</h4>
<p>After the blog post on matrix.org yesterday, lots of attention developed around the news. Take a look at this <a href="https://news.ycombinator.com/item?id=16933736">Hacker News</a> thread with lots of discussion, which has stayed on the front page for nearly 24 hours, and a megathread on <a href="https://www.reddit.com/r/linux/comments/8f3f30/matrix_and_riot_confirmed_as_the_basis_for/">Reddit/r/linux</a>: nearly 1000 upvotes and growing.</p>
<h2 id="project-updates">Project Updates</h2>
<h3 id="clients">Clients</h3>
<h4 id="libqmatrixclient">libqmatrixclient</h4>
<p><a href="https://matrix.to/#/@kitsune:matrix.org">kitsune</a> reports a new release of <a href="https://github.com/QMatrixClient/libqmatrixclient">libqmatrixclient</a>, <a href="https://github.com/QMatrixClient/libqmatrixclient/releases/tag/v0.2.1">v0.2.1</a>, this is mostly a bugfix release, fully backwards-compatible with v0.2. Check out the <a href="https://github.com/QMatrixClient/libqmatrixclient/releases/tag/v0.2.1">release notes</a> for details.</p>
<p><a href="https://matrix.to/#/@kitsune:matrix.org">kitsune</a> - <a href="https://github.com/QMatrixClient/libqmatrixclient">https://github.com/QMatrixClient/libqmatrixclient</a> - <a href="https://matrix.to/#/#qmatrixclient:matrix.org">#qmatrixclient:matrix.org</a></p>
<h4 id="quaternion">Quaternion</h4>
<p>Staying in QMatrix-land, there is a pre-release of <a href="https://github.com/QMatrixClient/Quaternion">Quaternion</a> available. Take a look at <a href="https://github.com/QMatrixClient/Quaternion/releases/tag/v0.0.9">v0.0.9</a>, improvements include &quot;redactions, file downloading, room creation and settings editing, better timeline visualisation and much more&quot;!</p>
<p><a href="https://matrix.to/#/@kitsune:matrix.org">kitsune</a> - <a href="https://github.com/QMatrixClient/Quaternion">https://github.com/QMatrixClient/Quaternion</a> - <a href="https://matrix.to/#/#qmatrixclient:matrix.org">#qmatrixclient:matrix.org</a></p>
<h4 id="neo">neo</h4>
<p><a href="https://matrix.to/#/@f0x:disroot.org">f0x</a> has been beavering away on <a href="https://github.com/f0x52/neo/">neo</a>, and has announced that <a href="https://github.com/f0x52/neo/releases/tag/alpha0.01">Alpha 0.01</a> is available now. <a href="https://github.com/f0x52/neo/">neo</a> is a webclient in React, it feels really light and fast. I asked <a href="https://matrix.to/#/@f0x:disroot.org">f0x</a> about the uptick in work, and he mentioned he got started with React recently, but likes it a lot.</p>
<p><a href="https://matrix.to/#/@f0x:disroot.org">f0x</a> - <a href="https://github.com/f0x52/neo/">https://github.com/f0x52/neo/</a> - <a href="https://matrix.to/#/#neo_client:matrix.org">#neo_client:matrix.org</a></p>
<h4 id="fractal">Fractal</h4>
<p><a href="https://gitlab.gnome.org/World/fractal">Fractal</a> released <a href="https://gitlab.gnome.org/World/fractal/commit/7373582cee7e040892f29b74d1da23b828e0929b">0.1.27</a> with many new features and bugfixes. Lot's going on but I'm most excited to see Markdown support land.</p>
<p><a href="https://gitlab.gnome.org/World/fractal">https://gitlab.gnome.org/World/fractal</a> - <a href="https://matrix.to/#/#fractal-gtk:matrix.org">#fractal-gtk:matrix.org</a></p>
<h3 id="bots">Bots</h3>
<h4 id="matrix-trello-bot">matrix-trello-bot</h4>
<p>Says <a href="https://github.com/turt2live">TravisR</a>: &quot;I've whipped together a simple Trello notification bot for matrix: <a href="https://github.com/turt2live/matrix-trello-bot">matrix-trello-bot</a>. Future plans include the ability to create/update/delete cards and more granular control of what is notified about. Currently it acts very similar to how the Github notifications bot works.&quot;</p>
<p><a href="https://github.com/turt2live">TravisR</a> - <a href="https://github.com/turt2live/matrix-trello-bot">https://github.com/turt2live/matrix-trello-bot</a> - <a href="https://matrix.to/#/#trellobot:t2bot.io">#trellobot:t2bot.io</a></p>
<h3 id="others">Others</h3>
<h4 id="matrix-dsl">Matrix DSL</h4>
<p><a href="https://matrix.to/#/@MTRNord:matrix.ffslfl.net">MTRNord</a> is working on a &quot;matrix DSL&quot;, basically a config file language that generates a project Template in multiple languages. The project is just now at the discussion stage, so join <a href="https://matrix.to/#/#matrix_dsl:matrix.ffslfl.net">#matrix_dsl:matrix.ffslfl.net</a> to check out what's going on. (DSL = Domain Specific Language.)</p>
<p><a href="https://matrix.to/#/@MTRNord:matrix.ffslfl.net">MTRNord</a> - <a href="https://matrix.to/#/#matrix_dsl:matrix.ffslfl.net">#matrix_dsl:matrix.ffslfl.net</a></p>
<h4 id="urllib-requests-adapter">urllib-requests-adapter</h4>
<p>Says <a href="https://matrix.to/#/@Coffee:matrix.org">Coffee</a>: &quot;<a href="https://github.com/Matrixcoffee/urllib-requests-adapter">urllib-requests-adapter</a> has been updated to work with <a href="https://github.com/matrix-org/matrix-python-sdk">matrix-python-sdk</a> 0.2.0. urllib-requests-adapter is a lightweight replacement for <a href="https://github.com/kennethreitz/requests">requests</a> and its dependencies, currently standing at 126 SLOC.&quot;</p>
<p><a href="https://matrix.to/#/@Coffee:matrix.org">Coffee</a> - <a href="https://github.com/Matrixcoffee/urllib-requests-adapter">https://github.com/Matrixcoffee/urllib-requests-adapter</a></p>
<h4 id="mxisd">mxisd</h4>
<p><a href="https://github.com/kamax-io/mxisd">mxisd</a>, the Identity Server from kamax, saw a <a href="https://github.com/kamax-io/mxisd/releases/tag/v1.0.2">v1.0.2</a> release, following the big one-point-zero last week. Changes include de-duplicated directory search results, plus bugfixes.</p>
<p><a href="https://matrix.to/#/@max:kamax.io">Max</a> - <a href="https://github.com/kamax-io/mxisd">https://github.com/kamax-io/mxisd</a></p>
<h4 id="matrix-stfu">matrix-stfu</h4>
<p>Missed this one last week, but <a href="https://github.com/xwiki-labs/matrix-stfu">matrix-stfu</a> from <a href="https://www.xwiki.com/">xwiki</a> is a message filtering tool released recently, it can &quot;mass remove everything which was said by a particular user in a particular room&quot;. XWiki use matrix as their internal chat system for the ~30 people at the company.</p>
<p><a href="https://www.xwiki.com/">xwiki</a> - <a href="https://github.com/xwiki-labs/matrix-stfu">https://github.com/xwiki-labs/matrix-stfu</a> - <a href="https://matrix.to/#/#xwiki:matrix.xwiki.com">#xwiki:matrix.xwiki.com</a></p>
<h4 id="riot-web">Riot/Web</h4>
<ul>
<li>We're committing to 2-weekly releases come what may, to avoid another massive gap like the one between 0.13 and 0.14.</li>
<li>RCs will get cut starting from Wednesday; actual release then happens on the Monday having given folks a chance to test the RC on /staging (and to iterate on the RCs).</li>
<li>Obviously this is flexible if we need to rush out fixes sooner.</li>
<li>On that note, 0.14.2-rc1 was cut on Wednesday!  Please test it at riot.im/staging. It's mainly bugfixes but also the full relayering between riot-web and matrix-react-sdk.</li>
<li>Dave's working on finally hooking in Jitsi as the default conferencing system</li>
<li>t3chguy's been working on Replies, which continue to look awesome</li>
<li>Next up: E2E cross-signing (at last!!!!)</li>
</ul>
<h4 id="riot-mobile">Riot/Mobile</h4>
<ul>
<li>New releases are out! Mainly preparing for sticker viewing and trying to fix the Android push notification situation.  PLEASE TELL US IF YOU ARE STILL HAVING ANDROID PUSH NOTIFICATION PROBLEMS!</li>
<li>Lots of review of Android by Benoit - adding in Kotlin support as of today and establishing a formal roadmap for Android work (we'll show the blog post when we have it)</li>
<li>Lots of Matrix-for-French-Government stuff.</li>
</ul>
<h4 id="synapse">Synapse</h4>
<ul>
<li><a href="/blog/2018/04/27/synapse-0-28-0-released/">Synapse 28.0 was released!</a> A major bump mainly thanks to lots and lots of contributions from the wider community.</li>
<li>Massive experimental work on GDPR in progress - doing the thought experiment of pseudonymising MXIDs throughout Matrix on a per-room basis so that it's possible to redact MXIDs in the event of a “right-to-erasure” GDPR event.  Rich vdH is leading the work.</li>
<li>The good news is that introducing an MXID abstraction layer like this could help us enormously with some of Matrix's longest-term architectural issues - i.e. account migration and portability; improving on PERSPECTIVEs for managing server identity; future support for P2P Matrix; solving the domain name reuse problem; etc.</li>
<li>The bad news is that it would obviously be a very significant change to the Matrix spec, although we'd be doing it in such a way which minimises impact to client implementers and keep the CS API looking as similar as possible.</li>
<li>We're not sure whether we need to rush this through or not yet; still waiting for final GDPR clarification from lawyers, but it feels like this might be a good opportunity to force us to finally tackle some of these harder problems.</li>
<li>Meanwhile, Erik's Delta State Resolution algorithm work is continuing well; we're hoping to finish & merge it asap in order to get back headroom on the server.</li>
<li>Thankfully the matrix.org synapse itself has been relatively stable this week, other than being completely overloaded causing Freenode to be almost unusable.</li>
<li>We've started using Ansible in production, although the playbooks need some iteration before we're fully happy to announce them & recommend folks use them as an official way of running Synapse in production.</li>
</ul>
<h4 id="try-matrix-now">try-matrix-now</h4>
<p>There is a update out on <a href="/docs/projects/try-matrix-now.html">try-matrix-now</a>, matrix.org's central listing of projects. Try filtering and see whether <a href="https://matrix.to/#/@benpa:matrix.org">benpa</a> mangled the metadata for <em>your</em> project. Submit any changes as markdown PRs on <a href="https://github.com/matrix-org/matrix.org/">the repo</a>.</p>
<h4 id="spec">Spec</h4>
<p><a href="https://matrix.to/#/@benpa:matrix.org">benpa</a> is currently working on a Proposals page for the Spec to properly stack spec proposal status, at last!</p>
<h2 id="articles-around-the-web">Articles around the web</h2>
<h4 id="riot-a-distributed-way-of-having-irc-and-voip-client-and-home-server">Riot: A Distributed Way of Having IRC and VOIP Client and Home Server</h4>
<p><a href="https://matrix.to/#/@uhoreg">uhoreg</a> pointed to some charming coverage over on <a href="itsfoss.com">https://itsfoss.com</a>: <a href="https://itsfoss.com/riot-desktop/">Riot: A Distributed Way of Having IRC and VOIP Client and Home Server</a>, by <a href="https://itsfoss.com/author/shirish/">Shirish</a>. The article covers some details about riot-web and the open source ethos of Matrix, but my favourite quote by far:</p>
<blockquote>
<p>&quot;Without Matrix, Riot would be like a body without a soul.&quot;</p>
</blockquote>
<p><a href="https://itsfoss.com/author/shirish/">Shirish</a> - <a href="https://itsfoss.com/riot-desktop/">https://itsfoss.com/riot-desktop/</a></p>
<h4 id="service-notifs-with-matrix">Service notifs with Matrix</h4>
<p><a href="https://matrix.to/#/@Half-Shot:half-shot.uk">Half-Shot</a> shared an article he wrote, <a href="https://dev.to/halfshot/service-notifs-with-matrix-3fb5">Service notifs with Matrix</a>, about using Matrix and Riot to deliver automated notifications to different types of end-user at his company.</p>
<p><a href="https://matrix.to/#/@Half-Shot:half-shot.uk">Half-Shot</a> - <a href="https://dev.to/halfshot/service-notifs-with-matrix-3fb5">https://dev.to/halfshot/service-notifs-with-matrix-3fb5</a></p>
<h2 id="new-rooms-roundup">New Rooms roundup</h2>
<ul>
<li><a href="https://matrix.to/#/#matrix_dsl:matrix.ffslfl.net">#matrix_dsl:matrix.ffslfl.net</a> As mentioned above, MTRNord is looking at creating a DSL for matrix. In his words: "A room to discuss about making a Matrix DSL to allow non coders to write simple as and bots. I would love to see some people discussing about syntax with me as this is my very first DSL and very first time trying JetBrains MSP. Anyone with Ideas what it should allow to do and how to have the syntax a welcome to join (and people who want to follow of course too)"</li>
<li><a href="https://matrix.to/#/#trellobot:t2bot.io">#trellobot:t2bot.io</a> (from above) TravisR: "a discussion/developer room for Matrix Trello Bot (https://github.com/turt2live/matrix-trello-bot). This is a bot that notifies rooms of changes to tracked Trello boards, similar to how the Github bot works. Future enhancements include being able to create, update, and delete cards from within Matrix."</li>
</ul>
<h2 id="lastly">Lastly...</h2>
<p><a href="https://www.youtube.com/watch?v=b3OuPFQ1ELg">Matrix Live - Season 2, Episode 17: Apr 27th is now available!</a></p>
<iframe src="https://www.youtube.com/embed/b3OuPFQ1ELg" frameBorder="0" allow="autoplay; encrypted-media" allowFullScreen></iframe>
<p>This Week in Matrix is printed fresh every week! There will be another post before you know it, so if you'd like to be included join us in <a href="https://matrix.to/#/#twim:matrix.org">#twim:matrix.org</a> and let us know what you've been working on. See you next week!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2018&#x2F;04&#x2F;26&#x2F;matrix-and-riot-confirmed-as-the-basis-for-france-s-secure-instant-messenger-app&#x2F;" title="Matrix and Riot confirmed as the basis for France&#x27;s Secure Instant Messenger app">Matrix and Riot confirmed as the basis for France&#x27;s Secure Instant Messenger app</a></h1>
            <span>
                26.04.2018 00:00
                —
                <a href="/category/in-the-news">
                    In the News
                </a>
                —
                <a href="/author/matthew-hodgson">
                    Matthew Hodgson
                </a>
            </span>
            
        </header>
        <div>
            <p>Hi folks,</p>
<p>We're incredibly excited that the Government of France has confirmed it is in the process of deploying a huge private federation of Matrix homeservers spanning the whole government, and developing a fork of Riot.im for use as their official secure communications client! The goal is to replace usage of WhatsApp or Telegram for official purposes.</p>
<p>It's a unbelievably wonderful situation that we're living in a world where governments genuinely care about openness, open source and open-standard based communications - and Matrix's decentralisation and end-to-end encryption is a perfect fit for intra- and inter-governmental communication.  Congratulations to France for going decentralised and supporting FOSS! We understand the whole project is going to be released entirely open source (other than the operational bits) - development is well under way and an early proof of concept is already circulating within various government entities.</p>
<p>I'm sure there will be more details from their side as the project progresses, but meanwhile here's the official press release, and an English translation too. We expect this will drive a lot of effort into maturing Synapse/Dendrite, E2E encryption and matrix-{'{'}react,ios,android{'}'}-sdk, which is great news for the whole Matrix ecosystem! The deployment is going to be speaking pure Matrix and should be fully compatible with other Matrix clients and projects in addition to the official client.</p>
<p>So: exciting times for Matrix.  Needless to say, if you work on Open Government projects in other countries, please get in touch - we're seeing that Matrix really is a sweet spot for these sort of use cases and we'd love to help get other deployments up and running.  We're also hoping it's going to help iron out many of the UX kinks we have in Riot.im today as we merge stuff back. We'd like to thank DINSIC (the Department responsible for the project) for choosing Matrix, and can't wait to see how the project progresses!</p>
<p><a href="/blog/wp-content/uploads/2018/04/CP_messagerie_instantanee_Etat.pdf"><img class="aligncenter size-large wp-image-3082" src="/blog/wp-content/uploads/2018/04/dinsic.jpg" alt="" width="620" height="877" /></a></p>
<p>English Translation:</p>
<h3 id="the-french-state-creates-its-own-secure-instant-messenger">The French State creates its own secure instant messenger</h3>
<p>By the summer of 2018, the French State will have its own instant messenger, an alternative to WhatsApp and Telegram.</p>
<p>It will guarantee <b>secure, end-to-end encrypted conversations</b> without degradation of the user experience. It will be compatible with any mobile device or desktop, state or personal. In fact until now the installation of applications like WhatsApp or Telegram was not possible on professional mobile phones, which hindered easy sharing of information and documents.</p>
<p>Led by the <b>Interministerial Department of State Digital, Information and Communication Systems</b> (DINSIC), the project is receiving contributions from the <b>National Agency for Information System Security</b> (ANSSI), the IT Directorship (DSI) of the <b>Armed Forces</b> and the <b>Ministry of Europe and Foreign Affairs</b>.</p>
<p>The tool developed is based on <b>open source software</b> (Riot) that implements an <b>open standard</b> (Matrix). Powered by a Franco-British startup (New Vector), and benefiting from many contributions, this communication standard has already caught the attention of other states such as the <b>Netherlands</b> and <b>Canada</b>, with whom DINSIC collaborates closely.</p>
<p>The Matrix standard and its open source software are also used by private companies such as Thales, which has driven the teams to come together to ensure the interoperability of their tools and cooperate in the development of free and open source software.</p>
<p>After 3 months of development for a very limited cost, this tool is currently being tested in the State Secretary for Digital, DINSIC and in the IT departments of different ministries. It should be rolled out during the summer in administrations and cabinets.</p>
<p><b><i>&quot;With this new French solution, the state is demonstrating its ability to work in an agile manner to meet concrete needs by using open source tools and very low development costs. Sharing information in a secure way is essential not only for companies but also for a more fluid dialogue within administrations.&quot;</i> - Mounir Mahjoubi, Secretary of State to the Prime Minister, in charge of Digital.</b></p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2018&#x2F;04&#x2F;20&#x2F;this-week-in-matrix-2018-04-20&#x2F;" title="This Week In Matrix - 2018-04-20">This Week In Matrix - 2018-04-20</a></h1>
            <span>
                20.04.2018 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="project-updates">Project Updates</h2>
<h4 id="drupal-matrix-api-module">Drupal matrix_api module</h4>
<p>Updated the Drupal matrix_api module to pass the auth token as a header instead of as a GET param... the GET param was leaking the token if there was an http exception thrown.</p>
<p>(<a href="https://matrix.to/#/@john:matrix.freelock.com">John</a>) - <a href="https://cgit.drupalcode.org/matrix_api">https://cgit.drupalcode.org/matrix_api</a></p>
<h4 id="mxisd">mxisd</h4>
<p>v1.0.0 has been released and is now stable, making it the first community Identity server and first open federation one.</p>
<p>(<a href="https://matrix.to/#/@max:kamax.io">Max</a>) - <a href="https://github.com/kamax-io/mxisd">https://github.com/kamax-io/mxisd</a></p>
<h4 id="nheko">nheko</h4>
<p>0.3.x of nheko was released! There is progress towards e2e encryption in mujx/mtxclient. Once this encryption is working there, it can eventually be included in nheko.</p>
<p>(<a href="https://matrix.to/#/@mujx:matrix.org">mujx</a>) - <a href="https://github.com/mujx/nheko">https://github.com/mujx/nheko</a></p>
<h4 id="fractal">Fractal</h4>
<p>Fractal 0.1.26 was released this week, which includes an animated scroll to bottom animation, fixed MacOS compilation, and bug fixes. Since then markdown support and many other commits have been spotted...</p>
<p><a href="https://gitlab.gnome.org/World/fractal/">https://gitlab.gnome.org/World/fractal/</a></p>
<h4 id="libqmatrixclient">libqmatrixclient</h4>
<p>kitsune released 0.2 of libqmatrixclient a couple of weeks ago, which he says is &quot;the first one more or less functional and stable&quot;!</p>
<p>Highlights include redactions support, files transfer (both ways), rooms creation, account data (tags, direct chat flags). Also there are a few things making libqmatrixclient clients stand out compared to, e.g., Riot: one can set per-room names/avatars, and also the best estimate for the number of unread messages can be taken from the library and shown in the client application.&quot;</p>
<p>(<a href="https://matrix.to/#/@kitsune:matrix.org">kitsune</a>) - <a href="https://github.com/QMatrixClient/libqmatrixclient">https://github.com/QMatrixClient/libqmatrixclient</a></p>
<h4 id="matrix-monitor-bot">matrix-monitor-bot</h4>
<p><a href="https://matrix.to/#/#monitorbot:t2bot.io">#monitorbot:t2bot.io</a> is a bot to measure latency between homeservers (as perceived by users).</p>
<p>It's able to report metrics to Prometheus and has it's own built-in dashboard (see <a href="https://lag.t2bot.io/">https://lag.t2bot.io/</a> for some horrendous times). In the coming weeks it'll become more production-ready, however in the meantime if people are looking to help iron out the scalability issues, please run an instance on your homeserver.</p>
<p>(<a href="https://github.com/turt2live/">TravisR</a>) - <a href="https://github.com/turt2live/matrix-monitor-bot">https://github.com/turt2live/matrix-monitor-bot</a></p>
<h4 id="umatriks">uMatriks</h4>
<p>thrrgilag wrote on behalf of uMatriks, to say that v0.10 was published to the openstore this last week which now includes unread counts for rooms. Those not already familiar, uMatriks is a native matrix client being developed for Ubuntu Touch.</p>
<p><a href="https://github.com/uMatriks/uMatriks">https://github.com/uMatriks/uMatriks</a></p>
<h4 id="construct">Construct</h4>
<p>There looks to be lots of activity on Construct (jzk's fork of the charybdis ircd which adds in a C++ homeserver implementation) based on the commit log at <a href="https://github.com/jevolk/charybdis">https://github.com/jevolk/charybdis</a>. jzk's work there has been highlighting some of synapse's nastier problems (e.g. thundering presence bugs), and it looks like the federation support is progressing steadily, including handling EDUs (presence &amp; typing data).
(<a href="https://matrix.to/#/@jason:zemos.net">jzk</a>) - <a href="https://github.com/jevolk/charybdis">https://github.com/jevolk/charybdis</a></p>
<h4 id="matrix-puppet-maxs">matrix-puppet-maxs</h4>
<p>tyler shared his &quot;horrifying&quot; project, for people that want to use Matrix to send an SMS via an XMPP bridge to their Android phone, in order to provide SMS and call notifications inside Riot.</p>
<p>(<a href="https://matrix.to/#/@tyler:tylerfreedman.com">tyler</a>) - <a href="https://github.com/tfreedman/matrix-puppet-maxs">https://github.com/tfreedman/matrix-puppet-maxs</a></p>
<h4 id="matrix-register-bot">matrix-register-bot</h4>
<p>krombel built a bot to have a two step registration to synapse, check it out:</p>
<p>(<a href="https://matrix.to/#/@krombel:msg-net.de">krombel</a>) - <a href="https://github.com/krombel/matrix-register-bot">https://github.com/krombel/matrix-register-bot</a></p>
<h4 id="picard">picard</h4>
<p>Cadair reported that he and SolarDrew have written a bot to bridge a whole slack team into a matrix community. It basically handles all the room admin for you including:</p>
<ul>
 	<li>Invite the slack bot to the channel</li>
 	<li>Creating matrix rooms</li>
 	<li>Setting users as admins</li>
 	<li>Setting room name and room avatar and as publicly joinable</li>
 	<li>Setting up the link with the slack AS</li>
 	<li>Creating and adding rooms to the community</li>
 	<li>Inviting all members of the communtiy to the rooms</li>
</ul>
It does these things on a 1 min cron, to pick up new channels as they are created on the slack side.
<p>(<a href="https://matrix.to/#/@cadair:cadair.com">Cadair</a>) - <a href="https://github.com/SolarDrew/skill-picard">https://github.com/SolarDrew/skill-picard</a></p>
<h4 id="opsdroid-connector">opsdroid connector</h4>
<p>Cadair also mentioned that picard uses the opsdroid connector for matrix, also written by himself and SolarDrew, and has had recent updates.</p>
<p>(<a href="https://matrix.to/#/@cadair:cadair.com">Cadair</a>) - <a href="https://github.com/opsdroid/connector-matrix">https://github.com/opsdroid/connector-matrix</a></p>
<h4 id="matrix-python-sdk">matrix-python-sdk</h4>
<p>Release v0.2.0 of the python sdk. Highlights from this release are a workaround for <a href="https://github.com/matrix-org/synapse/issues/3054">https://github.com/matrix-org/synapse/issues/3054</a> and use of connection pooling via a requests session.</p>
<p>(<a href="https://matrix.to/#/@adam:thebeckmeyers.xyz">&amp;Adam</a>) - <a href="https://github.com/matrix-org/matrix-python-sdk">https://github.com/matrix-org/matrix-python-sdk</a></p>
<h4 id="matrix-twitch-bridge">matrix-twitch-bridge</h4>
<p>MTRNord is at the early stages of working on a twitch bridge for Matrix, written in golang.</p>
<p>(<a href="https://matrix.to/#/@MTRNord:matrix.ffslfl.net">MTRNord</a>) - <a href="https://github.com/Nordgedanken/matrix-twitch-bridge">https://github.com/Nordgedanken/matrix-twitch-bridge</a></p>
<h4 id="idlerpg">IdleRPG</h4>
<p>remaeus wrote in to say &quot;we (+rpg:verse.im) just launched an initial build of #idlerpg:verse.im (now also available at #idlerpg:matrix.org) — an automated RPG that rewards you for staying online (via the presence API). It's an initial test case for prototyping out a bot framework called &quot;doorman&quot; with multi-service support, but focused on Matrix as we are using it as a &quot;backbone&quot; for our p2p app framework.&quot;</p>
<p>(<a href="https://matrix.to/#/@remaeus:verse.im">remaeus</a>) - <a href="https://github.com/FabricLabs/doorman">https://github.com/FabricLabs/doorman</a></p>
<h4 id="uri-protocol-scheme">URI protocol scheme</h4>
<p>kitsune started working on a design proposal for the Matrix URI scheme, with the ultimate goal to have the scheme passed through IANA so that we're no worse than IPFS and others. The document is here (alpha quality but comments are already welcome): <a href="https://docs.google.com/document/d/18A3ZRgGR-GLlPXF_VIHxywWiX1vpMvNfAU6JCnNMVuQ/edit">https://docs.google.com/document/d/18A3ZRgGR-GLlPXF_VIHxywWiX1vpMvNfAU6JCnNMVuQ/edit</a></p>
<p>There is also a spec proposal room: <a>#uri-scheme-proposal:matrix.org</a>.</p>
<p>(<a href="https://matrix.to/#/@kitsune:matrix.org">kitsune</a>)</p>
<h4 id="riot-web">Riot/Web</h4>
<ul>
 	<li>The Great Relayering landed - almost all of Riot/Web's code is now gathered together in one sensible place (matrix-react-sdk). No more duplicate PRs or CSS & JS living in different repos!</li>
 	<li>Folks with open PRs against the riot-web repository will need to reopen them against matrix-react-sdk (or more likely, merge them into their existing equivalents on matrix-react-sdk)</li>
 	<li>Michael (t3chguy's) Replies work has almost landed and is looking fantastic!</li>
 	<li>Next up: improving test coverage slightly; fixing regressions in 0.14; and a few other minor bits and bobs before we land 0.15.</li>
</ul>
<h4 id="riot-mobile">Riot/Mobile</h4>
<ul>
 	<li>New releases on the horizon for both iOS & Android</li>
 	<li>Welcomed Benoit to the Android team, acting as lead android dev!</li>
 	<li>Finalising all new UX for configuring push notification permissions…</li>
 	<li>Final touches for Sticker viewing (including animated stickers!)</li>
 	<li>Fix embarrassing crash on iOS on certain shapes of Riot/Web URLs...</li>
 	<li>Supporting French Government Matrix activity</li>
</ul>
<h4 id="synapse">Synapse</h4>
<ul>
 	<li>Operational firefighting continues: stopping malformed events from impacting federation; investigating thundering herds of presence EDUs; trying to keep Freenode joins from lagging;</li>
 	<li>Meanwhile, Erik has been working hard on the problem of Incremental State Resolution (the big algorithmic win which could massively improve HS performance, especially for Synapse); this is looking promising and has ended up taking the form of a formal mathematical proof that the proposed algorithm works: <a href="/_matrix/media/v1/download/jki.re/hSmkLkFGVUnrXjtYcjsCUsyS">https://matrix.org/_matrix/media/v1/download/jki.re/hSmkLkFGVUnrXjtYcjsCUsyS</a> (aka <a href="https://github.com/matrix-org/synapse/pull/3122">https://github.com/matrix-org/synapse/pull/3122</a>) is where that's happening! Warning: contains maths.</li>
 	<li>...and also wrote a Rust testjig for state resolution to help reason about it: <a href="https://github.com/erikjohnston/rust-matrix-state">https://github.com/erikjohnston/rust-matrix-state</a></li>
 	<li>Official Ansible playbook repository dev is progressing on the develop branch at <a href="https://github.com/matrix-org/matrix-ansible">https://github.com/matrix-org/matrix-ansible</a> thanks to massive work from Michael K. We'll blog properly about this when ready for use in earnest.</li>
 	<li>Dave has been doing an interesting experiment in syncing user profile data from HSes into ISes (useful for folks running a private federation with its own IS who want to use the IS as a global user directory); almost complete - we'll see how this goes.</li>
 	<li>GDPR work is in progress. We're seeing how far we can push the envelope on improving privacy, including a very interesting thought experiment on pseudonyimsing MXIDs to provide 'perfect' right-to-erasure. vdH is on the case. Warning: this may well require a major federation protocol bump if we go through with it.</li>
 	<li>More Python3 port PRs are landing from NotAFile - thanks! They're getting slightly lost behind everything above.</li>
</ul>
<h4 id="dendrite">Dendrite</h4>
<ul>
 	<li>Still stuck behind Synapse work.</li>
 	<li>Barring disasters we have at least 2 new folks starting fulltime in the core team (both synapse & dendrite) to help backend progress at the end of May however!</li>
 	<li>Lots of PRs coming in from APWhitehat though - thanks!!</li>
</ul>
<h4 id="spec">Spec</h4>
<ul>
 	<li>uhoreg has been looking at the .well-known URI proposal again</li>
 	<li>Spec work on the core team is currently stuck behind Riot/Web and Synapse work, sadly, on the basis that burning implementation problems are more visible and harming to the project than burning spec problems.</li>
</ul>
<h2 id="matrix-in-the-news">Matrix in the News</h2>
<p><a href="https://www.tomshardware.com/news/france-alternative-whatsapp-telegram-spying-concerns,36898.html">Tom's Hardware</a> provided a great article on about Matrix in the French Government.</p>
<p>Next INpact produced two articles, <a href="https://www.nextinpact.com/news/106463-la-france-travaille-a-messagerie-detat-chiffree-pour-cet-ete.htm">one from last week</a> introducing a project from the French government to use an open messaging platform, then a follow up <a href="https://www.nextinpact.com/news/106467-a-decouverte-riot-outil-libre-derriere-future-messagerie-letat-francais.htm">provided an extremely thorough story</a> covering Riot &amp; Matrix following the announcement of the French Government encrypted messaging project. (Article is in French, but will Google Translate nicely!)</p>
<p>Huge thank you to <a href="http://matrix.to/#/@nouts:matrix.org">nouts</a> who produced a great intro to Riot and Matrix! <a href="https://d.tube/#!/v/nouts/loovdeow">Check it out!</a> (Note that is also in French.)</p>
<h2 id="new-rooms-roundup">New Rooms roundup</h2>
<ul>
 	<li>Announcing room for all pastafarians out there... <a href="https://matrix.to/#/#fsm:disroot.org">#fsm:disroot.org</a></li>
 	<li>FIA Formula 1 discussion room <a href="https://matrix.to/#/#formula1:disroot.org">#formula1:disroot.org</a></li>
 	<li>Room for Warsaw (Poland) residents (and others) <a href="https://matrix.to/#/#warsaw:disroot.org">#warsaw:disroot.org</a></li>
 	<li><a href="https://matrix.to/#/#monitorbot:t2bot.io">#monitorbot:t2bot.io</a> is the room for TravisR's matrix-monitor-bot</li>
 	<li><a href="https://matrix.to/#/#thisweekinmatrix:matrix.org">#thisweekinmatrix:matrix.org</a> so <i>meta</i></li>
</ul>
<h2 id="and-finally">And Finally...</h2>
<p>Check out Matrix Live, now available at <a class="linkified" href="https://youtu.be/EstVaVUWkdw" rel="noopener">https://youtu.be/EstVaVUWkdw</a></p>
<iframe src="https://www.youtube.com/embed/EstVaVUWkdw" width="560" height="315" frameBorder="0" allowFullScreen="allowfullscreen"></iframe>
<p>Thanks for reading the very first This Week in Matrix! There will be another post next week, so if you'd like to be included join us in <a class="linkified" href="https://matrix.to/#/#twim:matrix.org" rel="noopener">#twim:matrix.org</a>. See you next week!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2018&#x2F;04&#x2F;11&#x2F;synapse-0-27-3-released&#x2F;" title="Synapse 0.27.3 released!">Synapse 0.27.3 released!</a></h1>
            <span>
                11.04.2018 00:00
                —
                <a href="/category/releases">
                    Releases
                </a>
                —
                <a href="/author/neil-johnson">
                    Neil Johnson
                </a>
            </span>
            
        </header>
        <div>
            <p>Today we release Synapse 0.27.3!</p>
<p>Hot on the heels of 0.27.2, notable changes include API support for joining groups/communities as well as a major bug fix (<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3082" data-error-text="Failed to load issue title" data-id="312859684" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3082">#3082</a>), that is particularly important for those upgrading for the first time in a while. Also new metrics and phone home stats. Phone home stats include better visibility of system usage so we can have a better idea of how synapse's RAM and CPU is behaving in the wild. Also, recording the number of users on the server who have been using it for at least 30 days.</p>
<p>Phone home stats are entirely optional and can be enabled/disabled by setting &quot;<span class="s1">report_</span>
<span class="s2">stat</span>
<span class="s1">s&quot; in homeserver.yaml. </span>
Please consider enabling phone home stats if you currently have not done so - this data is really important to us in improving Matrix as a whole (and justifying future funding for <a class="linkified" href="http://matrix.org/" target="_blank" rel="noopener">Matrix.org</a>).</p>
<p>As always, you can get it from <a href="https://github.com/matrix-org/synapse/releases/tag/v0.27.3">https://github.com/matrix-org/synapse/releases/tag/v0.27.3</a> and thanks to everyone who tested the release candidates.</p>
<h3 id="changes-in-synapse-v0-27-3-2018-04-11">Changes in synapse v0.27.3 (2018-04-11)</h3>
<p>Bug fixes:</p>
<ul>
 	<li>URL quote path segments over federation (<a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3082" data-error-text="Failed to load issue title" data-id="312859684" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3082">#3082</a>)</li>
</ul>
<h3 id="changes-in-synapse-v0-27-3-rc2-2018-04-09">Changes in synapse v0.27.3-rc2 (2018-04-09)</h3>
<p>v0.27.3-rc1 used a stale version of the develop branch so the changelog overstates
the functionality. v0.27.3-rc2 is up to date, rc1 should be ignored.</p>
<h3 id="changes-in-synapse-v0-27-3-rc1-2018-04-09">Changes in synapse v0.27.3-rc1 (2018-04-09)</h3>
<p>Notable changes include API support for joinability of groups. Also new metrics
and phone home stats. Phone home stats include better visibility of system usage
so we can tweak synpase to work better for all users rather than our own experience
with matrix.org. Also, recording 'r30' stat which is the measure we use to track
overall growth of the Matrix ecosystem. It is defined as:-</p>
<p>Counts the number of native 30 day retained users, defined as:-</p>
<ul>
<li>Users who have created their accounts more than 30 days</li>
<li>Where last seen at most 30 days ago</li>
<li>Where account creation and last_seen are &gt; 30 days&quot;</li>
</ul>
<p>Features:</p>
<ul>
 	<li>Add joinability for groups (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3045" data-error-text="Failed to load issue title" data-id="309358488" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3045">#3045</a>)</li>
 	<li>Implement group join API (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3046" data-error-text="Failed to load issue title" data-id="309437433" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3046">#3046</a>)</li>
 	<li>Add counter metrics for calculating state delta (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3033" data-error-text="Failed to load issue title" data-id="308901076" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3033">#3033</a>)</li>
 	<li>R30 stats (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3041" data-error-text="Failed to load issue title" data-id="309293623" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3041">#3041</a>)</li>
 	<li>Measure time it takes to calculate state group ID (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3043" data-error-text="Failed to load issue title" data-id="309312509" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3043">#3043</a>)</li>
 	<li>Add basic performance statistics to phone home (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3044" data-error-text="Failed to load issue title" data-id="309323226" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3044">#3044</a>)</li>
 	<li>Add response size metrics (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3071" data-error-text="Failed to load issue title" data-id="311954815" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3071">#3071</a>)</li>
 	<li>phone home cache size configurations (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3063" data-error-text="Failed to load issue title" data-id="311248683" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3063">#3063</a>)</li>
</ul>
Changes:
<ul>
 	<li>Add a blurb explaining the main synapse worker (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2886" data-error-text="Failed to load issue title" data-id="298059141" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2886">#2886</a>) Thanks to <a class="user-mention" href="https://github.com/turt2live" data-hovercard-user-id="1190097">@turt2live</a>!</li>
 	<li>Replace old style error catching with 'as' keyword (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3000" data-error-text="Failed to load issue title" data-id="305290730" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3000">#3000</a>) Thanks to <a class="user-mention" href="https://github.com/NotAFile" data-hovercard-user-id="5447747">@NotAFile</a>!</li>
 	<li>Use .iter* to avoid copies in StateHandler (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3006" data-error-text="Failed to load issue title" data-id="305656885" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3006">#3006</a>)</li>
 	<li>Linearize calls to _generate_user_id (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3029" data-error-text="Failed to load issue title" data-id="308526745" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3029">#3029</a>)</li>
 	<li>Remove last usage of ujson (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3030" data-error-text="Failed to load issue title" data-id="308552644" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3030">#3030</a>)</li>
 	<li>Use simplejson throughout (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3048" data-error-text="Failed to load issue title" data-id="309920407" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3048">#3048</a>)</li>
 	<li>Use static JSONEncoders (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3049" data-error-text="Failed to load issue title" data-id="309920728" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3049">#3049</a>)</li>
 	<li>Remove uses of events.content (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3060" data-error-text="Failed to load issue title" data-id="311128650" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3060">#3060</a>)</li>
 	<li>Improve database cache performance (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3068" data-error-text="Failed to load issue title" data-id="311658915" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3068">#3068</a>)</li>
</ul>
Bug fixes:
<ul>
 	<li>Add room_id to the response of <code>rooms/{'{'}roomId{'}'}/join</code> (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2986" data-error-text="Failed to load issue title" data-id="304772714" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2986">#2986</a>) Thanks to <a class="user-mention" href="https://github.com/jplatte" data-hovercard-user-id="951129">@jplatte</a>!</li>
 	<li>Fix replication after switch to simplejson (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3015" data-error-text="Failed to load issue title" data-id="306553712" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3015">#3015</a>)</li>
 	<li>Fix replication after switch to simplejson (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3015" data-error-text="Failed to load issue title" data-id="306553712" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3015">#3015</a>)</li>
 	<li>404 correctly on missing paths via NoResource (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3022" data-error-text="Failed to load issue title" data-id="307976332" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3022">#3022</a>)</li>
 	<li>Fix error when claiming e2e keys from offline servers (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3034" data-error-text="Failed to load issue title" data-id="309039857" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3034">#3034</a>)</li>
 	<li>fix tests/storage/test_user_directory.py (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3042" data-error-text="Failed to load issue title" data-id="309299280" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3042">#3042</a>)</li>
 	<li>use PUT instead of POST for federating groups/m.join_policy (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3070" data-error-text="Failed to load issue title" data-id="311932835" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3070">#3070</a>) Thanks to <a class="user-mention" href="https://github.com/krombel" data-hovercard-user-id="11167142">@krombel</a>!</li>
 	<li>postgres port script: fix state_groups_pkey error (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3072" data-error-text="Failed to load issue title" data-id="311965025" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3072">#3072</a>)</li>
</ul>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2018&#x2F;03&#x2F;26&#x2F;synapse-0-27-2-released&#x2F;" title="Synapse 0.27 released!">Synapse 0.27 released!</a></h1>
            <span>
                26.03.2018 00:00
                —
                <a href="/category/releases">
                    Releases
                </a>
                —
                <a href="/author/neil-johnson">
                    Neil Johnson
                </a>
            </span>
            
        </header>
        <div>
            <p class="release-title text-normal">We released Synapse v0.27.2 today (the first stable release in the 0.27.x series) - it contains loads of work since Synapse v0.26 back in January.  The main highlights are:</p>
<ul>
 	<li class="release-title text-normal">All the perf improvements which we've been landing as we race to keep the matrix.org homeserver in the face of ever-expanding traffic levels over the last few months</li>
 	<li class="release-title text-normal">Support for custom storage providers for media repository.</li>
 	<li class="release-title text-normal">Ability to limit the email addresses allowed to register on your HS, and ability to limit the homeservers your homeserver is allowed to federate with</li>
 	<li class="release-title text-normal">All new purge API - letting you purge history by date as well as by event (and having a nice new async way of doing it)</li>
 	<li class="release-title text-normal">Make search work again!!! (by switching from GIST to GIN indexes)</li>
</ul>
And a few release notes worth calling out:
<ul>
 	<li>The common case for running Synapse is not to run separate workers, but for those that do, be aware that synctl no longer starts the main synapse when using <code>-a</code> option with workers. A new worker file should be added with <code>worker_app: synapse.app.homeserver</code>.</li>
 	<li>This release also begins the process of renaming a number of the metrics reported to prometheus. See <code>docs/metrics-howto.rst </code>
Note that the v0.28.0 release will remove the deprecated metric names.</li>
</ul>
<p>As always, you can get it from <a href="https://github.com/matrix-org/synapse/releases/tag/v0.27.2">https://github.com/matrix-org/synapse/releases/tag/v0.27.2</a></p>
<p>thanks for flying Matrix!</p>
<h3 id="changes-in-synapse-v0-27-2-2018-03-26">Changes in synapse v0.27.2 (2018-03-26)</h3>
<p>Bug fixes:</p>
<ul>
 	<li>Fix bug which broke TCP replication between workers (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3015" data-error-text="Failed to load issue title" data-id="306553712" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3015">#3015</a>)</li>
</ul>
<h3 id="changes-in-synapse-v0-27-1-2018-03-26">Changes in synapse v0.27.1 (2018-03-26)</h3>
<p>Meta release as v0.27.0 temporarily pointed to the wrong commit</p>
<h3 id="changes-in-synapse-v0-27-0-2018-03-26">Changes in synapse v0.27.0 (2018-03-26)</h3>
<p>No changes since v0.27.0-rc2</p>
<h3 id="changes-in-synapse-v0-27-0-rc2-2018-03-19">Changes in synapse v0.27.0-rc2 (2018-03-19)</h3>
<p>Pulls in v0.26.1</p>
<p>Bug fixes:</p>
<ul>
 	<li>Fix bug introduced in v0.27.0-rc1 that causes much increased memory usage in state cache (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/3005" data-error-text="Failed to load issue title" data-id="305611773" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/3005">#3005</a>)</li>
</ul>
<h3 id="changes-in-synapse-v0-27-0-rc1-2018-03-14">Changes in synapse v0.27.0-rc1 (2018-03-14)</h3>
<p>The common case for running Synapse is not to run separate workers, but for those that do, be aware that synctl no longer starts the main synapse when using <code>-a</code> option with workers. A new worker file should be added with <code>worker_app: synapse.app.homeserver</code>.</p>
<p>This release also begins the process of renaming a number of the metrics
reported to prometheus. See <code>docs/metrics-howto.rst &lt;docs/metrics-howto.rst#block-and-response-metrics-renamed-for-0-27-0&gt;</code>_.
Note that the v0.28.0 release will remove the deprecated metric names.</p>
<p>Features:</p>
<ul>
 	<li>Add ability for ASes to override message send time (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2754" data-error-text="Failed to load issue title" data-id="286084501" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2754">#2754</a>)</li>
 	<li>Add support for custom storage providers for media repository (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2867" data-error-text="Failed to load issue title" data-id="297143892" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2867">#2867</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2777" data-error-text="Failed to load issue title" data-id="288157999" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2777">#2777</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2783" data-error-text="Failed to load issue title" data-id="288569577" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2783">#2783</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2789" data-error-text="Failed to load issue title" data-id="288869854" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2789">#2789</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2791" data-error-text="Failed to load issue title" data-id="288934607" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2791">#2791</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2804" data-error-text="Failed to load issue title" data-id="289336063" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2804">#2804</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2812" data-error-text="Failed to load issue title" data-id="289647722" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2812">#2812</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2814" data-error-text="Failed to load issue title" data-id="290067094" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2814">#2814</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2857" data-error-text="Failed to load issue title" data-id="295139747" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2857">#2857</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2868" data-error-text="Failed to load issue title" data-id="297189465" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2868">#2868</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2767" data-error-text="Failed to load issue title" data-id="287142685" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2767">#2767</a>)</li>
 	<li>Add purge API features, see <code>docs/admin_api/purge_history_api.rst &lt;docs/admin_api/purge_history_api.rst&gt;</code>_ for full details (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2858" data-error-text="Failed to load issue title" data-id="295623787" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2858">#2858</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2867" data-error-text="Failed to load issue title" data-id="297143892" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2867">#2867</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2882" data-error-text="Failed to load issue title" data-id="297795332" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2882">#2882</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2946" data-error-text="Failed to load issue title" data-id="302323973" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2946">#2946</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2962" data-error-text="Failed to load issue title" data-id="303453845" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2962">#2962</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2943" data-error-text="Failed to load issue title" data-id="302274834" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2943">#2943</a>)</li>
 	<li>Add support for whitelisting 3PIDs that users can register. (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2813" data-error-text="Failed to load issue title" data-id="289822303" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2813">#2813</a>)</li>
 	<li>Add <code>/room/{'{'}id{'}'}/event/{'{'}id{'}'}</code> API (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2766" data-error-text="Failed to load issue title" data-id="287111856" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2766">#2766</a>)</li>
 	<li>Add an admin API to get all the media in a room (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2818" data-error-text="Failed to load issue title" data-id="290248966" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2818">#2818</a>) Thanks to <a class="user-mention" href="https://github.com/turt2live" data-hovercard-user-id="1190097">@turt2live</a>!</li>
 	<li>Add <code>federation_domain_whitelist</code> option (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2820" data-error-text="Failed to load issue title" data-id="290431422" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2820">#2820</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2821" data-error-text="Failed to load issue title" data-id="290535583" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2821">#2821</a>)</li>
</ul>
Changes:
<ul>
 	<li>Continue to factor out processing from main process and into worker processes. See updated <code>docs/workers.rst &lt;docs/metrics-howto.rst&gt;</code>_ (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2892" data-error-text="Failed to load issue title" data-id="298561185" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2892">#2892</a> - <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2904" data-error-text="Failed to load issue title" data-id="299011997" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2904">#2904</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2913" data-error-text="Failed to load issue title" data-id="300641311" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2913">#2913</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2920" data-error-text="Failed to load issue title" data-id="301369053" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2920">#2920</a> - <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2926" data-error-text="Failed to load issue title" data-id="301430108" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2926">#2926</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2947" data-error-text="Failed to load issue title" data-id="302345912" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2947">#2947</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2847" data-error-text="Failed to load issue title" data-id="294445742" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2847">#2847</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2854" data-error-text="Failed to load issue title" data-id="294788458" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2854">#2854</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2872" data-error-text="Failed to load issue title" data-id="297406819" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2872">#2872</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2873" data-error-text="Failed to load issue title" data-id="297453720" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2873">#2873</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2874" data-error-text="Failed to load issue title" data-id="297495962" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2874">#2874</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2928" data-error-text="Failed to load issue title" data-id="301499498" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2928">#2928</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2929" data-error-text="Failed to load issue title" data-id="301509586" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2929">#2929</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2934" data-error-text="Failed to load issue title" data-id="301790132" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2934">#2934</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2856" data-error-text="Failed to load issue title" data-id="295084944" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2856">#2856</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2976" data-error-text="Failed to load issue title" data-id="304706297" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2976">#2976</a> - <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2984" data-error-text="Failed to load issue title" data-id="304740825" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2984">#2984</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2987" data-error-text="Failed to load issue title" data-id="304821270" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2987">#2987</a> - <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2989" data-error-text="Failed to load issue title" data-id="304866716" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2989">#2989</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2991" data-error-text="Failed to load issue title" data-id="304872444" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2991">#2991</a> - <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2993" data-error-text="Failed to load issue title" data-id="304884837" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2993">#2993</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2995" data-error-text="Failed to load issue title" data-id="305183031" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2995">#2995</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2784" data-error-text="Failed to load issue title" data-id="288646985" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2784">#2784</a>)</li>
 	<li>Ensure state cache is used when persisting events (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2864" data-error-text="Failed to load issue title" data-id="296733137" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2864">#2864</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2871" data-error-text="Failed to load issue title" data-id="297402993" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2871">#2871</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2802" data-error-text="Failed to load issue title" data-id="289312790" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2802">#2802</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2835" data-error-text="Failed to load issue title" data-id="292486340" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2835">#2835</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2836" data-error-text="Failed to load issue title" data-id="292488546" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2836">#2836</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2841" data-error-text="Failed to load issue title" data-id="293319852" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2841">#2841</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2842" data-error-text="Failed to load issue title" data-id="293516371" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2842">#2842</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2849" data-error-text="Failed to load issue title" data-id="294454677" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2849">#2849</a>)</li>
 	<li>Change the default config to bind on both IPv4 and IPv6 on all platforms (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2435" data-error-text="Failed to load issue title" data-id="254819246" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2435">#2435</a>) Thanks to <a class="user-mention" href="https://github.com/silkeh" data-hovercard-user-id="5798032">@silkeh</a>!</li>
 	<li>No longer require a specific version of saml2 (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2695" data-error-text="Failed to load issue title" data-id="275301530" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2695">#2695</a>) Thanks to <a class="user-mention" href="https://github.com/okurz" data-hovercard-user-id="1693432">@okurz</a>!</li>
 	<li>Remove <code>verbosity</code>/<code>log_file</code> from generated config (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2755" data-error-text="Failed to load issue title" data-id="286276436" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2755">#2755</a>)</li>
 	<li>Add and improve metrics and logging (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2770" data-error-text="Failed to load issue title" data-id="287188683" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2770">#2770</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2778" data-error-text="Failed to load issue title" data-id="288278959" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2778">#2778</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2785" data-error-text="Failed to load issue title" data-id="288661455" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2785">#2785</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2786" data-error-text="Failed to load issue title" data-id="288673610" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2786">#2786</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2787" data-error-text="Failed to load issue title" data-id="288680996" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2787">#2787</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2793" data-error-text="Failed to load issue title" data-id="288990634" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2793">#2793</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2794" data-error-text="Failed to load issue title" data-id="288990935" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2794">#2794</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2795" data-error-text="Failed to load issue title" data-id="288991781" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2795">#2795</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2809" data-error-text="Failed to load issue title" data-id="289596655" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2809">#2809</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2810" data-error-text="Failed to load issue title" data-id="289611347" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2810">#2810</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2833" data-error-text="Failed to load issue title" data-id="292478167" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2833">#2833</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2834" data-error-text="Failed to load issue title" data-id="292485874" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2834">#2834</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2844" data-error-text="Failed to load issue title" data-id="293722386" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2844">#2844</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2965" data-error-text="Failed to load issue title" data-id="303899583" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2965">#2965</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2927" data-error-text="Failed to load issue title" data-id="301458883" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2927">#2927</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2975" data-error-text="Failed to load issue title" data-id="304696133" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2975">#2975</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2790" data-error-text="Failed to load issue title" data-id="288882318" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2790">#2790</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2796" data-error-text="Failed to load issue title" data-id="289002187" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2796">#2796</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2838" data-error-text="Failed to load issue title" data-id="292878012" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2838">#2838</a>)</li>
 	<li>When using synctl with workers, don't start the main synapse automatically (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2774" data-error-text="Failed to load issue title" data-id="287752976" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2774">#2774</a>)</li>
 	<li>Minor performance improvements (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2773" data-error-text="Failed to load issue title" data-id="287525837" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2773">#2773</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2792" data-error-text="Failed to load issue title" data-id="288956339" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2792">#2792</a>)</li>
 	<li>Use a connection pool for non-federation outbound connections (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2817" data-error-text="Failed to load issue title" data-id="290150012" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2817">#2817</a>)</li>
 	<li>Make it possible to run unit tests against postgres (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2829" data-error-text="Failed to load issue title" data-id="291766061" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2829">#2829</a>)</li>
 	<li>Update pynacl dependency to 1.2.1 or higher (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2888" data-error-text="Failed to load issue title" data-id="298077542" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2888">#2888</a>) Thanks to <a class="user-mention" href="https://github.com/bachp" data-hovercard-user-id="333807">@bachp</a>!</li>
 	<li>Remove ability for AS users to call /events and /sync (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2948" data-error-text="Failed to load issue title" data-id="302351006" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2948">#2948</a>)</li>
 	<li>Use bcrypt.checkpw (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2949" data-error-text="Failed to load issue title" data-id="302378538" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2949">#2949</a>) Thanks to <a class="user-mention" href="https://github.com/krombel" data-hovercard-user-id="11167142">@krombel</a>!</li>
</ul>
Bug fixes:
<ul>
 	<li>Fix broken <code>ldap_config</code> config option (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2683" data-error-text="Failed to load issue title" data-id="274548585" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2683">#2683</a>) Thanks to <a class="user-mention" href="https://github.com/seckrv" data-hovercard-user-id="33725786">@seckrv</a>!</li>
 	<li>Fix error message when user is not allowed to unban (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2761" data-error-text="Failed to load issue title" data-id="286627895" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2761">#2761</a>) Thanks to <a class="user-mention" href="https://github.com/turt2live" data-hovercard-user-id="1190097">@turt2live</a>!</li>
 	<li>Fix publicised groups GET API (singular) over federation (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2772" data-error-text="Failed to load issue title" data-id="287465272" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2772">#2772</a>)</li>
 	<li>Fix user directory when using <code>user_directory_search_all_users</code> config option (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2803" data-error-text="Failed to load issue title" data-id="289317809" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2803">#2803</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2831" data-error-text="Failed to load issue title" data-id="291766486" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2831">#2831</a>)</li>
 	<li>Fix error on <code>/publicRooms</code> when no rooms exist (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2827" data-error-text="Failed to load issue title" data-id="291754519" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2827">#2827</a>)</li>
 	<li>Fix bug in quarantine_media (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2837" data-error-text="Failed to load issue title" data-id="292821166" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2837">#2837</a>)</li>
 	<li>Fix url_previews when no Content-Type is returned from URL (PR <a class="issue-link js-issue-link tooltipped tooltipped-ne" href="https://github.com/matrix-org/synapse/pull/2845" data-error-text="Failed to load issue title" data-id="293737258" data-permission-text="Issue title is private">#2845</a>)</li>
 	<li>Fix rare race in sync API when joining room (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2944" data-error-text="Failed to load issue title" data-id="302277324" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2944">#2944</a>)</li>
 	<li>Fix slow event search, switch back from GIST to GIN indexes (PR <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2769" data-error-text="Failed to load issue title" data-id="287153610" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2769">#2769</a>, <a class="issue-link js-issue-link" href="https://github.com/matrix-org/synapse/pull/2848" data-error-text="Failed to load issue title" data-id="294449553" data-permission-text="Issue title is private" data-url="https://github.com/matrix-org/synapse/issues/2848">#2848</a>)</li>
</ul>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2018&#x2F;03&#x2F;16&#x2F;urgent-synapse-0-26-1-hotfix-out&#x2F;" title="Urgent Synapse 0.26.1 hotfix out">Urgent Synapse 0.26.1 hotfix out</a></h1>
            <span>
                16.03.2018 00:00
                —
                <a href="/category/general">
                    General
                </a>
                —
                <a href="/author/matthew-hodgson">
                    Matthew Hodgson
                </a>
            </span>
            
        </header>
        <div>
            <p>Hi all,</p>
<p>We just rushed out an urgent hotfix release for Synapse 0.26.1, addressing a nasty bug in the ujson library which causes it to misbehave badly in the presence of JSON containing very large &gt;64-bit integers.  Anyone whose synapses are currently filling up with &quot;Value too big!&quot; errors will want to upgrade immediately from <a href="https://github.com/matrix-org/synapse/releases/tag/v0.26.1">https://github.com/matrix-org/synapse/releases/tag/v0.26.1</a>.</p>
<p>Sorry for the inconvenience.</p>
<h3 id="changes-in-synapse-v0-26-1-2018-03-15">Changes in synapse v0.26.1 (2018-03-15)</h3>
<p>Bug fixes:</p>
<ul>
 	<li>Fix bug where an invalid event caused server to stop functioning correctly, due to parsing and serializing bugs in ujson library.</li>
</ul>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2018&#x2F;02&#x2F;09&#x2F;security-update-riotweb-0-13-5-released-fixing-xss-vulnerability&#x2F;" title="Security update: Riot&#x2F;Web 0.13.5 released - fixing XSS vulnerability">Security update: Riot&#x2F;Web 0.13.5 released - fixing XSS vulnerability</a></h1>
            <span>
                09.02.2018 00:00
                —
                <a href="/category/tech">
                    Tech
                </a>
                —
                <a href="/author/matthew-hodgson">
                    Matthew Hodgson
                </a>
            </span>
            
        </header>
        <div>
            <p>Hi all,</p>
<p>Heads up that we made an emergency release of Riot/Web 0.13.5 a few hours ago to fix a XSS vulnerability found and reported by walle303 - many thanks for disclosing it responsibly.</p>
<p><strong>Please upgrade to Riot/Web 0.13.5 asap. If you're using <a href="https://riot.im/app">riot.im/app</a> or <a href="https://riot.im/develop">riot.im/develop</a> this simply means hitting Refresh; otherwise please upgrade your Riot deployment as soon as possible. </strong><a href="https://pkgs.alpinelinux.org/packages?name=riot-web&branch=edge">Alpine</a>, <a href="https://riot.im/desktop">Debian</a> and <a href="https://github.com/taw00/riot-rpm">Fedora/RPM</a> packages are already updated - huge thanks to the maintainers for the fast turnaround.</p>
<p>The issue lies in the relatively obscure external_url feature, which lets bridges specify a URL for bridged events, letting Riot/Web users link through to the 'original' event (e.g. a twitter URL on a bridged tweet).  The option is hidden in a context menu and labelled &quot;Source URL&quot;, and is only visible on events which have the external_url field set.  Unfortunately Riot/Web didn't sanitise the URL correctly, allowing a malicious URL to be injected - and this has been the case since the feature landed in Riot 0.9.0 (Nov 2016).</p>
<p>If you're not able to upgrade to Riot/Web 0.13.5 for some reason, then please do not click on the 'Source URL' feature on the event context menu:</p>
<p><a href="/blog/wp-content/uploads/2018/02/xss.png"><img class="aligncenter size-large wp-image-3001" src="/blog/wp-content/uploads/2018/02/xss-1024x352.png" alt="" width="1024" height="352" /></a></p>
<p>Apologies for the inconvenience,</p>
<p>thanks,</p>
<p>Matthew</p>

        </div>
    </article>
    
    <nav class="pagination">
    <div class="prev">
        
        <a href="&#x2F;blog&#x2F;page&#x2F;47&#x2F;">‹ Previous</a>
        
    </div>
    <span class="page-number">48 / 64</span>
    <div class="prev">
        
        <a href="&#x2F;blog&#x2F;page&#x2F;49&#x2F;">Next ›</a>
        
    </div>
</nav>

</div>
    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;security-hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="&#x2F;code"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p>© 2022 The Matrix.org Foundation C.I.C.</p>
</footer>

</body>

</html>
