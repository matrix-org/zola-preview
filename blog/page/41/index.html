<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - Blog</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/png" href="/assets/favicon.png" />
    <link rel="stylesheet" href="/style.css" />

    </head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            current">
            Blog
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <a href="&#x2F;docs&#x2F;" class="section ">
                Documentation
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                </div>
            </div>
        </div>
        
        
        
        
        
        <div class="section-wrap">
            <a href="&#x2F;ecosystem&#x2F;" class="section ">
                Ecosystem
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bots&#x2F;">Bots</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        <div class="content">
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2018&#x2F;12&#x2F;28&#x2F;this-week-in-matrix-2018-12-28&#x2F;" title="This Week in Matrix 2018-12-28">This Week in Matrix 2018-12-28</a></h1>
            <span>
                28.12.2018 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="welcome-to-the-last-twim-of-the-year">Welcome to the last TWIM of the year</h2>
<p>It's the 28th of December as I write this, and I hope you had a good year. Long as it is, I recommend reading <a href="/blog/2018/12/25/the-2018-matrix-holiday-special/">Matthew's write-up of the year</a>, as it covers a lot of ground!</p>
<p>Many of the core team have been out of the office this week, but there are still plenty of updates to share from the Matrix ecosystem!</p>
<h2 id="mxisd-v1-2-2">mxisd v1.2.2</h2>
<p><a href="https://matrix.to/#/@max:kamax.io">Max</a> released mxisd v1.2.2:</p>
<blockquote><a href="https://github.com/kamax-matrix/mxisd">mxisd</a> had a Holiday-special release: <a href="https://github.com/kamax-matrix/mxisd/releases/tag/v1.2.2">v1.2.2</a> before v1.3.0.
<p>This release introduces two new big features:</p>
<ul>
 	<li>Username login rewriting via 3PID to allow advanced flows, like bypassing the synapse restriction of having numerical usernames for non-guest users</li>
 	<li>Support for multiple Base DNs for LDAP backends</li>
</ul>
Work has started on v1.3.0 so this is definitely the last release before a non-backward compatible release.</blockquote>
<h2 id="scylla">Scylla</h2>
<p><a href="https://matrix.to/#/@daniel:riot.danilafe.com">VaNilLa</a> has started a new client, a web app build in Elm:</p>
<blockquote>Hi all! I am working on a Matrix client in Elm, and I was recommended to share it here: <a href="https://github.com/DanilaFe/Scylla">Scylla</a></blockquote>
<h2 id="koma-desktop">koma-desktop</h2>
<p><a href="https://matrix.to/#/@druig:matrix.org">druig</a>:<br /><blockquote><a href="https://github.com/koma-im/koma-desktop">koma-desktop</a> is updated to JavaFx 11 and installation is simplified. Dependencies, including native modules can be packaged into one single file, which only needs to be downloaded and run. Java Runtime 11 is the only runtime dependency. Now it's just cross-compilation that needs to be set up before packaged releases can be provided for Mac, Windows, and Linux users.</blockquote></p>
<h2 id="prometheus-alertmanager-bot-for-matrix">Prometheus Alertmanager bot for Matrix</h2>
<p><a href="https://matrix.to/#/@jaywink:feneas.org">Jason Robinson</a>:</p>
<blockquote>I started work on a Prometheus Alertmanager bot for Matrix. The basic idea is that Alertmanager can send webhook alert events to the bot which will then send the formatted events to configured rooms based on the alert receiver. It works, but is still early work in progress. See code and info here: <a href="https://git.feneas.org/jaywink/matrix-alertmanager">https://git.feneas.org/jaywink/matrix-alertmanager</a>.</blockquote><br />Also mirrored on GitHub: <a href="https://github.com/jaywink/matrix-alertmanager">https://github.com/jaywink/matrix-alertmanager</a>
<h2 id="fractal-4-0">Fractal 4.0</h2>
<p><a href="@afranke:matrix.org">Alexandre Franke</a>:<br /><blockquote>As expected the Fractal team released 4.0 and is already hard at work on the next micro version. We recommend <a href="https://flathub.org/apps/details/org.gnome.Fractal">getting it from Flathub</a> like we usually do.</blockquote>
From the release notes:</p>
<blockquote>New features:
<ul>
 	<li>Enhanced history view with adaptive layout, day divider</li>
 	<li>Reorganised headerbar, app menu merged with user menu</li>
 	<li>Larger display of emoji-only messages</li>
 	<li>Some performance improvements</li>
 	<li>Opening a room jumps to first unread message</li>
</ul>
Bugfixes:
<ul>
 	<li>More reliable notifications</li>
 	<li>Fixed display bug for avatars</li>
</ul>
Under the hood:
<ul>
 	<li>Large code refactor</li>
 	<li>Logging infrastructure</li>
 	<li>Continuous integration</li>
 	<li>More informative build output</li>
</ul>
</blockquote>
<h2 id="maubot">maubot</h2>
<p><a href="https://matrix.to/#/@tulir:maunium.net">tulir</a> working on <a href="https://github.com/maubot/maubot">maubot</a>:</p>
<blockquote>The new command handling system in maubot is ready. The new system should be much nicer to use when developing plugins.<br /><br />Previously <a href="https://github.com/maubot/maubot">maubot</a> had a system that was designed after the improved bot support spec proposal, but it wasn't very nice or pythonic. If/when the proposal or something similar goes through, I'll probably add support for it in the new command handling system.<br /><br />Next I'll make some developer docs so that other people could actually make their own plugins.<br /><br />The code is at <a href="https://github.com/maubot/maubot">https://github.com/maubot/maubot</a> and you can ask about maubot in <a href="https://matrix.to/#/#maubot:maunium.net">#maubot:maunium.net</a>.</blockquote>
<h2 id="matrix-client-el-new-features">matrix-client.el new features</h2>
<p><a href="https://matrix.to/#/@alphapapa:matrix.org">alphapapa</a>:<br /><blockquote>Emacs makes it so easy to integrate things. Now you can send <code>org-mode</code> syntax messages with the <code>/org</code> command in <a href="https://github.com/jgkamat/matrix-client-el">matrix-client.el</a>.<br /><br />Tab-completion of usernames and IDs was added to matrix-client.el.</blockquote></p>
<h2 id="matrix-to-github-app">matrix-to GitHub app</h2>
<p><a href="https://matrix.to/#/@x:riot.ovh">t3chguy</a> has come out of hiding to announce:</p>
<blockquote><a href="https://github.com/apps/matrix-to">https://github.com/apps/matrix-to</a> is a Github App which makes use of their shiny and new Content Attachments API/Webhook. When a <code>matrix.to</code> or <code>view.matrix.org</code> URL is used this app is activated. It adds a little snippet with the Room Title and Topic (if the room is peekable from matrix.org). In future it'll work for event permalinks, but currently there is no support for peeking context/event in Matrix API.<br /><br />Example can be seen at <a href="https://github.com/matrix-org/matrix.to/issues/52#issuecomment-449878490">https://github.com/matrix-org/matrix.to/issues/52#issuecomment-449878490</a>. Idea courtesy of <a href="https://github.com/turt2live">TravisR</a>.</blockquote>
<h2 id="see-you-next-year">See you next year</h2>
<p>So there you have it.</p>
<p>I'm at 35c3 with some known characters from the Matrix world (as well as 15,000 others.) If you're here too, come visit us in our assembly, and also make sure to come to Dijkstra tomorrow to watch me present a look back at on the last year: <a href="https://fahrplan.events.ccc.de/congress/2018/Fahrplan/events/9400.html">https://fahrplan.events.ccc.de/congress/2018/Fahrplan/events/9400.html</a>. We have recorded a message for Matrix Live from 35c3, but will post tomorrow with some more footage from the event.</p>
<p>Otherwise, see you next year Matrix fan!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2018&#x2F;12&#x2F;25&#x2F;the-2018-matrix-holiday-special&#x2F;" title="The 2018 Matrix Holiday Special!">The 2018 Matrix Holiday Special!</a></h1>
            <span>
                25.12.2018 00:00
                —
                <a href="/category/general">
                    General
                </a>
                —
                <a href="/author/matthew-hodgson">
                    Matthew Hodgson
                </a>
            </span>
            
        </header>
        <div>
            <p>Hi all,</p>
<p>It's that time again where we break out the mince pies and brandy butter (at least for those of us in the UK) and look back on the year to see how far Matrix has come, as well as anticipate what 2019 may bring!</p>
<h3 id="overview">Overview</h3>
<p>It's fair to say that 2018 has been a pretty crazy year.  We have had one overriding goal: to take the <a href="/blog/2018/01/29/status-partners-up-with-new-vector-fueling-decentralised-comms-and-the-matrix-ecosystem/">funding</a> we received in January, stabilise and freeze the protocol and get it and the reference implementations out of beta and to a 1.0 - to provide a genuinely open and decentralised mainstream alternative to the likes of Slack, Discord, WhatsApp etc.  What's so crazy about that, you might ask?</p>
<p>Well, in parallel with this we've also seen adoption of Matrix accelerating ahead of our dev plan at an unprecedented speed: with France selecting Matrix to power the communication infrastructure of its whole public sector - first <a href="/blog/2018/04/26/matrix-and-riot-confirmed-as-the-basis-for-frances-secure-instant-messenger-app/">trialling over the summer</a>, and now <a href="https://twitter.com/matrixdotorg/status/1070392608801910784">confirmed for full roll-out</a> as of a few weeks ago.  Meanwhile there are several other similar-sized projects on the horizon which we can't talk about yet.  We've had the growing pains of establishing <a href="https://vector.im">New Vector</a> as a startup in order to hire the core team and support these projects.  We've launched <a href="https://modular.im">Modular</a> to provide professional-quality SaaS Matrix hosting for the wider community and help fund the team.  And most importantly, we've also been establishing the non-profit <a href="/blog/2018/10/29/introducing-the-matrix-org-foundation-part-1-of-2/">Matrix.org Foundation</a> to formalise the open governance of the Matrix protocol and protect and isolate it from any of the for-profit work.</p>
<p>However: things have just about come together.  Almost all the spec work for 1.0 is done and we are now aiming to get a 1.0 released in time by the end of January (in time for FOSDEM).  Meanwhile Synapse has improved massively in terms of performance and stability (not least having migrated over to <a href="/blog/2018/12/21/porting-synapse-to-python-3/">Python 3</a>); Riot's spectacular redesign is now <a href="https://medium.com/@RiotChat/redesign-experimenters-needed-afa7c2d4c858">available for testing</a> right now; E2E encryption is more stable than ever with the usability rework <a href="https://github.com/matrix-org/matrix-js-sdk/compare/develop...uhoreg:e2e_cross-signing">landing</a> as we speak.  And we've even got a full rewrite of Riot/Android in the wings.</p>
<p>But it's certainly been an interesting ride.  Longer-term spec work has been delayed by needing to apply band-aids to mitigate abuse of the outstanding issues.  Riot redesign was pushed back considerably due to prioritising Riot performance over UX. The E2E UX work has forced us to consider E2E holistically… which does not always interact well with structuring the dev work into bite-sized chunks.  Dendrite has generally been idling whilst we instead pour most of our effort into getting to 1.0 on Synapse (rather than diluting 1.0 work across both projects). These tradeoffs have been hard to make, but hopefully we have chosen the correct path in the end.</p>
<p>Overall, as we approach 1.0, the project is looking better than ever - hopefully everyone has seen both Riot and Synapse using less RAM and being more responsive and stable, E2E being more reliable, and anyone who has played with the <a href="https://riot.im/experimental">Riot redesign</a> beta should agree that it is light-years ahead of yesterday's Riot and something which can genuinely surpass today's centralised proprietary incumbents. And that is unbelievably exciting :D</p>
<p>We'd like to thank everyone for continuing to support Matrix - especially our <a href="http://patreon.com/matrixdotorg">Patreon</a> &amp; <a href="http://liberapay.com/matrixdotorg">Liberapay</a> supporters, whose donations continue to be critical for helping fund the core dev team, and also those who are supporting the project indirectly by hosting homeservers with <a href="https://modular.im">Modular</a>.  We are going to do everything humanly possible to ship 1.0 over the coming weeks, and then the sky will be the limit!</p>
<p>Before going into what else 2019 will hold, however, let's take the opportunity to give a bit more detail on the various core team projects which landed in 2018…</p>
<h2 id="france">France</h2>
<p>DINSIC (France's Ministry of Digital, IT &amp; Comms) have been busy building out their massive cross-government Matrix deployment and custom Matrix client throughout most of the year.  After the <a href="/blog/2018/04/26/matrix-and-riot-confirmed-as-the-basis-for-frances-secure-instant-messenger-app/">announcement in April</a>, this started off with an initial deployment over the summer, and is now moving towards the full production rollout, as confirmed at the Paris Open Source Summit a few weeks ago by Mounir Mahjoubi, the Secretary of State of Digital.  All the press coverage about this ended up in French, with the biggest writeup being at <a href="https://www.cio-online.com/actualites/lire-mounir-mahjoubi%C2%A0-%C2%A0le-libre-n-est-pas-toujours-moins-cher-mais-c-est-toujours-plus-transparent%C2%A0-10842.html">CIO Online</a>, but the main mention of Matrix (badly translated from French) is:</p>
<p style="padding-left: 30px;"><i>Denouncing the use of tools such as WhatsApp; a practice that has become commonplace within ministerial offices, Mounir Mahjoubi announced the launch in production of Tchap, based on Matrix and Riot: an instant messaging tool that will be provided throughout the administrations. So, certainly, developing a product can have a certain cost. Integrating it too. "Free is not always cheaper but it's always more transparent," admitted the Secretary of State.
</i></p>
The project really shows off Matrix at its best, with up to 60 different deployments spread over different ministries and departments; multiple clusters per Ministry; end-to-end encryption enabled by default (complete with e2e-aware antivirus scanning); multiple networks for different classes of traffic; and the hope of federating with the public Matrix network once the S2S API is finalised and suitable border gateways are available.  It's not really our project to talk about, but we'll try to share as much info as we can as roll-out continues.
<h2 id="the-matrix-specification">The Matrix Specification</h2>
<p>A major theme throughout the year has been polishing the <a href="/docs/spec">Matrix Spec</a> itself for its first full stable release, having had more than enough time to see which bits work in practice now and which bits need rethinking.  This all kicked off with the <a href="/blog/2018/05/17/introducing-matrix-specification-changes/">creation of the Matrix Spec Change process</a> back in May, which provides a formal process for reviewing and accepting contributions from anyone into the spec.  Getting the balance right between agility and robustness has been quite tough here, especially pre-1.0 where we've needed to move rapidly to resolve the remaining long-lived sticking points.  However, a process like this risks encouraging the classic “<a href="https://en.wikipedia.org/wiki/Perfect_is_the_enemy_of_good">Perfect is the Enemy of Good</a>” problem, as all and sundry jump in to apply their particular brand of perfectionism to the spec (and/or the process around it) and risk smothering it to death with enthusiasm.  So we've ended up iterating a few times on the process and hopefully now converged on an approach which will work for 1.0 and beyond. If you haven't checked out the current <a href="/docs/spec/proposals">proposals guide</a> please give it a look, and feel free to marvel at all the MSCs in flight.  You can also see a <a href="/~richardv/proposal_news.html">quick and dirty timeline of all the MSC status changes</a> since we introduced the process, to get an idea of how it's all been progressing.</p>
<p>In August we had a big sprint to cut <a href="/blog/2018/09/03/matrix-spec-update-august-2018/">stable “r0” releases of all the APIs</a> of the spec which had not yet reached a stable release (i.e. all apart from the Client-Server API, which has been stable since Dec 2015 - hence in part the large number of usable independent Matrix clients relative to the other bits of the ecosystem).  In practice, we managed to release 3 out of the 4 remaining APIs - but needed more time to solve the remaining blocking issues with the Server-Server API. So since August (modulo operational and project distractions) we've been plugging away on the S2S API.  </p>
<p>The main blocking issue for a stable S2S API has been State Resolution. This is the fundamental algorithm used to determine the state of a given room whenever a race or partition happens between the servers participating in it.  For instance: if Alice kicks Bob on her server at the same time as Charlie ops Bob on his server, who should win? It's vital that all servers reach the same conclusion as to the state of the room, and we don't want servers to have to replicate a full copy of the room's history (which could be massive) to reach a consistent conclusion.  Matrix's original state resolution algorithm dates back to the initial usable S2S implementation at the beginning of 2015 - but over time deficiencies in the algorithm became increasingly apparent. The most obvious issue is the “<a href="https://github.com/matrix-org/synapse/issues/2432">Hotel California</a>” bug, where users can be spontaneously re-joined to a room they've previously left if the room's current state is merged with an older copy of the room on another server and the ‘wrong' version wins the conflict - a so-called state-reset.</p>
<p>After a lot of thought we ended up proposing an <a href="https://github.com/matrix-org/matrix-doc/blob/erikj/state_res_rejections/proposals/1442-state-resolution.md">all new State Resolution algorithm</a> in July 2018, nicknamed State Resolution Reloaded.  This extends the original algorithm to consider the ‘auth chain' of state events when performing state resolution (i.e. the sequence of events that a given state event cites as evidence of its validity) - as well as addressing a bunch of other issues.  For those wishing to understand in more detail, there's <a href="https://github.com/matrix-org/matrix-doc/blob/erikj/state_res_rejections/proposals/1442-state-resolution.md">the MSC</a> itself, the formal terse description of the algorithm now merged into the <a href="/docs/spec/server_server/unstable.html#state-resolution-algorithm-for-version-2-rooms">unstable S2S spec</a> - or alternatively there's an excellent <a href="https://matrix.uhoreg.ca/stateres/reloaded.html">step-by-step explanation and guided example</a> from uhoreg (warning: contains Haskell :)  Or you can watch Erik and Matthew try to explain it all on <a href="https://youtu.be/f6ZdmPSUUBA">Matrix Live</a> back in July.</p>
<p>Since the initial proposal in July, the algorithm has been proofed out in a <a href="https://github.com/matrix-org/matrix-test-state-resolution-ideas">test jig</a>, iterated on some more to better specify <a href="https://github.com/matrix-org/matrix-doc/pull/1693">how to handle rejected events</a>, <a href="https://github.com/matrix-org/synapse/pull/4040">implemented in Synapse</a>, and is now ready to roll.  The only catch is that to upgrade to it we've had to introduce the concept of <a href="https://github.com/matrix-org/matrix-doc/pull/1516/files">room versioning</a>, and to flush out historical issues we require you to <a href="https://github.com/matrix-org/matrix-doc/blob/rav/room_upgrades/proposals/1501-room-version-upgrades.md">re-create rooms to upgrade them</a> to the new resolution algorithm. Getting the logistics in place for this is a massive pain, but we've got an approach now which should be sufficient. Clients will be free to smooth over the transition in the UI as gracefully as possible (and in fact Riot has this already hooked up).  So: watch this space as v2 rooms with all-new state resolution in the coming weeks!</p>
<p>Otherwise, there are a bunch of other issues in the S2S API which we are still working through (e.g. <a href="https://github.com/matrix-org/matrix-doc/blob/erikj/event_id_hashes/proposals/1640-event-id-as-hashes.md">changing event IDs to be hashes</a> of event contents to avoid lying about IDs, <a href="https://github.com/matrix-org/matrix-doc/pull/1711">switching to use normal X.509 certificates for federation</a> and so resolve problems with Perspectives, etc).  </p>
<p>Once these land and are implemented in Synapse over the coming weeks, we will be able to finally declare a 1.0!</p>
<p>Also on the spec side of things, it's worth noting that a lot of effort went into improving performance for clients in the form of the <a href="https://github.com/matrix-org/matrix-doc/issues/1227">Lazy Loading Members MSC</a>.  This ended up consuming a lot of time over the summer as we updated Synapse and the various matrix-*-sdks (and thus Riot) to only calculate and send details to the clients about members who are currently talking in a room, whereas previously we sent the entire state of the room to the client (even including users who had left). The end result however is a 3-5x reduction in RAM on Riot, and a 3-5x speedup on initial sync.  The current MSC is currently being <a href="https://github.com/matrix-org/matrix-doc/pull/1758">merged as we speak</a> into the main spec (thanks Kitsune!) for inclusion in upcoming CS API 0.5.</p>
<h2 id="the-matrix-org-foundation-cic">The Matrix.org Foundation (CIC!)</h2>
<p>Alongside getting the open spec process up and running, we've been establishing The Matrix.org Foundation as an independent non-profit legal entity responsible for neutrally safeguarding the Matrix spec and evolution of the protocol.  This kicked off in June with the “<a href="/blog/2018/06/20/towards-open-governance-for-matrix-org/">Towards Open Governance</a>” blog post, and continued with the <a href="/blog/2018/10/29/introducing-the-matrix-org-foundation-part-1-of-2/">formal incorporation</a> of The Matrix.org Foundation in October.  Since then, we've spent a lot of time with the non-profit lawyers evolving <a href="https://github.com/matrix-org/matrix-doc/issues/1318">MSC1318</a> into the final Articles of Association (and other guidelines) for the Foundation.  This work is basically solved now; it just needs MSC1318 to be updated with the conclusions (which we're running late on, but is top of Matthew's MSC todo list).</p>
<p>In other news, we have confirmation that the <a href="https://en.wikipedia.org/wiki/Community_interest_company">Community Interest Company</a> (CIC) status for The Matrix.org Foundation has been approved - this means that the CIC Regulator has independently reviewed the initial Articles of Association and approved that they indeed lock the mission of the Foundation to be non-profit and to act solely for the good of the wider online community.  In practice, this means that the Foundation will be formally renamed The Matrix.org Foundation C.I.C, and provides a useful independent safeguard to ensure the Foundation remains on track.</p>
<p>The remaining work on the Foundation is:</p>
<ul>
 	<li style="font-weight: 400;">Update and land MSC1318, particularly on clarifying the relationship between the legal Guardians (Directors) of the Foundation and the technical members of the core spec team, and how funds of the Foundation will be handled.
</li>
 	<li style="font-weight: 400;">Update the Articles of Association of the Foundation based on the end result of MSC1318
</li>
 	<li style="font-weight: 400;">Transfer any Matrix.org assets over from New Vector to the Foundation.  Given Matrix's code is all open source, there isn't much in the way of assets - we're basically talking about the matrix.org domain and website itself.
</li>
 	<li style="font-weight: 400;">Introduce the final Guardians for the Foundation.
</li>
</ul>
We'll keep you posted with progress as this lands over the coming months.
<h2 id="riot">Riot</h2>
<p>2018 has been a bit of a chrysalis year for Riot: the vast majority of work has been going into the <a href="https://medium.com/@RiotChat/a-sneak-peek-at-a-whole-new-riot-im-1114df653782">massive redesign</a> we started in May to improve usability &amp; cosmetics, performance, stability, and E2E encryption usability improvements.  We've consciously spent most of the year feature frozen in order to polish what we already have, as we've certainly been guilty in the past of landing way too many features without necessarily applying the needed amount of UX polish.</p>
<p>However, as of today, we're super-excited to announce that Riot's redesign is at the point where the intrepid can start experimenting with it - in fact, internally most of the team has switched over to dogfooding (testing) the redesign as of a week or so ago.  Just shut down your current copy of Riot/Web or Desktop and go to <a href="https://riot.im/experimental">https://riot.im/experimental</a> instead if you want to experiment (we don't recommend running both at the same time).  Please note that it is still work-in-progress and there's a lot of polish still to land and some cosmetic bugs still hanging around, but it's definitely at the point of feeling better than the old app.  Most importantly, please provide feedback (by hitting the lifesaver-ring button at the bottom left) to let us know how you get on. See the <a href="https://medium.com/@RiotChat/redesign-experimenters-needed-afa7c2d4c858">Riot blog</a> for more details!</p>
<p><a href="/blog/wp-content/uploads/2018/12/Screenshot-2018-12-25-at-04.00.44.png"><img class="aligncenter size-large wp-image-3854" src="/blog/wp-content/uploads/2018/12/Screenshot-2018-12-25-at-04.00.44-1024x578.png" alt="" width="1024" height="578" /></a></p>
<p>Meanwhile, on the performance and stability side of things - Lazy Loading (see above) made a <a href="https://medium.com/@RiotChat/riot-im-web-0-17-and-ios-0-7-6-smaller-footprint-faster-launch-5ddd18a65abb">massive difference</a> to performance on all platforms; shrinking RAM usage by 3-5x and similarly speeding up launch and initial sync times.  Ironically, this ended up pushing back the redesign work, but hopefully the performance improvements will have been noticeable in the interim.  We also <a href="https://github.com/vector-im/riot-web/issues/6477">switched</a> the entire rich text composer from using Facebook's <a href="https://draftjs.org/">Draft.js</a> library to instead use <a href="https://www.slatejs.org">Slate.js</a> (which has generally been a massive improvement for stability and maintainability, although took <em><a href="https://github.com/matrix-org/matrix-react-sdk/pull/1890">ages</a></em> to land - huge thanks to t3chguy for getting it over the line). Meanwhile Travis has been blitzing through a massive list of key “<a href="https://github.com/vector-im/riot-web/projects/12">First Impression</a>” bugs to ensure that as many of Riot's most glaring usability gotchas are solved.</p>
<p>We also welcomed ever-popular <a href="https://medium.com/@RiotChat/stickers-are-here-introducing-riot-im-0-15-for-web-desktop-284c32b93acc">Stickers</a> to the fold - the first instance of per-account rather than per-room widgets, which ended up requiring a lot of new infrastructure in both Riot and the underlying integration manager responsible for hosting the widgets.  But judging by how popular they are, the effort seems to be worth it - and paves the way for much more exciting interactive widgets and integrations in future!</p>
<p>An unexpectedly large detour/distraction came in the form of GDPR back in May - we spent a month or so running around ensuring that both Riot and Matrix are GDPR compliant (including the necessary legal legwork to establish how GDPR even applies to a decentralised technology like Matrix).  If you missed all that fun, you can <a href="/blog/2018/05/08/gdpr-compliance-in-matrix/">read about it here</a>.  Hopefully we won't have to do anything like that again any time soon...</p>
<p>And finally: on the mobile side, much of the team has been distracted helping out France with their Matrix deployment.  However, we've been plugging away on Riot/Mobile, keeping pace with the development on Riot/Web - but most excitingly, we've also found time to experiment with a <a href="https://github.com/vector-im/riot-android-redesign-PoC/tree/develop">complete rewrite of Riot/Android</a> in Kotlin, using Realm and Rx (currently nicknamed Riot X).  The rewrite was originally intended as a test-jig for experimenting with the redesign on mobile, but it's increasingly becoming a fully fledged Matrix client… which launches and syncs over 5x faster than today's Riot/Android.  If you're particularly intrepid you should be able to run the app by checking out the project in Android Studio and hitting ‘run'. We expect the rewrite to land properly in the coming months - watch this space for progress!</p>
<h2 id="e2e-encryption">E2E Encryption</h2>
<p>One of the biggest projects this year has been to get E2E encryption out of beta and <a href="https://github.com/vector-im/riot-web/issues/6779">turned on by default</a>.  Now, whilst the encryption itself in Matrix has been <a href="/blog/2016/11/21/matrixs-olm-end-to-end-encryption-security-assessment-released-and-implemented-cross-platform-on-riot-at-last/">cryptographically robust</a> since 2016 - its usability has been minimal at best, and we'd been running around polishing the underlying implementation rather than addressing the UX.  However, this year that changed, as we opened a war on about 6 concurrent battlefronts to address the remaining issues. These are:</p>
<ul>
 	<li style="font-weight: 400;">Holistic UX.  Designing a coherent, design-led UX across all of the encryption and key-management functionality.  Nad (who joined Matrix as a fulltime Lead UI/UX designer in August) has been leading the charge on this - you can see a <a href="/blog/2018/11/02/user-experience-preview-end-to-end-encryption-by-default/">preview of the end result</a><span style="font-weight: 400;"> here.  Meanwhile, Dave and Ryan are working through implementing it as we speak.
</span>
</li>
 	<li style="font-weight: 400;">Decryption failures (UISIs).  Whenever something goes wrong with E2E encryption, the symptoms are generally the same: you find yourself unable to decrypt other people's messages.  We've been plugging away chasing these down - for instance, <a href="https://github.com/matrix-org/matrix-js-sdk/pull/597">switching from localStorage to IndexedDB</a> in Riot/Web for storing encryption state (to make it harder for multiple tabs to collide and corrupt your encryption state); providing mechanisms to <a href="https://github.com/matrix-org/matrix-js-sdk/pull/780">unwedge Olm sessions</a><span style="font-weight: 400;"> which have got corrupted (e.g. by restoring from backup); and many others.  We also added full telemetry to track the number of UISIs people are seeing in practice - and the good news is that over the course of the year their occurrence has been steadily reducing.  The bad news is that there are still some edge cases left: so please, whenever you fail to decrypt a message, please make sure you submit a bug report and debug logs from *both* the sender and receiving device.  The end is definitely in sight on these, however, and good news is other battlefronts will also help mitigate UISIs.
</span>
</li>
 	<li style="font-weight: 400;">Incremental Key Backup.  Previously, if you only used one device (e.g. your phone) and you lost that phone, you would lose all your E2E history unless you were in the habit of explicitly manually backing up your keys.  Nowadays, we have the ability to optionally let users encrypt their keys with a passphrase (or recovery key) and <a href="https://github.com/matrix-org/matrix-doc/pull/1703">constantly upload them to the server</a> for safe keeping.  This was a significant chunk of work, but has actually <a href="https://github.com/matrix-org/matrix-react-sdk/pull/2169">landed already</a><span style="font-weight: 400;"> in Riot/Web and Riot/iOS, but is hidden behind a “Labs” feature flag in Settings whilst we test it and sort out the final UX.
</span>
</li>
 	<li style="font-weight: 400;">Cross-signing Keys. Previously, the only way to check whether you were talking to a legitimate user or an imposter was to independently compare the fingerprints of the keys of the device they claim to be using.  In the near future, we will let users prove that they own their devices by <a href="https://github.com/matrix-org/matrix-doc/pull/1756">signing them with a per-user identity key</a>, so you only have to do this check once. We've actually <a href="https://github.com/matrix-org/matrix-js-sdk/pull/795">already implemented</a> one iteration of cross-signing, but this <a href="https://github.com/matrix-org/matrix-doc/issues/1680">allowed arbitrary devices for a given user to attest each other</a><span style="font-weight: 400;"> (which creates a directed graph of attestations, and associated problems with revocations), hence switching to a simpler approach.
</span>
</li>
 	<li style="font-weight: 400;">Improved Verification. Verifying keys by manually comparing elliptic key fingerprints is incredibly cumbersome and tedious.  Instead, we have proposals for using <a href="https://github.com/matrix-org/matrix-doc/issues/1267">Short Authentication String</a> comparisons and <a href="https://github.com/matrix-org/matrix-doc/issues/1543">QR-code scanning</a><span style="font-weight: 400;"><span style="font-weight: 400;"> to simplify the process.  uhoreg is currently implementing these as we speak :)
</span>
</span>
</li>
 	<li style="font-weight: 400;">Search.  Solving encrypted search is Hard, but t3chguy did a lot of work earlier in the year to build out <a href="https://github.com/matrix-org/matrix-search">matrix-search</a>: essentially a js-sdk bot which you can host, hand your keys to, and will archive your history using a golang full-text search engine (bleve) and expose a search interface that replaces Synapse's default one.  Of all the battlefronts this one is progressing the least right now, but the hope is to integrate it into Riot/Desktop or other clients so that folks who want to index all their conversations have the means to do so.  On the plus side, all the necessary building blocks are available thanks to t3chguy's hacking.
</li>
</ul>
So, TL;DR: E2E is hard, but the end is in sight thanks to a lot of blood, sweat and tears.  It's possible that we may have opened up too many battlefronts in finishing it off rather than landing stuff gradually.  But it should be transformative when it all lands - and we'll finally be able to turn it on by default for private conversations.  Again, we're aiming to pull this together by the end of January.
<p>Separately, we've been keeping a close eye on <a href="https://datatracker.ietf.org/wg/mls/about/">MLS</a> - the IETF's activity around standardising scalable group E2E encryption.  MLS has a lot of potential and could provide algorithmic improvements over Olm &amp; Megolm (whist paving the way for interop with other MLS-encrypted comms systems).  But it's also quite complicated, and is at risk of designing out support of decentralised environments. For now, we're obviously focusing on ensuring that Matrix is rock solid with Olm &amp; Megolm, but once we hit that 1.0 we'll certainly be experimenting a bit with MLS too.</p>
<h2 id="homeservers">Homeservers</h2>
<p>The story of the Synapse team in 2018 has been one of alternating between solving scaling and performance issues to support the ever-growing network (especially the massive matrix.org server)... and dealing with S2S API issues; both in terms of fixing the design of State Resolution, Room Versioning etc (see the Spec section above) and doing stop-gap fixes to the current implementation.</p>
<p>Focusing on the performance side of things, the main wins have been:</p>
<ul>
 	<li style="font-weight: 400;"><span style="font-weight: 400;">Splitting yet more functionality out into worker processes which can scale independently of the master Synapse process.
</span>
</li>
 	<li style="font-weight: 400;"><span style="font-weight: 400;"><span style="font-weight: 400;">Yet more profiling and optimisation (particularly caching).  Between this and the worker split-out we were able to resolve the performance ceiling that we hit over the summer, and as of right now matrix.org feels relatively snappy.
</span>
</span>
</li>
 	<li style="font-weight: 400;"><span style="font-weight: 400;">Lazy Loading Members.
</span>
</li>
 	<li style="font-weight: 400;"><a href="/blog/2018/12/21/porting-synapse-to-python-3/">Python 3</a>.  As everyone should have seen by now, Synapse is now Python 3 by default as of 0.34, which provides significant RAM and CPU improvements across the board as well as a path forwards given Python 2's planned demise at the end of 2019.  If you're not running your Synapse on Python 3 today, you are officially doing it wrong.
</li>
</ul>
There are also some major improvements which haven't fully landed yet:
<span style="font-weight: 400;">
</span>
<ul>
 	<li style="font-weight: 400;">State compression.  We have a new algorithm for storing room state which is ~10x more efficient than the current one.  We'll be migrating to it in by default in future. If you're feeling particularly intrepid you can actually <a href="https://github.com/matrix-org/rust-synapse-compress-state">manually use it today</a><span style="font-weight: 400;"> (but we don't recommend it yet).
</span>
</li>
 	<li style="font-weight: 400;">Incremental state resolution.  Before we got sucked into redesigning state resolution in general, Erik came up with a <a href="/_matrix/media/v1/download/jki.re/ubNfLtrmXZMmlGjJZYPnlHHy">proof that it's possible to memoize state resolution</a><span style="font-weight: 400;"> and incrementally calculate it whenever state is resolved in a room rather than recalculate it from scratch each time (as is the current implementation).  This would be a significant performance improvement, given non-incremental state res can consume a lot of CPU (making everything slow down when there are lots of room extremities to resolve), and can consume a lot of RAM and has been one of the reasons that synapse's RAM usage can sometimes spike badly. The good news is that the new state res algorithm was designed to also work in this manner.  The bad news is that we haven't yet got back to implementing it yet, given the new algorithm is only just being rolled out now.
</span>
</li>
 	<li style="font-weight: 400;"><a href="https://github.com/matrix-org/matrix-doc/issues/1229">Chunks</a>.  Currently, Synapse models all events in a room as being part of a single DAG, which can be problematic if you can see lots of disconnected sections of the DAG (e.g. due to intermittent connectivity somewhere in the network), as Synapse will frantically try to resolve all these disconnected sections of DAG together.  Instead, a better solution is to explicitly model these sections of DAG as separate entities called Chunks, and not try to resolve state between disconnected Chunks but instead consider them independent fragments of the room - and thus simplify state resolution calculations significantly. It also fixes an S2S API design flaw where previously we trusted the server to state the ordering (depth) of events they provided; with chunks, the receiving server can keep track of that itself by tracking a DAG of chunks (as well as the normal event DAG within the chunks).  Now, most of the work for this happened already, but is <a href="https://github.com/matrix-org/synapse/issues/3785">currently parked</a> until new state res has landed.
</li>
</ul>
Meanwhile, over on Dendrite, we made the conscious decision to get 1.0 out the door on Synapse first rather than trying to implement and iterate on the stuff needed for 1.0 on both Synapse &amp; Dendrite simultaneously.  However, Dendrite has been ticking along thanks to work from Brendan, Anoa and APWhitehat - and the plan is to use it for more niche homeserver work at first; e.g. constrained resource devices (Dendrite uses 5-10x less RAM than Synapse on Py3), clientside homeservers, experimental routing deployments, etc.  In the longer term we expect it to grow into a fully fledged HS though!
<h2 id="bridging">Bridging</h2>
<p>2018 was a bit of a renaissance for Bridging, largely thanks to Half-Shot coming on board in the Summer to work on IRC bridging and finally get to the bottom of the stability issues which plagued Freenode for the previous, uh, few years.  Meanwhile the Slack bridge got its first ever release - and more recently there's some Really Exciting Stuff happening with <a href="https://github.com/matrix-org/matrix-appservice-purple">matrix-appservice-purple</a>; a properly usable bridge through to any protocol that libpurple can speak… and as of a few days ago also supports <em>native</em> XMPP bridging via XMPP.js.  There'll probably be a dedicated blogpost about all of this in the new year, especially when we deploy it all on Matrix.org. Until then, the best bet is to learn more is to watch <a href="https://youtu.be/B0faoVdw0ak">last week's Matrix Live</a> and hear it all first hand.</p>
<h2 id="modular">Modular</h2>
<p>One of the biggest newcomers of 2018 was the launch of <a href="https://modular.im">Modular.im</a> in October - the world's first commercial Matrix hosting service.  Whilst (like Riot), Modular isn't strictly-speaking a Matrix.org project - it feels appropriate to mention it here, not least because it's helping directly fund the core Matrix dev team.</p>
<p>So far Modular has seen a lot of interest from folks who want to spin up a super-speedy dedicated homeserver run by us rather than having to spend the time to build one themselves - or folks who have yet to migrate from IRC and want a better-than-IRC experience which still bridges well.  One of the nice bits is that the servers are still decentralised and completely operationally independent of one another, and there have been a bunch of really nice refinements since launch, including the ability to point your own DNS at the server; matrix-&gt;matrix migration tools; with custom branding and other goodness coming soon.  If you want one-click Matrix hosting, please give Modular a go :) </p>
<p>Right now we're promoting Modular mainly to existing Matrix users, but once the Riot redesign is finished you should expect to see some very familiar names popping up on the platform :D</p>
<h2 id="twim">TWIM</h2>
<p>Unless you were living under a rock, you'll hopefully have also realised that 2018 was the year that brought us <a href="/blog/category/general/this-week-in-matrix/">This Week In Matrix</a> (TWIM) - our very own blog tracking all the action across the whole Matrix community on a weekly basis.  Thank you to everyone who contributes updates, and to Ben for editing it each week. Go flip through the archives to find out what's been going on in the wider community over the course of the year!  (This blog post is already way too long without trying to cover the rest of the ecosystem too :)</p>
<h2 id="shapes-of-things-to-come">Shapes of Things to Come</h2>
<p>Finally, a little Easter egg (it is Christmas, after all) for anyone crazy enough to have read this far: The eagle-eyed amongst you might have noticed that one of our accepted talks for FOSDEM 2019 is “<a href="https://fosdem.org/2019/schedule/event/matrix/">Breaking the 100bps barrier with Matrix</a>” in the Real Time Communications devroom.  We don't want to spoil the full surprise, but here's a quick preview of some of the more exotic <a href="https://en.wikipedia.org/wiki/Skunkworks_project">skunkworks</a> we've been doing on low-bandwidth routing and transports recently.  Right now it shamelessly assumes that you're running within a trusted network, but once we solve that it will of course be be proposed as an MSC for Matrix proper.  A full write-up and code will follow, but for now, here's a mysterious video…</p>
<div><iframe src="https://www.youtube.com/embed/vimXuCTxV6k" frameBorder="0" allowFullScreen="allowfullscreen"></iframe></div>
<p>(If you're interested in running Matrix over low-bandwidth networks, please <a href="https://matrix.to/#/@matthew:matrix.org">get in touch</a> - we'd love to hear from you...)</p>
<h2 id="2019">2019</h2>
<p>So, what will 2019 bring?</p>
<p>In the short term, as should be obvious from the above, our focus is on:</p>
<ul>
 	<li style="font-weight: 400;">r0 spec releases across the board (aka Matrix 1.0)
</li>
 	<li style="font-weight: 400;">Implementing them in Synapse
</li>
 	<li style="font-weight: 400;">Landing the Riot redesign
</li>
 	<li style="font-weight: 400;">Landing all the new E2E encryption UX and features
</li>
 	<li style="font-weight: 400;">Finalising the Matrix.org Foundation
</li>
</ul>
However, beyond that, there's a lot of possible options on the table in the medium term:
<ul>
 	<li style="font-weight: 400;">Reworking and improving Communities/Groups.
</li>
 	<li style="font-weight: 400;">Reactions.
</li>
 	<li style="font-weight: 400;">E2E-encrypted Search
</li>
 	<li style="font-weight: 400;">Filtering. (empowering users to filter out rooms &amp; content they're not interested in).
</li>
 	<li style="font-weight: 400;">Extensible events.
</li>
 	<li style="font-weight: 400;">Editable messages.
</li>
 	<li style="font-weight: 400;">Extensible Profiles (we've actually been experimenting with this already).
</li>
 	<li style="font-weight: 400;">Threading.
</li>
 	<li style="font-weight: 400;">Landing the Riot/Android rewrite
</li>
 	<li style="font-weight: 400;">Scaling synapse via sharding the master process
</li>
 	<li style="font-weight: 400;">Bridge UI for discovery of users/rooms and bridge status
</li>
 	<li style="font-weight: 400;">Considering whether to do a similar overhaul of Riot/iOS
</li>
 	<li style="font-weight: 400;">Bandwidth-efficient transports
</li>
 	<li style="font-weight: 400;">Bandwidth-efficient routing
</li>
 	<li style="font-weight: 400;">Getting Dendrite to production.
</li>
 	<li style="font-weight: 400;">Inline widgets (polls etc)
</li>
</ul>
<ul>
 	<li style="font-weight: 400;">Improving VoIP over Matrix.
</li>
</ul>
<ul>
 	<li style="font-weight: 400;">Adding more bridges, and improving the current ones..
</li>
 	<li style="font-weight: 400;">Account portability
</li>
 	<li style="font-weight: 400;">Replacing MXIDs with public keys
</li>
</ul>
In the longer term, options include:
<ul>
 	<li style="font-weight: 400;">Shared-code cross-platform client SDKs (e.g. sharing a native core library between matrix-{'{'}js,ios,android{'}'}-sdk)
</li>
 	<li style="font-weight: 400;">Matrix daemons (e.g. running an always-on client as a background process in your OS which apps can connect to via a lightweight CS API)
</li>
 	<li style="font-weight: 400;">Push notifications via Matrix (using a daemon-style architecture)
</li>
 	<li style="font-weight: 400;">Clientside homeservers (i.e. p2p matrix) - e.g. compiling Dendrite to WASM and running it in a service worker.
</li>
 	<li style="font-weight: 400;">Experimenting with MLS for E2E Encryption
</li>
 	<li style="font-weight: 400;">Storing and querying more generic data structures in Matrix (e.g. object trees; scene graphs)
</li>
 	<li style="font-weight: 400;">Alternate use cases for VR, IoT, etc.
</li>
</ul>
Obviously we're not remotely going to do all of that in 2019, but this serves to give a taste of the possibilities on the menu post-1.0; we'll endeavour to publish a more solid roadmap when we get to that point.
<p>And on that note, it's time to call this blogpost to a close. Thanks to anyone who read this far, and thank you, as always, for flying Matrix and continuing to support the project.  The next few months should be particularly fun; all the preparation of 2018 will finally pay off :)</p>
<p>Happy holidays,</p>
<p>Matthew, Amandine &amp; the whole Matrix.org team.</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2018&#x2F;12&#x2F;21&#x2F;porting-synapse-to-python-3&#x2F;" title="Porting Synapse to Python 3">Porting Synapse to Python 3</a></h1>
            <span>
                21.12.2018 00:00
                —
                <a href="/category/tech">
                    Tech
                </a>
                —
                <a href="/author/neil-johnson">
                    Neil Johnson
                </a>
            </span>
            
        </header>
        <div>
            <p>Matrix's reference homeserver, Synapse, is written in Python and uses the Twisted networking framework to power its bitslinging across the Internet. The Python version used has been strictly Python 2.7, the last supported version of Python 2, but as of this week that changes! Since Twisted and our other upstream dependencies now support the newest version of Python, Python 3, we are now able to finish the jump and port Synapse to use it by default. The port has been done in a backwards compatible way, written in a subset of Python that is usable in both Python 2 and Python 3, meaning your existing Synapse installs still work on Python 2, while preparing us for a Python 3 future.</p>
<h2 id="why-port">Why port?</h2>
<p>Porting Synapse to Python 3 prepares Synapse for a post-Python 2 world, currently scheduled for 2020. After the 1st of January in 2020, Python 2 will no longer be supported by the core Python developers and no bugfixes (even critical security ones) will be issued. As the security of software depends very much on the runtime and libraries it is running on top of, this means that by then all Python 2 software in use should have moved to Python 3 or other runtimes.</p>
<p>The Python 3 port has benefits other than just preparing for the End of Life of Python 2.7. Successive versions of Python 3 have improved the standard library, provided newer and clearer syntax for asynchronous code, added opt-in static typing to reduce bugs, and contained incremental performance and memory management improvements. These features, once Synapse stops supporting Python 2, can then be fully utilised to make Synapse's codebase clearer and more performant. One bonus that we get immediately, though, is Python 3's memory compaction of Unicode strings. Rather than storing as UCS-2/UTF-16 or UCS-4/UTF-32, it will instead store it in the smallest possible representation giving a 50%-75% memory improvement for strings only containing Latin-1 characters, such as nearly all dictionary keys, hashes, IDs, and a large proportion of messages being processed from English speaking countries. Non-English text will also see a memory improvement, as it can be commonly stored in only two bytes instead of the four in a UCS-4 “wide” Python 2 build.</p>
<p><i>Editor's note: If you were wondering how this fits in with Dendrite (the next-gen golang homeserver): our plan is to use Synapse as the reference homeserver for all the current work going on with landing a 1.0 release of the Matrix spec: it makes no sense to try to iterate and converge on 1.0 on both Synapse and Dendrite in parallel. In order to prove that the 1.0 spec is indeed fit for purpose we then also need Synapse to exit beta and hit a 1.0 too, hence the investment to get it there. It's worth noting that over the last year we've been plugging away solidly improving Synapse in general (especially given the increasing number of high-profile deployments out there), so we're committed to getting Synapse to a formal production grade release and supporting it in the long term. Meanwhile, Dendrite development is still progressing - currently acting as a place to experiment with more radical blue-sky architectural changes, especially in low-footprint or even clientside homeservers. We expect it to catch up with Synapse once 1.0 is out the door; and meanwhile Synapse is increasingly benefiting from performance work inspired by Dendrite.
</i></p>
<h2 id="when-will-the-port-be-released">When will the port be released?</h2>
<p>The port is has been released in a “production ready” form in <a href="/blog/2018/12/20/synapse-0-34-0-released/">Synapse 0.34.0</a>, supporting Python 3.5, 3.6, and 3.7. This will work on installations with and without workers.</p>
<h2 id="what-s-it-like-in-the-real-world">What's it like in the real world?</h2>
<p>Beta testers of the Python 3 port have reported lower memory usage, including lower memory “spikes” and slower memory growth. You can see this demonstrated on matrix.org:</p>
<p><a href="/blog/wp-content/uploads/2018/12/image3.png"><img class="alignnone size-large wp-image-3830" src="/blog/wp-content/uploads/2018/12/image3-1024x223.png" alt="" width="1024" height="223" /></a></p>
<p>See 10/15, ~20:00 for the Python 3 migration. This is on some of the Synchrotrons on matrix.org.</p>
<p><a href="/blog/wp-content/uploads/2018/12/image1.png"><img class="alignnone size-large wp-image-3824" src="/blog/wp-content/uploads/2018/12/image1-1024x237.png" alt="" width="1024" height="237" /></a></p>
<p>See ~11/8 for the Python 3 migration. This is on the Synapse master on matrix.org.</p>
<p>We have also noticed some better CPU utilisation:</p>
<p><span style="font-weight: 400;"><a href="/blog/wp-content/uploads/2018/12/image2.png"><img class="alignnone size-large wp-image-3822" src="/blog/wp-content/uploads/2018/12/image2-1024x296.png" alt="" width="1024" height="296" /></a>
</span>
See 21:30 for the migration of federation reader 1, and 21:55 for the others. The federation reader is a particular pathological case, where the replacement of lists with iterators internally on Python 3 has given us some big boosts.</p>
<p><a href="/blog/wp-content/uploads/2018/12/image4.png"><img class="alignnone size-large wp-image-3829" src="/blog/wp-content/uploads/2018/12/image4-1024x296.png" alt="" width="1024" height="296" /></a></p>
<p>See 10/15, 4:00.The CPU utilisation has gone down on synchrotron 1 after the Python 3 migration, but not as dramatically as the federation reader. Synchrotron 3 was migrated a few days later.</p>
<p>As some extra data-points, my personal HS consumes about 300MB now at initial start, and grows to approximately 800MB -- under Python 2 the growth would be near-immediate to roughly 1.4GB.</p>
<h2 id="where-to-from-here">Where to from here?</h2>
<p>Python 2 is still a supported platform for running Synapse for the time being. We plan on ending mainstream support on 1st April 2019, where upon Python 3.5+ will be the only officially supported platform. Additionally, we will give notice ahead of time once we are ready to remove Python 2.7 compatibility from the codebase (which will be no sooner than 1st April). Although slightly inconvenient, we hope that this gives our users and integrators adequate time to migrate, whilst giving us the flexibility to use modern Python features and make Synapse a better piece of software to help power the Matrix community.</p>
<h2 id="how-can-i-try-it">How can I try it?</h2>
<p>The port is compatible with existing homeservers and configurations, so if you install Synapse inside a Python 3 virtualenv, you can run it from there. Of course, this differs based on your installation method, operating system, and what version of Python 3 you wish to use. Full upgrade notes live <a href="https://github.com/matrix-org/synapse/blob/release-v0.34.0/UPGRADE.rst#upgrading-to-v0340">here</a> but if you're having problems or want to discuss specific packagings of Synapse please come ask in <a href="https://matrix.to/#/#synapse:matrix.org">#synapse:matrix.org</a>.</p>
<h2 id="thanks">Thanks</h2>
<p>Many thanks go to fellow Synapse developers Erik and Rich for code review, as well as community contributors such as notafile and krombel for laying the foundations many months ago allowing this port to happen. Without them, this wouldn't have happened.</p>
<p>Happy Matrixing,</p>
<p>Amber Brown (hawkowl)</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2018&#x2F;12&#x2F;21&#x2F;this-week-in-matrix-2018-12-21&#x2F;" title="This Week in Matrix 2018-12-21">This Week in Matrix 2018-12-21</a></h1>
            <span>
                21.12.2018 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="matrix-live-half-shot-talks-bridges-and-working-on-libpurple-bridging-to-matrix">Matrix Live: Half-Shot talks bridges, and working on libpurple bridging to Matrix</h2>
<p style="text-align: left;">You may have seen that <a href="https://matrix.to/#/@Half-Shot:half-shot.uk">Half-Shot</a> been working fearlessly and tirelessly on bridges for many, many months. In this episode of Matrix Live Half-Shot chats with Matthew about his work, progress and achievements, with a focus on recent <a href="https://github.com/matrix-org/matrix-appservice-purple">matrix-appservice-purple</a> and XMPP work. Audio is not amazing, but worth listening to get acquainted with recent work.</p>
<p style="text-align: center;"><div class="video-container"><iframe src="https://www.youtube.com/embed/B0faoVdw0ak" width="560" height="315" frameBorder="0" allowFullScreen="allowfullscreen"></iframe></div></p>
As a note from <a href="https://matrix.to/#/@Half-Shot:half-shot.uk">Half-Shot</a>:
<blockquote>The <a href="https://github.com/matrix-org/matrix-appservice-purple">matrix-appservice-purple</a> bridge gained a XMPP specific backend for better performance when you want to do just xmpp bridging. It's rather quick right now, and needs dogfooding.</blockquote>
Chat in <a href="https://matrix.to/#/#purple-bridge:half-shot.uk">#purple-bridge:half-shot.uk</a>!
<h2 id="matrix-badges-on-shields-io">Matrix badges on shields.io</h2>
<p><a href="https://matrix.to/#/#twim:matrix.org"><img src="https://img.shields.io/matrix/twim:matrix.org.svg" alt="TWIM" /></a></p>
<p><a href="https://matrix.to/#/@brendan:abolivier.bzh">Brendan</a>:</p>
<blockquote>A couple of weeks ago, <a href="https://github.com/fr1kin">fr1kin</a> PR'd a nice Matrix badge to the <a href="https://shields.io/">Shields</a> project that tells you how many users are in a public room. There were a few issues with it so I PR'd some changes to make the badge more usable, and it's now merged and live (as of yesterday evening), with examples available <a href="https://shields.io/#/examples/chat">here</a>! ?<br />For instance, here's a badge for TWIM: <a href="https://img.shields.io/matrix/twim:matrix.org.svg">https://img.shields.io/matrix/twim:matrix.org.svg</a> ?</blockquote>
<h2 id="spec-update">Spec update</h2>
<p><a href="https://github.com/matrix-org/matrix-doc/pull/1756">New MSC for cross-signing</a>, which has different (hopefully better) semantics from the <a href="https://github.com/matrix-org/matrix-doc/issues/1680">previous cross-signing MSC</a>.</p>
<h2 id="matrix-bot-sdk-support-for-application-services">matrix-bot-sdk support for application services</h2>
<p><a href="https://github.com/turt2live">TravisR</a>, author of <a href="https://github.com/turt2live/matrix-bot-sdk">matrix-bot-sdk</a>:</p>
<blockquote><a href="https://github.com/turt2live/matrix-bot-sdk">matrix-bot-sdk</a> has received early support for application services. Similar to the official <a href="https://github.com/matrix-org/matrix-js-sdk">matrix-js-sdk</a>, the bot-sdk uses an Intent-based model for making bridges easier to write. Check out the simple example <a href="https://github.com/turt2live/matrix-bot-sdk/blob/master/examples/appservice.ts">here</a> for more information on how it works.</blockquote>
<h2 id="koma-library">koma-library</h2>
<p><a href="https://matrix.to/#/@druig:matrix.org">druig</a> continues work on their JavaFX/kotlin client project:<br /><blockquote>The matrix client API implementation in <a href="https://github.com/koma-im/koma">koma</a> is being extracted into <a href="https://github.com/koma-im/koma-library">a new repo</a>, which is going to be a lightweight library for Kotlin.</blockquote></p>
<h2 id="seaglass-now-available-on-homebrew">Seaglass now available on homebrew</h2>
<p><a href="https://matrix.to/#/@aaron:raim.ist">Aaron Raimist</a> reports that Seaglass is available on homebrew for macOS:</p>
<blockquote>Installing Seaglass is now easier than ever. If you already use Homebrew to manage other packages, you can now install Seaglass with a simple <code>brew cask install seaglass</code>.<br /><br />If you don't use Homebrew, you can still <a href="https://github.com/neilalexander/seaglass/releases">download Seaglass from GitHub</a>.</blockquote>
<h2 id="matrix-client-el-is-reborn">matrix-client.el is reborn!</h2>
<p><a href="https://matrix.to/#/@alphapapa:matrix.org">alphapapa</a> reports from a team who have forked and are maintaining a Matrix client for Emacs:<br /><blockquote>Many additions and improvements to matrix-client.el (https://github.com/jgkamat/matrix-client-el) recently, including a &quot;standalone client&quot; mode that launches Emacs to look like this.</blockquote>
Chat in <a href="https://matrix.to/#/#matrix-client-el:matrix.org">#matrix-client-el:matrix.org</a>.</p>
<p><a href="/blog/wp-content/uploads/2018/12/matrix-client.el_.png"><img class="alignnone size-full wp-image-3844" src="/blog/wp-content/uploads/2018/12/matrix-client.el_.png" alt="" width="738" height="426" /></a></p>
<h2 id="matrix-docker-ansible-deploy">matrix-docker-ansible-deploy</h2>
<p><a href="https://matrix.to/#/@slavi:devture.com">Slavi</a>:</p>
<blockquote>the <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy">matrix-docker-ansible-deploy</a> playbook has received some bugfixes and improvements lately. Most importantly, it's now running the freshly-released Synapse 0.34.0 under Python 3, so memory usage should be much better.</blockquote>
<h2 id="libqmatrixclient-quaternion">libQMatrixClient/Quaternion</h2>
<p><a href="https://matrix.to/#/@kitsune:matrix.org">kitsune</a>:<br /><blockquote>I started work on matrix: scheme support in libQMatrixClient/Quaternion. Expect more news on this around New Year.</blockquote></p>
<h2 id="fractal-road-to-4-0">Fractal road to 4.0</h2>
<p>Fresh from their hackfest in Seville last week, <a href="@afranke:matrix.org">Alexandre Franke</a> reports:</p>
<blockquote>The <a href="https://wiki.gnome.org/Apps/Fractal">Fractal</a> crew spent the week chasing last minutes bugs and made two beta releases (3.99.0 and 3.99.1) in preparation for the big new stable release, 4.0, which is right around the corner.</blockquote>
<h2 id="new-rooms-for-space-launches-and-aviation">New Rooms for Space Launches and Aviation</h2>
<p><a href="https://matrix.to/#/@aaron:raim.ist">Aaron Raimist</a> has been creating some new rooms:<br /><blockquote><strong><a href="https://matrix.to/#/#space:im.kabi.tk">#space:im.kabi.tk</a></strong> for anyone interested in space, rocket launches, satellites, etc.<br />Are you wondering what NASA's new Mars Rover is doing? Maybe you live on the west coast of the United States, and you saw that meteor on Wednesday night that came within minutes of a scheduled rocket launch and just after three astronauts left the space station. If any of that sounds interesting to you, feel free to join the room.<br />A Matrix bot is being tested to send updates about upcoming rocket launches to the room.<br /><br /><strong><a href="https://matrix.to/#/#aviation:matrix.org">#aviation:matrix.org</a></strong> for anyone interested in aviation. Whether you are a pilot, someone who visits an airshow once in a while, or if <a href="https://www.youtube.com/watch?v=CXv1j3GbgLk">https://www.youtube.com/watch?v=CXv1j3GbgLk</a> piqued your interest, come join.</blockquote></p>
<h2 id="t2bot-io-upgrade">t2bot.io upgrade</h2>
<p><a href="https://github.com/turt2live">TravisR</a>:</p>
<blockquote>Just a head's up that I've increased the storage capacity of the database. With current projections, the server should be good for another year or two.<br /><br />The database is also 1ms closer to Synapse and has a faster CPU in it. It probably won't make a dent in speed on federation, but it is a step forward.<br /><br />I'll be rolling out python 3 to the homeserver this week too, which should help a little bit.</blockquote><br /><a href="https://riot.im/experimental/#/room/#help:t2bot.io/$154511414912clELm:t2l.io">https://riot.im/experimental/#/room/#help:t2bot.io/$154511414912clELm:t2l.io</a>
<h2 id="fluffychat-8-0-rc-announced">FluffyChat 8.0 RC announced</h2>
<p><a href="https://matrix.to/#/@krille:chat.regionetz.net">Krille</a> and his Ubuntu Touch fans are looking forward to FluffyChat 8.0:<br /><blockquote>Hey guys, in order to release the FluffyChat 8.0 Christmas Edition, the <a href="https://github.com/ChristianPauly/fluffychat">FluffyChat</a> 8.0 release candidate is ready for you! :-)<br />Also the weblate translations are ready: <a href="https://hosted.weblate.org/projects/fluffychat/">https://hosted.weblate.org/projects/fluffychat/</a></blockquote></p>
<h2 id="riot-ios">Riot iOS</h2>
<p>From the Riot iOS team:</p>
<ul>
 	<li>We have fixed and improved some e2e stuff.</li>
 	<li>Back to reskin. We start to implement e2e backup screens.</li>
</ul>
<h2 id="riot-android">Riot Android</h2>
<p>From the Riot Android team:</p>
<ul>
 	<li>New screen to troubleshoot notification issue has been merged on <code>/develop</code>.</li>
 	<li>Splitting current Android SDK to separate crypto part is on it's way. We're doing this in order to be able to integrate crypto faster in the Riot reboot.</li>
</ul>
<h2 id="synapse">Synapse</h2>
<p>Neil from <a href="https://github.com/matrix-org/synapse/">Synapse</a> reports:</p>
<blockquote>We released <a href="https://github.com/matrix-org/synapse/releases/tag/v0.34.0">0.34.0</a>! This release recommends Python 3 for production and brings with it huge performance improvements. If you've been putting upgrading off upgrading your Synapse, now is the time to do so. For more details <a href="/blog/2018/12/21/porting-synapse-to-python-3/">here is a post</a> that explains what you should expect and a <a href="https://www.youtube.com/watch?v=Ad3oqEo5leM">recent Matrix Live interviews</a> Amber (hawkowl) on the subject.<br /><br />Aside from that we are working furiously towards federation R0 and have a bunch of MSCs to get us ever closer. You can <a href="https://github.com/orgs/matrix-org/projects/2">track our progress here</a>.</blockquote><br /><a href="https://matrix.to/#/@andrewsh:matrix.org">andrewsh</a> notes that 0.34.0 is also available in the Debian repos:<br /><blockquote>Synapse 0.34.0~rc2 in Debian since Tuesday, 0.34.0 uploaded today; both use Python 3 only</blockquote>
<h2 id="dendrite">Dendrite</h2>
<p><a href="https://matrix.to/#/@brendan:abolivier.bzh">Brendan</a> reports:</p>
<blockquote>Dendrite's internal audit is progressing very well and is getting very close to its end.<br />What's left to do for me is check the implementation status of a few Matrix features, and translate those into tagged GitHub issues so that everyone can have as clear of a view as possible on what's left to work on.<br />I'm on holiday all of next week, but hopefully will have some good news about that the following week.</blockquote>
<h2 id="that-really-is-it-for-now">That really is it for now</h2>
<p>Did you get to the end? What was your favourite section? Come tell us in <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a>! Do you have your own update you'd like to add? Same place, come chat in <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a>.</p>
<p>Next week is various things. It's Christmas, which means there will be more hacking and coding happening than usual I expect! It's also <a href="https://events.ccc.de/congress/2018/wiki/index.php/Main_Page">35c3</a>, which I will be attending, and might affect scheduling next week. Stay tuned in <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> for news, and come join us in <a href="https://matrix.to/#/#matrix-35c3:matrix.org">#matrix-35c3:matrix.org</a> if you'll be there and want to meet up!</p>
<p>Merry Christmas!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2018&#x2F;12&#x2F;20&#x2F;synapse-0-34-0-released&#x2F;" title="Synapse 0.34.0 released!">Synapse 0.34.0 released!</a></h1>
            <span>
                20.12.2018 00:00
                —
                <a href="/category/releases">
                    Releases
                </a>
                —
                <a href="/author/neil-johnson">
                    Neil Johnson
                </a>
            </span>
            
        </header>
        <div>
            <p>Folks this is a big day for us at Matrix Towers, because today we release 0.34.0.</p>
<p>The big news for 0.34.0 is that we now <strong>recommend Python 3 for production use</strong> and have been running matrix.org under Python 3 for the past month.</p>
<p>Performance improvements have been marked, in some contexts we have seen 50% reductions in RAM and CPU usage. Here are some illustrative graphs to get you going but look out for a dedicated post delving into much more detail on the port. You can also see a Matrix Live interview with the project lead Amber (hawkowl) <a href="https://www.youtube.com/watch?v=Ad3oqEo5leM">here</a>.</p>
<p><a href="/blog/wp-content/uploads/2018/12/image2.png"><img class="alignnone wp-image-3822 size-large" src="/blog/wp-content/uploads/2018/12/image2-1024x296.png" alt="" width="1024" height="296" /></a></p>
<p>Matrix.org federation reader workers, the big drops signify roll over to python 3</p>
<p><a href="/blog/wp-content/uploads/2018/12/image1.png"><img class="alignnone size-large wp-image-3824" src="/blog/wp-content/uploads/2018/12/image1-1024x237.png" alt="" width="1024" height="237" /></a></p>
<p>Synapse master on matrix.org, again the drop in RAM signifies the roll over to python 3</p>
<p>Many thanks to Amber for leading the effort, Rich and Erik for providing support as well as Notafile and Krombel from the community for pushing this effort right from the early days of the project.</p>
<p>If that wasn't enough, 0.34.0 also all the usual bug fixes and perf improvements. In particular the media repository now no longer fails to decode UTF-8 filenames when downloading remote media and auto joining rooms now work on servers with consent requirements enabled.</p>
<p>As ever, you can get the new update <a href="https://github.com/matrix-org/synapse/releases/tag/v0.34.0">here</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Note, Synapse is now available from PyPI, pick it up <a href="https://pypi.org/project/matrix-synapse/">here</a>. Also, check out our new <a href="/docs/guides/installing-synapse">Synapse installation guide page.</a></p>
<p>In particular, if you want to run Synapse 0.34.0 on Python 3 take a look at the <a href="https://github.com/matrix-org/synapse/blob/release-v0.34.0/UPGRADE.rst#upgrading-to-v0340">upgrade notes</a>.</p>
<h3 id="synapse-0-34-0-changelog">Synapse 0.34.0 changelog</h3>
<p>Synapse 0.34.0 is the first release to fully support Python 3. Synapse will now run on Python versions 3.5 or 3.6 (as well as 2.7). Support for Python 3.7 remains experimental.</p>
<p>We recommend upgrading to Python 3, but make sure to read the <a href="https://github.com/matrix-org/synapse/blob/release-v0.34.0/UPGRADE.rst#upgrading-to-v0340">upgrade notes</a> when doing so.</p>
<h4 id="features">Features</h4>
<ul>
 	<li>Add 'sandbox' to CSP for media reprository (<a href="https://github.com/matrix-org/synapse/issues/4284" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4284/hovercard" aria-describedby="hovercard-aria-description">#4284</a>)</li>
 	<li>Make the new landing page prettier. (<a href="https://github.com/matrix-org/synapse/issues/4294" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4294/hovercard" aria-describedby="hovercard-aria-description">#4294</a>)</li>
 	<li>Fix deleting E2E room keys when using old SQLite versions. (<a href="https://github.com/matrix-org/synapse/issues/4295" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4295/hovercard" aria-describedby="hovercard-aria-description">#4295</a>)</li>
 	<li>Add a welcome page for the client API port. Credit to <a class="user-mention" href="https://github.com/krombel" data-hovercard-type="user" data-hovercard-url="/hovercards?user_id=11167142" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" aria-describedby="hovercard-aria-description">@krombel</a>! (<a href="https://github.com/matrix-org/synapse/issues/4289" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4289/hovercard" aria-describedby="hovercard-aria-description">#4289</a>)</li>
 	<li>Remove Matrix console from the default distribution (<a href="https://github.com/matrix-org/synapse/issues/4290" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4290/hovercard" aria-describedby="hovercard-aria-description">#4290</a>)</li>
 	<li>Add option to track MAU stats (but not limit people) (<a href="https://github.com/matrix-org/synapse/issues/3830" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/3830/hovercard" aria-describedby="hovercard-aria-description">#3830</a>)</li>
 	<li>Add an option to enable recording IPs for appservice users (<a href="https://github.com/matrix-org/synapse/issues/3831" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/3831/hovercard" aria-describedby="hovercard-aria-description">#3831</a>)</li>
 	<li>Rename login type <code>m.login.cas</code> to <code>m.login.sso</code> (<a href="https://github.com/matrix-org/synapse/issues/4220" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4220/hovercard" aria-describedby="hovercard-aria-description">#4220</a>)</li>
 	<li>Add an option to disable search for homeservers that may not be interested in it. (<a href="https://github.com/matrix-org/synapse/issues/4230" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4230/hovercard" aria-describedby="hovercard-aria-description">#4230</a>)</li>
</ul>
<h4 id="bugfixes">Bugfixes</h4>
<ul>
 	<li>Pushrules can now again be made with non-ASCII rule IDs. (<a href="https://github.com/matrix-org/synapse/issues/4165" data-hovercard-type="issue" data-hovercard-url="/matrix-org/synapse/issues/4165/hovercard" aria-describedby="hovercard-aria-description">#4165</a>)</li>
 	<li>The media repository now no longer fails to decode UTF-8 filenames when downloading remote media. (<a href="https://github.com/matrix-org/synapse/issues/4176" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4176/hovercard" aria-describedby="hovercard-aria-description">#4176</a>)</li>
 	<li>URL previews now correctly decode non-UTF-8 text if the header contains a <code>&lt;meta http-equiv="Content-Type"</code> header. (<a href="https://github.com/matrix-org/synapse/issues/4183" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4183/hovercard" aria-describedby="hovercard-aria-description">#4183</a>)</li>
 	<li>Fix an issue where public consent URLs had two slashes. (<a href="https://github.com/matrix-org/synapse/issues/4192" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4192/hovercard" aria-describedby="hovercard-aria-description">#4192</a>)</li>
 	<li>Fallback auth now accepts the session parameter on Python 3. (<a href="https://github.com/matrix-org/synapse/issues/4197" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4197/hovercard" aria-describedby="hovercard-aria-description">#4197</a>)</li>
 	<li>Remove riot.im from the list of trusted Identity Servers in the default configuration (<a href="https://github.com/matrix-org/synapse/issues/4207" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4207/hovercard" aria-describedby="hovercard-aria-description">#4207</a>)</li>
 	<li>fix start up failure when mau_limit_reserved_threepids set and db is postgres (<a href="https://github.com/matrix-org/synapse/issues/4211" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4211/hovercard" aria-describedby="hovercard-aria-description">#4211</a>)</li>
 	<li>Fix auto join failures for servers that require user consent (<a href="https://github.com/matrix-org/synapse/issues/4223" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4223/hovercard" aria-describedby="hovercard-aria-description">#4223</a>)</li>
 	<li>Fix exception caused by non-ascii event IDs (<a href="https://github.com/matrix-org/synapse/issues/4241" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4241/hovercard" aria-describedby="hovercard-aria-description">#4241</a>)</li>
 	<li>Pushers can now be unsubscribed from on Python 3. (<a href="https://github.com/matrix-org/synapse/issues/4250" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4250/hovercard" aria-describedby="hovercard-aria-description">#4250</a>)</li>
 	<li>Fix UnicodeDecodeError when postgres is configured to give non-English errors (<a href="https://github.com/matrix-org/synapse/issues/4253" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4253/hovercard" aria-describedby="hovercard-aria-description">#4253</a>)</li>
</ul>
<h4 id="internal-changes">Internal Changes</h4>
<ul>
 	<li>Debian packages utilising a virtualenv with bundled dependencies can now be built. (<a href="https://github.com/matrix-org/synapse/issues/4212" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4212/hovercard" aria-describedby="hovercard-aria-description">#4212</a>)</li>
 	<li>Disable pager when running git-show in CI (<a href="https://github.com/matrix-org/synapse/issues/4291" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4291/hovercard" aria-describedby="hovercard-aria-description">#4291</a>)</li>
 	<li>A coveragerc file has been added. (<a href="https://github.com/matrix-org/synapse/issues/4180" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4180/hovercard" aria-describedby="hovercard-aria-description">#4180</a>)</li>
 	<li>Add a GitHub pull request template and add multiple issue templates (<a href="https://github.com/matrix-org/synapse/issues/4182" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4182/hovercard" aria-describedby="hovercard-aria-description">#4182</a>)</li>
 	<li>Update README to reflect the fact that <a href="https://github.com/matrix-org/synapse/issues/1491" data-hovercard-type="issue" data-hovercard-url="/matrix-org/synapse/issues/1491/hovercard" aria-describedby="hovercard-aria-description">#1491</a> is fixed (<a href="https://github.com/matrix-org/synapse/issues/4188" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4188/hovercard" aria-describedby="hovercard-aria-description">#4188</a>)</li>
 	<li>Run the AS senders as background processes to fix warnings (<a href="https://github.com/matrix-org/synapse/issues/4189" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4189/hovercard" aria-describedby="hovercard-aria-description">#4189</a>)</li>
 	<li>Add some diagnostics to the tests to detect logcontext problems (<a href="https://github.com/matrix-org/synapse/issues/4190" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4190/hovercard" aria-describedby="hovercard-aria-description">#4190</a>)</li>
 	<li>Add missing <code>jpeg</code> package prerequisite for OpenBSD in README. (<a href="https://github.com/matrix-org/synapse/issues/4193" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4193/hovercard" aria-describedby="hovercard-aria-description">#4193</a>)</li>
 	<li>Add a note saying you need to manually reclaim disk space after using the Purge History API (<a href="https://github.com/matrix-org/synapse/issues/4200" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4200/hovercard" aria-describedby="hovercard-aria-description">#4200</a>)</li>
 	<li>More logcontext checking in unittests (<a href="https://github.com/matrix-org/synapse/issues/4205" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4205/hovercard" aria-describedby="hovercard-aria-description">#4205</a>)</li>
 	<li>Ignore <code>__pycache__</code> directories in the database schema folder (<a href="https://github.com/matrix-org/synapse/issues/4214" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4214/hovercard" aria-describedby="hovercard-aria-description">#4214</a>)</li>
 	<li>Add note to UPGRADE.rst about removing riot.im from list of trusted identity servers (<a href="https://github.com/matrix-org/synapse/issues/4224" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4224/hovercard" aria-describedby="hovercard-aria-description">#4224</a>)</li>
 	<li>Added automated coverage reporting to CI. (<a href="https://github.com/matrix-org/synapse/issues/4225" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4225/hovercard" aria-describedby="hovercard-aria-description">#4225</a>)</li>
 	<li>Garbage-collect after each unit test to fix logcontext leaks (<a href="https://github.com/matrix-org/synapse/issues/4227" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4227/hovercard" aria-describedby="hovercard-aria-description">#4227</a>)</li>
 	<li>add more detail to logging regarding "More than one row matched" error (<a href="https://github.com/matrix-org/synapse/issues/4234" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4234/hovercard" aria-describedby="hovercard-aria-description">#4234</a>)</li>
 	<li>Drop sent_transactions table (<a href="https://github.com/matrix-org/synapse/issues/4244" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4244/hovercard" aria-describedby="hovercard-aria-description">#4244</a>)</li>
 	<li>Add a basic .editorconfig (<a href="https://github.com/matrix-org/synapse/issues/4257" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4257/hovercard" aria-describedby="hovercard-aria-description">#4257</a>)</li>
 	<li>Update README.rst and UPGRADE.rst for Python 3. (<a href="https://github.com/matrix-org/synapse/issues/4260" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4260/hovercard" aria-describedby="hovercard-aria-description">#4260</a>)</li>
 	<li>Remove obsolete <code>verbose</code> and <code>log_file</code> settings from <code>homeserver.yaml</code> for Docker image. (<a href="https://github.com/matrix-org/synapse/issues/4261" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4261/hovercard" aria-describedby="hovercard-aria-description">#4261</a>)</li>
</ul>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2018&#x2F;12&#x2F;14&#x2F;this-week-in-matrix-2018-12-14&#x2F;" title="This Week in Matrix 2018-12-14">This Week in Matrix 2018-12-14</a></h1>
            <span>
                14.12.2018 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="fractal-hackfest">Fractal Hackfest</h2>
<p>Developers and creators of <a href="https://wiki.gnome.org/Apps/Fractal">Fractal</a>, the GNOME Matrix client, have been holding a <a href="https://wiki.gnome.org/Hackfests/FractalDecember2018">Hackfest this week in Seville</a>. Matthew and I caught up with them on video for Matrix Live this week, and discussed the product improvements they've been making and their plans for the next release (due next week!)</p>
<div class="video-container"><iframe src="https://www.youtube.com/embed/SgyLHi8zZXQ" width="560" height="315" frameBorder="0" allowFullScreen="allowfullscreen"></iframe></div>
<h2 id="matrix-spec">Matrix Spec</h2>
<ul>
 	<li><strong><a href="https://github.com/matrix-org/matrix-doc/issues/1466">MSC1466</a></strong> merged. <a href="https://github.com/matrix-org/matrix-doc/blob/erikj/soft_logout/proposals/1466-soft-logout.md">MSC1466 from Erik describes</a> "Soft Remote Logout", which avoids loss of encryption keys in circumstances of remote logout.</li>
 	<li><strong><a href="https://github.com/matrix-org/matrix-doc/pull/1730">MSC1730</a></strong> entered FCP (<em>final comment period</em>, the last step before being merged.) <a href="https://github.com/matrix-org/matrix-doc/blob/rav/proposal/cs_api_in_login/proposals/1730-cs-api-in-login-response.md">read the proposal</a></li>
</ul>
<h2 id="this-week-in-ruma">This Week in Ruma</h2>
<p>We don't often get to feature news from <a href="https://github.com/ruma/ruma">Ruma</a>, but this week there is an updated <a href="https://www.ruma.io/news/this-week-in-ruma-2018-12-09/">This Week in Ruma</a>.</p>
<blockquote>Ruma is not dead, however, and small improvements have continued over the last year. The Matrix spec has advanced quite a bit and many of the blocking issues for Ruma have been resolved. Rust's maturity is another story. async/await is still under development and this is the most significant blocking issue to progress on Ruma.</blockquote>
<h2 id="maubot-new-tooling">maubot new tooling</h2>
<p><a href="https://matrix.to/#/@tulir:maunium.net">tulir</a> has been working on tooling for <a href="https://github.com/maubot/maubot">maubot</a>:</p>
<blockquote>maubot got a command-line tool for building plugins and managing maubot instances. I also added some server-side stuff for easy registration of accounts in the management interface using synapse shared secrets, but the UI for that isn't ready.
Also, I'm planning on adding some kind of small Matrix client in the management interface for manually managing the added bot clients. That might lead to a separate library that could be used in other projects or embedded in websites.</blockquote>
<h2 id="mxisd-v1-2-1-released-updating-recommended">mxisd v1.2.1 released, updating recommended</h2>
<p><a href="https://matrix.to/#/@max:kamax.io">Max</a> with a new release of <a href="https://github.com/kamax-matrix/mxisd">mxisd</a>:</p>
<blockquote><a href="https://github.com/kamax-matrix/mxisd">mxisd</a> hits <a href="https://github.com/kamax-matrix/mxisd/releases/tag/v1.2.1">v1.2.1</a> with a new maintenance release, fixing bugs and regressions from v1.2.0. Updating to v1.2.1 is strongly encouraged as v1.3.x will contain breaking changes and will not be a straight-forward update like v1.x has been until now.</blockquote>
<h2 id="clients">Clients</h2>
<h3 id="lazy-loading-lands-in-qmatrixclient">Lazy-loading lands in QMatrixClient</h3>
<p><a href="https://matrix.to/#/@kitsune:matrix.org">kitsune</a> has reported that lazy-loading, a Matrix feature that entails only loading room member details as needed, is now in <a href="https://github.com/QMatrixClient/libqmatrixclient">libQMatrixClient</a> master.</p>
<blockquote>reference implementation in Quaternion will follow up</blockquote>
<a href="https://matrix.to/#/@bhat:encom.eu.org">Black Hat</a> has been testing the feature in <a href="https://gitlab.com/spectral-im/spectral">Spectral</a>, which uses the library, and says there is a 30%-50% reduction in RAM usage at startup.
<h3 id="riot-web-progress-on-experimental-and-v0-17-8-released">Riot Web progress on <code>/experimental</code> and v0.17.8 released</h3>
<p>Bruno has been working on <a href="https://riot.im/experimental"><code>/experimental</code></a>, and I recommend taking a look at the progress there! The next version of Riot Web is closer than ever.</p>
<blockquote>Improved read markers now available on /experimental, needs further tweaking though. Brought back community UX on redesign, other small improvements.</blockquote>
<a href="https://github.com/vector-im/riot-web/releases">v0.17.8 was released</a> with several bugfixes and improvements.
<h3 id="riot-ios">Riot iOS</h3>
<p>Release made with these notes:</p>
<blockquote>This new version supports the consent of matrix servers terms of service (including GDPR) in the registration flow.
It also contains fixes for the "Empty room" bug, the registration issue on iOS 10, etc.</blockquote>
Get more information:
<ul>
 	<li><a href="https://github.com/vector-im/riot-ios/releases/tag/v0.7.8">https://github.com/vector-im/riot-ios/releases/tag/v0.7.8</a></li>
 	<li><a href="https://github.com/matrix-org/matrix-ios-sdk/releases/tag/v0.12.0">https://github.com/matrix-org/matrix-ios-sdk/releases/tag/v0.12.0</a></li>
 	<li><a href="https://github.com/matrix-org/matrix-ios-kit/releases/tag/v0.9.1">https://github.com/matrix-org/matrix-ios-kit/releases/tag/v0.9.1</a></li>
</ul>
<h3 id="riot-android">Riot Android</h3>
<p>Release made:</p>
<blockquote>This new version supports the consent of matrix servers terms of service (including GDPR) in the registration flow.
Many bugfixes
SDK contains KeyBackup</blockquote>
Get more information:
<ul>
 	<li><a href="https://github.com/vector-im/riot-android/releases/tag/v0.8.20">https://github.com/vector-im/riot-android/releases/tag/v0.8.20</a></li>
 	<li><a href="https://github.com/matrix-org/matrix-android-sdk/releases/tag/v0.9.14">https://github.com/matrix-org/matrix-android-sdk/releases/tag/v0.9.14</a></li>
</ul>
<h2 id="servers">Servers</h2>
<h3 id="synapse">Synapse</h3>
<p>A lot of focus on getting debian packages ready for python 3 - this is a blocker for our official python 3 release 0.34.0. Aside from that, finalising some outstanding state resolution behaviour (<a href="https://github.com/matrix-org/matrix-doc/pull/1693">https://github.com/matrix-org/matrix-doc/pull/1693</a>) and dusting off event ids as hashes (<a href="https://github.com/matrix-org/matrix-doc/issues/1127">https://github.com/matrix-org/matrix-doc/issues/1127</a>.)</p>
<h3 id="dendrite">Dendrite</h3>
<p><a href="https://matrix.to/#/@brendan:abolivier.bzh">Brendan</a>:</p>
<blockquote>My internal audit of Dendrite is continuing, drawing a more and more precise picture of what's left to fix and implement. I aim to have it over by the end of the year, or the very early days of 2019 at the latest. Folks can track its progress through <a href="https://cloud.abolivier.bzh/index.php/s/qXi2KFjCQk2c6eG">https://cloud.abolivier.bzh/index.php/s/qXi2KFjCQk2c6eG</a></blockquote>
<h3 id="modular-im-now-has-extra-large-instances-available">modular.im now has <strong>Extra-Large</strong> instances available</h3>
<p>Due to demand, <a href="https://www.modular.im/">modular.im Hosted Homeservers</a> now has Extra-Large instances available. If you need to service 1,000+ users on a Matrix homeserver, this is the product for you!</p>
<p><a href="/blog/wp-content/uploads/2018/12/modular-extra-large.png"><img class="alignnone size-full wp-image-3808" src="/blog/wp-content/uploads/2018/12/modular-extra-large.png" alt="" width="833" height="515" /></a></p>
<h3 id="linuxgaming-life-homeserver-is-the-number-one-matrix-homeserver-focused-on-linux-gaming">linuxgaming.life homeserver is the number one Matrix homeserver focused on Linux gaming</h3>
<p><a href="https://matrix.to/#/@swedneck:swedneck.xyz">swedneck</a> has continues his work on <a href="https://linuxgaming.life">linuxgaming.life</a>:</p>
<blockquote>I've added some bots, health monitoring, and dimension integration manager to linuxgaming.life, and made the website dark.</blockquote>
The homeserver is open for new registrations.
<h2 id="that-s-all-i-know">That's all I know!</h2>
<p>If you'd like see your Matrix-related project featured in this blog post, come chat to us in <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a>, and we'll see you next week!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2018&#x2F;12&#x2F;07&#x2F;this-week-in-matrix-2018-12-07&#x2F;" title="This Week in Matrix 2018-12-07">This Week in Matrix 2018-12-07</a></h1>
            <span>
                07.12.2018 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="matrix-live-s03e06">Matrix Live S03E06</h2>
<div class="video-container"><iframe src="https://www.youtube.com/embed/BOyKC-nf-KE" width="560" height="315" frameBorder="0" allowFullScreen="allowfullscreen"></iframe></div>
<p>In which Matthew &amp; Amandine discuss The Matrix.org Foundation, go-live for the French Government deployment for Matrix, and some exciting random diversions into post-1.0 Matrix features which should land once once 1.0 is out the door!</p>
<h2 id="purism-sponsoring-fractal-development">Purism sponsoring Fractal development</h2>
<blockquote class="twitter-tweet" data-lang="en">
<p dir="ltr" lang="en">We are proudly sponsoring the work of Julian Sparber on Fractal, the <a href="https://twitter.com/matrixdotorg?ref_src=twsrc%5Etfw">@matrixdotorg</a> client for GNOME. Read his latest update - <a href="https://t.co/q4ubjzETxC">https://t.co/q4ubjzETxC</a> <a href="https://twitter.com/hashtag/LibreDesktop?src=hash&amp;ref_src=twsrc%5Etfw">#LibreDesktop</a> <a href="https://twitter.com/hashtag/DemandFreedom?src=hash&amp;ref_src=twsrc%5Etfw">#DemandFreedom</a> <a href="https://twitter.com/hashtag/gnome?src=hash&amp;ref_src=twsrc%5Etfw">#gnome</a></p>
— Purism (@Puri_sm) <a href="https://twitter.com/Puri_sm/status/1070256467091963904?ref_src=twsrc%5Etfw">December 5, 2018</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>Purism announced they are sponsoring <a href="https://wiki.gnome.org/Apps/Fractal">Fractal</a> development, starting with <a href="https://matrix.to/#/@iamjsparber:matrix.org">Julian Sparber</a> working last month to improve the message view. You can <a href="https://blogs.gnome.org/jsparber/2018/12/03/better-room-history-in-fractal/">read about his progress here</a>. Highlights:</p>
<blockquote>Before, there was a jarring cut when new messages were loaded, but now you can just scroll upward and older messages are loaded continuously.<br />The part I'm most excited about is the new "new message divider". When the user opens a room they can directly start reading the conversation from the last seen message and they don't need to search for the new message divider. Not only has the UX gotten a lot better, but also the underlying code is much cleaner now.<br />I also spent some time on making message rendering faster. I replaced the RegExp with more efficient code, this made the rendering much faster (from ~10ms to ~ 1ms) for every single message.<br />In summary, all of these things improve Fractal's UX a lot and make it feel more like a modern messaging app.</blockquote>
<h2 id="synapse-0-34-0rc1">Synapse 0.34.0rc1</h2>
<p><a href="https://github.com/matrix-org/synapse/releases/tag/v0.34.0rc1">0.34.0rc1 is out</a> - please test it! 0.34.0 will be the first to officially support python 3. We're still working on the debian packaging but 0.34.0 proper should be out next week.</p>
<h2 id="dendrite">Dendrite</h2>
<p><a href="https://matrix.to/#/@brendan:abolivier.bzh">Brendan</a> has been getting on with Dendrite development:</p>
<blockquote>Started auditing Dendrite's codebase to identify what is left to implement, along with what hasn't been implemented correctly. Still a lot of work left to do on this, but it's looking promising so far.</blockquote>
<h2 id="modular">Modular</h2>
<p>Modular is a Hosted Homeservers product, check out <a href="https://www.modular.im/">modular.im</a>. This week:<br /><blockquote>Matrix -&gt; Matrix account migration tool available at <a href="https://www.modular.im/tools/matrix-migration">https://www.modular.im/tools/matrix-migration</a>. It's still beta, so please test it and let us know if you experience issues.</blockquote></p>
<h2 id="new-homeserver-linuxgaming-life">New Homeserver: <a href="https://linuxgaming.life">linuxgaming.life</a></h2>
<p><a href="https://matrix.to/#/@swedneck:swedneck.xyz">swedneck</a> has set up a new public homeserver at <a href="https://linuxgaming.life">linuxgaming.life</a>! There is also a Riot installation at <a href="https://riot.linuxgaming.life">https://riot.linuxgaming.life</a>, served via IPFS.</p>
<blockquote>Currently working on the website (based on <a href="https://t2bot.io/">t2bot.io</a>, thank you <a href="https://github.com/turt2live">travis</a> for making that <a href="https://github.com/t2bot/t2bot.io">available on github</a>!) and making things nicer in general.<br />I will be adding more bots shortly. Please let <a href="https://matrix.to/#/@swedneck:swedneck.xyz">me</a> know of any issues with the HS or anything surrounding it.</blockquote>
<h2 id="informo">Informo</h2>
<p><a href="https://github.com/Informo">Informo</a> is a project to create a specification and implementation for distributing information and news. This week they have been working on merging changes to the specification:<br /><blockquote>Work on the Informo specifications has slowed down a bit in the last couple of weeks, though since the last update we did manage to get some relatively big SCSs merged into the specs, including <a href="https://github.com/Informo/specs/pull/9">SCS #9</a> (rendered <a href="https://specs.informo.network/information-distribution/article/">here</a>) which specifies how information sources must publish their information through the federation, and <a href="https://github.com/Informo/specs/pull/11">SCS #11</a> (rendered <a href="https://specs.informo.network/information-distribution/source/">here</a>) which describes how sources must register themselves in order to be picked up by clients, and handle localisation. ?<br />There's still a couple of big items to take care of before we can cut a 1.0 release of the Informo specs but this is definitely a huge step towards this goal.</blockquote></p>
<h2 id="minecraft-bridge">Minecraft Bridge</h2>
<p><a href="https://matrix.to/#/@dandellion:dodsorf.as">Dandellion</a>:</p>
<blockquote>I started working on a Minecraft bridge pretty heavily based on Travis's old project, but using Minecraft-protocol instead of mineflayer.<br />You need a bot Minecraft account that can join and idle in the server, it then uses /tellraw to post messages.</blockquote><br /><a href="/blog/wp-content/uploads/2018/12/minecraft.png"><img class="alignnone size-full wp-image-3797" src="/blog/wp-content/uploads/2018/12/minecraft.png" alt="" width="249" height="116" /></a>
<h2 id="libqmatrixclient-0-4-1-released">libQMatrixClient 0.4.1 released</h2>
<p><a href="https://github.com/QMatrixClient/libqmatrixclient">libQMatrixClient</a>, which powers <a href="https://gitlab.com/spectral-im/spectral">Spectral</a> and <a href="https://github.com/QMatrixClient/Quaternion">Quaternion</a> was released by <a href="https://matrix.to/#/@kitsune:matrix.org">kitsune</a>, Lazy Loading coming soon:<br /><blockquote>libQMatrixClient 0.4.1 has been released today, with small fixes in the stable branch. Meanwhile, active work is ongoing on lazy-loading support in the library, with ETA for the feature landing in master being in about a week or so.</blockquote></p>
<h2 id="riot-web">Riot Web</h2>
<ul>
 	<li>Redesign progress: all resizeable sections are now persisted, (slow) progress on improving read markers</li>
 	<li><a href="https://github.com/matrix-org/matrix-react-sdk/pull/2326">Communities and community invitations should be more resilient to errors</a> (on /develop only so far)</li>
</ul>
<h2 id="riot-ios">Riot iOS</h2>
<ul>
 	<li>Reskin still ongoing</li>
 	<li>A new release is coming</li>
 	<li>Less activity because of POSS</li>
</ul>
<h2 id="riot-android">Riot Android</h2>
<ul>
 	<li>A new developer joined us to help maintaining Riot: Valere Fedronic</li>
 	<li>Keys backup PR in review</li>
 	<li>Privacy Terms acceptance in login flow in review</li>
 	<li>FCM issue investigation/troubleshooting by Valere</li>
 	<li>François Off (sick :()</li>
 	<li>New theme is coming soon</li>
</ul>
<h2 id="koma">Koma</h2>
<p><a href="https://matrix.to/#/@druig:matrix.org">druig</a> has been working on <a href="https://github.com/koma-im/koma/">Koma</a>, a JavaFX Matrix client:</p>
<blockquote>This week in koma: implementation of json library switched from runtime reflection to compile-time code generation<br />The matrix api is implemented manually in the project, retrofit and moshi are used to interact with the rest api.</blockquote>
<h2 id="simplematrix">SimpleMatrix</h2>
<p>As we mentioned in TWIM last week, <a href="https://matrix.to/#/@MTRNord:matrix.ffslfl.net">MTRNord</a> has been working on designs for <a href="https://gitlab.com/Nordgedanken/SimpleMatrix">SimpleMatrix</a>, a Matrix client for Android in development. This week he has made a video showcasing the new design.</p>
<div class="video-container"><iframe src="https://www.youtube.com/embed/ci3N9ZSUa6k" width="560" height="315" frameBorder="0" allowFullScreen="allowfullscreen"></iframe></div>
<h2 id="redecentralize-meetup-in-london">Redecentralize meetup in London</h2>
<p>Last night Half-Shot &amp; Neil &amp; Brendan went to see the <a href="https://redecentralize.org/">Redecentralize</a> folk at their meetup:</p>
<blockquote>Beer! And pizza! And also Redecentralize<br />We chatted to a nice bunch of folks both demoing their decentralized projects and talked to the likes of scuttlebutt, BBC, IPFS and more. Was a interesting experience having around 8 minutes to quickly explain to newcomers what Matrix is and why they should use it in a speed dating format. We chatted (and demoed) bridges, <a href="https://riot.im/experimental/">new-riot</a> and generally how it all fits together. There were a lot of very interesting people with different profiles and backgrounds, and diversified questions which lead to a lot of interesting discussions.</blockquote>
<small>Note for the confused: the <em>format of the meetup</em> was comparable to speed dating. There is no suggestion that Matrix should be used at regular speed dating. If you do find <a href="https://github.com/turt2live/matrix-wishlist/issues/108">such a use for Matrix</a>, come tell us in <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a>.
</small>
<h2 id="matrix-wug-x-sampa-to-ipa-bot">matrix-wug, X-SAMPA to IPA bot</h2>
<p><a href="/blog/2018/11/09/this-week-in-matrix-2018-11-09/#xsampatoipabot">Last month</a> <a href="https://matrix.to/#/@dandellion:dodsorf.as">Dandellion</a> introduced a bot designed to convert between formats for pronunciation notation, this week he released the source code: <a href="https://github.com/dali99/matrix-wug">https://github.com/dali99/matrix-wug</a></p>
<h2 id="the-end-of-the-post-and-nearly-the-end-of-2018">The end of the post, and nearly the end of 2018</h2>
<p>This week it has been winter-in-Europe kind of weather, but that's ok, it happens every year. TWIM on the other hand happens <em>every week</em>, so if you have something to share, and would like to share what you've been working on, come chat to us in <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a>.</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2018&#x2F;11&#x2F;30&#x2F;this-week-in-matrix-2018-11-30&#x2F;" title="This Week in Matrix 2018-11-30">This Week in Matrix 2018-11-30</a></h1>
            <span>
                30.11.2018 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <h2 id="porting-to-python-3-matrix-live-s3e5">Porting to Python 3 - Matrix Live S3E5</h2>
<p>Longer than usual episode of Matrix Live this week. Amber talks to Neil about the works she's been doing over the last few months to port Synapse from Python 2 to Python 3. Recommended for anyone who's been following along the progress of Synapse, or who wants a good intro on the benefits of Python 3 over Python 2.</p>
<div class="video-container"><iframe src="https://www.youtube.com/embed/Ad3oqEo5leM" width="560" height="315" frameBorder="0" allowFullScreen="allowfullscreen"></iframe></div>
<h2 id="zerophone">ZeroPhone</h2>
<p>This week we learned about ZeroPhone, a fairly mature project aiming to <a href="https://wiki.zerophone.org/index.php/Main_Page">build a working cellphone on top of a Raspberry Pi Zero</a>.</p>
<blockquote>an open-source smartphone that can be assembled for 50$ in parts. It is Linux-powered, with UI software written in Python.
Currently, ZeroPhone is based on Raspberry Pi Zero, SIM800L GSM modem and 1.3" OLED screen and button interface.</blockquote>
<a href="https://matrix.to/#/@adam:thebeckmeyers.xyz">&amp;Adam</a> was the first to bring it to our attention:
<blockquote>I stumbled across this blog post which mentions a matrix app in a project to create an open, hackable phone out of a raspberry pi. It's old news at this point I guess, but I don't think I've seen it mentioned here, so I thought it might be a neat thing worth featuring: <a href="https://zerophone.github.io/newsletter/ZeroPhone-Weekly-No.-16/">https://zerophone.github.io/newsletter/ZeroPhone-Weekly-No.-16/</a></blockquote>
The creator of the Matrix app, <a href="https://matrix.to/#/@derivmug:matrix.org">derivmug</a> also arrived to tell us about his work:
<blockquote>Hey everyone, I have been suggested to post about the <a href="https://wiki.zerophone.org/index.php/Main_Page">Zerophone project here</a>. I have written a basic matrix client for it. It's basically a simple phone based on a raspberry pi zero, focused on privacy, security and hackability.</blockquote>
The client app is built using the <a href="https://github.com/matrix-org/matrix-python-sdk">matrix-python-sdk</a>, I'm also hoping to chat to <a href="https://matrix.to/#/@derivmug:matrix.org">derivmug</a> as part of a future Matrix Live. <a href="https://github.com/ZeroPhone/ZPUI/tree/devel/apps/matrix">Take a look at the code here</a>.
<p>Just to prove it's running on real hardware!</p>
<p><a href="/blog/wp-content/uploads/2018/11/zerophone.jpg"><img class="alignnone size-large wp-image-3789" src="/blog/wp-content/uploads/2018/11/zerophone-1024x768.jpg" alt="" width="1024" height="768" /></a></p>
<h2 id="spec-foundation">Spec / Foundation</h2>
<ul>
 	<li>Work continues on MSC1730 - Mechanism for redirecting to an alternative server during login <a href="https://github.com/matrix-org/matrix-doc/pull/1730">https://github.com/matrix-org/matrix-doc/pull/1730</a></li>
 	<li>Foundation: Working with the Foundation lawyers on the CIC37 to register the Foundation as a Community Interest Company proper</li>
</ul>
<h2 id="the-federation-the-federation-info">The Federation (the-federation.info)</h2>
<p><a href="https://matrix.to/#/@jaywink:feneas.org">Jason Robinson</a> is passionate about Federated technology, and has been working on his site at <a href="https://the-federation.info/">https://the-federation.info/</a> for some time. He recently added Matrix to the list of protocols he scrapes and lists:</p>
<blockquote>Matrix (or more specifically, Synapse) servers are now visible on the The Federation info website at <a href="https://the-federation.info/matrix%7Csynapse">https://the-federation.info/matrix%7Csynapse</a>. The website collects lists of servers for various federation protocols (like Matrix, ActivityPub, Diaspora, etc). If a server outputs usage information, it also shows some historical information for servers and projects. Currently the information available from Synapse on the site is just version, availability of registrations and (obviously) domain name. If you want to register your server, check https://the-federation.info/info for more details. Tips also welcome on how to register other Matrix server projects and how to get more data out of servers.</blockquote>
<h2 id="maubot">maubot</h2>
<p><a href="https://matrix.to/#/@tulir:maunium.net">tulir</a> has continued work on <a href="https://github.com/maubot/maubot">maubot</a>:</p>
<blockquote>
<ul>
 	<li>I made a rss plugin for <a href="https://github.com/maubot/maubot">maubot</a> and added a fancy log viewer in the maubot management UI.</li>
 	<li><a href="https://github.com/tulir/mautrix-telegram">mautrix-telegram</a> 0.4.0 was released, though it has no changes since the release candidate. I also copied mautrix-telegram's HTML parser into mautrix-python. Hopefully it's now generic enough so that when mautrix-telegram switches to mautrix-python, it can drop most of the built-in HTML parser.</li>
</ul>
</blockquote>
<h2 id="matrix-appservice-discord">matrix-appservice-discord</h2>
<p>Bridge-of-the-week this week is <a href="https://github.com/Half-Shot/matrix-appservice-discord">matrix-appservice-discord</a>. Anyone in the dev room (<a href="https://matrix.to/#/#discord:half-shot.uk">#discord:half-shot.uk</a>) will be very aware of this as <a href="https://matrix.to/#/@Half-Shot:half-shot.uk">Half-Shot</a> and <a href="https://matrix.to/#/@sorunome:sorunome.de">Sorunome</a> have spent the day testing <code>@room</code> notifications.</p>
<p><a href="https://matrix.to/#/@sorunome:sorunome.de">Sorunome</a>:</p>
<blockquote>matrix-appservice-discord received a lot of work these past days.
Not only the usual small bugfixes, but also some rather big changes:
The parsers for both Discord-&gt;Matrix sending and Matrix-&gt;Discord sending were re-written completely to properly handle things (and thus, at the same time, crunch a bunch of edge-case bugs!).
In addition, the long-awaited highlighting issues with @ everyone and @ here (on discord) and @ room (on matrix) were addressed.
Some of these things are still in PR stage, but expected to be merged soon!</blockquote>
<a href="https://matrix.to/#/@Half-Shot:half-shot.uk">Half-Shot</a> also provided a great screenshot of everything working well:
<p><a href="/blog/wp-content/uploads/2018/11/discord-bridging.png"><img class="alignnone size-large wp-image-3790" src="/blog/wp-content/uploads/2018/11/discord-bridging-1024x618.png" alt="" width="1024" height="618" /></a></p>
<blockquote>is just showing off having IRC+Matrix+Discord+XMPP plugged together. XMPP being the one purple is bridging</blockquote>
<h2 id="matrix-docker-ansible-deploy">matrix-docker-ansible-deploy</h2>
<p><a href="https://matrix.to/#/@slavi:devture.com">Slavi</a> reports that:</p>
<blockquote><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy">matrix-docker-ansible-deploy</a> now supports configuring the <a href="https://github.com/matrix-org/matrix-synapse-ldap3">matrix-synapse-ldap3</a> LDAP auth password provider. Thanks to <a href="https://github.com/tvo6">@tvo6</a> for contributing this!</blockquote>
<h2 id="riot-ios">Riot iOS</h2>
<ul>
 	<li>User Agreement (GDPR) in now part of the registration flow</li>
 	<li>Reskin has started</li>
 	<li>New fixes for unexpected “Empty room”</li>
 	<li>We have PR templates</li>
</ul>
<h2 id="riot-android">Riot Android</h2>
<ul>
 	<li>Realm store for e2e keys has landed</li>
 	<li>Riot reboot: support timelines merge in DB to avoid to trash data as less as possible when navigating through permalinks</li>
 	<li>New settings to choose ringtone for incoming call</li>
 	<li>We have PR templates also</li>
</ul>
<h2 id="simplematrix">SimpleMatrix</h2>
<p><a href="https://matrix.to/#/@MTRNord:matrix.ffslfl.net">MTRNord</a>, is working on the design for SimpleMatrix:</p>
<blockquote>As I currently have less time for actual coding I am planning out the SimpleMatrix Design. You can find the Images of the Design (and a PDF file) at <a href="https://gitlab.com/Nordgedanken/simplematrixredesignimages">https://gitlab.com/Nordgedanken/simplematrixredesignimages</a>
Feel free to also join <a href="https://matrix.to/#/#SimpleMatrix:matrix.ffslfl.net">#SimpleMatrix:matrix.ffslfl.net</a> to give feedback.</blockquote>
<h2 id="synapse">Synapse</h2>
<ul>
 	<li>This week our focus has been to work through some final bugs blocking 0.34.0 which will be our first official python 3 release. Expect a RC rsn. For a sneak peak see this week's Matrix Live video at the top!</li>
</ul>
<h2 id="auf-wiedersehen">Auf Wiedersehen…</h2>
<p>That's it for this week. If you have anything to share with us, and you'd like to be included on the blog, please come talk in <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a>!</p>
<p>In one month from now, many Matrix-acolytes, including myself, will be at <a href="https://events.ccc.de/category/congress/35c3/">35c3</a>. If you'll be there, come chat to us in <a href="https://matrix.to/#/#matrix-35c3:matrix.org">#matrix-35c3:matrix.org</a>!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2018&#x2F;11&#x2F;26&#x2F;this-week-in-matrix-2018-11-26&#x2F;" title="This Week in Matrix 2018-11-26">This Week in Matrix 2018-11-26</a></h1>
            <span>
                26.11.2018 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
            </span>
            
        </header>
        <div>
            <p>A little delay to the release of this week's TWIM, expect us to resume normal schedule on Friday.</p>
<h2 id="spec-foundation">Spec &amp; Foundation</h2>
<ul>
 	<li>Two workshops happened with the Foundation lawyers to work on <a href="https://github.com/matrix-org/matrix-doc/issues/1318">MSC1318</a> - basically fleshing out a proposal for the details of the foundation governance in terms of how the Guardians (i.e. directors of the foundation board) should interact with the Core Spec Team to act as a back-stop - and working out how to port the MSC (once finished) into formal Articles of Association &amp; adjunct documents. We'll get the workshop notes written up as a rewrite of <a href="https://github.com/matrix-org/matrix-doc/issues/1318">MSC1318</a> very shortly.</li>
 	<li>New MSCs from vdH on:
<ul>
 	<li><a href="https://github.com/matrix-org/matrix-doc/pull/1721">MSC1721</a> Rename m.login.cas to m.login.sso</li>
 	<li><a href="https://github.com/matrix-org/matrix-doc/pull/1730">MSC1730</a> Mechanism for redirecting to an alternative server during login</li>
</ul>
</li>
 	<li>…and an alternate to MSC1730: MSC1731 Mechanism for redirecting to an alternative server during SSO login.</li>
 	<li>These three SSO-related MSCs are derived from work being done for a large-scale Matrix deployment for a New Vector customer which we should be able to talk about in future. Improving SSO and other auth/identity work in Matrix is vital, and needless to say we're trying to ensure all the resulting work ends up in the spec to the benefit of the whole ecosystem :)</li>
</ul>
<h2 id="matrix-media-repo">matrix-media-repo</h2>
<p><a href="https://github.com/turt2live">TravisR</a> reports that:</p>
<blockquote><a href="https://github.com/turt2live/matrix-media-repo">matrix-media-repo</a> has received a lot of updates in the last few weeks. Although mostly bug fixes and improvements, there's added support for streaming downloads from remote servers. This is mostly useful when someone posts a 100mb video in a room: previously the media repo would download the entire thing then send it over to you. Now it'll send you the video while it also caches it.</blockquote>
<h2 id="matrix-docker-ansible-deploy">matrix-docker-ansible-deploy</h2>
<p>Big update from <a href="https://matrix.to/#/@slavi:devture.com">Slavi</a> this week:</p>
<blockquote><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy">matrix-docker-ansible-deploy</a> has received some updates in the past few weeks - fixing minor bugs, improving documentation, adding support for additional <a href="https://github.com/matrix-org/synapse">Synapse</a>/<a href="https://github.com/vector-im/riot-web">Riot</a> features, etc.
<p>Most notably (in oldest to most-recent order):</p>
<ul>
 	<li><a href="https://matrix.to/#/@cadair:cadair.com">Cadair</a> heard you like playbooks, so he made it possible to <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/commit/67e2bf285d44c0cb392ba1e28e615053b748c03c">run the playbook from another playbook</a>. Thanks Cadair!</li>
 	<li>some <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#bc-break-renaming-playbook-variables">configuration renaming</a> to make things more consistent. Most people would likely be unaffected.</li>
 	<li>support has been added for <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#postgres-11-support">Postgres 11</a>. Upgrading is possible and easy (as a related success story, Aaron Raimist shared that he recently upgraded his ~40GB database)</li>
 	<li><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#ssl-protocols-used-to-serve-riot-and-synapse">more flexible and more secure-by-default TLS configuration</a>. Thanks Aaron Raimist!</li>
 	<li>the ability to <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#customize-parts-of-riots-config">customize more parts of riot-web</a>. Thanks Aaron Raimist!</li>
 	<li><a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#ability-to-set-synapse-log-levels">better control over Synapse logging</a>. Thanks Aaron Raimist!</li>
 	<li>the ability to <a href="https://github.com/spantaleev/matrix-docker-ansible-deploy/blob/master/CHANGELOG.md#support-for-controlling-public-registration-and-room-auto-join">set up a public server</a> and the ability to make use of Synapse's \\"auto-join\\" feature. Until now, the playbook was only suited for setting up a private server, but with this, setting up public servers is now a possibility. Thanks <a href="https://github.com/anadahz">@anadahz</a></li>
</ul>
<p>I'm quite happy that the playbook is getting more contributions from others now and is improving in such diverse ways!</p>
<p>Additionally, the <a href="https://matrix.to/#/#matrix-docker-ansible-deploy:devture.com">#matrix-docker-ansible-deploy:devture.com</a> support room in Matrix is now bridged to the <code>#matrix-docker-ansible-deploy</code> IRC Freenode channel, making it easier for people to get support when they don't have a working homeserver.</p>
</blockquote>
<h2 id="libqmatrixclient">libQMatrixClient</h2>
<p><a href="https://matrix.to/#/@kitsune:matrix.org">kitsune</a> has been working on <a href="https://github.com/QMatrixClient/libqmatrixclient">libQMatrixClient</a>:</p>
<blockquote>the work on lazy-loading in <a href="https://github.com/QMatrixClient/libqmatrixclient">libQMatrixClient</a> has advanced to the point when client authors may start trying to integrate it in their applications (welcome to <a href="https://matrix.to/#/#qmatrixclient:matrix.org">#qmatrixclient:matrix.org</a> for details - it's a bit rough around the edges yet).</blockquote>
<h2 id="spectral">Spectral</h2>
<p>This week <a href="https://matrix.to/#/@bhat:encom.eu.org">Black Hat</a> has been working to give <a href="https://gitlab.com/spectral-im/spectral">Spectral</a> a more Material design oriented UI.</p>
<p><img src="twim/spectral-material.png" alt="" /><a href="/blog/wp-content/uploads/2018/11/spectral-material.png"><img class="alignnone size-full wp-image-3779" src="/blog/wp-content/uploads/2018/11/spectral-material.png" alt="" width="960" height="674" /></a></p>
<h2 id="smsmatrix">SMSMatrix</h2>
<p><a href="https://matrix.to/#/@swedneck:swedneck.xyz">swedneck</a> reports that:</p>
<blockquote><a href="https://github.com/tijder/SmsMatrix">SMSMatrix</a> now has a room (<a href="https://matrix.to/#/#smsmatrix:matrix.org">#smsmatrix:matrix.org</a>). SMSMatrix is a simple bridge between Matrix and SMS, developed by tijder. You install an android app and register a bot account which will invite you to direct chats under the name of anyone who sends you an SMS, which will then act as a normal SMS conversation.</blockquote>
I had a very quick play with this tool and it works great - a good way to quickly bridge SMS to Matrix.
<p><a href="/blog/wp-content/uploads/2018/11/smsmatrix.png"><img class="alignnone size-full wp-image-3780" src="/blog/wp-content/uploads/2018/11/smsmatrix.png" alt="" width="499" height="288" /></a></p>
<h2 id="riot">Riot</h2>
<p>News from the <a href="https://riot.im/">Riot</a> teams:</p>
<ul>
 	<li><a href="https://github.com/vector-im/riot-android-redesign-PoC/tree/develop">Android rewrite is continuing in Kotlin</a> - lots of infrastructure work over the last few weeks</li>
 	<li>E2E key backups landed in Riot/iOS develop (but no UI yet, as we finalise the implementation first on Riot/Web)</li>
 	<li>E2E key backups also landed in Riot/Web develop (but with placeholder UI)</li>
 	<li>E2E key backups in dev on Riot/Android too (using Realm for storage!)</li>
 	<li>Lots of work from uhoreg on E2E cross-signing
</li>
 	<li>Work on the Riot/Web redesign paused for a week due to other commitments but as of Nov 26th we're back on the case again, making up for lost time.</li>
</ul>
<h2 id="synapse">Synapse</h2>
<p>Most of the focus from the <a href="https://github.com/matrix-org/synapse/">Synapse</a> team this week has been on the new version using Python 3:</p>
<ul>
 	<li>Py3 is finished, other than Debian packages - ongoing debate on whether they should use a virtualenv or depend on debian dependencies, and who should maintain them in a Py3 world…</li>
 	<li>Lots of running around on final Py3 bugs</li>
</ul>
<h2 id="matrix-appservice-purple">matrix-appservice-purple</h2>
<p><a href="https://matrix.to/#/@Half-Shot:half-shot.uk">Half-Shot</a> has continued work on <a href="https://github.com/matrix-org/matrix-appservice-purple">matrix-appservice-purple</a>.</p>
<h2 id="modular">Modular</h2>
<p><a href="https://www.modular.im/">Modular.im</a> provides Hosted Homeservers for Matrix.</p>
<ul>
 	<li>Modular now has full support for Custom DNS (letting you point your own SRV records at it)</li>
 	<li>Lots of work on a migration tool to allow folks to easily shift Matrix accounts between servers, as well as (in future) migrations from HipChat, Slack &amp; others.</li>
</ul>
<h2 id="that-s-it">That's it!</h2>
<p>Apologies for the delayed release this week - please expect an episode of Matrix Live in the week, and back to a normal schedule for TWIM as of Friday. As always, come talk to us in <a href="https://matrix.to/#/#thisweekinmatrix:matrix.org">#thisweekinmatrix:matrix.org</a> and tell us what you've been doing.</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="&#x2F;blog&#x2F;2018&#x2F;11&#x2F;20&#x2F;synapse-0-33-9-is-here&#x2F;" title="Synapse 0.33.9 is here!">Synapse 0.33.9 is here!</a></h1>
            <span>
                20.11.2018 00:00
                —
                <a href="/category/releases">
                    Releases
                </a>
                —
                <a href="/author/neil-johnson">
                    Neil Johnson
                </a>
            </span>
            
        </header>
        <div>
            <p>Well here you are then, the 9th episode in the Synapse 0.33.x series.</p>
<p>Features wise, 0.33.9 contains a change to the way that GDPR consent works under the hood. It is now plumbed in to the login flow (rather than following immediately afterwards) such that it does not inadvertently break on-boarding. This is part of a broader set of changes that span Synapse and Riot to improve initial first impressions of using matrix.</p>
<p>Separately we now have support for room version upgrades which is pre-requisite for rolling out the new state resolution algorithm, come and join us in #teststateresv2:jki.re if you would like to help us test.</p>
<p>Finally we've spent a bunch of time further improving perf especially in and around reducing device ids federation traffic.</p>
<p>I know I say it every time, but full python 3 support is really really close now, matrix.org is now running entirely on py3 and seeing some amazing perf improvements - the remaining blocker is getting py3 deb packages ready and then we'll ship an official python 3 release. There will also be a blog post to explain what we've been up to and what to expect perf wise.</p>
<p>As ever, you can get the new update <a href="https://github.com/matrix-org/synapse/releases/tag/v0.33.9">here</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Note, Synapse is now available from PyPI, pick it up <a href="https://pypi.org/project/matrix-synapse/">here</a>. Also, check out our new <a href="/docs/guides/installing-synapse">Synapse installation guide page.</a></p>
<h3 id="synapse-0-33-9-changelog">Synapse 0.33.9 changelog</h3>
<h4 id="features">Features</h4>
<ul>
 	<li>Include flags to optionally add <code>m.login.terms</code> to the registration flow when consent tracking is enabled. (<a href="https://github.com/matrix-org/synapse/issues/4004" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4004/hovercard" aria-describedby="hovercard-aria-description">#4004</a>, <a href="https://github.com/matrix-org/synapse/issues/4133" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4133/hovercard" aria-describedby="hovercard-aria-description">#4133</a>, <a href="https://github.com/matrix-org/synapse/issues/4142" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4142/hovercard" aria-describedby="hovercard-aria-description">#4142</a>, <a href="https://github.com/matrix-org/synapse/issues/4184" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4184/hovercard" aria-describedby="hovercard-aria-description">#4184</a>)</li>
 	<li>Support for replacing rooms with new ones (<a href="https://github.com/matrix-org/synapse/issues/4091" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4091/hovercard" aria-describedby="hovercard-aria-description">#4091</a>, <a href="https://github.com/matrix-org/synapse/issues/4099" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4099/hovercard" aria-describedby="hovercard-aria-description">#4099</a>, <a href="https://github.com/matrix-org/synapse/issues/4100" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4100/hovercard" aria-describedby="hovercard-aria-description">#4100</a>, <a href="https://github.com/matrix-org/synapse/issues/4101" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4101/hovercard" aria-describedby="hovercard-aria-description">#4101</a>)</li>
</ul>
<h4 id="bugfixes">Bugfixes</h4>
<ul>
 	<li>Fix exceptions when using the email mailer on Python 3. (<a href="https://github.com/matrix-org/synapse/issues/4095" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4095/hovercard" aria-describedby="hovercard-aria-description">#4095</a>)</li>
 	<li>Fix e2e key backup with more than 9 backup versions (<a href="https://github.com/matrix-org/synapse/issues/4113" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4113/hovercard" aria-describedby="hovercard-aria-description">#4113</a>)</li>
 	<li>Searches that request profile info now no longer fail with a 500. (<a href="https://github.com/matrix-org/synapse/issues/4122" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4122/hovercard" aria-describedby="hovercard-aria-description">#4122</a>)</li>
 	<li>fix return code of empty key backups (<a href="https://github.com/matrix-org/synapse/issues/4123" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4123/hovercard" aria-describedby="hovercard-aria-description">#4123</a>)</li>
 	<li>If the typing stream ID goes backwards (as on a worker when the master restarts), the worker's typing handler will no longer erroneously report rooms containing new typing events. (<a href="https://github.com/matrix-org/synapse/issues/4127" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4127/hovercard" aria-describedby="hovercard-aria-description">#4127</a>)</li>
 	<li>Fix table lock of device_lists_remote_cache which could freeze the application (<a href="https://github.com/matrix-org/synapse/issues/4132" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4132/hovercard" aria-describedby="hovercard-aria-description">#4132</a>)</li>
 	<li>Fix exception when using state res v2 algorithm (<a href="https://github.com/matrix-org/synapse/issues/4135" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4135/hovercard" aria-describedby="hovercard-aria-description">#4135</a>)</li>
 	<li>Generating the user consent URI no longer fails on Python 3. (<a href="https://github.com/matrix-org/synapse/issues/4140" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4140/hovercard" aria-describedby="hovercard-aria-description">#4140</a>, <a href="https://github.com/matrix-org/synapse/issues/4163" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4163/hovercard" aria-describedby="hovercard-aria-description">#4163</a>)</li>
 	<li>Loading URL previews from the DB cache on Postgres will no longer cause Unicode type errors when responding to the request, and URL previews will no longer fail if the remote server returns a Content-Type header with the chartype in quotes. (<a href="https://github.com/matrix-org/synapse/issues/4157" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4157/hovercard" aria-describedby="hovercard-aria-description">#4157</a>)</li>
 	<li>The hash_password script now works on Python 3. (<a href="https://github.com/matrix-org/synapse/issues/4161" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4161/hovercard" aria-describedby="hovercard-aria-description">#4161</a>)</li>
 	<li>Fix noop checks when updating device keys, reducing spurious device list update notifications. (<a href="https://github.com/matrix-org/synapse/issues/4164" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4164/hovercard" aria-describedby="hovercard-aria-description">#4164</a>)</li>
</ul>
<h4 id="deprecations-and-removals">Deprecations and Removals</h4>
<ul>
 	<li>The disused and un-specced identicon generator has been removed. (<a href="https://github.com/matrix-org/synapse/issues/4106" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4106/hovercard" aria-describedby="hovercard-aria-description">#4106</a>)</li>
 	<li>The obsolete and non-functional /pull federation endpoint has been removed. (<a href="https://github.com/matrix-org/synapse/issues/4118" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4118/hovercard" aria-describedby="hovercard-aria-description">#4118</a>)</li>
 	<li>The deprecated v1 key exchange endpoints have been removed. (<a href="https://github.com/matrix-org/synapse/issues/4119" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4119/hovercard" aria-describedby="hovercard-aria-description">#4119</a>)</li>
 	<li>Synapse will no longer fetch keys using the fallback deprecated v1 key exchange method and will now always use v2. (<a href="https://github.com/matrix-org/synapse/issues/4120" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4120/hovercard" aria-describedby="hovercard-aria-description">#4120</a>)</li>
</ul>
<h4 id="internal-changes">Internal Changes</h4>
<ul>
 	<li>Fix build of Docker image with docker-compose (<a href="https://github.com/matrix-org/synapse/issues/3778" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/3778/hovercard" aria-describedby="hovercard-aria-description">#3778</a>)</li>
 	<li>Delete unreferenced state groups during history purge (<a href="https://github.com/matrix-org/synapse/issues/4006" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4006/hovercard" aria-describedby="hovercard-aria-description">#4006</a>)</li>
 	<li>The "Received rdata" log messages on workers is now logged at DEBUG, not INFO. (<a href="https://github.com/matrix-org/synapse/issues/4108" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4108/hovercard" aria-describedby="hovercard-aria-description">#4108</a>)</li>
 	<li>Reduce replication traffic for device lists (<a href="https://github.com/matrix-org/synapse/issues/4109" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4109/hovercard" aria-describedby="hovercard-aria-description">#4109</a>)</li>
 	<li>Fix <code>synapse_replication_tcp_protocol_*_commands</code> metric label to be full command name, rather than just the first character (<a href="https://github.com/matrix-org/synapse/issues/4110" data-hovercard-type="issue" data-hovercard-url="/matrix-org/synapse/issues/4110/hovercard" aria-describedby="hovercard-aria-description">#4110</a>)</li>
 	<li>Log some bits about room creation (<a href="https://github.com/matrix-org/synapse/issues/4121" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4121/hovercard" aria-describedby="hovercard-aria-description">#4121</a>)</li>
 	<li>Fix <code>tox</code> failure on old systems (<a href="https://github.com/matrix-org/synapse/issues/4124" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4124/hovercard" aria-describedby="hovercard-aria-description">#4124</a>)</li>
 	<li>Add STATE_V2_TEST room version (<a href="https://github.com/matrix-org/synapse/issues/4128" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4128/hovercard" aria-describedby="hovercard-aria-description">#4128</a>)</li>
 	<li>Clean up event accesses and tests (<a href="https://github.com/matrix-org/synapse/issues/4137" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4137/hovercard" aria-describedby="hovercard-aria-description">#4137</a>)</li>
 	<li>The default logging config will now set an explicit log file encoding of UTF-8. (<a href="https://github.com/matrix-org/synapse/issues/4138" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4138/hovercard" aria-describedby="hovercard-aria-description">#4138</a>)</li>
 	<li>Add helpers functions for getting prev and auth events of an event (<a href="https://github.com/matrix-org/synapse/issues/4139" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4139/hovercard" aria-describedby="hovercard-aria-description">#4139</a>)</li>
 	<li>Add some tests for the HTTP pusher. (<a href="https://github.com/matrix-org/synapse/issues/4149" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4149/hovercard" aria-describedby="hovercard-aria-description">#4149</a>)</li>
 	<li>add purge_history.sh and purge_remote_media.sh scripts to contrib/ (<a href="https://github.com/matrix-org/synapse/issues/4155" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4155/hovercard" aria-describedby="hovercard-aria-description">#4155</a>)</li>
 	<li>HTTP tests have been refactored to contain less boilerplate. (<a href="https://github.com/matrix-org/synapse/issues/4156" data-hovercard-type="pull_request" data-hovercard-url="/matrix-org/synapse/pull/4156/hovercard" aria-describedby="hovercard-aria-description">#4156</a>)</li>
 	<li>Drop incoming events from federation for unknown rooms (<a href="https://github.com/matrix-org/synapse/issues/4165" data-hovercard-type="issue" data-hovercard-url="/matrix-org/synapse/issues/4165/hovercard" aria-describedby="hovercard-aria-description">#4165</a>)</li>
</ul>

        </div>
    </article>
    
    <nav class="pagination">
    <div class="prev">
        
        <a href="&#x2F;blog&#x2F;page&#x2F;40&#x2F;">‹ Previous</a>
        
    </div>
    <span class="page-number">41 / 64</span>
    <div class="prev">
        
        <a href="&#x2F;blog&#x2F;page&#x2F;42&#x2F;">Next ›</a>
        
    </div>
</nav>

</div>
    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="&#x2F;code"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p>© 2022 The Matrix.org Foundation C.I.C.</p>
</footer>

</body>

</html>
