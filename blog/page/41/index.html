<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - Blog</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg" />
    <link rel="stylesheet" href="/style.css" />

    

<meta name="description" content="The Matrix.org Foundation blod is where the Matrix Foundation and Community
post updates on their activity. Every Friday evening they publish This Week In
Matrix, a digest of the past week activity.
">

</head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo-white.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            current">
            Blog
        </a>
        
        
        
        <a href="&#x2F;docs&#x2F;" class="
            ">
            Documentation
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <input id="ecosystem-submenu-checkbox" type="checkbox" class="submenu-checkbox" aria-hidden="true"
                >
            <label for="ecosystem-submenu-checkbox" class="submenu-title">Ecosystem <div class="arrow">
                </div></label>

            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;integrations&#x2F;">Integrations</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        <div class="content">
    
    <article class="post">
        <header>
            <h1><a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;2019&#x2F;05&#x2F;03&#x2F;security-updates-sydent-1-0-3-synapse-0-99-3-1-and-riot-android-0-9-0-0-8-99-0-8-28a&#x2F;" title="Security updates: Sydent 1.0.3, Synapse 0.99.3.1 and Riot&#x2F;Android 0.9.0 &#x2F; 0.8.99 &#x2F; 0.8.28a">Security updates: Sydent 1.0.3, Synapse 0.99.3.1 and Riot&#x2F;Android 0.9.0 &#x2F; 0.8.99 &#x2F; 0.8.28a</a></h1>
            <span>
                03.05.2019 00:00
                —
                <a href="/category/general">
                    General
                </a>
                —
                
                <a href="/author/matthew-hodgson">
                    Matthew Hodgson
                </a>
                
            </span>
            
        </header>
        <div>
            <p>Hi all,</p>
<p>Over the last few weeks we’ve ended up getting a lot of attention from the security research community, which has been incredibly useful and massively appreciated in terms of contributions to improve the security of the reference Matrix implementations.</p>
<p>We’ve also set up an official <a href="https://matrix.org/security-disclosure-policy/">Security Disclosure Policy</a> to explain the process of reporting security issues to us safely via responsible disclosure - including a Hall of Fame to credit those who have done so.  (Please mail <a href="mailto:security@matrix.org">security@matrix.org</a> to remind us if we’ve forgotten you!).</p>
<p>Since we published the Hall of Fame yesterday, we’ve already been getting new entries and so we’re doing a set of security releases today to ensure they are mitigated asap.  Unfortunately the work around this means that we’re running late in publishing the post mortem of the <a href="https://matrix.org/blog/2019/04/11/security-incident">Apr 11 security incident</a> - we are trying to get that out as soon as we can.</p>
<h2 id="sydent-1-0-3">Sydent 1.0.3</h2>
<p>Sydent 1.0.3 has three security fixes:</p>
<ul>
<li>Ensure that authentication tokens are generated using a secure random number generator, ensuring they cannot be predicted by an attacker.  This is an important fix - please update.  Thanks to Enguerran Gillier (<a href="https://twitter.com/@opnsec">@opnsec</a>) for identifying and responsibly disclosing the issue!</li>
<li>Mitigate an HTML injection bug where an invalid room_id could result in malicious HTML being injected into validation emails.  <strong>The fix for this is in the email template itself; you will need to update any customised email templates to be protected.</strong>  Thanks to Enguerran Gillier (<a href="https://twitter.com/@opnsec">@opnsec</a>) for identifying and responsibly disclosing this issue too!</li>
<li>Randomise session_ids to avoid leaking info about the total number of identity validations, and whether a given ID has been validated.  Thanks to <a href="https://fs0c131y.com">@fs0c131y</a> for identifying and responsibly disclosing this one.</li>
</ul>
<p>If you are running Sydent as an identity server, you should update as soon as possible from <a href="https://github.com/matrix-org/sydent/releases/v1.0.3">https://github.com/matrix-org/sydent/releases/v1.0.3</a>.  We are not aware of any of these issues having been exploited maliciously in the wild.</p>
<h2 id="synapse-0-99-3-1">Synapse 0.99.3.1</h2>
<p>Synapse 0.99.3.1 is a security update for two fixes:</p>
<ul>
<li>Ensure that random IDs in Synapse are generated using a secure random number generator, ensuring they cannot be predicted by an attacker. Thanks to Enguerran Gillier (<a href="https://twitter.com/@opnsec">@opnsec</a>) for identifying and responsibly disclosing this issue!</li>
<li>Add 0.0.0.0/32 and ::/128 to the URL preview blacklist configuration, ensuring that an attacker cannot make connections to localhost. Thanks to Enguerran Gillier (<a href="https://twitter.com/@opnsec">@opnsec</a>) for identifying and responsibly disclosing this issue too!</li>
</ul>
<p>You can update from <a href="https://github.com/matrix-org/synapse/releases">https://github.com/matrix-org/synapse/releases</a> or similar as normal. We are not aware of any of these issues having been exploited maliciously in the wild.</p>
<p>(Synapse 0.99.3.2 was released shortly afterwards to fix a non-security issue with the Debian packaging)</p>
<h2 id="riot-android-0-9-x-0-8-99-google-play-and-0-8-28a-f-droid">Riot/Android 0.9.x/0.8.99 (Google Play) and 0.8.28a (F-Droid)</h2>
<p>Riot/Android has an important security fix which shipped over the course of the last week in various versions of the app:</p>
<ul>
<li>Remove obsolete and buggy ContentProvider which could allow a malicious local app to compromise account data. Many thanks to Julien Thomas (<a href="https://twitter.com/@julien_thomas">@julien_thomas</a>) from <a href="https://protektoid.com">Protektoid Project</a> for identifying this and responsibly disclosing it!</li>
</ul>
<p>The fix for this shipped on F-Droid since 0.8.28a, and on the Play Store, the fix is present in both v0.9.0 (the first version of the re-published Riot app) and v0.8.99 (the last version of the old Riot app, which told everyone to reinstall).  Other forks of Riot which we’re aware of have also been informed and should be updated.</p>
<p>If you haven’t already updated, please do so now.</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;2019&#x2F;05&#x2F;03&#x2F;this-week-in-matrix-2019-05-03&#x2F;" title="This Week in Matrix 2019-05-03">This Week in Matrix 2019-05-03</a></h1>
            <span>
                03.05.2019 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
                
            </span>
            
        </header>
        <div>
            <h2 id="new-matrix-org-security-disclosure-policy-and-moderation-pages">New matrix.org Security Disclosure Policy and moderation pages</h2>
<p>Check out the Matrix Official Security Disclosure Policy, which also features a &quot;Hall of Fame&quot;: https://matrix.org/security-disclosure-policy/</p>
<p>We also have an official moderation guide now at https://matrix.org/docs/guides/moderation</p>
<h2 id="servers">Servers</h2>
<h3 id="synapse">Synapse</h3>
<h4 id="last-week">Last week</h4>
<p>Work progresses on reactions support, expect a more formal MSC rsn, but for check out https://github.com/matrix-org/matrix-doc/blob/matthew/msc1849/proposals/1849-aggregations.md for more details. Aside from that we now have an API to send server notices, support is coming for blacklisting IP ranges for federation traffic and finally we published a security disclosure policy and hall of fame https://matrix.org/security-disclosure-policy/. We’ve also been tracking down some device management bugs that prevent e2e message decryption as well as fixing some security bugs.</p>
<h4 id="next-week">Next week</h4>
<p>More reactions work, device management bug hunting and server key validity support.</p>
<h3 id="crypto">Crypto</h3>
<ul>
<li>Olm 3.1.2 bugfix release.</li>
<li><a href="https://github.com/matrix-org/pantalaimon">Pantalaimon</a>: Initial SAS support through panctl http://webmshare.com/play/QeBY1</li>
<li>Pantalaimon: Support for sending out key requests.</li>
</ul>
<h2 id="clients">Clients</h2>
<p>There are some <strong>BIG</strong> (capital and bold!) client releases this week, let's take a look</p>
<h3 id="quaternion-0-0-9-4">Quaternion 0.0.9.4</h3>
<p>Big release for Quaternion this week, following lots of work on <a href="https://github.com/QMatrixClient/libqmatrixclient">libQMatrixClient</a>. <a href="https://matrix.to/#/@kitsune:matrix.org">kitsune</a> reports that:</p>
<p>Quaternion is now officially at version 0.0.9.4! Optional native scrollbar for the timeline, files uploading, initial support of matrix.to links (the foundation for future Matrix URIs), first complete translations, and much much more - the long list is here: https://github.com/QMatrixClient/Quaternion/releases/tag/0.0.9.4. Packagers are advised to take a look at the building and packaging section of the release notes: there are a few updates for you there.</p>
<h2 id="spectral">Spectral</h2>
<p>Continuing the QT-client theme, <a href="https://matrix.to/#/@bhat:encom.eu.org">Black Hat</a> has released a new version of <a href="https://gitlab.com/spectral-im/spectral">Spectral</a> to FlatHub, join <a href="https://matrix.to/#/#spectral:matrix.org">#spectral:matrix.org</a> for more:</p>
<blockquote>
<p>A new version of Spectral is released on Flathub this week! The last release is half a year ago, and there are a lot of changes since then, including a better UI, bug fixes and performance improvements.</p>
</blockquote>
<p>Changelog:</p>
<pre style="background-color:#1e1e1e;color:#dcdcdc;"><code><span>Increase minimum Qt version to 5.12.
</span><span>Redesigned UI.
</span><span>Emoji and username auto completion in text input.
</span><span>Respect server-side notification settings.
</span><span>Emoji picker.
</span><span>Fix font size in HiDPI.
</span><span>Improved reply UI/UX and rich reply UI.
</span><span>Sending/receiving typing notifications.
</span><span>Switch to hoedown for parsing markdown.
</span><span>Display notification count.
</span><span>Responsive UI.
</span><span>Fix #2(Room/People separator issue).
</span><span>Infer device name from system information.
</span><span>Image caching.
</span></code></pre>
<blockquote>
<p>And of course various performance improvements. For my account Spectral takes ~35MB RAM initially, compared to 45~50MB before.</p>
</blockquote>
<h2 id="pattle-new-release">Pattle new release</h2>
<p><img src="/blog/pattle2019-05-03.png" alt="pattle screenshots" /></p>
<p><a href="https://matrix.to/#/@wilko:matrix.org">Wilko</a> came to announce a new Pattle release, that's the Flutter client:</p>
<blockquote>
<p>A new release of Pattle has been pushed to F-droid! Lots of different changes this release, including:</p>
<ul>
<li>Viewing images!</li>
<li>Actual local echo (message is immediately placed in the timeline)</li>
<li>Sent state indicators are now shown next to the message time (clock for still being sent and a checkmark for sent)</li>
<li>Show member change events! (x has joined, left, invited, etc)</li>
<li>Thumbnails are now used for chat avatars, which should improve performance a bit</li>
<li>Other small fixes :)</li>
</ul>
</blockquote>
<p>Check out a <a href="https://matrix.org/_matrix/media/v1/download/matrix.org/BVlZqkwaLUuvigMcDfiddsqQ">video demo at here</a>.</p>
<h3 id="continuum">continuum</h3>
<p><a href="https://matrix.to/#/@uforia:matrix.org">yuforia</a> reports that:</p>
<blockquote>
<p>This week in <a href="https://github.com/koma-im/continuum-desktop">continuum</a>:</p>
<ul>
<li>Remove support for embedded webview and open external browsers when necessary instead.  Many users actually prefer it this way. And dependency on a fairly large native module is gone.</li>
<li>Improvements on the emoji input. Removed some style classes and tweaked some sizes to make the appearance more compact and flat.  https://matrix.org/_matrix/media/v1/download/matrix.org/PvFFPAvoDhiHghsyeJnWVyAK</li>
</ul>
</blockquote>
<h3 id="riot-web">Riot Web</h3>
<p>Initial UI work on reactions and editing, nothing useable yet though.</p>
<h3 id="riot-ios">Riot iOS</h3>
<ul>
<li>Release of 0.8.5 :
<ul>
<li>Grouped notifications</li>
<li>Interactive device verification (by emoji)</li>
<li>WebRTC and Jitsi libs updates</li>
<li>min iOS version is now 10 (Jitsi constraints)</li>
</ul>
</li>
<li>Initial UI work on reactions, nothing useable yet though.</li>
</ul>
<h3 id="riot-android">Riot Android</h3>
<p>Benoit from the Riot team:</p>
<blockquote>
<ul>
<li>CI has been configured on Buildkite for the Android matrix sdk, riot and riotx.</li>
<li>The Android sdk can now be integrate as a grate dependency via Jitpack.</li>
<li>Riot 0.9.1 has been released with sas feature included! Device verification is easier with riot web and riot Android users, soon with riot ios users. Will be on production channel on Monday.</li>
<li>We have finally pushed the security fix on GH.</li>
<li>Also working on the crypto modularization to integrate it on RiotX.</li>
<li>We will concentrate our effort on RiotX now</li>
</ul>
</blockquote>
<h3 id="riotx-android">RiotX (Android)</h3>
<blockquote>
<ul>
<li>Working on reactions</li>
</ul>
</blockquote>
<h2 id="bridges">Bridges</h2>
<h3 id="matrix-appservice-discord-searching-for-a-new-maintainer">matrix-appservice-discord searching for a new maintainer</h3>
<p><a href="https://matrix.to/#/@sorunome:sorunome.de">Sorunome</a> reports that:</p>
<blockquote>
<p>We (<a href="https://github.com/Half-Shot/matrix-appservice-discord">matrix-appservice-discord</a>) are looking for a new maintainer!</p>
<p>What are we looking for in a maintainer?<br />
You wouldn't have to be super active, however a few minutes per day would be greatly appreciated. You'd be responsible of reviewing PRs! Because of this not being afraid of Typescript and not being afraid of Discord is required - no need to be at pro-level!</p>
<p>So we are basically looking for someone who can help us look over PRs and maybe do some themself. If you think you are interested, please message us in <a href="https://matrix.to/#/#discord:half-shot.uk">our matrix room</a>!</p>
</blockquote>
<h3 id="bridging-facebook-messenger">Bridging Facebook Messenger</h3>
<p><a href="https://matrix.to/#/@tulir:maunium.net">tulir</a>:</p>
<blockquote>
<p>I made a new Facebook Messenger bridge: https://github.com/tulir/mautrix-facebook / <a href="https://matrix.to/#/#facebook:maunium.net">#facebook:maunium.net</a>. Currently the main difference to <a href="https://github.com/matrix-hacks/matrix-puppet-facebook">matrix-puppet-facebook</a> is multi-user support like my WhatsApp and Telegram bridges. The bridge is Python and the code structure is similar to <a href="https://github.com/tulir/mautrix-telegram">mautrix-telegram</a>, so I'll probably eventually create a generic bridge library out of the common parts.</p>
</blockquote>
<h2 id="sdks-and-frameworks">SDKs and Frameworks</h2>
<h3 id="ruby-sdk">Ruby SDK</h3>
<p><a href="https://github.com/ananace/">Ananace</a> reports that:</p>
<blockquote>
<p>Working on the <a href="https://github.com/ananace/ruby-matrix-sdk">Ruby SDK</a> again, planning to try and get it to the point where I feel comfortable calling it a provisionary 1.0 release. I want to propose additions to various software using it after all, and that tends to look better if it's 1.0 - or close. 😃</p>
</blockquote>
<h2 id="that-s-all-i-know">That's all I know</h2>
<p>That's all for this week folks, come chat in <a href="https://matrix.to/#/#twim:matrix.org">#twim:matrix.org</a> for more, or to share what you've been working on.</p>
<p>PS <a href="https://github.com/bahlox/tangent">this interesting-looking project</a> is not ready for public eyes on it yet, so please refrain from checking out the code and discussing with the author in <a href="https://matrix.to/#/#tangent:matrix.org">#tangent:matrix.org</a></p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;2019&#x2F;04&#x2F;26&#x2F;this-week-in-matrix-2019-04-26&#x2F;" title="This Week in Matrix 2019-04-26">This Week in Matrix 2019-04-26</a></h1>
            <span>
                26.04.2019 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                
                <a href="/author/neil-j">
                    Neil J
                </a>
                
            </span>
            
        </header>
        <div>
            <h2 id="hello-and-welcome">Hello and welcome</h2>
<p>No Ben this week. I'm afraid this means no matrix live, but fear not your Ben orientated programming will resume next week.</p>
<h2 id="things-that-have-happened">Things that have happened</h2>
<h2 id="riot-android">Riot Android</h2>
<ul>
<li>New Riot.im application has been delivered to the PlayStore:  https://play.google.com/store/apps/details?id=im.vector.app. It replaces the previous app. More details here: https://medium.com/@RiotChat/riot-im-android-security-update-2b3f655ad739</li>
<li>François and Benoit were at AndroidMakers Paris on Tuesday and Wednesday. We’ve seen plenty of interesting conferences and come back with many ideas to improve Riot UX/UI/Implementation/testing/etc.</li>
<li>SAS device verification review is over, will be merged once we have the tagged OLM library.</li>
</ul>
<h2 id="riotx-android">RiotX (Android)</h2>
<ul>
<li>Valere has started working on reactions (which will be implemented only on RiotX for Android).</li>
<li>François has worked on merging membership Events in the timeline</li>
</ul>
<h2 id="riot-ios">Riot iOS</h2>
<ul>
<li>Interactive device verification has been merged</li>
<li>Jitsi and WebRTC updates have been merged</li>
<li>Fix bugs in order to prepare a release</li>
</ul>
<h2 id="crypto">Crypto</h2>
<p><a href="https://matrix.to/#/@uhoreg:matrix.org">uhoreg</a> reports that:</p>
<blockquote>
<p>olm 3.1.0 has been released. This release adds new functions to help with SAS-based key verification (a.k.a. emoji-based verification) and with cross-signing. The Python bindings are also now available on pypi, so you can install it using &quot;pip install python-olm&quot;, though you need the olm library and development files installed first.</p>
</blockquote>
<p>Also</p>
<ul>
<li>Python-olm available on pypi.</li>
<li>Initial SAS verification support for nio.</li>
</ul>
<h2 id="spectral">Spectral</h2>
<p><a href="https://matrix.to/#/@bhat:encom.eu.org">Black Hat</a> reports that:</p>
<p>Spectral's redesign continues, featuring a beautiful responsive UI(not kirigami yet, sorry) and more functionalities. Legacy UIs such as the room detail panel are changed to fit into redesigned UI better. Basic room upgrade support is added, allowing you to switch between the old room and the new room. Room settings and user detail dialogs are added. You can also ignore users in the user detail dialog.</p>
<p><img src="/blog/spectral.2019-04-26.1.png" alt="" />
<img src="/blog/spectral.2019-04-26.2.png" alt="" /></p>
<h2 id="matrix-nsfw">matrix-nsfw</h2>
<p>A <a href="https://matrix.to/#/@bhat:encom.eu.org">Black Hat</a> double header this week:</p>
<blockquote>
<p>matrix-nsfw has been ported from Golang to Rust. The backend machine learning framework is also switched to Tensorflow, giving a major performance boost. For anyone that doesn't know what matrix-nsfw is, it is a bot-like utility that detects NSFW images in a room. The new repo is at https://gitlab.com/b0/matrix-nsfw-rust</p>
</blockquote>
<h2 id="neo">Neo</h2>
<p>Sometimes a picture tells a thousands rainbow coloured words. Thanks <a href="https://matrix.to/#/@f0x:lain.haus">Foks</a></p>
<p><img src="/blog/neo.2019-04-26.png" alt="" /></p>
<h2 id="ruma">Ruma</h2>
<p><a href="https://matrix.to/#/@jimmycuadra:matrix.org">Jimmy</a> reports that:</p>
<blockquote>
<p>All of Ruma's libraries (but not yet the homeserver itself) are now targeting stable Rust!</p>
</blockquote>
<h2 id="continiuum">Continiuum</h2>
<p><a href="https://matrix.to/#/@uforia:matrix.org">yuforia</a> reports that:</p>
<blockquote>
<ul>
<li>If a room member is not visible on screen, updating their name doesn't require switching to the main UI thread</li>
</ul>
</blockquote>
<ul>
<li>Apply formatting when viewing the json source of an event</li>
<li>Reuse GUI components to improve performance, update content of views instead of creating new ones</li>
<li>Use a hash set to avoid going through the list of room members in some cases * Move more of local storage into the database: names and avatars of users and rooms, room membership, recently used accounts, etc.</li>
<li>Placeholder avatars are made with GUI components and instead of generated bitmap images</li>
<li>Switch to gradle multi-project build to modularize</li>
</ul>
<blockquote>
<p>After switching from plaintext files to an embedded database, some components are still in the process of being rewritten, coming next week: load messages from server on demand when scrolling, if they are not yet stored in database; add support for invitations;</p>
</blockquote>
<h2 id="matrix-appservice-discord">matrix-appservice-discord</h2>
<p><a href="https://matrix.to/#/@sorunome:sorunome.de">Sorunome</a> reports that:</p>
<blockquote>
<p>matrix-appservice-discord work has finally resumed! The PRs for both migrating the room and user store to SQL have been merged, and many awesome new things should follow up soon!</p>
</blockquote>
<h2 id="synapse">Synapse</h2>
<p>The reactions and edits API is taking shape, we’re making progress on our small homeserver setup, and we’re hunting a new set of device key management bugs that came to light in the absence of matrix.org.</p>
<p>We’ve been a bit disrupted these past few weeks, but work towards Synapse 1.0 continues and we’ll soon be ready to offer a release candidate.</p>
<h2 id="minivector">miniVector</h2>
<p><a href="https://matrix.to/#/@wtp2018:matrix.org">Curious Cat</a> reports that:
&gt;miniVector 0.8.29 is available on Goldy and Froid (and are unaffected by the Riot/Android <a href="https://medium.com/@RiotChat/riot-im-android-security-update-2b3f655ad739">re-release drama</a>).</p>
<h2 id="the-incident">The 'Incident'</h2>
<p>We know you'll have a bunch of questions, we'll be publishing a full post-mortem next week. Thanks for bearing with us.</p>
<h2 id="the-end">The End</h2>
<p>See you next week, it will be Bentastic I can assure you. Be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;2019&#x2F;04&#x2F;18&#x2F;security-update-sydent-1-0-2&#x2F;" title="Security Update: Sydent 1.0.2">Security Update: Sydent 1.0.2</a></h1>
            <span>
                18.04.2019 00:00
                —
                <a href="/category/general">
                    General
                </a>
                —
                
                <a href="/author/matrix-org-team">
                    Matrix.org Team
                </a>
                
            </span>
            
        </header>
        <div>
            <h2 id="overview">Overview</h2>
<p>We became aware today of a flaw in <a href="https://github.com/matrix-org/sydent">sydent</a>’s validation of email addresses which can lead to a failure to correctly limit registration to a given email domain.  <strong>This only affects people who run their own sydent, and are relying on allowed_local_3pid in their synapse config.</strong> We’d like to thank <a href="https://twitter.com/fs0c131y">@fs0c131y</a> for bringing it to our attention on <a href="https://twitter.com/fs0c131y/status/1118791420624687104">Twitter</a> this morning.  We are not aware of this being exploited in the wild other than the initial report.</p>
<p><strong>If you are running your own sydent, and limiting signup for your server using the <code>allowed_local_3pids</code> configuration option, then you need to upgrade your sydent immediately to Sydent 1.0.2.</strong></p>
<p>Meanwhile, if you have been relying on the <code>allowed_local_3pids</code> configuration option to restrict access to your homeserver, you may wish to check your homeserver’s user_threepids table for malformed email addresses and your sydent’s database as follows:</p>
<pre style="background-color:#1e1e1e;color:#dcdcdc;"><code><span>$ sqlite3 sydent.db 
</span><span>sqlite&gt; select count(*) from global_threepid_associations where address like &#39;%@%@%&#39;;
</span><span>0
</span><span>
</span><span>$ psql matrix
</span><span>matrix=&gt; select count(*) from user_threepids where address like &#39;%@%@%&#39;;
</span><span> count 
</span><span>-------
</span><span>     0
</span></code></pre>
<p>If the queries return more than 0 results, please let us know at <a href="mailto:security@matrix.org">security@matrix.org</a> - otherwise you are fine.</p>
<h2 id="details">Details</h2>
<p>A flaw existed in sydent whereby it was possible to bypass the requirement specified in synapse’s <code>allowed_local_3pids</code> option, which restricts that users may only register with an email address matching a specific format.</p>
<p>This relied on two things:</p>
<ol>
<li>sydent uses python's email.utils.parseaddr function to parse the input email address before sending validation mail to it, but it turns out that if you hand parseaddr an malformed email address of form a@b.com@c.com, it silently discards the @c.com prefix without error.  The result of this is that if one requested a validation token for 'a@malicious.org@important.com', the token would be sent to 'a@malicious.org', but the address 'a@malicious.org@important.com' would be marked as validated.  This release fixes this behaviour by asserting that the parsed email address is the same as the input email address.</li>
<li>synapse's checking of email addresses relies on regular expressions in the home server configuration file. synapse does not validate email addresses before checking them against these regular expressions, so naive regular expressions will detect the second domain in email addresses such as the above, causing them to pass the check.</li>
</ol>
<p>You can get sydent 1.0.2 from <a href="https://github.com/matrix-org/sydent/releases/tag/v1.0.2">https://github.com/matrix-org/sydent/releases/tag/v1.0.2</a>.</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;2019&#x2F;04&#x2F;18&#x2F;this-week-in-matrix-2019-04-18&#x2F;" title="This Week in Matrix 2019-04-18">This Week in Matrix 2019-04-18</a></h1>
            <span>
                18.04.2019 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                
                <a href="/author/matrix-org-team">
                    Matrix.org Team
                </a>
                
            </span>
            
        </header>
        <div>
            <h2 id="welcome-to-the-new-blog">Welcome to the new blog!</h2>
<p>Check out the new digs! We're happy with this newly deployed blog, and all the old and loveable content is right down there. If you find issues, <a href="https://matrix.to/#/@benpa:matrix.org">let me know</a>. You may remember Nad, from previous editions of Matrix Live - huge thanks to him for his work on the design and upkeep of this new deployment.</p>
<h2 id="notes-from-the-downtimes">Notes from the downtimes</h2>
<h3 id="github-tokens">Github tokens</h3>
<p>jaywink:</p>
<blockquote>
<p>Due to the security incident, all GitHub access tokens for the Scalar GitHub integration were cleared. This means that if you have a GitHub bot in the channel and want to use the !github bot commands, you need to re-login to github via the integration manager menu. Note, existing webhooks are untouched and should work fine without re-authenticating.</p>
</blockquote>
<h3 id="bridges">Bridges</h3>
<p><a href="https://matrix.to/#/@Half-Shot:half-shot.uk">Half-Shot</a>:</p>
<blockquote>
<p>From the matrix.org bridge team, we are resurrecting bridges as fast as possible. Currently running are the freenode, slack, gitter and gimpnet (now hosted on gnome.org) with more to come today and next week.<br />
We have the snoonet and oftc irc bridges back. Mozilla is coming soon hopefully this weekend too!</p>
</blockquote>
<p>Whoop! Mozilla is actually up now!</p>
<h2 id="pattle-new-release-on-f-droid">Pattle new release on F-Droid</h2>
<p><a href="https://matrix.to/#/@wilko:matrix.org">Wilko</a>:</p>
<blockquote>
<p>A big release of Pattle has just been pushed to the F-droid repo! Changes include:</p>
<ul>
<li>Display names are now shown</li>
<li>You can now click on chats and view them!</li>
<li>Messages are grouped by time and sender (see screenshots)</li>
<li>Add fancy transition animation and ripples to chat messages (see video)</li>
<li>Use Sentry for error reporting (only Android version and device model is sent, along with the stacktrace of the error)</li>
</ul>
<p>Also, please note that if you have a matrix.org you probably have reinstall the app if you're logged in because of the recent matrix.org incident (because there's no logout button yet and no detection for invalidated access tokens)</p>
</blockquote>
<p>There has actually been a release since, which includes:</p>
<blockquote>
<p>message sending and viewing image history!</p>
</blockquote>
<p><img src="/blog/pattle.2019-04-18.png" alt="" /></p>
<h2 id="libqmatrixclient-0-5-1-2-quaternion-0-0-9-4">libQMatrixClient 0.5.1.2 &amp;&amp; Quaternion 0.0.9.4</h2>
<p><a href="https://matrix.to/#/@kitsune:matrix.org">kitsune</a> is talking about the long road to 0.0.9.4:</p>
<blockquote>
<p><a href="https://github.com/QMatrixClient/libqmatrixclient">libQMatrixClient</a> 0.5.1.2 has been released, with all the remaining bugfixes for Quaternion 0.0.9.4 that's coming any day soon now. The release notes are here: <a href="https://github.com/QMatrixClient/libqmatrixclient/releases/tag/0.5.1.2">https://github.com/QMatrixClient/libqmatrixclient/releases/tag/0.5.1.2</a></p>
</blockquote>
<blockquote>
<p>Quaternion 0.0.9.4 RC3, the last one before the release that will happen in the nearest days, is out. Release notes can be found at https://github.com/QMatrixClient/Quaternion/releases/tag/0.0.9.4-rc3. Translators, you literally have hours to add your translations for 0.0.9.4!</p>
</blockquote>
<h2 id="neo">neo</h2>
<blockquote>
<p>I reimplemented the matrix sdk into Neo, so it works nicer. Colors and font look nicer (base16-tomorrow, Open Sans), and there's text message sending, with localecho!<br />
I also fixed a bug where react would recycle displayname-components across rooms, attributing them to the wrong messages</p>
</blockquote>
<p><img src="/blog/neo.2019-04-18.png" alt="" /></p>
<blockquote>
<p>a video at https://lain.haus/_matrix/media/v1/download/lain.haus/VfshWRfaNUnpGQbdkyYczxvd</p>
</blockquote>
<p>Go test Neo at: https://neo.lain.haus/neo</p>
<h2 id="matrix-registration-update">matrix-registration update</h2>
<p><a href="https://matrix.to/#/@zeratax:dmnd.sh">ZerataX</a>:</p>
<blockquote>
<p>it's been a long while, but I've finally come around to improving on matrix-registration<br />
For those of you, who have forgotten what this project is about, it basically lets you invite people to your homeserver with tokens, e.g. https://homeserver.tld/register?token=DoubleWizardSky<br />
This whole update was about making the project more user friendly.<br />
I made a new default registration page that requires 0 setup and you can install the project right from pypi with pip, so you don't even need to clone the repo any longer.<br />
check a live example  here: https://chat.dmnd.sh/register<br />
and to play around with the api you can can go over to the github page: https://zeratax.github.io/matrix-registration/demo.html?token=ColorWhiskeyExpand<br />
channel: <a href="https://matrix.to/#/#matrix-registration:dmnd.sh">#matrix-registration:dmnd.sh</a><br />
github: https://github.com/zeratax/matrix-registration</p>
</blockquote>
<p><a href="https://matrix.org/_matrix/media/v1/download/dmnd.sh/UKGgpbHRdFXzKywxjjbfHAsI">Video available here.</a></p>
<h2 id="matrix-media-repo-now-has-s3-support">matrix-media-repo now has s3 support</h2>
<p><a href="https://github.com/turt2live">TravisR</a>:</p>
<blockquote>
<p><a href="https://github.com/turt2live/matrix-media-repo">matrix-media-repo</a> now has s3 (and s3-like) support, making it easier to archive older media or use minimal disk space. See the new datastores option in the config and the admin docs ( https://github.com/turt2live/matrix-media-repo/blob/master/docs/admin.md#datastore-management ) for more information.</p>
</blockquote>
<h2 id="dimension">Dimension</h2>
<p><a href="https://github.com/turt2live">TravisR</a>:</p>
<blockquote>
<p>Dimension has been updated to more safely handle when upstream integration managers (like Scalar) are offline. Instead of crashing or breaking in various ways, it'll report which integrations are not accessible.<br />
As well, due to recent events, if you use matrix.org bots or bridges in Dimension then go the the admin section and log everyone out using the red button. Dimension caches upstream tokens and isn't smart enough to realize that they are no longer valid, which means they need clearing. Clients should automatically handle getting new tokens in the background.</p>
</blockquote>
<h2 id="riot-ios">Riot iOS</h2>
<blockquote>
<ul>
<li>Interactive device verification is still in progress</li>
<li>Update WebRTC and Jitsi libs (in progress)</li>
</ul>
</blockquote>
<h2 id="riot-android">Riot Android</h2>
<blockquote>
<p>*We are finalizing SAS device verification feature
*We are preparing a release to fix some issues</p>
</blockquote>
<h2 id="riotx-android">RiotX (Android)</h2>
<blockquote>
<ul>
<li>We can now clear the cache of the application (Riot legacy feature)</li>
<li>Sync filter has been implemented</li>
<li>François is working on thumbnail of video (upload and preview) in the timeline</li>
</ul>
</blockquote>
<h2 id="that-s-all-i-know">That's all I know</h2>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;2019&#x2F;04&#x2F;11&#x2F;we-have-discovered-and-addressed-a-security-breach-updated-2019-04-12&#x2F;" title="We have discovered and addressed a security breach. (Updated 2019-04-12)">We have discovered and addressed a security breach. (Updated 2019-04-12)</a></h1>
            <span>
                11.04.2019 00:00
                —
                <a href="/category/general">
                    General
                </a>
                —
                
                <a href="/author/matrix-org-team">
                    Matrix.org Team
                </a>
                
            </span>
            
        </header>
        <div>
            <p><b>Update: for the full story here, please see <a href="https://matrix.org/blog/2019/05/08/post-mortem-and-remediations-for-apr-11-security-incident">the post mortem</a>.</b>
<br/></p>
<h2 id="here-s-what-you-need-to-know">Here's what you need to know.</h2>
<p><strong>TL;DR:</strong> An attacker gained access to the servers hosting Matrix.org. The intruder had access to the production databases, potentially giving them access to unencrypted message data, password hashes and access tokens. As a precaution, if you're a matrix.org user you should <strong>change your password now</strong>.</p>
<p>The matrix.org homeserver has been rebuilt and is running securely; bridges and other ancillary services (e.g. this blog) will follow as soon as possible. Modular.im homeservers have not been affected by this outage.</p>
<h3 id="the-security-breach-is-not-a-matrix-issue">The security breach is not a Matrix issue.</h3>
<p>The hacker exploited a vulnerability in our production infrastructure (specifically a slightly outdated version of Jenkins). <strong>Homeservers other than matrix.org are unaffected.</strong></p>
<h3 id="how-does-this-affect-me">How does this affect me?</h3>
<p>We have invalidated all of the active access tokens for users on Matrix.org - all users have been logged out.</p>
<p>Users with <strong>Matrix.org accounts</strong> should:</p>
<ul>
<li><strong>Change your password now</strong> - no plaintext Matrix passwords were leaked, but weak passwords could still be cracked from the hashed passwords</li>
<li><strong>Change your NickServ password (if you're using IRC bridging)</strong> - there's no evidence bridge credentials were compromised, but if you have given the IRC bridges credentials to your NickServ account we would recommend changing this password</li>
</ul>
<p>And as a reminder, it's good practice to:</p>
<ul>
<li><strong>Review your device list regularly</strong> - make sure you recognise all of the devices connected to your account</li>
<li><strong>Always make sure you enable E2E encryption for private conversations</strong></li>
</ul>
<h3 id="what-user-data-has-been-accessed">What user data has been accessed?</h3>
<p>Forensics are ongoing; so far we've found no evidence of large quantities of data being downloaded. The attacker did have access to the production database, so unencrypted content (including private messages, password hashes and access tokens) may be compromised.</p>
<h3 id="what-has-not-been-affected">What has not been affected?</h3>
<ul>
<li>Source code and packages have not been impacted based on our initial investigations.  However, we will be replacing signing keys as a precaution.</li>
<li>Modular.im servers are not affected, based on our initial analysis</li>
<li>Identity server data does not appear to have been compromised</li>
</ul>
<p>The target appeared to be internal credentials for onward exploits, not end user information from the matrix.org homeserver.</p>
<h3 id="you-might-have-lost-access-to-your-encrypted-messages">You might have lost access to your encrypted messages.</h3>
<p>As we had to log out all users from matrix.org, if you do not have backups of your encryption keys you will not be able to read your encrypted conversation history.  However, if you use server-side encryption key backup (the default in Riot these days) or take manual key backups, you’ll be okay. </p>
<p>This was a difficult choice to make. We weighed the risk of some users losing access to encrypted messages against that of all users' accounts being vulnerable to hijack via the compromised access tokens. We hope you can see why we made the decision to prioritise account integrity over access to encrypted messages, but we're sorry for the inconvenience this may have caused.</p>
<h2 id="what-happened">What happened?</h2>
<p>We were using Jenkins for continuous integration (automatically testing our software). The version of Jenkins we were using had a vulnerability (<a href="https://nvd.nist.gov/vuln/detail/CVE-2019-1003000">CVE-2019-1003000</a>, <a href="https://nvd.nist.gov/vuln/detail/CVE-2019-1003001">CVE-2019-1003001</a>, <a href="https://nvd.nist.gov/vuln/detail/CVE-2019-1003002">CVE-2019-1003002</a>) which allowed an attacker to hijack credentials (forwarded ssh keys), giving access to our production infrastructure. Thanks to <a href="https://twitter.com/jaikeysarraf">@jaikeysarraf</a> for drawing this to our attention.</p>
<h3 id="timeline">Timeline</h3>
<p>March 13th <b>Updated 2019-04-12 11:00 UTC</b></p>
<ul>
<li>Attacker compromises Jenkins CI server</li>
</ul>
<p>April 4th <b>Updated 2019-04-12 11:00 UTC</b></p>
<ul>
<li>Attacker gains access to production infrastructure by hijacking a forwarded SSH agent logging into the compromised Jenkins worker</li>
</ul>
<p>April 9th</p>
<ul>
<li>Jenkins vulnerability brought to our attention by <a href="https://twitter.com/jaikeysarraf">@jaikeysarraf</a></li>
</ul>
<p>April 10th</p>
<ul>
<li>Investigation identified the compromised machines and the full scope of the attack</li>
<li>Jenkins was removed</li>
<li>Attacker's access to compromised machines was removed</li>
</ul>
<p>April 11th</p>
<ul>
<li>Matrix.org was taken offline and production infrastructure fully rebuilt</li>
<li>Having fully flushed out the attacker, external communication was published informing users and advising on next steps</li>
<li>Matrix.org homeserver restored, with bridges and ancillary services (e.g. this blog) following as soon as possible</li>
</ul>
<h2 id="update-2019-04-12">Update 2019-04-12</h2>
<p>At around 5am UTC on Apr 12, the attacker used a cloudflare API key to repoint DNS for matrix.org to a defacement website (https://github.com/matrixnotorg/matrixnotorg.github.io).
The API key was known compromised in the original attack, and during the rebuild the key was theoretically replaced.  However, unfortunately
only personal keys were rotated, enabling the defacement.  We are currently doublechecking that all compromised secrets have been rotated.</p>
<p>The rebuilt infrastructure itself is secure, however, and the DNS issue has been solved without further abuse.
If you have already changed your password, you do not need to do so again.</p>
<p>The defacement confirms that encrypted password hashes were exfiltrated from the production database, so <b>it is even more important
for everyone to change their password</b>.  We will shortly be messaging and emailing all users to announce the breach and advise them
to change their passwords.  We will also look at ways of non-destructively forcing a password reset at next login.</p>
<p>The attacker has also posted github issues detailing some of their actions and suggested remediations at
https://github.com/matrix-org/matrix.org/issues/created_by/matrixnotorg.</p>
<p>This confirms that GPG keys used for signing packages were compromised.  These keys are used for signing
the synapse debian repository (AD0592FE47F0DF61), and releases of Riot/Web (E019645248E8F4A1).
Both keys have now been revoked.  The window of compromise for the keys started from April 4th; there have
been no Synapse releases since then.  There has been one release of Riot/Web (1.0.7), however as the key
was passphrased and based on our initial analysis of the release, we believe it to be secure.</p>
<h2 id="what-are-we-doing-to-prevent-this-in-future">What are we doing to prevent this in future?</h2>
<p>Once things are back up and running we will retrospect on this incident in detail to identify the changes we need to make. We will provide a proper postmortem, including follow-up steps; meanwhile we are obviously going to take measures to improve the security of our production infrastructure, including patching services more aggressively and more regular vulnerability scans.</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;2019&#x2F;04&#x2F;08&#x2F;synapse-deprecating-postgres-9-4-and-python-2-x&#x2F;" title="Synapse: Deprecating Postgres 9.4 and Python 2.x">Synapse: Deprecating Postgres 9.4 and Python 2.x</a></h1>
            <span>
                08.04.2019 00:00
                —
                <a href="/category/general">
                    General
                </a>
                —
                
                <a href="/author/neil-johnson">
                    Neil Johnson
                </a>
                
            </span>
            
        </header>
        <div>
            <p><strong>TL;DR DON'T PANIC - Synapse 1.0 will support Postgres 9.4 and Python 2.7</strong></p>
<p>Folks, this is an update to explain that we will be shortly deprecating Synapse support for Postgres 9.4 and Python 2.x.</p>
<h2 id="what-are-we-doing">What are we doing?</h2>
<p>From the dates described below, we will no longer guarantee support for deprecated versions. This means that Synapse <em>may </em>continue to work with these versions but we will not make any attempt to ensure compatibility and will remove old library versions from our CI.</p>
<h2 id="when-is-this-happening">When is this happening?</h2>
<p><strong>Synapse 1.0 will continue to support both technologies, but subsequent releases may not:-</strong></p>
<p>For Python, we shared that we would discontinue to Python 2.x support from<a href="/blog/2018/12/21/porting-synapse-to-python-3/"> April 1st 2019</a>, so for the first release that follows 1.0 we do not guarantee Python 2.x support.</p>
<p>For Postgres, will give server admins 6 weeks to upgrade to a newer version, and will guarantee support <strong>up until 20th May 2019.</strong></p>
<h2 id="why-would-you-do-this-to-us">Why would you do this to us?</h2>
<p>We have multiple reasons, but broadly:-</p>
<ul>
 	<li>We want to make use of new language features not supported in old versions. This will enable us to continue to improve the performance and maintainability of Synapse.</li>
 	<li>Python 2.x overall will be <a href="https://pythonclock.org/">end of life'd at the end of the year</a>. <a href="https://www.postgresql.org/support/versioning/">Postgres 9.4's final release</a> will follow 2 months later on 13th February 2020.</li>
 	<li>Since very few server admins still use these technologies on the wild, providing support is costly and we want to reduce our overall maintenance load.</li>
</ul>
<h2 id="la-la-la-i-am-ignoring-you-what-will-happen">La la la I am ignoring you - what will happen?</h2>
<p>You will be able to upgrade to Synapse 1.0, but will likely experience incompatibilities that prevent you upgrading further. Seriously, you really need to upgrade.</p>
<h2 id="okay-but-i-have-questions-where-should-i-go">Okay, but I have questions, where should I go?</h2>
<p>Come and say Hi in #synapse:matrix.org and we'll do our best to help you.</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;2019&#x2F;04&#x2F;05&#x2F;this-week-in-matrix-2019-04-05&#x2F;" title="This Week in Matrix 2019-04-05">This Week in Matrix 2019-04-05</a></h1>
            <span>
                05.04.2019 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
                
            </span>
            
        </header>
        <div>
            <h2 id="matrix-live-s3e20-fluffychat-creator-krille-on-matrix-ubuntu-touch-and-matrix-for-healthcare">Matrix Live S3E20 FluffyChat creator Krille on Matrix, Ubuntu Touch and Matrix-for-Healthcare</h2>
<iframe src="https://www.youtube.com/embed/mLgLwLcq9Ys" frameBorder="0" allowFullScreen="allowfullscreen"></iframe>
<h2 id="synapse-the-road-to-1-0">Synapse, the road to 1.0</h2>
<p>Neil, <a href="https://github.com/matrix-org/synapse/">Synapse</a> overlord:</p>
<blockquote>
<p>Last week we carried on with Synapse 1.0 work, in particular <a href="https://github.com/matrix-org/synapse/issues/4364">server key signing validity</a>, a config option to <a href="https://github.com/matrix-org/synapse/pull/4967">verify federation certificates</a> to support MSC1711 and support for <a href="https://github.com/matrix-org/synapse/pull/4982">3PID unbinding APIs</a> (MSC1915). Outside of that we've been thinking about how to improve room upgrades for private rooms and landed the preparatory work for a refactor of the room directory.</p>
<p>Coming up next, we'll continue to bash out 1.0 blockers, Hawkowl has started work on optimising for small hosted homeservers, and anoa will be working on the new super fast room directory. Finally Erik has started work on aggregations support so clients will be able to offer things like edits and reactions ?</p>
<p><a href="https://www.arewereadyyet.com/">https://www.arewereadyyet.com/</a> is now just shy of 64%, keep going.</p>
</blockquote>
<h2 id="dendrite">Dendrite</h2>
<blockquote>
<p><a href="https://github.com/matrix-org/sytest/pull/541">Dockerfile for sytest</a> running against Dendrite approved. Close to being able to run Dendrite against sytest. Also using sytest's new test white/blacklist functionality to include a list of tests that Dendrite is known to pass in the repo. When people make new PRs that allow Dendrite to pass new tests, they can also append the names of the tests to the testfile to help automatically track Dendrite's improving progress. Look forward to seeing further progress post Synapse 1.0.</p>
</blockquote>
<h2 id="libqmatrixclient-0-5-1-released">libQMatrixClient 0.5.1 released,</h2>
<p><a href="https://matrix.to/#/@kitsune:matrix.org">kitsune</a>:</p>
<blockquote>
<p><a href="https://github.com/QMatrixClient/libqmatrixclient">libQMatrixClient</a> 0.5.1 is out! This is a minor release with bugfixes and small improvements, a base for Quaternion 0.0.9.4, RC of which is coming this weekend. <a href="https://github.com/QMatrixClient/libqmatrixclient/releases/tag/0.5.1">Full release notes here</a></p>
</blockquote>
<p>and to follow up:</p>
<blockquote>
<p><a href="https://github.com/QMatrixClient/Quaternion">Quaternion</a> 0.0.9.4 Release Candidate is available for all those who don't need a &quot;release&quot; seal of approval to use applications. Get out, grab it, report bugs that could still sneak in: <a href="https://github.com/QMatrixClient/Quaternion/releases/tag/0.0.9.4-rc">https://github.com/QMatrixClient/Quaternion/releases/tag/0.0.9.4-rc</a>. A separate call out to translators - it's a great moment to teach Quaternion a few more phrases in your language!</p>
</blockquote>
<h2 id="net-core-synchrotron">.NET Core Synchrotron</h2>
<p><a href="https://matrix.to/#/@Half-Shot:half-shot.uk">Half-Shot</a>:</p>
<blockquote>
<p>This weekend I took a brief pause from doing matrix work, and then went back into it by finishing the feature set for the <a href="https://github.com/turt2live/synapse-netcore-workers/pull/48">.NET Core Synchrotron</a>. It's &quot;feature complete&quot; meaning all specced features of sync are in this branch, excluding legacy endpoints. There are a few bugs logged against it and it's really only useful as a super early test, while I fix some of the p1 bugs.</p>
<p>The federation sender continues to be reliable and stable, and we are prepping for the release of synapse 0.99.3 which made a few changes to the replication stream. For more info, please see <a href="https://github.com/turt2live/synapse-netcore-workers">https://github.com/turt2live/synapse-netcore-workers</a></p>
</blockquote>
<h2 id="pattle-has-now-moved-to-flutter">Pattle has now moved to Flutter</h2>
<p><a href="https://matrix.to/#/@wilko:matrix.org">Wilko</a> has officially discontinued the previous version of Pattle, and is focused on their Flutter SDK and new version of Pattle based on it:</p>
<blockquote>
<p>After some silence here but a lot of development, Pattle has now moved to Flutter. The new app is available in the same F-droid repository, you can just update. Note that you will have to log in again. If there are issues with updating, try removing the old app and installing the new one.</p>
<p>Also note that this version is still very basic and does not have all features of the old Pattle unfortunately. The reason that I chose to already replace it on the repo is that the old app will not receive updates anymore.</p>
<p>The current features are logging in and an overview of all chats. What <em>is</em> new is that data is now stored locally, so you won't have to do an initial sync everytime you open the app (which was the case with old app). What's also new is that I've decided to use more red, because.. I like red.</p>
<p>There is still a lot to do! Please notify me of anything that you think is missing, even though some things may be obvious (sorting chats based on date, chat avatars), some may not be as obvious to me!</p>
<p>If you'd like to contribute, the new repo is <a href="https://git.pattle.im/pattle/app">here</a>. Note that many contributions will probably start at the SDK level. Pattle uses my own Dart SDK, which you can find <a href="https://git.pattle.im/pattle/library/matrix-dart-sdk">here</a>.</p>
<p>There is at the moment a very specific bug in Flutter, where on Android 7.1 with release builds, the app crashes when building a list widget. If you use Android 7.1 (like me) and you crash after logging in, that's the reason. It seems I can't do anything about it, sorry.</p>
</blockquote>
<p><a href="/blog/wp-content/uploads/2019/04/pattle-2019-04-05a.png"><img class="alignnone size-large wp-image-4175" src="/blog/wp-content/uploads/2019/04/pattle-2019-04-05a-581x1024.png" alt="" width="581" height="1024" /></a></p>
<h2 id="libaqueous-matrix-dart-sdk-and-aqueous-client">libaqueous (Matrix Dart SDK) and Aqueous client</h2>
<p><a href="https://matrix.to/#/@bhat:encom.eu.org">Black Hat</a> is continuing work on <a href="https://gitlab.com/b0/libaqueous">libaqueous</a>, a Matrix Dart SDK.</p>
<blockquote>
<p>Aqueous now comes with room categories and history messages support.
Also, a lot of code refactoring is going on to change the backend store from plain json file to sqlite, which should improve the performance a lot.
The room is at <a href="https://matrix.to/#/#libaqueous:encom.eu.org">#libaqueous:encom.eu.org</a></p>
</blockquote>
<p><a href="/blog/wp-content/uploads/2019/04/aqueous.png"><img class="alignnone size-large wp-image-4176" src="/blog/wp-content/uploads/2019/04/aqueous-1024x715.png" alt="" width="1024" height="715" /></a></p>
<h2 id="riot-web">Riot Web</h2>
<blockquote>
<ul>
 	<li>Working towards bringing breadcrumbs out of labs</li>
 	<li>Adding image preview to file upload UX</li>
 	<li>Stability fixes for timeline</li>
 	<li>Defending against issues introduced when using Riot Web on a machine which is running out of disk space</li>
</ul>
</blockquote>
<h2 id="riot-ios">Riot iOS</h2>
<blockquote>
<ul>
 	<li>Grouped notifications are coming! We have added some logs to track why the notification setting is sometimes disables (#2348).</li>
 	<li>SAS device verification is still in progress but it should be released next week.</li>
</ul>
</blockquote>
<h2 id="riot-android">Riot Android</h2>
<blockquote>
<ul>
 	<li>Three releases this week, to fix several bugs with the new EventStreamServiceX, and to fix issue with the Jitsi conference call (Riot.im 0.8.29). FDroid users should receive the upgrade soon.</li>
 	<li>Users are happy with the new notifications!</li>
 	<li>Valere is still working on SAS, we are reaching the end :).</li>
</ul>
</blockquote>
<h2 id="riotx-android">RiotX (Android)</h2>
<blockquote>
<ul>
 	<li>It's now possible to signout from RiotX.</li>
 	<li>The whole setting screen has been imported from Riot, as well as the Themes and some other small features (launcher icon, etc.).</li>
 	<li>Benoit is working on room creation, sdk side, and François is working on image upload.</li>
 	<li>We should start to integrate new design from Nad next week.</li>
</ul>
</blockquote>
<h2 id="continuum-javafx-desktop-client">continuum (JavaFX desktop client)</h2>
<p><a href="https://matrix.to/#/@uforia:matrix.org">yuforia</a> has continued work on their client:</p>
<blockquote>
<p>in <a href="https://github.com/koma-im/continuum-desktop">continuum</a>, moving storage of messages from plain text files to a database, simplifying code and improving performance</p>
</blockquote>
<h2 id="neo">neo</h2>
<p><a href="https://matrix.to/#/@f0x:lain.haus">f0x</a>:</p>
<blockquote>
<p>Neo now has <code>.well-known</code> implemented for login :D<br />video showcasing the different outcomes:</p>
</blockquote>
<video controls="controls" width="640" height="150">
<source src="https://lain.haus/_matrix/media/v1/download/lain.haus/kbCZrSZJhGFYlSZzIIaFPwAH" />
Find the video here: https://lain.haus/_matrix/media/v1/download/lain.haus/kbCZrSZJhGFYlSZzIIaFPwAH
</video>
<h2 id="synapse-k8s-images">Synapse K8s images</h2>
<p><a href="https://github.com/ananace/">Ananace</a> has updated his <a href="https://github.com/ananace/matrix-synapse">k8s images for Synapse</a> 0.99.3, and has been continuing work on other parts of the project:</p>
<blockquote>
<p>I'll be writing a Helm chart for 1.0 as well, just haven't had time to do so yet.<br />I need to update all the references to TLS as well, as that's supposed to be left to kube-lego or cert-manager for a modern install</p>
</blockquote>
<h2 id="federation-tester">Federation Tester</h2>
<p><a href="https://matrix.to/#/@brendan:abolivier.bzh">Brendan</a> and <a href="https://matrix.to/#/@andrewm:amorgan.xyz">anoa</a> have been working on the <a href="/federationtester">Federation Tester</a>:</p>
<blockquote>
<p>Following up on last week's effort, a number of issues on the <a href="/federationtester">Matrix federation tester</a>, both on the backend and the frontend side, have been fixed, including fixing certificate validity checks, not following CNAME records in SRV records, fixing display of the SRV lookup in the UI, preventing some crashes, and a few more.</p>
<p>All outstanding issues on both the federation tester's backend and its frontend that could have preventing people to test efficiently how their server is performing in the context of Synapse's 1.0 release have now been fixed and deployed on <a href="/federationtester/">https://matrix.org/federationtester/</a>.</p>
</blockquote>
<h2 id="synapse-and-riot-bounties">Synapse and Riot bounties</h2>
<p><a href="https://matrix.to/#/@aaron:raim.ist">Aaron Raimist</a> reports:</p>
<blockquote>
<p>A few bounties have been added to Synapse and Riot recently to encourage community members to work on those projects. Although they aren't large enough to actually pay for development, I believe they can serve as a small push to help an already interested developer justify spending some time working on these projects.</p>
<ul>
 	<li><a href="https://github.com/vector-im/riot-web/issues/2349#issuecomment-466777377">$400 bounty on threading in Riot</a> thanks to GitHub user <a href="https://github.com/fallerOfFalls">@fallerOfFalls</a>, expires November 21, 2019</li>
 	<li><a href="https://github.com/matrix-org/synapse/issues/2181#issuecomment-479316364">$200 bounty to fixing stuck invites</a>, expires on January 1, 2020</li>
 	<li><a href="https://github.com/vector-im/riot-web/issues/8246#issuecomment-479318491">$200 bounty to fix Riot forgetting the name of rooms, AKA the "Aaron and 5246 others" bug</a>, expires on January 1, 2020</li>
</ul>
</blockquote>
<h2 id="still-more">Still more</h2>
<p><a href="https://github.com/matrix-org/pantalaimon">pantalaimon</a> has been seen in the wild, even appearing to run on Android. We'll get a little closer to the project and see how it's going in a future edition.</p>
<p><a href="https://matrix.to/#/@TheJJ:matrix.org">jj</a> announced a new Python SDK for Matrix:</p>
<blockquote>
<p>new, alpha quality, matrix python client for asyncio and with support for e2e encryption: <a href="https://github.com/SFTtech/aiomatrix">https://github.com/SFTtech/aiomatrix</a><br />Polishing is needed but the basics do work already :)</p>
</blockquote>
<p><a href="https://matrix.to/#/@lautre:calculate-linux.org">L'autre</a> from <a href="https://www.calculate-linux.org/">Calculate Linux</a> announced that the project is <a href="https://old.calculate-linux.org/blogs/en/730/show">now using Matrix for their communications</a>, you can find their rooms in their newly created community: <a href="https://matrix.to/#/+list:calculate-linux.org">+list:calculate-linux.org</a>.</p>
<p><del><a href="https://images.newrepublic.com/3ee5ecc7b7ba7fa0cd0f6920ede0db5ea121401e.png">George Lucas</a></del> <del><a href="https://en.wikipedia.org/wiki/Gy%C3%B6rgy_Luk%C3%A1cs">György Lukács</a></del> <a href="https://op-co.de/">Georg Lukas</a> <em>brutally skewered</em> Matrix with an April Fool's post suggesting that <a href="https://yaxim.org">yaxim</a>, an XMPP client for Android, <a href="https://yaxim.org/blog/2019/04/01/yaxim-enters-the-matrix/">will begin to support Matrix</a>.</p>
<p>Matrix listed as <a href="https://genr.eu/wp/open-science-top-ten-tools-all-open-source/">one of the &quot;Top Ten Tools&quot; for Open Science practitioners</a></p>
<blockquote>
<p>the whole point of Matrix is that its a protocol which many different suppliers can use so you can avoid nasty lock ins</p>
</blockquote>
<p>That is certainly an advantage!</p>
<h2 id="that-s-all-i-know">That's all I know</h2>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;2019&#x2F;04&#x2F;01&#x2F;synapse-0-99-3-released&#x2F;" title="Synapse 0.99.3 released!">Synapse 0.99.3 released!</a></h1>
            <span>
                01.04.2019 00:00
                —
                <a href="/category/releases">
                    Releases
                </a>
                —
                
                <a href="/author/neil-johnson">
                    Neil Johnson
                </a>
                
            </span>
            
        </header>
        <div>
            <p>Hey hey, a Synapse release for you today.</p>
<p>The big news in 0.99.3 is that the user directory has been completely re-written and should now be much more performant - this will benefit all installations, but especially those housing larger servers.</p>
<p>Aside from that we continue our 1.0 preparations and relatedly we've improved our docs, in particular to explain how .well-known works. On the perf side we've added rate limiting to login and register endpoints as well as now batching up read receipts to send over federation.</p>
<p>I've said it before, and I'll say it again:-</p>
<blockquote>
<p>The most important thing that admins should know is that prior to 1.0 landing later this month, <strong>it is essential that the federation API has a valid TLS certificate - self signed certificates will no longer be accepted.</strong> For more details see our <a href="https://github.com/matrix-org/synapse/blob/master/docs/MSC1711_certificates_FAQ.md">handy guide</a>. Failure to do this will result in being unable to federate with other 1.0 servers.</p>
</blockquote>
<p>As ever, you can get the new update <a href="https://github.com/matrix-org/synapse/releases/tag/v0.99.3">here</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Note, Synapse is now available from PyPI, pick it up <a href="https://pypi.org/project/matrix-synapse/">here</a>. Also, check out our new <a href="/docs/guides/installing-synapse">Synapse installation guide page.</a></p>
<h2 id="synapse-0-99-3-changelog">Synapse 0.99.3 changelog</h2>
<h4 id="features">Features</h4>
<ul>
 	<li>The user directory has been rewritten to make it faster, with less chance of falling behind on a large server. (<a href="https://github.com/matrix-org/synapse/issues/4537">#4537</a>, <a href="https://github.com/matrix-org/synapse/issues/4846">#4846</a>, <a href="https://github.com/matrix-org/synapse/issues/4864">#4864</a>, <a href="https://github.com/matrix-org/synapse/issues/4887">#4887</a>, <a href="https://github.com/matrix-org/synapse/issues/4900">#4900</a>, <a href="https://github.com/matrix-org/synapse/issues/4944">#4944</a>)</li>
 	<li>Add configurable rate limiting to the /register endpoint. (<a href="https://github.com/matrix-org/synapse/issues/4735">#4735</a>, <a href="https://github.com/matrix-org/synapse/issues/4804">#4804</a>)</li>
 	<li>Move server key queries to federation reader. (<a href="https://github.com/matrix-org/synapse/issues/4757">#4757</a>)</li>
 	<li>Add support for /account/3pid REST endpoint to client_reader worker. (<a href="https://github.com/matrix-org/synapse/issues/4759">#4759</a>)</li>
 	<li>Add an endpoint to the admin API for querying the server version. Contributed by Joseph Weston. (<a href="https://github.com/matrix-org/synapse/issues/4772">#4772</a>)</li>
 	<li>Include a default configuration file in the 'docs' directory. (<a href="https://github.com/matrix-org/synapse/issues/4791">#4791</a>, <a href="https://github.com/matrix-org/synapse/issues/4801">#4801</a>)</li>
 	<li>Synapse is now permissive about trailing slashes on some of its federation endpoints, allowing zero or more to be present. (<a href="https://github.com/matrix-org/synapse/issues/4793">#4793</a>)</li>
 	<li>Add support for /keys/query and /keys/changes REST endpoints to client_reader worker. (<a href="https://github.com/matrix-org/synapse/issues/4796">#4796</a>)</li>
 	<li>Add checks to incoming events over federation for events evading auth (aka "soft fail"). (<a href="https://github.com/matrix-org/synapse/issues/4814">#4814</a>)</li>
 	<li>Add configurable rate limiting to the /login endpoint. (<a href="https://github.com/matrix-org/synapse/issues/4821">#4821</a>, <a href="https://github.com/matrix-org/synapse/issues/4865">#4865</a>)</li>
 	<li>Remove trailing slashes from certain outbound federation requests. Retry if receiving a 404. Context: #3622. (<a href="https://github.com/matrix-org/synapse/issues/4840">#4840</a>)</li>
 	<li>Allow passing --daemonize flags to workers in the same way as with master. (<a href="https://github.com/matrix-org/synapse/issues/4853">#4853</a>)</li>
 	<li>Batch up outgoing read-receipts to reduce federation traffic. (<a href="https://github.com/matrix-org/synapse/issues/4890">#4890</a>, <a href="https://github.com/matrix-org/synapse/issues/4927">#4927</a>)</li>
 	<li>Add option to disable searching the user directory. (<a href="https://github.com/matrix-org/synapse/issues/4895">#4895</a>)</li>
 	<li>Add option to disable searching of local and remote public room lists. (<a href="https://github.com/matrix-org/synapse/issues/4896">#4896</a>)</li>
 	<li>Add ability for password providers to login/register a user via 3PID (email, phone). (<a href="https://github.com/matrix-org/synapse/issues/4931">#4931</a>)</li>
</ul>
<h4 id="bugfixes">Bugfixes</h4>
<ul>
 	<li>Fix a bug where media with spaces in the name would get a corrupted name. (<a href="https://github.com/matrix-org/synapse/issues/2090">#2090</a>)</li>
 	<li>Fix attempting to paginate in rooms where server cannot see any events, to avoid unnecessarily pulling in lots of redacted events. (<a href="https://github.com/matrix-org/synapse/issues/4699">#4699</a>)</li>
 	<li>'event_id' is now a required parameter in federated state requests, as per the matrix spec. (<a href="https://github.com/matrix-org/synapse/issues/4740">#4740</a>)</li>
 	<li>Fix tightloop over connecting to replication server. (<a href="https://github.com/matrix-org/synapse/issues/4749">#4749</a>)</li>
 	<li>Fix parsing of Content-Disposition headers on remote media requests and URL previews. (<a href="https://github.com/matrix-org/synapse/issues/4763">#4763</a>)</li>
 	<li>Fix incorrect log about not persisting duplicate state event. (<a href="https://github.com/matrix-org/synapse/issues/4776">#4776</a>)</li>
 	<li>Fix v4v6 option in HAProxy example config. Contributed by Flakebi. (<a href="https://github.com/matrix-org/synapse/issues/4790">#4790</a>)</li>
 	<li>Handle batch updates in worker replication protocol. (<a href="https://github.com/matrix-org/synapse/issues/4792">#4792</a>)</li>
 	<li>Fix bug where we didn't correctly throttle sending of USER_IP commands over replication. (<a href="https://github.com/matrix-org/synapse/issues/4818">#4818</a>)</li>
 	<li>Fix potential race in handling missing updates in device list updates. (<a href="https://github.com/matrix-org/synapse/issues/4829">#4829</a>)</li>
 	<li>Fix bug where synapse expected an un-specced <code>prev_state</code> field on state events. (<a href="https://github.com/matrix-org/synapse/issues/4837">#4837</a>)</li>
 	<li>Transfer a user's notification settings (push rules) on room upgrade. (<a href="https://github.com/matrix-org/synapse/issues/4838">#4838</a>)</li>
 	<li>fix test_auto_create_auto_join_where_no_consent. (<a href="https://github.com/matrix-org/synapse/issues/4886">#4886</a>)</li>
 	<li>Fix a bug where hs_disabled_message was sometimes not correctly enforced. (<a href="https://github.com/matrix-org/synapse/issues/4888">#4888</a>)</li>
 	<li>Fix bug in shutdown room admin API where it would fail if a user in the room hadn't consented to the privacy policy. (<a href="https://github.com/matrix-org/synapse/issues/4904">#4904</a>)</li>
 	<li>Fix bug where blocked world-readable rooms were still peekable. (<a href="https://github.com/matrix-org/synapse/issues/4908">#4908</a>)</li>
</ul>
<h4 id="internal-changes">Internal Changes</h4>
<ul>
 	<li>Add a systemd setup that supports synapse workers. Contributed by Luca Corbatto. (<a href="https://github.com/matrix-org/synapse/issues/4662">#4662</a>)</li>
 	<li>Change from TravisCI to Buildkite for CI. (<a href="https://github.com/matrix-org/synapse/issues/4752">#4752</a>)</li>
 	<li>When presence is disabled don't send over replication. (<a href="https://github.com/matrix-org/synapse/issues/4757">#4757</a>)</li>
 	<li>Minor docstring fixes for MatrixFederationAgent. (<a href="https://github.com/matrix-org/synapse/issues/4765">#4765</a>)</li>
 	<li>Optimise EDU transmission for the federation_sender worker. (<a href="https://github.com/matrix-org/synapse/issues/4770">#4770</a>)</li>
 	<li>Update test_typing to use HomeserverTestCase. (<a href="https://github.com/matrix-org/synapse/issues/4771">#4771</a>)</li>
 	<li>Update URLs for riot.im icons and logos in the default notification templates. (<a href="https://github.com/matrix-org/synapse/issues/4779">#4779</a>)</li>
 	<li>Removed unnecessary $ from some federation endpoint path regexes. (<a href="https://github.com/matrix-org/synapse/issues/4794">#4794</a>)</li>
 	<li>Remove link to deleted title in README. (<a href="https://github.com/matrix-org/synapse/issues/4795">#4795</a>)</li>
 	<li>Clean up read-receipt handling. (<a href="https://github.com/matrix-org/synapse/issues/4797">#4797</a>)</li>
 	<li>Add some debug about processing read receipts. (<a href="https://github.com/matrix-org/synapse/issues/4798">#4798</a>)</li>
 	<li>Clean up some replication code. (<a href="https://github.com/matrix-org/synapse/issues/4799">#4799</a>)</li>
 	<li>Add some docstrings. (<a href="https://github.com/matrix-org/synapse/issues/4815">#4815</a>)</li>
 	<li>Add debug logger to try and track down #4422. (<a href="https://github.com/matrix-org/synapse/issues/4816">#4816</a>)</li>
 	<li>Make shutdown API send explanation message to room after users have been forced joined. (<a href="https://github.com/matrix-org/synapse/issues/4817">#4817</a>)</li>
 	<li>Update example_log_config.yaml. (<a href="https://github.com/matrix-org/synapse/issues/4820">#4820</a>)</li>
 	<li>Document the <code>generate</code> option for the docker image. (<a href="https://github.com/matrix-org/synapse/issues/4824">#4824</a>)</li>
 	<li>Fix check-newsfragment for debian-only changes. (<a href="https://github.com/matrix-org/synapse/issues/4825">#4825</a>)</li>
 	<li>Add some debug logging for device list updates to help with #4828. (<a href="https://github.com/matrix-org/synapse/issues/4828">#4828</a>)</li>
 	<li>Improve federation documentation, specifically .well-known support. Many thanks to @vaab. (<a href="https://github.com/matrix-org/synapse/issues/4832">#4832</a>)</li>
 	<li>Disable captcha registration by default in unit tests. (<a href="https://github.com/matrix-org/synapse/issues/4839">#4839</a>)</li>
 	<li>Add stuff back to the .gitignore. (<a href="https://github.com/matrix-org/synapse/issues/4843">#4843</a>)</li>
 	<li>Clarify what registration_shared_secret allows for. (<a href="https://github.com/matrix-org/synapse/issues/4844">#4844</a>)</li>
 	<li>Correctly log expected errors when fetching server keys. (<a href="https://github.com/matrix-org/synapse/issues/4847">#4847</a>)</li>
 	<li>Update install docs to explicitly state a full-chain (not just the top-level) TLS certificate must be provided to Synapse. This caused some people's Synapse ports to appear correct in a browser but still (rightfully so) upset the federation tester. (<a href="https://github.com/matrix-org/synapse/issues/4849">#4849</a>)</li>
 	<li>Move client read-receipt processing to federation sender worker. (<a href="https://github.com/matrix-org/synapse/issues/4852">#4852</a>)</li>
 	<li>Refactor federation TransactionQueue. (<a href="https://github.com/matrix-org/synapse/issues/4855">#4855</a>)</li>
 	<li>Comment out most options in the generated config. (<a href="https://github.com/matrix-org/synapse/issues/4863">#4863</a>)</li>
 	<li>Fix yaml library warnings by using safe_load. (<a href="https://github.com/matrix-org/synapse/issues/4869">#4869</a>)</li>
 	<li>Update Apache setup to remove location syntax. Thanks to @cwmke! (<a href="https://github.com/matrix-org/synapse/issues/4870">#4870</a>)</li>
 	<li>Reinstate test case that runs unit tests against oldest supported dependencies. (<a href="https://github.com/matrix-org/synapse/issues/4879">#4879</a>)</li>
 	<li>Update link to federation docs. (<a href="https://github.com/matrix-org/synapse/issues/4881">#4881</a>)</li>
 	<li>fix test_auto_create_auto_join_where_no_consent. (<a href="https://github.com/matrix-org/synapse/issues/4886">#4886</a>)</li>
 	<li>Use a regular HomeServerConfig object for unit tests rater than a Mock. (<a href="https://github.com/matrix-org/synapse/issues/4889">#4889</a>)</li>
 	<li>Add some notes about tuning postgres for larger deployments. (<a href="https://github.com/matrix-org/synapse/issues/4895">#4895</a>)</li>
 	<li>Add a config option for torture-testing worker replication. (<a href="https://github.com/matrix-org/synapse/issues/4902">#4902</a>)</li>
 	<li>Log requests which are simulated by the unit tests. (<a href="https://github.com/matrix-org/synapse/issues/4905">#4905</a>)</li>
 	<li>Allow newsfragments to end with exclamation marks. Exciting! (<a href="https://github.com/matrix-org/synapse/issues/4912">#4912</a>)</li>
 	<li>Refactor some more tests to use HomeserverTestCase. (<a href="https://github.com/matrix-org/synapse/issues/4913">#4913</a>)</li>
 	<li>Refactor out the state deltas portion of the user directory store and handler. (<a href="https://github.com/matrix-org/synapse/issues/4917">#4917</a>)</li>
 	<li>Fix nginx example in ACME doc. (<a href="https://github.com/matrix-org/synapse/issues/4923">#4923</a>)</li>
 	<li>Use an explicit dbname for postgres connections in the tests. (<a href="https://github.com/matrix-org/synapse/issues/4928">#4928</a>)</li>
 	<li>Fix <code>ClientReplicationStreamProtocol.__str__()</code>. (<a href="https://github.com/matrix-org/synapse/issues/4929">#4929</a>)</li>
</ul>

        </div>
    </article>
    
    <article class="post">
        <header>
            <h1><a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;2019&#x2F;03&#x2F;29&#x2F;this-week-in-matrix-2019-03-29&#x2F;" title="This Week in Matrix 2019-03-29">This Week in Matrix 2019-03-29</a></h1>
            <span>
                29.03.2019 00:00
                —
                <a href="/category/this-week-in-matrix">
                    This Week in Matrix
                </a>
                —
                
                <a href="/author/ben-parsons">
                    Ben Parsons
                </a>
                
            </span>
            
        </header>
        <div>
            <h2 id="matrix-live">Matrix Live</h2>
<p>Tom &amp; Matthew talk through the <a href="https://github.com/vector-im/riot-web/projects/16">newly published Riot/Web roadmap</a>! Be sure to read <a href="https://medium.com/@RiotChat/whats-next-for-riot-web-be48f948c801">Tom's blog post which gets into his thinking for the roadmap</a> too.</p>
<iframe src="https://www.youtube.com/embed/-pKHn0pittY" frameBorder="0" allowFullScreen="allowfullscreen"></iframe>
<h2 id="matrix-org-homeserver-notice">Matrix.org homeserver notice</h2>
<p>The matrix.org homeserver will be down for essential database maintenance between 12:00 and 12:30 UTC on 2019-04-01</p>
<h2 id="synapse">Synapse</h2>
<p>Neil, Synapse overseer, reports on the acceleration towards <em>1.0</em>:</p>
<blockquote>
<p>We have much improved sytest support for Synapse worker mode, Hawkowl landed a brand new super fast super shiny user directory implementation, Brendan fixed a bunch of niggles in <a href="/federationtester">the federation tester</a> and we <em>finally</em> got to the bottom of our <a href="https://github.com/matrix-org/synapse/pull/4956">sync caching bug that obscured accepting invites</a> (thanks richvdh for sticking with it). Erik solved our presence spamming bug and anoa fixed some LDAP auth bugs and submitted a PR for certificate checking - one of our final blockers for Synapse 1.0. For all the latest checkout out our latest release candidate <a href="https://github.com/matrix-org/synapse/releases/tag/v0.99.3rc1">0.99.3rc1</a>.<br />
Next week, we'll ship 0.99.3, we'll be looking at <a href="https://github.com/matrix-org/synapse/issues/4364">server key validity periods</a>, adding a <a href="https://github.com/matrix-org/matrix-doc/pull/1915">3PID unbind API</a> and starting work on tuning low powered Synapse installations.<br />
<a href="https://www.arewereadyyet.com/">https://www.arewereadyyet.com/</a> is still rising so keep banging to everyone you know that they ensure their federation certificates are valid.</p>
</blockquote>
<p><a href="/blog/wp-content/uploads/2019/03/Screenshot-2019-03-29-at-18.38.23.png"><img class="alignnone size-full wp-image-4155" src="/blog/wp-content/uploads/2019/03/Screenshot-2019-03-29-at-18.38.23.png" alt="" width="429" height="339" /></a></p>
<h2 id="pantalaimon">Pantalaimon</h2>
<p><a href="https://github.com/poljar">poljar</a> gave this update on his new project <a href="https://github.com/matrix-org/pantalaimon">Pantalaimon</a>:</p>
<blockquote>
<p><a href="https://github.com/matrix-org/pantalaimon">Pantalaimon</a> is a new project that acts as a reverse proxy for clients to connect to. Once a client is connected Pantalaimon handles end to end encryption for the client transparently.<br />
The project is only a week old but already at a working prototype phase. A demo can be found here: <a href="http://webmshare.com/play/Qn4wg">http://webmshare.com/play/Qn4wg</a></p>
</blockquote>
<p>This is a huge gain! Use of this project, as you will see in the video, permits any Matrix client to support End-to-End encryption of messages, by handling encryption/decryption in a daemon rather than in the client.</p>
<p><a href="http://webmshare.com/play/Qn4wg">Watch the video</a>, and you'll see <a href="https://github.com/tulir/gomuks">gomuks</a>, which does not support encryption, chatting in an encrypted room. Also, go chat in <a href="https://matrix.to/#/#pantalaimon:matrix.org">#pantalaimon:matrix.org</a> and get involved!</p>
<p><a href="/blog/wp-content/uploads/2019/03/Screenshot-2019-03-29-at-18.55.05.png"><img class="alignnone size-large wp-image-4161" src="/blog/wp-content/uploads/2019/03/Screenshot-2019-03-29-at-18.55.05-1024x535.png" alt="" width="1024" height="535" /></a></p>
<h2 id="construct">Construct</h2>
<p>Report from the Construct team:</p>
<blockquote>
<p>The matrix Construct server has made significant progress this week implementing the 1.0 specification and is very close to a 1.0 release! Special thanks to our star tester Yan Minari and expert Matrix consultants Tulir and Max and C++ developers Jason of Zemos and Mujx of nheko for all their hard work to make this happen. The Construct now fully supports IPv6 and is ready to participate in fully end-to-to-end encrypted ipv6 networks like <code>#yggdrasil:matrix.org</code> and <code>#cjdns:matrix.org</code>.<br />This week also saw additions for .well-known support, <code>m.fully_read</code> and even DNS caching inside a matrix room shared between servers (which is really cool if you ask me).</p>
<p>I'd like to recognize our testers for their invaluable contributions this week, only a fraction of which are documented here: <a href="https://github.com/matrix-construct/construct/issues">https://github.com/matrix-construct/construct/issues</a> leading to the 1.0 release.</p>
</blockquote>
<blockquote>
<p>The Construct is written in C++ for maximum performance and scalability. It is the first fully federating server after the Synapse reference implementation. Your contributions in code and participation are essential to bring Construct to its upcoming release; get involved at <a href="https://github.com/matrix-construct/construct">https://github.com/matrix-construct/construct</a> and in <a href="https://matrix.to/#/#zemos-test:matrix.org">#zemos-test:matrix.org</a>.</p>
</blockquote>
<h2 id="riot-web">Riot Web</h2>
<p>From the team:</p>
<blockquote>
<p>We've been upgrading and optimising our Jitsi instance so people should see more reliable video conference calls, especially if they avoid connecting from Firefox over poor connections.<br />We've been squashing scroll jumps (where the timeline pops out of position unexpectedly due to images loading, etc.). We've come up with a radical reimplementation of the timeline (which should be imperceptible, except it doesn't jump) - try it out on <a href="https://riot.im/develop">https://riot.im/develop</a> now.</p>
</blockquote>
<p>Bruno, who has been working on scroll functional for Riot deserves a call-out - scrolling in new Riot web works great, and he may now be the most qualified dev on <code>scroll: anchor</code> outside of Mozilla or Google…</p>
<p>You can now get all Riot updates from <a href="https://matrix.to/#/#riot-web-announcements:matrix.org">#riot-web-announcements:matrix.org</a>, the official room of Riot web announcements! You can especially get this update, which was also featured on Twitter:</p>
<blockquote>
<p dir="ltr" lang="en">Attention Riot Web Admins! We reset Scalar tokens to address a potential security vuln. with some clients - if you run your own Riot instance please upgrade to at least v1.0.4 to keep using integrations (widgets, sticker picker, any bots and bridges configured through Scalar).</p>
<p>— Riot.im (@RiotChat) <a href="https://twitter.com/RiotChat/status/1110937638847111173?ref_src=twsrc%5Etfw">March 27, 2019</a></p>
</blockquote>
<p>Please upgrade your Riot web instances!</p>
<p>Additionally, <a href="https://matrix.to/#/@pacien:pacien.net">Notkea</a> has <a href="https://github.com/NixOS/nixpkgs/pull/57838">packaged Riot desktop for NixOS</a>.</p>
<h2 id="riot-ios">Riot iOS</h2>
<blockquote>
<p>Another case of UTD (<a href="https://github.com/vector-im/riot-ios/issues/2320">https://github.com/vector-im/riot-ios/issues/2320</a>) has been fixed. Some logs have been added to track push notifications that disabled themselves. SAS verification implementation is still in progress.</p>
</blockquote>
<p>UTD = &quot;Unable to Decrypt&quot;, messages as seen in Riot</p>
<h2 id="riot-android">Riot Android</h2>
<blockquote>
<ul>
 	<li>Rework of EventStreamService, to fix many issues (crash) reported by users. The feature is available on the develop branch.</li>
 	<li>Also we are trying to upgrade Jitsi library, to fix other errors reported by users.</li>
 	<li>SAS verification implementation is still in progress.</li>
</ul>
</blockquote>
<p>Also, you may have already seen the use of Android 9-style notifications, featuring &quot;Mark as read&quot; + &quot;Quick reply&quot; buttons. This addition has started to make Riot Android my client of choice for burning through notifying rooms.</p>
<h2 id="riotx-android">RiotX (Android)</h2>
<blockquote>
<ul>
 	<li>Phase 1 started!</li>
 	<li>Backporting RageShake feature, with better handshake detection.</li>
 	<li>We are still fighting bug on the timeline rendering.</li>
</ul>
</blockquote>
<h2 id="nheko-packaging">nheko packaging</h2>
<p><a href="https://matrix.to/#/@adridg:matrix.org">@adridg:matrix.org</a>:</p>
<blockquote>
<p>Quick note that nheko (v 0.6.3) is now packaged for FreeBSD as well. The C++ code was fine (we use Clang, that does trip up some people) but I have Opinions about the CMake code (in particular that the find code for nlohmann/json.hpp, lmdb++.h and tweeny.h could use a lot of work -- if I feel perky I may come up with a PR). Thanks for the good work!</p>
</blockquote>
<h2 id="dart-sdks">Dart SDKs</h2>
<p><a href="https://matrix.to/#/@bhat:encom.eu.org">Black Hat</a> has been using Dart and Flutter this week, and is making progress with an SDK and reference client:</p>
<blockquote>
<p>I am trying to use libaqueous(Matrix Dart SDK) to create a cross-platform matrix client for Android and iOS.<br /><del>Almost nothing works except</del> Already a significant number of client features are available: <strong>login/logout, room list, basic timeline and message posting</strong></p>
</blockquote>
<blockquote>
<p>Flutter is quite good for rapidly building mobile apps. ? Strong-typed json serialization/deserialization in Dart is a bit difficult at first, but I managed to solve that.<br />the repo is <a href="https://gitlab.com/b0/aqueous">here</a>, the SDK is <a href="https://gitlab.com/b0/libaqueous">here</a>, and the room for discussion is at <a href="https://matrix.to/#/#libaqueous:encom.eu.org">#libaqueous:encom.eu.org</a></p>
<p>Debug build apk from Gitlab CI is <a href="https://gitlab.com/b0/aqueous/-/jobs/artifacts/master/raw/build/app/outputs/apk/debug/app-debug.apk?job=build-debug">here</a></p>
</blockquote>
<p><a href="/blog/wp-content/uploads/2019/03/libaq1.jpg"><img class="alignnone size-large wp-image-4151" src="/blog/wp-content/uploads/2019/03/libaq1-529x1024.jpg" alt="" width="529" height="1024" /></a> <a href="/blog/wp-content/uploads/2019/03/libaq3.jpg"><img class="alignnone size-large wp-image-4152" src="/blog/wp-content/uploads/2019/03/libaq3-530x1024.jpg" alt="" width="530" height="1024" /></a> <a href="/blog/wp-content/uploads/2019/03/libaq2.jpg"><img class="alignnone size-large wp-image-4153" src="/blog/wp-content/uploads/2019/03/libaq2-530x1024.jpg" alt="" width="530" height="1024" /></a></p>
<h2 id="notes-on-manually-upgrading-rooms-from-travisr">Notes on manually upgrading rooms, from TravisR</h2>
<p><a href="https://github.com/turt2live">TravisR</a> has written a brief guide to manually upgrading rooms:</p>
<p><a href="https://gist.github.com/turt2live/a99c8e794d6115d4ddfaadb72aabf063">https://gist.github.com/turt2live/a99c8e794d6115d4ddfaadb72aabf063</a></p>
<p>Note that you generally won't need to do this.</p>
<h2 id="that-s-all-i-know">That's all I know</h2>
<p>See you next week, and be sure to stop by <a href="https://matrix.to/#/#TWIM:matrix.org">#twim:matrix.org</a> with your updates!</p>

        </div>
    </article>
    
    <nav class="pagination">
    <div class="prev">
        
        <a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;page&#x2F;40&#x2F;">‹ Previous</a>
        
    </div>
    <span class="page-number">41 / 68</span>
    <div class="prev">
        
        <a href="https:&#x2F;&#x2F;matrix.turbo.fish&#x2F;blog&#x2F;page&#x2F;42&#x2F;">Next ›</a>
        
    </div>
</nav>

</div>
    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;security-hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p><a href="/legal/copyright-notice">Copyright Notice</a></p>
</footer>

</body>

</html>
