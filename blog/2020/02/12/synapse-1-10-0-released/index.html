<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - Synapse 1.10.0 released</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/png" href="/assets/favicon.png" />
    <link rel="stylesheet" href="/style.css" />

    


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "NewsArticle",
    "headline": "Synapse 1.10.0 released",
    "datePublished": "2020-02-12T00:00+00:00",
    
    "author": [
    
    {
        "@type": "Person",
        "name": "Neil Johnson",
        "url": "//authors/neil-johnson"
    }
    
    ]
}
</script>
</head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            current">
            Blog
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <a href="&#x2F;docs&#x2F;" class="section ">
                Documentation
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    
                    
                    <a href="&#x2F;docs&#x2F;users&#x2F;">Users</a>
                    
                    
                    <a href="&#x2F;docs&#x2F;communities&#x2F;">Communities</a>
                    
                    
                    <a href="&#x2F;docs&#x2F;legacy&#x2F;">Legacy documentation</a>
                    
                </div>
            </div>
        </div>
        
        
        
        
        
        <div class="section-wrap">
            <a href="&#x2F;ecosystem&#x2F;" class="section ">
                Ecosystem
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bots&#x2F;">Bots</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        
<article class="content post with-sidebar">
    <header>
        <h1>Synapse 1.10.0 released</h1>
        <span>12.02.2020 00:00 — <a
                href="/category/general">General</a>
             — <a href="/author/neil-johnson">Neil Johnson</a>
        </span>
        
    </header>
    <div class="post-main">
        <div class="post-content">
            <p>The whole Matrix project is racing towards enabling e2ee by default. Synapse is no different and v1.10.0 contains multiple e2ee UX improvements, as well as a bug fix that prevented cross signing requests over federation to work reliably.</p>
<p><em>If</em> any of your users are on the bleeding edge and have already started using cross signing (by enabling labs flags in Riot), then it will be necessary for them to force Synapse to re-send device updates by renaming all of their devices.</p>
<p>We've also included a temporary fix to address alias abuse. The idea is that until <a href="https://github.com/matrix-org/synapse/issues/6898">#6898</a> lands, servers will refrain from sharing events of type <code>m.room.aliases</code> with clients. Most admins will not be affected, but if you are present in rooms subject to alias abuse, then upgrading provides a pragmatic short term solution.</p>
<p>Finally, as of this release Synapse validates <code>client_secret</code> parameters in the Client-Server API as per the spec. See <a href="https://github.com/matrix-org/synapse/issues/6766">#6766</a> for details.</p>
<p>Get the new release from <a href="https://github.com/matrix-org/synapse/releases/tag/v1.10.0">github</a> or any of the sources mentioned at https://github.com/matrix-org/synapse/blob/master/INSTALL.md.</p>
<p>Changelog since Synapse 1.9.0</p>
<h1 id="synapse-1-10-0-2020-02-12">Synapse 1.10.0 (2020-02-12)</h1>
<p><strong>WARNING to client developers</strong>: As of this release Synapse validates <code>client_secret</code> parameters in the Client-Server API as per the spec. See <a href="https://github.com/matrix-org/synapse/issues/6766">#6766</a> for details.</p>
<h2 id="updates-to-the-docker-image">Updates to the Docker image</h2>
<ul>
<li>Update the docker images to Alpine Linux 3.11. (<a href="https://github.com/matrix-org/synapse/issues/6897">#6897</a>)</li>
</ul>
<h1 id="synapse-1-10-0rc5-2020-02-11">Synapse 1.10.0rc5 (2020-02-11)</h1>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix the filtering introduced in 1.10.0rc3 to also apply to the state blocks returned by <code>/sync</code>. (<a href="https://github.com/matrix-org/synapse/issues/6884">#6884</a>)</li>
</ul>
<h1 id="synapse-1-10-0rc4-2020-02-11">Synapse 1.10.0rc4 (2020-02-11)</h1>
<p>This release candidate was built incorrectly and is superseded by 1.10.0rc5.</p>
<h1 id="synapse-1-10-0rc3-2020-02-10">Synapse 1.10.0rc3 (2020-02-10)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Filter out <code>m.room.aliases</code> from the CS API to mitigate abuse while a better solution is specced. (<a href="https://github.com/matrix-org/synapse/issues/6878">#6878</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Fix continuous integration failures with old versions of <code>pip</code>, which were introduced by a release of the <code>zipp</code> library. (<a href="https://github.com/matrix-org/synapse/issues/6880">#6880</a>)</li>
</ul>
<h1 id="synapse-1-10-0rc2-2020-02-06">Synapse 1.10.0rc2 (2020-02-06)</h1>
<h2 id="bugfixes-1">Bugfixes</h2>
<ul>
<li>Fix an issue with cross-signing where device signatures were not sent to remote servers. (<a href="https://github.com/matrix-org/synapse/issues/6844">#6844</a>)</li>
<li>Fix to the unknown remote device detection which was introduced in 1.10.rc1. (<a href="https://github.com/matrix-org/synapse/issues/6848">#6848</a>)</li>
</ul>
<h2 id="internal-changes-1">Internal Changes</h2>
<ul>
<li>Detect unexpected sender keys on remote encrypted events and resync device lists. (<a href="https://github.com/matrix-org/synapse/issues/6850">#6850</a>)</li>
</ul>
<h1 id="synapse-1-10-0rc1-2020-01-31">Synapse 1.10.0rc1 (2020-01-31)</h1>
<h2 id="features-1">Features</h2>
<ul>
<li>Add experimental support for updated authorization rules for aliases events, from <a href="https://github.com/matrix-org/matrix-doc/pull/2260">MSC2260</a>. (<a href="https://github.com/matrix-org/synapse/issues/6787">#6787</a>, <a href="https://github.com/matrix-org/synapse/issues/6790">#6790</a>, <a href="https://github.com/matrix-org/synapse/issues/6794">#6794</a>)</li>
</ul>
<h2 id="bugfixes-2">Bugfixes</h2>
<ul>
<li>Warn if postgres database has a non-C locale, as that can cause issues when upgrading locales (e.g. due to upgrading OS). (<a href="https://github.com/matrix-org/synapse/issues/6734">#6734</a>)</li>
<li>Minor fixes to <code>PUT /_synapse/admin/v2/users</code> admin api. (<a href="https://github.com/matrix-org/synapse/issues/6761">#6761</a>)</li>
<li>Validate <code>client_secret</code> parameter using the regex provided by the Client-Server API, temporarily allowing <code>:</code> characters for older clients. The <code>:</code> character will be removed in a future release. (<a href="https://github.com/matrix-org/synapse/issues/6767">#6767</a>)</li>
<li>Fix persisting redaction events that have been redacted (or otherwise don't have a redacts key). (<a href="https://github.com/matrix-org/synapse/issues/6771">#6771</a>)</li>
<li>Fix outbound federation request metrics. (<a href="https://github.com/matrix-org/synapse/issues/6795">#6795</a>)</li>
<li>Fix bug where querying a remote user's device keys that weren't cached resulted in only returning a single device. (<a href="https://github.com/matrix-org/synapse/issues/6796">#6796</a>)</li>
<li>Fix race in federation sender worker that delayed sending of device updates. (<a href="https://github.com/matrix-org/synapse/issues/6799">#6799</a>, <a href="https://github.com/matrix-org/synapse/issues/6800">#6800</a>)</li>
<li>Fix bug where Synapse didn't invalidate cache of remote users' devices when Synapse left a room. (<a href="https://github.com/matrix-org/synapse/issues/6801">#6801</a>)</li>
<li>Fix waking up other workers when remote server is detected to have come back online. (<a href="https://github.com/matrix-org/synapse/issues/6811">#6811</a>)</li>
</ul>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Clarify documentation related to <code>user_dir</code> and <code>federation_reader</code> workers. (<a href="https://github.com/matrix-org/synapse/issues/6775">#6775</a>)</li>
</ul>
<h2 id="internal-changes-2">Internal Changes</h2>
<ul>
<li>Record room versions in the <code>rooms</code> table. (<a href="https://github.com/matrix-org/synapse/issues/6729">#6729</a>, <a href="https://github.com/matrix-org/synapse/issues/6788">#6788</a>, <a href="https://github.com/matrix-org/synapse/issues/6810">#6810</a>)</li>
<li>Propagate cache invalidates from workers to other workers. (<a href="https://github.com/matrix-org/synapse/issues/6748">#6748</a>)</li>
<li>Remove some unnecessary admin handler abstraction methods. (<a href="https://github.com/matrix-org/synapse/issues/6751">#6751</a>)</li>
<li>Add some debugging for media storage providers. (<a href="https://github.com/matrix-org/synapse/issues/6757">#6757</a>)</li>
<li>Detect unknown remote devices and mark cache as stale. (<a href="https://github.com/matrix-org/synapse/issues/6776">#6776</a>, <a href="https://github.com/matrix-org/synapse/issues/6819">#6819</a>)</li>
<li>Attempt to resync remote users' devices when detected as stale. (<a href="https://github.com/matrix-org/synapse/issues/6786">#6786</a>)</li>
<li>Delete current state from the database when server leaves a room. (<a href="https://github.com/matrix-org/synapse/issues/6792">#6792</a>)</li>
<li>When a client asks for a remote user's device keys check if the local cache for that user has been marked as potentially stale. (<a href="https://github.com/matrix-org/synapse/issues/6797">#6797</a>)</li>
<li>Add background update to clean out left rooms from current state. (<a href="https://github.com/matrix-org/synapse/issues/6802">#6802</a>, <a href="https://github.com/matrix-org/synapse/issues/6816">#6816</a>)</li>
<li>Refactoring work in preparation for changing the event redaction algorithm. (<a href="https://github.com/matrix-org/synapse/issues/6803">#6803</a>, <a href="https://github.com/matrix-org/synapse/issues/6805">#6805</a>, <a href="https://github.com/matrix-org/synapse/issues/6806">#6806</a>, <a href="https://github.com/matrix-org/synapse/issues/6807">#6807</a>, <a href="https://github.com/matrix-org/synapse/issues/6820">#6820</a>)</li>
</ul>

        </div>
        
        <aside>
            <h3>Post Contents</h3>

            <ul style="list-style: none; padding-left: 0px;">
                
                <li>
                    <a href="/blog/2020/02/12/synapse-1-10-0-released/#synapse-1-10-0-2020-02-12">Synapse 1.10.0 (2020-02-12)</a>
                    
                    <ul>
                        
                        <li>
                            <a href="/blog/2020/02/12/synapse-1-10-0-released/#updates-to-the-docker-image">Updates to the Docker image</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li>
                    <a href="/blog/2020/02/12/synapse-1-10-0-released/#synapse-1-10-0rc5-2020-02-11">Synapse 1.10.0rc5 (2020-02-11)</a>
                    
                    <ul>
                        
                        <li>
                            <a href="/blog/2020/02/12/synapse-1-10-0-released/#bugfixes">Bugfixes</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li>
                    <a href="/blog/2020/02/12/synapse-1-10-0-released/#synapse-1-10-0rc4-2020-02-11">Synapse 1.10.0rc4 (2020-02-11)</a>
                    
                </li>
                
                <li>
                    <a href="/blog/2020/02/12/synapse-1-10-0-released/#synapse-1-10-0rc3-2020-02-10">Synapse 1.10.0rc3 (2020-02-10)</a>
                    
                    <ul>
                        
                        <li>
                            <a href="/blog/2020/02/12/synapse-1-10-0-released/#features">Features</a>
                        </li>
                        
                        <li>
                            <a href="/blog/2020/02/12/synapse-1-10-0-released/#internal-changes">Internal Changes</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li>
                    <a href="/blog/2020/02/12/synapse-1-10-0-released/#synapse-1-10-0rc2-2020-02-06">Synapse 1.10.0rc2 (2020-02-06)</a>
                    
                    <ul>
                        
                        <li>
                            <a href="/blog/2020/02/12/synapse-1-10-0-released/#bugfixes-1">Bugfixes</a>
                        </li>
                        
                        <li>
                            <a href="/blog/2020/02/12/synapse-1-10-0-released/#internal-changes-1">Internal Changes</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li>
                    <a href="/blog/2020/02/12/synapse-1-10-0-released/#synapse-1-10-0rc1-2020-01-31">Synapse 1.10.0rc1 (2020-01-31)</a>
                    
                    <ul>
                        
                        <li>
                            <a href="/blog/2020/02/12/synapse-1-10-0-released/#features-1">Features</a>
                        </li>
                        
                        <li>
                            <a href="/blog/2020/02/12/synapse-1-10-0-released/#bugfixes-2">Bugfixes</a>
                        </li>
                        
                        <li>
                            <a href="/blog/2020/02/12/synapse-1-10-0-released/#improved-documentation">Improved Documentation</a>
                        </li>
                        
                        <li>
                            <a href="/blog/2020/02/12/synapse-1-10-0-released/#internal-changes-2">Internal Changes</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
            </ul>
        </aside>
        
    </div>
</article>

    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;security-hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="&#x2F;code"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p>© 2022 The Matrix.org Foundation C.I.C.</p>
</footer>

</body>

</html>
