<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - Synapse 1.6.0 released</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/png" href="/assets/favicon.png" />
    <link rel="stylesheet" href="/style.css" />

    


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "NewsArticle",
    "headline": "Synapse 1.6.0 released",
    "datePublished": "2019-11-26T00:00+00:00",
    
    "author": [
    
    {
        "@type": "Person",
        "name": "Neil Johnson",
        "url": "//authors/neil-johnson"
    }
    
    ]
}
</script>
</head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo-white.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            current">
            Blog
        </a>
        
        
        
        <a href="&#x2F;docs&#x2F;" class="
            ">
            Documentation
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <input id="ecosystem-submenu-checkbox" type="checkbox" class="submenu-checkbox" aria-hidden="true" >
            <label for="ecosystem-submenu-checkbox" class="submenu-title">Ecosystem <div class="arrow"></div></label>

            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bots&#x2F;">Bots</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        
<article class="content post with-sidebar">
    <header>
        <h1>Synapse 1.6.0 released</h1>
        <span>26.11.2019 00:00 — <a
                href="/category/releases">Releases</a>
             — <a href="/author/neil-johnson">Neil Johnson</a>
        </span>
        
    </header>
    <div class="post-main">
        <div class="post-content">
            <p>Synapse 1.6.0 has landed and is here to brighten your day!</p>
<p>1.6.0's most notable feature is that of label based filtering. It allows for messages to be tagged with a given label so that clients can filter on the label, this means that clients can subscribe to specific topics in a room, such as #lunch.</p>
<p>Completely separately, from here on in new rooms will be version 5 by default, all this means in practice is that servers will respect server signing key validity periods. This won't make a lot of difference in day to day operation, but it is an important security consideration and we now have sufficient penetration across the federation to make version 5 the default.</p>
<p>Aside from that there are a bunch of bug fixes and improvements, including fixing a bug that in some cases prevented messages being decrypted shortly after a restart (<a href="https://github.com/matrix-org/synapse/issues/6363">#6363</a>) and generally improving the room upgrade experience (<a href="https://github.com/matrix-org/synapse/issues/6232">#6232</a>, <a href="https://github.com/matrix-org/synapse/issues/6235">#6235</a>).</p>
<p>As ever, you can get the new update <a href="https://github.com/matrix-org/synapse/releases/tag/v1.6.0">here</a> or any of the sources mentioned at <a href="https://github.com/matrix-org/synapse">https://github.com/matrix-org/synapse</a>. Also, check out our <a href="https://matrix.org/docs/guides/installing-synapse">Synapse installation guide page</a></p>
<p>The changelog since 1.5.1 follows:</p>
<h1 id="synapse-1-6-0-2019-11-26">Synapse 1.6.0 (2019-11-26)</h1>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix phone home stats reporting. (<a href="https://github.com/matrix-org/synapse/issues/6418">#6418</a>)</li>
</ul>
<h1 id="synapse-1-6-0rc2-2019-11-25">Synapse 1.6.0rc2 (2019-11-25)</h1>
<h2 id="bugfixes-1">Bugfixes</h2>
<ul>
<li>Fix a bug which could cause the background database update handler for event labels to get stuck in a loop raising exceptions. (<a href="https://github.com/matrix-org/synapse/issues/6407">#6407</a>)</li>
</ul>
<h1 id="synapse-1-6-0rc1-2019-11-20">Synapse 1.6.0rc1 (2019-11-20)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Add federation support for cross-signing. (<a href="https://github.com/matrix-org/synapse/issues/5727">#5727</a>)</li>
<li>Increase default room version from 4 to 5, thereby enforcing server key validity period checks. (<a href="https://github.com/matrix-org/synapse/issues/6220">#6220</a>)</li>
<li>Add support for outbound http proxying via http_proxy/HTTPS_PROXY env vars. (<a href="https://github.com/matrix-org/synapse/issues/6238">#6238</a>)</li>
<li>Implement label-based filtering on <code>/sync</code> and <code>/messages</code> (<a href="https://github.com/matrix-org/matrix-doc/pull/2326">MSC2326</a>). (<a href="https://github.com/matrix-org/synapse/issues/6301">#6301</a>, <a href="https://github.com/matrix-org/synapse/issues/6310">#6310</a>, <a href="https://github.com/matrix-org/synapse/issues/6340">#6340</a>)</li>
</ul>
<h2 id="bugfixes-2">Bugfixes</h2>
<ul>
<li>Fix LruCache callback deduplication for Python 3.8. Contributed by @V02460. (<a href="https://github.com/matrix-org/synapse/issues/6213">#6213</a>)</li>
<li>Remove a room from a server's public rooms list on room upgrade. (<a href="https://github.com/matrix-org/synapse/issues/6232">#6232</a>, <a href="https://github.com/matrix-org/synapse/issues/6235">#6235</a>)</li>
<li>Delete keys from key backup when deleting backup versions. (<a href="https://github.com/matrix-org/synapse/issues/6253">#6253</a>)</li>
<li>Make notification of cross-signing signatures work with workers. (<a href="https://github.com/matrix-org/synapse/issues/6254">#6254</a>)</li>
<li>Fix exception when remote servers attempt to join a room that they're not allowed to join. (<a href="https://github.com/matrix-org/synapse/issues/6278">#6278</a>)</li>
<li>Prevent errors from appearing on Synapse startup if <code>git</code> is not installed. (<a href="https://github.com/matrix-org/synapse/issues/6284">#6284</a>)</li>
<li>Appservice requests will no longer contain a double slash prefix when the appservice url provided ends in a slash. (<a href="https://github.com/matrix-org/synapse/issues/6306">#6306</a>)</li>
<li>Fix <code>/purge_room</code> admin API. (<a href="https://github.com/matrix-org/synapse/issues/6307">#6307</a>)</li>
<li>Fix the <code>hidden</code> field in the <code>devices</code> table for SQLite versions prior to 3.23.0. (<a href="https://github.com/matrix-org/synapse/issues/6313">#6313</a>)</li>
<li>Fix bug which caused rejected events to be persisted with the wrong room state. (<a href="https://github.com/matrix-org/synapse/issues/6320">#6320</a>)</li>
<li>Fix bug where <code>rc_login</code> ratelimiting would prematurely kick in. (<a href="https://github.com/matrix-org/synapse/issues/6335">#6335</a>)</li>
<li>Prevent the server taking a long time to start up when guest registration is enabled. (<a href="https://github.com/matrix-org/synapse/issues/6338">#6338</a>)</li>
<li>Fix bug where upgrading a guest account to a full user would fail when account validity is enabled. (<a href="https://github.com/matrix-org/synapse/issues/6359">#6359</a>)</li>
<li>Fix <code>to_device</code> stream ID getting reset every time Synapse restarts, which had the potential to cause unable to decrypt errors. (<a href="https://github.com/matrix-org/synapse/issues/6363">#6363</a>)</li>
<li>Fix permission denied error when trying to generate a config file with the docker image. (<a href="https://github.com/matrix-org/synapse/issues/6389">#6389</a>)</li>
</ul>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Contributor documentation now mentions script to run linters. (<a href="https://github.com/matrix-org/synapse/issues/6164">#6164</a>)</li>
<li>Modify CAPTCHA_SETUP.md to update the terms <code>private key</code> and <code>public key</code> to <code>secret key</code> and <code>site key</code> respectively. Contributed by Yash Jipkate. (<a href="https://github.com/matrix-org/synapse/issues/6257">#6257</a>)</li>
<li>Update <code>INSTALL.md</code> Email section to talk about <code>account_threepid_delegates</code>. (<a href="https://github.com/matrix-org/synapse/issues/6272">#6272</a>)</li>
<li>Fix a small typo in <code>account_threepid_delegates</code> configuration option. (<a href="https://github.com/matrix-org/synapse/issues/6273">#6273</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Add a CI job to test the <code>synapse_port_db</code> script. (<a href="https://github.com/matrix-org/synapse/issues/6140">#6140</a>, <a href="https://github.com/matrix-org/synapse/issues/6276">#6276</a>)</li>
<li>Convert EventContext to an attrs. (<a href="https://github.com/matrix-org/synapse/issues/6218">#6218</a>)</li>
<li>Move <code>persist_events</code> out from main data store. (<a href="https://github.com/matrix-org/synapse/issues/6240">#6240</a>, <a href="https://github.com/matrix-org/synapse/issues/6300">#6300</a>)</li>
<li>Reduce verbosity of user/room stats. (<a href="https://github.com/matrix-org/synapse/issues/6250">#6250</a>)</li>
<li>Reduce impact of debug logging. (<a href="https://github.com/matrix-org/synapse/issues/6251">#6251</a>)</li>
<li>Expose some homeserver functionality to spam checkers. (<a href="https://github.com/matrix-org/synapse/issues/6259">#6259</a>)</li>
<li>Change cache descriptors to always return deferreds. (<a href="https://github.com/matrix-org/synapse/issues/6263">#6263</a>, <a href="https://github.com/matrix-org/synapse/issues/6291">#6291</a>)</li>
<li>Fix incorrect comment regarding the functionality of an <code>if</code> statement. (<a href="https://github.com/matrix-org/synapse/issues/6269">#6269</a>)</li>
<li>Update CI to run <code>isort</code> over the <code>scripts</code> and <code>scripts-dev</code> directories. (<a href="https://github.com/matrix-org/synapse/issues/6270">#6270</a>)</li>
<li>Replace every instance of <code>logger.warn</code> method with <code>logger.warning</code> as the former is deprecated. (<a href="https://github.com/matrix-org/synapse/issues/6271">#6271</a>, <a href="https://github.com/matrix-org/synapse/issues/6314">#6314</a>)</li>
<li>Port replication http server endpoints to async/await. (<a href="https://github.com/matrix-org/synapse/issues/6274">#6274</a>)</li>
<li>Port room rest handlers to async/await. (<a href="https://github.com/matrix-org/synapse/issues/6275">#6275</a>)</li>
<li>Remove redundant CLI parameters on CI's <code>flake8</code> step. (<a href="https://github.com/matrix-org/synapse/issues/6277">#6277</a>)</li>
<li>Port <code>federation_server.py</code> to async/await. (<a href="https://github.com/matrix-org/synapse/issues/6279">#6279</a>)</li>
<li>Port receipt and read markers to async/wait. (<a href="https://github.com/matrix-org/synapse/issues/6280">#6280</a>)</li>
<li>Split out state storage into separate data store. (<a href="https://github.com/matrix-org/synapse/issues/6294">#6294</a>, <a href="https://github.com/matrix-org/synapse/issues/6295">#6295</a>)</li>
<li>Refactor EventContext for clarity. (<a href="https://github.com/matrix-org/synapse/issues/6298">#6298</a>)</li>
<li>Update the version of black used to 19.10b0. (<a href="https://github.com/matrix-org/synapse/issues/6304">#6304</a>)</li>
<li>Add some documentation about worker replication. (<a href="https://github.com/matrix-org/synapse/issues/6305">#6305</a>)</li>
<li>Move admin endpoints into separate files. Contributed by Awesome Technologies Innovationslabor GmbH. (<a href="https://github.com/matrix-org/synapse/issues/6308">#6308</a>)</li>
<li>Document the use of <code>lint.sh</code> for code style enforcement &amp; extend it to run on specified paths only. (<a href="https://github.com/matrix-org/synapse/issues/6312">#6312</a>)</li>
<li>Add optional python dependencies and dependant binary libraries to snapcraft packaging. (<a href="https://github.com/matrix-org/synapse/issues/6317">#6317</a>)</li>
<li>Remove the dependency on psutil and replace functionality with the stdlib <code>resource</code> module. (<a href="https://github.com/matrix-org/synapse/issues/6318">#6318</a>, <a href="https://github.com/matrix-org/synapse/issues/6336">#6336</a>)</li>
<li>Improve documentation for EventContext fields. (<a href="https://github.com/matrix-org/synapse/issues/6319">#6319</a>)</li>
<li>Add some checks that we aren't using state from rejected events. (<a href="https://github.com/matrix-org/synapse/issues/6330">#6330</a>)</li>
<li>Add continuous integration for python 3.8. (<a href="https://github.com/matrix-org/synapse/issues/6341">#6341</a>)</li>
<li>Correct spacing/case of various instances of the word &quot;homeserver&quot;. (<a href="https://github.com/matrix-org/synapse/issues/6357">#6357</a>)</li>
<li>Temporarily blacklist the failing unit test PurgeRoomTestCase.test_purge_room. (<a href="https://github.com/matrix-org/synapse/issues/6361">#6361</a>)</li>
</ul>

        </div>
        
        <aside>
            <h3>Post Contents</h3>

            <ul style="list-style: none; padding-left: 0px;">
                
                <li>
                    <a href="/blog/2019/11/26/synapse-1-6-0-released/#synapse-1-6-0-2019-11-26">Synapse 1.6.0 (2019-11-26)</a>
                    
                    <ul>
                        
                        <li>
                            <a href="/blog/2019/11/26/synapse-1-6-0-released/#bugfixes">Bugfixes</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li>
                    <a href="/blog/2019/11/26/synapse-1-6-0-released/#synapse-1-6-0rc2-2019-11-25">Synapse 1.6.0rc2 (2019-11-25)</a>
                    
                    <ul>
                        
                        <li>
                            <a href="/blog/2019/11/26/synapse-1-6-0-released/#bugfixes-1">Bugfixes</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li>
                    <a href="/blog/2019/11/26/synapse-1-6-0-released/#synapse-1-6-0rc1-2019-11-20">Synapse 1.6.0rc1 (2019-11-20)</a>
                    
                    <ul>
                        
                        <li>
                            <a href="/blog/2019/11/26/synapse-1-6-0-released/#features">Features</a>
                        </li>
                        
                        <li>
                            <a href="/blog/2019/11/26/synapse-1-6-0-released/#bugfixes-2">Bugfixes</a>
                        </li>
                        
                        <li>
                            <a href="/blog/2019/11/26/synapse-1-6-0-released/#improved-documentation">Improved Documentation</a>
                        </li>
                        
                        <li>
                            <a href="/blog/2019/11/26/synapse-1-6-0-released/#internal-changes">Internal Changes</a>
                        </li>
                        
                    </ul>
                    
                </li>
                
            </ul>
        </aside>
        
    </div>
</article>

    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;security-hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="&#x2F;code"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p>© 2022 The Matrix.org Foundation C.I.C.</p>
</footer>

</body>

</html>
