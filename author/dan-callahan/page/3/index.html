<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - Dan Callahan</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/png" href="/assets/favicon.png" />
    <link rel="stylesheet" href="/style.css" />

    
<link rel="alternate" type="application/rss+xml" title="RSS" href="/author/dan-callahan/atom.xml">
</head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            ">
            Blog
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <a href="&#x2F;docs&#x2F;" class="section ">
                Documentation
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                </div>
            </div>
        </div>
        
        
        
        
        
        <div class="section-wrap">
            <a href="&#x2F;ecosystem&#x2F;" class="section ">
                Ecosystem
            </a>
            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bots&#x2F;">Bots</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        
<div id="taxonomy-single">
    <div class="content">
        <header>
            <h1>Dan Callahan</h1>
            28 posts tagged with "Dan Callahan" <a href="/author">(See all Author)</a>
            
        </header>

        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2021&#x2F;02&#x2F;25&#x2F;synapse-1-28-0-released&#x2F;" title="Synapse 1.28.0 released">Synapse 1.28.0 released</a></h2>
                <span>
                    25.02.2021 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/dan-callahan">
                        Dan Callahan
                    </a>
                </span>
                
            </header>
            <div>
                
                <p><a href="https://github.com/matrix-org/synapse/releases/tag/v1.28.0">Synapse 1.28.0</a> is now available!</p>
<p>This release comes with several further improvements to the user experience of single sign-on and numerous bugfixes and stability improvements.</p>
<p>For admins, Synapse 1.28 adds a new Admin API for retrieving <a href="https://github.com/matrix-org/synapse/blob/v1.28.0/docs/admin_api/rooms.md#event-context-api">event context</a> and implements new spam checker hooks which enable checking file uploads and remote downloads. We've also improved memory usage of media repository workers.</p>
<p>Lastly, we have marked an undocumented Admin API for deprecation. If any of your tools use <code>/_synapse/admin/v1/users/&lt;user_id&gt;</code> to get account information, please replace that with the <a href="https://github.com/matrix-org/synapse/blob/release-v1.28.0/docs/admin_api/user_admin_api.rst#list-accounts">V2 List Accounts</a> API, which has been available since Synapse 1.7.0.</p>
<p>There are no special upgrade instructions for 1.28.0. See the <a href="https://github.com/matrix-org/synapse/blob/release-v1.28.0/CHANGES.md">full changelog</a> for more details on what's in this release.</p>
<p>Synapse is a Free and Open Source Software project, and we'd like to extend our thanks to everyone who contributed to this release, including <a href="https://github.com/arya2331">arya2331</a>, <a href="https://github.com/auscompgeek">auscompgeek</a>, <a href="https://github.com/bubu">bubu</a>, <a href="https://github.com/compu42">compu42</a>, <a href="https://github.com/dklimpel">dklimpel</a>, <a href="https://github.com/dykstranet">dykstranet</a>, and <a href="https://github.com/shadowjonathan">shadowjonathan</a>.</p>
<p>We'd also like to thank <a href="https://github.com/Yoric">yoric</a> for thoroughly reviewing and re-organizing the Synapse <a href="https://github.com/matrix-org/synapse/blob/v1.28.0/CONTRIBUTING.md">CONTRIBUTING.md</a> file.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2021&#x2F;02&#x2F;18&#x2F;synapse-1-27-0-released&#x2F;" title="Synapse 1.27.0 released">Synapse 1.27.0 released</a></h2>
                <span>
                    18.02.2021 23:25
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/dan-callahan">
                        Dan Callahan
                    </a>
                </span>
                
            </header>
            <div>
                
                <p><a href="https://github.com/matrix-org/synapse/releases/tag/v1.27.0">Synapse 1.27.0</a> is now available!</p>
<p>We're especially proud of this release, as this is the version of Synapse that powered <a href="/blog/2021/02/15/how-we-hosted-fosdem-2021-on-matrix">FOSDEM 2021 on Matrix</a>. As such, our main focus was on stability, performance, and long-awaited support for social login.</p>
<h3 id="what-s-new">What's New</h3>
<p>To our surprise, nearly <em>half</em> of all people who created accounts on the FOSDEM homeserver did so via a social login method. Full support for those methods is included in Synapse 1.27.0, and already available for all users on the matrix.org homeserver.</p>
<p>We've also changed how we use Redis in larger deployments, making Synapse more resilient to lost connections and eliminating delays when restarting with multiple federation senders.</p>
<p>Our Server Admin APIs saw a few tweaks, including new APIs to <a href="https://github.com/matrix-org/synapse/blob/v1.27.0/docs/admin_api/rooms.md#forward-extremities-admin-api">query and delete forward extremities</a> or <a href="https://github.com/matrix-org/synapse/blob/v1.27.0/docs/admin_api/rooms.md#room-state-api">list the current state of a room</a>.</p>
<p>See the <a href="https://github.com/matrix-org/synapse/blob/release-v1.27.0/CHANGES.md">full changelog</a> for more.</p>
<h3 id="breaking-changes-for-sso">Breaking Changes for SSO</h3>
<p>If you use Single Sign-On (SSO) via SAML, OAuth2, or OpenID Connect you <strong>must</strong> adjust your provider's configuration before upgrading to Synapse 1.27.0, as some endpoint URLs have changed. See the <a href="https://github.com/matrix-org/synapse/blob/release-v1.27.0/UPGRADE.rst#upgrading-to-v1270">upgrading notes</a> for more information.</p>
<h3 id="dropping-armv7-docker-images">Dropping ARMv7 Docker Images</h3>
<p>We were unable to produce ARM-based Docker images for this release due to problems with cross-compilation. As a result, we have made the difficult decision to cease building 32-bit ARMv7 Docker images as part of our release process. We will resume publishing ARM64 images with the next Synapse release.</p>
<p>Users on ARMv7 platforms (most notably Raspberry Pis) should consider building images locally using Synapse's Dockerfile or switching to installing Synapse directly as a Python module. Users with Raspberry Pi 3's or newer also have the option of installing a 64-bit Linux distribution and using an ARM64 Docker image.</p>
<h3 id="thank-you-to-our-contributors">Thank you to our contributors</h3>
<p>Synapse is a Free and Open Source Software project, and we'd like to extend our thanks to everyone who contributed to this release, including <a href="https://github.com/dklimpel">dklimpel</a>, <a href="https://github.com/intelfx">intelfx</a>, <a href="https://github.com/jcgruenhage">jcgruenhage</a>, <a href="https://github.com/Oliver-Hanikel">Oliver-Hanikel</a>, <a href="https://github.com/rht">rht</a>, and <a href="https://github.com/y-pankaj">y-pankaj</a>.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2021&#x2F;01&#x2F;28&#x2F;synapse-1-26-0-released&#x2F;" title="Synapse 1.26.0 released">Synapse 1.26.0 released</a></h2>
                <span>
                    28.01.2021 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/dan-callahan">
                        Dan Callahan
                    </a>
                </span>
                
            </header>
            <div>
                
                <p><a href="https://github.com/matrix-org/synapse/releases/tag/v1.26.0">Synapse 1.26.0</a> is now available!</p>
<blockquote>
<p><strong>Note:</strong> This release includes a new database schema version. If you need to roll back to Synapse 1.25.0, you will also need to follow the associated <a href="https://github.com/matrix-org/synapse/blob/v1.26.0/UPGRADE.rst#upgrading-to-v1260">database downgrade instructions</a>.</p>
</blockquote>
<p>In addition to a truckload of refactoring and general improvements, Synapse 1.26.0 includes three major new features:</p>
<ol>
<li>A <a href="https://github.com/matrix-org/synapse/blob/v1.26.0/docs/auth_chain_difference_algorithm.md">brand new algorithm</a> for calculating the auth chain difference, which should dramatically improve worst case performance during state resolution (<a href="https://github.com/matrix-org/synapse/issues/8622">#8622</a>).</li>
<li>Initial support for enabling <a href="https://github.com/matrix-org/synapse/pull/9110">multiple OpenID Connect providers</a>, paving the way for proper multi-provider social login workflows.</li>
<li>A significant speed-up to redaction performance in large rooms.</li>
</ol>
<p>It also brings several improvements to Admin APIs:</p>
<ul>
<li>Specific media items can be <a href="https://github.com/matrix-org/synapse/blob/v1.26.0/docs/admin_api/media_admin_api.md#protecting-media-from-being-quarantined">protected from quarantine</a>. </li>
<li>The <code>joined_rooms</code> API now <a href="https://github.com/matrix-org/synapse/blob/v1.26.0/docs/admin_api/user_admin_api.rst#list-room-memberships-of-an-user">works for remote users</a>.</li>
<li>Deactivating a user can now <a href="https://github.com/matrix-org/synapse/blob/v1.26.0/docs/admin_api/user_admin_api.rst#deactivate-account">optionally remove their avatar URL and display name</a>.</li>
</ul>
<p>We've also made it possible to offload several additional APIs to worker processes, including read receipts and account data persistence, further improving Synapse's scalability.</p>
<p>See the <a href="https://github.com/matrix-org/synapse/blob/v1.26.0/CHANGES.md">full changelog</a> for more.</p>
<p>Lastly, a reminder: we have <strong>deprecated Python 3.5 and PostgreSQL 9.5</strong> and will cease support at the end of March. Due to deprecations in our Python tooling, we were unable to produce a binary package for Ubuntu 16.04 LTS (Xenial) in time for this release. We have resolved this for 1.27.</p>
<p>Synapse is a Free and Open Source Software project, and we'd like to extend our thanks to everyone who contributed to this release, including <a href="https://github.com/0xflotus">0xflotus</a>, <a href="https://github.com/chris-ruecker">chris-ruecker</a>, <a href="https://github.com/dklimpel">dklimpel</a>, <a href="https://github.com/emelie-qis">emelie-qis</a>, <a href="https://github.com/jerinjtitus">jerinjtitus</a>, and <a href="https://github.com/tzyl">tzyl</a>.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2021&#x2F;01&#x2F;13&#x2F;synapse-1-25-0-released&#x2F;" title="Synapse 1.25.0 released">Synapse 1.25.0 released</a></h2>
                <span>
                    13.01.2021 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/dan-callahan">
                        Dan Callahan
                    </a>
                </span>
                
            </header>
            <div>
                
                <p><a href="https://github.com/matrix-org/synapse/releases/tag/v1.25.0">Synapse 1.25.0</a> is now available! With this release, we are <strong>deprecating Python 3.5 and PostgreSQL 9.5</strong> and will cease producing binary packages for Debian 9 (Stretch) and Ubuntu 16.04 (Xenial) after a transition period which lasts through March 2021. See <a href="https://github.com/matrix-org/synapse/blob/v1.25.0/CHANGES.md">the changelog</a> for further details.</p>
<p>We are also deprecating the <a href="https://github.com/matrix-org/synapse/tree/master/docs/admin_api/purge_room.md">Purge Room</a> and <a href="https://github.com/matrix-org/synapse/tree/master/docs/admin_api/shutdown_room.md">Shutdown Room</a> Admin APIs and will remove them in a future release. Please update your code to use the <a href="https://github.com/matrix-org/synapse/tree/master/docs/admin_api/rooms.md#delete-room-api">Delete Room</a> Admin API instead.</p>
<p>Synapse 1.25.0 brings over a month's worth of improvements, including:</p>
<ul>
<li>The ability for users to pick their own username when using Single Sign-On, right from within Synapse.</li>
<li>Support for <code>async</code> Python methods in custom spam checker modules.</li>
<li>New ways to <a href="https://github.com/matrix-org/synapse/blob/v1.25.0/UPGRADE.rst#upgrading-to-v1250">restrict allowed IP address ranges</a> for outgoing requests from Synapse.</li>
<li>Significantly faster v2 state resolution on rooms with large numbers of power level events, which are common in some types of bridged IRC rooms.</li>
</ul>
<p>See the <a href="https://github.com/matrix-org/synapse/blob/v1.25.0/CHANGES.md">full changelog</a> and <a href="https://github.com/matrix-org/synapse/blob/v1.25.0/UPGRADE.rst#upgrading-to-v1250">upgrade notes</a> for more.</p>
<p>Synapse is a Free and Open Source Software project, and we'd like to extend our thanks to everyone who contributed to this release, including <a href="https://github.com/aaronraimist">@aaronraimist</a>, <a href="https://github.com/Bubu">@Bubu</a>, <a href="https://github.com/dklimpel">@dklimpel</a>, <a href="https://github.com/edwargix">@edwargix</a>, <a href="https://github.com/fossterer">@fossterer</a>, <a href="https://github.com/jdreichmann">@jdreichmann</a>, <a href="https://github.com/jerinjtitus">@jerinjtitus</a>, and <a href="https://github.com/MadLittleMods">@MadLittleMods</a>.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;12&#x2F;09&#x2F;synapse-1-24-0-and-1-23-1-released&#x2F;" title="Synapse 1.24.0 and 1.23.1 released">Synapse 1.24.0 and 1.23.1 released</a></h2>
                <span>
                    09.12.2020 23:51
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/dan-callahan">
                        Dan Callahan
                    </a>
                </span>
                
            </header>
            <div>
                
                <p><a href="https://github.com/matrix-org/synapse/releases/tag/v1.24.0">Synapse 1.24.0</a> is now available!</p>
<p>This release fixes a denial of service vulnerability (<a href="https://github.com/matrix-org/synapse/security/advisories/GHSA-hxmp-pqch-c8mm">GHSA-hxmp-pqch-c8mm</a> / <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-26257">CVE-2020-26257</a>) in which a malicious homeserver could send malformed events into a room which would then break federation of that room.</p>
<p>This follows the disclosure of a denial of service vulnerability in OpenSSL (<a href="https://www.openssl.org/news/secadv/20201208.txt">CVE-2020-1971</a>). If you have installed Synapse from source, please ensure your host is up to date and then execute <code>pip install 'cryptography&gt;=3.3'</code> inside your Synapse virtualenv.</p>
<p>We've also released <a href="https://github.com/matrix-org/synapse/releases/tag/v1.23.1">Synapse 1.23.1</a> which includes that security fix and a small patch to maintain Python 3.5 compatibility. It is otherwise <a href="https://github.com/matrix-org/synapse/compare/v1.23.0...v1.23.1">identical to 1.23.0</a>. Note that Synapse 1.24.0 includes backwards incompatible changes which may affect a small number of users. See the <a href="https://github.com/matrix-org/synapse/blob/develop/UPGRADE.rst#upgrading-to-v1240">notes on upgrading</a> for more information.</p>
<p>Synapse 1.24.0 brings a pair of new Admin APIs, including a way to <a href="https://github.com/matrix-org/synapse/blob/v1.24.0/docs/admin_api/user_admin_api.rst#login-as-a-user">log in as users</a> and to <a href="https://github.com/matrix-org/synapse/blob/v1.24.0/docs/admin_api/rooms.md#delete-room-api">forcibly purge</a> rooms when deleting them. We've also made numerous bug fixes and improvements to SSO support, especially around OpenID Connect and SAML providers.</p>
<p>This release includes an optional change to push notification badges: currently, the number in the badge is based on the count of <em>rooms</em> with unread messages. However, in some specialized cases you may want the badge to show the count of <em>all</em> unread messages, even if there are multiple unread messages in the same room. This behavior can now be toggled with a <a href="https://github.com/matrix-org/synapse/pull/8820">new configuration setting</a>.</p>
<p>Additionally, for server admins, the deprecated <code>/_matrix/client/*/admin</code> Admin API endpoints <a href="https://github.com/matrix-org/synapse/issues/8785">have been removed</a>. If you have tools which target these endpoints, please update them to use the <code>/_synapse/admin</code> URL prefix instead.</p>
<p>See the <a href="https://github.com/matrix-org/synapse/blob/v1.24.0/CHANGES.md">full changelog</a> for more.</p>
<p>Installation instructions are available <a href="https://github.com/matrix-org/synapse/blob/master/INSTALL.md">on GitHub</a>, as is the <code>v1.24.0</code> <a href="https://github.com/matrix-org/synapse/releases/tag/v1.24.0">release tag</a>.</p>
<p>Synapse is a Free and Open Source Software project, and we'd like to extend our thanks to everyone who contributed to this release, including <a href="https://github.com/angdraug">@angdraug</a>, <a href="https://github.com/chagai95">@chagai95</a>, <a href="https://github.com/daenney">@daenney</a>, <a href="https://github.com/dklimpel">@dklimpel</a>, <a href="https://github.com/jordanbancino">@jordanbancino</a>, <a href="https://github.com/localguru">@localguru</a>, <a href="https://github.com/nchamo">@nchamo</a>, <a href="https://github.com/ShadowJonathan">@ShadowJonathan</a>, <a href="https://github.com/TeFiLeDo">@TeFiLeDo</a>, <a href="https://github.com/tulir">@tulir</a>, and <a href="https://github.com/waylon531">@waylon531</a>.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;11&#x2F;23&#x2F;synapse-disclosing-cve-2020-26890&#x2F;" title="Synapse: Disclosing CVE-2020-26890">Synapse: Disclosing CVE-2020-26890</a></h2>
                <span>
                    23.11.2020 14:59
                    —
                    <a href="/category/security">
                        Security
                    </a>
                    —
                    <a
                        href="/author/dan-callahan">
                        Dan Callahan
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Today we are disclosing <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-26890">CVE-2020-26890</a> / <a href="https://github.com/matrix-org/synapse/security/advisories/GHSA-4mp3-385r-v63f">GHSA-4mp3-385r-v63f</a>, a denial of service vulnerability affecting Synapse versions prior to 1.20.0. We strongly encourage all Synapse admins to upgrade as soon as possible. If you have not upgraded in a while, please refer to the <a href="https://github.com/matrix-org/synapse/blob/master/UPGRADE.rst">upgrade notes</a>, especially the latter portion of that document which covers any backwards incompatible changes which you may need to take into consideration.</p>
<p>As a best practice, we encourage Synapse admins to upgrade regularly, and either <a href="https://github.com/matrix-org/synapse/releases/">subscribe on GitHub</a> or join <a href="https://matrix.to/#/#homeowners:matrix.org">#homeowners:matrix.org</a> for low-traffic notifications of new releases.</p>
<p>We extend our thanks to Denis Kasak for reporting this issue, earning a second entry in the Matrix Security <a href="/security-disclosure-policy">Hall of Fame</a>.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;11&#x2F;18&#x2F;synapse-1-23-0-released&#x2F;" title="Synapse 1.23.0 released">Synapse 1.23.0 released</a></h2>
                <span>
                    18.11.2020 00:00
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/dan-callahan">
                        Dan Callahan
                    </a>
                </span>
                
            </header>
            <div>
                
                <blockquote>
<p><strong>Reminder:</strong> On Monday, we will be announcing a denial of service vulnerability which affects Synapse versions prior to 1.20.0. If you have not upgraded recently, please do so.</p>
</blockquote>
<p><a href="https://github.com/matrix-org/synapse/releases/tag/v1.23.0">Synapse 1.23.0</a> now available!</p>
<p>For Synapse admins, this release support generating structured logs via the standard logging configuration (<a href="https://github.com/matrix-org/synapse/issues/8607">#8607</a>, <a href="https://github.com/matrix-org/synapse/issues/8685">#8685</a>). This may require changing your synapse configuration; see the <a href="https://github.com/matrix-org/synapse/blob/v1.23.0rc1/UPGRADE.rst#upgrading-to-v1230">upgrade notes</a> for more information.</p>
<p>We've also added many new Admin APIs, contributed by <a href="https://github.com/dklimpel">@dklimpel</a>:</p>
<ul>
<li>Add API to get information about uploaded media (<a href="https://github.com/matrix-org/synapse/issues/8647">#8647</a>)</li>
<li>Add API for local user media statistics (<a href="https://github.com/matrix-org/synapse/issues/8700">#8700</a>)</li>
<li>Make it possible to delete files that were not used for a defined time (<a href="https://github.com/matrix-org/synapse/issues/8519">#8519</a>)</li>
<li>Split API for reported events into detail and list endpoints. This is a breaking change to <a href="https://github.com/matrix-org/synapse/issues/8217">#8217</a> which was introduced in Synapse v1.21.0. Those who already use this API should check their scripts (<a href="https://github.com/matrix-org/synapse/issues/8539">#8539</a>) </li>
<li>Allow server admins to list users' notification pushers (<a href="https://github.com/matrix-org/synapse/issues/8610">#8610</a>, <a href="https://github.com/matrix-org/synapse/issues/8689">#8689</a>)</li>
</ul>
<p>Lastly, Synapse 1.23.0 addresses some significant bugs, including regressions in the SQLite-to-PostgreSQL database porting script (<a href="http://github.com/matrix-org/synapse/issues/8729">#8729</a>, <a href="http://github.com/matrix-org/synapse/issues/8730">#8730</a>, <a href="http://github.com/matrix-org/synapse/issues/8755">#8755</a>) and an issue which could prevent Synapse from recovering after losing its connection to its database (<a href="https://github.com/matrix-org/synapse/issues/8726">#8726</a>). Synapse will also reject ACL modifications from clients which would otherwise cause a server to ban itself from a room (<a href="https://github.com/matrix-org/synapse/issues/8708">#8708</a>).</p>
<p>Installation instructions are available <a href="https://github.com/matrix-org/synapse/blob/master/INSTALL.md">on GitHub</a>, as is the <code>v1.23.0</code> <a href="https://github.com/matrix-org/synapse/releases/tag/v1.23.0">release tag</a>.</p>
<p>Synapse is a Free and Open Source Software project, and we'd like to extend our thanks to everyone who contributed to this release, including <a href="https://github.com/chagai95">@chagai95</a> and <a href="https://github.com/dklimpel">@dklimpel</a>.</p>
<p>The full changelog for 1.23.0 is as follows:</p>
<h1 id="synapse-1-23-0-2020-11-18">Synapse 1.23.0 (2020-11-18)</h1>
<p>This release changes the way structured logging is configured. See the <a href="UPGRADE.rst#upgrading-to-v1230">upgrade notes</a> for details.</p>
<p><strong>Note</strong>: We are aware of a trivially exploitable denial of service vulnerability in versions of Synapse prior to 1.20.0. Complete details will be disclosed on Monday, November 23rd. If you have not upgraded recently, please do so.</p>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix a dependency versioning bug in the Dockerfile that prevented Synapse from starting. (<a href="https://github.com/matrix-org/synapse/issues/8767">#8767</a>)</li>
</ul>
<h1 id="synapse-1-23-0rc1-2020-11-13">Synapse 1.23.0rc1 (2020-11-13)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Add a push rule that highlights when a jitsi conference is created in a room. (<a href="https://github.com/matrix-org/synapse/issues/8286">#8286</a>)</li>
<li>Add an admin api to delete a single file or files that were not used for a defined time from server. Contributed by @dklimpel. (<a href="https://github.com/matrix-org/synapse/issues/8519">#8519</a>)</li>
<li>Split admin API for reported events (<code>GET /_synapse/admin/v1/event_reports</code>) into detail and list endpoints. This is a breaking change to #8217 which was introduced in Synapse v1.21.0. Those who already use this API should check their scripts. Contributed by @dklimpel. (<a href="https://github.com/matrix-org/synapse/issues/8539">#8539</a>)</li>
<li>Support generating structured logs via the standard logging configuration. (<a href="https://github.com/matrix-org/synapse/issues/8607">#8607</a>, <a href="https://github.com/matrix-org/synapse/issues/8685">#8685</a>)</li>
<li>Add an admin API to allow server admins to list users' pushers. Contributed by @dklimpel. (<a href="https://github.com/matrix-org/synapse/issues/8610">#8610</a>, <a href="https://github.com/matrix-org/synapse/issues/8689">#8689</a>)</li>
<li>Add an admin API <code>GET /_synapse/admin/v1/users/&lt;user_id&gt;/media</code> to get information about uploaded media. Contributed by @dklimpel. (<a href="https://github.com/matrix-org/synapse/issues/8647">#8647</a>)</li>
<li>Add an admin API for local user media statistics. Contributed by @dklimpel. (<a href="https://github.com/matrix-org/synapse/issues/8700">#8700</a>)</li>
<li>Add <code>displayname</code> to Shared-Secret Registration for admins. (<a href="https://github.com/matrix-org/synapse/issues/8722">#8722</a>)</li>
</ul>
<h2 id="bugfixes-1">Bugfixes</h2>
<ul>
<li>Fix fetching of E2E cross signing keys over federation when only one of the master key and device signing key is cached already. (<a href="https://github.com/matrix-org/synapse/issues/8455">#8455</a>)</li>
<li>Fix a bug where Synapse would blindly forward bad responses from federation to clients when retrieving profile information. (<a href="https://github.com/matrix-org/synapse/issues/8580">#8580</a>)</li>
<li>Fix a bug where the account validity endpoint would silently fail if the user ID did not have an expiration time. It now returns a 400 error. (<a href="https://github.com/matrix-org/synapse/issues/8620">#8620</a>)</li>
<li>Fix email notifications for invites without local state. (<a href="https://github.com/matrix-org/synapse/issues/8627">#8627</a>)</li>
<li>Fix handling of invalid group IDs to return a 400 rather than log an exception and return a 500. (<a href="https://github.com/matrix-org/synapse/issues/8628">#8628</a>)</li>
<li>Fix handling of User-Agent headers that are invalid UTF-8, which caused user agents of users to not get correctly recorded. (<a href="https://github.com/matrix-org/synapse/issues/8632">#8632</a>)</li>
<li>Fix a bug in the <code>joined_rooms</code> admin API if the user has never joined any rooms. The bug was introduced, along with the API, in v1.21.0. (<a href="https://github.com/matrix-org/synapse/issues/8643">#8643</a>)</li>
<li>Fix exception during handling multiple concurrent requests for remote media when using multiple media repositories. (<a href="https://github.com/matrix-org/synapse/issues/8682">#8682</a>)</li>
<li>Fix bug that prevented Synapse from recovering after losing connection to the database. (<a href="https://github.com/matrix-org/synapse/issues/8726">#8726</a>)</li>
<li>Fix bug where the <code>/_synapse/admin/v1/send_server_notice</code> API could send notices to non-notice rooms. (<a href="https://github.com/matrix-org/synapse/issues/8728">#8728</a>)</li>
<li>Fix PostgreSQL port script fails when DB has no backfilled events. Broke in v1.21.0. (<a href="https://github.com/matrix-org/synapse/issues/8729">#8729</a>)</li>
<li>Fix PostgreSQL port script to correctly handle foreign key constraints. Broke in v1.21.0. (<a href="https://github.com/matrix-org/synapse/issues/8730">#8730</a>)</li>
<li>Fix PostgreSQL port script so that it can be run again after a failure. Broke in v1.21.0. (<a href="https://github.com/matrix-org/synapse/issues/8755">#8755</a>)</li>
</ul>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Instructions for Azure AD in the OpenID Connect documentation. Contributed by peterk. (<a href="https://github.com/matrix-org/synapse/issues/8582">#8582</a>)</li>
<li>Improve the sample configuration for single sign-on providers. (<a href="https://github.com/matrix-org/synapse/issues/8635">#8635</a>)</li>
<li>Fix the filepath of Dex's example config and the link to Dex's Getting Started guide in the OpenID Connect docs. (<a href="https://github.com/matrix-org/synapse/issues/8657">#8657</a>)</li>
<li>Note support for Python 3.9. (<a href="https://github.com/matrix-org/synapse/issues/8665">#8665</a>)</li>
<li>Minor updates to docs on running tests. (<a href="https://github.com/matrix-org/synapse/issues/8666">#8666</a>)</li>
<li>Interlink prometheus/grafana documentation. (<a href="https://github.com/matrix-org/synapse/issues/8667">#8667</a>)</li>
<li>Notes on SSO logins and media_repository worker. (<a href="https://github.com/matrix-org/synapse/issues/8701">#8701</a>)</li>
<li>Document experimental support for running multiple event persisters. (<a href="https://github.com/matrix-org/synapse/issues/8706">#8706</a>)</li>
<li>Add information regarding the various sources of, and expected contributions to, Synapse's documentation to <code>CONTRIBUTING.md</code>. (<a href="https://github.com/matrix-org/synapse/issues/8714">#8714</a>)</li>
<li>Migrate documentation <code>docs/admin_api/event_reports</code> to markdown. (<a href="https://github.com/matrix-org/synapse/issues/8742">#8742</a>)</li>
<li>Add some helpful hints to the README for new Synapse developers. Contributed by @chagai95. (<a href="https://github.com/matrix-org/synapse/issues/8746">#8746</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Optimise <code>/createRoom</code> with multiple invited users. (<a href="https://github.com/matrix-org/synapse/issues/8559">#8559</a>)</li>
<li>Implement and use an <code>@lru_cache</code> decorator. (<a href="https://github.com/matrix-org/synapse/issues/8595">#8595</a>)</li>
<li>Don't instantiate Requester directly. (<a href="https://github.com/matrix-org/synapse/issues/8614">#8614</a>)</li>
<li>Type hints for <code>RegistrationStore</code>. (<a href="https://github.com/matrix-org/synapse/issues/8615">#8615</a>)</li>
<li>Change schema to support access tokens belonging to one user but granting access to another. (<a href="https://github.com/matrix-org/synapse/issues/8616">#8616</a>)</li>
<li>Remove unused OPTIONS handlers. (<a href="https://github.com/matrix-org/synapse/issues/8621">#8621</a>)</li>
<li>Run <code>mypy</code> as part of the lint.sh script. (<a href="https://github.com/matrix-org/synapse/issues/8633">#8633</a>)</li>
<li>Correct Synapse's PyPI package name in the OpenID Connect installation instructions. (<a href="https://github.com/matrix-org/synapse/issues/8634">#8634</a>)</li>
<li>Catch exceptions during initialization of <code>password_providers</code>. Contributed by Nicolai Søborg. (<a href="https://github.com/matrix-org/synapse/issues/8636">#8636</a>)</li>
<li>Fix typos and spelling errors in the code. (<a href="https://github.com/matrix-org/synapse/issues/8639">#8639</a>)</li>
<li>Reduce number of OpenTracing spans started. (<a href="https://github.com/matrix-org/synapse/issues/8640">#8640</a>, <a href="https://github.com/matrix-org/synapse/issues/8668">#8668</a>, <a href="https://github.com/matrix-org/synapse/issues/8670">#8670</a>)</li>
<li>Add field <code>total</code> to device list in admin API. (<a href="https://github.com/matrix-org/synapse/issues/8644">#8644</a>)</li>
<li>Add more type hints to the application services code. (<a href="https://github.com/matrix-org/synapse/issues/8655">#8655</a>, <a href="https://github.com/matrix-org/synapse/issues/8693">#8693</a>)</li>
<li>Tell Black to format code for Python 3.5. (<a href="https://github.com/matrix-org/synapse/issues/8664">#8664</a>)</li>
<li>Don't pull event from DB when handling replication traffic. (<a href="https://github.com/matrix-org/synapse/issues/8669">#8669</a>)</li>
<li>Abstract some invite-related code in preparation for landing knocking. (<a href="https://github.com/matrix-org/synapse/issues/8671">#8671</a>, <a href="https://github.com/matrix-org/synapse/issues/8688">#8688</a>)</li>
<li>Clarify representation of events in logfiles. (<a href="https://github.com/matrix-org/synapse/issues/8679">#8679</a>)</li>
<li>Don't require <code>hiredis</code> package to be installed to run unit tests. (<a href="https://github.com/matrix-org/synapse/issues/8680">#8680</a>)</li>
<li>Fix typing info on cache call signature to accept <code>on_invalidate</code>. (<a href="https://github.com/matrix-org/synapse/issues/8684">#8684</a>)</li>
<li>Fail tests if they do not await coroutines. (<a href="https://github.com/matrix-org/synapse/issues/8690">#8690</a>)</li>
<li>Improve start time by adding an index to <code>e2e_cross_signing_keys.stream_id</code>. (<a href="https://github.com/matrix-org/synapse/issues/8694">#8694</a>)</li>
<li>Re-organize the structured logging code to separate the TCP transport handling from the JSON formatting. (<a href="https://github.com/matrix-org/synapse/issues/8697">#8697</a>)</li>
<li>Use Python 3.8 in Docker images by default. (<a href="https://github.com/matrix-org/synapse/issues/8698">#8698</a>)</li>
<li>Remove the &quot;draft&quot; status of the Room Details Admin API. (<a href="https://github.com/matrix-org/synapse/issues/8702">#8702</a>)</li>
<li>Improve the error returned when a non-string displayname or avatar_url is used when updating a user's profile. (<a href="https://github.com/matrix-org/synapse/issues/8705">#8705</a>)</li>
<li>Block attempts by clients to send server ACLs, or redactions of server ACLs, that would result in the local server being blocked from the room. (<a href="https://github.com/matrix-org/synapse/issues/8708">#8708</a>)</li>
<li>Add metrics the allow the local sysadmin to track 3PID <code>/requestToken</code> requests. (<a href="https://github.com/matrix-org/synapse/issues/8712">#8712</a>)</li>
<li>Consolidate duplicated lists of purged tables that are checked in tests. (<a href="https://github.com/matrix-org/synapse/issues/8713">#8713</a>)</li>
<li>Add some <code>mdui:UIInfo</code> element examples for <code>saml2_config</code> in the homeserver config. (<a href="https://github.com/matrix-org/synapse/issues/8718">#8718</a>)</li>
<li>Improve the error message returned when a remote server incorrectly sets the <code>Content-Type</code> header in response to a JSON request. (<a href="https://github.com/matrix-org/synapse/issues/8719">#8719</a>)</li>
<li>Speed up repeated state resolutions on the same room by caching event ID to auth event ID lookups. (<a href="https://github.com/matrix-org/synapse/issues/8752">#8752</a>)</li>
</ul>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="&#x2F;blog&#x2F;2020&#x2F;10&#x2F;27&#x2F;synapse-1-22-0-released&#x2F;" title="Synapse 1.22.0 released">Synapse 1.22.0 released</a></h2>
                <span>
                    27.10.2020 17:01
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/dan-callahan">
                        Dan Callahan
                    </a>
                </span>
                
            </header>
            <div>
                
                <p><a href="https://github.com/matrix-org/synapse/releases/tag/v1.22.0">Synapse 1.22.0</a> now available!</p>
<p>This release focused on improving Synapse's horizontal scalability, including:</p>
<ul>
<li>Support for running background tasks in separate worker processes.</li>
<li>Fixes to sharded event persisters, which were experimentally introduced in 1.21.0.</li>
<li>Fixing a message duplication bug with worker-based deployments. (<a href="https://github.com/matrix-org/synapse/issues/8476">#8476</a>)</li>
</ul>
<p>Synapse 1.22.0 also has a few other notable changes:</p>
<ul>
<li>Defaulting to <a href="https://matrix.org/docs/spec/rooms/v6">version 6</a> rooms, per <a href="https://github.com/matrix-org/matrix-doc/pull/2788/">MSC2788</a>.</li>
<li>Initial support for three new experimental MSCs:
<ul>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2732">MSC2732</a>: Supporting olm fallback keys</li>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2697">MSC2697</a>: Supporting device dehydration</li>
<li><a href="https://github.com/matrix-org/matrix-doc/pull/2409">MSC2409</a>: Allowing appservices to receive ephemeral events like read receipts, presence, and typing indicators.</li>
</ul>
</li>
<li>Multi-arch Docker images, covering <code>arm64</code> and <code>arm/v7</code> in addition to <code>amd64</code>.</li>
</ul>
<p>Installation instructions are available <a href="https://github.com/matrix-org/synapse/blob/master/INSTALL.md">on GitHub</a>, as is the <code>v1.22.0</code> <a href="https://github.com/matrix-org/synapse/releases/tag/v1.22.0">release tag</a>.</p>
<p>Lastly, Synapse is a Free and Open Source Software project, and we'd like to extend our thanks to everyone who contributed to this release, including <a href="https://github.com/Akkowicz">@Akkowicz</a>, <a href="https://github.com/BBBSnowball">@BBBSnowball</a>, <a href="https://github.com/maquis196">@maquis196</a>, and <a href="https://github.com/samuel-p">@samuel-p</a>.</p>
<p>The full changelog for 1.22.0 is as follows:</p>
<h1 id="synapse-1-22-0-2020-10-27">Synapse 1.22.0 (2020-10-27)</h1>
<p>No significant changes.</p>
<h1 id="synapse-1-22-0rc2-2020-10-26">Synapse 1.22.0rc2 (2020-10-26)</h1>
<h2 id="bugfixes">Bugfixes</h2>
<ul>
<li>Fix bugs where ephemeral events were not sent to appservices. Broke in v1.22.0rc1. (<a href="https://github.com/matrix-org/synapse/issues/8648">#8648</a>, <a href="https://github.com/matrix-org/synapse/issues/8656">#8656</a>)</li>
<li>Fix <code>user_daily_visits</code> table to not have duplicate rows per user/device due to multiple user agents. Broke in v1.22.0rc1. (<a href="https://github.com/matrix-org/synapse/issues/8654">#8654</a>)</li>
</ul>
<h1 id="synapse-1-22-0rc1-2020-10-22">Synapse 1.22.0rc1 (2020-10-22)</h1>
<h2 id="features">Features</h2>
<ul>
<li>Add a configuration option for always using the &quot;userinfo endpoint&quot; for OpenID Connect. This fixes support for some identity providers, e.g. GitLab. Contributed by Benjamin Koch. (<a href="https://github.com/matrix-org/synapse/issues/7658">#7658</a>)</li>
<li>Add ability for <code>ThirdPartyEventRules</code> modules to query and manipulate whether a room is in the public rooms directory. (<a href="https://github.com/matrix-org/synapse/issues/8292">#8292</a>, <a href="https://github.com/matrix-org/synapse/issues/8467">#8467</a>)</li>
<li>Add support for olm fallback keys (<a href="https://github.com/matrix-org/matrix-doc/pull/2732">MSC2732</a>). (<a href="https://github.com/matrix-org/synapse/issues/8312">#8312</a>, <a href="https://github.com/matrix-org/synapse/issues/8501">#8501</a>)</li>
<li>Add support for running background tasks in a separate worker process. (<a href="https://github.com/matrix-org/synapse/issues/8369">#8369</a>, <a href="https://github.com/matrix-org/synapse/issues/8458">#8458</a>, <a href="https://github.com/matrix-org/synapse/issues/8489">#8489</a>, <a href="https://github.com/matrix-org/synapse/issues/8513">#8513</a>, <a href="https://github.com/matrix-org/synapse/issues/8544">#8544</a>, <a href="https://github.com/matrix-org/synapse/issues/8599">#8599</a>)</li>
<li>Add support for device dehydration (<a href="https://github.com/matrix-org/matrix-doc/pull/2697">MSC2697</a>). (<a href="https://github.com/matrix-org/synapse/issues/8380">#8380</a>)</li>
<li>Add support for <a href="https://github.com/matrix-org/matrix-doc/pull/2409">MSC2409</a>, which allows sending typing, read receipts, and presence events to appservices. (<a href="https://github.com/matrix-org/synapse/issues/8437">#8437</a>, <a href="https://github.com/matrix-org/synapse/issues/8590">#8590</a>)</li>
<li>Change default room version to &quot;6&quot;, per <a href="https://github.com/matrix-org/matrix-doc/pull/2788">MSC2788</a>. (<a href="https://github.com/matrix-org/synapse/issues/8461">#8461</a>)</li>
<li>Add the ability to send non-membership events into a room via the <code>ModuleApi</code>. (<a href="https://github.com/matrix-org/synapse/issues/8479">#8479</a>)</li>
<li>Increase default upload size limit from 10M to 50M. Contributed by @Akkowicz. (<a href="https://github.com/matrix-org/synapse/issues/8502">#8502</a>)</li>
<li>Add support for modifying event content in <code>ThirdPartyRules</code> modules. (<a href="https://github.com/matrix-org/synapse/issues/8535">#8535</a>, <a href="https://github.com/matrix-org/synapse/issues/8564">#8564</a>)</li>
</ul>
<h2 id="bugfixes-1">Bugfixes</h2>
<ul>
<li>Fix a longstanding bug where invalid ignored users in account data could break clients. (<a href="https://github.com/matrix-org/synapse/issues/8454">#8454</a>)</li>
<li>Fix a bug where backfilling a room with an event that was missing the <code>redacts</code> field would break. (<a href="https://github.com/matrix-org/synapse/issues/8457">#8457</a>)</li>
<li>Don't attempt to respond to some requests if the client has already disconnected. (<a href="https://github.com/matrix-org/synapse/issues/8465">#8465</a>)</li>
<li>Fix message duplication if something goes wrong after persisting the event. (<a href="https://github.com/matrix-org/synapse/issues/8476">#8476</a>)</li>
<li>Fix incremental sync returning an incorrect <code>prev_batch</code> token in timeline section, which when used to paginate returned events that were included in the incremental sync. Broken since v0.16.0. (<a href="https://github.com/matrix-org/synapse/issues/8486">#8486</a>)</li>
<li>Expose the <code>uk.half-shot.msc2778.login.application_service</code> to clients from the login API. This feature was added in v1.21.0, but was not exposed as a potential login flow. (<a href="https://github.com/matrix-org/synapse/issues/8504">#8504</a>)</li>
<li>Fix error code for <code>/profile/{userId}/displayname</code> to be <code>M_BAD_JSON</code>. (<a href="https://github.com/matrix-org/synapse/issues/8517">#8517</a>)</li>
<li>Fix a bug introduced in v1.7.0 that could cause Synapse to insert values from non-state <code>m.room.retention</code> events into the <code>room_retention</code> database table. (<a href="https://github.com/matrix-org/synapse/issues/8527">#8527</a>)</li>
<li>Fix not sending events over federation when using sharded event writers. (<a href="https://github.com/matrix-org/synapse/issues/8536">#8536</a>)</li>
<li>Fix a long standing bug where email notifications for encrypted messages were blank. (<a href="https://github.com/matrix-org/synapse/issues/8545">#8545</a>)</li>
<li>Fix increase in the number of <code>There was no active span...</code> errors logged when using OpenTracing. (<a href="https://github.com/matrix-org/synapse/issues/8567">#8567</a>)</li>
<li>Fix a bug that prevented errors encountered during execution of the <code>synapse_port_db</code> from being correctly printed. (<a href="https://github.com/matrix-org/synapse/issues/8585">#8585</a>)</li>
<li>Fix appservice transactions to only include a maximum of 100 persistent and 100 ephemeral events. (<a href="https://github.com/matrix-org/synapse/issues/8606">#8606</a>)</li>
</ul>
<h2 id="updates-to-the-docker-image">Updates to the Docker image</h2>
<ul>
<li>Added multi-arch support (arm64,arm/v7) for the docker images. Contributed by @maquis196. (<a href="https://github.com/matrix-org/synapse/issues/7921">#7921</a>)</li>
<li>Add support for passing commandline args to the synapse process. Contributed by @samuel-p. (<a href="https://github.com/matrix-org/synapse/issues/8390">#8390</a>)</li>
</ul>
<h2 id="improved-documentation">Improved Documentation</h2>
<ul>
<li>Update the directions for using the manhole with coroutines. (<a href="https://github.com/matrix-org/synapse/issues/8462">#8462</a>)</li>
<li>Improve readme by adding new shield.io badges. (<a href="https://github.com/matrix-org/synapse/issues/8493">#8493</a>)</li>
<li>Added note about docker in manhole.md regarding which ip address to bind to. Contributed by @Maquis196. (<a href="https://github.com/matrix-org/synapse/issues/8526">#8526</a>)</li>
<li>Document the new behaviour of the <code>allowed_lifetime_min</code> and <code>allowed_lifetime_max</code> settings in the room retention configuration. (<a href="https://github.com/matrix-org/synapse/issues/8529">#8529</a>)</li>
</ul>
<h2 id="deprecations-and-removals">Deprecations and Removals</h2>
<ul>
<li>Drop unused <code>device_max_stream_id</code> table. (<a href="https://github.com/matrix-org/synapse/issues/8589">#8589</a>)</li>
</ul>
<h2 id="internal-changes">Internal Changes</h2>
<ul>
<li>Check for unreachable code with mypy. (<a href="https://github.com/matrix-org/synapse/issues/8432">#8432</a>)</li>
<li>Add unit test for event persister sharding. (<a href="https://github.com/matrix-org/synapse/issues/8433">#8433</a>)</li>
<li>Allow events to be sent to clients sooner when using sharded event persisters. (<a href="https://github.com/matrix-org/synapse/issues/8439">#8439</a>, <a href="https://github.com/matrix-org/synapse/issues/8488">#8488</a>, <a href="https://github.com/matrix-org/synapse/issues/8496">#8496</a>, <a href="https://github.com/matrix-org/synapse/issues/8499">#8499</a>)</li>
<li>Configure <code>public_baseurl</code> when using demo scripts. (<a href="https://github.com/matrix-org/synapse/issues/8443">#8443</a>)</li>
<li>Add SQL logging on queries that happen during startup. (<a href="https://github.com/matrix-org/synapse/issues/8448">#8448</a>)</li>
<li>Speed up unit tests when using PostgreSQL. (<a href="https://github.com/matrix-org/synapse/issues/8450">#8450</a>)</li>
<li>Remove redundant database loads of stream_ordering for events we already have. (<a href="https://github.com/matrix-org/synapse/issues/8452">#8452</a>)</li>
<li>Reduce inconsistencies between codepaths for membership and non-membership events. (<a href="https://github.com/matrix-org/synapse/issues/8463">#8463</a>)</li>
<li>Combine <code>SpamCheckerApi</code> with the more generic <code>ModuleApi</code>. (<a href="https://github.com/matrix-org/synapse/issues/8464">#8464</a>)</li>
<li>Additional testing for <code>ThirdPartyEventRules</code>. (<a href="https://github.com/matrix-org/synapse/issues/8468">#8468</a>)</li>
<li>Add <code>-d</code> option to <code>./scripts-dev/lint.sh</code> to lint files that have changed since the last git commit. (<a href="https://github.com/matrix-org/synapse/issues/8472">#8472</a>)</li>
<li>Unblacklist some sytests. (<a href="https://github.com/matrix-org/synapse/issues/8474">#8474</a>)</li>
<li>Include the log level in the phone home stats. (<a href="https://github.com/matrix-org/synapse/issues/8477">#8477</a>)</li>
<li>Remove outdated sphinx documentation, scripts and configuration. (<a href="https://github.com/matrix-org/synapse/issues/8480">#8480</a>)</li>
<li>Clarify error message when plugin config parsers raise an error. (<a href="https://github.com/matrix-org/synapse/issues/8492">#8492</a>)</li>
<li>Remove the deprecated <code>Handlers</code> object. (<a href="https://github.com/matrix-org/synapse/issues/8494">#8494</a>)</li>
<li>Fix a threadsafety bug in unit tests. (<a href="https://github.com/matrix-org/synapse/issues/8497">#8497</a>)</li>
<li>Add user agent to user_daily_visits table. (<a href="https://github.com/matrix-org/synapse/issues/8503">#8503</a>)</li>
<li>Add type hints to various parts of the code base. (<a href="https://github.com/matrix-org/synapse/issues/8407">#8407</a>, <a href="https://github.com/matrix-org/synapse/issues/8505">#8505</a>, <a href="https://github.com/matrix-org/synapse/issues/8507">#8507</a>, <a href="https://github.com/matrix-org/synapse/issues/8547">#8547</a>, <a href="https://github.com/matrix-org/synapse/issues/8562">#8562</a>, <a href="https://github.com/matrix-org/synapse/issues/8609">#8609</a>)</li>
<li>Remove unused code from the test framework. (<a href="https://github.com/matrix-org/synapse/issues/8514">#8514</a>)</li>
<li>Apply some internal fixes to the <code>HomeServer</code> class to make its code more idiomatic and statically-verifiable. (<a href="https://github.com/matrix-org/synapse/issues/8515">#8515</a>)</li>
<li>Factor out common code between <code>RoomMemberHandler._locally_reject_invite</code> and <code>EventCreationHandler.create_event</code>. (<a href="https://github.com/matrix-org/synapse/issues/8537">#8537</a>)</li>
<li>Improve database performance by executing more queries without starting transactions. (<a href="https://github.com/matrix-org/synapse/issues/8542">#8542</a>)</li>
<li>Rename <code>Cache</code> to <code>DeferredCache</code>, to better reflect its purpose. (<a href="https://github.com/matrix-org/synapse/issues/8548">#8548</a>)</li>
<li>Move metric registration code down into <code>LruCache</code>. (<a href="https://github.com/matrix-org/synapse/issues/8561">#8561</a>, <a href="https://github.com/matrix-org/synapse/issues/8591">#8591</a>)</li>
<li>Replace <code>DeferredCache</code> with the lighter-weight <code>LruCache</code> where possible. (<a href="https://github.com/matrix-org/synapse/issues/8563">#8563</a>)</li>
<li>Add virtualenv-generated folders to <code>.gitignore</code>. (<a href="https://github.com/matrix-org/synapse/issues/8566">#8566</a>)</li>
<li>Add <code>get_immediate</code> method to <code>DeferredCache</code>. (<a href="https://github.com/matrix-org/synapse/issues/8568">#8568</a>)</li>
<li>Fix mypy not properly checking across the codebase, additionally, fix a typing assertion error in <code>handlers/auth.py</code>. (<a href="https://github.com/matrix-org/synapse/issues/8569">#8569</a>)</li>
<li>Fix <code>synmark</code> benchmark runner. (<a href="https://github.com/matrix-org/synapse/issues/8571">#8571</a>)</li>
<li>Modify <code>DeferredCache.get()</code> to return <code>Deferred</code>s instead of <code>ObservableDeferred</code>s. (<a href="https://github.com/matrix-org/synapse/issues/8572">#8572</a>)</li>
<li>Adjust a protocol-type definition to fit <code>sqlite3</code> assertions. (<a href="https://github.com/matrix-org/synapse/issues/8577">#8577</a>)</li>
<li>Support macOS on the <code>synmark</code> benchmark runner. (<a href="https://github.com/matrix-org/synapse/issues/8578">#8578</a>)</li>
<li>Update <code>mypy</code> static type checker to 0.790. (<a href="https://github.com/matrix-org/synapse/issues/8583">#8583</a>, <a href="https://github.com/matrix-org/synapse/issues/8600">#8600</a>)</li>
<li>Re-organize the structured logging code to separate the TCP transport handling from the JSON formatting. (<a href="https://github.com/matrix-org/synapse/issues/8587">#8587</a>)</li>
<li>Remove extraneous unittest logging decorators from unit tests. (<a href="https://github.com/matrix-org/synapse/issues/8592">#8592</a>)</li>
<li>Minor optimisations in caching code. (<a href="https://github.com/matrix-org/synapse/issues/8593">#8593</a>, <a href="https://github.com/matrix-org/synapse/issues/8594">#8594</a>)</li>
</ul>

                
            </div>
        </article>
        
        <nav class="pagination">
    <div class="prev">
        
        <a href="&#x2F;author&#x2F;dan-callahan&#x2F;page&#x2F;2&#x2F;">‹ Previous</a>
        
    </div>
    <span class="page-number">3 / 3</span>
    <div class="prev">
        
    </div>
</nav>

    </div>
</div>

    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;security-hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="&#x2F;code"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p>© 2022 The Matrix.org Foundation C.I.C.</p>
</footer>

</body>

</html>
