<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="twitter:widgets:csp" content="on" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="twitter:site" content="@matrixdotorg" />
    <meta name="twitter:creator" content="@matrixdotorg" />

    <title>Matrix.org - Matthew Hodgson</title>
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg" />
    <link rel="stylesheet" href="/style.css" />

    
<link rel="alternate" type="application/rss+xml" title="RSS" href="https://matrix.org/author/matthew-hodgson/atom.xml">
</head>

<body>
    
    <header class="site-header">
    <a href="/" class="brand">
        <img src="/images/matrix-logo-white.svg" alt="Matrix logo">
    </a>
    <input id="site-header-dropdown-checkbox" type="checkbox" class="dropdown-checkbox" aria-hidden="true">
    <label for="site-header-dropdown-checkbox" class="dropdown-button">&#xe602;</label>
    <label for="site-header-dropdown-checkbox" class="page-overlay"></label>
    <nav>
        
        
        <a href="&#x2F;about&#x2F;" class="
            ">
            About
        </a>
        
        
        
        <a href="&#x2F;blog&#x2F;" class="
            ">
            Blog
        </a>
        
        
        
        <a href="&#x2F;docs&#x2F;" class="
            ">
            Documentation
        </a>
        
        
        
        
        
        <div class="section-wrap">
            <input id="ecosystem-submenu-checkbox" type="checkbox" class="submenu-checkbox" aria-hidden="true"
                >
            <label for="ecosystem-submenu-checkbox" class="submenu-title">Ecosystem <div class="arrow">
                </div></label>

            <div class="section-submenu-wrap">
                <div class="section-submenu">
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;clients&#x2F;">Clients</a>
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;bridges&#x2F;">Bridges</a>
                    
                    
                    <a href="&#x2F;ecosystem&#x2F;servers&#x2F;">Servers</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;integrations&#x2F;">Integrations</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;sdks&#x2F;">SDKs</a>
                    
                    <a href="&#x2F;ecosystem&#x2F;hosting&#x2F;">Hosting</a>
                    
                </div>
            </div>
        </div>
        
        
        
        <a href="&#x2F;podcasts&#x2F;" class="
            ">
            Podcasts
        </a>
        
        
        
        <a href="https:&#x2F;&#x2F;shop.matrix.org" class="
            ">
            Shop
        </a>
        
        
        
        <a href="&#x2F;try-matrix&#x2F;" class="primary
            ">
            Try Matrix
        </a>
        
        
    </nav>
</header>


    <main>
        
<div id="taxonomy-single">
    <div class="content">
        <header>
            <h1>Matthew Hodgson</h1>
            150 posts tagged with "Matthew Hodgson" <a href="/author">(See all Author)</a>
            
        </header>

        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2023&#x2F;06&#x2F;07&#x2F;introducing-third-room-tp2-the-creator-update&#x2F;" title="Introducing Third Room TP2: The Creator Update">Introducing Third Room TP2: The Creator Update</a></h2>
                <span>
                    07.06.2023 15:15
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>Back in September 2022 we launched the very <a href="https://matrix.org/blog/2022/09/27/announcing-third-room-tech-preview-1">first public technology preview</a> of <a href="https://thirdroom.io">Third Room</a> - our entirely open source, open standards-based platform for creating decentralised multiparty spatial apps and virtual worlds on top of Matrix.</p>
<p>The mission of Third Room is to ensure that a truly open and equitable platform exists for powering shared 3D environments - providing an alternative to the closed walled gardens of the bigger vendors, and generally safeguard against a repeat of the fragmented dystopia that has plagued instant messaging and VoIP systems.  In short, just as Matrix aims to be the missing secure communication layer of the open Web, Third Room aims to be the spatial collaboration layer.</p>
<p>Today, we’re incredibly excited to announce <strong>Third Room Technology Preview 2: The Creator Update</strong>.  As more and more 3D hardware enters the market, the race is on to provide tools to developers and creators so they can build on an open, vendor-agnostic platform - and in this update we’ve focused on building out the <strong>scripting</strong>, <strong>editing</strong> and <strong>authoring</strong> capabilities of Third Room to provide a solid platform for building and running collaborative 3D apps of any kind. Check out the new release at <a href="https://thirdroom.io">https://thirdroom.io</a>.</p>
<blockquote>
As a reminder: the Third Room team is a tiny band formed by Robert, Nate and Ajay and operates outside of all the rest of our work on Matrix: the other 97% of our effort goes into making the core of Matrix amazing (particularly the underpinnings for Element X and the next generation of Matrix clients). However, Matrix is about more than just chat and VoIP, and Third Room provides an excellent showcase of Matrix’s abilities as a general purpose communication fabric.
</blockquote>
<h3 id="introducing-web-scene-graph">Introducing Web Scene Graph</h3>
<div style="text-align: center">
<a href="https://thirdroom.io/docs/guides/websg/"><img src="/blog/img/2023-06-07-websg.jpg" width="480" alt="WebSG"/></a>
</div>
<p>At the heart of Third Room TP2 is <a href="https://thirdroom.io/docs/guides/websg/">Web Scene Graph (WebSG)</a> - our new API to let developers create their own spatial multiparty apps and experiences in Third Room. WebSG does to glTF what JavaScript and the DOM did to HTML - it makes it come alive. With WebSG, we’re building the first implementation of an open standard for interoperable programming of virtual worlds, with the hope of submitting it to the W3C as a general purpose building block of the Web.</p>
<p>All content in Third Room is described using the <a href="https://www.khronos.org/gltf/">glTF 2.0</a> open standard, and so to let developers write their own functionality within Third Room we needed to provide an API that lets you dive into the glTF and manipulate it - much as the DOM API lets web developers edit the HTML DOM.  For whatever reason, an open standard API doesn’t exist for manipulating glTF… so we created Web Scene Graph (WebSG) to fill the void. Just like the DOM, it provides an incredibly powerful generic toolkit for manipulating 3D assets irrespective of the engine being used to render them.</p>
<p>WebSG isn’t just for manipulating scene graphs though - it also provides a whole in-world UI framework for creating 3D user interfaces in glTF; it provides an Action Bar API to let apps modify the controls available in Third Room’s overlay UI; you also get the Collision Listener API to get callbacks from the physics engine; ECS API to interact directly with the Entity Component System that tracks the world state; and Networking APIs to send and receive messages directly between clients via Matrix-negotiated WebRTC DataChannels.</p>
<p>As a quick taster - a WebSG app to pulse a light in your scene can be as simple as this:</p>
<pre data-lang="js" style="background-color:#1e1e1e;color:#dcdcdc;" class="language-js "><code class="language-js" data-lang="js"><span>world.onload = () </span><span style="color:#569cd6;">=&gt; </span><span>{
</span><span>    </span><span style="color:#569cd6;">const </span><span>directionalLight = world.findLightByName(</span><span style="color:#d69d85;">&quot;DirectionalLight&quot;</span><span>); 
</span><span>
</span><span>    world.onupdate = (dt, time) </span><span style="color:#569cd6;">=&gt; </span><span>{
</span><span>        directionalLight.color[</span><span style="color:#b5cea8;">0</span><span>] = (</span><span style="color:#b5cea8;">Math</span><span>.sin(time) + </span><span style="color:#b5cea8;">1</span><span>) / </span><span style="color:#b5cea8;">2</span><span>;
</span><span>    };
</span><span>};
</span></code></pre>
<p>Third Room takes the JS and compiles it down to WASM using <a href="https://bellard.org/quickjs/">QuickJS</a>, and then executes it within a WASM sandbox - isolating it entirely from your other conversations and the rest of the Third Room. (In future, we’ll look to provide quota limits to ensure scripts don’t get greedy with resources).</p>
<p>We also support a low-level C API for WebSG, letting you compile your own native code down to WASM - in C the same script looks like this:</p>
<pre data-lang="c" style="background-color:#1e1e1e;color:#dcdcdc;" class="language-c "><code class="language-c" data-lang="c"><span style="color:#9b9b9b;">#include </span><span style="color:#d69d85;">&lt;math.h&gt;
</span><span style="color:#9b9b9b;">#include </span><span style="color:#d69d85;">&quot;websg.h&quot;
</span><span>
</span><span>Light </span><span style="color:#569cd6;">*</span><span>directionalLight;
</span><span>
</span><span>export </span><span style="color:#569cd6;">void </span><span>websg_load() {
</span><span>    directionalLight =
</span><span>        websg_world_find_light_by_name(</span><span style="color:#d69d85;">&quot;DirectionalLight&quot;</span><span>);
</span><span>}
</span><span>
</span><span>export </span><span style="color:#569cd6;">void </span><span>websg_update(float_t dt, float_t time) {
</span><span>    websg_light_set_color_element(
</span><span>        directionalLight, </span><span style="color:#b5cea8;">0</span><span>, (sin(time) + </span><span style="color:#b5cea8;">1.0</span><span>) / </span><span style="color:#b5cea8;">2.0
</span><span>    );
</span><span>}
</span></code></pre>
<p>But don’t worry - we’re not expecting folks to be writing C as a matter of course; the reason to provide the low-level C API is so that in future we can easily provide Rust and Zig (or more!) bindings so folks can use their favourite native language to compile optimised WASM rather than using interpreted JavaScript.  That said, <a href="https://github.com/matrix-org/thirdroom/blob/main/examples/procgen/c/src/procgen.c">procgen</a> is a fun C example of a procedurally generated Perlin noise blob which pulsates in response to local audio, as an idea of what you can do today if you’re willing to write some C!  There’s also a <a href="https://github.com/matrix-org/thirdroom/blob/main/examples/procgen/js">JS version</a> of it too.</p>
<p>We’ve also bundled basic Matrix widget API support alongside WebSG, so WASM scripts in Third Room can send and receive Matrix events in the underlying chatroom (as well as directly sending messages between clients over WebRTC datachannels).  For instance, one of the commercial WebSG apps which Element has written on top of Third Room is a real-time air traffic simulator, which consumes location-share beacons from the underlying Matrix room (bridged from ADS-B data sources) and procedurally renders them in 3D or AR over a map of the region in question:</p>
<p><img src="/blog/img/2023-06-07-sfo.jpg" alt="SFO" /></p>
<p>We’ve also added a native orbit viewer into Third Room, so from WebSG you can simply call <code>node.startOrbit()</code> on any node to temporarily switch into focusing on a given object (WASD to move; mousewheel to zoom; escape to exit).</p>
<p>Finally, to really show off WebSG at its best, we’ve gone and written a simple game of basketball in precisely <a href="https://github.com/matrix-org/thirdroom/blob/main/examples/basketball/js/basketball.js">100 lines of code</a>, and published a step-by-step tutorial (<a href="https://thirdroom.io/docs/guides/websg/basketball/part-1.html">Part 1</a> covering Interactables, <a href="https://thirdroom.io/docs/guides/websg/basketball/part-2.html">Part 2</a> covering Collisions and <a href="https://thirdroom.io/docs/guides/websg/basketball/part-3.html">Part 3</a> covering Networking) so you can follow along at home.</p>
<iframe width="1280" height="720" src="https://www.youtube.com/embed/VimOoGCPWWw" title="Third Room Basketball Tutorial End Result" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<br/>
<p>Or if you’re impatient you can jump ahead and play with the game <a href="https://thirdroom.io/world/#basketball-court:thirdroom.io">here</a>.</p>
<p>WebSG has gone through quite a few major iterations since announcing it at <a href="https://www.youtube.com/watch?v=nG8qJ4on00Y">FOSDEM</a>, but we’re feeling happy with the current result and have formalised this initial public release with formal API docs as well as the various tutorials.  That said, we’d love to hear feedback via <a href="https://matrix.to/#/#thirdroom-dev:matrix.org">#thirdroom-dev:matrix.org</a> - so please let us know if you’re missing anything or if there are any rough edges we haven’t spotted!</p>
<p>For more details on WebSG, see:</p>
<ul>
<li>the <a href="https://thirdroom.io/docs/guides/websg/">API overview</a></li>
<li>the <a href="https://thirdroom.io/docs/guides/websg/basketball/part-1.html">Tutorial</a></li>
<li>the <a href="https://thirdroom.io/docs/websg-js/">API reference docs</a></li>
<li>…or the all various <a href="https://github.com/matrix-org/thirdroom/blob/main/examples">examples</a> in the Third Room repository:
<ul>
<li><a href="https://github.com/matrix-org/thirdroom/tree/main/examples/basketball/js">basketball/js</a> - the basketball game tutorial</li>
<li><a href="https://github.com/matrix-org/thirdroom/tree/main/examples/ecs-basic/js">ecs-basic/js</a> - an ECS example which spins a given object</li>
<li><a href="https://github.com/matrix-org/thirdroom/tree/main/examples/interactable">interactable</a> - an example for switching lights on and off</li>
<li><a href="https://github.com/matrix-org/thirdroom/tree/main/examples/matrix">matrix</a> - turns the whole world into triplanar Matrix textures via an easter egg</li>
<li><a href="https://github.com/matrix-org/thirdroom/tree/main/examples/network/c">network/c</a> - synchronise light state via raw network messages</li>
<li><a href="https://github.com/matrix-org/thirdroom/tree/main/examples/physics/js">physics/js</a> - create boxes and bump them around</li>
<li><a href="https://github.com/matrix-org/thirdroom/tree/main/examples/platformer/js">platformer/js</a> - the beginnings of a 3D platformer game (needs better character controller)</li>
<li><a href="https://github.com/matrix-org/thirdroom/tree/main/examples/presentation/js">presentation/js</a> - script for previous/next buttons for swapping slides in a presentation</li>
<li><a href="https://github.com/matrix-org/thirdroom/tree/main/examples/procgen">procgen</a> - renders an animated blob of Perlin noise whose geometry reacts to local audio</li>
<li><a href="https://github.com/matrix-org/thirdroom/tree/main/examples/ui-basic/js">ui-basic/js</a> - renders text for in-world UI via the <a href="https://yogalayout.com/">Yoga</a> CSS flexbox engine</li>
<li><a href="https://github.com/matrix-org/thirdroom/tree/main/examples/ui/js">ui/js</a> - renders nested text using Yoga</li>
<li><a href="https://github.com/matrix-org/thirdroom/tree/main/examples/websg-v1">websg-v1</a> - moves and spins some platforms</li>
<li><a href="https://github.com/matrix-org/thirdroom/tree/main/examples/widget-echo/js">widget-echo/js</a> - echos any Matrix message that starts <code>/echo</code> back into the room</li>
<li><a href="https://github.com/matrix-org/thirdroom/tree/main/examples/widget-hello-world/c">widget-hello-world/c</a> - sends “hello world” into the Matrix room.</li>
</ul>
</li>
</ul>
<h3 id="introducing-the-third-room-documentation-site">Introducing the Third Room Documentation site</h3>
<p>Talking of docs, we’re proud to unveil a shiny new documentation website for Third Room at <a href="https://thirdroom.io/docs">https://thirdroom.io/docs</a>. This is the official resource for developers wishing to build on top of Third Room - currently covering:</p>
<ul>
<li><a href="https://thirdroom.io/docs/guides/">Getting Started</a> - a basic guide for users first coming to Third Room</li>
<li><a href="https://thirdroom.io/docs/guides/creators.html">The Creator Guide</a> - explaining how 3D artists and developers can rapidly get up and running by exporting existing assets into glTF for Third Room.</li>
<li><a href="https://thirdroom.io/docs/guides/unity/">The Unity Exporter Guide</a> - explaining how to use export existing Unity assets to glTF for use in Third Room</li>
<li><a href="https://thirdroom.io/docs/guides/developers.html">The Developer Guide</a> - an overview of developing applications using the Web Scene Graph API and self-hosting your own Third Room instance</li>
<li>Web Scene Graph (WebSG)
<ul>
<li>An <a href="https://thirdroom.io/docs/guides/websg/">overview</a> of the WebSG API and its JS and C bindings</li>
<li>The official WebSG Tutorial - learn how to build a basketball game with WebSG!
<ul>
<li><a href="https://thirdroom.io/docs/guides/websg/basketball/part-1.html">Part 1: Interactables</a></li>
<li><a href="https://thirdroom.io/docs/guides/websg/basketball/part-2.html">Part 2: Collisions and UI</a></li>
<li><a href="https://thirdroom.io/docs/guides/websg/basketball/part-3.html">Part 3: Networking </a>(in progress)</li>
</ul>
</li>
<li><a href="https://thirdroom.io/docs/guides/websg/scenegraph.html">A guide to the Scene Graph itself</a></li>
<li><a href="https://thirdroom.io/docs/guides/websg/meshes.html">A guide to manipulating meshes</a> with WebSG</li>
<li><a href="https://thirdroom.io/docs/guides/websg/materials.html">A guide to materials</a> with WebSG</li>
<li><a href="https://thirdroom.io/docs/guides/websg/lighting.html">A guide to lighting</a> with WebSG</li>
<li><a href="https://thirdroom.io/docs/guides/websg/physics.html">A guide to physics</a> with WebSG</li>
<li><a href="https://thirdroom.io/docs/guides/websg/ecs.html">A guide to the ECS API</a> with WebSG</li>
<li><a href="https://thirdroom.io/docs/guides/websg/actionbar.html">A guide to the Action Bar API</a> with WebSG</li>
<li><a href="https://thirdroom.io/docs/guides/websg/ui.html">A guide to the in-world UI API</a> with WebSG</li>
<li><a href="https://thirdroom.io/docs/guides/websg/interactables.html">A guide to interactables</a> with WebSG</li>
<li><a href="https://thirdroom.io/docs/guides/websg/networking.html">A guide to low-latency networking</a> over MatrixRTC via WebSG</li>
</ul>
</li>
<li>Reference documentation:
<ul>
<li>The official <a href="https://thirdroom.io/docs/websg-js/">WebSG API</a> reference documentation</li>
<li>The official reference for the various <a href="https://thirdroom.io/docs/gltf/">glTF Extensions</a> used by Third Room (in progress).</li>
</ul>
</li>
</ul>
<p><img src="/blog/img/2023-06-07-docs.png" alt="Docs" /></p>
<h3 id="introducing-the-in-world-editor">Introducing the In-World Editor</h3>
<p>Aside from all the WebSG API excitement, another key area in this release is the ability to visualise and manipulate the glTF scene graph in real-time via the in-world editor.  At any time while using Third Room, you can now hit the backtick key ``` and bring up an overlay showing the current scene graph of the world - and go clicking through the nodes to inspect their current state, and experiment with editing them a bit.  Currently this requires you to be an admin in the room.  For instance, you can go in and mess around with the scene’s materials via the Resources tab of the scene graph panel and the Inspector panel on the right hand side:</p>
<p><img src="/blog/img/2023-06-07-editor-1.png" alt="Editor 1" /></p>
<p>…or you could go and move the geometry outright:</p>
<p><img src="/blog/img/2023-06-07-editor-2.png" alt="Editor 2" /></p>
<p>…or even bring up a <a href="https://microsoft.github.io/monaco-editor/">Monaco</a> editor to directly edit the script controlling the world (if it’s JavaScript):</p>
<p><img src="/blog/img/2023-06-07-editor-3.png" alt="Editor 3" /></p>
<p>…and hit Save &amp; Run and see your changes instantly take effect:</p>
<iframe width="1280" height="751" src="https://www.youtube.com/embed/TWC6MpUh6KY" title="Third Room WebSG demo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<br/>
<p>If it wasn’t obvious, this is Third Room’s equivalent of your browser’s developer tools: letting you jump straight into the scene and see precisely what’s going on, and directly manipulate it in real-time.</p>
<p>Now, there’s a bit remaining on this: the inspector needs to expose more UI for manipulating the scene (e.g. gizmos for picking objects in-world and translating/rotating them, etc); we need better error feedback in the inspector (or even a debugger); we can’t yet create/copy/delete nodes in the scenegraph, etc.  However, it’s already super-useful for seeing what’s going on and helping debug your WebSG scripts.</p>
<h3 id="networking">Networking</h3>
<p>Another area which has seen a lot of work in this update is Third Room’s networking - i.e. how you synchronise world state between clients as efficiently and rapidly as possible, and (critically) how you make that work deterministically now that we have WebSG.</p>
<p>At the lower levels, all the networking in Third Room operates over WebRTC data channels negotiated via Matrix (aka MatrixRTC), which establish a full mesh between all the peers active in the room. (In future this will be scaled up using <a href="https://fosdem.org/2023/schedule/event/cascaded_selective_forwarding_units/">Selective Forwarding Units</a>, but this work is still in progress).</p>
<p>However, at the higher levels, things are in flux. In the first Tech Preview of Third Room, we synchronised worlds using so-called peer-to-peer networking. In practice, this means that every client runs its own physics simulation of the world, and each client owns the objects which it creates - and each client sends updates about the state of its objects (position, rotation, etc) to the other members in the room, which overrides with the local view of their objects, with some smoothing, thus keeping everyone roughly in sync.  This worked well for early Third Room before we sprouted WebSG, but it has the problem that there is no single point of control when executing scripts - the world is not deterministic, and if every client executes the world’s script in parallel, they’d race badly as soon the script needs to handle users interacting with one another.</p>
<p>So, we’ve written a new networking engine called Authoritative Networking - which picks a given client in the room to be the authoritative simulation for the room, and executes any WebSG scripts on that client in order to get consistent results across all participants in the room.  The authoritative client is picked based on the user with the highest power level - you can think of it almost as being a bot (hosted inside someone’s browser) which executes the simulation and scripts for that world.  If that user goes offline, then the baton would be picked up by another user in the scene.  (Obviously, in an ideal world we’d have a way to execute the scripts and simulations in a byzantine-fault tolerant manner, in parallel, with minimal latency, and without any centralisation… but we’re focusing on walking before we can run :)</p>
<p>The current Authoritative Networking engine has some problems: we decided to synchronise simulator inputs from the scene participants to the authoritative client, rather than synchronising the physics properties of their owned objects - and this has proved difficult to script and author content around.  Therefore we’re experimenting with an alternative implementation inspired by Godot’s networking, where we synchronise object properties rather than inputs instead.</p>
<p>This means that right now networking is still somewhat up in the air: WebSG can execute on both the original p2p networking engine (but will be racy if user interactions collide), or the new authoritative engine (but interpolation is jumpy).  This doesn’t stop you from experimenting with networking in WebSG however - and local behaviour isn’t affected at all.  You can turn on Authoritative Networking in user settings under View Profile if you want to try.</p>
<p>We’re working away on sorting this out one way or another - if it was working perfectly it wouldn’t be a Tech Preview, after all ;)</p>
<h3 id="introducing-the-discover-page">Introducing the Discover page</h3>
<p>In keeping with the focus on creators in this release, we’ve also added a new Discover view to Third Room, making it easier to find existing scenes and worlds.  A directory of curated content is published in a repository room (<a href="https://github.com/ajbura/matrix-spec-proposals/blob/respository-room/proposals/3948-repository-room.md">MSC3948</a>) - by default #repository-room:thirdroom.io, and then hitting the compass icon in the side menu will let you create your own worlds based on existing scenes, or indeed discover and jump into existing worlds:</p>
<p><img src="/blog/img/2023-06-07-discover.png" alt="Discover" /></p>
<p>Meanwhile the Creator tab makes it even easier to get up and running creating new worlds. The Discover view now becomes the default view for new users, to help them onboard when they enter the app for the first time.</p>
<h3 id="webxr-support">WebXR support</h3>
<p>Finally, just one more thing… Ready for your fancy new VR/AR headset, we’re happy to announce that this update of Third Room includes WebXR support - and while it’s pretty basic (no UI overlays in XR) it actually works incredibly well, at excellent frame rates even on complex scenes.  To use it, load Third Room in the browser in your headset; enable WebXR in your profile settings, and then click the WebXR button in the bottom right group of buttons to be teleported into XR mode.</p>
<p>Here’s me &amp; Amandine playing with it using two Quest Pros - on the left you can see my view of her in XR taken as a screenshot from my Quest Pro, showing her interacting with the air traffic simulator (with her headset, controllers and lasers superimposed as well as the map &amp; plane data).  On the right you can see the same scene in plain old 3D Third Room, showing disembodied headset/controllers (and my controller laser pointers) given we don’t have custom avatars yet.</p>
<p>WebXR <em>should</em> work out of the box on any good VR/AR headset, without having to install any additional software or being locked into any vendor’s app store. We even expect it to work with Apple’s Vision Pro headset, based on the <a href="https://webkit.org/blog/14205/news-from-wwdc23-webkit-features-in-safari-17-beta/">Safari 17 release notes</a>. This is the whole promise of the open Web, and we hope Third Room will provide an amazing open environment to create XR apps and experiences in future.</p>
<p><img src="/blog/img/2023-06-07-webxr.jpg" alt="WebXR" /></p>
<h3 id="what-remains">What remains?</h3>
<p>While we’ve made extraordinary progress since the last release, there’s still a bunch of things remaining which is keeping Third Room as a Technology Preview.  Most important first:</p>
<ul>
<li>Networking
<ul>
<li>As per the Networking section above, we need to rework Authoritative Networking so we have the final networking model in place, such that WebSG scripts execute deterministically in a single place with smooth but accurate interpolation on the participating clients. We also need to iterate a bit more on the final networking API so that anyone can build multi-user apps with ease.</li>
</ul>
</li>
<li>Persistence
<ul>
<li>While we can now edit and script scenes, the edits are only stored in the RAM of the connected clients: when all the clients from a world disconnect, the state is lost and the world resets back to its original state. Instead, we need to store the glTF changes back to the Matrix content repository on a regular basis.</li>
</ul>
</li>
<li>Firefox performance
<ul>
<li>We’ve seen a nasty regression in the last month or two on Firefox, where SpiderMonkey (Firefox’s JavaScript engine) starts frantically garbage-collecting, despite us allocating an extremely tiny amount of memory, killing your framerate. We haven’t figured out yet whether this is our fault or Firefox’s (if someone wants to bisect old Firefox releases over the last few months we’d be very grateful!), but for now FF performance is dire in TP2.</li>
</ul>
</li>
<li>Custom Avatars
<ul>
<li>Whilst there’s been some work on this in the community, it’s not landed yet.  There’s nothing especially hard here though (other than IK) - it’s just a matter of bandwidth.</li>
</ul>
</li>
<li>Shadows
<ul>
<li>We have some cascaded shadow map experiments already, but we need to get it stable and on by default for scenes which would benefit (e.g. the basketball tutorial!)</li>
</ul>
</li>
<li>Mobile web
<ul>
<li>Similarly, support for mobile web would be really nice for those dipping their toe in the water - and given the performance we’re seeing on Android-based XR headsets like the Quest, the performance on mobile web should be sensational.  Again, it’s just a matter of time to sort it out.</li>
</ul>
</li>
<li>Fully-fledged editor
<ul>
<li>The current editor is effectively just an inspector; it’s great for visualising the glTF scene, but you can’t really go and start changing the fabric of reality yet. An editor isn’t an editor without some fancy 3D gizmos to help you grab and manipulate the world - so for all our in-world direct manipulation Inception dreams to come true, the devtools need a bit more work.</li>
</ul>
</li>
<li>Content!
<ul>
<li>Finally, last but not least, we need to start populating these worlds with some fun, beautiful, amazing apps and games.  The whole point of this release is to give creators the tools they need to start properly playing around, building on top of Third Room, and we really hope you’ll give it a go and get involved (not least as our bandwidth to do so within the core team is sorely limited).</li>
</ul>
</li>
</ul>
<p>Hopefully the next release will be both the final tech preview and the first beta of the complete Third Room experience - but to get there, we need your feedback: please head over to <a href="https://matrix.to/#/#thirdroom-dev:matrix.org">#thirdroom-dev:matrix.org</a> and tell us what you think!</p>
<h3 id="funding-third-room">Funding Third Room</h3>
<p>If you’ve read this far, you must surely be pretty interested in Third Room, and hopefully agree that having an open platform for building spatial apps and virtual worlds is absolutely critical for the health and future of the Internet - especially as the VR/AR/3D space slowly but surely gathers momentum as new players and hardware materialise.</p>
<p>However, funding the team to work full-time on Third Room is increasingly challenging - the macroeconomic environment does not lend itself to moonshot R&amp;D projects, and Matrix as a whole continues to suffer from <a href="https://matrix.org/blog/2022/12/25/the-matrix-holiday-update-2022">insufficient financial support</a> (quite aside from Third Room).  This is particularly frustrating given the massive range of obvious commercial applications for Third Room - whether that’s for building digital twins, situational awareness, telepresence, gaming, providing an open platform to glue together real-time 3D data from other existing data feeds, etc.</p>
<p>To try to spell out the opportunities and why it clearly makes sense for commercial players to invest in supporting Third Room development, we recently put together a quick enterprise demo reel (which also serves to demo everything mentioned above, albeit in a more businessy manner than normal). <strong>If this resonates and your organisation is interested in funding Third Room - please contact <a href="mailto:funding@matrix.org">funding@matrix.org</a> asap.</strong></p>
<iframe width="1280" height="720" src="https://www.youtube.com/embed/cFKJ-IuGaKA" title="Third Room Enterprise Demo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<br/>
<p>Otherwise, we hope you enjoy the new update - and please let us know how you get on with it!</p>
<p>Matthew, Robert, Nate &amp; Ajay</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2023&#x2F;03&#x2F;15&#x2F;the-dma-stakeholder-workshop-interoperability-between-messaging-services&#x2F;" title="The DMA Stakeholder Workshop: Interoperability between messaging services">The DMA Stakeholder Workshop: Interoperability between messaging services</a></h2>
                <span>
                    15.03.2023 00:00
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>A few weeks ago we found ourselves in Brussels to participate in the second <a href="https://competition-policy.ec.europa.eu/dma/dma-workshops_en">stakeholder workshop for the Digital Markets Act (DMA)</a>.</p>
<p>The <a href="https://commission.europa.eu/strategy-and-policy/priorities-2019-2024/europe-fit-digital-age/digital-markets-act-ensuring-fair-and-open-digital-markets_en">DMA</a> is new antitrust/competition regulation from Europe which came into force in November, whose objective is to make digital markets more competitive by forcing gatekeepers (i.e. large tech companies) to reconsider some of their anti-competitive or self-preferencing practices. Gatekeepers are defined as companies which have a clear position of influence in a given market (based on revenue / market cap / number of users thresholds), and “an entrenched and durable position”. The process for designating which companies count as gatekeepers will start in May 2023.</p>
<p>The DMA touches upon different key topics, from self-preferencing behaviour to app store management practices - but most importantly includes interoperability for “number-independent interpersonal communication services” (NIICS), otherwise known as chat and voice/video calling and conferencing services (social media was left out for now). </p>
<p><a href="https://competition-policy.ec.europa.eu/dma/dma-workshops/interoperability-workshop_en">This particular workshop</a> was focused on the latter: interoperability between messaging services, with the aim of getting the different stakeholders of the industry in the same place to discuss how the legislation could be implemented.  The whole idea is to figure out a practical way in which WhatsApp could interoperate with iMessage, Google Messages and others, creating an interoperable communication network where users are no longer locked into communication silos and pick their preferred service provider without compromising on who they can talk to. </p>
<p>About 900 people participated online, and around 80 people were present in person: the maximum the room could hold. It was particularly fun to see representatives from the whole industry turning up in person, including folks from XMPP, MIMI (the new IETF working group on messaging interoperability), MLS, us from Matrix obviously (alongside Matrix ecosystem representatives from Beeper and NeoChat!) - all together with the Body of European Regulators for Electronic Communications (<a href="https://www.berec.europa.eu/en/berec/what-is-berec">BEREC</a>), civil society representatives (like the Federation of German Consumer Organisations (<a href="https://VZBV.de">VZBV</a>) and European Digital Rights (<a href="https://edri.org">EDRi</a>)), mobile network operators, local network agencies, and obviously some of those who are likely to be designated as gatekeepers, such as Meta, Apple and Google.</p>
<h2 id="so-what-was-discussed">So what was discussed?</h2>
<p>All of the workshop proceeds were livestreamed and archived by European Commission’s <a href="https://webcast.ec.europa.eu/dma-workshop-2023-02-27">webcasting service</a> and <a href="https://commission.europa.eu/legal-notice_en#copyright-notice">released</a> under the terms of the Creative Commons Attribution 4.0 International (CC BY 4.0) licence, so we’ve taken the liberty of republishing them split up into chapters so that folks can quickly refer to the discussion.</p>
<h3 id="panel-1-introduction-to-horizontal-interoperability-between-messaging-services-goals-challenges-and-potential-solutions">Panel 1: Introduction to horizontal interoperability between messaging services: goals, challenges and potential solutions</h3>
<p>The first panel focused on setting up the scene and highlighting the challenges expected during the implementation phase, featuring <a href="https://www.soi.unitn.it/staff/simonetta-vezzoso/">Simonetta Vezzoso</a> (Professor of Economics at The University of Trento), <a href="https://www.linkedin.com/in/chiaracaccinelli">Chiara Caccinelli</a> (Co-chair - Digital Markets WG at <a href="https://www.berec.europa.eu/">BEREC</a>), <a href="https://www.vzbv.de/en/policy-work/experts">Suzanne Blohm</a> (Policy officer at <a href="https://www.vzbv.de/">Verbraucherzentrale Bundesverbands (VZBV)</a>) and <a href="https://www.linkedin.com/in/jan-penfrat">Jan Penfrat</a> (Senior Policy Advisor at <a href="https://edri.org/">EDRi</a>). There was a lot of emphasis around the risks of gatekeepers dragging their feet, or choosing the solution which makes it harder for SMEs or self-hosters to interoperate, as well as the challenge of introducing the new paradigm of interoperability for messaging without losing the usability aspect - see below for the full scope:</p>
<iframe src="https://www.youtube.com/embed/yoKjXN3G8a8" title="DMA &amp; messaging services interoperability - Legal framework of article 7, tradeoff &amp; challenges" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<br/>
<ul>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=0s">00:00</a> Welcome to the second DMA stakeholder workshop about interoperability between messaging services</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=483s">08:03</a> Introduction of the panelists</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=566s">09:26</a> What is the Article 7 of the Digital Markets Act (Simonetta Vezzoso)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=1595s">26:35</a> Interoperability already exists in the EU, what can we learn from it (Chiara Caccinelli)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=2443s">40:43</a> End user perspective and behaviour, benefits of the DMA Article 7, Challenges (Suzanne Blohm)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=2970s">49:30</a> Benefits for end users, and an existing technical stack to build from (Jan Penfrat)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=3561s">59:21</a> What the UI could look like (Jan Penfrat)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=3787s">01:03:07</a> Question - Do users need an account on each network, or is it a true federation? (XMPP Foundation)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=3919s">01:05:19</a> Question - What rule do you see for Telcos and for messaging services they provide?</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=4207s">01:10:07</a> Question - Does the term &quot;user&quot; include people running their own server/service? (Open Source Initiative)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=4490s">01:14:50</a> Question - How to check the gatekeeper is not giving a suboptimal solution? (online question)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=4684s">01:18:04</a> Question - Does user consent limit the power of Article 7? (Viber)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=4956s">01:22:36</a> Question - Gatekeepers don't have an incentive to make appealing UIs for interoperability and might try to scare users away. Will it be addressed? (NLNet)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=5048s">01:24:08</a> Question - People usually dislike popups, how to strike the balance between warning and upsetting them? (online)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=5271s">01:27:51</a> Question - Have you been thinking about reputation models?</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=5393s">01:29:53</a> Question - Different apps use different E2EE protocols to differentiate. Could article 7 kill that differentiation? (online)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=5928s">01:38:48</a> Question - What will be the paradigm of non discrimination?</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=5590s">01:33:10</a> Question - What about interoperability of RCS and Apple iMessage? (Orange)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=5684s">01:34:44</a> Question - Do you take into account that there are not only company-run services, but also Open Source components? (Process One)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=5755s">01:35:55</a> Question - What are the implications for non European users? (Beeper)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=5965s">01:39:25</a> Question - Does the DMA only mandate interoperability for European users, even on a same platform? (XMPP)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=6036s">01:40:36</a> Question - Will the interoperability be opt-in or opt-out? (Matrix)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=6110s">01:41:50</a> Question - How avoid the standardisation to be taken over by commercial interests? (online)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=6223s">01:43:43</a> Question - What will the timing look like for the DMA? (Cisco)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=6493s">01:48:13</a> Question - What could be reasonable requirements for smaller services? (online)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=6540s">01:49:00</a> Question - Where should gatekeeper gather to start discussion how interoperability will look like in practice? (OpenXchange)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=6671s">01:51:11</a> Question - What about account portability, for users switching from one platform to another? (University of Rome)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=6893s">01:54:53</a> Question - Is contact information part of the data gatekeepers need to share? (XMPP)</li>
<li><a href="https://www.youtube.com/watch?v=yoKjXN3G8a8&amp;t=6972s">01:56:12</a> Closing</li>
</ul>
<h3 id="panel-2-exploring-the-technical-aspects-of-interoperability-part-1-end-to-end-encryption-security-of-the-service">Panel 2: Exploring the technical aspects of interoperability (Part 1): end-to-end encryption, security of the service</h3>
<p>Then, after a quick lunch, the second panel went into the nitty gritty of how end-to-end encrypted interoperable messaging (1:1 messaging is the first milestone to be delivered, hence the focus) could actually be implemented by the gatekeepers. The panel starred <a href="https://www.roeslpa.de/">Paul Rösler</a> from <a href="https://fau.de/">FAU Erlangen-Nürnberg</a>, who gave a great overview of end-to-end encryption in general, <a href="https://alissacooper.com/">Alissa Cooper</a> from Cisco who explained the merits of open interoperable protocols, <a href="https://educatedguesswork.org/about/">Eric Rescorla</a> from Mozilla explaining the merits of standardisation, yours truly from Matrix explaining and demonstrating how one can actually use a standardised open protocol to interoperate without sacrificing privacy (effectively fleshing out our <a href="https://matrix.org/blog/2022/03/29/how-do-you-implement-interoperability-in-a-dma-world">blog</a> <a href="https://matrix.org/blog/2022/03/25/interoperability-without-sacrificing-privacy-matrix-and-the-dma">posts</a> from last year) and then finally <a href="https://www.linkedin.com/in/stephen-hurley-24424231">Stephen Hurley</a> from Meta to explain how they are thinking about DMA obligations.</p>
<p>The panel ended up being a relatively exciting tour through the landscape of DMA practicalities, and it was a lot of fun to actually <a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3715s">demonstrate a minimum viable prototype of client-side bridging</a> thanks to Travis’s work packaging up standalone client-side bridges for <a href="https://github.com/matrix-org/dma-demo-app-bridge-whatsapp">WhatsApp</a> and <a href="https://github.com/matrix-org/dma-demo-app-bridge-googlechat">Google Chat</a> (strictly for demonstration illustrative purposes only). The slides (and demo) were sadly a bit fuzzy on the recording, but you can see our slides below and grab everyone’s presentations from the <a href="https://competition-policy.ec.europa.eu/document/download/c59e04bc-f96c-49d9-b161-ad9c24d82367_en?filename=20230227_dma_stakeholders_workshop_panelists_material_0.zip">European Commission website</a>:</p>
<iframe width="1280" height="720" src="/blog/img/matrix-dma-slides.pdf"></iframe>
<br/>
<p>When DMA first became headline news last year, there was a lot of <a href="https://www.theverge.com/2022/3/28/23000148/eu-dma-damage-whatsapp-encryption-privacy">very vocal concern</a> that it would somehow end up undermining end-to-end encryption (despite the legislation explicitly requiring that E2EE must be preserved when interoperating). Hopefully this session demonstrated that both the European Commission and the various panellists are dead serious about achieving interoperability without sacrificing privacy - whether that’s via the brute-force approach of client-side bridges, or the more sophisticated approach of client-side bridges which bridge to client-side APIs, or by incrementally or entirely adopting a true open standard protocol like Matrix, XMPP, or whatever MIMI comes up with.</p>
<p>You can see the whole panel split into the various sections below:</p>
<iframe  src="https://www.youtube.com/embed/FDnUJXzVn3s" title="DMA &amp; messaging services interoperability - End to end Encryption and Security" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<br/>
<ul>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=0s">00:00</a> Opening</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=83s">01:23</a> Introduction of the panellists</li>
<li><strong>Interoperable Messaging - Paul Rösler (FAU)</strong></li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=190s">03:10</a> Interoperable end-to-end (E2EE) encryption options (Paul Rösler)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=324s">05:24</a> Requirements for interoperable E2EE (Paul Rösler)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=562s">09:22</a> Options for interoperable E2EE (Paul Rösler)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=834s">13:54</a> Confidentiality, Privacy &amp; Abuse prevention (Paul Rösler)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=1147s">19:07</a> Group Messaging (Paul Rösler)</li>
<li><strong>DMA Stakeholder Workshop: Interoperability - Eric Rescorla (Mozilla)</strong></li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=1364s">22:44</a> Learning from QUIC (Mozilla)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=1454s">24:14</a> E2EE and interoperability (Mozilla)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=1550s">25:50</a> Key Establishment in a E2EE interoperable system (Mozilla)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=1636s">27:16</a> Message and media formats in a E2EE interoperable system (Mozilla)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=1710s">28:30</a> Identity in a E2EE interoperable system (Mozilla)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=1849s">30:49</a> Multiple gatekeeper scenarios (Mozilla)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=1901s">31:41</a> Suggested framework for interoperability (Mozilla)</li>
<li><strong>DMA Stakeholder Workshop: Interoperability - Alissa Cooper (Cisco)</strong></li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=2120s">35:20</a> Discussing how the UX of a DMA compliant product can look like (Cisco)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=2198s">36:38</a> The use case for enterprise interoperability (Cisco)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=1847s">30:47</a> Approaches to DMA Compliance (Cisco)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=2637s">43:57</a> Limits of the per-gatekeeper, in-house solution approach (Cisco)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=2899s">48:19</a> Strengths of the consolidated (standardised) solution (Cisco)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3000s">50:00</a> Implications &amp; requirements of the consolidated solution (Cisco)</li>
<li><strong>Implementing Interoperability for the DMA - Matthew Hodgson (Matrix)</strong></li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3123s">52:03</a> Implementing Interoperability in practice for the DMA (Matrix)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3180s">53:00</a> A practical path to full interoperability (Matrix)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3275s">54:35</a> Defining the problem we're solving (Matrix)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3315s">55:15</a> Approach 1 Client-side bridging using server-side APIs (Matrix)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3441s">57:21</a> Approach 2 Client-side bridging using client-side APIs (Matrix)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3528s">58:48</a> Approach 3 Polyglot app, using a 3rd party protocol à la iMessage (Matrix)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3606s">01:00:06</a> Approach 4 Using an open protocol (Matrix)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3642s">01:00:42</a> Pros &amp; Cons of each approach (Matrix)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=3715s">01:01:55</a> DEMO of client-side bridging (Matrix)</li>
<li><strong>Meta's view on the DMA as seen from WhatsApp - Stephen Hurley (Meta)</strong></li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=4005s">01:06:45</a> Meta's view on the DMA as seen from WhatsApp (Meta)</li>
<li><strong>Questions</strong></li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=4632s">01:17:12</a> Matthew (Matrix) remind that not only the demo showed client-side bridging was possible, but iMessage has been doing it for years via SMS &amp; iMessage</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=4674s">01:17:54</a> Meta has two IM platforms (Instagram and Facebook) that are not E2EE. What is Meta going to do about those platforms? (Beeper)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=4725s">01:18:45</a> How to balance discoverability and privacy?</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=4864s">01:21:04</a> How to solve the problem of different E2EE protocols? (online)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=5088s">01:24:48</a> Do some of the panellists think the best option is not a single standardised protocol? (OpenXchange)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=5626s">01:33:46</a> Which measures by gatekeepers to preserve security integrity and privacy can be considered proportionate?</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=5798s">01:36:38</a> How many people have worked on the client-side demo?</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=5936s">01:38:56</a> Does it really matter that MLS is not &quot;done&quot;?</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=6450s">01:47:30</a> How will article 7 ensure private keys will never transit over the network? (online)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=6780s">01:53:00</a> What about interoperability of features like custom emojis, removing messages, etc? (online)</li>
<li><a href="https://www.youtube.com/watch?v=FDnUJXzVn3s&amp;t=7062s">01:57:42</a> What does the rest of the panel thinks about the guarantees they can provide when a message leaves a system? (XMPP)</li>
</ul>
<h3 id="panel-3-exploring-the-technical-aspects-of-interoperability-ii-data-collection-identification-of-users-quality-of-interoperable-services-system-management-integrity-of-the-service-prevention-of-misuse">Panel 3: Exploring the technical aspects of interoperability (II): data collection, identification of users, quality of interoperable services, system management, integrity of the service/prevention of misuse</h3>
<p>Finally, we launched into the third and final session of the day - a second technical panel to dig into questions of identity, usability, data privacy, consent and anti-abuse in a DMA world.  Relative to the second panel, there were more questions than answers here, as the panellists discussed whether users would need to consent or opt-in/opt-out of interoperability, and debated the various data privacy implications of DMA.  The panel starred Stephen Hurley from Meta again, <a href="https://www.linkedin.com/in/lucas-verney">Lucas Verney</a> from <a href="https://www.peren.gouv.fr">PEReN</a>, Markus Klein from <a href="https://www.bundesnetzagentur.de/">Bundesnetzagentur</a> and <a href="https://rohan.com/">Rohan Mahy</a> from <a href="https://wire.com">Wire</a> introducing the <a href="https://datatracker.ietf.org/group/mimi">MIMI working group</a> at IETF.</p>
<iframe src="https://www.youtube.com/embed/ZtRmAaHUxWw" title="DMA &amp; messaging services interoperability - Metadata, cross-certification of users, and UI" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
<br/>
<ul>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=0s">00:00</a> Opening and panellists introduction</li>
<li><strong>Meta / WhatsApp</strong></li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=141s">02:21</a> User Safety on WhatsApp</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=411s">06:51</a> Consenting to interoperability</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=476s">07:56</a> Objective criteria to assess whether a request is reasonable or not</li>
<li><strong>PEReN</strong></li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=540s">09:00</a> PEReN is a French government digital expertise hub</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=612s">10:12</a> Efficient design for effective interoperability</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=685s">11:25</a> Reconciliation identity between services</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=820s">13:40</a> Discoverability between platforms of different scales</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=987s">16:27</a> Should fancy features (e.g. emoji reactions) be interoperable?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=1042s">17:22</a> Quality of Service</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=1142s">19:02</a> Security goes beyond E2EE</li>
<li><strong>Bundesnetzagentur</strong></li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=1226s">20:26</a> Bundesnetzagentur views on the DMA</li>
<li><strong>Wire</strong></li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=1599s">26:39</a> Federation and Interoperability issues are similar</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=1690s">28:10</a> Standards-based interoperability and the MIMI working group</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=1758s">29:18</a> Identifiers, devices, handles</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=1850s">30:50</a> User introduction &amp; discovery</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=1890s">31:30</a> Messaging content</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=2046s">34:06</a> Why MIMI picked MLS for E2EE?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=2154s">35:54</a> Server to server transport mechanism</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=2198s">36:38</a> E2EE Cryptographic identity</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=2340s">39:00</a> MIMI's standardisation work provides a strong foundation for other features</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=2425s">40:25</a> Why is standardized interoperability beneficial?</li>
<li><strong>Questions</strong></li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=2670s">44:30</a> What about terms of service, minimum usage age enforcement etc?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=2883s">48:03</a> How can identity be maintained separately from networks? How will differing policies of services be respected?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=3146s">52:26</a> Does WhatsApp rely on the phone number as a primary identifier?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=3209s">53:29</a> Some systems like Telegram have pseudonymous IDs. How would that work with platforms relying on e.g. phone numbers?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=3342s">55:42</a> Should the service name be part of the identifier?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=3453s">57:33</a> Can the DMA improve how authentication is handled?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=3591s">59:51</a> What made the GDPR successful is the potential fines. What about the DMA?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=3828s">01:03:48</a> How can interoperability be designed to stop leaking contact lists?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=4155s">01:09:15</a> Are we doing cookie banners again?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=4557s">01:15:57</a> Should we think about some integration with eIDAS for more trustworthy identities?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=4788s">01:19:48</a> Are all the protocols like Matrix or MIMI free to use, or do they have a fee?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=4952s">01:22:32</a> Are there really concerns about the DMA and security?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=5260s">01:27:40</a> Does Meta expect to provide a EU-only and a global version of their messengers?</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=5395s">01:29:55</a> The views expressed here regarding consent are concerning when it comes to self-hosting</li>
<li><a href="https://www.youtube.com/watch?v=ZtRmAaHUxWw&amp;t=5780s">01:36:20</a> Closing</li>
</ul>
<h2 id="conclusion">Conclusion</h2>
<p>This was a fascinating opportunity to have a front-row seat at history being made, as the various key players finally got down to business on the practical implications of DMA interoperability.</p>
<p>We saw the full spectrum of options on the table, from Meta’s implications that they would simply open their existing API complete with the existing Double Ratchet Encryption, to the pragmatic approach of Matrix (“at first we’ll bridge, and then the players should gradually converge on an open standard”) to the more idealistic approach of MIMI (“everyone should natively adopt an entirely new open standard built on MLS”).  The next step is to establish a reference implementation and approach, and in the end it seems likely that the approach that works will be the one which the gatekeepers can actually practically adopt within the punchy timeframes built into the legislation:</p>
<p><img src="/blog/img/dma.jpg" alt="DMA timeline" /></p>
<p>You can also check out <a href="https://carlschwan.eu/2023/03/02/digital-market-act-workshop-in-brussels/">Carl Schwan’s writeup</a> (from NeoChat), as well as Eric Rescorla’s braindump on <a href="https://educatedguesswork.org/posts/dma-interop/">DMA interoperability</a> that accompanies his talk.</p>
<p>We live in interesting times, and it’s fascinating to see Matrix’s vision of interoperable communication being cemented into regulation by the EU.  Our view is that as long as the gatekeepers open their APIs and add support to model remote users in their systems, then at least the wider world can implement client-side bridges to crack the door of the gatekeepers open - and then as gatekeepers refresh their stacks and new players emerge, they’ll likely implement the common protocol (if it’s fit for purpose) rather than burn time reinventing the wheel on proprietary solutions.  Meanwhile, the DMA provides welcome encouragement to ensure that open protocols like Matrix can rise to the challenge and fill the gap - whether that’s <a href="https://spec.matrix.org">independently</a> or as <a href="https://datatracker.ietf.org/doc/draft-ralston-mimi-matrix-framework/">part of IETF’s MIMI</a> initiative. May the best solution win!</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;12&#x2F;25&#x2F;the-matrix-holiday-update-2022&#x2F;" title="The Matrix Holiday Update 2022">The Matrix Holiday Update 2022</a></h2>
                <span>
                    25.12.2022 00:00
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>2022 has been a rollercoaster of a year for Matrix.</p>
<p>On one hand, the network has doubled in size (44.1M to 80.3M visible matrix IDs). The wider world is having a grand awakening to the importance of decentralisation thanks to the situation at Twitter. We’ve seen an amazing number of major new players entering the Matrix ecosystem: <a href="https://macaw.social/@wongmjane/109529583352532543">Reddit appears to be building out new Chat</a> functionality using Matrix; <a href="https://twitter.com/teamspeak/status/1589621116032585728">TeamSpeak announced</a> Matrix-based chat in TS5; <a href="https://meta.discourse.org/t/matrix-protocol-for-chat/210780">Discourse</a> is working on adding Matrix support; <a href="https://www.theregister.com/2022/06/30/thunderbird_102">Thunderbird</a> launched Matrix support; Governments from <a href="https://gouvernement.lu/en/actualites/toutes_actualites/communiques/2022/11-novembre/16-hansen-lancement.html">Luxembourg</a> to <a href="https://delta.mil.gov.ua/wiki/info/">Ukraine</a> have launched their own Matrix-powered chat infrastructure; and hundreds of other organisations ranging from startups to massive private &amp; public sector entities are betting on the protocol. The European Parliament has used Matrix as a proof-point for the viability for communication interoperability between gatekeepers in the <a href="https://matrix.org/blog/2022/03/29/how-do-you-implement-interoperability-in-a-dma-world">Digital Markets Act</a>. <a href="https://matrix.org/blog/2022/02/07/hosting-fosdem-2022-on-matrix">FOSDEM 2022</a> ran smoothly via Matrix with over 23,000 attendees, making it the world's largest open source conference (with 70% of attendees using their own servers!). <a href="https://element.io/blog/dsam-och-esam-forordar-matrix-for-saker-och-federerad-kommunikation-inom-sveriges-offentliga-sektor/">Sweden</a> has published case studies on the benefits of Matrix for messaging interoperability. Meanwhile existing players like Germany’s BWI have expanded their scope to providing Matrix messaging to the <a href="https://element.io/blog/bundesmessenger-is-a-milestone-in-germanys-ground-breaking-vision/">whole German State</a>; Automattic is busy building <a href="https://github.com/Automattic/chatrix">Matrix plugins</a> for Wordpress; Rocket.Chat launched <a href="https://rocket.chat/press-releases/rocket-chat-leverages-matrix-protocol-for-decentralized-and-interoperable-communications">federation via Matrix</a>, Gematik has been busy progressing their <a href="https://www.gematik.de/anwendungen/ti-messenger">TI Messenger</a> initiative for interoperable messaging within Germany’s healthcare industry, and <a href="https://element.io/case-studies/tchap">Tchap</a> in France is continuing to expand.</p>
<p>On the other hand, only a handful of these initiatives have resulted in funding reaching the core Matrix team. <strong>This is directly putting core Matrix development at risk.</strong> We are witnessing a classic tragedy of the commons. We’ve released all the foundational code of Matrix as permissively-licensed open source and got it to the point that anyone can successfully run it at scale themselves. The network is expanding exponentially. But in return, it transpires that the vast majority of these commercial deployments fail to contribute financially to the Matrix Foundation - whether by donating directly or supporting indirectly by working with <a href="https://element.io">Element</a>, who fund the vast majority of core Matrix development today.</p>
<p>In short: folks love the amazing decentralised encrypted comms utopia of Matrix.  But organisations also love that they can use it without having to pay anyone to develop or maintain it. <strong>This is completely unsustainable</strong>, and Element is now <em>literally</em> unable to fund the entirety of the Matrix Foundation on behalf of everyone else - and has had to lay off some of the folks working on the core team as a result.</p>
<p>The only viable solution to this is for organisations building on Matrix to contribute to sharing the costs of maintaining Matrix’s core projects.  We made <a href="https://matrix.org/blog/2022/12/01/funding-matrix-via-the-matrix-org-foundation">a proposal</a> to address this a few weeks ago, which we’ll iterate on further in the new year to find an approach which both empowers the community and encourages organisations to participate.  In the interim, if you are an organisation who’s building on Matrix and you want the project to continue to flourish, <strong>please</strong> mail <a href="mailto:funding@matrix.org">funding@matrix.org</a> to discuss how you can support the foundations that you are depending on.</p>
<p>As a reminder, the work the <a href="https://matrix.org/foundation">Foundation</a> does today for the benefit of the Matrix includes:</p>
<ul>
<li>Publishing the<a href="https://spec.matrix.org"> Matrix Specification</a></li>
<li>Organising the Matrix Spec Core Team, responsible for reviewing and evolving the protocol.</li>
<li>Writing roughly half the Matrix Spec Change <a href="https://spec.matrix.org/proposals">proposals</a>.</li>
<li>Developing <a href="https://github.com/matrix-org/synapse">Synapse</a>, the Python matrix homeserver implementation</li>
<li>Developing <a href="https://github.com/matrix-org/dendrite">Dendrite</a>, the Go homeserver implementation</li>
<li>Developing client SDKs for Web (matrix-js-sdk, matrix-react-sdk), iOS (matrix-ios-sdk), Android (matrix-android-sdk2), Python (matrix-nio)</li>
<li>Developing our next-generation client SDKs (matrix-rust-sdk)</li>
<li>Developing our end-to-end encryption implementations (<a href="https://gitlab.matrix.org/matrix-org/olm">libolm</a> in C/C++ and <a href="https://github.com/matrix-org/vodozemac">vodozemac</a> in Rust)</li>
<li>Developing next-generation end-to-end encryption implementations (<a href="https://arewemlsyet.com">MLS</a>)</li>
<li>Developing and evolving additional core functionality in Matrix, including:
<ul>
<li>Account portability</li>
<li>Faster room joins over federation</li>
<li>Sliding Sync for instant client sync</li>
<li>Threads</li>
<li>Rich Text composer components</li>
<li>Spaces</li>
</ul>
</li>
<li>Developing <a href="https://github.com/matrix-org/matrix-hookshot">open source integrations</a> to other products (GitLab, GitHub, JIRA... )</li>
<li>Developing open source bridges to other platforms (IRC, XMPP, Slack, Discord, Telegram, bifrost…)</li>
<li>Developing <a href="https://arewep2pyet.com">peer-to-peer Matrix</a> implementations, avoiding the need for servers (and associated data/metadata accumulation) entirely</li>
<li>Developing <a href="https://github.com/matrix-org/lb">low-bandwidth Matrix</a> transports</li>
<li>Developing and hosting static Matrix room archives for the wider network (<a href="https://github.com/matrix-org/matrix-static">matrix-static</a> and <a href="https://github.com/matrix-org/matrix-public-archive">matrix-public-archive</a>)</li>
<li>Developing and hosting the <a href="https://matrix.to">matrix.to</a> link redirect service</li>
<li>Developing open source authentication mechanisms and integrations for Matrix (<a href="https://areweoidcyet.com">OIDC</a>)</li>
<li>Developing decentralised Video/VoIP conferencing servers on Matrix (<a href="https://matrix.org/blog/2022/12/25/the-matrix-holiday-update-2022/github.com/matrix-org/waterfall">waterfall</a>)</li>
<li>Developing decentralised Video/VoIP client components on Matrix (<a href="https://github.com/matrix-org/matrix-js-sdk/pull/2553">matrixRTC</a>)</li>
<li>Developing showcase &quot;beyond chat&quot; implementations of Matrix such as <a href="https://thirdroom.io">Third Room</a> </li>
<li>Developing moderation tooling and applying it to matrix.org (<a href="https://github.com/matrix-org/mjolnir">mjolnir</a> and much more)</li>
<li>Publishing moderation reputation lists for the benefit of the wider community</li>
<li>Developing integration test suites for Matrix compatibility testing (<a href="https://matrix.org/blog/2022/12/25/the-matrix-holiday-update-2022/github.com/matrix-org/sytest">sytest</a>, <a href="https://github.com/matrix-org/complement">complement</a>, <a href="https://github.com/matrix-org/trafficlight">trafficlight</a>)</li>
<li>Developing a reference push notification server (<a href="https://github.com/matrix-org/sygnal">sygnal</a>)</li>
<li>Developing a reference identity directory server (<a href="https://github.com/matrix-org/sydent">sydent</a>)</li>
<li>Procuring and publishing independent <a href="https://matrix.org/blog/2022/05/16/independent-public-audit-of-vodozemac-a-native-rust-reference-implementation-of-matrix-end-to-end-encryption">public audits</a> of Matrix's encryption and wider stack</li>
<li>Publishing the matrix.org website and blog</li>
<li>Publishing the weekly &quot;Matrix Live&quot; video podcast</li>
<li>Publishing the weekly &quot;This Week In Matrix&quot; news letter</li>
<li>Organising regular meetups (e.g. &quot;Open Tech Will Save Us&quot;)</li>
<li>Promoting Matrix at open source conferences</li>
<li>Running the matrix.org homeserver</li>
<li>Moderating the matrix.org project rooms</li>
<li>Running free public bridges to networks such as IRC networks and XMPP.</li>
</ul>
<p>This list is not remotely exhaustive (turns out there are over 240 projects in the matrix.org GitHub org!) but it serves to illustrate the sheer scale of work that the Foundation performs today.  Keeping the core team funded to work on Matrix as our day job is critical for Matrix’s long-term success, and so we <strong>really</strong> hope that organisations depending on Matrix (or passing philanthropists who appreciate Matrix’s value) will drop a line to <a href="mailto:funding@matrix.org">funding@matrix.org</a> and help keep the show on the road.</p>
<h3 id="turbocharging-matrix">Turbocharging Matrix</h3>
<p>Aside from the nightmares of funding open source software, 2022 has very much been a year of building - focusing on implementing a step change in Matrix’s performance and usability: ensuring that the protocol can punch its weight (and more!) against centralised proprietary alternatives. After all, Matrix clients need to be at least as good as the centralised alternatives in order to get widespread uptake.</p>
<p>This work has ended up taking many forms: on the server-side, Synapse sprouted Rust support to accelerate its hot paths, starting with <a href="https://github.com/matrix-org/synapse/pull/13838">push rule evaluation</a>. It’s super exciting to see Synapse performance heading into a new era, building on the foundations of what’s become a very mature and stable homeserver implementation.</p>
<p>Meanwhile work is in the final stages on “<a href="https://github.com/matrix-org/matrix-spec-proposals/blob/rav/proposal/faster_joins/proposals/3902-faster-remote-joins.md">Faster Joins</a>”, finally letting servers rapidly join rooms over federation by synchronising only the minimal subset of state needed to join, rather than proactively synchronising the room’s full current state.  Faster joins became <a href="https://matrix.org/blog/2022/10/18/testing-faster-remote-room-joins">available for testing</a> in Synapse in October, and since then the team has been <a href="https://github.com/matrix-org/synapse/milestone/10">working through</a> making it support workers and addressing the various edge cases and bugs that have shown up during testing.  Current join performance is a roughly 25x speedup on large rooms, although we’re confident that we can improve this even more, and we’re aiming to land it in time for FOSDEM at the beginning of Feb.</p>
<p>On the client-side, the work to transform Matrix client performance has centred around “<a href="https://github.com/matrix-org/matrix-spec-proposals/blob/kegan/sync-v3/proposals/3575-sync.md">Sliding Sync</a>” - our entirely new API for synchronising the minimal data to a client needed for it to render its UI, thus making login, launch and sync instant.  Sliding sync (originally called “sync v3”) has been a long time in the making; the API has gone through countless iterations as we worked away throughout 2022 implementing it in real-life clients, and adding all the extensions (<a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3884">MSC3884</a>, <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3885">MSC3885</a>) needed to get to parity with sync v2.  The wait has been well worth it, though: <a href="https://pr9256--matrix-react-sdk.netlify.app/">support</a> in Element Web is in the final stages of development - and moreover the next-generation Element X mobile clients will only speak Sliding Sync.</p>
<p>Element X itself is shaping up to be a showcase of just how snappy and performant Matrix can be: built on matrix-rust-sdk, it uses native Swift UI on iOS/macOS and Jetpack Compose on Android to couple together the best possible platform-native user experience with the ultimate underlying native-code SDK implementation, backed by sliding sync. The goal is to be at least as snappy as Telegram, iMessage or WhatsApp (we’ve taken to counting the frames in screen recordings to compare things like time-to-launch and time-to-load scrollback).  Element X is currently in late alpha on iOS, and the hope is to enter public beta in time for FOSDEM.  You can see a sneak peek here of the iPad-style layout (running under macOS) though!</p>
<p><img src="/blog/img/2022-12-25-elementx.png" alt="Element X" /></p>
<p>Finally, in terms of usability, there have been leaps and bounds forwards across Matrix - particularly with Element’s mobile UI being <a href="https://element.io/blog/an-unrecognisable-improvement-elements-new-design-is-here/">entirely refreshed</a> by the design team in September as a stepping stone to the forthcoming final Element X design.  Any remaining UX quirks should be flushed out with Element X, but the visuals are already a clear step forwards towards an excellent alternative to the centralised encumbents.</p>
<iframe src="https://www.youtube.com/embed/kjZCD14qMK0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<h3 id="encryption">Encryption</h3>
<p>We had great plans for E2EE in Matrix this year; starting off in a huge rush to get <a href="https://github.com/matrix-org/vodozemac">vodozemac</a> finished and <a href="https://matrix.org/blog/2022/05/16/independent-public-audit-of-vodozemac-a-native-rust-reference-implementation-of-matrix-end-to-end-encryption">audited</a> as our shiny new native-Rust implementation of Olm/Megolm. The plan was then to integrate vodozemac into matrix-rust-sdk’s crypto crate, and then replace the various old fragmented E2EE implementations across matrix-js-sdk, matrix-ios-sdk, matrix-android-sdk2 and matrix-rust-sdk itself with One True audited implementation - with audits booked with Least Authority to get further assurance around matrix-rust-sdk-crypto, matrix-rust-sdk itself and finally the full stack (Element X + Synapse).</p>
<p>Unfortunately, things went sideways when security researchers from Royal Holloway University London &amp; elsewhere got in touch to explain that they had found some <a href="https://nebuchadnezzar-megolm.github.io/">nasty implementation vulnerabilities</a> in the venerable matrix-js-sdk implementation.  So, we had no choice but to pause “Element R” - the project to converge matrix-{js,ios,android}-sdk on matrix-rust-sdk-crypto, and instead start analysing and addressing the issues across all current shipping Matrix clients in order to resolve them as rapidly as possible.  Ironically, it turned out in the end that only matrix-{js,ios,android}-sdk were affected - all other independent implementations, including matrix-rust-sdk, were okay.  As such, the Element R work would have protected us from these vulnerabilities had it been ready, and failing that it would have let us solve them in a single place.  Instead, Element R ended up getting pushed back for months while we worked through the various issues in triplicate across the legacy SDKs, while also checking all the other client implementations we could find, and dealing with additional issues which the RHUL researchers discovered as they dug deeper.  Eventually we finished the analysis and agreed a <a href="https://matrix.org/blog/2022/09/28/upgrade-now-to-address-encryption-vulns-in-matrix-sdks-and-clients">coordinated disclosure</a> at the end of September.
(EDIT: to be clear, we are very grateful to the security researchers for discovering and disclosing the vulns responsibly to us. The frustration here stems from the irony that if we'd finished the matrix-rust-sdk-crypto rewrite a few months earlier, we'd have mitigated the severe vulns - but instead, the rewrite got pushed back even further. It's obviously our fault though, not the researchers'.)</p>
<p>Since then, work has been split three ways: firstly, Element R work has resumed - and in fact Element R on iOS is pretty much usable as of today, other than needing some work to support E2EE push notifications (which will also be required for Element X). Element R on Android is very close too, and meanwhile Element R on Web decrypted its first event on Dec 19th! We’re hoping to get Element R in production on all platforms by Feb.</p>
<p>Secondly, we’ve been addressing other points raised by the RHUL researchers to ensure that malicious servers cannot add malicious devices or users to conversations, rather than warning as we do today.  This is not a trivial problem to solve, but we’re making progress via <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3917">MSC3917</a> (Cryptographically Constrained Room Membership) and <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3834">MSC3834</a> (Opportunistic user key pinning (TOFU)).  However, this work is effectively blocked on Element R landing first, as there’s no way we’re going to fix this in triplicate on the legacy SDKs.</p>
<p>Thirdly, we’ve been pushing ahead on implementing Decentralised MLS as a next-generation encryption protocol for Matrix to potentially replace Olm and Megolm.  This work was badly disrupted by RHUL mitigations, but we’re making good progress again - you can follow all the details over at <a href="https://arewemlsyet.com">https://arewemlsyet.com</a>.  Matrix over DMLS is currently in alpha, but the aim is to start beta testing Decentralised MLS in 2023.</p>
<p>Finally, we’ve been working hard on completely reworking the overall UX of how E2EE should work in Matrix clients - specifically, requiring users to cross-sign their devices in order to use E2EE, and so end up in a much higher trust world (alongside Trust On First Use). Can’t wait to finally simplify the E2EE UX!</p>
<h3 id="all-new-features">All new features</h3>
<p>It’s not all been performance and stability work this year - there have been some large areas of feature work happening too.</p>
<p>One of the most visible projects has been Threads, which <a href="https://element.io/blog/introducing-threads-in-beta/">launched in beta</a> in April, and subsequently has undergone huge amounts of polish to improve performance, notification semantics, unread behaviour and thread-aware read receipts.  The end result is feeling great now, and threads <a href="https://twitter.com/element_hq/status/1605861000296640512">exited beta</a> in Element Mobile on Dec 20th. Web narrowly missed the window due to a final ‘stuck notification’ bug which is still being tracked down, but will follow shortly afterwards and then threads will be finally out of beta!</p>
<p>Another big project in 2022 has been to create a general purpose Rich Text Editor to provide WYSIWYG (What You See Is What You Get) message composition for Matrix clients.  This has ended up being a very ambitious project to define all the core editing semantics in a shared rust library, with platform-specific bindings to link it into the editing UI available on Web, iOS &amp; Android.  The end result lives at <a href="https://github.com/matrix-org/matrix-rich-text-editor">https://github.com/matrix-org/matrix-rich-text-editor</a> - and you can play with it by enabling it in labs on Element Web/iOS/Android or experiment with the <a href="https://matrix-org.github.io/matrix-rich-text-editor">live demo</a>. The core behaviour is feeling excellent, although predictably some of the fine detail is very fiddly to get right. It’s almost there, though, and thanks to its built-in rust test harness generator(!) we are confident we’ll catch and control all the edge cases, and this should form an incredibly strong platform for all future rich text editing requirements in Matrix (and beyond!).  This work was very kindly sponsored by one of Element’s public sector customers in order to get Element to parity with Teams - thank you!</p>
<p>Location Sharing was another feature which landed in 2022 - powered by <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3488">MSC3488</a> and <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3489">MSC3489</a>, and implemented in matrix-{js,ios,android}-sdk in Element Web/iOS/Android, letting users share static and live locations and view them on an OpenStreetMap compatible map tileserver of their server’s choice. The Live Location Sharing is controversial in that it stores location data in the room history (and as such is hidden behind a labs flag on Element), but should eventually be replaced by <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3672">MSC3672</a> to share locations are custom ephemeral events instead (once custom EDUs land) in the spec.  Around the same time, Polls also went live thanks to <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3381">MSC3381</a> - it’s worth noting that both Location Sharing and Polls are excellent examples of “extensible events” in the wild: ensuring that clients which understand the custom event type will render them appropriately, but letting other clients fall back to showing them as simple timeline events.</p>
<h3 id="open-id-connect">Open ID Connect</h3>
<p>The transition to using Open ID Connect for Matrix authentication has been progressing steadily throughout 2022 - with Third Room being the first OIDC-native Matrix client, closely followed by Element X. <a href="https://github.com/matrix-org/matrix-authentication-service">matrix-authentication-service</a> now exists as a basic OIDC identity provider suitable for being linked into Synapse, and meanwhile Third Room demonstrates how you can integrate Keycloak as a third party IDP (complete with reCAPTCHA and guest access!).  The team also went on a very exciting detour to figure out how to perform login-and-E2EE-setup in a single operation by scanning a QR code (<a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3906">MSC3906</a>), and how it might integrate into OIDC in future.</p>
<p>Element X looks set to be the showcase for native OIDC in a typical Matrix client going forwards, so watch this space to see how it feels!</p>
<p>You can keep track of the inexorable transition to OIDC over at <a href="https://areweoidcyet.com">https://areweoidcyet.com</a>.</p>
<h3 id="voip">VoIP</h3>
<p>2022 was the year that Matrix finally got native multiparty VoIP.  After launching <a href="https://element.io/blog/introducing-native-matrix-voip-with-element-call/">Element Call Beta 1</a> in March followed by <a href="https://element.io/blog/element-call-beta-2-encryption-spatial-audio-walkie-talkie-mode-and-more/">Beta 2</a> in June, we’ve been busy embedding Element Call as a “matryoshka” widget into Element Web, using it to replace Jitsi in powering video rooms and video calls.  You can read all about this in detail in the <a href="https://matrix.org/blog/2022/08/15/the-matrix-summer-special-2022#native-voip-conferencing">summer blog post</a>.</p>
<p>Meanwhile, lots of progress is underway on <a href="https://github.com/matrix-org/waterfall">Waterfall</a> - the name we picked for the Pion-based decentralised Selective Forwarding Unit (i.e. conferencing focus) contributed by Sean DuBois earlier in the year, including adding simulcast support to support large scale conferences.</p>
<p>There’s only one catch, which is that Element Call is still in (very very late) beta, thanks to a handful of bugs which have been hard to track down, which has in turn kept all the other dependencies (embedded Element Call; video rooms etc) in beta too.  However, we think we’re pretty much there now - which is perfect timing given how Waterfall is coming together, meaning that both stable <em>and</em> scalable native Matrix conferences are on the horizon!</p>
<p>Even better, the plan is for Element X to rely entirely on embedding Element Call for VoIP - so we should be able to jump forwards pretty rapidly to having excellent native multiparty VoIP and video rooms on mobile as well as on Web.  So, once Element Call exits beta, everything should follow.  Just for a change, we’re aiming to get this done by the end of January - but there are a lot of unknown unknowns still flying around, so watch this space…</p>
<h3 id="ietf-mimi">IETF &amp; MIMI</h3>
<p>Another massive new initiative this year has been the process of proposing Matrix to the IETF as a candidate for use in interoperable instant messaging standardisation.  The <a href="https://datatracker.ietf.org/group/mimi/about/">MIMI (More Instant Messaging Interoperability) working group</a> emerged earlier in the year within IETF as an initiative to define how MLS could be used to interoperate between different instant messaging silos - as shortly to be required by the <a href="https://matrix.org/blog/2022/03/29/how-do-you-implement-interoperability-in-a-dma-world">Digital Markets Act</a>.</p>
<p>One of the things that MIMI aims to do is to define a common application layer protocol to exchange messages. At first <a href="https://datatracker.ietf.org/doc/draft-mahy-mimi-content/01/">CPIM was proposed</a> (an ancient message format that looks a lot like email) - and then an <a href="https://datatracker.ietf.org/doc/draft-rosenberg-mimi-msg-format/">entirely new JSON message format</a> proposal emerged which looks somewhat Matrix (but isn’t). At this point it became obvious that we should throw our hat into the ring and encourage MIMI to use Matrix rather than reinvent it, and so we set about proposing Matrix as at least the <a href="https://datatracker.ietf.org/doc/draft-ralston-mimi-matrix-message-format/">message format</a> and <a href="https://datatracker.ietf.org/doc/draft-ralston-mimi-matrix-transport/">message transport layer</a> of the stack. It’s quite surreal to see Matrix starting to fly around as IETF Drafts!</p>
<p>The next step here is to re-express the relevant bits of the current Matrix spec as self-contained IETF Drafts (rather than backreferencing the current spec from the drafts).  The idea is that the normal Matrix spec will continue to evolve much as it always has, but we’ll effectively donate a Long Term Supported dialect of it to IETF which can then evolve according to IETF process and be immortalise as RFCs for use in MIMI.  We’ll then backport those changes into spec.matrix.org in order to avoid fragmentation, while retaining the same ability we have to rapidly iterate and extend Matrix with MSCs.  This work is well under way (taking opportunity to use <a href="https://github.com/matrix-org/matrix-spec-proposals/blob/matthew/msc1767/proposals/1767-extensible-events.md">Extensible Events</a> from the outset!), and we should see explosions of further IETF Drafts emanating from Travis as 2023 progresses.</p>
<h3 id="trust-safety">Trust &amp; Safety</h3>
<p>2022 saw a real uptick in spam and abuse across Matrix, and there have been some valiant attempts to improve our moderation tooling over the course of the year.  Unfortunately it hasn’t come together as rapidly as we might have hoped, however, and we’ve seen several large communities give up on Matrix and move back to Discord thanks in part to needing better anti-abuse mechanisms.</p>
<p>In 2023 we’re resetting our trust &amp; safety work, with Mjolnir dev returning to its original development team, and we’ll be working as tactically as possible to ensure that all communities on Matrix can easily block abuse using whatever mechanisms they need.</p>
<h3 id="p2p-dendrite">P2P &amp; Dendrite</h3>
<p>Meanwhile, Dendrite (our second generation homeserver implementation) development has continued at pace throughout the year. According to sytest we are now at 93% client-server API compliance with 577 out of 620 tests passing, and the server-server API compliance is at 97% with 111 out of 114 tests passing! None of the missing tests are showstoppers, so it’s fair to say that Dendrite is very nearly ready for primetime.</p>
<p>The interesting plot twist is that Dendrite development has ended up increasingly focusing on embedded matrix server use cases - particularly to power Peer-to-Peer Matrix, where clients require a server to be embedded within them.  So while Synapse has ended up increasingly focusing on large-scale deployments, Dendrite has ended up pursuing smaller instances (which is ironic, given originally it was meant to be the other way round!).</p>
<p>P2P Matrix work has been progressing well too - you can follow the blow-by-blow updates over at <a href="https://arewep2pyet.com">https://arewep2pyet.com</a>. After a lot of back and forth evaluating hard-state routing versus soft-state routing in Pinecone, we’ve ended up converging on soft-state routing (which is chattier, but easier to reason about in terms of mitigating attacks). However, the chattiness means that it doesn’t scale as well as one might hope - so we’re now working on a “tiered” approach where separate Pinecone networks can be tiered together into one inter-network, giving us scalability at the expense of being slightly less decentralised. It’s fair to say that the journey here has been pretty frustrating in its twists and turns, and sadly Neil Alexander chose to move on a few months ago. However, Devon has stepped up to fill his shoes as primary Pinecone and P2P wrangler, and is making amazing progress on the remaining work - firstly implementing <a href="https://github.com/matrix-org/dendrite/pull/2917">Store and Forward relaying</a> in Dendrite so that today’s Pinecone networks can exchange messages even if the recipient node is offline.  Next up will be bridging P2P Matrix with today’s Matrix network - and then working on tiering to provide the scalability we need.  The expectation is that today’s serverside Dendrite instances will effectively turn into static pinecone peers, store and forwarding messages on behalf of P2P nodes, and providing tiering between respective pinecone subnets.</p>
<h3 id="hydrogen-chatterbox">Hydrogen &amp; Chatterbox</h3>
<p>Development on Hydrogen as a super-lightweight progressive-web-app Matrix client has also been progressing throughout the year (with a few detours to help out with end-to-end testing via <a href="https://github.com/matrix-org/trafficlight">trafficlight</a> both for the benefit of Hydrogen and other clients).</p>
<p>The biggest change has been Hydrogen sprouting a separate SDK layer, letting the engine be embedded into other webapps in order to add noninvasive Matrix messaging with as minimal a footprint as possible.  This was showcased in Element’s <a href="https://element.io/blog/element-launches-chatterbox/">chatterbox</a> offering in July - providing an open source chatbox which can be trivially embedded into existing sites, and also powers the <a href="https://github.com/Automattic/chatrix">Chatrix</a> wordpress plugin that Automattic is working on.</p>
<p>Hydrogen also added independent support for <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3401">MSC3401</a> multiparty voice/video calling (albeit on a <a href="https://github.com/vector-im/hydrogen-web/pull/705">branch</a>), letting us showcase heterogeneous Element Call &lt;-&gt; Hydrogen group calling and prove MSC3401 as fit for purpose as a true open interoperable call signalling - and in turn Hydrogen SDK, complete with the multiparty voice/video calling, powers the Matrix engine within Third Room - our metaverse-on-Matrix platform.</p>
<p>We’re looking forwards to Hydrogen continuing to reach full feature parity with Element over the next year, and popping up in increasingly unexpected places as everyone’s favourite embedded Matrix client!</p>
<h3 id="third-room">Third Room</h3>
<p>Finally, it’s hard to believe that <a href="https://thirdroom.io">Third Room</a>, our Matrix-based open platform for decentralised realtime spatial collaboration, barely existed at the beginning of the year.  Third Room serves to demonstrate that Matrix is <em>way</em> more than just chat and VoIP, but can power the spatial communication layer of the open web. This has ended up driving forwards a tonne of new capabilities for Matrix - showcasing native OIDC auth; scalable multiparty VoIP in Hydrogen SDK, efficient binary-diffed file storage, and more recently has been defining how to store extensible behaviour for Matrix rooms as WASM objects stored in the Matrix room itself.</p>
<p>Third Room itself is a Hydrogen-based Matrix client, which lets you view Matrix rooms as interactive multiparty 3D environments (using <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3815">MSC3815</a>) - with the world defined as glTF blobs stored in the Matrix room, and the ability to script and customise any aspect of that world using WASM blobs stored in Matrix rooms, which execute on the participating clients, exposing a new scenegraph API called WebSceneGraph in order to manipulate the glTF that makes up the world.  We also expect to see a variant of Matrix’s normal widget API to be exposed to these WASM blobs, introducing the concept of sandboxed clientside widgets, bots or other integrations - letting users customise and extend Matrix without ever having to run serverside bots again.</p>
<p>The intention is to provide a platform which can be used to build <em>any</em> kind of interactive realtime spatial multiparty app in an open standardised, decentralised, end-to-end encrypted way - whether that’s for gaming, social, or professional activity such as building “digital twins” for manufacturing, agriculture, smart cities, search &amp; rescue, etc.  You can read more about the vision at <a href="https://thirdroom.io/preview">thirdroom.io/preview</a>, or via press coverage at <a href="https://thenewstack.io/third-room-teases-user-generated-content-for-the-metaverse/">TheNewStack</a> or <a href="https://www.golem.de/news/third-room-das-open-source-metaverse-von-matrix-2212-170638.html">Golem</a>.  We were also incredibly flattered to be invited to present Third Room at <a href="https://sa2022.siggraph.org/en/presentation/?id=realcur_102&amp;sess=sess143">SIGGRAPH Asia</a> a few weeks ago.  The official recording has yet to emerge, but you can find a <a href="https://twitter.com/o_ob/status/1601442998696677376">cheeky bootleg here</a>.</p>
<p>We launched <a href="https://matrix.org/blog/2022/09/27/announcing-third-room-tech-preview-1">Tech Preview 1 of Third Room</a> at the end of September, and since then all of the work has been around building out WebSceneGraph and the WASM scripting environment - letting users build their own functionality in JS via QuickJS or C (and in future Rust or Zig too).  We’ve also been working on making the networking (via Matrix WebRTC-negotiated data channels) more robust, switching to an ‘authoritative’ simulation model rather than having each client run its own physics simulation, in order to kick the hard problem of decentralised physics simulations down the road a bit further. We’re also adding in a much-needed ‘discover’ page to help users find new rooms and explore everything that’s possible in the platform.  And finally, we’re adding WebXR support so that folks can use ThirdRoom with VR and AR hardware if they so desire. All this should culminate in Tech Preview 2, due in the coming weeks.</p>
<p>If you want a quick sneak preview of the scripting capabilities on the horizon with a <a href="https://matrix.thirdroom.io/_matrix/media/r0/download/thirdroom.io/qFfvHcXNQkjeDjTpdMfPCniY">very basic script</a> stored in the media repository, head over to <a href="https://thirdroom.io/world/#surprise:thirdroom.dev">https://thirdroom.io/world/#surprise:thirdroom.dev</a> and click on the television ;)</p>
<h3 id="conclusion">Conclusion</h3>
<p>So there you have it: it’s been a mixed year for Matrix, but at least the project itself is moving forwards faster than ever, for now. If you look back at the predictions from <a href="https://matrix.org/blog/2021/12/22/the-mega-matrix-holiday-special-2021#2022">last year’s holiday blog post</a> you’ll see that most of them even came true. This year, we’ll keep the predictions simple: our plans for 2023 are to ensure that the Foundation is well funded, ship all of the step-change improvements in performance and usability which are currently in beta as rapidly as possible - and demonstrate for once and for all that Matrix can indeed punch its weight against the proprietary centralised alternatives.</p>
<p>If you can afford it, please consider donating to the Matrix.org Foundation to support our work. The most efficient way to support us is to <a href="https://donorbox.org/keep-matrix-exciting">donate via donorbox</a>. Our Patreon is not going anywhere, so if you wish to keep supporting it there we're happy to count you in our supporters.</p>
<p><a href="https://donorbox.org/keep-matrix-exciting"><img src="/images/donorbox.png" alt="" /></a></p>
<p>Thanks for flying Matrix;</p>
<p>Matthew, Amandine &amp; the whole core team.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;12&#x2F;01&#x2F;funding-matrix-via-the-matrix-org-foundation&#x2F;" title="Funding Matrix via the Matrix.org Foundation">Funding Matrix via the Matrix.org Foundation</a></h2>
                <span>
                    01.12.2022 00:00
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p><em>TL;DR: you can now officially join the Matrix Foundation as an organisational
or individual member in order to sustainably support core Matrix development,
help steer the direction of the protocol and how best to fund it! Organisations
can join by filling <a href="https://forms.gle/Yy345QkB5pifJJNy6">this form</a> and we will get back in touch, or individuals can
now donate directly <a href="https://donorbox.org/keep-matrix-exciting">here</a> (as a more efficient alternative to Patreon, which
remains online for Patrons used to it).</em></p>
<p>Hi all,</p>
<p>Only two days late for Giving Tuesday (and 4 years late on the Foundation
scale), we are super excited to announce that we are finally expanding the
Matrix Foundation into a fully-fledged non-profit fund-raising organisation to
help support the core Matrix development and the wider open source Matrix
ecosystem!</p>
<p>Has your organisation been using Matrix to communicate via the open source
server and clients and you want to ensure that improvements and features still
keep coming? Become a member, and feed into the roadmap.</p>
<p>Has your company been building on top of Matrix, making the most of its openness
and flexibility, but you’ve never figured out how to contribute back in order
to ensure the resilience of the tech which you rely on for the success of your
business? Become a member, and ensure the core development is funded and that
Matrix is here to thrive.</p>
<p>Are you about to be designated a gatekeeper by the EU, and have to rapidly figure out how to implement <a href="https://matrix.org/blog/2022/03/29/how-do-you-implement-interoperability-in-a-dma-world">DMA-compliant interoperability</a> (complete with end-to-end encryption compatibility) into your services? Become a member, and discover how Matrix can solve all your problems, while providing your input too. </p>
<p>Are you looking to implement DMA interoperability but don't fall into the gatekeeper designation? Become a member, and help ensure Matrix fits your needs too!</p>
<p>Are you a non-profit organisation with a mission to provide secure and sovereign communications to those who need it the most, providing an alternative to the current players? Become a member, and help us take our mission forward.</p>
<p>Are you an individual who strongly supports the mission of Matrix and wants to see it thrive and become the open backbone of the world’s communications? Become a member, and support the future of Matrix. </p>
<p>In short, this finally gives the wider world a way to contribute concretely to the significant costs of funding folks to work fulltime on core Matrix development - which now covers over 243(!) projects in <a href="https://github.com/matrix-org">github.com/matrix-org</a>. Core Matrix work ranges from: </p>
<ul>
<li>managing the Matrix spec itself </li>
<li>maintaining the reference client SDKs and encryption and getting them independently audited</li>
<li>maintaining example server implementations in the form of Synapse and Dendrite</li>
<li>writing the test suite</li>
<li>publishing the matrix.org website</li>
<li>promoting awareness of Matrix</li>
<li>running the matrix.org homeserver</li>
<li>and so much more... </li>
</ul>
<p>In exchange for supporting the Foundation, and beyond providing certainty that our work can continue, organisations and individuals who contribute financially will be able to directly provide input to the trajectory of the core Matrix developments by becoming official members of the Matrix.org Foundation.</p>
<h2 id="introducing-foundation-memberships-and-the-governing-board">Introducing Foundation Memberships and the Governing Board</h2>
<p>Practically speaking, this means that we are going to create a &quot;Governing Board&quot; to the Matrix.org Foundation: a new team, made up of members voted by the overall membership, a subset of the Guardians and a subset of the Spec Core Team. The Governing Board will have the responsibility of determining how Foundation funds are distributed and used, how the Spec Core Team roadmap is prioritised, how to best grow Matrix awareness, etc.</p>
<p>In other words, we are literally expanding the day-to-day steering of the direction of the Matrix Foundation to the wider community. In order to run the Governing Board and the overall work of the Foundation, <strong>we are also hiring an Executive Director</strong>, so please get in touch via <a href="mailto:funding@matrix.org">funding@matrix.org</a> if you’re a non-profit foundation-running expert! In the interim, while this search proceeds, Matthew and Amandine will fill the role with the support of the other Guardians of Matrix. The Guardians themselves retain their existing function as the Foundation's non-executive board - responsible for safeguarding the overall mission of Matrix, appointing the membership of the Spec Core Team, approving membership applications, and defining the overall changes we’re outlining here.</p>
<p>Membership comes at various levels, each with different rewards:</p>
<ul>
<li>Individual memberships (i.e. today’s Patreon supporters):
<ul>
<li>Ability to vote in the appointment of up to 2 ‘community representatives’ to the Foundation's governing board.</li>
<li>Name on the Matrix.org website</li>
</ul>
</li>
<li>Silver member: between £2,000 and £80,000 per year, depending on organisation size
<ul>
<li>Ability to vote on the appointment of up to 2 ‘Silver representative’ to the Foundation's governing board</li>
<li>Supporter logo on the front page of the new Matrix.org website</li>
</ul>
</li>
<li>Gold member: £200,000 / year, adds:
<ul>
<li>Ability to vote on the appointment of up to 3 ‘Gold representatives’ to the Foundation's governing board.</li>
<li>Press release announcing the sponsorship</li>
<li>1 original post on the Matrix.org blog per year</li>
<li>Participation in the internal Spec Core Team room</li>
<li>Larger logo on the front page of Matrix.org</li>
</ul>
</li>
<li>Platinum member: £500,000 / year, adds:
<ul>
<li>Ability to vote on the appointment of up to 5 ‘platinum representatives’ to the Foundation's governing board.</li>
<li>1 sponsored Matrix Live episode per year</li>
<li>Largest logo on the front page of Matrix.org</li>
</ul>
</li>
</ul>
<p>As the activities of the Foundation increase, we expect to add more benefits to this list, for example discounts on sponsoring a future Matrix Conference, or similar.</p>
<p>Governing Board elections will occur yearly, with the first election planned towards the end of this year once we’ve gathered together the first wave of members and candidates have proposed themselves for election.</p>
<p>For anyone building on Matrix, memberships are a no-brainer as they will ensure the perpetuity and future-proof-ness of the standard. But for anyone supporting the mission of Matrix, this membership can be key to define its future. </p>
<p>Meanwhile, with Matrix looking increasingly integral to implementing interoperable communication for compliance with the EU’s Digital Markets Act (whether that’s as pure Matrix, or as part of the IETF <a href="https://datatracker.ietf.org/doc/draft-ralston-mimi-matrix-transport/">MIMI</a> initiative), this is an incredible opportunity for the organisations impacted by DMA to get a front-row seat within the Foundation to ensure that Matrix thrives and solves the challenges posed by the act. To get involved, please apply via the <a href="https://forms.gle/Yy345QkB5pifJJNy6">membership application form</a>.</p>
<h2 id="so-why-is-this-all-happening">So, why is this all happening?</h2>
<p>Since 2017, core Matrix development has been funded primarily by Element - the company founded by the team who created Matrix. Over the years, Element has put tens of millions of dollars into Matrix - which in turn has come from both selling Matrix hosting (EMS), on-premise Matrix solutions, and VC investment in Element. To put it in perspective, even though there are over 5000 contributors to <a href="https://github.com/matrix-org">github.com/matrix-org</a> - over 90% of the actual committed lines of code come from Element employees. Similarly, while we are <em>enormously</em> thankful for the past and existing generous donations from the wider Matrix community, today they only come to $6,000 a month, relative to the $400,000 a month that Element has been funding.</p>
<p>Over the last year, we’ve seen a palpable shift within the Matrix ecosystem. Matrix is growing faster than ever. Synapse has improved immeasurably, using less RAM than ever and even sprouting Rust to optimise its hot paths. Element has improved immeasurably too, with an entirely new design on mobile, and tons of new features including threads, voice messages, location share, video rooms and more. Monthly active users reported via Synapse’s phone-home stats have almost doubled and are growing at their fastest ever rate. The number of servers has increased equivalently. We hear about major new commercial Matrix deployments almost every day. However, while usage is going through the roof - we haven’t seen a matching increase in players looking to support the project.</p>
<p>In fact, we’ve seen the opposite: commercial vendors forking the protocol while trying to break up the core team. Matrix tenders lost to “preferred” vendors who know absolutely nothing about Matrix. Vendors selling Matrix hosting or services without contributing anything back to the project at all. Organisations with huge amounts of money (governments, $$B massive enterprises) have enthusiastically launched proprietary Matrix solutions by building on the liberally-licensed Apache reference Matrix implementations… while contributing back nothing. Now, we are enormously grateful for the commercial Matrix deployments who <em>do</em> actually work with Element to fund core development or contribute code themselves - but this is very clearly the minority. Obviously it’s great to see folks building on Matrix - but it’s rather galling if it ends up with insufficient funding trickling down to the core Matrix team to be able to build the foundational technology that everyone else is relying on.</p>
<p>Element in particular has staffed up in order to both support the core Matrix ecosystem (the spec, Synapse, Dendrite, Client SDKs, Encryption implementations etc) as well as Element-specific work (the Element apps, EMS, the Element Enterprise Installer, etc). As a result, Element employs roughly twice as many developers as you might expect, and while Matrix is here to stay, this turns out not to be sustainable for Element unless the wider ecosystem helps support the foundational work</p>
<p>We believe the world needs secure decentralised communication more than ever, and ensuring the Foundation can distribute funding to those contributing to the core platform (be that Element or individuals or other organisations) is key to that. So: please consider this a call to arms - if you believe the world needs Matrix, and particularly if you depend on it for your business, please join the Foundation and participate!</p>
<p>Fill in <a href="https://forms.gle/Yy345QkB5pifJJNy6">the form</a> to apply for membership, or if you are not acting on behalf of an organisation, you can go straight to our <a href="https://donorbox.org/keep-matrix-exciting">donation page</a>.</p>
<p>Matthew, Amandine &amp; the whole Matrix.org Foundation</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;09&#x2F;28&#x2F;upgrade-now-to-address-encryption-vulns-in-matrix-sdks-and-clients&#x2F;" title="Upgrade now to address E2EE vulnerabilities in matrix-js-sdk, matrix-ios-sdk and matrix-android-sdk2">Upgrade now to address E2EE vulnerabilities in matrix-js-sdk, matrix-ios-sdk and matrix-android-sdk2</a></h2>
                <span>
                    28.09.2022 17:41
                    —
                    <a href="/category/security">
                        Security
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p><strong>TL;DR:</strong></p>
<ul>
<li>Two critical severity vulnerabilities in end-to-end encryption were found in
the SDKs which power Element, Beeper, Cinny, SchildiChat, Circuli, Synod.im
and any other clients based on matrix-js-sdk, matrix-ios-sdk or
matrix-android-sdk2.</li>
<li>These have now been fixed, and we have not seen evidence of them being
exploited in the wild. All of the critical vulnerabilities require
cooperation from a malicious homeserver to be exploited.</li>
<li><strong>Please upgrade immediately in order to be protected against these
vulnerabilities.</strong></li>
<li>Clients with other encryption implementations (including Hydrogen, ElementX,
Nheko, FluffyChat, Syphon, Timmy, Gomuks and Pantalaimon) are not affected;
<strong>this is not a protocol bug</strong>.</li>
<li>We take the security of our end-to-end encryption extremely seriously, and we
have an ongoing series of public independent audits booked to help guard
against future vulnerabilities.  We will also be making some protocol changes
in the future to provide additional layers of protection.</li>
<li>This resolves the <a href="https://matrix.org/blog/2022/09/23/pre-disclosure-upcoming-critical-security-release-of-matrix-sd-ks-and-clients">pre-disclosure</a> issued on September 23rd.</li>
</ul>

                <p><a href="/blog/2022/09/28/upgrade-now-to-address-encryption-vulns-in-matrix-sdks-and-clients/#continue-reading">Continue reading…</a></p>
                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;09&#x2F;27&#x2F;announcing-third-room-tech-preview-1&#x2F;" title="Announcing Third Room Tech Preview 1">Announcing Third Room Tech Preview 1</a></h2>
                <span>
                    27.09.2022 17:53
                    —
                    <a href="/category/releases">
                        Releases
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>We're excited to announce the first tech preview of <a href="https://thirdroom.io/">Third Room</a>, an open, standards-based, decentralised vision of the metaverse for the open Web, built entirely on Matrix… without cryptocurrencies, NFTs or walled gardens.</p>
<p>To see what it's all about, head over to <a href="https://thirdroom.io/preview">https://thirdroom.io/preview</a> - or come chat in <a href="https://matrix.to/#/#thirdroom-dev:matrix.org">#thirdroom-dev:matrix.org</a> to learn more!</p>
<iframe src="https://www.youtube.com/embed/skC5TYRAgKE" loading="lazy" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;08&#x2F;15&#x2F;the-matrix-summer-special-2022&#x2F;" title="The Matrix Summer Special 2022">The Matrix Summer Special 2022</a></h2>
                <span>
                    15.08.2022 00:00
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>At the end of each year it’s been traditional to do a big review of everything that the Matrix core team got up to that year, and announcing our predictions for the next.  You can see the last edition in <a href="https://matrix.org/blog/2021/12/22/the-mega-matrix-holiday-special-2021">2021 here</a> - and if you’re feeling nostalgic you can head down memory lane with the <a href="https://matrix.org/blog/2020/12/25/the-matrix-holiday-special-2020">2020</a>, <a href="https://matrix.org/blog/2019/12/24/the-2019-matrix-holiday-update">2019</a>, <a href="https://matrix.org/blog/2018/12/25/the-2018-matrix-holiday-special">2018</a> ones etc too.</p>
<p>This year is turning out to be slightly different, however.  Our plans for 2022 are particularly ambitious: to force a step change in improving Matrix’s performance and usability so that we firmly transition from our historical “make it work” and “make it work right” phases into “<strong>making it fast</strong>”.  Specifically: to succeed, Matrix <strong>has</strong> to succeed in powering apps which punch their weight in terms of performance and usability against the proprietary centralised alternatives of WhatsApp, Discord, Slack and friends.</p>
<p>We’ve seen an absolute tonne of work happening on this so far this year… and somehow the end results all seem to be taking concrete shape at roughly the same time, despite summer traditionally being the quietest point of the year.  The progress is super exciting and we don’t want to wait until things are ready to enthuse about them, and so we thought it’d be fun to do a spontaneous Summer Special gala blog post so that everyone can follow along and see how things are going!</p>
<h2 id="making-it-fast">Making it fast</h2>
<p>We have always focused on first making Matrix “work right” before we make it “work fast” - sometimes to a fault.  After all: the longer you build on a given architecture the harder it becomes to swap it out down the line, and the core architecture of Matrix has remained essentially the same since we began in 2014 - frankly it’s amazing that the initial design has lasted for as long as it has.</p>
<p>Over the years we’ve done a lot of optimisation work on the core team implementations of that original architecture - whether that’s Synapse or matrix-{js,react,ios,android}-sdk and friends: for instance Synapse uses 5-10x less RAM than it used to (my personal federated server is only using 145MB of RAM atm! 🤯) and it continues to speed up in pretty much every new release (<a href="https://github.com/matrix-org/synapse/pull/13522">this PR</a> looks to give a 1000x speedup on calculating push notification actions, for instance!).  However, there are some places where Matrix’s architecture itself ends up being an embarrassingly slow bottleneck: most notably when rapidly syncing data to clients, and when joining rooms for the first time over federation.  We’re addressing these as follows…</p>
<h3 id="sliding-sync-aka-sync-v3">Sliding Sync (aka Sync v3)</h3>
<p>Historically, /sync always assumed that the client would typically want to know about all the conversations its user is in - much as an IRC client or XMPP client is aware of all your current conversations.  This provided some nice properties - such as automatically enabling perfect offline support, simplifying client and server development, and making features like “jump to room” and “tab complete” work instantly given the data is all client-side.  In the early days of Matrix, when nobody was yet a power user, this wasn’t really a problem - but as users join more conversations and join bigger rooms, it’s become one of Matrix’s biggest performance bottlenecks.  In practice, logging into a large account (~4000 rooms) can take ~10 minutes and hundreds of megabytes of network traffic, which is clearly ridiculous. Worse: if you go offline for a day or so, the incremental sync to catch back up can take minutes to calculate (and can even end up being worse than an initial sync).</p>
<p>To fix this, we started work on Sliding Sync (<a href="https://github.com/matrix-org/matrix-spec-proposals/blob/kegan/sync-v3/proposals/3575-sync.md">MSC3575</a>) in 2021: a complete reimagining of the /sync API used by Matrix clients to receive data from their homeserver.  In Sliding Sync, we only send the client the data it needs to render its UI.  Most importantly, we only tell it about the subset of rooms which it is visible in the scroll window of its room list (or that it needs to display notifications about).  As the user scrolls around the room list, they slide the window up and down - hence the name “sliding sync”.  Sliding Sync was originally called Sync v3, given it’s our 3rd iteration of the sync API - it got renamed Sliding Sync given the current sync API confusingly ended up with a prefix of /v3.</p>
<p><a href="https://matrix.org/blog/2021/12/22/the-mega-matrix-holiday-special-2021#sync-v3">Back in December</a> our work on Sliding Sync was still pretty early: we had the initial MSC, an experimental proxy that converted the existing sync v2 API into Sliding Sync, and a simple proof-of-concept web client to exercise it.  Since then, however, there has been spectacular progress:</p>
<ul>
<li>MSC3575 has undergone some <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575/commits/bea7323c0b03dbd46600ce8fe01218d55f0de083">big</a> <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3575/commits/a0bf4027bcef278e43a570c6fa94f2b1bef3488b">iterations</a> as we converge on the optimal API shape.</li>
<li>The <a href="https://github.com/matrix-org/sliding-sync">sliding-sync</a> proxy has matured to be something which we’re now running in stealth against matrix.org for those dogfooding the API</li>
<li>We added the concept of extensions to split out how to sync particular classes of data (to avoid the API becoming a monolithic monster) - specifically:
<ul>
<li>Account Data</li>
<li>End-to-end Encryption</li>
<li>To-device messages</li>
<li>Ephemeral events (to be done)</li>
<li>Presence (to be done)</li>
</ul>
</li>
<li>We added support for spaces!</li>
<li>We implemented it in <a href="https://github.com/matrix-org/matrix-js-sdk/pull/2242">matrix-js-sdk</a> (which merged a few weeks ago!)</li>
<li>…and have a WIP implementation in <a href="https://github.com/matrix-org/matrix-rust-sdk/pull/728">matrix-rust-sdk</a> too.</li>
</ul>
<p>But most importantly, we’ve also been busy implementing Sliding Sync in Element Web itself so we can start using it for real.  Now, this is still a work in progress, but as of today it’s <em>just</em> getting to the point where one can experiment with it as a daily driver (although it’s definitely alpha and we’re still squishing bugs like crazy!) - and we can see just how well it really performs in real life.</p>
<p>For instance, here’s a video of my account (4055 rooms, redacted for privacy) logging in on an entirely fresh browser via Sliding Sync - the actual sync takes roughly 1 second (at 00:18 in the video).  And if we’d started the sync operation while the user is setting up E2E encryption, it would have completed in the background before they even got to the main screen, giving instant login(!).  Given my account typically takes ~10 minutes to initial sync (plus even more time for encryption to sync up), this is at least a real-life <strong>600x improvement</strong>.  Moreover, the sync response is only 20KB (a ~5000x improvement) - a huge win for low-bandwidth Matrix situations.</p>
<iframe src="https://www.youtube.com/embed/9dbM66tGK5s" title="Sliding Sync Demo" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>Then, having logged in, the client subsequently launches pretty much instantly, <em>no matter how long you’ve been offline</em>. Total launch time is roughly 4 seconds, most of which is loading the app’s assets - which in turn could well be improved by progressively loading the app.  It could also be sped up even more if we cached state locally - currently the implementation simply reloads from the server every time the app launches rather than maintaining a local cache.</p>
<p>As you can see, this is palpably coming together, but there’s still a bunch of work to be done before we can encourage folks to try it, including:</p>
<ul>
<li>Switching the RoomList to be fully backed by sliding sync (currently the v2 roomlist is jury-rigged up to the sliding sync API, causing some flakey bugs such as duplicate rooms)</li>
<li>Spec and hook up typing / receipts / presence extensions</li>
<li>Hook up favourites, low_priority, knocked and historical rooms</li>
<li>Adding back in loading room members</li>
<li>Apply quality-of-service to to-device messages so we prioritise ones relevant to the current sliding window</li>
<li>Sync encrypted rooms in the background to search for notifications (and for indexing).</li>
<li>More local caching to speed up operations which now require checking the server (e.g. Ctrl/Cmd-K room switching)</li>
</ul>
<p>We also need to determine whether it’s viable to run the sliding-sync proxy against matrix.org for general production use, or whether we’ll need native support in Synapse before we can turn it on by default for everyone.  But these are good problems to have!!</p>
<h3 id="matrix-rust-sdk-and-element-x">matrix-rust-sdk and Element X</h3>
<p>Meanwhile, over in the land of Rust, we’ve been making huge progress in maturing and stabilising matrix-rust-sdk and exercising it in Element X: the codename for the next generation of native Element mobile apps.  Most excitingly, we literally just got the first (very alpha) cut of Sliding Sync working in matrix-rust-sdk and hooked up to Element X on iOS - you can see Ștefan’s demo from last week here:</p>
<iframe src="https://www.youtube.com/embed/6KHQSeJTXm0?start=459" title="Matrix Live S08E04 — Element Demos" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>matrix-rust-sdk itself is now getting a <a href="https://github.com/matrix-org/matrix-rust-sdk/releases">steady stream of releases</a> - including long-awaited official node bindings, providing excellent and performant encryption support via the <a href="https://matrix.org/blog/2022/05/16/independent-public-audit-of-vodozemac-a-native-rust-reference-implementation-of-matrix-end-to-end-encryption/">newly audited</a> vodozemac Rust implementation of Olm. It’s also great to see loads of major contributions to matrix-rust-sdk from across the wider Matrix community - particularly from Ruma, Fractal, Famedly and others - thank you!! As a result the SDK is shaping up to be much more healthy and heterogeneous than the original matrix-{js,ios,android}-sdk projects.</p>
<p>On Element X itself: matrix-rust-sdk is being used first on iOS in <a href="https://github.com/vector-im/element-x-ios">Element X iOS</a> - aiming first for launching a stable “barbecue” feature set (i.e. personal messaging) asap, followed by adding on “banquet” features (i.e. team collaboration) such as spaces and threads afterwards. We’ve shamelessly misappropriated the barbecue &amp; banquet terminology from Tobias Bernard’s excellent blog post “<a href="https://blogs.gnome.org/tbernard/2018/05/16/banquets-and-barbecues/">Banquets and Barbecues</a>” - although, ironically, unlike the post, our plan is still to have a single app which incrementally discloses the banquet functionality as the user’s barbecue starts to sprawl.  We’ve just published the brand new <a href="https://github.com/matrix-org/matrix-rust-sdk/projects/1">development roadmap</a> for Element X from the rust-sdk perspective on GitHub.  Above all else, the goal of Element X is to be the fastest mobile messenger out there in terms of launch and sync time, thanks to Sliding Sync.  Not just for Matrix - but the fastest messenger, full stop :D  Watch this space to see how we do!</p>
<p>Finally: Element is getting a major redesign of the core UI on both iOS and Android - both for today’s Element and Element X.  I’m not going to spoil the final result (which is looking <em>amazing</em>) given it’ll have a proper glossy launch in a few weeks, but you can get a rough idea based on the earlier design previewed by Amsha back in June:</p>
<iframe src="https://www.youtube.com/embed/oxfqQ0TrTXU?start=34" title="Matrix Live S07E22 — Element UI experiments, and customising Element Web with greasemonkey" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>In addition to the upcoming overall redesign, Element also landed a complete rework of the login and registration flows last week on iOS and Android - you can see all about it over on the <a href="https://element.io/blog/all-aboard-better-ftue-for-less-wtf/">Element blog</a>.</p>
<h3 id="fast-remote-joins">Fast Remote Joins</h3>
<p>In terms of performance, the other area that we’re reworking at the protocol level is room joins. </p>
<p>One of the most glaring shortcomings of Matrix happens when a new server admin excitedly decides to join the network, installs a homeserver, tries to join a large room like #matrix:matrix.org, and then looks on in horror as it takes 10+ minutes to join the room, promptly despairs of Matrix being slow and complains bitterly about it all over HN and Reddit :)</p>
<p>The reason for the current behaviour is that the Matrix rooms are replicated between the servers who participate in them - and in the initial design of the protocol we made that replication atomic. In other words, a new server joining a room picks a server from which to acquire the room (typically the one in the room’s alias), and gets sent a copy of all the state events (i.e. structural data) about the room, as well as the last 20 or so messages.  For a big room like Matrix HQ, this can be massive - right now, there are 79,969 state events in the room - and 126,510 auth_chain events (i.e. the events used to justify the existence of the state events).  The reason there are so many is typically that the act of a user joining or parting the room is described by a state event - and in the naive implementation, the server needs to know all current state events in the room (e.g. including parted users), in order to keep in sync with the other servers in the room and faithfully authorise each new event which they receive for that room.</p>
<p>However, each event is typically around 500 bytes in size, and so the act of joining a big room could require generating, transmitting, receiving, authenticating and storing up to 100MB of JSON 😱. This is why joining big rooms for the first time is so painfully slow.</p>
<p>Happily, there is an answer: much as Sliding Sync lets clients synchronise with the bare minimum of data required to render their UI, we’ve created <a href="https://github.com/matrix-org/matrix-spec-proposals/blob/rav/proposal/partial_state_on_join/proposals/3706-partial-state-in-send-join.md">MSC3706</a> (and its precursor <a href="https://github.com/matrix-org/matrix-spec-proposals/blob/matthew/msc2775/proposals/2775-lazy-loading-over-federation.md">MSC2775</a>) in order to rework the protocol to let servers receive the bare minimum of state needed to join a room in order to participate.  Practically speaking, we only really care about events relevant to the users who are currently participating in the room; the 40,000 other lurkers can be incrementally synced in the background so that our membership list is accurate - but it shouldn’t block us from being able to join or read (or peek) the room.  We already have membership lazyloading in the client-server API to support incrementally loaded membership data, after all.</p>
<p>The problem with this change is that Synapse was written from the outset to assume that each room’s state should be atomically complete: in other words, room state shouldn’t  incrementally load in the background.  So the work for Faster Joins has been an exercise in auditing the entirety of Synapse for this assumption, and generally reviewing and hardening the whole state management system.  This has been <a href="https://github.com/matrix-org/synapse/pulls?q=is%3Apr+%22faster+joins%22+is%3Aclosed+">loads of work</a> that has been going on since the end of last year - but the end is in sight: you can see the remaining issues <a href="https://github.com/matrix-org/synapse/milestone/8">here</a>.</p>
<p>As of right now, faster joins work (although aren’t enabled by default) - with the main proviso that you can’t speak in the room yet until the background sync has completed, and the new implementation has not yet been optimised.  However, thanks to all the preparation work, this should be relatively straightforward, so the end is in sight on this one too.</p>
<p>In terms of performance: right now, joining Matrix HQ via the unoptimised implementation of faster joins completes on a fresh server in roughly 30 seconds - so a <strong>~25x improvement</strong> over the ~12 minutes we’ve seen previously.  However, the really exciting news is that this only requires synchronising 45 state events and 107 auth_chain events to the new server - a <strong>~1400x improvement</strong>!  So there should be significant scope for further optimising the calculation of these 152 events, given 30 seconds to come up with 152 events is definitely on the high side.  In our ideal world, we’d be getting joins down to sub-second performance, no matter how big the room is - once again, watch this space to see how we do. </p>
<p>Finally, alongside faster remote joins, we’re also working on faster local joins.  This work overlaps a bit with the optimisation needed to speed up the faster remote join logic - given we are seeing relatively simple operations unexpectedly taking tens of seconds in both instances. Some of this is needing to batch database activity more intelligently, but we also have some unknown pauses which we’re currently tracking down.  Profiling is afoot, as well as copious Jaeger and OpenTracing instrumentation - the hunt is on!</p>
<h3 id="ratcheting-up-testing">Ratcheting up testing</h3>
<p>All the work above describes some pretty bold changes to speed up Matrix and improve usability - but in order to land these changes with confidence, avoiding regressions both now and in future, we have really levelled up our testing this year.</p>
<p>Looking at matrix-react-sdk as used by Element Web/Desktop: all PRs made to matrix-js-sdk must now pass 80% unit test coverage for new code (measured using <a href="https://sonarcloud.io/project/overview?id=matrix-js-sdk">Sonarqube</a>, enforced as a GitHub PR check). All matrix-react-sdk PRs must be accompanied by a mix of unit tests, end-to-end tests (via <a href="https://www.cypress.io/">Cypress</a>) and screenshot tests (via <a href="https://percy.io/">percy.io</a>). All regressions (in both nightly and stable) are retro’d to ensure fixed things stay fixed (usually via writing new tests), and we have converted <a href="https://arewetsyet.bit.ovh/">fully to typescript</a> for full type safety.</p>
<p>Concretely, since May, we’ve increased js-sdk unit test coverage by ~10% globally, increased react-sdk coverage by ~17%, and added ever more Cypress integration tests to cover the broad strokes.  Cypress now <a href="https://github.com/matrix-org/matrix-react-sdk/pull/9104">completely replaces</a> our old Puppeteer-based end-to-end tests, and Sliding Sync work in matrix-react-sdk is being extensively tested by Cypress from the outset (the Sliding Sync PR literally comes with a Cypress test suite).</p>
<p>In mobile land, the situation is more complex given our long-term strategy is to deprecate matrix-ios-sdk and matrix-android-sdk2 in favour of matrix-rust-sdk. matrix-rust-sdk has always had <a href="https://app.codecov.io/gh/matrix-org/matrix-rust-sdk">excellent coverage</a>, and in particular, adopting the crypto module in the current matrix-{js,ios,android}-sdk will represent a night and day improvement for quality (not to mention perf!). We’ll also be adopting <a href="https://github.com/vector-im/element-x-ios/pull/50">PR checks</a>, and screenshot testing for the mobile SDKs.</p>
<p>On the backend, we continue to build out test cases for our new integration tester <a href="https://github.com/matrix-org/complement">Complement</a> (in Golang), alongside the original <a href="https://github.com/matrix-org/sytest">sytest</a> integration test suite (in Perl). In particular, we can now test Synapse in worker mode. The intention with Complement is that it should be homeserver agnostic so that <em>any</em> homeserver implementation can benefit. Indeed the project was initiated by Kegan wearing his Dendrite hat. </p>
<p>Finally, we’ve had a huge breakthrough with true multi-client end-to-end testing in the form of Michael Kaye’s brand new <a href="https://github.com/matrix-org/trafficlight">Traffic Light</a> project. For the first time, we can fully test things like cross signing and verification and VoIP calls end-to-end across completely different platforms and different clients. It’s early days yet, but this really will be a game changer, especially for crypto and VoIP. </p>
<p>Next up, we will turn our attention to a performance testing framework so that we can reliably track performance improvements and regressions in an automated fashion - heavily inspired by Safari’s <a href="https://www.goodreads.com/quotes/9844796-don-was-the-one-who-figured-out-how-we-would">Page Load Test</a> approach. This will be essential as we build out new clients like Element X.</p>
<h2 id="a-whole-new-world">A whole new world</h2>
<p>All the stuff above is focused on improving the core performance and usability of Matrix - but in parallel we have also been making enormous progress on entirely new features and capabilities. The following isn’t a comprehensive list, but we wanted to highlight a few of the areas where new development is progressing at a terrifying rate…</p>
<h3 id="native-voip-conferencing">Native VoIP Conferencing</h3>
<p>2022 is turning out to be the year that Matrix finally gets fully native voice/video conferencing. After speccing <a href="https://github.com/matrix-org/matrix-spec-proposals/blob/matthew/group-voip/proposals/3401-group-voip.md">MSC3401</a> at the end of last year, <a href="https://element.io/blog/introducing-native-matrix-voip-with-element-call/">Element Call Beta 1</a> launched as a reference implementation back in March, followed by enabling E2EE, spatial audio and walkie-talkie mode in <a href="https://element.io/blog/element-call-beta-2-encryption-spatial-audio-walkie-talkie-mode-and-more/">Element Call Beta 2</a> in June.</p>
<p>However, the catch was that Element Call beta 1 and 2 only ever implemented “full mesh” conferencing - where every participant calls every other participant simultaneously, limiting the size of the conference to ~7 participants on typical hardware, and wasting lots of bandwidth (given you end up sending the same upstream multiple times over for all the other participants).  Element Call has been working surprisingly well in spite of this, but the design of MSC3401 was always to have “foci” (the plural of ‘focus’ - i.e. conference servers) to optionally sit alongside homeservers in order to aggregate the participating calls, a bit like this:</p>
<p><img src="/blog/img/2022-08-15-msc3401.jpg" alt="MSC3401 Architecture" /></p>
<p>With foci, clients only need to send their upstream to their local focus, rather than replicating it across all the other participants - and the focus can then fan it out to other foci or clients as required.  In fact, if no other clients are even watching your upstream, then your client can skip sending an upstream to its focus entirely!</p>
<p>Most importantly, foci are decentralised, just like Matrix: there is no single conference server as a single point of control or failure responsible for powering the group call - users connect to whichever focus is closest to them, and so you automatically get a standards-based heterogeneous network-split-resilient geographically distributed cascading conferencing system with end-to-end-encryption, powered by a potentially infinite number of different implementations.  To the best of our knowledge, this is the first time someone’s proposed an approach like this for decentralised group calling (watch out, Zoom, we’re coming for you!)</p>
<p>Now, the VoIP team have been busy polishing Element Call (e.g. chasing down end-to-end encryption edge cases and reliability), and also figuring out how to embed it into Element and other Matrix clients as a quick way to get excellent group VoIP (more on that later).  As a result, work on building out foci for scalable conferencing had to be pushed down the line.</p>
<p>But in the last few months this completely changed, thanks to an <strong>amazing</strong> open source contribution from Sean DuBois, project lead over at <a href="https://pion.ly/">Pion</a> - the excellent Golang WebRTC implementation.  Inspired by our <a href="https://2021.commcon.xyz/talks/extending-matrix-s-e2ee-calls-to-multiparty">initial talk</a> about MSC3401 at CommCon, Sean independently decided to see how hard it’d be to build a Selective Forwarding Unit (SFU) focus that implemented MSC3401 semantics using Pion - and published it at <a href="https://github.com/sean-der/sfu-to-sfu">https://github.com/sean-der/sfu-to-sfu</a> (subsequently donated to github.com/matrix-org).  In many ways this was a flag day for Matrix: it’s the first time that a core MSC from the core team has been first implemented from outside the core team (let alone outside the Matrix community!).  It’s the VoIP equivalent of Synapse starting off life as a community contribution rather than being written by the core team.</p>
<p>Either way: Sean’s SFU work has opened the floodgates to making native Matrix conferencing actually scale, with Šimon Brandner and I jumping in to <a href="https://github.com/matrix-org/matrix-js-sdk/pull/2423">implement SFU support</a> in matrix-js-sdk… and as of a few weeks ago we did the first ever SFU-powered Matrix call - which worked impressively well for 12 participants!</p>
<p><img src="/blog/img/2022-08-15-sfu.jpg" alt="12 person Element Call" /></p>
<p>Now, this isn’t released yet, and there is still work to be done, including:</p>
<ul>
<li>We actually need to select the subset of streams we care about from the focus</li>
<li>We need to support thumbnail streams as well as high-res streams</li>
<li>We need rate control to ensure clients on bad connections don’t get swamped</li>
<li>We need to hook up cascading between foci (although the SFU already supports it!)</li>
<li>We need E2EE via insertable streams</li>
<li>Faster signalling for switching between streams</li>
</ul>
<p>You can see the full todo list for basic and future features over on GitHub.  However, we’re making good progress thanks to Šimon’s work and Sean’s help - but with any luck beta 3 of Element Call might showcase SFU support!</p>
<p>Meanwhile it’s worth noting that Element Call is not the only MSC3401 implementation out there - the Hydrogen team has added native support to Hydrogen SDK too (skipping over the old 1:1 calling), so expect to see Element &lt;-&gt; Hydrogen calling in the near future. The Hydrogen implementation is also what powers Third Room (see below…)</p>
<h3 id="matryoshka-voip-embedding">Matryoshka VoIP Embedding</h3>
<p>Elsewhere on VoIP, we’ve also been hard at work figuring out how to embed Element Call into Matrix clients in general, starting with Element Web, iOS &amp; Android.  Given MSC3401 is effectively a superset of native 1:1 Matrix VoIP calling, we’d ideally like to replace the current 1:1-only VoIP implementation in Element with an embedded instance of Element Call (not least so we don’t have to maintain it in triplicate over Web/iOS/Android, and because WebRTC-in-a-webview really isn’t very different to native WebRTC).  To do this efficiently however, the embedded Element Call needs to share the same underlying Matrix client as the parent Element client (otherwise you end up wasting resources and devices and E2EE overhead between the two).  Effectively Element Call ends up needing to parasite off the parent’s client.  We call this approach “matryoshka embedding”, given it resembles nested Russian dolls. 🪆</p>
<p>In practice, we do this by extending the Widget API to let Matrix clients within the widget share the parent’s Matrix client for operations such as sending and receiving to-device messages and accessing TURN servers (c.f. <a href="https://github.com/matrix-org/matrix-spec-proposals/blob/travis/msc/widgets-send-recv-toDevice/proposals/3819-to-device-messages-for-widgets.md">MSC3819</a> and <a href="https://github.com/robintown/matrix-doc/blob/widget-turn-servers/proposals/3846-widget-turn-servers.md">MSC3846</a>).  This in turn has been <a href="https://github.com/matrix-org/matrix-widget-api/pull/57">implemented</a> in the matrix-widget-api helper library for widget implementers - and then a few days ago Robin demonstrated the world’s first ever matryoshka embedded Element Call call, looking like this:</p>
<p><img src="/blog/img/2022-08-15-matryoshka.jpg" alt="Matryoshka embedded Element Call" /></p>
<p>Note that the MSC3401 events are happening in the actual room where the widget has been added, sent by the right users from Element Web rather than from Element Call, and so are subject to all the normal Matrix access control and encryption semantics.  This is a <em>huge</em> step forwards from embedding Jitsi widgets, where the subsequent call membership and signalling happens in an entirely separate system (XMPP via Prosody, ironically) - instead: this is proper native Matrix calling at last.</p>
<p>Moreover, the same trick could be used to efficiently embed other exotic Matrix clients such as Third Room or <a href="https://github.com/toger5/TheBoard">TheBoard</a> - giving the user the choice either to use the app standalone or within the context of their existing Matrix client. Another approach could be to use OIDC scopes to transparently log the embedded client in using the parent’s identity; this has the advantage of no code changes being needed on the embedded client - but has the disadvantage that you needlessly end up running two Matrix clients for the same account side by side, and adding another device to your account, which isn’t ideal for a performance sensitive app like Element Call or Third Room.</p>
<p>Matryoshka embedding isn’t live yet, but between scalable calls via SFU and native Element Call in Element Web/iOS/Android, the future is looking incredibly exciting for native Matrix VoIP.  We hope to finish embedding Element Call in Element Web/iOS/Android in Sept/Oct - and if we get lucky perhaps the SFU will be ready too and then Element Call can exit beta!</p>
<p>Finally, we also added Video Rooms to Element Web - adding the user interface for an “always on” video room that you can hop into whenever you want.  You can read about it over on the <a href="https://element.io/blog/drop-in-drop-out-chats-with-video-rooms-and-a-new-search-experience/">Element blog</a> - the initial implementation uses Jitsi, but once Element Call and Matryoshka embedding is ready, we’ll switch over to using Element Call instead (and add Voice Rooms too!)</p>
<p><img src="/blog/img/2022-08-15-video-rooms.jpg" alt="Video Rooms" /></p>
<h3 id="third-room">Third Room</h3>
<p>Just as MSC3401 and Element Call natively adds decentralised voice/video conferences to boring old textual Matrix chatrooms, <a href="https://github.com/matrix-org/matrix-spec-proposals/pull/3815">MSC3815</a> and <a href="https://github.com/matrix-org/thirdroom/blob/main/README.md">Third Room</a> go the whole enchilada and adds a full decentralised 3D spatial collaboration environment into your Matrix room - letting you turn your Matrix rooms into a full blown interconnected virtual world.</p>
<p>I can’t overstate how exciting this is: one of the key origins of Matrix was back in Oct 2013 when Amandine and myself found ourselves in Berlin after TechCrunch Disrupt, debating why Second Life hadn’t been more successful - and wondering what you’d have to do to build an immersive 3D social environment which would be as positive and successful as a wildly popular chat network.  Our conclusion was that the first key ingredient you’d need would be a kick-ass open decentralised communication protocol to build it on - providing truly open communication primitives that anyone could build on, much like the open web… and that was what got us thinking about how to build Matrix.</p>
<p>Fast forward 9 years, and Third Room is making <em>spectacular</em> progress in building out this dream, thanks to the incredibly hard work of Robert, Nate and Ajay. The goal of Third Room is to be an open platform layered directly on Matrix for spatial collaboration of any kind: effectively a blank canvas to let folks create freeform collaborative 3D (and in future 2D, VR or AR) experiences, either by using existing assets or building their own user-generated content and functionality. Just like the open web itself, this unlocks a literally infinite range of possibilities, but some of the obvious uses include: spatial telepresence, social VR, 3D visualisation of GIS or weather data, 3D simulated environments, search and rescue and disaster response operations (imagine streaming LIDAR from a drone surveying hurricane devastation into Third Room, where you can then overlay and collaborate on GIS data in realtime), and of course 3D gaming in all its various forms.</p>
<p>Now, we’re hoping to give Third Room a proper launch in a few weeks, so I’m not going to spoil too much right now - but the final pieces which are currently coming together include:</p>
<ul>
<li>Finalising the initial version of <a href="https://github.com/matrix-org/thirdroom/tree/main/src/engine">Manifold</a>, the multi-threaded game engine which powers Third Room (built on <a href="https://threejs.org/">Three.JS</a>, <a href="https://github.com/NateTheGreatt/bitECS">bitECS</a> and <a href="https://rapier.rs/">Rapier</a>), using SharedArrayBuffers as triple-buffers to synchronise between the various threads.  See <a href="https://github.com/matrix-org/thirdroom/discussions/47#discussion-4033099">this update</a> for a bit more detail on how the engine works.</li>
<li>Finalising the Matrix client interface itself, powered by <a href="https://github.com/vector-im/hydrogen-web/blob/master/doc/SDK.md">Hydrogen SDK</a> in order to be as lightweight as possible</li>
<li>Adding in full spatial audio and game networking via MSC3401 and Hydrogen SDK (currently full mesh, but will go SFU as soon as SFUs land!)</li>
<li>Adding in animated avatars (currently using <a href="https://www.mixamo.com/">Mixamo</a> animations)</li>
<li>Adding in name tags and object labels</li>
<li>Adding in 3D Tile support in order to incrementally load 3D map tiles à la Google Earth</li>
<li>Building an asset pipeline from Unity and Blender through to the glTF assets which Third Room uses.</li>
<li>Initial framework for an in-world direct-manipulation <a href="https://twitter.com/matrixdotorg/status/1550534909089189888">editor</a></li>
<li>Lightmap support for beautiful high-performance static lighting and shadows</li>
<li>Full post-processing pipeline (bloom, depth-of-field, anti-aliasing etc)</li>
<li>Integrating with OIDC for login, registration, and account management (see OIDC below)</li>
</ul>
<p>As a quick teaser - here’s an example of a <a href="https://assetstore.unity.com/packages/3d/environments/sci-fi/3d-scifi-kit-vol-3-121447">Unity asset</a> exported into Third Room, showing off lightmaps (check out the light and shadows cast by the strip lighting inside, or the shadow on the ground outside).  Ignore the blurry HDR environment map of Venice in the background, which is just there to give the metals something to reflect.  Check out the stats on the right-hand side: on Robert’s M1 Macbook Pro we’re getting a solid 60fps at 2000x1244px, with 13.12ms of unused gametime available for every 16.67ms frame, despite already showing a relatively complicated asset!</p>
<iframe src="https://www.youtube.com/embed/xvjMyYxZbmM" title="Third Room prototype demo 1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>Meanwhile, here are some shots of Robert and Nate chasing each other around the UK City demo environment (also exported from <a href="https://assetstore.unity.com/packages/3d/environments/urban/city-builder-london-214943">Unity</a>), showing off blended Mixamo animations and throwing around crates thanks to the Rapier physics engine.</p>
<iframe src="https://www.youtube.com/embed/y2mU19QwZPg" title="Third Room prototype demo 2" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<iframe src="https://www.youtube.com/embed/QEt80wvO4yY" title="Third Room prototype demo 3" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<br/>
<p>And don't forget, it's just a Matrix client - with no infrastructure required other than a normal Matrix server:</p>
<p><img src="/blog/img/2022-08-15-thirdroom-overlay.jpg" alt="Third Room Overlay" /></p>
<p>As you can see, we are rapidly approaching the point where we’ll need support from technical artists to help create beautiful scenes and avatars and assets in order to make it all come to life - especially once the Blender and Unity pipelines, and/or the Third Room editor are finished. If you’re interested in getting involved come chat at <a href="https://matrix.to/#/#thirdroom:matrix.org">#thirdroom:matrix.org</a>!</p>
<h3 id="wysiwyg">WYSIWYG</h3>
<p>Back in the real world, a recent new project that we haven’t spoken about much yet is adding consistent WYSIWYG (What You See Is What You Get) editing to the message composer in matrix-{react,ios,android}-sdk as used by Element Web/iOS/Android - as well as publishing the resulting WYSIWYG editor for the greater glory of the wider ecosystem.</p>
<p>This is a bit of a contentious area, because we’ve tried several times over the years to add a rich text editor to matrix-react-sdk - firstly with the <a href="https://draftjs.org/">Draft.js</a> <a href="https://github.com/matrix-org/matrix-react-sdk/pull/292">implementation</a> by Aviral (which we abandoned after Facebook de-staffed Draft), and then later with a <a href="https://www.slatejs.org">Slate</a> <a href="https://github.com/matrix-org/matrix-react-sdk/pull/1890">implementation</a> by me (which we abandoned thanks to the maintenance burden of keeping up with Slate’s API changes).  Finally, burnt by the experience with third party solutions, Bruno wrote his own editor called <a href="https://github.com/matrix-org/matrix-react-sdk/blob/develop/docs/ciderEditor.md">CIDER</a>, which was a great success and is what Element Web uses today to author messages including ‘pills’ for structured rooms/users etc… but this deliberately didn’t provide full WYSIWYG functionality.  Meanwhile, Slack added WYSIWYG, forced it on, and <a href="https://quuxplusone.github.io/blog/2019/11/20/slack-rich-text-box/">screwed it up</a> - and apps like WhatsApp and Discord seem to get by fine without WYSIWYG. </p>
<p>However, given that users are now used to WYSIWYG in Teams and Slack, we’ve now decided to have another go at it, inspired by CIDER’s success - and with the novel twist that the heavy lifting of modelling and versioning the document and handling Unicode + CJK voodoo will be provided by a cross-platform native library written in Rust, ensuring that matrix-{react,ios,android}-sdk (and in future matrix-rust-sdk-based apps like Element X) all have precisely the same consistent semantics, and we don’t spend our lives fixing per-platform WYSIWYG bugs unless it really is a platform-specific issue with the user interface provided on that particular platform.</p>
<p>The project is fairly young but developing fast, and lives over at <a href="https://github.com/matrix-org/matrix-wysiwyg">https://github.com/matrix-org/matrix-wysiwyg</a> (better name suggestions welcome ;) - we’re aiming to get it into clients by the end of October.  The editor itself is not Matrix specific at all, so it’ll be interesting to see if other projects pick it up at all - and meanwhile, if we’ve done a good job, it’ll be interesting to see if this can be used to power Matrix-backed collaborative-editing solutions in future…</p>
<iframe src="https://www.youtube.com/embed/9_UhNBKUk7A" title="WYSIWYG teaser on Android" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p><strong>Update</strong>: we should have mentioned that the WYSIWYG editor project is being built out by staff at Element, who very kindly have been sponsored to work on it by one of Element's Big Public Sector Customers in order to get to parity with Teams.  Thank you!!</p>
<h3 id="are-we-oidc-yet">Are We OIDC Yet?</h3>
<p>On the other hand, a project we recently <a href="https://matrix.org/blog/2022/08/10/areweoidcyet-com-matrix-and-open-id-connect">yelled about</a> a lot is Matrix’s transition to Open ID Connect for standards-based authentication and account management.  We announced this at the <a href="https://matrix.org/blog/2021/12/22/the-mega-matrix-holiday-special-2021#openid-connect">end of the year</a> and the project has built up huge momentum subsequently, culminating with the release of <a href="https://areweoidcyet.com">https://areweoidcyet.com</a> last week to track the progress and remaining work.</p>
<p>Our plan is to use native OIDC in production for the first time to provide all the login, registration and account management for Third Room when it launches in a few weeks (using a branded Keycloak instance as the identity provider, for convenience).  After all, the last thing we wanted to do was to waste time building fiddly Matrix-specific login/registration UI in Third Room when we’re about to move to OIDC!  This will be an excellent case study to see how it works, and how it feels, and inform the rest of the great OIDC experiment and proposed migration.</p>
<h3 id="dendrite-p2p">Dendrite + P2P</h3>
<p>Meanwhile, the Next Generation team has continued to focus on their mission to make Dendrite as efficient and usable as possible. Within recent months, Dendrite has matured dramatically, with a considerable list of bugs fixed, performance significantly improved and new features added - push notifications, history visibility and presence to name a few notable additions.</p>
<p>Neil Alexander, Kegan and Till have continued to streamline the Dendrite architecture and to refactor areas of the codebase which have long needed attention, as well as moving from Kafka to NATS JetStream, an all-new caching model and some other fairly major architectural changes. We’ve also seen an increase of code contributions from the community and outside organisations, which is exciting, and the <a href="https://github.com/matrix-org/gomatrixserverlib">gomatrixserverlib</a> library which underpins much of Dendrite is also seeing more active development and attention thanks to its use in the <a href="https://github.com/matrix-org/complement">Complement</a> integration testing suite.</p>
<p>With the most recent <a href="https://github.com/matrix-org/dendrite/releases">0.9.3 release</a>, we are proud to announce that <strong>Dendrite now</strong> <strong>passes 90% of Client-Server API tests and 95% of Server-Server API tests</strong> and has support for all specced room versions in use today. We have a growing community of users who are (quite successfully) trialling using Dendrite homeservers day-to-day, as well as our own public <code>dendrite.matrix.org</code> homeserver, which is open to the public for registration for anyone who wants to experiment with Dendrite without running their own deployment.</p>
<p>Dendrite plays an important role in our future strategy as it is also the homeserver implementation used for embedded homeservers, P2P development and experimentation. In addition to being able to scale up, we have also successfully scaled down, with the Element P2P demos proving that an embedded Dendrite homeserver can run comfortably on an iOS or Android device.</p>
<p>Research on the <a href="https://github.com/matrix-org/pinecone/">Pinecone</a> overlay network for P2P Matrix has also continued, with Devon and Neil having experimented with a number of protocol iterations and spent considerable time bringing the <a href="https://github.com/matrix-org/pinecone/tree/main/cmd/pineconesim">Pinecone Simulator</a> up to scratch to help us to test our designs more rapidly. Our work in this area is helping us to form a better direction and strategy for P2P Matrix as a whole, which is moving more towards a hybridised model with the current Matrix federation — a little different to our original vision, but will hopefully result in a much smoother transition path for existing users whilst solving some potential scaling problems. The <a href="https://arewep2pyet.com">arewep2pyet.com</a> site is a living page which contains a high level overview of our goals and all the progress being made.</p>
<h2 id="what-s-left">What’s left?</h2>
<p>Comparing all of the above with the <a href="https://matrix.org/blog/2021/12/22/the-mega-matrix-holiday-special-2021#2022">predictions for 2022</a> section of the end-of-year blog post, we’re making very strong progress in a tonne of areas - and the list above isn’t comprehensive.  For instance, we haven’t called out all the work that the Trust &amp; Safety team are doing to roll out advanced moderation features by default to all communities - or the work that Eric has been doing to close the remaining gap between Gitter and Matrix by creating new static archives throughout Matrix.  Hydrogen has also been beavering away to provide a tiny but perfectly formed web client suitable for embedding, including the new embeddable Hydrogen SDK. We haven’t spoken about the work that the Cryptography team have been doing to adopt vodozemac and matrix-rust-sdk-crypto throughout matrix-{js,ios,android}-sdk, or improve encryption stability and security throughout.  We’ve also not spoken about the new initiative to fix long-term chronic bugs (outside of the work above) in general - or all the work being done around <a href="https://matrix.org/blog/2022/03/30/technical-faq-on-the-digital-markets-act">Digital Markets Act interoperability</a>…</p>
<p>Other things left on the menu for this year include getting Threads out of beta: we’ve had a bit of an adventure here figuring out how to get the right semantics for notification badges and unread state in rooms with threads (especially if you use a mix of clients which support and don’t support threads), and once that’s done we’ll be returning to Spaces (performance, group permissions etc).</p>
<h2 id="matrix-2-0">Matrix 2.0?</h2>
<p>Looking through this post (and congratulations if you’re still reading it at this point ;P), it really feels that Matrix is on the verge of shifting into a new phase.  Much as MacOS X started off as a promising but distinctly unoptimised operating system, and then subsequently got unrecognisably faster year by year (even on the same hardware!) as Apple diligently worked away optimising the kernel… similarly: we are now landing the architectural changes to completely transform how Matrix performs.</p>
<p>Between protocol changes like Sliding Sync, Faster Joins, native OIDC and native VoIP conferencing all landing at roughly the same time - and alongside new implementations like matrix-rust-sdk and vodozemac, let alone Third Room - it feels unquestionably like we have an unrecognisable step change on the horizon.  Our aim is to land as much of this as possible by the end of the year, and if we pull it off, I’m tempted to suggest we call the end result Matrix 2.0.</p>
<p>To the future! 🚀</p>
<p>Matthew, Amandine &amp; the whole core team.</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;05&#x2F;30&#x2F;welcoming-rocket-chat-to-matrix&#x2F;" title="Welcoming Rocket.Chat to Matrix!">Welcoming Rocket.Chat to Matrix!</a></h2>
                <span>
                    30.05.2022 19:04
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                <br>
                <small>Last update: 30.05.2022 16:16</small>
            </header>
            <div>
                
                <div style="text-align: center">
<img src="/blog/img/rocketchat.png" alt="Rocket.Chat ♥️ Matrix"/>
</div>
<p>Hi folks,</p>
<p>We just wanted to take a moment to welcome <a href="https://rocket.chat">Rocket.Chat</a> to Matrix, given the <a href="https://rocket.chat/press-releases/rocket-chat-leverages-matrix-protocol-for-decentralized-and-interoperable-communications">recent announcement</a> that they are switching to using Matrix for standards-based interoperable federation!  This is incredible news: Rocket.Chat is one of the leading open source collaboration platforms with <a href="https://rocket.chat/company/about-us">over 12 million users</a>, and they will all shortly have the option to natively interoperate with the wider Matrix network: the feature has already landed (in alpha) in <a href="https://github.com/RocketChat/Rocket.Chat/releases/tag/4.7.0">Rocket.Chat 4.7.0</a>!</p>
<p>We’d like to thank the whole Rocket.Chat team for putting their faith in Matrix and joining the network: the whole idea of Matrix is that by banding together, different independent organisations can build an open decentralised network which is far stronger and more vibrant than any closed communication platform.  The more organisations that join Matrix, the <a href="https://en.wikipedia.org/wiki/Metcalfe%27s_law">more useful and valuable</a> the network becomes for everyone, and the more momentum there is to further refine and improve the protocol.  Our intention is that Matrix will grow into a massive open ecosystem and industry, akin to the open Web itself… and that every organisation participating, be that Rocket.Chat, Element, Gitter, Beeper, Famedly or anyone else will benefit from being part of it. We are stronger together!</p>
<p>Rocket.Chat’s implementation follows the “<a href="https://matrix.org/blog/2020/12/07/gitter-now-speaks-matrix#how-do-you-make-an-existing-chat-system-talk-matrix">How do you make an existing chat system talk Matrix?</a>” approach we published based on our experiences of linking Gitter into Matrix. Looking at the initial <a href="https://github.com/RocketChat/Rocket.Chat/pull/23688">pull request</a>, the implementation lets Rocket.Chat act as a Matrix Application Service, effectively acting as a bridge to talk to an appropriate Matrix homeserver.  From chatting with the team, it sounds like next steps will involve adding in encryption via our upcoming <a href="https://github.com/matrix-org/matrix-rust-sdk/issues/699">matrix-sdk-crypto node bindings</a> - and then looking at ways to transparently embed a homeserver like Dendrite, sharing data as much as possible between RC and Matrix, so Rocket.Chat deployments can transparently sprout Matrix interoperability without having to run a separate homeserver.  Super exciting!</p>
<p>You can see a quick preview of a Rocket.Chat user chatting away with an Element user on matrix.org via Matrix here:</p>
<p><video style="width: 100%" src="/blog/img/164530391-e8b17ecd-a4d0-4ef8-a8b7-81230c1773d3.mp4" controls></video></p>
<p>So, exciting times ahead - needless to say we’ll be doing everything we can to support Rocket.Chat and ensure their Matrix integration is a success.  And at this rate, they might be distinctly ahead of the curve if they start shipping Dendrite!  Meanwhile, we have to wonder who will be next? Nextcloud? Mattermost? Place your bets… ;)</p>
<p>--Matthew</p>
<h3 id="update">Update</h3>
<p>Aaron from Rocket.Chat just published an <a href="https://geekgonecrazy.com/2022/05/30/rocketchat-and-the-matrix-protocol/">excellent guide &amp; video tour</a> for how to actually set up your Rocket.Chat instance with Dendrite to get talking Matrix!</p>
<div style="text-align: center">
<iframe src="https://www.youtube.com/embed/oQhIH8kql9I" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;05&#x2F;16&#x2F;independent-public-audit-of-vodozemac-a-native-rust-reference-implementation-of-matrix-end-to-end-encryption&#x2F;" title="Independent public audit of Vodozemac, a native Rust reference implementation of Matrix end-to-end encryption">Independent public audit of Vodozemac, a native Rust reference implementation of Matrix end-to-end encryption</a></h2>
                <span>
                    16.05.2022 17:04
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                <br>
                <small>Last update: 16.05.2022 16:02</small>
            </header>
            <div>
                
                <p>Hi all,</p>
<p>It’s been <a href="https://matrix.org/blog/2016/11/21/matrixs-olm-end-to-end-encryption-security-assessment-released-and-implemented-cross-platform-on-riot-at-last">quite a while</a> since our last independent E2EE review, and so we’re incredibly proud to present an <a href="https://matrix.org/media/Least%20Authority%20-%20Matrix%20vodozemac%20Final%20Audit%20Report.pdf">entirely new independent security audit</a> of <a href="https://github.com/matrix-org/vodozemac">vodozemac</a>, our next generation native Rust implementation of Matrix’s <a href="https://gitlab.matrix.org/matrix-org/olm/blob/master/docs/olm.md">Olm</a> and <a href="https://gitlab.matrix.org/matrix-org/olm/blob/master/docs/megolm.md">Megolm</a> E2EE protocols.  The audit has been conducted by <a href="https://leastauthority.com/">Least Authority</a>, who specialise in <a href="https://leastauthority.com/security-consulting/published-audits/">comprehensive audits</a> of security-sensitive decentralized technologies - and we are very grateful to <a href="https://www.gematik.de/anwendungen/ti-messenger">gematik</a>, who kindly shared the costs of funding the audit as part of their <a href="https://matrix.org/blog/2021/07/21/germanys-national-healthcare-system-adopts-matrix">commitment to Matrix for healthcare in Germany</a>.</p>
<p>This audit was a bit of a whirlwind, as while we were clearly overdue an audit of Matrix’s E2EE implementations, we decided quite late in the day to focus on bringing vodozemac to auditable production quality rather than simply doing a refresh of the original <a href="https://matrix.org/blog/2016/11/21/matrixs-olm-end-to-end-encryption-security-assessment-released-and-implemented-cross-platform-on-riot-at-last">libolm audit</a>.  However, we got there in time, thanks to a monumental sprint from <a href="https://github.com/matrix-org/vodozemac/graphs/contributors">Damir and Denis</a> over Christmas.  The reason we went this route is that vodozemac is an enormous step change forwards in quality over <a href="https://gitlab.matrix.org/matrix-org/olm">libolm</a>, and vodozemac is now the reference Matrix E2EE implementation going forward.  Just as libolm went live with NCC’s security review back in 2016, similarly we’re kicking off the first stable release of vodozemac today with Least Authority’s audit.  In fact, vodozemac just shipped as the default E2EE library in <a href="https://github.com/matrix-org/matrix-rust-sdk/releases/tag/matrix-sdk-0.5.0">matrix-rust-sdk 0.5</a>, released at the end of last week!</p>
<p>The main advantages of vodozemac over libolm include:</p>
<ul>
<li>Native Rust - type, memory and thread safety is preserved both internally, and within the context of larger Rust programs (such as those building on matrix-rust-sdk).  This is particularly important given the <a href="https://matrix.org/blog/2021/06/14/adventures-in-fuzzing-libolm">memory bugs</a> which libolm sprouted, despite our best efforts to the contrary.</li>
<li>Performance - vodozemac benchmarks roughly 5-6x faster than libolm on typical hardware</li>
<li>Better primitives - vodozemac is built on the best practice cryptographic primitives from the Rust community, rather than the generic Brad Conte primitives used by libolm.</li>
</ul>
<p>Also, we’ve finally fixed one of the biggest problems with libolm - which was that the hardest bit of implementing E2EE in Matrix wasn’t necessarily the encryption protocol implementation itself, but how you glue it into your Matrix client’s SDK.  It turns out ~80% of the code and complexity needed to securely implement encryption ends up being in the SDK rather than the Olm implementation - and each client SDK ended up implementing its own independent state machine and glue for E2EE, leading to a needlessly large attack &amp; bug surface.</p>
<p>To address this problem, vodozemac is designed to plug into <a href="https://github.com/matrix-org/matrix-rust-sdk/tree/main/crates/matrix-sdk-crypto">matrix-sdk-crypto</a> - an SDK-independent Rust library which abstracts away the complexities and risks of implementing E2EE, designed to plug into existing SDKs in any language.  For instance, Element Android already <a href="https://github.com/vector-im/element-android/pull/3209">supports</a> delegating its encryption to matrix-sdk-crypto; Element iOS got this working too last week, and we’re <a href="https://github.com/Hywan/matrix-rust-sdk/commits/feat-crypto-wasm">hard at work</a> adding it to Element Web too.  (This set of projects is codenamed Element R).  Meanwhile, <a href="https://youtu.be/chsyOWKvne4">Element X</a> (the project to switch Element iOS and Element Android to use matrix-rust-sdk entirely) obviously benefits from it too, as matrix-rust-sdk now leans on matrix-sdk-crypto for its encryption.</p>
<p>Therefore we highly recommend that developers using libolm migrate over to vodozemac - ideally by switching to matrix-sdk-crypto as a way of managing the interface between Matrix and the E2EE implementation.  Vodozemac does also provides a similar API to libolm with <a href="https://github.com/matrix-org/vodozemac-bindings">bindings for JS and Python</a> (and C++ in progress) if you want to link directly against it - e.g. if you’re using libolm for something other than Matrix, for example XMPP, ActivityPub or Jitsi.  We’ll continue to support and maintain libolm for now though, at least until the majority of folks have switched to vodozemac.</p>
<p>In terms of the audit itself - we recommend <a href="https://matrix.org/media/Least%20Authority%20-%20Matrix%20vodozemac%20Final%20Audit%20Report.pdf">reading it yourself</a>, but the main takeaway is that Least Authority identified 10 valid concerns, of which we addressed 8 during the audit process. The remaining two are valid but lower priority, and we’ll fix them as part of our maintenance backlog.  All the issues identified are excellent valid points, and we’re very glad that Least Authority have added huge value here by highlighting some subtle gotchas which we’d missed.  (If you write Rust, you’ll particularly want to check out their zeroisation comments).</p>
<p>So: exciting times!  Vodozemac should be landing in a Matrix client near you in the near future - we’ll yell about it loudly once Element switches over.  In the meantime, if you have any questions, please head over to <a href="https://matrix.to/#/#e2ee:matrix.org">#e2ee:matrix.org</a>.</p>
<p>Thanks again to gematik for helping fund the audit, and to Least Authority for doing an excellent job - and being patient and accommodating beyond the call of duty when we suddenly switched the scope from libolm to vodozemac at the last minute ;)</p>
<p>Next up: we’re going to get the Rust matrix-sdk-crypto independently audited (once <a href="https://github.com/matrix-org/matrix-rust-sdk/milestone/1">this burndown</a> is complete) so that everyone using the matrix-sdk-crypto state machine for Matrix E2EE can have some independent reassurance too - a huge step forward from the wild west of E2EE SDK implementations today!</p>
<p>– Matthew</p>

                
            </div>
        </article>
        
        <article class="post">
            <header>
                <h2><a href="https:&#x2F;&#x2F;matrix.org&#x2F;blog&#x2F;2022&#x2F;03&#x2F;30&#x2F;technical-faq-on-the-digital-markets-act&#x2F;" title="Technical FAQ on the Digital Markets Act">Technical FAQ on the Digital Markets Act</a></h2>
                <span>
                    30.03.2022 14:13
                    —
                    <a href="/category/general">
                        General
                    </a>
                    —
                    <a
                        href="/author/matthew-hodgson">
                        Matthew Hodgson
                    </a>
                </span>
                
            </header>
            <div>
                
                <p>Hi all,</p>
<p>We've been flooded with questions about the <a href="https://www.europarl.europa.eu/news/en/press-room/20220315IPR25504/">DMA</a>
since it was announced last week, and have spotted some of the
gatekeepers jumping to the wrong conclusions about what it might entail.
Just in case you don't want to wade through
yesterday's <a href="https://matrix.org/blog/2022/03/29/how-do-you-implement-interoperability-in-a-dma-world/">sprawling blog post</a>,
we've put together a quick FAQ to cover the most important points based on
our understanding.</p>
<h3 id="what-does-dma-mean-for-the-gatekeepers">What does DMA mean for the gatekeepers?</h3>
<p>The gatekeepers will have to open and document their existing APIs, so that
alternative clients and/or bridges can connect to their service. The DMA
requires that the APIs <em>must</em> expose the same level of privacy for remote
users as for local users. So, if their service is end-to-end-encrypted
(E2EE), the APIs must expose the same E2EE semantics (e.g. so that an
alternative client connecting would have to implement E2EE too). For
E2EE-capable APIs to work, the gatekeeper will likely have to model remote
users as if they were local in their system. In the short term (one year
horizon) this applies only to 1:1 chats and file transfers. In the long term
(three year horizon) this applies to group chats and voip calls/conferences
too.</p>
<h3 id="who-counts-as-a-gatekeeper">Who counts as a “gatekeeper”?</h3>
<p>The DMA defines any tech company worth over €75B or with over €7.5B of
turnover as a gatekeeper, who must open their communication APIs. This means
only the tech giants are in scope (e.g. as of today that includes Meta,
Apple, Google, Microsoft, Salesforce/Slack - not Signal, Telegram, Discord,
Twitter).</p>
<h3 id="does-this-mean-the-gatekeepers-are-being-forced-to-implement-an-open-standard-such-as-matrix-or-xmpp">Does this mean the gatekeepers are being forced to implement an open standard such as Matrix or XMPP?</h3>
<p>No. They can keep their existing implementations and APIs. For
interoperability with other service providers, they will need to use a
bridge (which could bridge via a common language such as Matrix or XMPP).</p>
<h3 id="are-bridges-secure">Are bridges secure?</h3>
<p>If the service lacks end-to-end-encryption (Slack, Teams, Google Chat,
non-secret chats on Facebook Messenger, Instagram, Google Messages etc) then
the bridge does not reduce security or privacy, beyond the fact that bridged
conversations by definition will be visible to the bridge and to the service
you are interoperating with.</p>
<p>If the service has E2EE (WhatsApp, iMessage, secret chats on Messenger) then
the bridge will necessarily have to decrypt (and reencrypt, where possible)
the data when passing it to the other service. This means the conversation is
no longer E2EE, and thus less secure (the bridge could be compromised and
inspect or reroute their messages) - and so gatekeepers must warn the user
that their conversation is leaving their platform and is no longer E2EE with
something like this:</p>
<div style="text-align: center">
<img src="/blog/img/2022-03-29-warning.jpg" width="430"/>
</div>
<br/>
<h3 id="why-is-the-dma-good">Why is the DMA good?</h3>
<p>The upside is that the user has the freedom to use an infinite number of
services (bots, virtual assistants, CRMs, translation services, etc) as well
as speak to any other user in the world, regardless what platform they use.</p>
<p>It also puts much-needed pressure on the gatekeepers to innovate and
differentiate rather than rely on their network effects to attract new
users - creating a much more vibrant, open, competitive marketplace for
users.</p>
<p>See &quot;<a href="https://matrix.org/blog/2022/03/29/how-do-you-implement-interoperability-in-a-dma-world#whats-driven-the-dma">What's driven the DMA?</a>&quot;
for more details.</p>
<h3 id="if-the-dma-requires-that-remote-users-have-the-same-security-as-local-users-how-can-bridges-work">If the DMA requires that remote users have the same security as local users, how can bridges work?</h3>
<p>The DMA requires that the <em>APIs</em> expose the same level of security as for
local users - ie E2EE must be exposed. If the users in a conversation choose
to use a bridge and thus reencrypt the messages, then it is their choice to
tradeoff encryption in favour of interoperability for a given conversation.</p>
<h3 id="does-this-undermine-the-gatekeepers-current-encryption">Does this undermine the gatekeepers’ current encryption?</h3>
<p>Absolutely not. Users talking to other users within the same E2EE-capable
gatekeeper will still be E2EE (assuming the gatekeeper doesn’t pull that rug
from under its users) - and in fact it gives the gatekeepers an excellent way
to advertise the selling point that E2EE is only guaranteed when you speak to
other users on the same platform.</p>
<h3 id="but-why-do-we-need-bridges-if-everyone-spoke-a-common-protocol-you-wouldn-t-ever-have-to-decrypt-messages-to-convert-them-between-protocols">But why do we need bridges? If everyone spoke a common protocol, you wouldn’t ever have to decrypt messages to convert them between protocols.</h3>
<p>Practically speaking, we don’t expect the gatekeepers to throw away their
existing stacks (or implement multihead messengers that also speak open
protocols). It’s true that if they natively spoke Matrix or XMPP then the
reencryption problem would go away, but it’s more realistic to focus on
opening the existing APIs than interpret the legislation as a mandate to
speak Matrix. Perhaps in future players will adopt Matrix of their own
volition.</p>
<h3 id="where-do-these-bridges-come-from">Where do these bridges come from?</h3>
<p>There is already a vibrant community of developers who build unofficial
bridges to the gatekeepers - eg Element, Beeper and hundreds of open source
developers in the Matrix and XMPP communities. Historically these bridges
have been hampered by having to use unofficial and private APIs, making them
a second class citizen - but with open documented APIs guaranteed by the DMA
we eagerly anticipate an explosion of high quality transparent bridges which
will be invisible to the end user.</p>
<h3 id="can-you-run-e2ee-bridges-clientside-to-make-them-safer">Can you run E2EE bridges clientside to make them safer?</h3>
<p>Maybe. For instance, current iMessage bridges work by running iMessage on a
local iPhone or Mac and then reencrypting the messages there for
interoperability. Given the messages are already exposed on the client
anyway, this means that E2EE is not broken - and avoids decrypting them on a
server. There is lots of development in this space currently, and with open
APIs guaranteed by DMA the pace should speed up significantly.</p>
<h3 id="how-can-you-tell-what-service-you-should-use-to-talk-to-a-given-remote-user">How can you tell what service you should use to talk to a given remote user?</h3>
<p>For 1:1 chats this is easy: you can simply ask the user which service they
want to use to talk to a given user, if that user is not already on that
service.</p>
<p>For group chats it is harder, and this is why the deadline for group chats is
years away. The problem is that you need a way to verify the identity of
arbitrary numbers of remote users on  different platforms - effectively
looking up their identity in a secure manner which stops services from
maliciously spoofing identities.</p>
<p>One possible way to solve this would be for users to explicitly link their
identity on one service with that on the gatekeeper’s service - eg “Alice on
AliceChat is talking in the same room as Bob on BobChat; Bob will be asked to
prove to AliceChat that he is the real Bob” - and so if AliceChat has already
validated Bob’s identity, then this can be used to spot him popping up on
other services. It also gives Bob a way to block themselves from ever being
unwittingly bridged to AliceChat.</p>
<p>There are many other approaches too - and the onus is on the industry to
figure out the best solution for decentralised identity in the next 3-4 years
in order to realise the most exciting benefits of the DMA.</p>
<hr />
<p>For a much deeper dive into the above, please check out our post at &quot;<a href="https://matrix.org/blog/2022/03/29/how-do-you-implement-interoperability-in-a-dma-world">How do you implement interoperability in a DMA world?</a>&quot;</p>

                
            </div>
        </article>
        
        <nav class="pagination">
    <div class="prev">
        
    </div>
    <span class="page-number">1 / 15</span>
    <div class="prev">
        
        <a href="https:&#x2F;&#x2F;matrix.org&#x2F;author&#x2F;matthew-hodgson&#x2F;page&#x2F;2&#x2F;">Next ›</a>
        
    </div>
</nav>

    </div>
</div>

    </main>

    <footer class="site-footer">
    <div class="internal-links">
        
        <a href="&#x2F;faq">FAQs</a>
        
        <a href="&#x2F;security-disclosure-policy">Security Disclosure Policy</a>
        
        <a href="&#x2F;security-hall-of-fame">Security Hall of Fame</a>
        
        <a href="&#x2F;legal&#x2F;code-of-conduct">Code of Conduct for Matrix.org</a>
        
        <a href="&#x2F;legal">Legal</a>
        
        <a href="&#x2F;contact">Contact</a>
        
        <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org&#x2F;matrix.org&#x2F;">Site Source</a>
        
    </div>
    <div class="external-links">
        <div>
            
            <a href="https:&#x2F;&#x2F;github.com&#x2F;matrix-org"><img src="/assets/github.svg" alt="GitHub"></a>
            
            <a href="https:&#x2F;&#x2F;gitlab.matrix.org&#x2F;"><img src="/assets/gitlab.svg" alt="GitLab"></a>
            
            <a href="https:&#x2F;&#x2F;mastodon.matrix.org&#x2F;@matrix"><img src="/assets/mastodon.svg" alt="Mastodon"></a>
            
            <a href="https:&#x2F;&#x2F;twitter.com&#x2F;matrixdotorg"><img src="/assets/twitter.svg" alt="Twitter"></a>
            
            <a href="https:&#x2F;&#x2F;www.youtube.com&#x2F;channel&#x2F;UCVFkW-chclhuyYRbmmfwt6w"><img src="/assets/youtube.svg" alt="YouTube"></a>
            
        </div>
    </div>
    <p><a href="/legal/copyright-notice">Copyright Notice</a></p>
</footer>

</body>

</html>
